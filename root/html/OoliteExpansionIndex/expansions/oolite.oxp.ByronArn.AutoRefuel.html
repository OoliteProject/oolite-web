<html>
    <head>
        <title>Expansion AutoRefuel</title>
        <link rel="stylesheet" href="../style.css">
    </head>
    <body>
        <table border="0" width="100%">
            <tr>
                <td>Back to <a href='../index.html'>Index</a></td>
                <td align="right"><small>Page generated: Oct 11, 2023, 3:16:48 PM</small></td>
            </tr>
        </table>

        <h1>Expansion AutoRefuel</h1>

        <h2>Content</h2>
        <ul>
          <li><a href="#warnings">Warnings</a></li>
          <li><a href="#manifest">Manifest</a></li>
          <li><a href="#documentation">Documentation</a></li>
          <li><a href="#equipment">0 Equipment</a></li>
          <li><a href="#ships">0 Ships</a></li>
          <li><a href="#models">0 Models</a></li>
          <li><a href="#scripts">1 Scripts</a></li>
        </ul>

          <a name="warnings">
            <h2>Warnings</h2>
            <ol>
                <li>Information URL mismatch between OXP Manifest and Expansion Manager string length at character position 0</li>
            </ol>
          </a>

        <a name="manifest">
        <h2>Manifest</h2>
            <table border="1">
                <tr>
                    <th></th>
                    <th>from Expansion Manager's OXP list</th>
                    <th>from Expansion Manifest</th>
                </tr>
                <tr>
                    <td>Description</td>
                    <td>Automatically refills your fuel tank when you dock, subtracting the cost from your credits.</td>
                    <td>Automatically refills your fuel tank when you dock, subtracting the cost from your credits.</td>
                </tr>
                <tr>
                    <td>Identifier</td>
                    <td>oolite.oxp.ByronArn.AutoRefuel</td>
                    <td>oolite.oxp.ByronArn.AutoRefuel</td>
                </tr>
                <tr>
                    <td>Title</td>
                    <td>AutoRefuel</td>
                    <td>AutoRefuel</td>
                </tr>
                <tr>
                    <td>Category</td>
                    <td>Mechanics</td>
                    <td>Mechanics</td>
                </tr>
                <tr>
                    <td>Author</td>
                    <td>ByronArn</td>
                    <td>ByronArn</td>
                </tr>
                <tr>
                    <td>Version</td>
                    <td>1.0</td>
                    <td>1.0</td>
                </tr>
                <tr>
                    <td>Tags</td>
                    <td></td>
                    <td></td>
                </tr>
                <tr>
                    <td>Required Oolite Version</td>
                    <td></td>
                    <td></td>
                </tr>
                <tr>
                    <td>Maximum Oolite Version</td>
                    <td></td>
                    <td></td>
                </tr>
                <tr>
                    <td>Required Expansions</td>
                    <td>
                    </td>
                    <td>
                    </td>
                </tr>
                <tr>
                    <td>Optional Expansions</td>
                    <td>
                    </td>
                    <td>
                    </td>
                </tr>
                <tr>
                    <td>Conflict Expansions</td>
                    <td>
                    </td>
                    <td>
                    </td>
                </tr>
                <tr>
                    <td>Information URL</td>
                    <td><a target="_blank" href=""></a></td>
                    <td><a target="_blank" href="">n/a</a></td>
                </tr>
                <tr>
                    <td>Download URL</td>
                    <td><a target="_blank" href="https://wiki.alioth.net/img_auth.php/e/e3/AutoRefuelV1.0.oxz">https://wiki.alioth.net/img_auth.php/e/e3/AutoRefuelV1.0.oxz</a></td>
                    <td><a target="_blank" href="">n/a</a></td>
                </tr>
                <tr>
                    <td>License</td>
                    <td>CC BY-NC-SA 4.0</td>
                    <td>CC BY-NC-SA 4.0</td>
                </tr>
                <tr>
                    <td>File Size</td>
                    <td>n/a</td>
                </tr>
                <tr>
                    <td>Upload date</td>
                    <td>1610873494</td>
                </tr>
            </table>
                </a>

        <a name="documentation">
        <h2>Documentation</h2>
        <p>Also read <a href='http://wiki.alioth.net/index.php/AutoRefuel'>http://wiki.alioth.net/index.php/AutoRefuel</a></p>
        <h3>README.txt</h3>
        <pre>AutoRefuel
----------
by ByronArn

This OXP automatically refuels your ship when you dock with a station that allows refueling.

As pointed out by forum user Norby, some OXP stations and other dockables do not allow for refueling, and he wrote the part of the code that tests for this.

The suggestion to rename this OXP from AutoFuel to AutoRefuel was from forum user phkb.

Any comments or suggestions about this OXP can be directed to forum user ByronArn.

</pre>
        </a>

        <a name="equipment">          
        <h2>Equipment</h2>
            This expansion declares no equipment. This may be related to warnings.
        </a>

        <a name="ships">    
        <h2>Ships</h2>
            This expansion declares no ships. This may be related to warnings.
        </a>

        <a name="models">    
        <h2>Models</h2>
            This expansion declares no models. This may be related to warnings.
        </a>

        <a name="scripts">    
        <h2>Scripts</h2>
            <table>
                <tr>
                    <th>Path</th>
                </tr>
                <tr>
                    <td valign="top">Config/script.js</td>
                    <td><pre>this.name           = &quot;AutoRefuel&quot;;
this.author         = &quot;ByronArn&quot;;
this.copyright      = &quot;(C) 2016 ByronArn.&quot;;
this.licence        = &quot;CC BY-NC-SA 4.0&quot;;
this.description    = &quot;Automatically refills your fuel tank when you dock, subtracting the cost from your credits.&quot;;
this.version        = &quot;1.0&quot;;

&quot;use strict&quot;

// Code for the conditional to see if the the dockable allows refuelng was written by Oolite forum user Norby.
// Suggestion to change name of OXP from AutoFuel to AutoRefuel was from Oolite forum user phkb.

this.shipDockedWithStation = function(station) {
	if (player.ship.fuel &lt; 7) {
		var ds = player.ship.dockedStation;
		if (ds) {
			var barred = false;
			var si = ds.scriptInfo;
			if (si) barred = si[&quot;oolite-barred-equipment&quot;];
			if (!barred || barred.indexOf(&quot;EQ_FUEL&quot;) == -1)  {
				var amount = 7-player.ship.fuel;
				var price = 24/7;
				var total = amount*price;
				if (total &lt; player.credits) {
					player.ship.fuel = 7;
					player.credits-=total;
					player.consoleMessage(&quot;Fuel tank filled! &quot;+total.toFixed(1)+&quot;Cr deducted from your account!&quot;, 10);
				} else player.consoleMessage(&quot;AutoRefuel Error: Not enouch credits to refuel!&quot;);
			} else player.consoleMessage(&quot;AutoRefuel Error: Station does not allow refueling!&quot;);
		}
	}
}

</pre></td>
                </tr>
            </table>
        </a>
    </body>
</html>
