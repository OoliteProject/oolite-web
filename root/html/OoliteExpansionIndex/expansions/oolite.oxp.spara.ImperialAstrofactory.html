<html>
    <head>
        <title>Expansion Imperial Astrofactory</title>
        <link rel="stylesheet" href="../style.css">
    </head>
    <body>
        <table border="0" width="100%">
            <tr>
                <td>Back to <a href='../index.html'>Index</a></td>
                <td align="right"><small>Page generated: Oct 11, 2023, 3:16:49 PM</small></td>
            </tr>
        </table>

        <h1>Expansion Imperial Astrofactory</h1>

        <h2>Content</h2>
        <ul>
          <li><a href="#warnings">Warnings</a></li>
          <li><a href="#manifest">Manifest</a></li>
          <li><a href="#documentation">Documentation</a></li>
          <li><a href="#equipment">0 Equipment</a></li>
          <li><a href="#ships">2 Ships</a></li>
          <li><a href="#models">0 Models</a></li>
          <li><a href="#scripts">2 Scripts</a></li>
        </ul>

          <a name="warnings">
            <h2>Warnings</h2>
            <ol>
                <li>http://wiki.alioth.net/index.php/Imperial%20Astrofactory -&gt; 404 Not Found</li>
                <li>Description mismatch between OXP Manifest and Expansion Manager string length at character position 0</li>
                <li>Information URL mismatch between OXP Manifest and Expansion Manager string length at character position 0</li>
            </ol>
          </a>

        <a name="manifest">
        <h2>Manifest</h2>
            <table border="1">
                <tr>
                    <th></th>
                    <th>from Expansion Manager's OXP list</th>
                    <th>from Expansion Manifest</th>
                </tr>
                <tr>
                    <td>Description</td>
                    <td></td>
                    <td></td>
                </tr>
                <tr>
                    <td>Identifier</td>
                    <td>oolite.oxp.spara.ImperialAstrofactory</td>
                    <td>oolite.oxp.spara.ImperialAstrofactory</td>
                </tr>
                <tr>
                    <td>Title</td>
                    <td>Imperial Astrofactory</td>
                    <td>Imperial Astrofactory</td>
                </tr>
                <tr>
                    <td>Category</td>
                    <td>Dockables</td>
                    <td>Dockables</td>
                </tr>
                <tr>
                    <td>Author</td>
                    <td>spara, phkb, gsagostinho</td>
                    <td>spara, phkb, gsagostinho</td>
                </tr>
                <tr>
                    <td>Version</td>
                    <td>2.4</td>
                    <td>2.4</td>
                </tr>
                <tr>
                    <td>Tags</td>
                    <td></td>
                    <td></td>
                </tr>
                <tr>
                    <td>Required Oolite Version</td>
                    <td></td>
                    <td></td>
                </tr>
                <tr>
                    <td>Maximum Oolite Version</td>
                    <td></td>
                    <td></td>
                </tr>
                <tr>
                    <td>Required Expansions</td>
                    <td>
                    </td>
                    <td>
                    </td>
                </tr>
                <tr>
                    <td>Optional Expansions</td>
                    <td>
                    </td>
                    <td>
                    </td>
                </tr>
                <tr>
                    <td>Conflict Expansions</td>
                    <td>
                    </td>
                    <td>
                    </td>
                </tr>
                <tr>
                    <td>Information URL</td>
                    <td><a target="_blank" href=""></a></td>
                    <td><a target="_blank" href="">n/a</a></td>
                </tr>
                <tr>
                    <td>Download URL</td>
                    <td><a target="_blank" href="https://wiki.alioth.net/img_auth.php/a/a9/Astrofactory.oxz">https://wiki.alioth.net/img_auth.php/a/a9/Astrofactory.oxz</a></td>
                    <td><a target="_blank" href="">n/a</a></td>
                </tr>
                <tr>
                    <td>License</td>
                    <td>CC-BY-SA 3.0</td>
                    <td>CC-BY-SA 3.0</td>
                </tr>
                <tr>
                    <td>File Size</td>
                    <td>n/a</td>
                </tr>
                <tr>
                    <td>Upload date</td>
                    <td>1610873406</td>
                </tr>
            </table>
                </a>

        <a name="documentation">
        <h2>Documentation</h2>
        
        <h3>imperial_astrofactory_readme_&amp;_license.txt</h3>
        <pre>Imperial Astrofactory OXP ver 2.4 (17-10-2017)

Author: spara (Mika Spåra)

_Description_

This oxp Griffifies the Astrofactory station from Dictators oxp by Ramirez.

It works as a standalone station or if Dictators oxp is installed substitutes the old astrostation.

_Credits_

Original model and textures by Ramirez. New rock texture, normalmap and custom shader by Griff. Dome texture, other normalmaps and emissions by spara.

_Install_

Install the OXP by copying Audible_docking_clearance.oxp to your AddOns-folder.

------

This work is licensed under the Creative Commons Attribution-Noncommercial-Share Alike 3.0 Unported License. To view a copy of this license, visit http://creativecommons.org/licenses/by-nc-sa/3.0/

2.4
- Corrected more errors in shipdata.plist.

2.3
- Corrected errors in shipdata.plist.
- Changed category to &quot;Dockables&quot; rather than &quot;Ships&quot;.

2.2 update by gsagostinho
- new textures, including new asteroid normal map
- uses new logo, matching the new textures of Dictators version 2.1
- added Astrofactory to the Ship Library

2.1 update by phkb
- Updated shipdata.plist to use newer subentity definitions.
- Added manifest.plist file
- Packaged as OXZ
</pre>
        </a>

        <a name="equipment">          
        <h2>Equipment</h2>
            This expansion declares no equipment. This may be related to warnings.
        </a>

        <a name="ships">    
        <h2>Ships</h2>
            <table>
                <tr>
                    <th>Name</th>
                </tr>
                <tr>
                    <td><a href="../ships/dfl_astrofactory.html">Imperial AstroFactory</a></td>
                </tr>
                <tr>
                    <td><a href="../ships/dfl_factorydock.html">dfl_factorydock</a></td>
                </tr>
            </table>
        </a>

        <a name="models">    
        <h2>Models</h2>
            This expansion declares no models. This may be related to warnings.
        </a>

        <a name="scripts">    
        <h2>Scripts</h2>
            <table>
                <tr>
                    <th>Path</th>
                </tr>
                <tr>
                    <td valign="top">Config/script.js</td>
                    <td><pre>&quot;use strict&quot;;
this.name = &quot;dfl_imperial_astrofactory&quot;;
this.author = &quot;Spara&quot;;
this.copyright = &quot;2013 Mika Spåra&quot;;
this.licence     = &quot;CC BY-NC-SA 3.0&quot;;
this.description = &quot;Add astrofactory to dictatorship systems&quot;;
this.version = &quot;2.1&quot;;

this.startUp = function() {
	if (worldScripts[&quot;dictators.js&quot;]) {
		delete this.systemWillPopulate;
	}
}

this.systemWillPopulate = function() {
	if (system.government === 3 &amp;&amp; system.economy &lt; 3 &amp;&amp; system.countShipsWithRole(&quot;astrofactory&quot;) === 0) {
		if (worldScripts.station_validator &amp;&amp; (worldScripts.station_validator.$deaths(&quot;astrofactory&quot;).length !== 0)) return;
		system.addShipsToRoute(&quot;astrofactory&quot;, 1, 0.3 , &quot;wp&quot;);
		system.addShipsToRoute(&quot;asteroid&quot;, 30, 0.3 , &quot;wp&quot;);
	}
}
</pre></td>
                </tr>
                <tr>
                    <td valign="top">Scripts/dfl_astrofactory_market.js</td>
                    <td><pre>&quot;use strict&quot;;
this.name = &quot;dfl_astrofactory_market&quot;;
this.author = &quot;spara&quot;;
this.copyright = &quot;2014 spara&quot;;
this.license     = &quot;CC BY-NC-SA 4.0&quot;;

this.$originalDefs = {
      &quot;food&quot; : [0, 0, 19, -2, 0, 1, 1, 1, 0],
      &quot;textiles&quot; : [0, 0, 12, -1, -1, 5, 3, 3, 0],
      &quot;radioactives&quot; : [0, 0, 65, -3, -3, 2, 7, 7, 0],
      &quot;slaves&quot; : [0, 0, 100, -1, -1, 10, 3, 3, 0],
      &quot;liquor_wines&quot; : [0, 0, 93, -5, -5, 251, 15, 15, 0],
      &quot;luxuries&quot; : [0, 0, 196, 8, 8, 2, 3, 3, 0],
      &quot;narcotics&quot; : [0, 0, 235, 29, 29, 8, 90, 90, 0],
      &quot;computers&quot; : [0, 0, 134, 14, 14, 90, 2, 1, 0],
      &quot;machinery&quot; : [0, 0, 98, 6, 6, 100, 2, 1, 0],
      &quot;alloys&quot; : [0, 0, 90, 1, 1, 2, 31, 31, 0],
      &quot;firearms&quot; : [0, 0, 100, 13, 13, 0, 0, 0, 0],
      &quot;furs&quot; : [0, 0, 20, -9, -9, 0, -1, -1, 0],
      &quot;minerals&quot; : [0, 0, 42, -1, -1, 12, 3, 3, 0],
      &quot;gold&quot; : [0, 0, 107, -1, -1, 5, 20, 20, 1],
      &quot;platinum&quot; : [0, 0, 191, -2, -2, 5, 21, 21, 1],
      &quot;gem_stones&quot; : [0, 0, 55, -1, -1, 250, 15, 15, 2],
      &quot;alien_items&quot; : [0, 0, 10, 0, 0, 0, 0, 0, 0]
};

this.updateLocalCommodityDefinition = function(goodDefinition) {
	var commodity = goodDefinition.key;
	var oldDefs = this.$originalDefs[commodity];
	//old style definition found for the good. calculate it the old way
	if (oldDefs) {
		var market_base_price = oldDefs[2];
		var market_eco_adjust_price = oldDefs[3];
		var market_eco_adjust_quantity = oldDefs[4];
		var market_base_quantity = oldDefs[5];
		var market_mask_price = oldDefs[6];
		var market_mask_quantity = oldDefs[7];
		var market_rnd = Math.floor(Math.random() * 256);

		var economy = system.economy;

		var price = (market_base_price + (market_rnd &amp; market_mask_price) + (economy * market_eco_adjust_price)) &amp; 255;
		price *= 0.4;

		var quantity = (market_base_quantity + (market_rnd &amp; market_mask_quantity) - (economy * market_eco_adjust_quantity)) &amp; 255;
		if (quantity &gt; 127) quantity = 0;
		quantity &amp;= 63;

		goodDefinition.price = price * 10;
		goodDefinition.quantity = quantity;
	}
	//no definition found. nullify the goods.
	else {
		goodDefinition.price = 0;
		goodDefinition.quantity = 0;
	}
	return goodDefinition;
};
</pre></td>
                </tr>
            </table>
        </a>
    </body>
</html>
