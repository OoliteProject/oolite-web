<html>
    <head>
        <title>Expansion Wildships</title>
        <link rel="stylesheet" href="../style.css">
    </head>
    <body>
        <table border="0" width="100%">
            <tr>
                <td>Back to <a href='../index.html'>Index</a></td>
                <td align="right"><small>Page generated: Oct 11, 2023, 3:16:49 PM</small></td>
            </tr>
        </table>

        <h1>Expansion Wildships</h1>

        <h2>Content</h2>
        <ul>
          
          <li><a href="#manifest">Manifest</a></li>
          <li><a href="#documentation">Documentation</a></li>
          <li><a href="#equipment">0 Equipment</a></li>
          <li><a href="#ships">43 Ships</a></li>
          <li><a href="#models">0 Models</a></li>
          <li><a href="#scripts">4 Scripts</a></li>
        </ul>


        <a name="manifest">
        <h2>Manifest</h2>
            <table border="1">
                <tr>
                    <th></th>
                    <th>from Expansion Manager's OXP list</th>
                    <th>from Expansion Manifest</th>
                </tr>
                <tr>
                    <td>Description</td>
                    <td>Four new ships plus the Kiota station variants.</td>
                    <td>Four new ships plus the Kiota station variants.</td>
                </tr>
                <tr>
                    <td>Identifier</td>
                    <td>oolite.oxp.Thargoid.Wildships</td>
                    <td>oolite.oxp.Thargoid.Wildships</td>
                </tr>
                <tr>
                    <td>Title</td>
                    <td>Wildships</td>
                    <td>Wildships</td>
                </tr>
                <tr>
                    <td>Category</td>
                    <td>Dockables</td>
                    <td>Dockables</td>
                </tr>
                <tr>
                    <td>Author</td>
                    <td>Thargoid</td>
                    <td>Thargoid</td>
                </tr>
                <tr>
                    <td>Version</td>
                    <td>1.11.4</td>
                    <td>1.11.4</td>
                </tr>
                <tr>
                    <td>Tags</td>
                    <td></td>
                    <td></td>
                </tr>
                <tr>
                    <td>Required Oolite Version</td>
                    <td></td>
                    <td></td>
                </tr>
                <tr>
                    <td>Maximum Oolite Version</td>
                    <td></td>
                    <td></td>
                </tr>
                <tr>
                    <td>Required Expansions</td>
                    <td>
                    </td>
                    <td>
                    </td>
                </tr>
                <tr>
                    <td>Optional Expansions</td>
                    <td>
                    </td>
                    <td>
                    </td>
                </tr>
                <tr>
                    <td>Conflict Expansions</td>
                    <td>
                    </td>
                    <td>
                    </td>
                </tr>
                <tr>
                    <td>Information URL</td>
                    <td><a target="_blank" href="http://wiki.alioth.net/index.php/Wildships_OXP">http://wiki.alioth.net/index.php/Wildships_OXP</a></td>
                    <td><a target="_blank" href="">n/a</a></td>
                </tr>
                <tr>
                    <td>Download URL</td>
                    <td><a target="_blank" href="https://wiki.alioth.net/img_auth.php/c/c1/Wild_ships_1.11.4.oxz">https://wiki.alioth.net/img_auth.php/c/c1/Wild_ships_1.11.4.oxz</a></td>
                    <td><a target="_blank" href="">n/a</a></td>
                </tr>
                <tr>
                    <td>License</td>
                    <td>CC-BY-NC-SA 4.0</td>
                    <td>CC-BY-NC-SA 4.0</td>
                </tr>
                <tr>
                    <td>File Size</td>
                    <td>n/a</td>
                </tr>
                <tr>
                    <td>Upload date</td>
                    <td>1610873459</td>
                </tr>
            </table>
                </a>

        <a name="documentation">
        <h2>Documentation</h2>
        <p>Also read <a href='http://wiki.alioth.net/index.php/Wildships'>http://wiki.alioth.net/index.php/Wildships</a></p>
        <h3>WildShips Readme &amp; License.txt</h3>
        <pre>WildShips OXP by Thargoid.

New ships from the Aquarian Shipbuilding Corporation of Aqualina in Galaxy 3, plus the Kiota class stations. 

Stations:

The Kiota is a new modular design of station, allowing customers to quickly commission a variety of custom-made stations for a variety of purposes. Each is based around a central &quot;Wanyama&quot; hub module with a simplified bi-directional central docking area. The hub area has spacious areas which can be used for either spaceship hangar and maintenance, an extensive machine area or central low-gravity work or recreational space.

The hub is linked as standard by a transportation system out to whichever modules are attached to it, or optionally a solid strut array if additional occupiable space is required.

Standard varieties of the Kiota include:

* Habitat - These huge stations can accomodate several hundreds of thousands of people in their spaceous ring design. If this is insufficient, then the double-ringed mega-habitat variant can accomodate and sustain the needs of a million inhabitants.

* Research - The research Kiota offers a wide range of laboratory and investigation environments, in either two or four isolated modules.

* Manufacturing - Offering either two or four distinct factory zones, these stations offer a hugely flexible and economic route to mass production to fulfil the needs of all bar the largest mega-corporate entity.

* Bio - What the manufacturing station offers to the industrial worlds, the bio variant offers to the agricultural. Each of the two or four zones is an entirely isolated and distinct ecosystem, suitable for the growth of almost anything natural to any world.

* Communications - A relatively cheap and powerful communications array. Suitable for system-wide coverage and boosting of galactic signals. Massive signal processor arrays are fitted as standard in place of the shipyard areas of the central station hub.

* Solar - Often used for solar research, fuel harvesting and power generation. This station model features additional heat shielding, at the expense of the shipyard areas available in most of the above variants. 

Ships:

All of the ships feature a new and more efficient quirium plasma drive system. This enables greater fuel efficiency by replacing the normal quirium reaction &quot;burn&quot; with a plasma reaction. This gives not only the improved thrust rates and speeds, but is better for the space environment as no unreacted exhaust trails are given off by the vessels.

* Duma - These fast multi-purpose ships are designed for the similar multi-role usage as the common and popular Cobra 3. From trader to bounty hunter to military and police applications, these versatile ships are masters of all.

* Tembo - Bulk haulage is the role of these vessels. Rugged and simple, their sole purpose is to move as much cargo as possible with the minimum of fuss and cost. The base ship can carry up to 500 tons at a time, and the optional trailer unit can double that capacity. Lightly armed and armoured, they depend on escorts to ensure they get through safely, but when it comes to carrying they are second to none.

* Chatu - A large jump-capable combat ship designed for military, naval and general system protection roles. It has limited cargo capacity, but makes up for it in speed and all-round fighting capability.

* Nyoka - The little brother of the Chatu, this short-range escort fighter packs a similar punch to its big brother, but lacks the jump capability and cargo space.

This OXP requires at least Oolite v1.77, and will not run on lower versions.

--------------------------------------------------------------

License:

CC-BY-NC-SA 4.0

--------------------------------------------------------------
Instructions:

Unzip the file, and then move the folder &quot;WildShips 1.08.oxp&quot; to the AddOns directory of your Oolite installation. Then start the game up and the ships should be added. 

--------------------------------------------------------------
Version history:

25/03/2012 - First release, version 1.00
04/04/2012 - Version 1.01 - smaller textures, plus adjustments on kiota script, shader script and turrets.
09/04/2012 - Version 1.02 - further fine tuning of the OXP due to CTD issues
10/04/2012 - Version 1.03 - final tweak to shader code to remove log error.
18/04/2012 - Version 1.04 - minor script correction plus addition of specific police version of the Duma.
27/05/2012 - Version 1.05 - heat insulation increase for solar station, plus adjustments to the lift/callback code
08/01/2013 - Version 1.06 - up&#39;d min version to 1.77, and added multiple docks and a tweak to the lift scripting. Also adds some tanker craft which fly between the system main station and solar stations where they exist.
19/02/2014 - Version 1.07 - added normal and diffuse maps, plus two tribal reskins for the Chatu and the Duma. All thanks to Keeper
20/02/2014 - Version 1.08 - adding and tweaking a couple of textures missing/wrong in 1.07
25/06/2014 - Version 1.09 - updated for 1.80, with populator script and a few other tweaks. Thanks to Spara
09/05/2015 - Version 1.10 - updated for 1.82, with market script. -spara-
10/05/2015 - Version 1.10.1 - some textures were corrupted in 1.10. -spara-
14/09/2015 - Version 1.11 - roles recasted, weapons set to auto, license updated. -spara-
04/04/2016 - Version 1.11.1 - chatu circular escort references fixed. -spara-
24/07/2017 - Version 1.11.2 - obsolete turret ranges removed, custom turret shaders removed, subtle glow added to turrets, glow added to the dock.-spara-
06/10/2018 - Version 1.11.3 - non existential function reference fixed in wildShips_kiota.js. (on line 142 this.shipDied -&gt; this.stopTimers). Spotted by Svengali -spara-
24/09/2020 - Version 1.11.4 - bugfixed addition of manufactoring stations to industrial worlds in populator. Spotted by dybal -spara-

--------------------------------------------------------------

Acknowledgements:

V1.00 - With thanks to Griff for shader advice.
V1.01/2 - With thanks to cim, Gimbal Locke and Gimi for the (ongoing) efforts to sort out the CTD issues
V1.03 - With thanks to Ahruman for the guru advice.
V1.04 - Nod to Capt Murphy.
V1.05 - Credits to Eric Walch and Commander McLane.
V1.07 - Thanks to Keeper for the normal and diffuse maps, plus the two new skins for the tribal duma and chatu.
V1.09 - Thanks to Spara for the 1.80 populator tweaks.
</pre>
        </a>

        <a name="equipment">          
        <h2>Equipment</h2>
            This expansion declares no equipment. 
        </a>

        <a name="ships">    
        <h2>Ships</h2>
            <table>
                <tr>
                    <th>Name</th>
                </tr>
                <tr>
                    <td><a href="../ships/wildShips_anaconda.html">Anaconda Tanker</a></td>
                </tr>
                <tr>
                    <td><a href="../ships/wildShips_chatu_hunter.html">wildShips_chatu_hunter</a></td>
                </tr>
                <tr>
                    <td><a href="../ships/wildShips_chatu_template.html">Chatu</a></td>
                </tr>
                <tr>
                    <td><a href="../ships/wildShips_chatu_trader.html">wildShips_chatu_trader</a></td>
                </tr>
                <tr>
                    <td><a href="../ships/wildShips_duma.html">Duma</a></td>
                </tr>
                <tr>
                    <td><a href="../ships/wildShips_dumaFleet.html">Duma Fleet Hauler</a></td>
                </tr>
                <tr>
                    <td><a href="../ships/wildShips_fuelFrame.html">Fuel Frame</a></td>
                </tr>
                <tr>
                    <td><a href="../ships/wildShips_fuelTank.html">Fuel Tank</a></td>
                </tr>
                <tr>
                    <td><a href="../ships/wildShips_hawksbill.html">wildShips_hawksbill</a></td>
                </tr>
                <tr>
                    <td><a href="../ships/wildShips_kiota2Comms.html">Kiota Relay Station</a></td>
                </tr>
                <tr>
                    <td><a href="../ships/wildShips_kiota2Disc.html">Kiota Manufacturing Station</a></td>
                </tr>
                <tr>
                    <td><a href="../ships/wildShips_kiota2Ring.html">wildShips_kiota2Ring</a></td>
                </tr>
                <tr>
                    <td><a href="../ships/wildShips_kiota2Solar.html">Kiota Solar Station</a></td>
                </tr>
                <tr>
                    <td><a href="../ships/wildShips_kiota2Sphere.html">Kiota Biosphere Station</a></td>
                </tr>
                <tr>
                    <td><a href="../ships/wildShips_kiota2Spur.html">Kiota Research Station</a></td>
                </tr>
                <tr>
                    <td><a href="../ships/wildShips_kiota4Comms.html">Kiota Relay Station</a></td>
                </tr>
                <tr>
                    <td><a href="../ships/wildShips_kiota4Disc.html">Kiota Manufacturing Station</a></td>
                </tr>
                <tr>
                    <td><a href="../ships/wildShips_kiota4Ring.html">Kiota Habitat Station</a></td>
                </tr>
                <tr>
                    <td><a href="../ships/wildShips_kiota4RingVariant.html">wildShips_kiota4RingVariant</a></td>
                </tr>
                <tr>
                    <td><a href="../ships/wildShips_kiota4Solar.html">Kiota Solar Station</a></td>
                </tr>
                <tr>
                    <td><a href="../ships/wildShips_kiota4Sphere.html">Kiota Biosphere Station</a></td>
                </tr>
                <tr>
                    <td><a href="../ships/wildShips_kiota4Spur.html">Kiota Research Station</a></td>
                </tr>
                <tr>
                    <td><a href="../ships/wildShips_kiota8Ring.html">Kiota Mega Habitat Station</a></td>
                </tr>
                <tr>
                    <td><a href="../ships/wildShips_kiota8RingVariant.html">Kiota Mega Habitat Station</a></td>
                </tr>
                <tr>
                    <td><a href="../ships/wildShips_kiotaComms.html">Kiota Comms Array</a></td>
                </tr>
                <tr>
                    <td><a href="../ships/wildShips_kiotaDisc.html">Kiota Disc</a></td>
                </tr>
                <tr>
                    <td><a href="../ships/wildShips_kiotaDock.html">Kiota Dock Ring (Hidden)</a></td>
                </tr>
                <tr>
                    <td><a href="../ships/wildShips_kiotaLRing.html">Kiota Large Ring</a></td>
                </tr>
                <tr>
                    <td><a href="../ships/wildShips_kiotaLift.html">Kiota Lift</a></td>
                </tr>
                <tr>
                    <td><a href="../ships/wildShips_kiotaSRing.html">Kiota Small Ring</a></td>
                </tr>
                <tr>
                    <td><a href="../ships/wildShips_kiotaSolar.html">Kiota Solar Array</a></td>
                </tr>
                <tr>
                    <td><a href="../ships/wildShips_kiotaSolidStrut.html">Kiota Solid Strut</a></td>
                </tr>
                <tr>
                    <td><a href="../ships/wildShips_kiotaSphere.html">Kiota Sphere</a></td>
                </tr>
                <tr>
                    <td><a href="../ships/wildShips_kiotaSpur.html">Kiota Spur</a></td>
                </tr>
                <tr>
                    <td><a href="../ships/wildShips_kiotaStrut.html">Kiota Strut</a></td>
                </tr>
                <tr>
                    <td><a href="../ships/wildShips_kiotaTurret.html">Kiota Turret</a></td>
                </tr>
                <tr>
                    <td><a href="../ships/wildShips_nyoka.html">Nyoka</a></td>
                </tr>
                <tr>
                    <td><a href="../ships/wildShips_policeDuma.html">wildShips_policeDuma</a></td>
                </tr>
                <tr>
                    <td><a href="../ships/wildShips_tembo.html">Tembo</a></td>
                </tr>
                <tr>
                    <td><a href="../ships/wildShips_temboTrailer.html">Tembo Trailer</a></td>
                </tr>
                <tr>
                    <td><a href="../ships/wildShips_tribalChatu.html">wildShips_tribalChatu</a></td>
                </tr>
                <tr>
                    <td><a href="../ships/wildShips_tribalDuma.html">wildShips_tribalDuma</a></td>
                </tr>
                <tr>
                    <td><a href="../ships/wildShips_woma.html">wildShips_woma</a></td>
                </tr>
            </table>
        </a>

        <a name="models">    
        <h2>Models</h2>
            This expansion declares no models. 
        </a>

        <a name="scripts">    
        <h2>Scripts</h2>
            <table>
                <tr>
                    <th>Path</th>
                </tr>
                <tr>
                    <td valign="top">Scripts/wildShips_kiota.js</td>
                    <td><pre>this.name					= &quot;wildShips_kiota.js&quot;;
this.author					= &quot;Thargoid with bits from Eric Walch&quot;;
this.description			= &quot;Script for Kiota stations&quot;;
&quot;use strict&quot;;

this.shipSpawned = function()
	{
	if(!this.ship.scriptInfo.stationOrientation)
		{ this.stationOrientation = &quot;random&quot; }
	else
		{ this.stationOrientation = this.ship.scriptInfo.stationOrientation.toLowerCase() }
	
	switch(this.ship.scriptInfo.stationOrientation)
		{
		default:
		case &quot;random&quot;:	// random orientation
			{
			this.rotateStation(Vector3D.randomDirection());
			break;
			}
		case &quot;planet&quot;:	// main planet
			{
			if(system.mainPlanet)
				{ this.rotateStation(system.mainPlanet.position.subtract(this.ship.position).direction()) }
			else
				{ this.rotateStation(Vector3D.randomDirection()); }
			break;
			}
		case &quot;sun&quot;:	// system sun (pointing away from the sun rather than towards it)
			{
			if(system.sun)
				{ this.rotateStation(this.ship.position.subtract(system.sun.position).direction()) }
			else
				{ this.rotateStation(Vector3D.randomDirection()); }
			break;
			}
		case &quot;station&quot;:	// system main station
			{
			if(system.mainStation)
				{ this.rotateStation(system.mainStation.position.subtract(this.ship.position).direction()) }
			else
				{ this.rotateStation(Vector3D.randomDirection()); }
			break;
			}
		case &quot;witchpoint&quot;:	// witchpoint
			{
			this.rotateStation(this.ship.position.multiply(-1).direction());
			break;
			}
		}
		
	this.liftArray = [];
	this.liftHomeArray = [];
	this.liftStatusArray = [];
	this.subArray = this.ship.subEntities;
	if(this.subArray.length &gt; 0)
		{
		var listCounter = 0 ; // reset the counter
		for(listCounter = 0;listCounter&lt;this.subArray.length;listCounter++)
			{
			if(this.subArray[listCounter].hasRole(&quot;wildShips_kiotaLift&quot;))
				{
				this.liftArray.push(this.subArray[listCounter]);
				this.liftHomeArray.push(this.subArray[listCounter].position);
				this.liftStatusArray.push(&quot;down&quot;);				
				}
			}

		this.distanceTimer = new Timer(this, this.distanceCheck, 0, 10);
		}	
		
	if(this.ship &amp;&amp; this.ship.hasRole(&quot;wildShips_solar&quot;))
		{ this.tankerTimer = new Timer(this, this.launchTanker, 150, 300); }
	}

this.launchTanker = function()
	{
	if(Math.random() &gt; 0.9)
		{
		this.tanker = this.ship.launchShipWithRole(&quot;wildShips_tanker&quot;);
		this.tanker.switchAI(&quot;route1traderAI.plist&quot;);
		this.tanker.AIState = &quot;HEAD_FOR_PLANET&quot;;
		}
	
	if(Math.random() &gt; 0.9 &amp;&amp; system.mainStation)
		{
		this.tanker = system.mainStation.launchShipWithRole(&quot;wildShips_tanker&quot;);
		this.tanker.switchAI(&quot;wildShips_solarAI.plist&quot;);
		}	
	}
	
this.distanceCheck = function()
	{
	if(this.checkDistance())
		{
		if(!this.callbackID) { this.callbackID = addFrameCallback(this.moveLifts.bind(this)); }
		if(!this.liftTimer) { this.liftTimer = new Timer(this, this.triggerLifts, 0, 10); }
		if(!this.missileTimer) { this.missileTimer = new Timer(this, this.awardMissile, 0, 30); }
		return;
		}
	else
		{ this.stopTimers(); }	
	}

this.checkDistance = function () 
	{
	if(!this.ship || ! player.ship || !this.ship.isValid || !player.ship.isValid)
		{ return false; }
	return (this.ship.position.distanceTo(player.ship) &lt; 256E3);
	}	
	
this.rotateStation = function (targetVector)
	{
	var angle = this.ship.heading.angleTo(targetVector);
	var cross = this.ship.heading.cross(targetVector).direction();
	this.ship.orientation = this.ship.orientation.rotate(cross,-angle);
	}

this.awardMissile = function()
	{
	if(this.ship.missiles.length &lt; this.ship.missileCapacity)
		{ this.ship.awardEquipment(this.ship.selectNewMissile()); }
	}
	
this.triggerLifts = function()
	{
	var listCounter = 0 ; // reset the counter
	for(listCounter = 0;listCounter&lt;this.liftArray.length;listCounter++)
		{
		if(this.liftStatusArray[listCounter] === &quot;down&quot; &amp;&amp; Math.random() &lt; (0.1 * Math.random()))
			{ this.liftStatusArray[listCounter] = &quot;rising&quot;; }
		if(this.liftStatusArray[listCounter] === &quot;up&quot; &amp;&amp; Math.random() &lt; (0.1 * Math.random()))
			{ this.liftStatusArray[listCounter] = &quot;falling&quot;; }	
		}
	}

this.moveLifts = function(delta)
	{
	if(!this.ship.isValid || !this.ship.status)
		{
		this.stopTimers();
		return;
		}
   
	var listCounter = 0 ; // reset the counter
	var distance = delta * 60; // 60 meter per second
	for(listCounter = 0;listCounter&lt;this.liftArray.length;listCounter++)
		{
		if(this.liftStatusArray[listCounter] === &quot;rising&quot;)
			{
			this.liftArray[listCounter].position = this.liftArray[listCounter].position.add(this.liftArray[listCounter].vectorUp.multiply(distance));
			if(this.liftArray[listCounter].position.distanceTo(this.liftHomeArray[listCounter]) &gt;= 1145)
				{
				this.liftArray[listCounter].position = this.liftHomeArray[listCounter].add(this.liftArray[listCounter].vectorUp.multiply(1150));
				this.liftStatusArray[listCounter] = &quot;up&quot;;
				}
			}
         
		if(this.liftStatusArray[listCounter] === &quot;falling&quot;)
			{
			this.liftArray[listCounter].position = this.liftArray[listCounter].position.subtract(this.liftArray[listCounter].vectorUp.multiply(distance));
			if((this.liftArray[listCounter].position.distanceTo(this.liftHomeArray[listCounter]) &lt;= 5) || (this.liftArray[listCounter].position.subtract(this.liftHomeArray[listCounter]).direction().angleTo(this.liftArray[listCounter].vectorUp) &lt; 0.1))
				{
				this.liftArray[listCounter].position = this.liftHomeArray[listCounter];
				this.liftStatusArray[listCounter] = &quot;down&quot;;
				}
			}	
		}
	}
	
this.playerWillEnterWitchspace = this.entityDestroyed = this.stopTimers = function()
	{
	if(this.callbackID)
		{
		removeFrameCallback(this.callbackID); 
		delete this.callbackID;
		}
		
	if(this.missileTimer &amp;&amp; this.missileTimer.isRunning)
		{
		this.missileTimer.stop();
		delete this.missileTimer;
		}
		
	if(this.liftTimer &amp;&amp; this.liftTimer.isRunning)
		{
		this.liftTimer.stop();
		delete this.liftTimer;
		}
	}

this.shipFiredMissile = function(missile, target)
	{
	if(missile &amp;&amp; target &amp;&amp; this.ship.heading.angleTo(target.position.subtract(this.ship.position).direction()) &gt; (Math.PI / 2))
		{
		missile.orientation = missile.orientation.rotate(missile.vectorUp, Math.PI); 
		missile.position = this.ship.position.subtract(this.ship.vectorForward.multiply(this.ship.position.distanceTo(missile.position)));
		}
	}
</pre></td>
                </tr>
                <tr>
                    <td valign="top">Scripts/wildShips_populator.js</td>
                    <td><pre>this.name					= &quot;wildShips_populator.js&quot;;
this.author					= &quot;Thargoid&quot;;
this.description			= &quot;Script to add Kiota stations to certain systems&quot;;
&quot;use strict&quot;;

//1.09 updated to use the core populator -spara-
//1.11.4 bugfixing missing manufacturing stations -spara-

this.systemWillPopulate = function (){
	this.addedCount = 0;
	//calculate distances
	var planetToSun = system.sun.position.distanceTo(system.mainPlanet.position);
	var wpToSun = system.sun.position.magnitude();
	
	//habitats
	if(system.scrambledPseudoRandomNumber(127) &gt; 0.25) {
		// add habitat stations between the planet and sun, based on population size
		this.addedCount += 0.1;
		if (system.population &lt; 30)
			var hab_station = &quot;wildShips_kiota2Ring&quot;;
		else {
			if (system.population &gt; 45) {
				if (system.scrambledPseudoRandomNumber(319) &gt; 0.5)
					var hab_station = &quot;wildShips_kiota8Ring&quot;;
				else
					var hab_station = &quot;wildShips_kiota8RingV&quot;;
			}
			else {
				if(system.scrambledPseudoRandomNumber(319) &gt; 0.5)
					var hab_station = &quot;wildShips_kiota4Ring&quot;;
				else
					var hab_station = &quot;wildShips_kiota4RingV&quot;;
			}
		}
		var distanceFromPlanetSurface = 0.1 * (planetToSun  - system.sun.radius - system.mainPlanet.radius);
		//randomize the position a bit
		var x_coord = system.scrambledPseudoRandomNumber(598) * 25E3;
		var y_coord = system.scrambledPseudoRandomNumber(482) * 25E3;
		var z_coord = system.mainPlanet.radius + distanceFromPlanetSurface;
		var exactPosition = Vector3D(x_coord, y_coord, z_coord).fromCoordinateSystem(&quot;psm&quot;);
		system.setPopulator(&quot;wild_ships_habitat&quot;, {
			callback: function(pos) {			
				system.addShips(hab_station, 1, pos, 0);					
			}.bind(this),
			location: &quot;COORDINATES&quot;,
			coordinates: exactPosition,
			deterministic: true
		})
	}

	//comms stations
	if(system.scrambledPseudoRandomNumber(891) &gt; (0.5 + this.addedCount)) {
		// add comms stations
		this.addedCount += 0.1;
		if(system.population &gt; 40)
			var comms_station = &quot;wildShips_kiota4Comms&quot;;
		else
			var comms_station = &quot;wildShips_kiota2Comms&quot;;
		var distanceFromWp = 0.3 * (wpToSun  - system.sun.radius);
		//randomize the position a bit
		var x_coord = system.scrambledPseudoRandomNumber(599) * 25E3;
		var y_coord = system.scrambledPseudoRandomNumber(483) * 25E3;
		var z_coord = distanceFromWp;
		var exactPosition = Vector3D(x_coord, y_coord, z_coord).fromCoordinateSystem(&quot;wsm&quot;);
		system.setPopulator(&quot;wild_ships_comms&quot;, {
			callback: function(pos) {			
				system.addShips(comms_station, 1, pos, 0);					
			}.bind(this),
			location: &quot;COORDINATES&quot;,
			coordinates: exactPosition,
			deterministic: true
		})
	}
		
	//solar stations
	if(system.scrambledPseudoRandomNumber(189) &gt; (0.5 + this.addedCount)) {
		// add solar stations
		this.addedCount += 0.1;
		if(system.population &gt; 40)
			var solar_station = &quot;wildShips_kiota4Solar&quot;;
		else
			var solar_station = &quot;wildShips_kiota2Solar&quot;;
		var distanceFromPlanetSurface = 0.9 * (planetToSun  - system.sun.radius - system.mainPlanet.radius);
		//randomize the position a bit
		var x_coord = system.scrambledPseudoRandomNumber(600) * 25E3;
		var y_coord = system.scrambledPseudoRandomNumber(484) * 25E3;
		var z_coord = system.mainPlanet.radius + distanceFromPlanetSurface;
		var exactPosition = Vector3D(x_coord, y_coord, z_coord).fromCoordinateSystem(&quot;psm&quot;);
		system.setPopulator(&quot;wild_ships_solar&quot;, {
			callback: function(pos) {			
				system.addShips(solar_station, 1, pos, 0);					
			}.bind(this),
			location: &quot;COORDINATES&quot;,
			coordinates: exactPosition,
			deterministic: true
		})		
	}
	
	//research stations
	if(system.techLevel &gt; 6 &amp;&amp; system.scrambledPseudoRandomNumber(713) &gt; (0.5 + this.addedCount)) {
		// add research stations to higher tech systems
		this.addedCount += 0.1;
		if(system.techLevel &gt; 11)
			var research_station = &quot;wildShips_kiota4Spur&quot;;
		else
			var research_station = &quot;wildShips_kiota2Spur&quot;;

		var distanceFromWp = 0.6 * (wpToSun  - system.sun.radius);
		//randomize the position a bit
		var x_coord = system.scrambledPseudoRandomNumber(601) * 25E3;
		var y_coord = system.scrambledPseudoRandomNumber(485) * 25E3;
		var z_coord = distanceFromWp;
		var exactPosition = Vector3D(x_coord, y_coord, z_coord).fromCoordinateSystem(&quot;wsm&quot;);
		system.setPopulator(&quot;wild_ships_research&quot;, {
			callback: function(pos) {			
				system.addShips(research_station, 1, pos, 0);					
			}.bind(this),
			location: &quot;COORDINATES&quot;,
			coordinates: exactPosition,
			deterministic: true
		})
	}
	
	//manufacturing stations
	if (system.scrambledPseudoRandomNumber(301) &gt; (0.5 + this.addedCount)) {
		// add manufacturing stations to industrial systems
		if (system.economy &lt; 3) {
			if(system.productivity &gt; (30000 - (system.economy * 2500)))
				var man_station = &quot;wildShips_kiota4Disc&quot;;
			else
				var man_station = &quot;wildShips_kiota2Disc&quot;;
		}
		// add bio stations to agricultural systems
		else if (system.economy &gt; 4) {
			if(system.productivity &gt; (30000 - ((system.economy - 5) * 2500)))
				var man_station = &quot;wildShips_kiota4Sphere&quot;;
			else
				var man_station = &quot;wildShips_kiota2Sphere&quot;;
		}
		else return;
		
		this.addedCount += 0.1;
		var distanceFromPlanetSurface = 0.5 * (planetToSun  - system.sun.radius - system.mainPlanet.radius);
		//randomize the position a bit
		var x_coord = system.scrambledPseudoRandomNumber(602) * 25E3;
		var y_coord = system.scrambledPseudoRandomNumber(486) * 25E3;
		var z_coord = system.mainPlanet.radius + distanceFromPlanetSurface;
		var exactPosition = Vector3D(x_coord, y_coord, z_coord).fromCoordinateSystem(&quot;psm&quot;);
		system.setPopulator(&quot;wild_ships_manufacturing&quot;, {
			callback: function(pos) {			
				system.addShips(man_station, 1, pos, 0);					
			}.bind(this),
			location: &quot;COORDINATES&quot;,
			coordinates: exactPosition,
			deterministic: true
		})
	}
}
</pre></td>
                </tr>
                <tr>
                    <td valign="top">Scripts/wildShips_tembo.js</td>
                    <td><pre>this.name					= &quot;wildShips_tembo.js&quot;;
this.author					= &quot;Thargoid with stuff from Kaks&quot;;
this.description			= &quot;Script for Tembo hauler/trader&quot;;
&quot;use strict&quot;;

this.shipSpawned = function()
	{
	if(Math.random() &gt; 0.6 &amp;&amp; this.ship &amp;&amp; this.ship.subEntities &amp;&amp; this.ship.subEntities.length &gt; 0)
		{
		this.ship.subEntities[0].remove();
		this.ship.lightsActive = false;
		return;
		}

	let subs = this.ship.subEntities;
	subs.items = function(){for (let loop = 0; loop &lt; this.length; loop++) yield this[loop];}
	for (let loop in subs.items()) {
		loop.script.owner = this.ship;
		loop.script.shipDied = function(whom, why)
			{
			if(why &amp;&amp; why === &quot;removed&quot;) { return; }
			this.owner.spawn(&#39;cargopod&#39;, Math.ceil(Math.random()*20));
			this.owner.lightsActive = false;
			};
		}
	}

this.shipDied = function (whom, why)
	{
	if(why &amp;&amp; why === &quot;removed&quot;) { return; }
	this.ship.spawn(&#39;cargopod&#39;, Math.ceil(Math.random()*20));
	};
</pre></td>
                </tr>
                <tr>
                    <td valign="top">Scripts/wildships-market.js</td>
                    <td><pre>&quot;use strict&quot;;

this.name = &quot;wildships-market&quot;;
this.author = &quot;spara&quot;;

this.$originalResearch = {
	&quot;food&quot; : [0, 0, 17, -2, -2, 2, 1, 1, 0],
	&quot;textiles&quot; : [0, 0, 18, -1, -1, 3, 3, 3, 0],
	&quot;radioactives&quot; : [0, 0, 85, -3, -3, 5, 7, 7, 0],
	&quot;slaves&quot; : [0, 0, 40, -5, -5, 0, 31, 31, 0],
	&quot;liquor_wines&quot; : [0, 0, 90, -5, -5, 251, 15, 15, 0],
	&quot;luxuries&quot; : [0, 0, 170, 8, 8, 10, 3, 3, 0],
	&quot;narcotics&quot; : [0, 0, 245, 29, 8, 0, 10, 120, 0],
	&quot;computers&quot; : [0, 0, 170, 14, 14, 60, 3, 3, 0],
	&quot;machinery&quot; : [0, 0, 130, 6, 6, 40, 7, 7, 0],
	&quot;alloys&quot; : [0, 0, 85, 1, 1, 30, 31, 31, 0],
	&quot;firearms&quot; : [0, 0, 85, 13, 13, 5, 7, 7, 0],
	&quot;furs&quot; : [0, 0, 80, -9, -9, 100, 63, 63, 0],
	&quot;minerals&quot; : [0, 0, 32, -1, -1, 60, 3, 3, 0],
	&quot;gold&quot; : [0, 0, 105, -1, -1, 66, 7, 7, 1],
	&quot;platinum&quot; : [0, 0, 190, -2, -2, 55, 31, 31, 1],
	&quot;gem_stones&quot; : [0, 0, 55, -1, -1, 250, 15, 15, 2],
	&quot;alien_items&quot; : [0, 0, 95, 15, 0, 0, 7, 0, 0]
}

this.$originalManufacturing = {
	&quot;food&quot; : [0, 0, 23, -2, -2, 3, 1, 1, 0],
	&quot;textiles&quot; : [0, 0, 25, -1, -1, 6, 3, 3, 0],
	&quot;radioactives&quot; : [0, 0, 55, -3, -3, 2, 7, 7, 0],
	&quot;slaves&quot; : [0, 0, 45, -5, -5, 226, 31, 31, 0],
	&quot;liquor_wines&quot; : [0, 0, 83, -5, -5, 245, 15, 15, 0],
	&quot;luxuries&quot; : [0, 0, 165, 8, 8, 58, 3, 3, 0],
	&quot;narcotics&quot; : [0, 0, 235, 29, 8, 0, 10, 120, 0],
	&quot;computers&quot; : [0, 0, 130, 14, 14, 60, 3, 3, 0],
	&quot;machinery&quot; : [0, 0, 100, 6, 6, 55, 7, 7, 0],
	&quot;alloys&quot; : [0, 0, 85, 1, 1, 25, 31, 31, 0],
	&quot;firearms&quot; : [0, 0, 124, 13, 13, 29, 7, 7, 0],
	&quot;furs&quot; : [0, 0, 180, -9, -9, 220, 63, 63, 0],
	&quot;minerals&quot; : [0, 0, 35, -1, -1, 53, 3, 3, 0],
	&quot;gold&quot; : [0, 0, 100, -1, -1, 66, 7, 7, 1],
	&quot;platinum&quot; : [0, 0, 180, -2, -2, 55, 31, 31, 1],
	&quot;gem_stones&quot; : [0, 0, 48, -1, -1, 250, 15, 15, 2],
	&quot;alien_items&quot; : [0, 0, 53, 15, 0, 0, 7, 0, 0]
}

this.$originalBio = {
	&quot;food&quot; : [0, 0, 16, -2, -2, 12, 1, 1, 0],
	&quot;textiles&quot; : [0, 0, 24, -1, -1, 12, 3, 3, 0],
	&quot;radioactives&quot; : [0, 0, 69, -3, -3, 3, 7, 7, 0],
	&quot;slaves&quot; : [0, 0, 40, -5, -5, 226, 31, 31, 0],
	&quot;liquor_wines&quot; : [0, 0, 83, -5, -5, 251, 15, 15, 0],
	&quot;luxuries&quot; : [0, 0, 199, 8, 8, 50, 3, 3, 0],
	&quot;narcotics&quot; : [0, 0, 235, 29, 6, 2, 10, 120, 0],
	&quot;computers&quot; : [0, 0, 159, 14, 14, 45, 3, 3, 0],
	&quot;machinery&quot; : [0, 0, 123, 6, 6, 30, 7, 7, 0],
	&quot;alloys&quot; : [0, 0, 82, 1, 1, 12, 31, 31, 0],
	&quot;firearms&quot; : [0, 0, 124, 13, 13, 29, 7, 7, 0],
	&quot;furs&quot; : [0, 0, 176, -9, -9, 220, 63, 63, 0],
	&quot;minerals&quot; : [0, 0, 32, -1, -1, 53, 3, 3, 0],
	&quot;gold&quot; : [0, 0, 97, -1, -1, 66, 7, 7, 1],
	&quot;platinum&quot; : [0, 0, 171, -2, -2, 55, 31, 31, 1],
	&quot;gem_stones&quot; : [0, 0, 45, -1, -1, 250, 15, 15, 2],
	&quot;alien_items&quot; : [0, 0, 53, 15, 0, 0, 7, 0, 0]
}

this.$originalOther = {
	&quot;food&quot; : [0, 0, 19, -2, -2, 2, 1, 1, 0],
	&quot;textiles&quot; : [0, 0, 20, -1, -1, 4, 3, 3, 0],
	&quot;radioactives&quot; : [0, 0, 65, -3, -3, 1, 7, 7, 0],
	&quot;slaves&quot; : [0, 0, 40, -5, -5, 226, 31, 31, 0],
	&quot;liquor_wines&quot; : [0, 0, 83, -5, -5, 245, 15, 15, 0],
	&quot;luxuries&quot; : [0, 0, 196, 8, 8, 48, 3, 3, 0],
	&quot;narcotics&quot; : [0, 0, 235, 29, 8, 1, 10, 120, 0],
	&quot;computers&quot; : [0, 0, 154, 14, 14, 47, 3, 3, 0],
	&quot;machinery&quot; : [0, 0, 117, 6, 6, 35, 7, 7, 0],
	&quot;alloys&quot; : [0, 0, 78, 1, 1, 14, 31, 31, 0],
	&quot;firearms&quot; : [0, 0, 124, 13, 13, 12, 7, 7, 0],
	&quot;furs&quot; : [0, 0, 176, -9, -9, 200, 63, 63, 0],
	&quot;minerals&quot; : [0, 0, 32, -1, -1, 33, 3, 3, 0],
	&quot;gold&quot; : [0, 0, 97, -1, -1, 43, 7, 7, 1],
	&quot;platinum&quot; : [0, 0, 171, -2, -2, 35, 31, 31, 1],
	&quot;gem_stones&quot; : [0, 0, 45, -1, -1, 230, 15, 15, 2],
	&quot;alien_items&quot; : [0, 0, 53, 15, 0, 0, 7, 0, 0]
}

this.$originalDefault = {
	&quot;food&quot; : [0, 0, 19, -2, -2, 6, 1, 1, 0],
	&quot;textiles&quot; : [0, 0, 20, -1, -1, 10, 3, 3, 0],
	&quot;radioactives&quot; : [0, 0, 65, -3, -3, 2, 7, 7, 0],
	&quot;slaves&quot; : [0, 0, 40, -5, -5, 226, 31, 31, 0],
	&quot;liquor_wines&quot; : [0, 0, 83, -5, -5, 251, 15, 15, 0],
	&quot;luxuries&quot; : [0, 0, 196, 8, 8, 54, 3, 3, 0],
	&quot;narcotics&quot; : [0, 0, 235, 29, 29, 8, 120, 120, 0],
	&quot;computers&quot; : [0, 0, 154, 14, 14, 56, 3, 3, 0],
	&quot;machinery&quot; : [0, 0, 117, 6, 6, 40, 7, 7, 0],
	&quot;alloys&quot; : [0, 0, 78, 1, 1, 17, 31, 31, 0],
	&quot;firearms&quot; : [0, 0, 124, 13, 13, 29, 7, 7, 0],
	&quot;furs&quot; : [0, 0, 176, -9, -9, 220, 63, 63, 0],
	&quot;minerals&quot; : [0, 0, 32, -1, -1, 53, 3, 3, 0],
	&quot;gold&quot; : [0, 0, 97, -1, -1, 66, 7, 7, 1],
	&quot;platinum&quot; : [0, 0, 171, -2, -2, 55, 31, 31, 1],
	&quot;gem_stones&quot; : [0, 0, 45, -1, -1, 250, 15, 15, 2],
	&quot;alien_items&quot; : [0, 0, 53, 15, 0, 0, 7, 0, 0]
}

this.updateLocalCommodityDefinition = function(goodDefinition, station) {
	
	var commodity = goodDefinition.key;
	goodDefinition.capacity = 63;
	
	//Research stations
	if (station.hasRole(&quot;wildShips_kiota2Spur&quot;) || station.hasRole(&quot;wildShips_kiota4Spur&quot;)) {
		var oldDefs = this.$originalResearch[commodity];
	}
	//Manufacturing stations  
	else if (station.hasRole(&quot;wildShips_kiota2Disc&quot;) || station.hasRole(&quot;wildShips_kiota4Disc&quot;)) {
		var oldDefs = this.$originalManufacturing[commodity];
	}
	//Biosphere stations
	else if (station.hasRole(&quot;wildShips_kiota2Sphere&quot;) || station.hasRole(&quot;wildShips_kiota4Sphere&quot;)) {
		var oldDefs = this.$originalBio[commodity];
	}
	//Other stations
	else if (station.hasRole(&quot;wildShips_kiota2Comms&quot;) || station.hasRole(&quot;wildShips_kiota4Comms&quot;) || station.hasRole(&quot;wildShips_kiota2Solar&quot;) || station.hasRole(&quot;wildShips_kiota4Solar&quot;)) {
		var oldDefs = this.$originalOther[commodity];
	}
	//Stations with the default market
	else {
		var oldDefs = this.$originalDefault[commodity];
	}
	
	//old style definition found for the good. calculate it the old way
	if (oldDefs) {
		var market_base_price = oldDefs[2];
		var market_eco_adjust_price = oldDefs[3];
		var market_eco_adjust_quantity = oldDefs[4];
		var market_base_quantity = oldDefs[5];
		var market_mask_price = oldDefs[6];
		var market_mask_quantity = oldDefs[7];
		var market_rnd = Math.floor(Math.random() * 256);

		var economy = system.economy;
		
		var price = (market_base_price + (market_rnd &amp; market_mask_price) + (economy * market_eco_adjust_price)) &amp; 255;
		
		price *= 0.4;
		
		var quantity = (market_base_quantity + (market_rnd &amp; market_mask_quantity) - (economy * market_eco_adjust_quantity)) &amp; 255;
		if (quantity &gt; 127) quantity = 0;
		
		quantity &amp;= 63;
		
		
		
		goodDefinition.quantity = quantity;
		goodDefinition.price = price * 10;
	}
	//no definition found. just add some variance to the system market (+/-5%)
	else {
		goodDefinition.price = goodDefinition.price * (1.05 - Math.random() * 0.1);
		goodDefinition.quantity = Math.floor(goodDefinition.quantity * (1.05 - Math.random() * 0.1));
	}
	//scale down if quantity too high
	if (goodDefinition.quantity &gt; goodDefinition.capacity)
		goodDefinition.quantity = Math.floor(goodDefinition.quantity / 127 * goodDefinition.capacity);

	return goodDefinition;
};
</pre></td>
                </tr>
            </table>
        </a>
    </body>
</html>
