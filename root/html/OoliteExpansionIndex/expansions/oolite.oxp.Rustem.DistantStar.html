<html>
    <head>
        <title>Expansion Distant Stars</title>
        <link rel="stylesheet" href="../style.css">
    </head>
    <body>
        <table border="0" width="100%">
            <tr>
                <td>Back to <a href='../index.html'>Index</a></td>
                <td align="right"><small>Page generated: Oct 11, 2023, 3:16:49 PM</small></td>
            </tr>
        </table>

        <h1>Expansion Distant Stars</h1>

        <h2>Content</h2>
        <ul>
          <li><a href="#warnings">Warnings</a></li>
          <li><a href="#manifest">Manifest</a></li>
          <li><a href="#documentation">Documentation</a></li>
          <li><a href="#equipment">0 Equipment</a></li>
          <li><a href="#ships">0 Ships</a></li>
          <li><a href="#models">0 Models</a></li>
          <li><a href="#scripts">2 Scripts</a></li>
        </ul>

          <a name="warnings">
            <h2>Warnings</h2>
            <ol>
                <li>Conflict Expansions mismatch between OXP Manifest and Expansion Manager at character position 0068 (DIGIT ZERO vs LATIN SMALL LETTER N)</li>
                <li>Unknown key &#39;upload_date&#39; at https://wiki.alioth.net/img_auth.php/9/94/Distant_Stars.oxz!manifest.plist</li>
            </ol>
          </a>

        <a name="manifest">
        <h2>Manifest</h2>
            <table border="1">
                <tr>
                    <th></th>
                    <th>from Expansion Manager's OXP list</th>
                    <th>from Expansion Manifest</th>
                </tr>
                <tr>
                    <td>Description</td>
                    <td>Distant Stars tweaks the appearance of every star individually. Every star has its colour set.</td>
                    <td>Distant Stars tweaks the appearance of every star individually. Every star has its colour set.</td>
                </tr>
                <tr>
                    <td>Identifier</td>
                    <td>oolite.oxp.Rustem.DistantStar</td>
                    <td>oolite.oxp.Rustem.DistantStar</td>
                </tr>
                <tr>
                    <td>Title</td>
                    <td>Distant Stars</td>
                    <td>Distant Stars</td>
                </tr>
                <tr>
                    <td>Category</td>
                    <td>Ambience</td>
                    <td>Ambience</td>
                </tr>
                <tr>
                    <td>Author</td>
                    <td>Rustem</td>
                    <td>Rustem</td>
                </tr>
                <tr>
                    <td>Version</td>
                    <td>0.0.7</td>
                    <td>0.0.7</td>
                </tr>
                <tr>
                    <td>Tags</td>
                    <td></td>
                    <td></td>
                </tr>
                <tr>
                    <td>Required Oolite Version</td>
                    <td></td>
                    <td></td>
                </tr>
                <tr>
                    <td>Maximum Oolite Version</td>
                    <td></td>
                    <td></td>
                </tr>
                <tr>
                    <td>Required Expansions</td>
                    <td>
                    </td>
                    <td>
                    </td>
                </tr>
                <tr>
                    <td>Optional Expansions</td>
                    <td>
                    </td>
                    <td>
                    </td>
                </tr>
                <tr>
                    <td>Conflict Expansions</td>
                    <td>
                            <li>oolite.oxp.Wildeblood.distant_suns:0</li>
                    </td>
                    <td>
                            <li>oolite.oxp.Wildeblood.distant_suns:</li>
                    </td>
                </tr>
                <tr>
                    <td>Information URL</td>
                    <td><a target="_blank" href="http://bb.aegidian.org/viewtopic.php?f=4&amp;t=17702">http://bb.aegidian.org/viewtopic.php?f=4&amp;t=17702</a></td>
                    <td><a target="_blank" href="">n/a</a></td>
                </tr>
                <tr>
                    <td>Download URL</td>
                    <td><a target="_blank" href="https://wiki.alioth.net/img_auth.php/9/94/Distant_Stars.oxz">https://wiki.alioth.net/img_auth.php/9/94/Distant_Stars.oxz</a></td>
                    <td><a target="_blank" href="http://wiki.alioth.net/img_auth.php/9/94/Distant_Stars.oxz">http://wiki.alioth.net/img_auth.php/9/94/Distant_Stars.oxz</a></td>
                </tr>
                <tr>
                    <td>License</td>
                    <td>CC-BY-NC-SA 4.0</td>
                    <td>CC-BY-NC-SA 4.0</td>
                </tr>
                <tr>
                    <td>File Size</td>
                    <td>n/a</td>
                </tr>
                <tr>
                    <td>Upload date</td>
                    <td>1610873375</td>
                </tr>
            </table>
                </a>

        <a name="documentation">
        <h2>Documentation</h2>
        <p>Also read <a href='http://wiki.alioth.net/index.php/Distant%20Stars'>http://wiki.alioth.net/index.php/Distant%20Stars</a></p>
        <h3>readme.txt</h3>
        <pre>Distant Stars

Based on Wildeblood OXP Distant Suns and Stranger&#39;s World.
Based on System Features Sunspots OXP(cim).

Overview - DS
==============

The color of the stars depends on sun radius and the planet radius. Agricultural shifted to K-type star, Industrial closer to A-type stars. A-type star are located far away.
The radius of the sun used by default. The corona shim and hues did change.
Recommended use with OXP - System Features Sunspots 1.5.


License
========
This work is licensed under the Creative Commons Attribution-Noncommercial-Share Alike 4.0 Unported License. To view a copy of this license, visit http://creativecommons.org/licenses/by-nc-sa/4.0/

Version History
================
 Version 0.0.1
 - Test release.
 Version 0.0.2
 - Adjusted the corona flare and correct other parameters. Human inhabitant is not factor now. Correct distance to HZ range. Add sun name.
 Version 0.0.3
 - Adjusted the color of white stars. Correct distribution, fixed bug calculation.  Add corona hues and corona shimmer.
 Version 0.0.4
 - Aggregateted to one file - planetinfo.plist.
 - Added script that did variable corona flare (frequent, dreadful, unpredictable) based on the system description.
 Version 0.0.5
 - Compatible with The Collector OXP.
 Version 0.0.6
 - Fixed populator script for the sun features in the oolite v1.84.
 Version 0.0.7
 - Increased a little more corona flare in the K-type stars.
 - Corrected corona flare in the F-type stars from low limit value to more value.
 - Reduced distance sun-planet in the K8 stars.
 - Fixed sun features script to avoid addition on the saved flare in startup.
 - Added small random value to corona flare for all type of stars.

 Future version
 - Adjusted the color in the F-type stars.
 - Turned off debug messages.

Info
=====
Wiki:
* http://wiki.alioth.net/index.php?title=Distant_Stars_OXP
Feedback:
* http://bb.aegidian.org/viewtopic.php?f=4&amp;t=17702

Database
=========
{										//The HZ range for stars calculated from formula: sqrt[L]
case &quot;K8&quot;: colour = &quot;class K8 star&quot;; break;	//redColor/magentaColor		// HZ ~ 0.35 AU // 0.24 - 0.50
case &quot;K2&quot;: colour = &quot;class K2 star&quot;; break;	//orangeColor			// HZ ~ 0.55 AU // 0.37 - 0.77
case &quot;G2&quot;: colour = &quot;class G2 star&quot;; break;  	//yellowColor		 	// HZ ~ 1.10 AU // 0.72 - 1.52
case &quot;F2&quot;: colour = &quot;class F2 star&quot;; break;	//whiteColor			// HZ ~ 2.70 AU // 1.73 - 3.64
case &quot;A7&quot;: colour = &quot;class A7 star&quot;; break;	//cyanColor			// HZ ~ 3.50 AU // 2.29 - 4.81
case &quot;A2&quot;: colour = &quot;class A2 star&quot;; break;	//blueColor			// HZ ~ 4.90 AU // 3.40 - 7.10
}

Link
=====
* http://www.atnf.csiro.au/outreach//education/senior/astrophysics/photometry_colour.html
* http://www.daviddarling.info/encyclopedia/H/habzone.html
* https://en.wikipedia.org/wiki/Circumstellar_habitable_zone
* https://en.wikipedia.org/wiki/Planetary_habitability
* https://en.wikipedia.org/wiki/Stellar_classification
</pre>
        </a>

        <a name="equipment">          
        <h2>Equipment</h2>
            This expansion declares no equipment. This may be related to warnings.
        </a>

        <a name="ships">    
        <h2>Ships</h2>
            This expansion declares no ships. This may be related to warnings.
        </a>

        <a name="models">    
        <h2>Models</h2>
            This expansion declares no models. This may be related to warnings.
        </a>

        <a name="scripts">    
        <h2>Scripts</h2>
            <table>
                <tr>
                    <th>Path</th>
                </tr>
                <tr>
                    <td valign="top">Scripts/ds_spectroscope.js</td>
                    <td><pre>&quot;use strict&quot;;

this.name 	 = &quot;Spectroscope&quot;;
this.author 	 = &quot;Wildeblood &amp; rustem (edit)&quot;;
this.copyright	 = &quot;March 2016&quot;;
this.licence 	 = &quot;CC-BY-SA 4.0&quot;;
this.version 	 = &quot;0.0.2&quot;; 
this.description = &quot;Converts values set in planetinfo.plist into descriptive text strings&quot;;

/* ====================================================================================
			SPECTROSCOPE

	Converts values set in planetinfo.plist and found in system.info.sun_color 
	into descriptive text strings. These are not computed values, so...
	Setting sun_color = &quot;1.0 0.0 0.0&quot; in planetinfo.plist returns null, even though 
	it creates the same colour star in the game as setting sun_color = &quot;redColor&quot;.
======================================================================================= */

this.$spectroscope = function(colour)
	{
	if (!colour) colour = system.info.sun_color;
	if (!colour) return false;
	switch (colour)
			{										//The HZ range for stars calculated from formula: sqrt[L]
			case &quot;M0&quot;: //colour = &quot;class M0 star&quot;; break;	//magentaColor ~ 0.6*Sun	// HZ ~ 0.30 AU // 0.19 - 0.40
			case &quot;K8&quot;: colour = &quot;class K8 star&quot;; break;	//redColor			// HZ ~ 0.35 AU // 0.24 - 0.50
			case &quot;K2&quot;: colour = &quot;class K2 star&quot;; break;	//orangeColor			// HZ ~ 0.55 AU // 0.37 - 0.77
			case &quot;G2&quot;: colour = &quot;class G2 star&quot;; break;  	//yellowColor ~ 1.0*Sun 	// HZ ~ 1.10 AU // 0.72 - 1.52
			case &quot;F2&quot;: colour = &quot;class F2 star&quot;; break;	//whiteColor			// HZ ~ 2.70 AU // 1.73 - 3.64
			case &quot;A7&quot;: colour = &quot;class A7 star&quot;; break;	//cyanColor			// HZ ~ 3.50 AU // 2.29 - 4.81
			case &quot;A2&quot;: colour = &quot;class A2 star&quot;; break;	//blueColor ~ 1.9*Sun		// HZ ~ 4.90 AU // 3.40 - 7.10
			default:   colour = &quot;&quot;;
			}
	return colour;
	}

/* ====================================================================================
			EXAMPLE USE - ADD LINE TO SYSTEM DATA SCREEN
======================================================================================= */

this.guiScreenChanged = function()
	{
	if (guiScreen === &quot;GUI_SCREEN_SYSTEM_DATA&quot;)
		{
		var info = System.infoForSystem(galaxyNumber, player.ship.targetSystem);
		if (info.sun_gone_nova) return;
		
		var name    = info.name;
		var sunName = info.sun_name;
		var colour  = info.sun_color;
		if (colour) var colourText = this.$spectroscope(colour);

		if (colourText &amp;&amp; sunName) mission.addMessageText(&quot;The planet &quot; + name + &quot; orbits the &quot; + colourText + &quot; &quot; + sunName + &quot;.&quot;);
		else if (colourText) mission.addMessageText(&quot;The planet &quot; + name + &quot; orbits a &quot; + colourText + &quot;.&quot;);
		else if (sunName) mission.addMessageText(&quot;The planet &quot; + name + &quot; orbits the &quot; + sunName + &quot;.&quot;);
		}
	}

/* ====================================================================================
			THE END
======================================================================================= */
</pre></td>
                </tr>
                <tr>
                    <td valign="top">Scripts/systemfeatures-sun.js</td>
                    <td><pre>this.name		 	= &quot;System Features: DS Corona&quot;;
this.author			= &quot;rustem&quot;; 
this.copyright		= &quot;March 2016&quot;;
this.licence		= &quot;CC-BY-SA 4.0&quot;;
this.version		= &quot;0.4&quot;;
this.description	= &quot;Populator script for the sun features&quot;;

&quot;use strict&quot;;

//Based on System_Features_Sunspots
//develop -cim-, edit -rustem-

this.startUp = function() {
		this.$overrides = [[],[],[],[],[],[],[],[]];
		delete this.startUp;
		this.logging = true; // Must be false for release
		if(this.logging) log(this.name,&#39;startUp - System Features for DistantStars&#39;);
		//if did not saved in the system with solar activity and need jump(timer) for reset and recalculate.
		this.$overrides[galaxyNumber] = system.ID.toString();
		if(this.logging &amp;&amp; system.info.description.indexOf(&quot;solar activity&quot;) &gt; -1) {
			if(this.logging) log(this.name,&#39;The startup system with solar activity and need jump for recalculate&#39;);
		}		
}

this._clearFeatures = function() {
		//for clearing overrides
		//this.setFeatures = false;
		this.$overrides = [[],[],[],[],[],[],[],[]]; // not timer memory of the unpredictable solar activity, may be add TODO list.
		System.infoForSystem(galaxyNumber, system.ID).corona_flare = null; // for oolite v1.84
		//System.infoForSystem(galaxyNumber, system.ID).corona_flare = 0;  // for oolite v1.80
		if(this.logging) log(this.name,&#39;Reset solar activity&#39;);
		return;
}

this.systemWillPopulate = function() {
	system.setPopulator(&quot;system_features_sun&quot;,
						{
							callback: this._addFeatures.bind(this),
							priority: 1000
						});
}

this._addFeatures = function() {
		if (this.$overrides[galaxyNumber].indexOf(system.ID) &gt; -1) {
				this.setFeatures = true;
				if(this.logging) log(this.name,&#39;The overrides corona flare is: &#39;+system.info.corona_flare); // Not setup of sun features
				return;
		} 
		if (!system.sun) {
				return;
		}

		// make the solar flare

		this.setFeatures = false;

		var addflare = 0;
		var rndflare = Math.random()*10;
		var muxflare = Math.random()*1;
		var corflare = system.info.corona_flare;
		if(this.logging) log(this.name,&#39;Default corona flare is: &#39;+corflare); //.toFixed(3)
		 
		// for oolite v1.84 - Added small random value to corona flare for all type of stars - 0.5%.
		corflare += Math.random()*0.005;
								
		if (system.info.description.indexOf(&quot;solar activity&quot;) &gt; -1) {
				if (system.info.sun_name.indexOf(&quot;Star&quot;) &gt; -1 ) { // checking a type of star
						if (system.info.sun_name.indexOf(&quot;A2&quot;) &gt; -1 ) {
							corflare += Math.random()*0.040;
							if(this.logging) log(this.name,&#39;Set A2 corona flare is : &#39;+corflare);
						}
						if (system.info.sun_name.indexOf(&quot;A7&quot;) &gt; -1 ) {
							corflare += Math.random()*0.025;
							if(this.logging) log(this.name,&#39;Set A7 corona flare is : &#39;+corflare);
						}
						if (system.info.sun_name.indexOf(&quot;F2&quot;) &gt; -1 ) {
							corflare += Math.random()*0.017;
							if(this.logging) log(this.name,&#39;Set F2 corona flare is : &#39;+corflare);
						}
						if (system.info.sun_name.indexOf(&quot;G2&quot;) &gt; -1 ) {
							corflare += Math.random()*0.013;
							if(this.logging) log(this.name,&#39;Set G2 corona flare is : &#39;+corflare);
						}
						if (system.info.sun_name.indexOf(&quot;K2&quot;) &gt; -1 ) {
							corflare += Math.random()*0.011;
							if(this.logging) log(this.name,&#39;Set K2 corona flare is : &#39;+corflare);
						}
						if (system.info.sun_name.indexOf(&quot;K8&quot;) &gt; -1 ) {
							corflare += Math.random()*0.010;
							if(this.logging) log(this.name,&#39;Set K8 corona flare is : &#39;+corflare);
						}
				} else log(this.name,&#39;Error: No correct star name!&#39;);			
				addflare += corflare*0.5;
				rndflare *= 1.5;
				if (system.info.description.indexOf(&quot;frequent solar activity&quot;) &gt; -1) { // checking a type of activity
						//rndflare += 3;
						addflare += 0.025;
						if(this.logging) log(this.name,&#39;Add frequent value : &#39;+addflare);
				} else if (system.info.description.indexOf(&quot;dreadful solar activity&quot;) &gt; -1 || system.info.description.indexOf(&quot;deadly solar activity&quot;) &gt; -1) {
						//rndflare *= 1.5;
						addflare += 0.15;
						if(this.logging) log(this.name,&#39;Add dreadful(ly) value : &#39;+addflare);
				} else if (system.info.description.indexOf(&quot;unpredictable solar activity&quot;) &gt; -1 ) {
						//rndflare += 1.5;
						rndflare = Math.floor(rndflare-4.5);
						if (rndflare &lt; 1) rndflare = 0;
						rndflare *= muxflare*0.015;
						addflare += rndflare;
						if(this.logging) log(this.name,&#39;Add unpredictable value: &#39;+addflare);
				}
				corflare += addflare;				
		}
		
		this.setFeatures = true;
		System.infoForSystem(galaxyNumber, system.ID).corona_flare = corflare;	
		if(this.logging) log(this.name,&#39;Finally corona flare is: &#39;+corflare); //.toFixed(3)	
		/*
		//Set to distant star value for oolite v1.80
		if (corflare === 0) {
				if (system.info.sun_name.indexOf(&quot;Star&quot;) &gt; -1 ) {
						if (system.info.sun_name.indexOf(&quot;A2&quot;) &gt; -1 ) {
							corflare = 0.24 + Math.random()*0.08;
							if(this.logging) log(this.name,&#39;Set A2 corona flare is:&#39;+corflare);
						}
						if (system.info.sun_name.indexOf(&quot;A7&quot;) &gt; -1 ) {
							corflare = 0.12 + Math.random()*0.06;
							if(this.logging) log(this.name,&#39;Set A7 corona flare is:&#39;+corflare);
						}
						if (system.info.sun_name.indexOf(&quot;F2&quot;) &gt; -1 ) {
							corflare = 0.08 + Math.random()*0.06;
							if(this.logging) log(this.name,&#39;Set F2 corona flare is:&#39;+corflare);
						}
						if (system.info.sun_name.indexOf(&quot;G2&quot;) &gt; -1 ) {
							corflare = 0.06 + Math.random()*0.04;
							if(this.logging) log(this.name,&#39;Set G2 corona flare is:&#39;+corflare);
						}
						if (system.info.sun_name.indexOf(&quot;K2&quot;) &gt; -1 ) {
							corflare = 0.05 + Math.random()*0.03;
							if(this.logging) log(this.name,&#39;Set K2 corona flare is:&#39;+corflare);
						}
						if (system.info.sun_name.indexOf(&quot;K8&quot;) &gt; -1 ) {
							corflare = 0.03 + Math.random()*0.03;
							if(this.logging) log(this.name,&#39;Set K8 corona flare is:&#39;+corflare);
						}
				} else if(this.logging) log(this.name,&#39;No star name!&#39;);
				System.infoForSystem(galaxyNumber, system.ID).corona_flare = corflare;
				if(this.logging) log(this.name,&#39;Set to distant star value. Final corona flare is:&#39;+corflare);
		}
		*/
}

this.shipWillEnterWitchspace = function(cause)
{
	this._resetFeatures();
}

this._resetFeatures = function()
{
	if (this.setFeatures) this._clearFeatures();
	return;
}
</pre></td>
                </tr>
            </table>
        </a>
    </body>
</html>
