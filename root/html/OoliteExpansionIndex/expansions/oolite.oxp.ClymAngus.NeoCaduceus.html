<html>
    <head>
        <title>Expansion NeoCaduceus</title>
        <link rel="stylesheet" href="../style.css">
    </head>
    <body>
        <table border="0" width="100%">
            <tr>
                <td>Back to <a href='../index.html'>Index</a></td>
                <td align="right"><small>Page generated: Oct 11, 2023, 3:16:48 PM</small></td>
            </tr>
        </table>

        <h1>Expansion NeoCaduceus</h1>

        <h2>Content</h2>
        <ul>
          
          <li><a href="#manifest">Manifest</a></li>
          <li><a href="#documentation">Documentation</a></li>
          <li><a href="#equipment">1 Equipment</a></li>
          <li><a href="#ships">11 Ships</a></li>
          <li><a href="#models">0 Models</a></li>
          <li><a href="#scripts">2 Scripts</a></li>
        </ul>


        <a name="manifest">
        <h2>Manifest</h2>
            <table border="1">
                <tr>
                    <th></th>
                    <th>from Expansion Manager's OXP list</th>
                    <th>from Expansion Manifest</th>
                </tr>
                <tr>
                    <td>Description</td>
                    <td>The very expensive (and deadly) Caduceus</td>
                    <td>The very expensive (and deadly) Caduceus</td>
                </tr>
                <tr>
                    <td>Identifier</td>
                    <td>oolite.oxp.ClymAngus.NeoCaduceus</td>
                    <td>oolite.oxp.ClymAngus.NeoCaduceus</td>
                </tr>
                <tr>
                    <td>Title</td>
                    <td>NeoCaduceus</td>
                    <td>NeoCaduceus</td>
                </tr>
                <tr>
                    <td>Category</td>
                    <td>Ships</td>
                    <td>Ships</td>
                </tr>
                <tr>
                    <td>Author</td>
                    <td>ClymAngus</td>
                    <td>ClymAngus</td>
                </tr>
                <tr>
                    <td>Version</td>
                    <td>1.01</td>
                    <td>1.01</td>
                </tr>
                <tr>
                    <td>Tags</td>
                    <td></td>
                    <td></td>
                </tr>
                <tr>
                    <td>Required Oolite Version</td>
                    <td></td>
                    <td></td>
                </tr>
                <tr>
                    <td>Maximum Oolite Version</td>
                    <td></td>
                    <td></td>
                </tr>
                <tr>
                    <td>Required Expansions</td>
                    <td>
                    </td>
                    <td>
                    </td>
                </tr>
                <tr>
                    <td>Optional Expansions</td>
                    <td>
                    </td>
                    <td>
                    </td>
                </tr>
                <tr>
                    <td>Conflict Expansions</td>
                    <td>
                    </td>
                    <td>
                    </td>
                </tr>
                <tr>
                    <td>Information URL</td>
                    <td><a target="_blank" href="http://wiki.alioth.net/index.php/Caduceus">http://wiki.alioth.net/index.php/Caduceus</a></td>
                    <td><a target="_blank" href="">n/a</a></td>
                </tr>
                <tr>
                    <td>Download URL</td>
                    <td><a target="_blank" href="https://wiki.alioth.net/img_auth.php/4/4e/NeoCaduceus.oxz">https://wiki.alioth.net/img_auth.php/4/4e/NeoCaduceus.oxz</a></td>
                    <td><a target="_blank" href="">n/a</a></td>
                </tr>
                <tr>
                    <td>License</td>
                    <td>CC-BY-NC-SA 4.0</td>
                    <td>CC-BY-NC-SA 4.0</td>
                </tr>
                <tr>
                    <td>File Size</td>
                    <td>n/a</td>
                </tr>
                <tr>
                    <td>Upload date</td>
                    <td>1626940523</td>
                </tr>
            </table>
                </a>

        <a name="documentation">
        <h2>Documentation</h2>
        <p>Also read <a href='http://wiki.alioth.net/index.php/NeoCaduceus'>http://wiki.alioth.net/index.php/NeoCaduceus</a></p>
        <h3>readme.txt</h3>
        <pre>Overview 
&quot;Piss one of those things off the last thing your going to see is a sea of plasma green&quot; Sector chief besieged navy sector station 4-994. 

There are many rare things in the 8 galaxies, the natural phenomena and then the sentient made from monuments to orbital grave yards. There are one or two oddities that fall into both categories, the Caduceus being one of them. 

It is believed (according to several well read yet unofficial dossiers) that the Caduceus was the brain child of Udian Foraga Shulth, the youngest (and arguably most talented) son of the bio-maniac Mirias Shulth. Whilst several thousand books, personal testimonies, holo-recordings and overly sentimental documentaries have been penned as to the exploits of his father. Little is known about the informative years of Udian (most official records having been lost in the first great shard bio-purge). He does surface as a young adult embroiled in the new genesis war as something of an unlikely hero. Saving several sub-core trading systems from the gene-menace through the unlikely unification of celltec and nano-mechanics. 

One of the few quotes directly attributable to Udian is also probably the most telling: &quot;I don&#39;t build ships, I birth them. They are my children and like any good father I watch over them.&quot; Indeed most traders, pirates (who survive) or military personnel who happen to see a Caduceus, concur that there is something distinctly biological about its construction. They tend to be encountered cross station side of industrial planets, dropping in and out of the atmosphere delivering god knows what, to god knows where, for god knows who. 

Few cast iron facts are known about these ships capabilities outside military circles, although this hasn&#39;t stopped the intergalactic rumor mill from churning, fueled by chance encounters and the odd station landing. Whilst sifting through this mass of conjecture, has been likened to digging through boobian bug guts looking for a nega-mass gem stone, certain &quot;facts&quot; appear more widely independently replicated and therefore believable. 

Notable features 
It would appear that these ships tend to be above average in most respects, lower top end in most categories. A speed 0.5 shy of half light, quickish turning circles, pitch and yaw, good shields and an apparent ability (as reported by station engineers) to successfully utilize a patch work quilt of non standard upgrades. So far 10 separate ships have been documented; 

Arc Of Radiance 
Apex Of Reason 
Shard Of Destiny 
Point Of Action (destroyed) 
Edge Of Infinity 
Circle Of Time 
Crucible Of Destruction 
Vortex Of Hate 
Annulus Of Deceit 
Digon Of Truth 

Leaked military records recently reported at least one Caduceus has been confirmed destroyed (see above). This event occurred several cycles ago during a fierce Thargoid insurgency. It appears that the battle not only engaged the military, but also many reservists and privateers who were caught in the cross fire. Details are sketchy (the documents are heavily censored) but the battle appears to have taken place some where along the outer edge of galaxy 4. The ship in question seems to have purposefully maneuvered in between several invading warships then proceeded to deliver a barrage of devastating broadsides, to both ships simultaneously. A tactic repeated several times until it was eventually overwhelmed by robot fighters. Although not pivotal to the subsequent rout of the invading fleet, the Caduceus&#39;s actions &quot;significantly influenced the tempo of the battle&quot; (Vice Admiral Mineemer). 

Controversy 
The real eye opener for the military was the subsequent annihilation of the remaining Thargoid ships involved in the conflict 5 days later, and the complete sterilization of all Thargoid held worlds within a 15 light year radius of the fleet. This count included two heavily defended system hatcheries. 

Dispatches from Naval HQ indicates it is involved in &quot;sporadic but ongoing negotiations&quot; with the Shulth family regarding the acquisition of hyper-biomechancial ship building technology and any other advanced tech which may help secure victory in the on-going war. It is extremely rare to find one of these ships not in the hands of a Shulth or one of their associates. Still these ships occasionally appear for sale, always stripped down and curiously enough never in the hands of pirates. 

Given the multi-generational reputation of its pilots and masters, the mere reporting of a Caduceus in system has been known to empty orbit stations soft-bars of pirate informants, hackers and one shot cargo ejectors. Oh and if you see a ship bay on station that appears to be empty but the dock manifest indicates it&#39;s paid for three times over, best not try and park in it eh? 

Stats: 
Speed - .400LS
Thrust - 45
Pitch/Yaw - 0.8
Roll - 1.8
Energy - 8 banks (512)
Recharge - 5.8


Alpha:
The Alpha trades side laser mounts and top/bottom heavy turrets for cargo 
space.
Cargo - 25
Expanded - 40
Missiles - 8

Omega:
The Omega trades cargo space for the heavy turrets and side lasers. 
Cargo - 20
Expanded - 30
Missiles - 10

The Caduceus also contains a certain piece of specialized kit the Damage Control Node.
Based off Thargoid&#39;s repair bot mines, the Damage Control Node is a nanoforge that interfaces with the Caddy&#39;s AI and biosystems, and assists the crew in inflight repairs, manufacturing replacement components as they&#39;re needed.
The DCN manages repairs slowly over time, repairing more equipment than the 
Repair Mine, and often with a better chance of success. Yet it doesn&#39;t always repair a piece of kit the first time it tries, and sometimes takes two or more tries to repair a device. The AI will tell you if they fail to fix a device. Nor can it repair every piece of kit on the market, though most common devices and some rare ones are within it&#39;s capabilities.
And if the DCN gets damaged? Repairs are halted if the DCN takes a hit, but it heals itself! Priority is given to healing a damaged DCN, and healing a DCN happens fairly quickly. Repairs resume soon after the DCN heals.

Acknowledgments 
Cmdr Wyvern for helping fix my broken ass code.
another_commander for helping fix my broken ass shader code 
Eric Walch from pointing out how to trouble shoot code so I don&#39;t end up accidentally publishing another beta.</pre>
        </a>

        <a name="equipment">          
        <h2>Equipment</h2>
            <table>
                <tr>
                    <th>Name</th>
                    <th>Visible</th>
                    <th>Cost [deci-credits]</th>
                    <th>Tech-Level</th>
                </tr>
                <tr>
                    <td><a href="../equipment/EQ_DCN.html">Damage Control Node</a></td>
                    <td>yes</td>
                    <td align="right">70000</td>
                    <td align="center">1+</td>
                </tr>
            </table>
        </a>

        <a name="ships">    
        <h2>Ships</h2>
            <table>
                <tr>
                    <th>Name</th>
                </tr>
                <tr>
                    <td><a href="../ships/caduceus-alpha.html">caduceus-alpha</a></td>
                </tr>
                <tr>
                    <td><a href="../ships/caduceus-alpha-player.html">Caduceus Alpha</a></td>
                </tr>
                <tr>
                    <td><a href="../ships/caduceus-omega.html">caduceus-omega</a></td>
                </tr>
                <tr>
                    <td><a href="../ships/caduceus-omega-player.html">Caduceus Omega</a></td>
                </tr>
                <tr>
                    <td><a href="../ships/caduceusturret.html">caduceusturret</a></td>
                </tr>
                <tr>
                    <td><a href="../ships/caduceusturret-npc.html">Caduceus Turret</a></td>
                </tr>
                <tr>
                    <td><a href="../ships/cenginea.html">Caduceus Engine</a></td>
                </tr>
                <tr>
                    <td><a href="../ships/cengineb.html">Caduceus Engine</a></td>
                </tr>
                <tr>
                    <td><a href="../ships/cmount.html">Caduceus mount</a></td>
                </tr>
                <tr>
                    <td><a href="../ships/zeroturret.html">zeroturret</a></td>
                </tr>
                <tr>
                    <td><a href="../ships/zeroturret-npc.html">Zero Turret</a></td>
                </tr>
            </table>
        </a>

        <a name="models">    
        <h2>Models</h2>
            This expansion declares no models. 
        </a>

        <a name="scripts">    
        <h2>Scripts</h2>
            <table>
                <tr>
                    <th>Path</th>
                </tr>
                <tr>
                    <td valign="top">Config/script.js</td>
                    <td><pre>&quot;use strict&quot;;
this.name = &quot;Caduceus Damage Control Node&quot;;
this.author = &quot;Thargoid&quot;;
this.copyright = &quot;Creative Commons Attribution - Non-Commercial - Share Alike 3.0 license&quot;;
this.description = &quot;Damage Control system based on repair bots&quot;;
this.version = &quot;2.0&quot;;

this.equipmentDamaged = function (equipment) {
	if (player.ship.equipmentStatus(&quot;EQ_DCN&quot;) == &quot;EQUIPMENT_UNAVAILABLE&quot;) {
		return;
	}

	if (equipment == &quot;EQ_DCN&quot;) {
		if (this.damageControlTimer &amp;&amp; this.damageControlTimer.isRunning) {
			this.damageControlTimer.stop();
			delete this.damageControlTimer;
		}
		var repairTime = 60 + Math.ceil(Math.random() * 120);
		player.consoleMessage(&quot;DCN offline - entering self-repair mode&quot;, 6);
		this.selfRepairTimer = new Timer(this, this.selfRepair, repairTime);
	} else {
		if (!this.damageControlTimer || !this.damageControlTimer.isRunning) {
			var repairTime = 120 + Math.ceil(Math.random() * 180);
			player.consoleMessage(&quot;DCN activated&quot;, 6);
			this.damageControlTimer = new Timer(this, this.repairSystems, repairTime);
		}
	}
}

this.selfRepair = function () {
	if (player.ship.equipmentStatus(&quot;EQ_DCN&quot;) == &quot;EQUIPMENT_UNAVAILABLE&quot;) {
		return;
	}

	if (Math.random() &lt; 0.75) // 75% chance of self-repair
	{
		player.ship.setEquipmentStatus(&quot;EQ_DCN&quot;, &quot;EQUIPMENT_OK&quot;);
		this.checkSystems();
		if (this.playerDamagedList.length &gt; 0) {
			player.consoleMessage(&quot;DCN online and activated&quot;, 6);
			var repairTime = 120 + Math.ceil(Math.random() * 180);
			this.damageControlTimer = new Timer(this, this.repairSystems, repairTime);
		} else {
			player.consoleMessage(&quot;DCN online and in standby mode&quot;, 6);
		}
	} else {
		if (player.ship.equipmentStatus(&quot;EQ_DCN&quot;) == &quot;EQUIPMENT_DAMAGED&quot;) // just in case it was repaired in the meantime
		{
			var repairTime = 60 + Math.ceil(Math.random() * 120);
			player.consoleMessage(&quot;DCN offline - self-repair continuing&quot;, 6);
			this.selfRepairTimer = new Timer(this, this.selfRepair, repairTime);
		}
	}
}

this.equipmentDestroyed = function (equipment) {
	if (equipment == &quot;EQ_DCN&quot;) {
		this.stopTimers();
	}
}

this.stopTimers = this.shipWillDockWithStation = this.shipDied = function () {
	if (this.damageControlTimer &amp;&amp; this.damageControlTimer.isRunning) {
		this.damageControlTimer.stop();
		delete this.damageControlTimer;
	}
	if (this.selfRepairTimer &amp;&amp; this.selfRepairTimer.isRunning) {
		player.ship.setEquipmentStatus(&quot;EQ_DCN&quot;, &quot;EQUIPMENT_OK&quot;);
		this.selfRepairTimer.stop();
		delete this.selfRepairTimer;
	}
}

this.shipWillLaunchFromStation = function () {
	if (player.ship.equipmentStatus(&quot;EQ_DCN&quot;) == &quot;EQUIPMENT_OK&quot;) {
		this.checkSystems();
		if (this.playerDamagedList.length &gt; 0) {
			var repairTime = 120 + Math.ceil(Math.random() * 180);
			player.consoleMessage(&quot;Repair system reactivated&quot;, 6);
			this.damageControlTimer = new Timer(this, this.repairSystems, repairTime);
		}
	} else {
		if (player.ship.equipmentStatus(&quot;EQ_DCN&quot;) == &quot;EQUIPMENT_DAMAGED&quot;) {
			this.selfRepair();
			return;
		}
	}
}

this.checkSystems = function () //new, faster one from http://aegidian.org/bb/viewtopic.php?f=4&amp;t=10842&amp;start=30#p163024
{
	this.playerDamagedList = [];
	var equipment = player.ship.equipment
	var listCounter = 0; // reset the counter
	for (listCounter = 0; listCounter &lt; equipment.length; listCounter++) {
		if (player.ship.equipmentStatus(equipment[listCounter].equipmentKey) !== &quot;EQUIPMENT_DAMAGED&quot;) {
			continue
		}
		var scriptEqInfo = EquipmentInfo.infoForKey(equipment[listCounter].equipmentKey).scriptInfo;
		if ((scriptEqInfo.thargoidRepairBotChance === undefined ||
				isNaN(scriptEqInfo.thargoidRepairBotChance)) ||
			(!isNaN(scriptEqInfo.thargoidRepairBotChance) &amp;&amp;
				scriptEqInfo.thargoidRepairBotChance &gt; 0)) {
			this.playerDamagedList.push(equipment[listCounter].equipmentKey); // if it&#39;s broke and fixable, add it to the list.
		}
	}
}

this.repairSystems = function () {
	this.checkSystems();
	if (this.playerDamagedList.length == 0) {
		player.consoleMessage(&quot;All systems nominal - DCN entering standby mode&quot;, 5);
		return;
	} else {
		var damagedEquipment = Math.floor(Math.random() * this.playerDamagedList.length); // pick a random element from the list...
		this.fixedItem = this.playerDamagedList[damagedEquipment]; // ...define the item...
		this.damagedItem = this.fixedItem + &quot;_DAMAGED&quot;; //...and it&#39;s damaged version
		this.fixedName = EquipmentInfo.infoForKey(this.fixedItem).name; // define it&#39;s screen name
		this.fixedTech = EquipmentInfo.infoForKey(this.fixedItem).effectiveTechLevel // tech level of the item
		if (EquipmentInfo.infoForKey(this.fixedItem).scriptInfo.thargoidRepairBotChance !== undefined &amp;&amp; !isNaN(EquipmentInfo.infoForKey(this.fixedItem).scriptInfo.thargoidRepairBotChance)) {
			this.fixChance = EquipmentInfo.infoForKey(this.fixedItem).scriptInfo.thargoidRepairBotChance;
		} else {
			this.fixChance = 0.6;
		}
	}

	if (Math.random() &lt; this.fixChance) {
		this.fixItem();
	} else {
		var repairTime = 120 + Math.ceil(Math.random() * 180);
		player.consoleMessage(this.fixedName + &quot; is still offline - work continuing.&quot;, 5);
		this.damageControlTimer = new Timer(this, this.repairSystems, repairTime);
	}
}


this.fixItem = function () {
	player.ship.setEquipmentStatus(this.fixedItem, &quot;EQUIPMENT_OK&quot;); // and actually fix the thing!
	player.consoleMessage(this.fixedName + &quot; regenerated and operational&quot;, 5)
	switch (this.fixedItem) // specific OXP equipment which need rebooting after fixing, or have other issues.
	{
		case &quot;EQ_FRAME_FUEL_COLLECTOR&quot;: {
			if (worldScripts[&quot;Fuel Collector&quot;]) {
				worldScripts[&quot;Fuel Collector&quot;].shipLaunchedFromStation(); // restart the timers in it&#39;s world script
				break;
			}
		}
		case &quot;EQ_FRAME_BOUNTY_SCANNER&quot;: {
			if (worldScripts[&quot;Bounty Scanner&quot;]) {
				worldScripts[&quot;Bounty Scanner&quot;].shipLaunchedFromStation(); // restart the timers in it&#39;s world script
				break;
			}
		}
		case &quot;EQ_EEU&quot;: {
			if (worldScripts[&quot;Emergency Energy Unit&quot;]) {
				worldScripts[&quot;Emergency Energy Unit&quot;].shipLaunchedFromStation(); // restart the timers in it&#39;s world script
				break;
			}
		}
		case &quot;EQ_ROCKHERMIT_SCANNER&quot;: {
			if (worldScripts[&quot;rockHermit_Locator&quot;]) {
				if (worldScripts[&quot;rockHermit_Locator&quot;].version == &quot;1.2.3&quot;) {
					worldScripts[&quot;rockHermit_Locator&quot;].shipLaunchedFromStation() // use the inbuild scripting of the OXP to restart it.
				} else {
					this.beacons = system.shipsWithPrimaryRole(&quot;rockbeacof&quot;); // list the inactive beacons (no lights or &quot;R&quot; on compass) 
					if (this.beacons.length &gt; 0) {
						for (let i = 0; i &lt; this.beacons.length; i++) {
							if (oolite.compareVersion(&#39;1.73&#39;) &lt;= 0) {
								this.beacons[i].position = this.beacons[i].position.multiply(100); //throw the rockbeacof into space... 
							} else {
								this.beacons[i].setPosition(this.beacons[i].position.multiply(100)); //throw the rockbeacof into space... 
							}

							this.beacons[i].explode(); //...and blow it up. 
						}
					}
					worldScripts[&quot;rockHermit_Locator&quot;].buoy = &quot;rockbeacon&quot;
					worldScripts[&quot;rockHermit_Locator&quot;].addBuoys() // no inactive beacons, so use original code to add active beacons. 
				}
				break;
			}
		}
	}
	if (this.playerDamagedList.length &gt; 1) {
		var repairTime = 120 + Math.ceil(Math.random() * 180);
		player.consoleMessage(&quot;Repairs ongoing&quot;, 6);
		this.damageControlTimer = new Timer(this, this.repairSystems, repairTime);
	}

}</pre></td>
                </tr>
                <tr>
                    <td valign="top">Scripts/neocaduceus_conditions.js</td>
                    <td><pre>&quot;use strict&quot;;
this.name        = &quot;NeoCaduceus_Conditions&quot;;
this.author      = &quot;phkb&quot;;
this.copyright   = &quot;2021 phkb&quot;;
this.description = &quot;Condition script for ships&quot;;
this.licence     = &quot;CC BY-NC-SA 3.0&quot;;

//-------------------------------------------------------------------------------------------------------------
this.allowSpawnShip = function(shipKey) {
    if (system.government &gt; 3 &amp;&amp; system.techLevel &gt; 7) return true;
    return false;
}

//-------------------------------------------------------------------------------------------------------------
this.allowAwardEquipment = function(equipment, ship, context) {
    if (context === &quot;scripted&quot;) return true;
    return false;
}</pre></td>
                </tr>
            </table>
        </a>
    </body>
</html>
