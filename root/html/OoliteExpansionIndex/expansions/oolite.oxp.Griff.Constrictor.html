<html>
    <head>
        <title>Expansion Griff Constrictor</title>
        <link rel="stylesheet" href="../style.css">
    </head>
    <body>
        <table border="0" width="100%">
            <tr>
                <td>Back to <a href='../index.html'>Index</a></td>
                <td align="right"><small>Page generated: Oct 11, 2023, 3:16:48 PM</small></td>
            </tr>
        </table>

        <h1>Expansion Griff Constrictor</h1>

        <h2>Content</h2>
        <ul>
          
          <li><a href="#manifest">Manifest</a></li>
          <li><a href="#documentation">Documentation</a></li>
          <li><a href="#equipment">0 Equipment</a></li>
          <li><a href="#ships">2 Ships</a></li>
          <li><a href="#models">0 Models</a></li>
          <li><a href="#scripts">1 Scripts</a></li>
        </ul>


        <a name="manifest">
        <h2>Manifest</h2>
            <table border="1">
                <tr>
                    <th></th>
                    <th>from Expansion Manager's OXP list</th>
                    <th>from Expansion Manifest</th>
                </tr>
                <tr>
                    <td>Description</td>
                    <td>Constrictor. Requires a video card capable of supporting Oolite Shaders. Note - this OXP suppresses the spawning of the Default Oolite Constrictor, replacing it with the version in this oxp</td>
                    <td>Constrictor. Requires a video card capable of supporting Oolite Shaders. Note - this OXP suppresses the spawning of the Default Oolite Constrictor, replacing it with the version in this oxp</td>
                </tr>
                <tr>
                    <td>Identifier</td>
                    <td>oolite.oxp.Griff.Constrictor</td>
                    <td>oolite.oxp.Griff.Constrictor</td>
                </tr>
                <tr>
                    <td>Title</td>
                    <td>Griff Constrictor</td>
                    <td>Griff Constrictor</td>
                </tr>
                <tr>
                    <td>Category</td>
                    <td>Retextures</td>
                    <td>Retextures</td>
                </tr>
                <tr>
                    <td>Author</td>
                    <td>Griff</td>
                    <td>Griff</td>
                </tr>
                <tr>
                    <td>Version</td>
                    <td>1.04.1</td>
                    <td>1.04.1</td>
                </tr>
                <tr>
                    <td>Tags</td>
                    <td></td>
                    <td></td>
                </tr>
                <tr>
                    <td>Required Oolite Version</td>
                    <td></td>
                    <td></td>
                </tr>
                <tr>
                    <td>Maximum Oolite Version</td>
                    <td></td>
                    <td></td>
                </tr>
                <tr>
                    <td>Required Expansions</td>
                    <td>
                    </td>
                    <td>
                    </td>
                </tr>
                <tr>
                    <td>Optional Expansions</td>
                    <td>
                    </td>
                    <td>
                    </td>
                </tr>
                <tr>
                    <td>Conflict Expansions</td>
                    <td>
                    </td>
                    <td>
                    </td>
                </tr>
                <tr>
                    <td>Information URL</td>
                    <td><a target="_blank" href="http://wiki.alioth.net/index.php/Griff_Industries">http://wiki.alioth.net/index.php/Griff_Industries</a></td>
                    <td><a target="_blank" href="">n/a</a></td>
                </tr>
                <tr>
                    <td>Download URL</td>
                    <td><a target="_blank" href="https://wiki.alioth.net/img_auth.php/f/f3/Oolite.oxp.Griff.Constrictor.oxz">https://wiki.alioth.net/img_auth.php/f/f3/Oolite.oxp.Griff.Constrictor.oxz</a></td>
                    <td><a target="_blank" href="">n/a</a></td>
                </tr>
                <tr>
                    <td>License</td>
                    <td>CC-BY-NC-SA 4.0</td>
                    <td>CC-BY-NC-SA 4.0</td>
                </tr>
                <tr>
                    <td>File Size</td>
                    <td>n/a</td>
                </tr>
                <tr>
                    <td>Upload date</td>
                    <td>1610873513</td>
                </tr>
            </table>
                </a>

        <a name="documentation">
        <h2>Documentation</h2>
        <p>Also read <a href='http://wiki.alioth.net/index.php/Griff%20Constrictor'>http://wiki.alioth.net/index.php/Griff%20Constrictor</a></p>
        </a>

        <a name="equipment">          
        <h2>Equipment</h2>
            This expansion declares no equipment. 
        </a>

        <a name="ships">    
        <h2>Ships</h2>
            <table>
                <tr>
                    <th>Name</th>
                </tr>
                <tr>
                    <td><a href="../ships/griff_constrictor-NPC.html">griff_constrictor-NPC</a></td>
                </tr>
                <tr>
                    <td><a href="../ships/griff_constrictor-briefing.html">griff_constrictor-briefing</a></td>
                </tr>
            </table>
        </a>

        <a name="models">    
        <h2>Models</h2>
            This expansion declares no models. 
        </a>

        <a name="scripts">    
        <h2>Scripts</h2>
            <table>
                <tr>
                    <th>Path</th>
                </tr>
                <tr>
                    <td valign="top">Scripts/oolite-constrictor-hunt-mission.js</td>
                    <td><pre>/*

oolite-constrictor-hunt-mission.js

Script for Constrictor Hunt mission.


Oolite
Copyright © 2004-2013 Giles C Williams and contributors

This program is free software; you can redistribute it and/or
modify it under the terms of the GNU General Public License
as published by the Free Software Foundation; either version 2
of the License, or (at your option) any later version.

This program is distributed in the hope that it will be useful,
but WITHOUT ANY WARRANTY; without even the implied warranty of
MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
GNU General Public License for more details.

You should have received a copy of the GNU General Public License
along with this program; if not, write to the Free Software
Foundation, Inc., 51 Franklin Street, Fifth Floor, Boston,
MA 02110-1301, USA.

*/


// jslint bug: the &quot;laxbreak&quot; setting doesn&#39;t reliably work, which causes complaints about case indentation.
/*jslint white: true, laxbreak: true, undef: true, eqeqeq: true, bitwise: true, newcap: true, immed: true */
/*global galaxyNumber, guiScreen, mission, missionVariables, player, system*/


&quot;use strict&quot;;


this.name			= &quot;oolite-constrictor-hunt&quot;;
this.author			= &quot;Eric Walch&quot;;
this.copyright		= &quot;© 2008-2013 the Oolite team.&quot;;
this.version		= &quot;1.79&quot;;


this._cleanUp = function ()
{
	// Remove event handlers.
	delete this.guiScreenChanged;
	delete this.missionScreenOpportunity;
	delete this.systemWillPopulate;
};


/**** Event handlers ****/


this.startUp = function ()
{
	// Remove event handlers once the mission is over.
	if (missionVariables.conhunt === &quot;MISSION_COMPLETE&quot;)
	{
		this._cleanUp();
	}
	
	delete this.startUp;
};


this.guiScreenChanged = function ()
{
	if (galaxyNumber &lt; 2 &amp;&amp; missionVariables.conhunt === &quot;STAGE_1&quot;)
	{
		if (guiScreen === &quot;GUI_SCREEN_SYSTEM_DATA&quot;)
		{
			if (galaxyNumber === 0)
			{
				switch (system.ID)
				{
					case 28:
					case 36:
					case 150:
						mission.addMessageTextKey(&quot;constrictor_hunt_0_&quot; + system.ID);
						break;
						
					default:
						break;
				}
			}
			if (galaxyNumber === 1)
			{
				switch (system.ID)
				{
					case 3:
					case 5:
					case 16:
					case 26:
					case 32:
					case 68:
					case 106:
					case 107:
					case 162:
					case 164:
					case 184:
					case 192:
					case 220:
						mission.addMessageTextKey(&quot;constrictor_hunt_1_A&quot;);
						break;
						
					case 253:
					case 79:
					case 53:
					case 118:
					case 193:
						mission.addMessageTextKey(&quot;constrictor_hunt_1_&quot; + system.ID);
						break;
						
					default:
						break;
				}
			}
		}
	}
};


// this function is potentially called multiple times.
this.missionScreenOpportunity = function ()
{
	if (player.ship.dockedStation.isMainStation)
	{
		if (galaxyNumber &lt; 2 &amp;&amp; !missionVariables.conhunt &amp;&amp; player.score &gt; 255)
		{
			// there are no options to deal with, we don&#39;t need a callback function.
			mission.runScreen({
				titleKey: &quot;constrictor_hunt_title&quot;,
				messageKey: &quot;constrictor_hunt_brief1&quot;,
				model: &quot;griff_constrictor-briefing&quot;
			});
			if (galaxyNumber === 0)
			{
				mission.addMessageTextKey(&quot;constrictor_hunt_brief1a&quot;); // galaxy = 0
				mission.setInstructionsKey(&quot;constrictor_hunt_info1a&quot;);
			}
			else
			{
				mission.addMessageTextKey(&quot;constrictor_hunt_brief1b&quot;); // galaxy = 1
				mission.setInstructionsKey(&quot;constrictor_hunt_info1b&quot;);
			}
			missionVariables.conhunt = &quot;STAGE_1&quot;;
		}
		if (missionVariables.conhunt === &quot;CONSTRICTOR_DESTROYED&quot;)  // Variable is set by the ship script
		{
			mission.runScreen({
				titleKey: &quot;constrictor_hunt_title&quot;,
				messageKey: &quot;constrictor_hunt_debrief&quot;,
				model: &quot;griff_constrictor-briefing&quot;
			});
			player.credits += 5000;
			player.bounty = 0;	  // legal status
			player.score += 256;  // ship kills
			mission.setInstructions(null);  // reset the mission briefing
			missionVariables.conhunt = &quot;MISSION_COMPLETE&quot;;
			this._cleanUp();
		}
	}
};


this.systemWillPopulate = function()
{
	if (galaxyNumber === 1 &amp;&amp;
		system.ID === 193 &amp;&amp;
		missionVariables.conhunt === &quot;STAGE_1&quot;)
	{
		system.setPopulator(&quot;oolite-constrictor-mission&quot;,
			{
				priority: 50,
				location: &quot;WITCHPOINT&quot;,
				callback: function(pos)
				{
					var constrictor = system.addShips(&quot;constrictor&quot;, 1, pos, 0);
					constrictor[0].bounty = 250; // Ensure a bounty, in case it was missing in a custom shipdata.plist.
					// Attach script here and not in shipdata, so that like_ship copies of the constrictor have no mission script,
					// only the version used for the mission will have the script now.
					constrictor[0].setScript(&quot;oolite-constrictor.js&quot;);
				}
			});
	}
};
</pre></td>
                </tr>
            </table>
        </a>
    </body>
</html>
