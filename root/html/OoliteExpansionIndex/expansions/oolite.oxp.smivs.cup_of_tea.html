<html>
    <head>
        <title>Expansion Cup of Tea</title>
        <link rel="stylesheet" href="../style.css">
    </head>
    <body>
        <table border="0" width="100%">
            <tr>
                <td>Back to <a href='../index.html'>Index</a></td>
                <td align="right"><small>Page generated: Oct 11, 2023, 3:16:49 PM</small></td>
            </tr>
        </table>

        <h1>Expansion Cup of Tea</h1>

        <h2>Content</h2>
        <ul>
          <li><a href="#warnings">Warnings</a></li>
          <li><a href="#manifest">Manifest</a></li>
          <li><a href="#documentation">Documentation</a></li>
          <li><a href="#equipment">6 Equipment</a></li>
          <li><a href="#ships">0 Ships</a></li>
          <li><a href="#models">0 Models</a></li>
          <li><a href="#scripts">1 Scripts</a></li>
        </ul>

          <a name="warnings">
            <h2>Warnings</h2>
            <ol>
                <li>Tags mismatch between OXP Manifest and Expansion Manager at character position 0002 (RIGHT SQUARE BRACKET vs LATIN SMALL LETTER A)(&#39;[]&#39; vs &#39;[ambience]&#39;)</li>
            </ol>
          </a>

        <a name="manifest">
        <h2>Manifest</h2>
            <table border="1">
                <tr>
                    <th></th>
                    <th>from Expansion Manager's OXP list</th>
                    <th>from Expansion Manifest</th>
                </tr>
                <tr>
                    <td>Description</td>
                    <td>Buy a tea making machine. This will brew a lovely cup of tea in 15 seconds. Enjoy!</td>
                    <td>Buy a tea making machine. This will brew a lovely cup of tea in 15 seconds. Enjoy!</td>
                </tr>
                <tr>
                    <td>Identifier</td>
                    <td>oolite.oxp.smivs.cup_of_tea</td>
                    <td>oolite.oxp.smivs.cup_of_tea</td>
                </tr>
                <tr>
                    <td>Title</td>
                    <td>Cup of Tea</td>
                    <td>Cup of Tea</td>
                </tr>
                <tr>
                    <td>Category</td>
                    <td>Ambience</td>
                    <td>Ambience</td>
                </tr>
                <tr>
                    <td>Author</td>
                    <td>Smivs</td>
                    <td>Smivs</td>
                </tr>
                <tr>
                    <td>Version</td>
                    <td>1.2</td>
                    <td>1.2</td>
                </tr>
                <tr>
                    <td>Tags</td>
                    <td></td>
                    <td>ambience</td>
                </tr>
                <tr>
                    <td>Required Oolite Version</td>
                    <td></td>
                    <td></td>
                </tr>
                <tr>
                    <td>Maximum Oolite Version</td>
                    <td></td>
                    <td></td>
                </tr>
                <tr>
                    <td>Required Expansions</td>
                    <td>
                    </td>
                    <td>
                    </td>
                </tr>
                <tr>
                    <td>Optional Expansions</td>
                    <td>
                    </td>
                    <td>
                    </td>
                </tr>
                <tr>
                    <td>Conflict Expansions</td>
                    <td>
                    </td>
                    <td>
                    </td>
                </tr>
                <tr>
                    <td>Information URL</td>
                    <td><a target="_blank" href=""></a></td>
                    <td><a target="_blank" href="">n/a</a></td>
                </tr>
                <tr>
                    <td>Download URL</td>
                    <td><a target="_blank" href="https://wiki.alioth.net/img_auth.php/4/42/Cup_of_Tea-v1.2.oxz">https://wiki.alioth.net/img_auth.php/4/42/Cup_of_Tea-v1.2.oxz</a></td>
                    <td><a target="_blank" href=""></a></td>
                </tr>
                <tr>
                    <td>License</td>
                    <td>CC-BY-NC-SA 4.0</td>
                    <td>CC-BY-NC-SA 4.0</td>
                </tr>
                <tr>
                    <td>File Size</td>
                    <td>n/a</td>
                </tr>
                <tr>
                    <td>Upload date</td>
                    <td>1610873283</td>
                </tr>
            </table>
                </a>

        <a name="documentation">
        <h2>Documentation</h2>
        <p>Also read <a href='http://wiki.alioth.net/index.php/Cup%20of%20Tea'>http://wiki.alioth.net/index.php/Cup%20of%20Tea</a></p>
        <h3>readme.rtf</h3>
        <pre>ï»¿Cup of Tea OXP V1.2

This OXP adds a cockpit Tea Maker for your ship.  

You can buy a Tea maker anywhere for just 100Cr. The Tea Maker is supplied with 25 &#39;T-pods&#39;. A &#39;T-pod&#39; is a disposable mug containing all the ingredients for your cup of tea. The Tea Maker then boils water, adds it to your tea and brews it.
Your Tea maker is primable equipment - &#39;Shift-n&#39; to prime, and &#39;n&#39; to activate. Console messages will tell you how your tea is progressing, and a gong will alert you when it is ready.
Your Tea Maker will warn you when you have only five &#39;T-pods&#39; remaining and you will also be told when you are using your last &#39;T-pod&#39;. You can buy more &#39;T-pods&#39; from the ship Outfitters when there are five or less left in the machine. The Tea Maker will not work once these are all gone.
Choose between Tea, Tea with Milk, Tea with Sugar and Tea with Milk and Sugar. 25 &#39;T-pods&#39; will cost 10Cr.
The Express Tea Maker can be fitted in the cockpit of your ship where it is unlikely to suffer damage, and only takes five minutes to install. It is fully portable and you can move it to any new ship you buy.

License:-
This work is licensed under the Creative Commons Attribution-Noncommercial-Share Alike 3.0Unported License. To view a copy of this license, visit http://creativecommons.org/licenses/by-nc-sa/3.0/ or send a letter to Creative Commons, 171 Second Street, Suite 300, San Francisco, California, 94105, USA.

Author:-
The OXP was developed by Smivs.





</pre>
        </a>

        <a name="equipment">          
        <h2>Equipment</h2>
            <table>
                <tr>
                    <th>Name</th>
                    <th>Visible</th>
                    <th>Cost [deci-credits]</th>
                    <th>Tech-Level</th>
                </tr>
                <tr>
                    <td><a href="../equipment/EQ_TEAPOT.html">Express Tea Maker</a></td>
                    <td>yes</td>
                    <td align="right">1000</td>
                    <td align="center">1+</td>
                </tr>
                <tr>
                    <td><a href="../equipment/EQ_TEA_MAKER.html">Express Tea Maker</a></td>
                    <td>yes</td>
                    <td align="right">0</td>
                    <td align="center">17+</td>
                </tr>
                <tr>
                    <td><a href="../equipment/EQ_TEA_REFILL_1.html">Tea &#39;T-Pods&#39;</a></td>
                    <td>no</td>
                    <td align="right">100</td>
                    <td align="center">1+</td>
                </tr>
                <tr>
                    <td><a href="../equipment/EQ_TEA_REFILL_2.html">Tea with Milk &#39;T-Pods&#39;</a></td>
                    <td>no</td>
                    <td align="right">100</td>
                    <td align="center">1+</td>
                </tr>
                <tr>
                    <td><a href="../equipment/EQ_TEA_REFILL_3.html">Tea with Sugar &#39;T-Pods&#39;</a></td>
                    <td>no</td>
                    <td align="right">100</td>
                    <td align="center">1+</td>
                </tr>
                <tr>
                    <td><a href="../equipment/EQ_TEA_REFILL_4.html">Tea with Milk and Sugar &#39;T-Pods&#39;</a></td>
                    <td>no</td>
                    <td align="right">100</td>
                    <td align="center">1+</td>
                </tr>
            </table>
        </a>

        <a name="ships">    
        <h2>Ships</h2>
            This expansion declares no ships. This may be related to warnings.
        </a>

        <a name="models">    
        <h2>Models</h2>
            This expansion declares no models. This may be related to warnings.
        </a>

        <a name="scripts">    
        <h2>Scripts</h2>
            <table>
                <tr>
                    <th>Path</th>
                </tr>
                <tr>
                    <td valign="top">Scripts/TeaMakerScript.js</td>
                    <td><pre>/*jslint white: true, undef: true, eqeqeq: true, bitwise: true, regexp: true, newcap: true, immed: true */

&quot;use strict&quot;;

// Standard attributes 
this.name           = &quot;TeaMakerScript.js&quot;; 
this.author         = &quot;Smivs&quot;; 
this.copyright      = &quot;(C) Smivs&quot;
this.licence        = &quot;Creative Commons Attribution - Non-Commercial - Share Alike 4.0&quot;
this.version        = &quot;1.2&quot;; 
this.description    = &quot;Script to operate tea-maker and control refills.&quot;; 

this.missionScreenOpportunity = function()
// update old TEA_MAKER version to new TEAPOT version for existing users
{
if (player.ship.docked &amp;&amp; player.ship.equipmentStatus(&quot;EQ_TEA_MAKER&quot;) == &quot;EQUIPMENT_DAMAGED&quot;)
  {
    return;
  }
if (player.ship.docked &amp;&amp; player.ship.equipmentStatus(&quot;EQ_TEA_MAKER&quot;) == &quot;EQUIPMENT_OK&quot;)
  {
    mission.runScreen({title: &quot;!!! Software Update !!!&quot;, messageKey: &quot;teaPotUpdate&quot;});
    player.ship.removeEquipment(&quot;EQ_TEA_MAKER&quot;);
    player.ship.awardEquipment(&quot;EQ_TEAPOT&quot;);
// clean up old status variable from previous versions...
      {
        if(missionVariables.teaRefill)
          {
            delete missionVariables.teaRefill;
          }
      }
// ...and set new variable
    missionVariables.teaRefill_status = &quot;OK&quot;;
// clean up old counter variable from previous versions...
      {
        if(missionVariables.teaRefillCounter)
          {
            delete missionVariables.teaRefillCounter;
          }
      }
// then set new counter variable
    missionVariables.teaRefill_counter = 25;
  }
}
this.playerBoughtEquipment = function(equipment)
// set variables upon purchase
{
  if (equipment == &quot;EQ_TEAPOT&quot;)
    {
      missionVariables.teaRefill_status = &quot;OK&quot;;
       {
// setup variable (counter) to control refill availability
         if (!missionVariables.teaRefill_counter)
	  {
	    missionVariables.teaRefill_counter = 25;
	  }
        }
    }
// when buying refills reset variable and add 25 &#39;T-pods&#39; to tally
  else if (equipment == &quot;EQ_TEA_REFILL_1&quot; || &quot;EQ_TEA_REFILL_2&quot; || &quot;EQ_TEA_REFILL_3&quot; || &quot;EQ_TEA_REFILL_3&quot;)
    {
      missionVariables.teaRefill_status = &quot;OK&quot;;
      missionVariables.teaRefill_counter += 25;
    }
}
this.allowAwardEquipment = function(equipment, ship, context)
// condition scripting for &#39;T-pods&#39; to control availability
{
  if (equipment == &quot;EQ_TEA_REFILL_1&quot; || &quot;EQ_TEA_REFILL_2&quot; || &quot;EQ_TEA_REFILL_3&quot; || &quot;EQ_TEA_REFILL_3&quot;)
    {
      if (context == &quot;purchase&quot; &amp;&amp; player.ship.equipmentStatus(&quot;EQ_TEAPOT&quot;) == &quot;EQUIPMENT_OK&quot; &amp;&amp; missionVariables.teaRefill_status != &quot;OK&quot;)
	{
	  return true;
	}
    }
}
this.activated = function()
{ 
// make un-available if no T-pods left
  if(missionVariables.teaRefill_status === &quot;RUN_OUT&quot;)
    {
      player.consoleMessage(&quot;Tea Maker un-available - Please re-supply.&quot;,5);
      return;
    }
// run teamaker
  if(missionVariables.teaRefill_status != &quot;RUN_OUT&quot;)
    {  
      this.boilWaterTimer = new Timer(this, this.$boilWater,1); // timer to boil water
      this.brewTeaTimer = new Timer(this, this.$brewTea,8); // timer to brew tea after 8 seconds
      this.teaReadyTimer = new Timer(this, this.$teaReady,15); // timer to confirm tea is ready
// we count off the &#39;T-Pods&#39; as they are used
	{
	  missionVariables.teaRefill_counter--;
	}
// ...until we reach 5 left.
      if (missionVariables.teaRefill_counter === 5)
	{
// warn player that only 5 remain - more can now be bought
        player.consoleMessage(&quot;After this cup you only have five &#39;T-pods&#39; left. You can buy some when you next dock.&quot;,5);			
        missionVariables.teaRefill_status = &quot;BUYABLE&quot;;
        }
// ...then when we reach 1 left.
      if (missionVariables.teaRefill_counter === 0)
	{
// Then require more &#39;T-Pods&#39;, disable Tea Maker, add &#39;T-Pods&#39; to F3 screen and reset counter.
        player.consoleMessage(&quot;This is your last &#39;T-Pod&#39; - you must buy some more.&quot;,5);
        missionVariables.teaRefill_status = &quot;RUN_OUT&quot;;

	}
    }
}
this.$boilWater = function()
{
			this.boilSound = new SoundSource; 
			this.boilSound.sound = &quot;boiling.ogg&quot;;
			this.boilSound.loop = false;
			this.boilSound.play();
  player.consoleMessage(&quot;The water is boiling...&quot;,5);
}
this.$brewTea = function()
{
			this.boilSound.stop();
			this.brewSound = new SoundSource; 
			this.brewSound.sound = &quot;brewing.ogg&quot;;
			this.brewSound.loop = false;
			this.brewSound.play();
  player.consoleMessage(&quot;Your tea is now brewing...&quot;,5);
}	
this.$teaReady = function()
{
			this.brewSound.stop();
			this.teaSound = new SoundSource; 
			this.teaSound.sound = &quot;teaSound.ogg&quot;;
			this.teaSound.loop = false;
			this.teaSound.play();
  player.consoleMessage(&quot;Your tea is now ready. Enjoy!&quot;,6);
  this.$teaTimerStop ();
}

this.$teaTimerStop = function()
// stop timers
{
  if(this.boilWaterTimer)
    {
      if (this.boilWaterTimer.isRunning) 
        {
          this.boilWaterTimer.stop();
          delete this.boilWaterTimer;
        }
     }
  if(this.brewTeaTimer)
     {
       if (this.brewTeaTimer.isRunning) 
         {
           this.brewTeaTimer.stop();
           delete this.brewTeaTimer;
         }
     }
  if(this.teaReadyTimer)
     {
       if (this.teaReadyTimer.isRunning) 
         {
           this.teaReadyTimer.stop();
           delete this.teaReadyTimer;
         }
      }
}
</pre></td>
                </tr>
            </table>
        </a>
    </body>
</html>
