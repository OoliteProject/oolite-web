<html>
    <head>
        <title>Expansion Life In The Frontier</title>
        <link rel="stylesheet" href="../style.css">
    </head>
    <body>
        <table border="0" width="100%">
            <tr>
                <td>Back to <a href='../index.html'>Index</a></td>
                <td align="right"><small>Page generated: Oct 11, 2023, 3:16:48 PM</small></td>
            </tr>
        </table>

        <h1>Expansion Life In The Frontier</h1>

        <h2>Content</h2>
        <ul>
          <li><a href="#warnings">Warnings</a></li>
          <li><a href="#manifest">Manifest</a></li>
          <li><a href="#documentation">Documentation</a></li>
          <li><a href="#equipment">0 Equipment</a></li>
          <li><a href="#ships">0 Ships</a></li>
          <li><a href="#models">0 Models</a></li>
          <li><a href="#scripts">6 Scripts</a></li>
        </ul>

          <a name="warnings">
            <h2>Warnings</h2>
            <ol>
                <li>Optional Expansions mismatch between OXP Manifest and Expansion Manager at character position 0055 (DIGIT ZERO vs LATIN SMALL LETTER N)</li>
            </ol>
          </a>

        <a name="manifest">
        <h2>Manifest</h2>
            <table border="1">
                <tr>
                    <th></th>
                    <th>from Expansion Manager's OXP list</th>
                    <th>from Expansion Manifest</th>
                </tr>
                <tr>
                    <td>Description</td>
                    <td>Roleplaying environment on space stations: go for a walk and get a casual event, that could bring an advantage or a risk, a reward or a trouble.</td>
                    <td>Roleplaying environment on space stations: go for a walk and get a casual event, that could bring an advantage or a risk, a reward or a trouble.</td>
                </tr>
                <tr>
                    <td>Identifier</td>
                    <td>oolite.oxp.BeeTLeBeTHLeHeM.LifeInTheFrontier</td>
                    <td>oolite.oxp.BeeTLeBeTHLeHeM.LifeInTheFrontier</td>
                </tr>
                <tr>
                    <td>Title</td>
                    <td>Life In The Frontier</td>
                    <td>Life In The Frontier</td>
                </tr>
                <tr>
                    <td>Category</td>
                    <td>Activities</td>
                    <td>Activities</td>
                </tr>
                <tr>
                    <td>Author</td>
                    <td>BeeTLe BeTHLeHeM, Norby</td>
                    <td>BeeTLe BeTHLeHeM, Norby</td>
                </tr>
                <tr>
                    <td>Version</td>
                    <td>0.7.3</td>
                    <td>0.7.3</td>
                </tr>
                <tr>
                    <td>Tags</td>
                    <td></td>
                    <td></td>
                </tr>
                <tr>
                    <td>Required Oolite Version</td>
                    <td></td>
                    <td></td>
                </tr>
                <tr>
                    <td>Maximum Oolite Version</td>
                    <td></td>
                    <td></td>
                </tr>
                <tr>
                    <td>Required Expansions</td>
                    <td>
                    </td>
                    <td>
                    </td>
                </tr>
                <tr>
                    <td>Optional Expansions</td>
                    <td>
                            <li>oolite.oxp.Norby.HDBG:0</li>
                    </td>
                    <td>
                            <li>oolite.oxp.Norby.HDBG:</li>
                    </td>
                </tr>
                <tr>
                    <td>Conflict Expansions</td>
                    <td>
                    </td>
                    <td>
                    </td>
                </tr>
                <tr>
                    <td>Information URL</td>
                    <td><a target="_blank" href="http://wiki.alioth.net/index.php/Life_in_the_Frontier">http://wiki.alioth.net/index.php/Life_in_the_Frontier</a></td>
                    <td><a target="_blank" href="">n/a</a></td>
                </tr>
                <tr>
                    <td>Download URL</td>
                    <td><a target="_blank" href="https://wiki.alioth.net/img_auth.php/8/89/Life_In_The_Frontier_0.7.3.oxz">https://wiki.alioth.net/img_auth.php/8/89/Life_In_The_Frontier_0.7.3.oxz</a></td>
                    <td><a target="_blank" href="">n/a</a></td>
                </tr>
                <tr>
                    <td>License</td>
                    <td>CC BY-NC-SA 4</td>
                    <td>CC BY-NC-SA 4</td>
                </tr>
                <tr>
                    <td>File Size</td>
                    <td>n/a</td>
                </tr>
                <tr>
                    <td>Upload date</td>
                    <td>1610873355</td>
                </tr>
            </table>
                </a>

        <a name="documentation">
        <h2>Documentation</h2>
        <p>Also read <a href='http://wiki.alioth.net/index.php/Life%20In%20The%20Frontier'>http://wiki.alioth.net/index.php/Life%20In%20The%20Frontier</a></p>
        <h3>LifeInTheFrontier_readme.txt</h3>
        <pre>DESCRIPTION:

Players roleplay their game session, depending on the career they choose, and the events in-flight. Space station, on the contrary, are still rather static (without considering OXP) and act more like a transition between two flights.
So I thought to help stations offering more variety, giving the player the chance to fire a random event while he is docked, an event that could requires a player choice and that can have effects (good and bad) on the player properties.

HOW IT WORKS:

When the player is docked to a station, he will find in the F4 screen a new item, &quot;Take a look around on the station&quot; (mainly placeholder text). If he select this item, the OXP will choose a random event from a list, and the player will have to confront it. Some events will be only description of something that happens in the vicinity of the player, while others will require choices and decisions, and usually they will have multiple resolutions.
The events are categorized depending on various factors: the system government, economy and TL, plus one &quot;generic&quot; category for events that can happen anywhere. Instead the specific categories are intended to create a precise atmosphere, so in dictatorial systems there will be a more oppressive feeling, and in low tech worlds it will possible to see more malfunctioning in systems.
Every category has a defined background - I have taken shots from corridors in old sci-fi movies but I don&#39;t know if I can use them, so in case I will remove them. For now consider them as placeholders.
The resolution of an event can include: variation in money, in bounty level, in ship fuel or cargo goods. In these case will be displayed a report screen showing what is changed.
Sometimes an event to happen will require a check on one of that properties, for example to avoid that the player loses more money than he actually has.
The player can fire an event for docking, to fire another event he will need to leave and dock to another (or the same) station - in this way the mechanic shouldn&#39;t be abused.

CHANGELOG:

0.7.3
-Disembark is possible after load game in additional stations.
-Fixed step back from life status screen in non-galcop stations.
-Fixed mission.screenID error message in non-galcop stations.

0.7.2
- Fixed bounty clearing at galcop terminal (by Norby).
- Non-galcop stations are limited to the hangar.
- HD Backgrounds OXP is used in life status screen and non-galcop hangar.
- Able to use hd background images made in any resolution (fit to height).

0.7.1
- Fixed action on Museum exit.

0.7
- Completed STORAGE, special location on Docks with restricted access: 25 credits or legal stance &lt;= -25 (friendly with criminals)
- Placed PASSENGERS LOUNGE, special location on Concourse-A
- Placed CHURCH OF THE COSMIC WANDERER, special location on Concourse-B
- Placed BOOKSHOP, special location on Concourse-B
- Placed MUSEUM, special location on Delight Avenue
- Placed FIT CENTER, special location on Olympian Square
- Implemented Station Map, visible from every lobby
- Commander stats and OXP flags are stored as a map (string with format name1=value1,name2=value2,name3=value3...) instead of an array. This should definitely fix every issue with loading and saving data.
- Placed BRIEFING ROOM, special location on Galcop Precinct.
- Placed DETAINMENT ZONE, special location on Galcop Precinct.
- Placed SOCIAL SERVICES, special location on Galcop Precinct.
- Placed PILOT COURSE ROOM, special location on Galcop Precinct.

- Implemented SOCIAL SERVICES mechanics:
	* Player can spend 4 hours doing social services. His reputation will increase of a small amount. His bounty will decrease of an amount. There&#39;s a chance of getting hurt during the work. In this case the time spent and bounty decrease are reduced.

- Implemented FIT CENTER mechanics:
	* The first time the commander visits a Fit Center, he must buy an Universal Fitness Badge for 15cr. This purchase include a month subscription.
	* The subscription can be renewed monthly for 10cr.
	* Commander mustn&#39;t be wounded or sick to enter the gym.
	* Every gym session increase commander strength.
	* If commander exercise more than once in two days, a chance of getting wounded while exercising increase.
	* If the commander get wounded, he&#39;ll must get healed before starting a new gym session.
	* If the commander get wounded, the maximum strength cap get lowered of a small amount. If this amount get very low (it requires a lot of accidents, though...) the commander can&#39;t access the gym anymore until he get a recovering therapy from an hi-tech Medical Center.
	* If the commander doesn&#39;t go to the gym for more than a week, strength will lower of a small amount after every dock.
	* If commander can&#39;t access the gym because he has endured too much damage, he can go to a hi-tech system Medical Center and get into a Recovery Therapy for 400cr. This therapy is available only when the player has sustained a lot of damage (only in the gym for now).
	* The status screen (access from the hangar) report the Universal Fitness expiration status, when the player buys it.

0.6.1
- Fixed corridor background name - this should avoid log warning messages about texture files not found.
- Fixed paytreatment action, MedCenter treatment should give no exception now.
- Deleted useless number from OXP versioning - better late then never. (Current model: MajorVersion.MinorVersion.Fix)

0.1.6 (0.6)
- When accessing the OXP from the F4 screen, the player goes directly to the Hangar.
- The player can display the Commander Status screen from the Hangar.
- Station layout updated following forum discussion on the current design.
- Changed some definitions for station locations.
- Lobby indications are more schematic.
- The Storage location has been promoted to special location.
- Implemented Hotel, moved location to Main Concourse-A because Delight Avenue has already 3 planned locations.
- Implemented the Wild Worlds Virtual Tour, on the Delight Avenue (Recreation Bridge).

0.1.5.1 (0.5.1)
- Fixed check on the variables introduced in 0.1.5.
- Fixed check on varStore array items before setting values.

0.1.5 (0.5)
- Added background to Docks Area;
- Add text snippet for drunken status (along with wounds and sickness);
- Implemented event-checks for &quot;government&quot;, &quot;tech&quot; and &quot;economy&quot;. The government check can take a list of governments, separated by &quot;-&quot; character. If the system government is in the list, the check is valid;
- Added events: ROBO-BARD, HUNTERS, DELIRIOUS DROID, COMMERCIAL DROID, SUPERCELEBRITY, LIGHTS MALFUNCTION, WATER MALFUNCTION, AIR MALFUNCTION, DEFACING KIDS
- &quot;her/him/his&quot; not capitalized anymore;
- Commander stats are saved as a string with comma-separated values rather than 5 missionVariables.
- Game flags are saved as a string with comma-separated values rather than 8 missionVariables.
- Variables still not used aren&#39;t loaded anymore from the savegame, and are saved with null values to purge them from the file.
- Refactored method for checks on event/choice requirements: it&#39;s now possible to interrogate a parameter with operators =, !=, &lt;, &lt;=, &gt;, &gt;=. The requirement syntax changes. E.g.: no more credits:500, but credits=500, or credits&lt;500 etc.
- Event text can be present as parameter &quot;text&quot; (static text, always displayed) *OR* as indexed parameters (text0, text1, text2): in the latter case, it&#39;s possible to specify display conditions, with syntax &quot;condition|text to display&quot;. If an indexed text has no condition is considered static (always displayed). The validated indexed text are concatenated.
- Event property &quot;choiceRequires&quot; has been removed. It has been replaced by &quot;r&quot;(+ choice index), that contains the facultative requirements for the single choice. If a choice has no requirements (no &quot;r&quot; property), the choice is always displayed.
- I believe I have removed the end-event resume screen at least one release ago, forgot to write it down.
- To avoid confusion, in the event properties requires and r I don&#39;t use the &#39;:&#39; char as separator anymore, but the equal sign &#39;=&#39;.
- Refactored action executions when player select an event or a location choice. There are some differences in some actions, so I had to differentitate: go (random event) and goNav (navigation), end (random event) and endNav (navigation).
- Implemented condition if to the events action. Now it&#39;s possible to define a condition (or multiple conditions, comma-separated), and to link it to two results: the &quot;valid condition&quot; and the &quot;else&quot;. I&#39;m going to read again the various random events to introduce conditions when necessary, to streamline the event flow. Syntax is: if:&lt;conditions&gt;?&lt;actions&gt;;&lt;elseActions&gt;
- I&#39;ve lost some features (the hotel, the wild world virtual tour and the new Medical Center text), so I&#39;ll have to rethink them in the next days. Actually I have changed the Medicla Center concept, so the options are always displayed but if the player isn&#39;t sick or wounded or drunk the receptionist will refuse to start the treatment.
- Fixed: the Galcop terminal didn&#39;t show the price for cleaning the criminal record.
- The DEFACING KIDS event can enable a flag - eventually the consequence will be shown when the player reach the docks area.

0.1.4 (0.4)
- Code optimization and refactoring. Creation of new js files for common methods, for mission-related methods, and for inside-station navigation methods.
- Restarted from scratch (taking the old code piece for piece).
- The F4 link shows a literal resume of the player. From this screen, the player can &quot;disembark&quot; from the ship and wander into the space station.
- &quot;Tubes Stop&quot; locations allow player to move across five different levels. Every level has a theme and several inner locations. The levels are to be intended as concentric.
- Events are not fired by player anymore. But moving into the station there is a 20% chance (not definitive) of firing a random event. They act like an intermission, basically.
- Added random snippet (from a list of 20) of texts when at a Tube Stop.

- Added all the events already implemented in 0.1.3 (beside the bar ones)
- Added the bar events: the gossip option has been moved to the &quot;talk with bartender one&quot;. Bartender doesn&#39;t give hints about contractors anymore.
- It&#39;s possible to clean own criminal record at the Galcop termminal (in the Galcop precinct) paying a fine of (500cr x current bounty).
- Added the Art Gallery and the art genre random generator.
- Added the Opera House and the music genre random generator.
- Added the Cinema Hall and the movie genre random generator.
- If player is wounded or sick, randomly add short descriptive snippet of text while moving around the station.
- Added a short single-row-status text to show on top of the locations screens.
- Added two backgrounds for the &quot;Tubes&quot;.
- Changed &quot;Tube Stop&quot; to &quot;Lift Station&quot;, and &quot;Tubes&quot; to &quot;Lift&quot;. The direction is relative, it&#39;s not necessary an up-down transport.

- The property background can contain more background file names separated by comma: the OXP will choose a random background between those specified.
- Added some more backgrounds, I&#39;m trying to add variety and get an &quot;identity&quot; for the various levels.
- Added medical center location: here the player can cure wounds and sickness for a price. Price and amount of cure changes in relation to system tech level. The medical center can also rid of drunken status for free, but with a chance for a slight sickness.

- Added health/sickness management, with the following rules being checked every time the player docks to a station:
1) if sickness &gt; 1, chance 10% of worsening (sickness +1);
2) if sickness = 1, chance 10% of healing (sickness = 0);
3) if health &gt; 1, chance 10% of worsening (health + 1);
4) if health = 1, chance 10% of healing (health = 0);
5) if health &gt; 2 and sickness &lt; 2, chance 10% of infection (sickness +1);
6) if health &gt; 2 or sickness &gt; 2, chance 10% of physical shape reduction
- If player has health or sickness in critical conditions (&gt;= 5), has a 50% of pass-out. In this case he will be automatically transported to the station Medical Center and cured (with system TL limitations). Player will receive a decrease in reputation (for careless behaviour) and the price of the opeation will be automatically withdrawn from his account - if he has&#39;t enough money his bounty will be slightly increased (for debt insolvency).

0.1.3 (0.3)
- implemented a time variable for events. It&#39;s now possible to define how much time will be spent when executing an event. Instead of creating a separate property, the variabile is set in the &quot;end:x&quot; command, where x is the time spent in seconds. So &quot;end:600&quot; means &quot;terminate the event and go forward 10 minutes in time&quot;. Use &quot;end:0&quot; to avoid spending game-time;
- As a general rule for numeric command parameters, two values comma-separated will be interpreted as a range, and a random number between the specified values will be extracted. This applies even to the time variable above;
- Added a new resolution to the &quot;elixir peddler&quot; event, that use the time variable above;

- implemented the constants $SPECIES_S$ (singular) and $SPECIES_P$ (plural), that set a random species if requested by the event text. The species value remain fixed until the end of the event;
- implemented the constants $GENDERSUBJ$ (he/she), $GENDEROBJ$ (him/her), $GENDERPOSS$ (his/her). The random chosen gender remain fixed untile the end of the event. The gender-values are correlated to maintain coherence throughout the text;
- fixed the text of all the events implemented until now;
- added five &quot;no-events&quot;;

- added a new script file (LITF_RPGElements.js) to keep together the RPG-lite functions;
- changed the F4 link in &quot;Visit the station hub&quot;: it show a main screen with player current RPG-lite status (reputation, health, sickness, strength), the link to the random event and something more...;
- added description for all the status variables;
- added arrays of &quot;minor&quot; cargo types to be inserted in missions text: these aren&#39;t new cargo types, they will only be treated as random labels to differentiate the text depending on player reputation;

- The link on the F4 page has been changed to &quot;Visit the station hub&quot; and if selected shows the &quot;main screen&quot;;
- The &quot;main screen&quot; displays the player status (a literal description for the LITF variables);
- Added variables: reputation, health (wounds, bruises etc.), sickness, strength (physical shape);
- Added variable: stance. Positive stance = the law; negative stance = the criminals. Similar to reputation, but to be considered more like &quot;word on the street is&quot;; 
- Available choices for the &quot;main screen&quot;;
	* &quot;Take a walk to the Main Concourse&quot;. This fire a random event, as before;

- The player won&#39;t find the locations (bar, fit center, church, med center) on every system. I wrote a basic rule to distribute their presence in the galaxy. The rule is mathematical and based on the system ID, so the final results are fixed - for now only the bar is enabled;
- Re-edited the implemented events to use the variables in effects and requirements;
- Added constant $LIQUORS$ (with an array of 20 liquor random names), $SYSTEM$ (get random system name), $COMMODITY$ (get random vanilla commodity name), $GOSSIP$ (get a random gossip), $NAME$ (for random NPC name), $MINORCARGO$ (for transport missions);
- Added flag management (not mission flags), checks and manipulation;
- Added command &quot;time:x&quot;, if you don&#39;t want to end the events but only to spend time;

- Implemented first version mission generation. It works in two steps. First step: an NPC (in this case, the bartender) tells the player that another NPC has a job available: I store data about the NPC name, the system where he is, the type of mission and a generous time limite to reach him. When the player docks to a station I check if it&#39;s the right station and if the NPC hasn&#39;t expired: if everything&#39;s good, when the player enter the main concourse I switch to an alternate event: meeting the NPC, that introduce the job (a cargo transport), with a destination, a time limit and a type of &quot;minor cargo&quot; (see above). If the player accepts, I use this data to generate a real mission.
- Removed sickness effect when getting drunk, it&#39;s counter-productive. When I&#39;ll implement medical centers, player have the chance to pay to get sober.For now he can leave the station and dock to another station to rid of the drunkenness.

- Modified the cargo mission management: I don&#39;t use specialCargo or awardContract, but the OXP do the checks and display the page for completing a contract (always from the Main Concourse). It&#39;s not definitive, but it seems to work.
- Added events: CHARMING PARTNER, MUGGING, THE LOST DRUNKARD, MEDICAL CAMP

0.1.2 (0.2)
- enabled the one-event-for-dock flag (it was disabled for showing various events without leaving a station).
- changed the event management, I moved the events data from missionscript.plist to LITF_ActionsCatalog.js (renamed in LITF_EventsCatalog.js). In this way I can group everything related to an event in one object (text, requirements, choices and actions), and eventually I can make them more dynamic;
- renamed property &quot;check&quot; (property-checks that allow the event to happens) in &quot;requires&quot;;
- added property &quot;choiceRequires&quot;, contains pipe-concatenated string with checks for every event choice (see check property list) for selecting choices to display under particular circumstances; use &quot;valid:1&quot; for always display a choice, and &quot;valid:0&quot; to always hide it;
- added events:
	GENERIC: charity
	GENERIC: alien discussion
- implemented code for replace constants in event/choice text with a random element from a related array: actually used in the charity event, constant $CHARITY$.

0.1.1 (0.1)
- events category list:
	&quot;generic&quot; category
	station allegiance (disabled)
	system government (gov_0 - gov_7)
	system tech level (ltech, htech), values 5-9 are converted to &quot;generic&quot;
	system economy (ind, agri), values 3-4 are converted to &quot;generic&quot;
	OXP choose a value from an array with the values [ generic, gov_x, tl_x, eco_x]
	Maybe in the future I could add as new categories ranges for player rank or player bounty
- specific background picture depending on event category: system government, tech level (low tech, high tech) and economy (industrial, agricolture). &quot;Generic&quot; events will show the related system government background;
- event one-click for docking disabled for testing and showing OXP workings;
- passing time for events temporarily disabled: to be reintroduced it as an event property;
- event effects list:
	mt_[name]:[value] add [value] to the player ship manifest good identified by [name]. 
	bounty:[value] add [value] to the current player bounty.
	fuel:[value] add [value] to the current player ship fuel amount.
	credits[value] add [value] to the current player credits.
	go:[label] fire the event identified by [label]
	end:0 end the event
	[value] can be positive or negative. There are checks to avoid negative results or values exceeding cargo space.
- check property list:
	mt[name]:[value] check for player ship manifest good identified by [name] &gt;= [value]
	mt&lt;[name]:[value] check for player ship manifest good identified by [name] &lt; [value]
	fuel:[value] check for player ship fuel amount &gt;= [value]
	fuel&lt;:[value] check for player ship fuel amount &lt; [value]
	bounty:[value] check for current player bounty &gt;= [value]
	bounty&lt;:[value] check for current player bounty &lt; [value]
	credits:[value] check for current player credits &gt;= [value]
	credits&lt;:[value] check for current player credits &lt; [value]
- added events:
	GENERIC: beggar
	GENERIC: weird password guy
	GENERIC: fire
	GENERIC: fire + gossip
	GENERIC: shady seller
	GENERIC: partygoers
	GENERIC: running fugitive
	GENERIC: thief
	GENERIC: stranded crew (2 variants)

LICENSE:
This work is licensed under the Creative Commons Attribution-NonCommercial-ShareAlike License version 4.0.
If you are re-using any piece of this OXP, please let me know by sending an e-mail to norbylite@gmail.com.
Author: BeeTLe BeTHLeHeM
</pre>
        </a>

        <a name="equipment">          
        <h2>Equipment</h2>
            This expansion declares no equipment. This may be related to warnings.
        </a>

        <a name="ships">    
        <h2>Ships</h2>
            This expansion declares no ships. This may be related to warnings.
        </a>

        <a name="models">    
        <h2>Models</h2>
            This expansion declares no models. This may be related to warnings.
        </a>

        <a name="scripts">    
        <h2>Scripts</h2>
            <table>
                <tr>
                    <th>Path</th>
                </tr>
                <tr>
                    <td valign="top">Scripts/LITF_Common.js</td>
                    <td><pre>&quot;use strict&quot;;

this.name	= &quot;LITF_Common&quot;;
this.author	= &quot;BeeTLe BeTHLeHeM&quot;;
this.copyright	= &quot;2015 BeeTLe BeTHLeHeM&quot;;
this.description= &quot;Life in the Frontier - Common&quot;;
this.licence	= &quot;CC BY-NC-SA 4.0&quot;;

///////////////////////////////////////

this.$bountyFine = function() {
	return( player.bounty * 500 );
};


this.$log = function(msg) {
	if (worldScripts.LITF.LITF_logger == 1) {
		log(this.name, msg);
	}
};


this.$formatNumber = function(number) {
	var numStr = number.toString();
	var numFormat = &quot;&quot;;

	if (numStr.indexOf(&#39;.&#39;) &gt; -1) {
		var length = numStr.length;
		var dot = numStr.indexOf(&#39;.&#39;);

		if (length - dot &gt; 3) {
			numFormat = numStr.substring(0, dot + 3);
		} else {
			numFormat = numStr;
		}
	} else {
		numFormat = numStr;
	}

	return numFormat;
};


this.$replaceAll = function(find, replace, str) {
  return str.split(find).join(replace);
};


this.$extractChoices = function(pData) {
	var choiceCounter = 1;
	var valid = 1;

	var placeChoiceList = {};

	//var choiceRequirements = pData.choiceRequires;
	//this.$log(&quot;[extractChoices] choiceRequirements = &quot; + choiceRequirements);

	while (valid == 1) {
		//var cl = &quot;c&quot; + choiceCounter;
		var placeChoice = eval(&quot;pData.c&quot; + choiceCounter + &quot;;&quot;);

		if (placeChoice) {
			placeChoice = this.$replaceConstants(placeChoice);

            var vChoice = 0;
            var choiceReq = eval(&quot;pData.r&quot; + choiceCounter + &quot;;&quot;);
            if (choiceReq) {
                //var vChoice = this.$validateRequirements(choiceRequirements, choiceCounter - 1);
                vChoice = this.$validateRequirements(choiceReq);
            } else {
                // No requirements - always valid
                vChoice = 1;
            }

			this.$log(&quot;[extractChoices] c&quot; + choiceCounter + &quot; = &quot; + placeChoice + &quot; :: vChoice = &quot; + vChoice);

			if (vChoice == 1) {
				eval(&quot;placeChoiceList[\&quot;c&quot; + choiceCounter + &quot;\&quot;] = \&quot;&quot; + placeChoice + &quot;\&quot;;&quot;);
			}
			choiceCounter++;
		} else {
			valid = 0;
		}
	}

	return placeChoiceList;
};


//this.$validateRequirements = function(requirements, choiceIdx) {
this.$validateRequirements = function(choiceReq) {
	//if (requirements) {
		//var reqSplit = requirements.split(&quot;|&quot;);
		//this.$log(&quot;[validateChoice] require = &quot; + reqSplit[choiceIdx]);

		//var LITF_items = reqSplit[choiceIdx].split(&quot;,&quot;);
        var LITF_items = choiceReq.split(&quot;,&quot;);

		for (var i = 0; i &lt; LITF_items.length; i++) {
			//var reqChoice = LITF_items[i].split(&quot;:&quot;);
			//var validate = this.$checkRequirements(reqChoice);
            var validate = this.$checkRequirements(LITF_items[i]);

			//this.$log(&quot;[validateChoice] &quot; + reqChoice[0] + &quot; : &quot; + reqChoice[1] + &quot; = &quot; + validate);
            this.$log(&quot;[validateChoice] &quot; + LITF_items[i] + &quot; = &quot; + validate);

			if (validate == 0) { 
				return 0; 
			}
		}
	//}
	
	return 1;
};


this.$readNumericParameter = function(param) {
	var value = 0;
					
	if (param.indexOf(&quot;,&quot;) == -1) {
		value = parseInt(param);
	} else {
		var _paramSplit = param.split(&quot;,&quot;);

		var minValue = parseInt(_paramSplit[0]);
		var maxValue = parseInt(_paramSplit[1]);

		value = this.$randomValue(minValue, maxValue);
	}
	
	return value;
};


this.$randomValue = function(min, max) {
	if (min &gt; max) {
		var buf = min;
		min = max;
		max = buf;
	}

	var rv = Math.floor(Math.random() * (max - min + 1)) + min;
	
	//this.$log(&quot;[randomValue] (&quot; + min + &quot;, &quot; + max + &quot;) = &quot; + rv);
	
	return rv;
};

this.$checkValue = function(val1, val2, oper) {
    var result = 1;
    
    if (oper == &quot;!=&quot; &amp;&amp; val1 == val2) { result = 0; }
    if (oper == &quot;=&quot; &amp;&amp; val1 != val2) { result = 0; }
    
    if (oper == &quot;&lt;=&quot; &amp;&amp; val1 &gt; val2) { result = 0; }
    if (oper == &quot;&lt;&quot; &amp;&amp; val1 &gt;= val2) { result = 0; }
    
    if (oper == &quot;&gt;=&quot; &amp;&amp; val1 &lt; val2) { result = 0; }
    if (oper == &quot;&gt;&quot; &amp;&amp; val1 &lt;= val2) { result = 0; }
    
    if (oper == &quot;:&quot;) {
        result = 1;
        this.$log(&quot;[checkValue] ERROR!!! Wrong operator &#39;:&#39; !&quot;);
    }
    
    return result;
};


this.$checkRequirements = function(req) {
	var _litf = worldScripts.LITF;

    var oper = &quot;&quot;;
    
    if (req.indexOf(&quot;!=&quot;) &gt; -1) {
        oper = &quot;!=&quot;;
    } else if (req.indexOf(&quot;&lt;=&quot;) &gt; -1) {
        oper = &quot;&lt;=&quot;;
    } else if (req.indexOf(&quot;&gt;=&quot;) &gt; -1) {
        oper = &quot;&gt;=&quot;;
    } else if (req.indexOf(&quot;=&quot;) &gt; -1) {
        oper = &quot;=&quot;;
    } else if (req.indexOf(&quot;&lt;&quot;) &gt; -1) {
        oper = &quot;&lt;&quot;;
    } else if (req.indexOf(&quot;&gt;&quot;) &gt; -1) {
        oper = &quot;&gt;&quot;;
    // Cannot use &#39;:&#39;, ambiguous character for conditions
    //} else if (req.indexOf(&quot;:&quot;) &gt; -1) {
        //oper = &quot;:&quot;;
    }
    
    var reqSplit = req.split(oper);

	if (reqSplit[0].indexOf(&quot;flag_&quot;) == 0) {
        // flag_ management
        
		var flagName = reqSplit[0].substring(5);
		var validVal = parseInt(reqSplit[1]);

		var flagValue = eval(&quot;_litf.LITF_flags.&quot; + flagName + &quot;;&quot;);
		if (validVal != flagValue) { return 0; }
    
    } else if (reqSplit[0].indexOf(&quot;mt_&quot;) == 0) {
        // cargo commodities management
         
        var mtLabel = reqSplit[0].substring(3);
        eval(&quot;var mtValue = player.ship.manifest.&quot; + mtLabel + &quot;;&quot;);

        var mtCheck = parseInt(reqSplit[1]);

        var result = this.$checkValue(mtValue, mtCheck, oper);
        if (result == 0) { return 0; }	
	} else {
		// other checks

		switch (reqSplit[0]) {
            case &quot;bountyfine&quot;:
                var bFine = this.$bountyFine();
                var cfbVal = parseInt(reqSplit[1]); // 0 - not enough money, 1 - can pay
                if (player.credits &lt; bFine &amp;&amp; cfbVal == 1 ) return 0;
                if (player.credits &gt;= bFine &amp;&amp; cfbVal == 0 ) return 0;
                break;

            case &quot;checkFitBadge&quot;:
                var fitBadge = _litf.LITF_flags.fitBadge;

                var cfbVal = parseInt(reqSplit[1]); // 0 - no badge, 1 - expired badge, 2 - valid badge
    
                if (cfbVal == 0) {
                    if (fitBadge != -1) { return 0; }
                    
                } else {
                    if (fitBadge == -1) {
                        return 0;
                    } else {
                        var expired = this.$checkTimeForExpiration(fitBadge);
                        this.$log(&quot;[checkRequirements] expired(&quot; + fitBadge + &quot;) = &quot; + expired);
                        
                        if (cfbVal == 1 &amp;&amp; expired == 0) {
                            return 0;
                        } else if (cfbVal == 2 &amp;&amp; expired == 1) {
                            return 0;
                        }
                    }
                } 
                break;
                
            case &quot;economy&quot;:
                var syseco = this.$systemEconomy();
                if (syseco != reqSplit[1]) {
                    return 0;
                }
                break;

            case &quot;gov&quot;:
                var sysgov = system.government;
                var govSplit = reqSplit[1].split(&quot;-&quot;);
                var valid = 0;
                for (var i = 0; i &lt; govSplit.length; i++) {
                    if (this.$decodeGovernment(sysgov) == govSplit[i]) {
                        valid = 1;
                    }
                }
                if (valid == 0) { return 0; }
                break;

            case &quot;paytreatment&quot;:
                var heal = 0;

                var tl = this.$systemTechLevel();
                switch (tl) {
                    case &quot;lowtech&quot;:
                        heal = 2;
                        break;
                    case &quot;avgtech&quot;:
                        heal = 3;
                        break;
                    case &quot;hitech&quot;:
                        heal = 5;
                        break;
                }

                var price = heal * 50;

                if (player.credits &lt; price) {
                    return 0;
                }
                break;
                
            case &quot;tech&quot;:
                var systech = this.$systemTechLevel();
                if (systech != reqSplit[1]) {
                    return 0;
                }
                break;
			
			case &quot;valid&quot;:
				var validVal = parseInt(reqSplit[1]);
				if (validVal == 0) { return 0; }
				break;


            // Value-comparing checks

            
            case &quot;bounty&quot;:
                var checkVal = parseInt(reqSplit[1]);
                var result = this.$checkValue(player.bounty, checkVal, oper);
                if (result == 0) { return 0; }
                break;

            case &quot;credits&quot;:
                var checkVal = parseInt(reqSplit[1]);
                var result = this.$checkValue(player.credits, checkVal, oper);
                if (result == 0) { return 0; }
                break;

            case &quot;fuel&quot;:
                var checkVal = parseInt(reqSplit[1]);
                var result = this.$checkValue(player.ship.fuel, checkVal, oper);
                if (result == 0) { return 0; }
                break;

            case &quot;health&quot;:
                var checkVal = parseInt(reqSplit[1]);
                var result = this.$checkValue(_litf.LITF_cmdStats.health, checkVal, oper);
                if (result == 0) { return 0; }
                break;

            case &quot;maxstrength&quot;:
                var checkVal = parseInt(reqSplit[1]);
                var result = this.$checkValue(_litf.LITF_flags.maxStrength, checkVal, oper);
                if (result == 0) { return 0; }
                break;

            case &quot;reputation&quot;:
                var checkVal = parseInt(reqSplit[1]);
                var result = this.$checkValue(_litf.LITF_cmdStats.reputation, checkVal, oper);
                if (result == 0) { return 0; }
                break;

            case &quot;sickness&quot;:
                var checkVal = parseInt(reqSplit[1]);
                var result = this.$checkValue(_litf.LITF_cmdStats.sickness, checkVal, oper);
                if (result == 0) { return 0; }
                break;

            case &quot;stance&quot;:
                var checkVal = parseInt(reqSplit[1]);
                var result = this.$checkValue(_litf.LITF_cmdStats.stance, checkVal, oper);
                if (result == 0) { return 0; }
                break;

            case &quot;strength&quot;:
                var checkVal = parseInt(reqSplit[1]);
                var result = this.$checkValue(_litf.LITF_cmdStats.strength, checkVal, oper);
                if (result == 0) { return 0; }
                break;

			// XXX Contractordata?
			/*
			case &quot;hintData&quot;:
				var value = parseInt(reqSplit[1]);
				var hint = worldScripts.LITF.LITF_hintData;
				if (value == 0) {
					if (hint != undefined &amp;&amp; hint != &quot;&quot;) { return 0; }
				} else if (value == 1) {
					if (hint == undefined || hint == &quot;&quot;) { return 0; }
				}
				break;
			*/
		}
	}

	return 1;
};


this.$systemEconomy = function() {
	var ecoType = &quot;balanced&quot;;

	var economy = system.economy;
	if (economy &lt; 3) {
		ecoType = &quot;industrial&quot;;	
	} else if (economy &gt; 4) {
		ecoType = &quot;agriculture&quot;;
	}

	//this.$log(&quot;[stationCategories] System Economy = &quot; + ecoType);

	return ecoType;
};


this.$systemTechLevel = function() {
	var tech = &quot;avgtech&quot;;
	
	var tl = system.techLevel;
	if (tl &lt; 5) {
		tech = &quot;lowtech&quot;;
	} else if (tl &gt; 9) {
		tech = &quot;hitech&quot;;
	}

	//this.$log(&quot;[stationCategories] System Technology = &quot; + tech);

	return tech;	
};

this.$decodeGovernment = function(gov) {
	var govText = &quot;&quot;;

	switch (gov) {
		case 0:
			govText = &quot;anarchy&quot;;
			break;
		case 1:
			govText = &quot;feudal&quot;;
			break;
		case 2:
			govText = &quot;multigovernmental&quot;;
			break;
		case 3:
			govText = &quot;dictatorship&quot;;
			break;
		case 4:
			govText = &quot;communist&quot;;
			break;
		case 5:
			govText = &quot;confederacy&quot;;
			break;
		case 6:
			govText = &quot;democracy&quot;;
			break;
		case 7:
			govText = &quot;corporate&quot;;
			break;
	}

	return govText;
};

this.$stationCategories = function() {
	/*
		List of station.allegiance values:
			hunter
			galcop
			neutral
			pirate
			chaotic
			thargoid
			private
			restricted
	*//*
	var allegiance = player.ship.dockedStation.allegiance;
	this.$log(&quot;[stationCategories] Space Station Allegiance = &quot; + allegiance);
	*/

	/*
		List of system.government values:
			0: Anarchy
			1: Feudal
			2: Multi-Governmental
			3: Dictatorship
			4: Communist
			5: Confederacy
			6: Democracy
			7: Corporate State
	*/
	var government = &quot;gov_&quot; + system.government;
	//this.$log(&quot;[stationCategories] System Government = &quot; + government);
	
	var tech = this.$systemTechLevel();

	var ecoType = this.$systemEconomy();
	
	var sCategories = [ government, tech, ecoType ];

	return sCategories;
};


this.$screenBackground = function(screenBgStr) {
	var screenBg = &quot;&quot;;

	if (screenBgStr == undefined || screenBgStr == &quot;&quot;) {
		screenBg = this.$genericScreenBackground();
	} else {
		var screenBgSplit = screenBgStr.split(&quot;,&quot;);
		var bgIdx = Math.floor(Math.random() * screenBgSplit.length);
		screenBg = screenBgSplit[bgIdx];
	}

	if (screenBg != &quot;&quot;) {
		setScreenBackground({ name: screenBg, height: 480 });
	}
};


this.$genericScreenBackground = function() {
	var background = &quot;&quot;;
	
	var sCategories = this.$stationCategories();
	var catIdx = Math.floor(Math.random() * 3); 

	var cat = sCategories[catIdx];

	//if (cat == &quot;gen&quot;) {
	//	cat = &quot;gov_&quot; + system.government;
	//}

	// Set background depending on system government
	switch (cat) {
		case &quot;gov_0&quot;: 
			background = &quot;litf_bg_anarchy.png&quot;;
			break;
		case &quot;gov_1&quot;:
			background = &quot;litf_bg_feudal.png&quot;;
			break;
		case &quot;gov_2&quot;:
			background = &quot;litf_bg_multigovernment.png&quot;;
			break;
		case &quot;gov_3&quot;:
			background = &quot;litf_bg_dictatorship.png&quot;;
			break;
		case &quot;gov_4&quot;:
			background = &quot;litf_bg_communist.png&quot;;
			break;
		case &quot;gov_5&quot;:
			background = &quot;litf_bg_confederacy.png&quot;;
			break;
		case &quot;gov_6&quot;:
			background = &quot;litf_bg_democracy.png&quot;;
			break;
		case &quot;gov_7&quot;:
			background = &quot;litf_bg_corporate.png&quot;;
			break;
		case &quot;hitech&quot;:
			background = &quot;litf_bg_hitech.png&quot;;
			break;
		case &quot;lowtech&quot;:
			background = &quot;litf_bg_lowtech.png&quot;;
			break;
		case &quot;industrial&quot;:
			background = &quot;litf_bg_industrial.png&quot;;
			break;
		case &quot;agriculture&quot;:
			background = &quot;litf_bg_agricultural.png&quot;;
			break;
	}

	// Random generic corridor
	if (background == &quot;&quot;) {
		var corrIdx = Math.floor(Math.random() * 11) + 1;
		background = &quot;litf_bg_corridor&quot; + corrIdx + &quot;.png&quot;;
	}

	return background;
};


this.$replaceConstants = function(text) {
	var _litf = worldScripts.LITF;
	var _ec = worldScripts.LITF_EventsCatalog;

	var constArr;
	var length;
	var rand;
	var str;

    if (text.indexOf(&quot;$MUSEUMPIECE$&quot;) &gt; -1) {
        constArr = _ec.arrMuseumPieces;
        length = constArr.length;
        rand = Math.floor(Math.random() * length);
        text = text.replace(&quot;$MUSEUMPIECE$&quot;, constArr[rand]);
    }

    if (text.indexOf(&quot;$LOBBYSNIPPET$&quot;) &gt; -1) {
        constArr = _ec.arrLobbySnippet;
        length = constArr.length;
        rand = Math.floor(Math.random() * length);
        text = text.replace(&quot;$LOBBYSNIPPET$&quot;, constArr[rand]);
    }

	if (text.indexOf(&quot;$HOTELROOM$&quot;) &gt; -1) {
		var hotelRoom = &quot;&quot;;
		rand = Math.floor(Math.random() * 5);
		hotelRoom += rand;
		rand = Math.floor(Math.random() * 4);
		hotelRoom += rand;
		rand = Math.floor(Math.random() * 4);
		hotelRoom += rand;

		text = text.replace(&quot;$HOTELROOM$&quot;, hotelRoom);
	}

	if (text.indexOf(&quot;$CHARITY$&quot;) &gt; -1) {
		constArr = _ec.arrCharity;
		length = constArr.length;
		rand = Math.floor(Math.random() * length);
		text = text.replace(&quot;$CHARITY$&quot;, constArr[rand]);
	} 

	if (text.indexOf(&quot;$LIQUOR$&quot;) &gt; -1) {
		constArr = _ec.arrLiquors;
		length = constArr.length;
		rand = Math.floor(Math.random() * length);
		text = text.replace(&quot;$LIQUOR$&quot;, constArr[rand]);
	}

	if (text.indexOf(&quot;$GOSSIP$&quot;) &gt; -1) {
		constArr = _ec.arrGossip;
		length = constArr.length;
		rand = Math.floor(Math.random() * length);
		text = text.replace(&quot;$GOSSIP$&quot;, constArr[rand]);
	}

	if (text.indexOf(&quot;$NAME$&quot;) &gt; -1) {
		var name = randomName() + &quot; &quot; + randomName();
		text = text.replace(&quot;$NAME$&quot;, name);

		_litf.LITF_varStore[&quot;NAME&quot;] = name;
	}

	if (text.indexOf(&quot;$SYSTEM$&quot;) &gt; -1) {
		var sName = this.$randomSystem(); // &quot;Diso&quot;; // &quot;Leesti&quot;;
		text = text.replace(&quot;$SYSTEM$&quot;, sName);
		
		_litf.LITF_varStore[&quot;SYSTEM&quot;] = sName;
	}

	if (text.indexOf(&quot;$MINORCARGO$&quot;) &gt; -1) {
		var rmc = this.$randomMinorCargo();
		text = text.replace(&quot;$MINORCARGO$&quot;, rmc);

		//_litf.LITF_varStore[&quot;MINORCARGO&quot;] = rmc;
	}

	if (text.indexOf(&quot;$COMMODITY$&quot;) &gt; -1) {
		constArr = _ec.arrCommodity;
		length = constArr.length;
		rand = Math.floor(Math.random() * length);
		text = text.replace(&quot;$COMMODITY$&quot;, constArr[rand]);

		_litf.LITF_varStore[&quot;COMMODITY&quot;] = constArr[rand];
	}

	if (text.indexOf(&quot;$ARTGENRE$&quot;) &gt; -1) {
		var ag = &quot;&quot;;

		if (_litf.LITF_varStore[&quot;ARTGENRE&quot;] == undefined || _litf.LITF_varStore[&quot;ARTGENRE&quot;] == &quot;&quot;) {
			constArr = _ec.arrArt1;
			length = constArr.length;
			rand = Math.floor(Math.random() * length);

			ag = constArr[rand];

			constArr = _ec.arrArt2;
			length = constArr.length;
			rand = Math.floor(Math.random() * length);

			ag += &quot; &quot; + constArr[rand];

			_litf.LITF_varStore[&quot;ARTGENRE&quot;] = ag;
		} else {
			ag = _litf.LITF_varStore[&quot;ARTGENRE&quot;];
		}

		text = text.replace(&quot;$ARTGENRE$&quot;, ag);
	}

	if (text.indexOf(&quot;$MUSICGENRE$&quot;) &gt; -1) {
		var mug = &quot;&quot;;

		if (_litf.LITF_varStore[&quot;MUSICGENRE&quot;] == undefined || _litf.LITF_varStore[&quot;MUSICGENRE&quot;] == &quot;&quot;) {
			constArr = _ec.arrMusic1;
			length = constArr.length;
			rand = Math.floor(Math.random() * length);

			mug = constArr[rand];

			constArr = _ec.arrMusic2;
			length = constArr.length;
			rand = Math.floor(Math.random() * length);

			mug += &quot; &quot; + constArr[rand];

			constArr = _ec.arrMusic3;
			length = constArr.length;
			rand = Math.floor(Math.random() * length);

			mug += &quot; &quot; + constArr[rand];

			_litf.LITF_varStore[&quot;MUSICGENRE&quot;] = mug;
		} else {
			mug = _litf.LITF_varStore[&quot;MUSICGENRE&quot;];
		}

		text = text.replace(&quot;$MUSICGENRE$&quot;, mug);
	}

	if (text.indexOf(&quot;$MOVIEGENRE$&quot;) &gt; -1) {
		var mog = &quot;&quot;;

		if (_litf.LITF_varStore[&quot;MOVIEGENRE&quot;] == undefined || _litf.LITF_varStore[&quot;MOVIEGENRE&quot;] == &quot;&quot;) {
			constArr = _ec.arrMovie1;
			length = constArr.length;
			rand = Math.floor(Math.random() * length);

			mog = constArr[rand];

			constArr = _ec.arrMovie2;
			length = constArr.length;
			rand = Math.floor(Math.random() * length);

			mog += &quot; &quot; + constArr[rand];

			constArr = _ec.arrMovie3;
			length = constArr.length;
			rand = Math.floor(Math.random() * length);

			mog += &quot; &quot; + constArr[rand];

			_litf.LITF_varStore[&quot;MOVIEGENRE&quot;] = mog;
		} else {
			mog = _litf.LITF_varStore[&quot;MOVIEGENRE&quot;];
		}

		text = text.replace(&quot;$MOVIEGENRE$&quot;, mog);
	}

	if (text.indexOf(&quot;$SPECIES_S$&quot;) &gt; -1) {
		if (_litf.LITF_varStore[&quot;SPECIES_S&quot;] == undefined || _litf.LITF_varStore[&quot;SPECIES_S&quot;] == &quot;&quot;) {
			_litf.LITF_varStore[&quot;SPECIES_S&quot;] = randomInhabitantsDescription(false);
		}

		text = text.replace(&quot;$SPECIES_S$&quot;, _litf.LITF_varStore[&quot;SPECIES_S&quot;]);
	}

	if (text.indexOf(&quot;$SPECIES_P$&quot;) &gt; -1) {
		if (_litf.LITF_varStore[&quot;SPECIES_P&quot;] == undefined || _litf.LITF_varStore[&quot;SPECIES_P&quot;] == &quot;&quot;) {
			_litf.LITF_varStore[&quot;SPECIES_P&quot;] = randomInhabitantsDescription(true);
		}

		text = text.replace(&quot;$SPECIES_P$&quot;, _litf.LITF_varStore[&quot;SPECIES_P&quot;]);
	}

	if (text.indexOf(&quot;$GENDERSUBJ$&quot;) &gt; -1) {
		if (_litf.LITF_varStore[&quot;GENDER&quot;] == undefined || _litf.LITF_varStore[&quot;GENDER&quot;].length == 0) {
			rand = Math.floor(Math.random() * 2);
			_litf.LITF_varStore[&quot;GENDER&quot;] = _ec.genderSyntax[rand].split(&#39;|&#39;);
		}

		text = this.$replaceAll(&quot;$GENDERSUBJ$&quot;, _litf.LITF_varStore[&quot;GENDER&quot;][0], text);
	}

	if (text.indexOf(&quot;$GENDEROBJ$&quot;) &gt; -1) {
		if (_litf.LITF_varStore[&quot;GENDER&quot;] == undefined || _litf.LITF_varStore[&quot;GENDER&quot;].length == 0) {
			rand = Math.floor(Math.random() * 2);
			_litf.LITF_varStore[&quot;GENDER&quot;] = _ec.genderSyntax[rand].split(&#39;|&#39;);
		}

		text = this.$replaceAll(&quot;$GENDEROBJ$&quot;, _litf.LITF_varStore[&quot;GENDER&quot;][1], text);
	}

	if (text.indexOf(&quot;$GENDERPOSS$&quot;) &gt; -1) {
		if (_litf.LITF_varStore[&quot;GENDER&quot;] == undefined || _litf.LITF_varStore[&quot;GENDER&quot;].length == 0) {
			rand = Math.floor(Math.random() * 2);
			_litf.LITF_varStore[&quot;GENDER&quot;] = _ec.genderSyntax[rand].split(&#39;|&#39;);
		}

		text = this.$replaceAll(&quot;$GENDERPOSS$&quot;, _litf.LITF_varStore[&quot;GENDER&quot;][2], text);
	}
	
	if (text.indexOf(&quot;$BOUNTYFINE$&quot;) &gt; -1) {
        var bFine = this.$bountyFine() + &quot;cr&quot;;
        text = this.$replaceAll(&quot;$BOUNTYFINE$&quot;, bFine, text);
	}

	return text;
};


this.$randomMinorCargo = function() {
	var _ec = worldScripts.LITF_EventsCatalog;
	var _rpge = worldScripts.LITF_RPGElements;

	var reputation = worldScripts.LITF.LITF_cmdStats.reputation;
	var repLev = _rpge.$getReputationLevel(reputation);

	var constArr;

	if (repLev &lt; 3) {
		constArr = _ec.minorCargo0;
	} else if (repLev &lt; 6) {
		constArr = _ec.minorCargo1;
	} else if (repLev &lt; 9) {
		constArr = _ec.minorCargo2;
	} else {
		constArr = _ec.minorCargo3;
	}

	var length = constArr.length;
	var rand = Math.floor(Math.random() * length);

	var randomMinorCargo = constArr[rand];

	return randomMinorCargo;
};


this.$randomSystem = function() {
	var valid = 0;
	var sName = &quot;&quot;;
	while (valid == 0) {
		var rand = Math.floor(Math.random() * 256);
		sName = System.systemNameForID(rand);
		if (sName != system.name) {
			valid = 1;
		}
	}

	return sName;
};


this.$executeActions = function(actionString) {
    var aSplit = actionString.split(&quot;|&quot;);

    for (var i = 0; i &lt; aSplit.length; i++) {
        var action = aSplit[i];
        this.$executeSingleAction(action);
    }
};


this.$executeSingleAction = function(action) {
    var _co = worldScripts.LITF_Common;
    var _re = worldScripts.LITF_RandomEvents;
    var _litf = worldScripts.LITF;
    var _nav = worldScripts.LITF_Navigation;

    // split only at the first (main) colon
    var colonPos = action.indexOf(&quot;:&quot;);
    
    //var items = action.split(&quot;:&quot;);
    var command = action.substring(0, colonPos); // items[0]
    var param = action.substring(colonPos + 1); // items[1]

    //
    
    this.$log(&quot;[executeSingleAction] action = &quot; + action);

    if (command.indexOf(&quot;flag_&quot;) == 0) {
        // Flag management
        var flagName = command.substring(5);
        var flagValue = parseInt(param);
        
        eval(&quot;worldScripts.LITF.LITF_flags.&quot; + flagName + &quot; = &quot; + flagValue + &quot;;&quot;);

    } else if (command.indexOf(&quot;mt_&quot;) == 0) {
        // Cargo commodities management
        var mtMod = this.$readNumericParameter(param);
        var mtLabel = command.substring(3);
        var mtValue = eval(&quot;player.ship.manifest.&quot; + mtLabel);

        if (mtValue + mtMod &lt; 0) {
            mtMod = -mtValue;
        } else if (mtMod &gt; 0 &amp;&amp; mtMod &gt; player.ship.cargoSpaceAvailable) {
            mtMod = player.ship.cargoSpaceAvailable;
        }

        if (mtMod &lt; 0) {
            eval(&quot;player.ship.manifest.&quot; + mtLabel + &quot; -= &quot; + Math.abs(mtMod));
        } else {
            eval(&quot;player.ship.manifest.&quot; + mtLabel + &quot; += &quot; + mtMod);
        }

        //var mtUnit = player.ship.manifest.list[mtLabel].unit;

    } else {
        switch (command) {

            case &quot;bounty&quot;:
                var boMod = this.$readNumericParameter(param);
                if (player.bounty + boMod &lt; 0) { boMod = -player.bounty; }
                player.bounty += boMod;
                break;

            case &quot;chancesick&quot;:
                var cSick = this.$readNumericParameter(param);
                if (_litf.LITF_cmdStats.sickness == 0) {
                    var chance = Math.floor(Math.random() * 100);
                    if (chance &lt; cSick) { _litf.LITF_cmdStats.sickness = 1; }
                }
                break;

            case &quot;checkFitDamage&quot;:
                var lfs = _litf.LITF_flags.lastFitSession;

                if (lfs &gt; -1) {
                    var diff = clock.seconds - lfs;
                    if (diff &lt; 172800) {
                        _litf.LITF_flags.fitDamageChance += this.$randomValue(5, 10);   
                    }
                }
                break;
                
            case &quot;credits&quot;:
                var crMod = this.$readNumericParameter(param);
                if (player.credits + crMod &lt; 0) { crMod = -player.credits; }
                player.credits += crMod;
                break;

            case &quot;end&quot;:
                var tiMod = this.$readNumericParameter(param);
                clock.addSeconds(tiMod);
                _re.$resetVars(); 
               
                // Return to place screen (destination)
                _nav.$goPlace(_re.LITF_destPlace);
                break;

            case &quot;fitdamage&quot;:
                if (_litf.LITF_cmdStats.health &lt; 3) {
                    _litf.LITF_cmdStats.health = this.$randomValue(2, 3);
                }
                
                if (_litf.LITF_flags.maxStrength &gt; 0) {
                    _litf.LITF_flags.maxStrength -= this.$randomValue(20, 100);
                }
                 
                break;

            case &quot;showStatus&quot;:
                _nav.$statusScreen();
                break;

            case &quot;endNav&quot;:
                var tiMod = this.$readNumericParameter(param);
                clock.addSeconds(tiMod);
                //_litf.$hangarScreen();
                break;

            case &quot;fuel&quot;:
                var fuMod = this.$readNumericParameter(param);
                if (player.ship.fuel + fuMod &lt; 0) {
                    fuMod = -player.ship.fuel;
                } else if (fuMod &gt; 0 &amp;&amp; fuMod &gt; player.ship.cargoSpaceAvailable) {
                    fuMod = player.ship.cargoSpaceAvailable;
                }
                player.ship.fuel += fuMod;
                break;

            case &quot;health&quot;:
                var heaMod = this.$readNumericParameter(param);
                _litf.LITF_cmdStats.health += heaMod;
                if (_litf.LITF_cmdStats.health &lt; 0) { _litf.LITF_cmdStats.health = 0; }
                if (_litf.LITF_cmdStats.health &gt; 5) { _litf.LITF_cmdStats.health = 5; }
                break;

            case &quot;if&quot;:
                // XXX Condition management
                // param = &lt;condition&gt;?&lt;ifActions&gt;;&lt;elseActions&gt;
                // e.g.: if:credits&lt;100,bounty=0?go:event1;go:event2

                // Notes:
                // - more conditions are possible, comma-separated
                // - more actions aren&#39;t possible (cannot use pipe character), execute them in follow-ups events

                var condItems = param.split(&quot;?&quot;); // condItems[0] = &lt;condition&gt;
                var resItems = condItems[1].split(&quot;;&quot;); // resItems[0] = &lt;ifActions&gt;; resItems[1] = &lt;elseActions&gt;

                var validate = this.$validateRequirements(condItems[0]);

                // A little bit of recursion
                if (validate == 1) {
                    // ifActions
                    //this.$executeSingleAction(resItems[0]);    
                    var ifcmds = this.$replaceAll(&quot;&quot;, &quot;|&quot;, resItems[0]);
                    this.$log(&quot;[executeActions] if = &quot; + ifcmds);
                    this.$executeActions(ifcmds);    
                } else if (validate == 0) {
                    // elseActions
                    //this.$executeSingleAction(resItems[1]);    
                    var elsecmds = this.$replaceAll(&quot;&quot;, &quot;|&quot;, resItems[1]);
                    this.$log(&quot;[executeActions] else = &quot; + elsecmds);
                    this.$executeActions(elsecmds);    
                }
                break;

            // XXX Generate contractor mission
            /*
            case &quot;contractorMission&quot;:
                var mType = param;

                // Mandatory parameters (from mission text): SYSTEM, NAME
                // Plus MISSION TYPE, TIME NOW, HOURS VALID
                var hData = this.LITF_store[&quot;SYSTEM&quot;] + &quot;|&quot; + this.LITF_store[&quot;NAME&quot;] + &quot;|&quot; + mType + &quot;|&quot; + clock.hours;

                var timelimit = this.$getTravelTime(this.LITF_store[&quot;SYSTEM&quot;]) * 2;
                var hTime = this.$formatNumber(timelimit);
                hData += &quot;|&quot; + hTime;

                _litf.LITF_contractorData = hData;
                this.$log(&quot;[selectChoice] contractor data = &quot; + _litf.LITF_contractorData);

                // Clear temporary data, leaves only &quot;contractor&quot; for future checks
                delete _litf.LITF_store[&quot;SYSTEM&quot;];
                delete _litf.LITF_store[&quot;NAME&quot;];
                break;
            */

            case &quot;go&quot;:
                var goSplit = param.split(&quot;,&quot;);
                var rndIdx = Math.floor(Math.random() * goSplit.length);
                _re.$fireEvent(goSplit[rndIdx]);
                break;

            case &quot;goNav&quot;:
                var goSplit = param.split(&quot;,&quot;);
                var rndIdx = Math.floor(Math.random() * goSplit.length);
                var newPlace = goSplit[rndIdx];

                this.$log(&quot;[executeSingleAction] newPlace = (&quot; + rndIdx + &quot;) &quot; + newPlace);

                if (newPlace == &quot;back&quot;) {
                    newPlace = _nav.LITF_lastPlaceLabel;
                    this.$log(&quot;[executeSingleAction] going back to last place: &quot; + newPlace);
                }

                _nav.$goPlace(newPlace);
                break;

            case &quot;paybountyfine&quot;:
                var bFine = this.$bountyFine();
                if (player.credits &gt;= bFine) {
	                player.credits -= bFine;
			player.bounty = 0;
		}
                break;

            case &quot;paytreatment&quot;:
                // Healing amount (depends on system TL)
                var heal = 0;
                var tl = this.$systemTechLevel();
                switch (tl) {
                    case &quot;lowtech&quot;: heal = 2; break;
                    case &quot;avgtech&quot;: heal = 3; break;
                    case &quot;hitech&quot;: heal = 5; break;
                }
                
                // Pay the price
                var price = heal * 50;
                player.credits -= price;

                // In case of debt insolvency, raise the bounty
                if (player.credits &lt; 0) {
                    var debt = Math.abs(player.credits);
                    player.credits = 0;
                    player.bounty += (debt / 10);
                }

                // Healing effects
                if (param == &quot;health&quot;) {
                    _litf.LITF_cmdStats.health -= heal;
                    if (_litf.LITF_cmdStats.health &lt; 0) { _litf.LITF_cmdStats.health = 0; }
                } else if (param == &quot;sickness&quot;) {
                    _litf.LITF_cmdStats.sickness -= heal;
                    if (_litf.LITF_cmdStats.sickness &lt; 0) { _litf.LITF_cmdStats.sickness = 0; }
                }
                break;

            case &quot;randomAndGo&quot;:
                var goSplit = param.split(&quot;,&quot;);
                var rndIdx = Math.floor(Math.random() * goSplit.length);
                var dPlace = goSplit[rndIdx];
                var chance = Math.floor(Math.random() * 101); // 1-100

                this.$log(&quot;[executeSingleAction] randomAndGO :: chance = &quot; + chance + &quot; dPlace = &quot; + dPlace);

                if (chance &lt; 20) {
                    // random event intermission
                    _re.$randomEvent(dPlace);
                } else {
                    // proceed as usual
                    _nav.$goPlace(dPlace);
                }
                break;

            case &quot;reputation&quot;:
                var repMod = this.$readNumericParameter(param);
                _litf.LITF_cmdStats.reputation += repMod;
                if (_litf.LITF_cmdStats.reputation &lt; 0) { _litf.LITF_cmdStats.reputation = 0; }
                break;

            case &quot;sickness&quot;:
                var sicMod = this.$readNumericParameter(param);
                _litf.LITF_cmdStats.sickness += sicMod;
                if (_litf.LITF_cmdStats.sickness &lt; 0) { _litf.LITF_cmdStats.sickness = 0; }
                if (_litf.LITF_cmdStats.sickness &gt; 5) { _litf.LITF_cmdStats.sickness = 5; }
                break;

            case &quot;stance&quot;:
                var staMod = this.$readNumericParameter(param);
                _litf.LITF_cmdStats.stance += staMod;
                break;

            case &quot;strength&quot;:
                var strMod = this.$readNumericParameter(param);
                _litf.LITF_cmdStats.strength += strMod;
                if (_litf.LITF_cmdStats.strength &lt; 0) { _litf.LITF_cmdStats.strength = 0; }
                if (_litf.LITF_cmdStats.strength &gt; _litf.LITF_flags.maxStrength) { _litf.LITF_cmdStats.strength = _litf.LITF_flags.maxStrength; }
                break;

            case &quot;time&quot;:
                var tiMod = this.$readNumericParameter(param);
                clock.addSeconds(tiMod);
                break;
                
            case &quot;writeTime&quot;:
                var wtData = param.split(&quot;_&quot;); // flag name, time to write (in seconds) starting from now
                
                var secondsFromNow = parseInt(wtData[1]);
                var storeTime = clock.seconds + secondsFromNow;
                
                this.$log(&quot;[executeSingleAction] writeTime: &quot; + wtData[0] + &quot; = &quot; + storeTime);
                
                eval(&quot;_litf.LITF_flags.&quot; + wtData[0] + &quot;=&quot; + storeTime);
                break;
        }
    }
};


this.$checkTimeForExpiration = function(maxTime) {
    var result = -1; // 0 - not expired, 1 - expired
    if (clock.seconds &gt; maxTime) {
        result = 1;
    } else {
        result = 0;
    } 
        
    return result;
};


this.$formatRemainingTime = function(maxTime) {
    var rtText = &quot;&quot;;

    var remainTime = maxTime - clock.seconds;
    var formattedTime = this.$formatTime(remainTime);
    
    return formattedTime;
};


this.$formatTime = function(secondsTime) {
    var minute = 60;
    var hour = 60 * minute;
    var day = 24 * hour;

    var dd = 0;
    var hh = 0;
    var mm = 0;

    while (secondsTime &gt; day) {
        dd++;
        secondsTime -= day;
    }

    while (secondsTime &gt; hour) {
        hh++;
        secondsTime -= hour;
    }

    while (secondsTime &gt; minute) {
        mm++;
        secondsTime -= minute;
    }

    var fTime = &quot;&quot; + dd + &quot; days, &quot; + hh + &quot; hours, &quot; + mm + &quot; minutes&quot;;

    return fTime;
};



</pre></td>
                </tr>
                <tr>
                    <td valign="top">Scripts/LITF_EventsCatalog.js</td>
                    <td><pre>&quot;use strict&quot;;

this.name	= &quot;LITF_EventsCatalog&quot;;
this.author	= &quot;BeeTLe BeTHLeHeM&quot;;
this.copyright	= &quot;2015 BeeTLe BeTHLeHeM&quot;;
this.description= &quot;Life In The Frontier - Events Catalog&quot;;
this.licence	= &quot;CC BY-NC-SA 4.0&quot;;

/////////////////////////////////////// MINOR CARGO ARRAYS

// low reputation (0-2)
this.minorCargo0 = [ &quot;Beryllium&quot;, &quot;Cobalt&quot;, &quot;Copper&quot;, &quot;Oxygen&quot;, &quot;Water&quot;, &quot;High Temperature Alloy&quot;, &quot;Scrap Metal&quot;, &quot;Fertilizers&quot;, &quot;Wood&quot;, &quot;Tungsten&quot; ];

// average reputation (3-5)
this.minorCargo1 = [ &quot;Engine Components&quot;, &quot;Ship Hull Panels&quot;, &quot;Superconductors&quot;, &quot;Polymers&quot;, &quot;Construction Machinery&quot;, &quot;Mining Machinery&quot;, &quot;Robot Workers&quot;, &quot;Factory Equipment&quot;, &quot;Plant Seeds&quot;, &quot;Pesticides&quot;, &quot;Reciclying Tanks&quot;, &quot;Atmospheric Scrubbers&quot;, &quot;Laser Drills&quot;, &quot;Waste Recyclers&quot; ];

// high reputation (6-8)
this.minorCargo2 = [ &quot;Pets&quot;, &quot;Artwork&quot;, &quot;Games&quot;, &quot;Movies&quot;, &quot;Holographics&quot;, &quot;Home Appliances&quot;, &quot;Home Entertainment&quot;, &quot;Robot Servants&quot;, &quot;Books&quot;, &quot;Recycled Goods&quot;, &quot;Musical Instruments&quot;, &quot;Clothing&quot; ];

// very high reputation (9-11)
this.minorCargo3 = [ &quot;Hydroponics&quot;, &quot;Optronics&quot;, &quot;Pharmaceuticals&quot;, &quot;Robosurgeons&quot;, &quot;Classical Instruments&quot;, &quot;Museum Exhibits&quot;, &quot;Rare artwork&quot; ];

/////////////////////////////////////// CONSTANTS ARRAYS

this.arrCommodity = [ &quot;food&quot;, &quot;textiles&quot;, &quot;radioactives&quot;, &quot;slaves&quot;, &quot;liquor_wines&quot;, &quot;luxuries&quot;, &quot;narcotics&quot;, &quot;computers&quot;, &quot;alloys&quot;, &quot;firearms&quot;, &quot;furs&quot;, &quot;minerals&quot;,&quot;gold&quot;, &quot;platinum&quot;, &quot;gem stones&quot;, &quot;alien items&quot; ];

this.genderSyntax = [ &quot;He|him|his&quot;, &quot;She|her|her&quot; ];

this.arrLiquors = [ &quot;Trumble Bubble&quot;, &quot;Thargoid Slingshot&quot;, &quot;Witch Red Wine&quot;, &quot;Injector Thunder&quot;, &quot;Shadow Rum&quot;, &quot;Thyme Hopper&quot;, &quot;Double Halo Talon&quot;, &quot;Ginger Blitzer&quot;, &quot;Cosmic Fluff&quot;, &quot;Perfect Storm&quot;, &quot;Radioactive Phantom&quot;, &quot;Perfect Scooper&quot;, &quot;Vodka Square Wave&quot;, &quot;Milky Engine Twister&quot;, &quot;Imaginary Alien&quot;, &quot;Gin Octopoid Walk&quot;, &quot;Sherry Robo Punch&quot;, &quot;Shield Light Ale&quot;, &quot;Glowing Asteroid&quot;, &quot;Gleaming Q-Whiskey&quot; ];

this.arrCharity = [ &quot;Cosmic Cosmo Peace&quot;, &quot;Piracy Rehabilitation Program&quot;, &quot;Save the Usleian Tree Ant&quot;, &quot;Trumble Protection League&quot;, &quot;Save the Star-Jellies - Ban Astromining!&quot;, &quot;Historical Buildings Fund&quot;, &quot;Save Our Species&quot; ];

this.arrGossip = [ 
	&quot;&#39;You shouldn&#39;t talk with those dirty beggars. I&#39;ve heard they&#39;re all undercover government agents. Don&#39;t let them touch you!&#39;&quot;,
	&quot;&#39;My mother said me that if you point your ship far from any star, to the darker area of space, look at your reflection on the windscreen and say &#39;Witchspace&#39; three times, something horrible will happen...&#39;&quot;,
	&quot;&#39;You should be careful what you drink. I&#39;ve heard of a new liquor that they are selling now. You put a finger in it, only the bones will remain.&#39;&quot;,
	&quot;&#39;Once I heard a pilot told me of an another pilot stranded in space after a collision with a luxury liner. The owner of the liner offered to pay damages, and gave 50Kcr to the pilot! It was some billionaire...&#39;&quot;,
	&quot;&#39;I know someone who has seen Thargoid ships many times. And he said me this: there&#39;s one ship, different from the others, near impossible to encounter, but still you can see, on certain transparent sections, thousands of people in cryopods... This story always makes me freak out...&#39;&quot;,
	&quot;&#39;You must remain on the upper sectors. Don&#39;t go down. Lower station sector are very dangerous. Chemical companies discharge every type of waste down there. You can&#39;t imagine what crazy type of mutants can live in that stuff...&#39;&quot;,
	&quot;&#39;He was carrying this guy for a business meeting, and when he arrived the berth was empty! Nothing! He never find him! How crazy is that!&#39;&quot;,
	&quot;&#39;It was in $SYSTEM$... so he was far from the planet, but it was so sleepy he decided to stop the ship behind some asteroid, sensors on, and take a nap. And while he sleeps, he feels something licking his hand. He awake but there was noone. Noone!&#39;&quot;,
	&quot;&#39;Oh yes I&#39;ve seen it. It&#39;s a trumble snuff movie. Yeah I know the cousin of a trader that I met some time ago that had an entire collection of those.&#39;&quot;,
	&quot;&#39;Clown droids? I hate clown droids! They should be packed and thrown into the sun. Did you know who is responsible for the majority of droid murders? Clown droids!&#39;&quot;,
	&quot;&#39;You can&#39;t believe me, but I tell you that this station is haunted. I know it, because I know one that worked on its construction. And you know one thing? He says that under the main level there is a sort of gap, and it was filled with cemetery soil. Do you understand now?&#39;&quot;,
	&quot;&#39;I don&#39;t believe in ghosts. I think they&#39;re all holograms. Or maybe it&#39;s the contrary. Frankly I don&#39;t know. This is a little bit creepy, don&#39;t you think?&#39;&quot;,
	&quot;&#39;They say that you buy on odd day and sell on even day. And every fourth day you buy on organic, and every eighth day you buy on artificial. So do you have to get a software to define every date of launch and the length of every travel. They say you can become rich in two weeks with this method.&#39;&quot;,
	&quot;&#39;I received this mail yesterday, and it says I have to re-send it to other five persons in five days, or a virus will destroy every system on my ship. What I have to do? Alien and androids count?&#39;&quot;,
	&quot;&#39;Every time I look this strange human beings I remember the stories my grandmother told me when I was an egg. You know, the Gurzulla. Small and large, two eyes and two arms, all covered in hair. Do you remember? It was disgusting!&#39;&quot;,
	&quot;&#39;If someone with red clothes asks you for a passenger trip towards $SYSTEM$, go away as fast as you can. That person is dead. I tell you, it happened to me.&#39;&quot;,
	&quot;&#39;You can remove ice crystals with warm water and vinegar.&#39;&quot;,
	&quot;&#39;The friend of a friend told me that is going to be an economic change because of certain turmoils on the planet. I don&#39;t know for sure, but my friend told me to monitor $COMMODITY$ for a while.&#39;&quot;,
	&quot;&#39;The news are fake. Don&#39;t follow the news. When you listen to a broadcast, understand it as the exact contrary. Do you understand?&#39;&quot;,
	&quot;&#39;Remember, don&#39;t give your password to ANYBODY!&#39;&quot;,
	&quot;&#39;Going around the station you could find contractors that needs pilot to transport wares or people.&#39;&quot;,
	&quot;&#39;If you want to spend some time you could go to the Entertainment Area.&#39;&quot;,
	&quot;&#39;Recently Galcop has installed a terminal in its precinct to clean criminal records for a price.&#39;&quot;
];

this.arrMuseumPieces = [
    &quot;by a collection of near identical statuines coming from systems very far from each other, all representing some sort of wise creature giving knowledge.&quot;,
    &quot;by a strange rock, worked and detailed with weird angle and perspectives that made you head hurt.&quot;,
    &quot;by a metallic throne surrounded with curious appendages, that could be blades or tentacles, that you swear were moving when you don&#39;t looked directly at them.&quot;,
    &quot;by a set of various spheres, probabily representing a solar system, moving without external influence in round patterns.&quot;,
    &quot;by an ancient document inscripted in an exotic species of papyrus, documenting the epic history of a civilization disappeared eons ago.&quot;,
    &quot;by a set of mechanical figurines roughly molded as fighters that repeatedly lead a charge against another set of opponents. The little play develops every time in a different manner.&quot;,
    &quot;by a pile of bright gears, bars, knobs and levers, presumedly belonging to some strange machinery built by a race known as the &#39;Replicators&#39;.&quot;,
    &quot;by a collection of giant leaves where small colonies of insects draw shapes and pictograms.&quot;,
    &quot;by a series of ancient weapons built from a volcanic formation that still preserve a slow and reddish glow.&quot;,
    &quot;by a pair of dolls carved from animal bones, whose eyes seems to follow as you move in front of them.&quot;
];


this.arrLobbySnippet = [ 
    &quot;Strangely, there&#39;s no one in sight right now. Unusual and a bit eerie.&quot;,
	&quot;There are few $SPECIES_P$, they don&#39;t speak and look at the other visitors.&quot;,
	&quot;There is a family of $SPECIES_P$ with a pair of very noisy kid.&quot;,
	&quot;Not so far from you a couple of $SPECIES_P$ is bickering.&quot;,
	&quot;Little groups of people whisper to the others.&quot;,
	&quot;An engineering squad is fixing some circuits under a wall panel.&quot;,
	&quot;A group of college $SPECIES_P$ jokes and make stupid moves before going into exaggerated laughs. They&#39;re probably drunk.&quot;,
	&quot;The place is crowded. There&#39;s many people now.&quot;, 
	&quot;The place is crowded. Someone is complaining the station management for the delays.&quot;,
	&quot;A gently voice remind every visitor to spend as much as possible.&quot;,
	&quot;A gently voice remind every visitor to stay on the station as much as possible.&quot;,
    &quot;A loud buzz interrupts a gently voice reminding something that nobody understand.&quot;,
	&quot;An annoying jingle plays in background.&quot;,
	&quot;A lonely $SPECIES_S$ walks away looking around suspiciously.&quot;,
	&quot;There are few groups of people, and everyone is talking loud for some reason.&quot;
];

this.arrArt1 = [
	&quot;ASCII&quot;, &quot;Abstract&quot;, &quot;Baroque&quot;, &quot;Computer&quot;, &quot;Conceptual&quot;, &quot;Dada&quot;, &quot;Digital&quot;, &quot;Fantastic&quot;, &quot;Figurative&quot;, &quot;Graffiti&quot;, &quot;Gothic&quot;, &quot;Humanistic&quot;, &quot;Kinetic&quot;, &quot;Magic&quot;, &quot;Metaphysical&quot;, &quot;Modular&quot;, &quot;Objective&quot;, &quot;Psychedelic&quot;, &quot;Renaissance&quot;, &quot;Shock&quot;, &quot;Space&quot;, &quot;Street&quot;, &quot;Transgressive&quot;, &quot;Underground&quot;, &quot;Xenormorphic&quot;	
];

this.arrArt2 = [
	&quot;Expressionism&quot;, &quot;Illusionism&quot;, &quot;Aestheticism&quot;, &quot;Realism&quot;, &quot;Impressionism&quot;, &quot;Anti-realism&quot;, &quot;Art nouveau&quot;, &quot;Blobism&quot;, &quot;Modernism&quot;, &quot;Post-modernism&quot;, &quot;Cubism&quot;, &quot;Deconstructivism&quot;, &quot;Futurism&quot;, &quot;Hypermodernism&quot;, &quot;Hyperrealism&quot;, &quot;Letterism&quot;, &quot;Mannerism&quot;, &quot;Maximalism&quot;, &quot;Minimalism&quot;, &quot;Neoclassicism&quot;, &quot;Photoshoppism&quot;, &quot;Primitivism&quot;, &quot;Rococo&quot;, &quot;Surrealism&quot;
];

this.arrMusic1 = [
	&quot;Proto&quot;, &quot;Post&quot;, &quot;Retro&quot;, &quot;Classic&quot;, &quot;Contemporary&quot;, &quot;Alternative&quot;, &quot;Neotraditional&quot;, &quot;Traditional&quot;, &quot;Elevator&quot;, &quot;Futuristic&quot;, &quot;Ancestral&quot;, &quot;Commercial&quot;, &quot;Anti&quot;, &quot;Avant-garde&quot;, &quot;Underground&quot;, &quot;Acid&quot;, &quot;Orchestral&quot;, &quot;Mainstream&quot;, &quot;Dance&quot;, &quot;Indie&quot;, &quot;Melodic&quot;
];

this.arrMusic2 = [
	&quot;Heavy&quot;, &quot;Experimental&quot;, &quot;Lo-fi&quot;, &quot;Progressive&quot;, &quot;Instrumental&quot;, &quot;Gospel&quot;, &quot;Piano&quot;, &quot;Swamp&quot;, &quot;Comedy&quot;, &quot;Parody&quot;, &quot;Religious&quot;, &quot;Ambient&quot;, &quot;Drone&quot;, &quot;Dark&quot;, &quot;Soft&quot;, &quot;Space&quot;, &quot;Trip&quot;, &quot;Dream&quot;, &quot;Cyber&quot;, &quot;Robot&quot;, &quot;Lyrical&quot;
];

this.arrMusic3 = [
	&quot;Metal&quot;, &quot;Hip hop&quot;, &quot;Jazz&quot;, &quot;Rap&quot;, &quot;Pop&quot;, &quot;Noise&quot;, &quot;Electronica&quot;, &quot;Blues&quot;, &quot;Rock&quot;, &quot;Country&quot;, &quot;Punk&quot;, &quot;Calypso&quot;, &quot;Reggae&quot;, &quot;Ska&quot;, &quot;Chiptune&quot;, &quot;Disco&quot;, &quot;Funk&quot;, &quot;House&quot;, &quot;Trance&quot;, &quot;Industrial&quot;, &quot;Poetry&quot;
];

this.arrMovie1 = [
	&quot;Animal&quot;, &quot;Biker&quot;, &quot;Comic-Book&quot;, &quot;Conspiracy&quot;, &quot;Erotic&quot;, &quot;Martial Ar&quot;, &quot;Political&quot;, &quot;Surfing&quot;, &quot;Techno&quot;, &quot;Classic&quot;, &quot;Family&quot;, &quot;Procedural&quot;, &quot;Diary&quot;, &quot;Ehtnic&quot;, &quot;Medical&quot;, &quot;Ghost&quot;, &quot;Gothic&quot;, &quot;Vampire&quot;, &quot;Werewolf&quot;, &quot;Atomic&quot;, &quot;Cyberpunk&quot;
];

this.arrMovie2 = [
	&quot;Action&quot;, &quot;Noir&quot;, &quot;Hard-boiled&quot;, &quot;Crime&quot;, &quot;Shakespearean&quot;, &quot;Historical&quot;, &quot;Horror&quot;, &quot;Musical&quot;, &quot;Science Fiction &quot;, &quot;War&quot;, &quot;Western&quot;, &quot;Slasher&quot;, &quot;Terror&quot;, &quot;Post-Apocalyptic&quot;, &quot;Time Travel&quot;
];

this.arrMovie3 = [
	&quot;Thriller&quot;, &quot;Epic&quot;, &quot;Adventure&quot;, &quot;Survival&quot;, &quot;Comedy&quot;, &quot;Mockumentary&quot;, &quot;Drama&quot;, &quot;Tragedy&quot;, &quot;Ballet&quot;, &quot;Concert&quot;
];

/////////////////////////////////////// RANDOM EVENTS

this.rand1 = {
	text: &quot;A $SPECIES_S$ beggar approaches you asking for some credits. $GENDERSUBJ$ is covered in dirt, pale in the face, and $GENDERPOSS$ hands tremble. It could be an elaborate act, but it isn&#39;t easy to say. &#39;Credits for food! Five days no eat!&#39;, $GENDERSUBJ$ begs.&quot;,
    
    //r1: &quot;credits&gt;=5&quot;,
	c1: &quot;Give 5 credits to the beggar&quot;,
	//a1: &quot;credits:-5|reputation:5|go:rand1_1&quot;,
	a1: &quot;if:credits&gt;=5?go:rand1_1;go:rand1_2&quot;,
	
	//r2: &quot;credits&gt;=1&quot;,
	c2: &quot;Give 1 credit to the beggar&quot;,
	//a2: &quot;credits:-1|reputation:1|go:rand1_1&quot;,
	a2: &quot;if:credits&gt;=1?go:rand1_3;go:rand1_2&quot;,
	
	c3: &quot;Move on and ignore the beggar&quot;,
	a3: &quot;go:rand1_4&quot;
};
 
this.rand1_1 = {
	text: &quot;The beggar take the credits, displaying a gap-toothed smile. $GENDERSUBJ$ nods to you and walks away searching for another benefactor.&quot;,
	c1: &quot;Goodbye&quot;,
	a1: &quot;credits:-5|end:600&quot;
};
	
this.rand1_2 = {
    text: &quot;&#39;Your words are generous but your wallet isn&#39;t!&#39;.\nThe beggar laughs out loud, while exiting through a side corridor. You can still hear echoes of $GENDERPOS$ laughter.&quot;,
    c1: &quot;At least I have still something&quot;,
    a1: &quot;end:600&quot;
};	

this.rand1_3 = {
    text: &quot;The beggar take the credit saying &#39;A credit a day!&#39; and laughing out loud. $GENDERSUBJ$ nods to you and walks away searching for another benefactor.&quot;,
    c1: &quot;Goodbye&quot;,
    a1: &quot;credits:-1|end:600&quot;
};
	
this.rand1_4 = {
	text: &quot;The beggar angrily shouts and you, then walks away stuttering something unintelligible.&quot;,
	c1: &quot;You look at $GENDEROBJ$ for a while before going back to your business&quot;,
	a1: &quot;end:600&quot;
};

//

this.rand2 = {
	text: &quot;A $SPECIES_S$ pass beside you: before you have time to do anything $GENDERSUBJ$ points $GENDERPOSS$ finger at you and says: $GOSSIP$.\nThen $GENDERSUBJ$ disappears in the crowd, talking to $GENDEROBJ$self, leaving you baffled.&quot;,
	c1: &quot;The universe is full of weird people...&quot;, 
	a1: &quot;end:300&quot;
};

//

this.rand3 = {
	text: &quot;A deployment of guards blocks your way. Behind them, bulkheads are slowly closing, accompanied by flashing lights. Together with other people you try to look beyond the massive grey walls, but you manage to notice only a reddish flickering of flames.\n\nWalking away from the deployment, you overhear a couple of $SPECIES_P$ talking about the incident: &#39;Another fire. Frankly I don&#39;t know if they are really incident anymore...&#39;&quot;,
	c1: &quot;Nothing to see here...&quot;, 
	a1: &quot;end:300&quot;
};

//

this.rand4 = {
	text: &quot;A deployment of guards blocks your way. Behind them, bulkheads are slowly closing, accompanied by flashing lights. Together with other people you try to look beyond the massive grey walls, but you manage to notice only the reddish flickering of flames.&quot;,
	c1: &quot;Luckily I wasn&#39;t inside there&quot;,
	a1: &quot;end:300&quot;
};

//

this.rand5 = {
	text: &quot;From the shadows of a tight alley an unknown $SPECIES_S$ introduce $GENDEROBJ$self as a renowned seller of prodigious elixirs. $GENDERSUBJ$ shows you an ampoule full of a dark liquid, to $GENDERPOSS$ extreme delight, while proclaming: &#39;Today there&#39;s an exceptional offer! The Water of Life, straight from the sacred temple in the huge swamps of the remote jungle planets! And is yours only for 50cr. You would be a fool not to buy it!&#39;&quot;,
	//requires: &quot;credits&gt;=50&quot;,
	c1: &quot;Awesome! But I think I will pass.&quot;,
	a1: &quot;go:rand5_1&quot;,
	c2: &quot;Mmh. I feel rather tired lately. Give me this Water of Life, let&#39;s try it!&quot;,
    a2: &quot;if:credits&gt;=50?go:rand5_2;go:rand5_3&quot;,
	//a2: &quot;credits:-50|go:rand5_2,rand5_2,rand5_3,rand5_4,rand5_5&quot;
};
	
this.rand5_1 = {
	text: &quot;The seller tries to convince you a little more, but seeing you&#39;re resolute, runs back to the shadows waiting for the next lucky acquirer.&quot;,
	c1: &quot;Never trust $SPECIES_S$ sellers in the shadows.&quot;, 
	a1: &quot;end:600&quot;
};

this.rand5_2 = {
    text: &quot;&#39;Good! Good! Here&#39;s this awesome elixir, in change of a miserable amount of money!&#39;\nThe seller gives you a little bottle filled with a cloudy and dense liquid, before quickly disappearing in the shadows.&quot;,
    c1: &quot;Let&#39;s taste this stuff&quot;,
    a1: &quot;credits:-50|go:rand5_4,rand5_5,rand5_6,rand5_7&quot;
};

this.rand5_3 = {
    text: &quot;&#39;Aha! You haven&#39;t the money! And without money, no elixir! I&#39;m sorry, I can&#39;t give this for free... See you another time!&#39;\nThe seller moves away and disappears in the shadows before you can say anything.&quot;,
    c1: &quot;Pretty evasive...&quot;,
    a1: &quot;end:300&quot;
};

this.rand5_4 = {
	text: &quot;You drink the dark liquid, feeling its fuzzy taste into the throat. Obviously it&#39;s a soft drink, nothing less, nothing more...&quot;,
	c1: &quot;Damned swindler!&quot;, 
	a1: &quot;end:600&quot;
};

this.rand5_5 = {
	text: &quot;You drink the dark liquid, feeling its fuzzy taste into the throat. You don&#39;t recognize the flavour, but immediately start searching for water to wash your mouth.&quot;,
	c1: &quot;Damned swindler! It was disgusting!&quot;, 
	a1: &quot;sickness:1|end:600&quot;
};

this.rand5_6 = {
	text: &quot;You drink the dark liquid, feeling its fuzzy taste into the throat. For a couple of minute your body is filled with a strange warmth that makes you dizzy and feverish. You have to rest against a wall to not fall down. When the feeling is vanished, you feel considerably better than before.&quot;,
	c1: &quot;Maybe it was a medicine... in a sense.&quot;, 
	a1: &quot;sickness:-1|end:800&quot;
};

this.rand5_7 = {
	text: &quot;You drink the dark liquid, feeling its fuzzy taste into the throat. It tastes like a soft drink but after a moment the world start to go round and round, until everything become black...\n\nYou awake in the same place, and you feel better, but how many time is passed?&quot;,
	c1: &quot;Anyway, better running than walking!&quot;, 
	a1: &quot;sickness:-2|end:3600,18000&quot;
};

//
	
this.rand6 = {
	text: &quot;A group of $SPECIES_S$ partygoers proceeds randomly through the amused crowd, laughing and drinking from a large number of bottles. Someone screams a name, someone else answer and laugh again, but you can&#39;t recognize the words. They walk and dance and zigzag without an intentional pattern. Their clothes flaps and swings around them in a swirl of vivid colours while they cross the concourse.&quot;,
	c1: &quot;Watch the group stagger along their drunken path&quot;, 
	a1: &quot;end:300&quot;
};

//

this.rand7 = {
	text: &quot;&#39;Police! Stop right away!&#39;\n\nYou see a $SPECIES_S$ running for $GENDERPOSS$ life, stumbling and jumping between walls and worried people. Behind $GENDEROBJ$, few meters away, a cop is on a relentless chase, weapon in hand - there&#39;s no line of sight to attempt a shot. Suddenly you notice that the fugitive is coming your way, $GENDERPOSS$ mind focused on escaping.&quot;,
	c1: &quot;You try jumping on the fugitive and stop $GENDEROBJ$ until the cop arrives&quot;,
	a1: &quot;go:rand7_1,rand7_2&quot;,
	c2: &quot;You don&#39;t disturb the fugitive, but with nonchalance try to delay the cop&quot;,
	a2: &quot;go:rand7_3,rand7_4&quot;,
	c3: &quot;You sidestep and don&#39;t intervene in the situation.&quot;,
	a3: &quot;go:rand7_5&quot;
};
	
this.rand7_1 = { 
	text: &quot;You quickly prepare to jump, but at the last moment the fugitive realizes your intentions and execute a sudden swerve. You grasp the air and fall down on the floor with an heavy thud. After a few seconds the cop passes and glance in your direction.&quot;,
	c1: &quot;You stand up massaging an elbow. At least you tried.&quot;, 
	a1: &quot;stance:2|reputation:-2|end:900&quot;
};
	
this.rand7_2 = { 
	text: &quot;You quickly prepare to jump on the unaware fugitive. You grasp $GENDEROBJ$ shoulder and fall down together on the floor. After a brief fight the cop arrives and stun $GENDEROBJ$, and the $SPECIES_S$ starts suffering an intense and disabilitating pain. The cop look at you and says: &#39;Excellent work. I think that for the help provided to the police forces you have full right to an adequate reward.&#39; $GENDERSUBJ$ reaches for $GENDERPOSS$ communicator, discover your name from the station database and write something on a tiny keypad. &#39;Done. Good day sir.&#39;&quot;,
	c1: &quot;You feel strangely proud of yourself&quot;, 
	a1: &quot;stance:5|reputation:15|credits:50|end:900&quot;
};
	
this.rand7_3 = { 
	text: &quot;Feigning a certain clumsiness you begin to apologize to the cop. $GENDERSUBJ$ finally manages to push you away to continue the pursuit, but has lost valuable time. The fugitive is nowhere to be seen.&quot;,
	c1: &quot;Before the cop start suspecting something, you discreetly walk away.&quot;,
	a1: &quot;stance:-2|end:900&quot;
};
	
this.rand7_4 = { 
	text: &quot;Feigning a certain clumsiness you begin to apologize to the cop. $GENDERSUBJ$ finally manages to push you away to continue the pursuit, but has lost valuable time. The fugitive is nowhere to be seen.\n\nBefore you can walk away, the cop blocks you - and $GENDERSUBJ$&#39;s not happy. &#39;Visitor! You are guilty of voluntarily obstructing an officer in the course of $GENDERPOSS$ duty! This is not an offense tha will pass unobserved!&quot;,
	c1: &quot;There&#39;s no much you can do at this point. Go away as soon as you can.&quot;, 
	a1: &quot;stance:-10|bounty:5|end:1200&quot;
};
	
this.rand7_5 = {
	text: &quot;The duo continues running, the cop screaming again $GENDERPOSS$ warnings. $GENDERPOSS$ voice fade in the distance.&quot;,
	c1: &quot;Better leave to the cops this stuff.&quot;, 
	a1: &quot;end:600&quot;
};

//

this.rand8 = {
	text: &quot;You see a $SPECIES_S$ with dark clothes stealing the wallet of a tourist. In the meanwhile, the thief turns $GENDERPOSS$ head, looks at you and put a finger on $GENDERPOSS$ lips: &#39;Stay quiet.&#39; Nobody else seems to have realised what is happening.&quot;,
	c1: &quot;Call the police!&quot;,
	a1: &quot;go:rand8_1&quot;,
	c2: &quot;Nothing of my business here...&quot;,
	a2: &quot;go:rand8_2,rand8_2,rand8_2,rand8_3&quot;
};

this.rand8_1 = {
	text: &quot;You immediately start calling help to stop the thief, but the $SPECIES_S$ is too nimble to be stopped by the crowd. $GENDERSUBJ$ slide and run away, not before casting a glance of contempt towards you.&quot;,
	c1: &quot;I&#39;ve done my good deed for today&quot;,
	a1: &quot;stance:3|reputation:2|end:600&quot;
};
	
this.rand8_2 = {
	text: &quot;You continue to look at the thief, as $GENDERSUBJ$ takes the wallet and put it in one of $GENDERPOSS$ various pockets. $GENDERSUBJ$ smiles at you and a second later you can&#39;t see $GENDEROBJ$ anymore.&quot;,
	c1: &quot;Money come, money go&quot;, 
	a1: &quot;stance:-2|end:600&quot;
};
	
this.rand8_3 = {
	text: &quot;You continue to look the thief, as $GENDERSUBJ$ take the wallet and hide it between the folds of $GENDERPOSS$ clothes. $GENDERSUBJ$ smiles and calmly walks to you as if nothing is happened. Passing beside you $GENDERSUBJ$ puts something in your pocket. But when you turn your head $GENDERSUBJ$&#39;s not there anymore.&quot;,
	c1: &quot;I don&#39;t believe it&#39;s a good idea to return this money to its owner...&quot;, 
	a1: &quot;stance:-5|credits:10,80|end:900&quot;
};

//

this.rand9 = { 
	text: &quot;While you&#39;re resting the $SPECIES_S$ commander near you says: &#39;I beg your pardon, I am ashamed but I have another way to put it: me and my crew have docked on this station and we have no way to lift off again. You can hardly believe it, but we are stranded - and this is not exactly a lonely asteroid in the middle of space. I repeat, I am ashamed but I need to go away from here, it&#39;s a week and we need to go back home or we will have to start begging for food.&#39; $GENDERSUBJ$ clears $GENDERPOSS$ throat: &#39;So I have to ask you: would you be so gentle to give us a few resources to save us from this discomfortable woe?&#39;&quot;,
	//requires: &quot;fuel&gt;=5&quot;,
	
	r1: &quot;fuel&gt;=5&quot;,
	c1: &quot;Fellow commanders have to help each other, isn&#39;t it?&quot;,
	a1: &quot;go:rand9_1&quot;,
	
	c2: &quot;I&#39;m sorry, but I&#39;m in dire conditions too. Unfortunately I have nothing to spare&quot;,
	a2: &quot;go:rand9_2&quot;
};
	
this.rand9_1 = {
	text: &quot;The commander rejoice at your generosity. &#39;I won&#39;t ask too much! Only the strict necessary. 5t of fuel. Nothing more. And you will have my gratitude, and the gratitude of my crew and their families!&#39;&quot;,
	c1: &quot;Don&#39;t say a word. I&#39;ll order the transfer now.&quot;,
	a1: &quot;reputation:50|fuel:-5|end:600&quot;,
	c2: &quot;Oh, 5t? Really? Mmm... really sorry... but I haven&#39;t so much!&quot;,
	a2: &quot;go:rand9_2&quot;
};
	
this.rand9_2 = {
	text: &quot;The commander face turns to a gloomy mask. &#39;I understand. I&#39;m sorry, I was too much insolent. But you know, when one see a glimpse of hope in the dark... Forget it all about it. Good day, commander&#39;. $GENDERSUBJ$ stands up and slowly walks away.&quot;,
	c1: &quot;I&#39;m really sorry. Maybe another time...&quot;,
	a1: &quot;end:300&quot;,
};

//

this.rand10 = { 
	text: &quot;While you&#39;re resting the $SPECIES_S$ commander near you says: &#39;I beg your pardon, I am ashamed but I have another way to put it: me and my crew have docked on this station and we have no way to lift off again. You can hardly believe it, but we are stranded - and this is not exactly a lonely asteroid in the middle of space. I repeat, I am ashamed but I need to go away from here, it&#39;s a week and we need to go back home or we will have to start begging for food.&#39; $GENDERSUBJ$ clears $GENDERPOSS$ throat: &#39;So I have to ask you: would you be so gentle to give us a few resources to save us from this discomfortable woe?&#39;&quot;,
	//requires: &quot;credits&gt;=100&quot;,
	
	r1: &quot;credits&gt;=100&quot;,
	c1: &quot;Fellow commanders have to help each other, isn&#39;t it?&quot;,
	a1: &quot;go:rand10_1&quot;,
	
	c2: &quot;I&#39;m sorry, but I&#39;m in dire conditions too. Unfortunately I have nothing to spare&quot;,
	a2: &quot;go:rand10_2&quot;
};
	
this.rand10_1 = { 
	text: &quot;The commander rejoice at your generosity. &#39;I won&#39;t ask too much! 100cr will be enough to depart from this place. Nothing more. And you will have my gratitude, of my crew and their families!&#39;&quot;,
	c1: &quot;Don&#39;t say a word. I&#39;ll order the transfer now.&quot;,
	a1: &quot;reputation:50|credits:-100|end:600&quot;,
	c2: &quot;Oh, 100cr? Really? Mmm... really sorry... but I haven&#39;t so much!&quot;,
	a2: &quot;go:rand10_2&quot;
};
	
this.rand10_2 = { 
	text: &quot;The commander face turns to a gloomy mask. &#39;I understand. I&#39;m sorry, I was too much insolent. But you know, when one see a glimpse of hope in the dark... Forget it all about it. Good day, commander&#39;. $GENDERSUBJ$ stands up and slowly walks away.&quot;,
	c1: &quot;I&#39;m really sorry. Maybe another time...&quot;,
	a1: &quot;end:300&quot;,
};

//

this.rand11 = {
	text: &quot;A group of $SPECIES_P$ approaches you and ask for a donation to their &#39;$CHARITY$&#39; charity.&quot;,
	requires: &quot;credits&gt;=1&quot;,
	r1: &quot;credits&gt;=1&quot;,
	c1: &quot;Donate 1cr&quot;,
	a1: &quot;reputation:1|credits:-1|go:rand11_1&quot;,
    
    r2: &quot;credits&gt;=10&quot;,
	c2: &quot;Donate 10cr&quot;,
	a2: &quot;reputation:10|credits:-10|go:rand11_1&quot;,
    
    r3: &quot;credits&gt;=100&quot;,
	c3: &quot;Donate 100cr&quot;,
	a3: &quot;reputation:50|credits:-100|go:rand11_2&quot;,
    
    r4: &quot;credits&gt;=1000&quot;,
	c4: &quot;Donate 1000cr&quot;,
	a4: &quot;reputation:100|credits:-1000|go:rand11_2&quot;,
    
    r5: &quot;credits&gt;=10000&quot;,
	c5: &quot;Donate 10000cr&quot;,
	a5: &quot;reputation:1000|credits:-10000|go:rand11_3&quot;,
    
	c6: &quot;Sorry, I have nothing to give&quot;,
	a6: &quot;go:rand11_4&quot;
};

this.rand11_1 = {
	text: &quot;They smile at you: &#39;Thanks for the donation!&#39;&quot;,
	c1: &quot;It was nothing, really&quot;,
	a1: &quot;end:300&quot;
};

this.rand11_2 = {
	text: &quot;They didn&#39;t expected it: &#39;Thanks! That&#39;s a big sum of money! Good day to you sir!&#39;&quot;,
	c1: &quot;It was nothing, really&quot;,
	a1: &quot;end:300&quot;
};

this.rand11_3 = {
	text: &quot;They stare at you, jaw dropped, petrified from astonishment: &#39;...Really!? We almost can&#39;t believe it! You&#39;re fantastic!&#39; Someone hugs you, and someone kisses you, but in the euphoric confusion you can&#39;t say who&#39;s who.&quot;,
	c1: &quot;It was... nothing... really&quot;,
	a1: &quot;end:300&quot;
};

this.rand11_4 = {
	text: &quot;They smile at you. &#39;Remember our cause!&#39;&quot;,
	c1: &quot;I&#39;ll remember (at least for a few minutes)&quot;,
	a1: &quot;end:180&quot;
};

//

this.rand12 = {
	text: &quot;Next to you, two bulky $SPECIES_P$ start fighting over a trivial matter. They seem willing to come to blows just to prove who is right. The place is pretty crowded so this could be a really bad thing.&quot;,
	
	c1: &quot;If they&#39;re so stupid they want to handle their issues in this way, be it so, I&#39;ll leave them alone&quot;,
	a1: &quot;go:rand12_1&quot;,
	
	c2: &quot;Better to stop them. Other people could get involved in the fight.&quot;,
	a2: &quot;go:rand12_2,rand12_3&quot;,
};

this.rand12_1 = {
	text: &quot;As you walk away you listen to the $SPECIES_P$ talking with louder voices, like thunders rumbling. After seconds a brawl quickly develops. People start screaming and running. As you approach an elevator, you can see the cops arriving to the scene to stop the fights.&quot;,
	c1: &quot;I couldn&#39;t possibly avoid all this chaos.&quot;,
	a1: &quot;end:600&quot;
};


this.rand12_2 = {
	text: &quot;The $SPECIES_P$ look at you while you do your peacemaker speech, and after a glimpse of understanding between them, they decide to beat YOU.&quot;,

	c1: &quot;Hey I&#39;m coming in peace...&quot;,
	a1: &quot;go:rand12_4&quot;,

    r2: &quot;strength&gt;=80&quot;,
	c2: &quot;I didn&#39;t want to resort to violence, but I see no choice...&quot;,
	a2: &quot;if:strength&gt;=120?go:rand12_5;go:rand12_4&quot;
};

this.rand12_3 = {
	text: &quot;The $SPECIES_P$ look at you while you do your peacemaker speech, and in minutes they calm down and start reasoning. The discussion ends with a handshake, and they give you a couple of strong pats on the back that leave you breathless.&quot;,
	c1: &quot;And fortunately they were in a good mood...&quot;,
	a1: &quot;reputation:10|end:900&quot;
};

this.rand12_4 = {
	text: &quot;They are too strong for you. You try your best, but it&#39;s not enough. They left you lying on the floor and leave together trading compliments.&quot;,
	c1: &quot;We could say I win. But I need to lay down for a while...&quot;,
	a1: &quot;reputation:5|health:1,2|end:3600&quot;
};

this.rand12_5 = {
	text: &quot;Surprised, the aliens can&#39;t coordinate their attacks. Your punch knocks out one of them, and other, suddenly panicked, runs away.&quot;,

	c1: &quot;I suppose I could call it a day.&quot;,
	a1: &quot;reputation:5|end:900&quot;,

    r2: &quot;stance&lt;0&quot;,
	c2: &quot;I suppose I deserve some sort of loot as prize...&quot;,
	a2: &quot;credits:10,200|stance:-8|end:1200&quot;
};

//

this.rand13 = {
	text: &quot;You walk for awhile but nothing seems to attract your interest. This place seems really boring.&quot;,
	c1: &quot;Even here, nothing to see&quot;,
	a1: &quot;end:600&quot;
};

//

this.rand14 = {
	text: &quot;The corridors you explore are empty. The feeling is pretty unsettling. Maybe you went in the wrong direction?&quot;,
	c1: &quot;I think I took a wrong turn, I&#39;ll backtrack&quot;,
	a1: &quot;end:1200&quot;
};

//

this.rand15 = {
	text: &quot;This part of the station is less populated. You see groups of $SPECIES_P$ chatting. They look at you when you pass near them. They&#39;re not smiling.&quot;,
	c1: &quot;Maybe I won&#39;t pass too close to them&quot;,
	a1: &quot;end:600&quot;
};

//

this.rand16 = {
	text: &quot;You had entered the wrong corridor, and now you must walk through conducts, alleys, crossroads, climb ladders and use secondary elevators. You can&#39;t understand precisely where you are. You&#39;re lost. After asking several people you manage to reach your destination. You sight with relief.&quot;,
	c1: &quot;What a nightmare!&quot;,
	a1: &quot;end:1800&quot;
};

//

this.rand17 = {
	text: &quot;The atmosphere is very relaxed, but also dull. People walk slowly, their chat has a distinct monotonous sound. There&#39;s also a strange smell in the air. You feel dizzy for a moment.&quot;,
	c1: &quot;I hope this will pass soon&quot;,
	a1: &quot;end:300&quot;
};

//

this.rand18 = {
	text: &quot;A sexy and suave $SPECIES_S$, from the corner of an alley, asks you with a mellow voice if you want some company. &#39;Are 80cr enough to pay for a little bit of relax, away from you stressful life?&#39;&quot;,
	requires: &quot;credits&gt;=80&quot;,

	c1: &quot;Thanks for the offer, but I&#39;m not so stressed...&quot;,
	a1: &quot;end:300&quot;,

    //r2: &quot;credits&gt;=80&quot;,
	c2: &quot;Yes, maybe I need this right now&quot;,
	//a2: &quot;credits:-80|time:7200|go:rand18_1&quot;,
	a2: &quot;if:credits&gt;=80?go:rand18_1;go:rand18_2&quot;,

    //r3: &quot;credits&gt;=160&quot;,
	c3: &quot;Let&#39;s make it 160cr and spend a little more time together&quot;,
	//a3: &quot;credits:-160|time:14400|go:rand18_2&quot;
    a3: &quot;if:credits&gt;=160?go:rand18_3;go:rand18_2&quot;,
};

this.rand18_1 = {
	text: &quot;You spend time with your charming partner. A very relaxing experience, as promised.&quot;,
	c1: &quot;Time to go back on the street&quot;,
	a1: &quot;credits:-80|sickness:0,1|end:0&quot;
};

this.rand18_2 = {
    text: &quot;&#39;Are you joking! You have no money for this! And I don&#39;t do work for charity!&#39;\nThat said, the $SPECIES_S$ walks away swearing against you.&quot;,
    c1: &quot;I think she likes me&quot;,
    a1: &quot;end:300&quot;
};

this.rand18_3 = {
	text: &quot;You spend so much time with your charming partner. A very fun and relaxing experience, maybe more than advertised.&quot;,
	c1: &quot;Unfortuntaley it&#39;s time to go back on the street...&quot;,
	a1: &quot;credits:-160|sickness:0,2|end:0&quot;
};

//

this.rand19 = {
	text: &quot;You&#39;re walking through a massive crowd, when you feel a rather strange movement around you. When you find a free corner you check your clothes, and discover that someone has mugged part of your credits...&quot;,
	requires: &quot;credits&gt;=200&quot;,
	c1: &quot;Still they haven&#39;t taken all&quot;,
	a1: &quot;credits:-10,-100|end:600&quot;
};

//

this.rand20 = {
	text: &quot;A drunken $SPECIES_S$ asks you if you can bring $GENDEROBJ$ home. Problem is: you can&#39;t understand where $GENDERSUBJ$ lives. $GENDERSUBJ$ tries to give indication but it&#39;s more confusing than before.&quot;,
	c1: &quot;Let&#39;s try another time. Which way did you came?&quot;,
	a1: &quot;go:rand20_1&quot;,
	c2: &quot;I give up&quot;,
	a2: &quot;end:900&quot;
};

this.rand20_1 = {
    text: &quot;You accompany the $SPECIES_S$ from corridor to corridor, until you stop at the center of an intersection. Your companion looks around aimlessly. After a minute or two, he points a seemingly random direction.&quot;,
    c1: &quot;I hope this is it&quot;,
    a1: &quot;time:300|go:rand20_2,rand20_2,rand20_2,rand20_3&quot;,
    c2: &quot;No, I can&#39;t stand it anymore&quot;,
    a2: &quot;end:900&quot;
};

this.rand20_2 = {
    text: &quot;The $SPECIES_S$ seems more confident, but you continue walking without a coherent destination. This thing is going to last forever.&quot;,
    c1: &quot;Ok, only another corridor and then I give up&quot;,
    a1: &quot;time:300|go:rand20_2,rand20_2,rand20_2,rand20_4&quot;,
    c2: &quot;I&#39;m sorry but I have no more time... good luck and good bye&quot;,
    a2: &quot;end:900&quot;
};

this.rand20_3 = {
    text: &quot;Finally you arrive to the door of a humble apartment. The $SPECIES_S$ is very happy and gives you a strong handshake. He thanks you for an entire minute before leaving.&quot;,
    c1: &quot;Thanks...&quot;,
    a1: &quot;end:300&quot;
};

this.rand20_4 = {
    text: &quot;Finally you arrive to the door of a humble apartment. The $SPECIES_S$ is very happy and gives you a strong handshake. He thanks you for an entire minute before leaving. Before entering the apartment, the drunkard throw in your hands some credits: &#39;I apologize for the hassle&#39;, mumbles.&quot;,
    c1: &quot;Thanks...&quot;,
    a1: &quot;credits:50,100|end:300&quot;
};

//

this.rand21 = {
	text: &quot;As you walk you encounter an emergency medical camp. A man in bio-suit is telling people that an alien flu is just arrived on the station. There are already some cases, they are treating it. There&#39;s no reason to panic, but everyone should be more careful from now on.&quot;,
	requires: &quot;sickness&lt;2&quot;,
	c1: &quot;I&#39;m already careful. I don&#39;t need any more hints&quot;,
	a1: &quot;sickness:0,1|end:300&quot;,
	c2: &quot;Oh yeah perfect, better to stay at large.&quot;,
	a2: &quot;sickness:0,1|end:300&quot;
};

//

this.rand22 = {
	text: &quot;You stop to listen, together with other persons, to a robo-bard at a corner of the street. It is telling	a story of brave pilots, daredevil bounty hounters, of fearful pioneers on desolate colonies, and greedy explorers on haunted derelicts, accompanied by an ancient and partially ruined song. The robo-bard moves and emit lights to underline the most dangerous moments of the story, and the audience is silent in awe.&quot;,
	requires: &quot;gov=feudal&quot;,

    r1: &quot;credits&gt;=5&quot;,
	c1: &quot;Aye bard, your stories are well worth 5cr&quot;,
	a1: &quot;credits:-5|end:1200&quot;,

    r2: &quot;credits&gt;=1&quot;,
	c2: &quot;Aye bard, your stories are well worth 1cr&quot;,
	a2: &quot;credits:-1|end:1200&quot;,

	c3: &quot;Aye bard, good story, I&#39;ll give you my approval&quot;,
	a3: &quot;end:1200&quot;
};

this.rand23 = {
	text: &quot;A group of $SPECIES_S$ hunters cross through the station riding their mounts - not without some difficulty, but noone laughs or joke at them. Meanwhile, the hunters servants unkindly push the people away from the path of their masters.\n\nListening to the hunters chatting you understand that it&#39;s better for you if you don&#39;t understand the game they&#39;re searching for...&quot;,
	requires: &quot;gov=feudal&quot;,
	c1: &quot;I want to stay as far as possible from those creepies&quot;,
	a1: &quot;end:300&quot;
};

this.rand24 = {
	text: &quot;You discover a semidestroyed droid among the trash. It is still functioning, endlessly repeating words that you barely understand. It could be a name, or anything else, really. You don&#39;t know why the droid is repeating these words.&quot;,
	requires: &quot;gov=anarchy-feudal-multigovernmental-dictatorship|tech=lowtech&quot;,
	c1: &quot;Probably it&#39;s only some glitch in the software&quot;,
	a1: &quot;end:120&quot;,
};

this.rand25 = {
	text: &quot;&#39;Hello visitor!&#39;\n\nA commercial droid waves to you and recommend to visit the station market, wishing you can do better purchases.\nAfter some seconds, and a lot of ticking and clicking, he suggest you to invest in $COMMODITY$.\n\nOn a side of the robot you notice the near-erased logo of a group of market brokers.&quot;,
	requires: &quot;gov=corporate&quot;,
	c1: &quot;I don&#39;t think it is completely unbiased in its opinions...&quot;,
	a1: &quot;end:180&quot;
};

this.rand26 = {
	text: &quot;As you walk with other people, you&#39;re pushed away. You help a tourist that was falling over, and turn your head to see a $SPECIES_S$ supercelebrity, accompanied by $GENDERPOSS$ entourage and a little army of bodyguards. After them, another little army of reporters follows, photographs and photo-drones. There are flashes, there are questions, there is some scuffle. When the group is passed, you can resume your walk.&quot;,
	requires: &quot;gov=democracy-corporate&quot;,
	c1: &quot;I can&#39;t stand these VIPs&quot;,
	a1: &quot;end:300&quot;
};

this.rand27 = {
	text: &quot;Suddenly the lights go out. The station switches to emergency lights. A voice in the intercomm starts repeating: &#39;THERE HAS BEEN A FAILURE ON THE ELECTRIC POWERGRID. WE SUGGEST VISITORS TO DO NOT PANIC. THE LIGHTS WILL BE RESTORED AS SOON AS POSSIBLE.&#39;\n\nAfter a few minutes, the ligths go back.&quot;,
	requires: &quot;tech=lowtech&quot;,
	c1: &quot;Ok, everything&#39;s normal&quot;,
	a1: &quot;end:180&quot;
};

this.rand28 = {
	text: &quot;Suddenly you notice a noise similar to a waterfall, and you see puddles of water on the floor. A voice in the intercomm starts repeating: &#39;THERE HAS BEEN A FAILURE IN THE WATER SYSTEM. WE SUGGEST VISITORS TO DO NOT PANIC. THE MALFUNCTIONING WILL BE FIXED AS SOON AS POSSIBLE.&#39;\n\nAfter a few minutes, the waterfall noises stop.&quot;,
	requires: &quot;tech=lowtech&quot;,
	c1: &quot;Ok, everything&#39;s normal, I suppose&quot;,
	a1: &quot;end:180&quot;
};

this.rand29 = {
	text: &quot;Suddenly you notice a strange smell in the air, and you see some people passing out. A voice in the intercomm starts repeating: &#39;THERE HAS BEEN A FAILURE IN THE VENTILATION SYSTEM. WE SUGGEST VISITORS TO DO NOT PANIC. THE MALFUNCTIONING WILL BE FIXED AS SOON AS POSSIBLE.&#39;\n\nAfter a few minutes, the air return fresh.&quot;,
	requires: &quot;tech=lowtech&quot;,
	c1: &quot;Ok, everything is normal again... fortunately&quot;,
	a1: &quot;end:180&quot;
};

this.rand30 = {
	text: &quot;As you walk in a quiet part of the area, you see some kids &#39;tagging&#39; a corridor wall with colorful and luminescent spray paint. You can&#39;t recognize a precise shape or element, every color and line seems to mold and fuse into the others, like living creatures.&quot;,
	requires: &quot;flag_defacedShip=0&quot;,
	c1: &quot;This is a real mess. I&#39;ll call the security to stop this defacement!&quot;,
	a1: &quot;go:rand30_1,rand30_2&quot;,
	c2: &quot;It&#39;s none of my concern. And these corridors need a repaint, after all...&quot;,
	a2: &quot;stance:-2|end:120&quot;
};

this.rand30_1 = {
	text: &quot;You call a Galsec official, that readily come to the place. The kids have run away, but you can point at the wall painted. The official nods gravely and thanks you for your report.&quot;,
	c1: &quot;It was my duty&quot;,
	a1: &quot;stance:2|end:240&quot;
};

this.rand30_2 = {
	text: &quot;You call a Galsec official, that readily come to the place. The kids have run away, but you can point at the wall painted. The official nods gravely and thanks you for your report.&quot;,
	c1: &quot;It was my duty&quot;,
	a1: &quot;stance:2|flag_defacedShip:1|end:240&quot;
};
</pre></td>
                </tr>
                <tr>
                    <td valign="top">Scripts/LITF_Navigation.js</td>
                    <td><pre>&quot;use strict&quot;;

this.name	= &quot;LITF_Navigation&quot;;
this.author	= &quot;BeeTLe BeTHLeHeM&quot;;
this.copyright	= &quot;2015 BeeTLe BeTHLeHeM&quot;;
this.description= &quot;Life In The Frontier - Navigation&quot;;
this.licence	= &quot;CC BY-NC-SA 4.0&quot;;

///////////////////////////////////////

var LITF_placeLabel = &quot;&quot;;

this.LITF_lastPlaceLabel = &quot;&quot;;

this.$startNavigation = function() {
	var s = player.ship.dockedStation;
	if( s &amp;&amp; !s.allegiance || s.allegiance == &quot;galcop&quot; )
		$goPlace(&quot;area1&quot;);
	else $goPlace(&quot;area1_nongalcop&quot;);
};


this.$statusScreen = function() {
    var _co = worldScripts.LITF_Common;

    var sText = this.$setStatusText();
    var sChoices = this.$setStatusChoices();

    mission.runScreen(
        { 
            title:&quot;COMMANDER STATUS&quot;, 
            message:sText,
	    screenID:&quot;hdbg-station&quot;, //for HD Backgrounds OXP
            choices:sChoices 
        }, 
        this.$statusScreenChoice
    );
};

this.$setStatusText = function() {
    var _rpge = worldScripts.LITF_RPGElements;
    var _co = worldScripts.LITF_Common;
    var _litf = worldScripts.LITF;

    var msText = &quot;[COMMANDER RESUME]\n\n&quot;;
    
    msText += &quot;Commander &quot; + player.name + &quot;, for the people on the station you&#39;re &quot; + _rpge.$getReputationFromValue(_litf.LITF_cmdStats.reputation) + &quot;. &quot;;
    msText += &quot;You consider yourself &quot; + _rpge.$getStanceFromValue(_litf.LITF_cmdStats.stance) + &quot;. &quot;;
    msText += &quot;Your physical shape is &quot; + _rpge.$getStrengthFromValue(_litf.LITF_cmdStats.strength) + &quot;. &quot;;
    msText += &quot;You currently have &quot; + _co.$formatNumber(player.credits) + &quot;cr. &quot;;
    
    if (_litf.LITF_flags.getDrunk == 1) {
        msText += &quot;\n* You&#39;re drunk. Hiccups, a bit of nausea and the world swinging left and right.&quot;;
    }

    var hDesc = _rpge.$getHealthFromValue(_litf.LITF_cmdStats.health);
    if (hDesc != &quot;&quot;) { 
        msText += &quot;\n* &quot; + hDesc; 
    }

    var sDesc = _rpge.$getSicknessFromValue(_litf.LITF_cmdStats.sickness);
    if (sDesc != &quot;&quot;) { 
        msText += &quot;\n* &quot; + sDesc; 
    }
    
    msText += &quot;\n&quot;;
    
    // Universal Fitness Badge status
    
    var fitBadge = _litf.LITF_flags.fitBadge;
    if (fitBadge &gt; -1) {
        var expired = _co.$checkTimeForExpiration(fitBadge);
        if (expired == 1) {
            msText += &quot;\nYou own an expired Universal Fitness Badge.&quot;;
        } else {
            var remain = _co.$formatRemainingTime(fitBadge);
            
            msText += &quot;\nYou own a Universal Fitness Badge: it will expire in &quot; + remain + &quot;.&quot;;
        }
    }

    msText += &quot;\n&quot;;

    // XXX Contractors and missions
    /*
    if (this.LITF_contractorData != undefined &amp;&amp; this.LITF_contractorData != &quot;&quot;) {
        var cData = this.LITF_contractorData;

        // Destination system ID, NPC name, mission type, max time
        var cSplit = cData.split(&quot;|&quot;);

        var remainTime = parseInt(cSplit[3]) - clock.seconds;
        var formattedTime = this.$formatTime(remainTime);

        msText += &quot;\nCONTRACTOR: Meet &quot; + cSplit[1] + &quot; at &quot; + System.systemNameForID(parseInt(cSplit[0])) 
            + &quot; for a job. (&quot; + formattedTime + &quot; before expiring).&quot;;
    }

    if (this.LITF_missionData != undefined &amp;&amp; this.LITF_missionData != &quot;&quot;) {
        var mData = this.LITF_missionData;

        // cargo, pay, systemDestId, maxTime, missionType, systemStartId    
        var mSplit = mData.split(&quot;|&quot;);

        var remainTime = parseInt(mSplit[3]) - clock.seconds;
        var formattedTime = this.$formatTime(remainTime);

        var cType = mSplit[4].toUpperCase() + &quot; MISSION&quot;;

        msText += &quot;\n&quot; + cType + &quot;: for &quot; + mSplit[1] + &quot;cr deliver &quot; + mSplit[0] 
            + &quot; to &quot; + System.systemNameForID(parseInt(mSplit[2])) + &quot; within &quot; + formattedTime + &quot;.&quot;;
    }
    */

    //msText += &quot;\n&quot;;

    return msText;
};


this.$setStatusChoices = function() {
    var msChoiceList = {};
    msChoiceList[&quot;BACK&quot;] = &quot;Back to the Hangar&quot;;
    return msChoiceList;
};


this.$statusScreenChoice = function(choice) {
    switch (choice) {
        case &quot;BACK&quot;:
            worldScripts.LITF_Navigation.$startNavigation();
	break;
    }
};


this.$goPlace = function(pLabel) {
	var _co = worldScripts.LITF_Common;
	var _ec = worldScripts.LITF_EventsCatalog;
	var _rpge = worldScripts.LITF_RPGElements;
	var _litf = worldScripts.LITF;

	// The commander is dying!
	if (_litf.LITF_cmdStats.health &gt;= 5 || _litf.LITF_cmdStats.sickness &gt;= 5) {
		if (pLabel.indexOf(&quot;area&quot;) == 0) {
			var passoutchance = Math.floor(Math.random() * 100) + 1;
			// The commander pass out!
			if (passoutchance &lt; 50) {
				pLabel = &quot;passout0&quot;;
			}
		}
	}

	if (pLabel == &quot;area1&quot; &amp;&amp; _litf.LITF_flags.defacedShip == 1) {
		pLabel = &quot;area1_defacedShip&quot;;
	}

    LITF_lastPlaceLabel = LITF_placeLabel;
	LITF_placeLabel = pLabel;
	_co.$log(&quot;[goPlace] &quot; + LITF_placeLabel);

	var pTitle = &quot;AROUND THE SPACE STATION&quot;;

	var LITF_place = eval(&quot;this.&quot; + pLabel + &quot;;&quot;);
	//_co.$log(&quot;[goPlace] text = &quot; + LITF_place.text);

	var placeText = &quot;[ &quot; + _rpge.$getReputationFromValue(_litf.LITF_cmdStats.reputation) + &quot; &quot; + player.name + &quot;  |  &quot; + _co.$formatNumber(player.credits) + &quot;cr  |  Wounds: &quot; + _rpge.LITF_healthShort[_litf.LITF_cmdStats.health] + &quot;  |  Health: &quot; + _rpge.LITF_sicknessShort[_litf.LITF_cmdStats.sickness] + &quot; ]\n\n&quot;;

    placeText += this.buildLocationText(LITF_place);

	placeText += this.$addRandomHealthSnippet();

	placeText += this.$addRandomStatusSnippet();

	placeText = _co.$replaceConstants(placeText);

    //_co.$log(&quot;[goPlace] placeText = &quot; + placeText);

	var placeChoices = _co.$extractChoices(LITF_place);

	var sid = null;
	if( pLabel == &quot;area1_nongalcop&quot; ) {  //for HD Backgrounds OXP
		var w = worldScripts.hdbg;
		if( w ) sid = &quot;hdbg-station&quot;;
	}

	mission.runScreen(
		{ 
			title: pTitle,
			message: placeText,
			screenID: sid, //for HD Backgrounds OXP
			choices: placeChoices
		},
		this.$selectChoice
	);

	_co.$screenBackground(LITF_place.background);
	if( sid ) {
		this.$Roles = w.$Roles;
		this.$SetHDBG = w.$SetHDBG;
		w.guiScreenChanged(&quot;GUI_SCREEN_MISSION&quot;); //set HD Background
	}
	
};

this.buildLocationText = function(pData) {
    var _co = worldScripts.LITF_Common;

    var textCounter = 0;
    var valid = 1;

    var placeText = &quot;&quot;;

    var staticText = pData.text;
    if (staticText) {
        // text - static text
        //_co.$log(&quot;[buildLocationText] staticText = &quot; + staticText);
        placeText = staticText;
    } else {
        // text0, text1 ... - dynamic text

        while (valid == 1) {
            var t = &quot;text&quot; + textCounter;
            var text = eval(&quot;pData.&quot; + t + &quot;;&quot;);
    
            if (text) {
                _co.$log(&quot;[buildLocationText] indexed text &quot; + t + &quot; = &quot; + text);
                var tSplit = text.split(&quot;|&quot;);
                if (tSplit.length == 1) {
                    // No conditions - always valid, always shown
                    placeText += text;
                } else {
                    // Needs to validate condition
                    var validate = 1;
                    var LITF_items = tSplit[0].split(&quot;,&quot;);
                    for (var i = 0; i &lt; LITF_items.length; i++) {
                    
                        if (_co.$checkRequirements(LITF_items[i]) == 0) { validate = 0; }
                        _co.$log(&quot;[validateChoice] &quot; + LITF_items[i] + &quot; = &quot; + validate);
                    }

                    if (validate == 1) { placeText += tSplit[1]; }
                }
                
                textCounter++;            
            } else {
                valid = 0;
            }
        }
    }
    
    //_co.$log(&quot;[buildLocationText] placeText = &quot; + placeText);

    return placeText;
};

this.$addRandomStatusSnippet = function() {
	var _litf = worldScripts.LITF;

    var text = &quot;&quot;;
	var chance = Math.floor(Math.random() * 100);

	if (_litf.LITF_flags.getDrunk == 1) {
		if (chance &lt; 10) {
			text = &quot;\n\nYou produce a undignified belch.&quot;;
		} else if (chance &lt; 20) {
			text = &quot;\n\nYou stumble on your feet.&quot;;
		} else if (chance &lt; 30) {
			text = &quot;\n\nYou hiccup.&quot;;
		}
	}

	return text;
};


this.$addRandomHealthSnippet = function() {
	var _litf = worldScripts.LITF;

    var text = &quot;&quot;;
	var chance = Math.floor(Math.random() * 100);

	var health = _litf.LITF_cmdStats.health;
	var sickness = _litf.LITF_cmdStats.sickness;

	if (health &gt; 0 &amp;&amp; chance &lt; 10) {
		switch (health) {
			case 1: 
				text = &quot;\n\nYou feel your skin slightly itching.&quot;;
				break;
			case 2:
				text = &quot;\n\nYou feel a bit of pain while you walk.&quot;;
				break;
			case 3:
				text = &quot;\n\nYou feel pain even standing still.&quot;;
				break;
			case 4:
				text = &quot;\n\nYou feel great pain, that makes you moan in anguish.&quot;;
				break;
			case 5: 
				text = &quot;\n\nYou can&#39;t walk straight, trying your best to not fall over. The pain is unbearable.&quot;;
				break;
		}
	} else if (sickness &gt; 0 &amp;&amp; chance &lt; 20) {
		switch (sickness) {
			case 1: 
				text = &quot;\n\nYou cough a couple of times.&quot;;
				break;
			case 2:
				text = &quot;\n\nYou sneeze and feel suddenly cold for a while.&quot;;
				break;
			case 3:
				text = &quot;\n\nYou feel nauseated.&quot;;
				break;
			case 4:
				text = &quot;\n\nYou feel incredibly tired.&quot;;
				break;
			case 5: 
				text = &quot;\n\nYour head spin, you can&#39;t walk straight.&quot;;
				break;
		}
	}

	return text;
};


this.$selectChoice = function(choice) {
	var _co = worldScripts.LITF_Common;

	_co.$log(&quot;[selectChoice] choice = &quot; + choice);

	if (choice == null || choice == &quot;null&quot;) { return; }

	var action = choice.replace(&#39;c&#39;, &#39;a&#39;);
	_co.$log(&quot;[selectChoice] action = &quot; + action);

	// Retrieve the associate actions

	var actionData = eval(&quot;worldScripts.LITF_Navigation.&quot; + LITF_placeLabel + &quot;.&quot; + action);

    _co.$executeActions(actionData);

	/*
    var actionsSplit = actionData.split(&quot;|&quot;);

	// Iterate, parse and execute the actions
	for (var i = 0; i &lt; actionsSplit.length; i++) {
		var action = actionsSplit[i];

        _co.$executeAction(action);
	}
	*/
};


///////////////////////////////////////

this.passout0 = {
	text: &quot;Suddenly you experience a strong vertigo, your legs become unstable and your body get permeated by a glacial coldness. You fall on the floor, uncapable to say anything, and faint while around you can still hear a far echo of worried voices that call for help... after that, darkness.&quot;,
	c1: &quot;...&quot;,
	a1: &quot;time:3600,14400|paytreatment:health|paytreatment:sickness|goNav:passout1&quot;
};

this.passout1 = {
	text: &quot;Time passes... until you come round, starting to perceive the world around, chaotic and confuse... the lights blinds you, but you can barely move. Someone is near you, and you need to focus completely on $GENDERPOSS$ to understand the words...\n\n&#39;...we managed to get back from the edge of death, basically. In these cases law force us to apply a complete healing process, and confusion aside, you should get well about in twenty minutes. When you feel you can walk again, come to the reception.&#39;\n\nThat was a doctor, and you&#39;re in the Medical Center - now you recognize it. You take a deep breath and wait. The world is starting to stabilize...&quot;,
	background: &quot;litf_bg_medcenter.png&quot;,
	c1: &quot;...&quot;,
	a1: &quot;time:600,1200|goNav:passout2&quot;
};

this.passout2 = {
	text: &quot;After a while, against your conjectures, you really feel you can stand up and walk. You&#39;re starting to feel better.\n\nYou wear your clothes, and exit the room to the Medical Center reception.&quot;,
	background: &quot;litf_bg_medcenter.png&quot;,
	c1: &quot;Let&#39;s hear the news...&quot;,
	a1: &quot;goNav:passout3&quot;
};

this.passout3 = {
	text: &quot;The receptionist smiles as usual. She says that the healing process gone well, and that you are healthy enough again.\n\nAfter this, the receptionist reminds you that the cures weren&#39;t free. The price for the process has already been withdrawn from your account, and on top of this there is an additional 200cr for the emergency procedure. Don&#39;t worry if you haven&#39;t enough money: the station bank system will automatically adjust your bounty for debts insolvence. You can clean your bounty using the Galcop terminal at the precinct.\n\n&#39;Good day, commander.&#39;&quot;,
	background: &quot;litf_bg_medcenter.png&quot;,
	c1: &quot;Yes, really a good day...&quot;,
	a1: &quot;reputation:-15|goNav:area2_2&quot;
};

///////////////////////////////////////

this.area1 = {
    text: &quot;You&#39;re in the hangar where your ship is parked. There are other ships, in different conditions. You see a few of them being examined by the station droids, floating slowly around the hull searching for breaches.&quot;,
    background: &quot;litf_bg_hangar.png&quot;,
    c1: &quot;Go to the Docks&quot;,
    a1: &quot;randomAndGo:lobby1&quot;,
    c2: &quot;Embark your ship&quot;,
    a2: &quot;endNav:0&quot;,
    c3: &quot;See your status&quot;,
    a3: &quot;showStatus:1&quot;
};

this.area1_nongalcop = {
    text: &quot;This station is considerably different than main GalCop stations. You&#39;re in the hangar where your ship is parked together with other ships. There are some closed doors around, looks like you should go back into your ship and do your orders via ship communication channels.&quot;,
    background: &quot;litf_bg_hangar.png&quot;,
    c1: &quot;Embark your ship&quot;,
    a1: &quot;endNav:0&quot;,
    c2: &quot;See your status&quot;,
    a2: &quot;showStatus:1&quot;
};

/*
this.lobby1 = {
    text: &quot;You&#39;re in the Docks.\n\nYou see droids moving crates and containers off and on ships. The activity is unrelenting.\n\nFrom here:\n- You can go to your ship in the Hangar\n- You can enter the Cargo Area\n- You can take the Lift and go to the Main Concourse, the Recreation Bridge or the Galcop Precinct.\n\n$LOBBYSNIPPET$&quot;,
    background: &quot;litf_bg_docks.png&quot;,
    c1: &quot;Enter the Hangar&quot;,
    a1: &quot;randomAndGo:area1&quot;,
    c2: &quot;Enter the Cargo Area&quot;,
    a2: &quot;randomAndGo:area1_2&quot;,
    c3: &quot;Lift &gt;&gt; Main Concourse&quot;,
    a3: &quot;time:120|goNav:lobby2&quot;,
    c4: &quot;Lift &gt;&gt; Recreation Bridge&quot;,
    a4: &quot;time:240|goNav:lobby3&quot;,
    c5: &quot;Lift &gt;&gt; Galcop Precinct&quot;,
    a5: &quot;time:360|goNav:lobby4&quot;
};
*/

this.lobby1 = {
    text: &quot;You&#39;re in the Docks.\n\nYou see droids moving crates and containers off and on ships. The activity is unrelenting.\n\n$LOBBYSNIPPET$&quot;,
    background: &quot;litf_bg_docks.png&quot;,
    c1: &quot;Look at the station map&quot;,
    //a1: &quot;goNav:map1&quot;,
    a1: &quot;goNav:map&quot;,
    c2: &quot;Enter the Hangar&quot;,
    a2: &quot;randomAndGo:area1&quot;,
    c3: &quot;Enter the Cargo Area&quot;,
    a3: &quot;randomAndGo:area1_2&quot;,
    c4: &quot;Lift &gt;&gt; Main Concourse&quot;,
    a4: &quot;time:120|goNav:lobby2&quot;,
    c5: &quot;Lift &gt;&gt; Recreation Bridge&quot;,
    a5: &quot;time:240|goNav:lobby3&quot;,
    c6: &quot;Lift &gt;&gt; Galcop Precinct&quot;,
    a6: &quot;time:360|goNav:lobby4&quot;
};



this.area1_defacedShip = {
    text: &quot;You&#39;re in the Docks Area.\n\nThere&#39;s people going around, and droids moving crates and containers off and on ships. The activity is unrelenting.\n\nYou can see your ship from here, but it&#39;s not exactly like you remembered. It seems someone has painted over the hull a series of colorful insults and raunchy words. A worker suggests you use the Area droids to clean the ship before departing - those graffiti could grant you a fine for public indecence.\n\nYou&#39;re annoyed but take control of the droids and erase the insults - a task that takes you an hour...&quot;,
    c1: &quot;Damn kids...&quot;,
    a1: &quot;time:3600|flag_defacedShip:0|goNav:area1&quot;
};


this.area1_2 = {
    text: &quot;You&#39;re in the Cargo Area.\n\nDroids transports here all the cargo unloaded from ships, and get back to the ships the containers to load into them. There are dozen of containers of various colors, and the commodities are being put into or removed from them, waiting to be transferred to Storage.\n\nFrom here you can visit the Storage section, or return to the Docks.&quot;,
    background: &quot;litf_bg_cargoarea.png&quot;,
    c1: &quot;Go to the Docks&quot;,
    a1: &quot;randomAndGo:lobby1&quot;,
    c2: &quot;Visit the Storage section&quot;,
    a2: &quot;goNav:storage0&quot;
};

/*
this.lobby2 = {
    text: &quot;You&#39;re in the Main Concourse lobby.\n\nFrom here:\n- You can go to one of three sections of the Concourse:\n  Section A: Passengers Lounge, Hotel\n  Section B: Medical Center, Church of the Cosmic Wanderer, Bookshop\n  Section C: ## DATA NOT FOUND ##\n- You can take the Lift and go to the Docks, the Recreation Bridge or the Galcop Precinct.\n\n$LOBBYSNIPPET$&quot;,
    c1: &quot;Enter the Concourse-A section&quot;,
    a1: &quot;randomAndGo:area2_1&quot;,
    c2: &quot;Enter the Concourse-B section&quot;,
    a2: &quot;randomAndGo:area2_2&quot;,
    c3: &quot;Enter the Concourse-C section&quot;,
    a3: &quot;randomAndGo:area2_3&quot;,
    c4: &quot;Lift &gt;&gt; Docks&quot;,
    a4: &quot;time:120,goNav:lobby1&quot;,
    c5: &quot;Lift &gt;&gt; Recreation Bridge&quot;,
    a5: &quot;time:120|goNav:lobby3&quot;,
    c6: &quot;Lift &gt;&gt; Galcop Precinct&quot;,
    a6: &quot;time:240|goNav:lobby4&quot;
};
*/

this.lobby2 = {
    text: &quot;You&#39;re in the Main Concourse lobby.\n\n$LOBBYSNIPPET$&quot;,
    c1: &quot;Look at the station map&quot;,
    //a1: &quot;goNav:map2&quot;,
    a1: &quot;goNav:map&quot;,
    c2: &quot;Enter the Concourse-A section&quot;,
    a2: &quot;randomAndGo:area2_1&quot;,
    c3: &quot;Enter the Concourse-B section&quot;,
    a3: &quot;randomAndGo:area2_2&quot;,
    c4: &quot;Enter the Concourse-C section&quot;,
    a4: &quot;randomAndGo:area2_3&quot;,
    c5: &quot;Lift &gt;&gt; Docks&quot;,
    a5: &quot;time:120|goNav:lobby1&quot;,
    c6: &quot;Lift &gt;&gt; Recreation Bridge&quot;,
    a6: &quot;time:120|goNav:lobby3&quot;,
    c7: &quot;Lift &gt;&gt; Galcop Precinct&quot;,
    a7: &quot;time:240|goNav:lobby4&quot;
};

this.area2_1 = {
    text: &quot;You&#39;re in the Concourse-A section.\n\nYou see groups of people walking between the shops and the large decorated plaza.\n\nFrom here you can visit the Passengers Lounge, the Hotel, go to the lobby or to the other Concourse sections.&quot;,
    background: &quot;litf_bg_mainconcourse1.png&quot;,
    c1: &quot;Exit the Main Concourse&quot;,
    a1: &quot;randomAndGo:lobby2&quot;,
    c2: &quot;Visit the Passengers Lounge&quot;,
    a2: &quot;goNav:plounge0&quot;,
    c3: &quot;Visit the Hotel&quot;,
    a3: &quot;goNav:hotel0&quot;,
    c4: &quot;Enter the Concourse-B section&quot;,
    a4: &quot;randomAndGo:area2_2&quot;,
    c5: &quot;Enter the Concourse-C section&quot;,
    a5: &quot;randomAndGo:area2_3&quot;
};


this.area2_2 = {
    text: &quot;You&#39;re in the Concourse-B section.\n\nYou see many people talking to each other. There&#39;s a big fountain with benches around.\n\nFrom here you can visit the Church of the Cosmic Wanderer, the Bookshop or the Medical Center for your health-related issues, go to the lobby or to the other Concourse sections.&quot;,
    background: &quot;litf_bg_mainconcourse2.png&quot;,
    c1: &quot;Exit the Main Concourse&quot;,
    a1: &quot;randomAndGo:lobby2&quot;,
    c2: &quot;Sit on a bench near the fountain&quot;,
    a2: &quot;goNav:area2_4&quot;,
    c3: &quot;Visit the Church of the Cosmic Wanderer&quot;,
    a3: &quot;goNav:church0&quot;,
    c4: &quot;Visit the Bookshop&quot;,
    a4: &quot;goNav:bookshop0&quot;,
    c5: &quot;Visit the Medical Center&quot;,
    a5: &quot;goNav:med0&quot;,
    c6: &quot;Enter the Concourse-A section&quot;,
    a6: &quot;randomAndGo:area2_1&quot;,
    c7: &quot;Enter the Concourse-C section&quot;,
    a7: &quot;randomAndGo:area2_3&quot;
};


this.area2_3 = {
    text: &quot;You&#39;re in the Concourse-C section.\n\nThere are people working in the gardens. The food processing is automated, and you smell a sweet mix of odours from the facilities.\n\nFrom here you can go to the lobby or to the other Concourse sections.&quot;,
    background: &quot;litf_bg_hpgardens.png&quot;,
    c1: &quot;Exit the Main Concourse&quot;,
    a1: &quot;randomAndGo:lobby2&quot;,
    c2: &quot;Enter the Concourse-A section&quot;,
    a2: &quot;randomAndGo:area2_1&quot;,
    c3: &quot;Enter the Concourse-B section&quot;,
    a3: &quot;randomAndGo:area2_2&quot;
};


this.area2_4 = {
    text: &quot;You sit on a bench. The water noise behind you is relaxing, almost hypnotic. You start to zone out, your thoughts going astray... you should rest here for a while...&quot;,
    c1: &quot;Better if I go, I don&#39;t want to fall asleep here&quot;,
    a1: &quot;goNav:area2_2&quot;,
    c2: &quot;Stay still. Let&#39;s wait some time here&quot;,
    a2: &quot;time:1800|goNav:area2_4&quot;
};

/*
this.lobby3 = {
    text: &quot;You&#39;re in the Recreation Bridge lobby.\n\nFrom here:\n- You can go to the level sections:\n  Delight Avenue: Local Bar, Wild Worlds Virtual Tour, Museum\n  Olympian Square: Fit Center\n  Mecenate Court: Art Gallery, Opera House, Cinema Hall\n- You can take the Lift and go to the Docks, the Main Concourse or the Galcop Precinct.\n\n$LOBBYSNIPPET$&quot;,
    c1: &quot;Enter the Delight Avenue&quot;,
    a1: &quot;randomAndGo:area3_1&quot;,
    c2: &quot;Enter the Olympian Square&quot;,
    a2: &quot;randomAndGo:area3_2&quot;,
    c3: &quot;Enter the Mecenate Court&quot;,
    a3: &quot;randomAndGo:area3_3&quot;,
    c4: &quot;Lift &gt;&gt; Docks&quot;,
    a4: &quot;time:240,goNav:lobby1&quot;,
    c5: &quot;Lift &gt;&gt; Main Concourse&quot;,
    a5: &quot;time:120|goNav:lobby2&quot;,
    c6: &quot;Lift &gt;&gt; Galcop Precinct&quot;,
    a6: &quot;time:240|goNav:lobby4&quot;
};
*/

this.lobby3 = {
    text: &quot;You&#39;re in the Recreation Bridge lobby.\n\n$LOBBYSNIPPET$&quot;,
    c1: &quot;Look at the station map&quot;,
    //a1: &quot;goNav:map3&quot;,
    a1: &quot;goNav:map&quot;,
    c2: &quot;Enter the Delight Avenue&quot;,
    a2: &quot;randomAndGo:area3_1&quot;,
    c3: &quot;Enter the Olympian Square&quot;,
    a3: &quot;randomAndGo:area3_2&quot;,
    c4: &quot;Enter the Mecenate Court&quot;,
    a4: &quot;randomAndGo:area3_3&quot;,
    c5: &quot;Lift &gt;&gt; Docks&quot;,
    a5: &quot;time:240|goNav:lobby1&quot;,
    c6: &quot;Lift &gt;&gt; Main Concourse&quot;,
    a6: &quot;time:120|goNav:lobby2&quot;,
    c7: &quot;Lift &gt;&gt; Galcop Precinct&quot;,
    a7: &quot;time:240|goNav:lobby4&quot;
};

this.area3_1 = {
    text: &quot;You&#39;re in Delight Avenue.\n\nPeople joke and laugh, there are expensive clothes around here. You can hear music playing in background.\n\nFrom here you can visit the local Bar, the Museum or the Wild Worlds Virtual Tour, go to the lobby, to Olympian Square or to Mecenate Court.&quot;,
    background: &quot;litf_bg_entcorridor.png&quot;,
    c1: &quot;Exit the Recreation Bridge&quot;,
    a1: &quot;randomAndGo:lobby3&quot;,
    //r2: &quot;flag_getDrunk=0&quot;,
    c2: &quot;Visit the local Bar&quot;,
    a2: &quot;if:flag_getDrunk=0?goNav:bar0;goNav:bar0_1&quot;,
    c3: &quot;Visit the museum&quot;,
    a3: &quot;goNav:museum0&quot;,
    c4: &quot;Visit the Wild Worlds Virtual Tour&quot;,
    a4: &quot;goNav:wwvt0&quot;,
    c5: &quot;Enter Olympian Square&quot;,
    a5: &quot;randomAndGo:area3_2&quot;,
    c6: &quot;Enter Mecenate Court&quot;,
    a6: &quot;randomAndGo:area3_3&quot;
};


this.area3_2 = {
    text: &quot;You&#39;re in Olympian Square.\n\nYou see people with colourful tracksuit, ready to exercise or race against other competitors. The place is filled with different sports areas and with gleeful audiences. Various holograms shows different activities and disciplines.\n\nFrom here you can visit the Fit Center, go to the lobby, to Delight Avenue or to Mecenate Court.&quot;,
    background: &quot;litf_bg_entcorridor.png&quot;,
    c1: &quot;Exit the Recreation Bridge&quot;,
    a1: &quot;randomAndGo:lobby3&quot;,
    c2: &quot;Visit the Fit Center&quot;,
    a2: &quot;goNav:fit0&quot;,
    c3: &quot;Enter Delight Avenue&quot;,
    a3: &quot;randomAndGo:area3_1&quot;,
    c4: &quot;Enter Mecenate Court&quot;,
    a4: &quot;randomAndGo:area3_3&quot;
};


this.area3_3 = {
    text: &quot;You&#39;re in Mecenate Court.\n\nThis place is decorated with columns and galleries sculpted in ancient styles. Exotic vines climb the walls in elaborated patterns. In the wide central court you see several people discussing and debating a variety of topics.\n\nFrom here you can visit the Art Gallery, the Opera House or the Cinema Hall, go to the lobby, to Delight Avenue or to Olympian Square.&quot;,
    background: &quot;litf_bg_entcorridor.png&quot;,
    c1: &quot;Exit the Recreation Bridge&quot;,
    a1: &quot;randomAndGo:lobby3&quot;,
    r2: &quot;flag_artGallery=0&quot;,
    c2: &quot;Visit the Art Gallery&quot;,
    a2: &quot;goNav:art0&quot;,
    r3: &quot;flag_operaHouse=0&quot;,
    c3: &quot;Visit the Opera House&quot;,
    a3: &quot;goNav:opera01,opera02,opera03&quot;,
    r4: &quot;flag_cinemaHall=0&quot;,
    c4: &quot;Visit the Cinema Hall&quot;,
    a4: &quot;goNav:cinema0&quot;,
    c5: &quot;Enter Delight Avenue&quot;,
    a5: &quot;randomAndGo:area3_1&quot;,
    c6: &quot;Enter Olympian Square&quot;,
    a6: &quot;randomAndGo:area3_2&quot;,
};

/*
this.lobby4 = {
    text: &quot;You&#39;re in the Galcop Precinct.\n\nFrom here:\n- You can go to the Galcop Facilities\n- You can take the Lift and go to the Docks, the Main Concourse or the Recreation Bridge.\n\n$LOBBYSNIPPET$&quot;,
    c1: &quot;Enter the Galcop Facilities&quot;,
    a1: &quot;randomAndGo:area4_1&quot;,
    c2: &quot;Lift &gt;&gt; Docks&quot;,
    a2: &quot;time:360|goNav:lobby1&quot;,
    c3: &quot;Lift &gt;&gt; Main Concourse&quot;,
    a3: &quot;time:240|goNav:lobby2&quot;,
    c4: &quot;Lift &gt;&gt; Recreation Bridge&quot;,
    a4: &quot;time:120|goNav:lobby3&quot;,
};
*/

this.lobby4 = {
    text: &quot;You&#39;re in the Galcop Precinct.\n\n$LOBBYSNIPPET$&quot;,
    c1: &quot;Look at the station map&quot;,
    //a1: &quot;goNav:map4&quot;,
    a1: &quot;goNav:map&quot;,
    c2: &quot;Enter the Galcop Facilities&quot;,
    a2: &quot;randomAndGo:area4_1&quot;,
    c3: &quot;Lift &gt;&gt; Docks&quot;,
    a3: &quot;time:360|goNav:lobby1&quot;,
    c4: &quot;Lift &gt;&gt; Main Concourse&quot;,
    a4: &quot;time:240|goNav:lobby2&quot;,
    c5: &quot;Lift &gt;&gt; Recreation Bridge&quot;,
    a5: &quot;time:120|goNav:lobby3&quot;,
};


this.area4_1 = {
    text: &quot;You&#39;re in the Galcop Facilities.\n\nYou see agents responding to calls and going on patrols. A number of desks is busy with reports from station visitors.\n\nImmediately into the Facilities you see a row of Galcop terminals.\n\nFrom here you can enter the Mission Briefing Room, the Detainment Zone and the Pilot Course Room, or exit to the Precinct.&quot;,
	c1: &quot;Exit the Galcop Facilities&quot;,
	a1: &quot;goNav:lobby4&quot;,
	c2: &quot;Go to one of the Galcop terminals&quot;,
	a2: &quot;goNav:area4_2&quot;,
	c3: &quot;Enter the Mission Briefing Room&quot;,
	a3: &quot;goNav:area4_3&quot;,
	c4: &quot;Enter the Detainment Zone&quot;,
	a4: &quot;goNav:area4_4&quot;,
	c5: &quot;Enter the Social Services Zone&quot;,
	a5: &quot;goNav:area4_5&quot;,
	c6: &quot;Enter the Pilot Course Room&quot;,
	a6: &quot;goNav:area4_6&quot;
};

this.area4_2 = {
	text0: &quot;WELCOME TO GALCOP ANONYMOUS REHABILITATION TERMINAL\n\nPUT YOU RIGHT PALM ON THE SENSOR\n\nVERIFICATION COMPLETE\n\nHELLO, COMMANDER,&quot;,
	text1: &quot;bounty&lt;1|\n\nYOUR CRIMINAL RECORD IS CLEAN.&quot;,
	text2: &quot;bounty&gt;0|\n\nYOU CAN CLEAN YOUR CRIMINAL RECORD FOR $BOUNTYFINE$.&quot;,
	text3: &quot;\n\nGOOD DAY COMMANDER&quot;,
	background: &quot;litf_bg_terminal.png&quot;,
	c1: &quot;Good day, terminal&quot;,
	a1: &quot;goNav:area4_1&quot;,
    r2: &quot;bounty&gt;0,bountyfine=1&quot;,
	c2: &quot;I want to pay and clean my criminal record.&quot;,
	a2: &quot;paybountyfine:1|goNav:area4_2&quot;,
    r3: &quot;bounty&gt;0,bountyfine=0&quot;,
	c3: &quot;I have not enough money to clean my criminal record.&quot;,
	a3: &quot;goNav:area4_1&quot;
};

this.area4_3 = {
    text: &quot;The door to the briefing room is closed. An officer tells you that only Galcop associates can join the mission briefings.&quot;,
    c1: &quot;Go away&quot;,
    a1: &quot;goNav:area4_1&quot;
};

this.area4_4 = {
    text: &quot;You go to the detainment zone gate, but an officer stops before you can enter: &#39;Sorry, but your legal status in currently under examination. Therefore you are interdicted to this area access, unless you can produce a legitimate and proper payment for this transgression. I believe 30cr should be enough.&#39;&quot;,
    r1: &quot;credits&gt;=30&quot;,
    c1: &quot;Pay the &#39;fee&#39;&quot;,
    a1: &quot;credits:-30|goNav:area4_41&quot;,
    c2: &quot;Go away&quot;,
    a2: &quot;goNav:area4_1&quot;
};

this.area4_41 = {
    text: &quot;You are inside a big hall, full of metallic cells in a grid scheme, on multiple floors. You can hear the prisoners complaining and swearing. Galcop drones patrol the area.&quot;,
    c1: &quot;Exit&quot;,
    a1: &quot;goNav:area4_1&quot;
};

this.area4_5 = {
    text0: &quot;You enter the room, and a galcop android scans your legal status.&quot;,
    text1: &quot;bounty=0|&#39;Your criminal record is clean, but you can contribute to the services if you want, as a volunteer.&#39;&quot;,
    text2: &quot;bounty&gt;0|&#39;If you want you can endure a session of work to decrease your bounty, as a volunteer.&#39;&quot;,
    //r1: &quot;bounty&gt;0&quot;,
    c1: &quot;Ok, I want to endure a session&quot;,
    a1: &quot;time:14400|reputation:2|goNav:area4_51,area4_51,area4_51,area4_52&quot;,
    c2: &quot;Go away&quot;,
    a2: &quot;goNav:area4_1&quot;
};

this.area4_51 = {
    text: &quot;You spend the session working on the back alleys of the station, cleaning floors, fixing lights, repairing blocked doors, supervising little service droids. It isn&#39;t a fun job, and at the end of the session you&#39;re tired, but you have the feeling of doing something useful.&quot;,
    c1: &quot;I&#39;ll stop for now&quot;,
    a1: &quot;bounty:-20|goNav:area4_1&quot;
};

this.area4_52 = {
    text: &quot;During the session you feel tired and careless, and as a result you get into an accident and wound yourself. Nothing to worry, you get bandaged and treated readily. But your session end here, and the associated bonus will be reduced.&quot;,
    c1: &quot;I should be more careful&quot;,
    a1: &quot;bounty:-5|health:1,2&quot;,
};

this.area4_6 = {
    text: &quot;The door to the pilot course hall is closed. An officer tells you the courses are suspended for an undefined time.&quot;,
    c1: &quot;Go away&quot;,
    a1: &quot;goNav:area4_1&quot;
};

/////////////////// STATION MAP ///////////////////

this.map = {
    text: &quot; &quot;,
    background: &quot;litf_bg_stationmap.png&quot;,
    c1: &quot;Back to the lobby&quot;,
    a1: &quot;goNav:back&quot;
};

/*
this.map1 = {
    text: &quot;\n&gt;&gt;&quot;,
    background: &quot;litf_bg_stationmap.png&quot;,
    c1: &quot;Back to the lobby&quot;,
    a1: &quot;goNav:lobby1&quot;
};

this.map2 = {
    text: &quot;\n\n\n\n\n\n&gt;&gt;&quot;,
    background: &quot;litf_bg_stationmap.png&quot;,
    c1: &quot;Back to the lobby&quot;,
    a1: &quot;goNav:lobby2&quot;
};

this.map3 = {
    text: &quot;\n\n\n\n\n\n\n\n\n\n&gt;&gt;&quot;,
    background: &quot;litf_bg_stationmap.png&quot;,
    c1: &quot;Back to the lobby&quot;,
    a1: &quot;goNav:lobby3&quot;
};

this.map4 = {
    text: &quot;\n\n\n\n\n\n\n\n\n\n\n\n\n\n&gt;&gt;&quot;,
    background: &quot;litf_bg_stationmap.png&quot;,
    c1: &quot;Back to the lobby&quot;,
    a1: &quot;goNav:lobby4&quot;
};
*/

/////////////////// SPECIAL LOCATION ///////////////////

this.bar0 = {
	text: &quot;The place is full of pilots. You don&#39;t see free seats at the tables, so you decide to sit at the counter. Everyone is pretty chatty: you hear talks of all kinds, public or private, and the usual jokers who take the opportunity to have a nice drink with friends.&quot;,
	background: &quot;litf_bg_localbar.png&quot;,
    r1: &quot;flag_drinkChallenge=0&quot;,
	c1: &quot;A group at a table repeat loud: &#39;CHALLENGE! CHALLENGE!&#39; Maybe I could check?&quot;,
	a1: &quot;goNav:bar1&quot;,
    r2: &quot;flag_chatBartender=0&quot;,
	c2: &quot;I could talk a bit with the bartender&quot;,
	a2: &quot;goNav:bar2&quot;,
    r3: &quot;flag_offerToCounter=0,credits&gt;=150&quot;,
	c3: &quot;I could offer a drink to everyone at the counter (should cost no more than 150cr)&quot;,
	a3: &quot;goNav:bar3&quot;,
	c4: &quot;Exit the Bar&quot;,
	a4: &quot;time:300|goNav:area3_1&quot;
};

this.bar0_1 = {
    text: &quot;Suddenly, a brawny bouncer blocks you right at the entrance of the Bar. He&#39;s staring right into your eyes. &#39;We don&#39;t like cheaters or drunkard here, and you don&#39;t seem a cheater to me. Get lost&#39;, he says to you with a deep, serious voice.&quot;,
    c1: &quot;I think I&#39;ll follow your advice&quot;,
    a1: &quot;goNav:area3_1&quot;
};

//

this.bar1 = {
	text: &quot;You sit in front of a $SPECIES_S$ that explains to you the rules of the challenge. &#39;A liquor is chosen. I drink a glass. You drink a glass. Again. Until one crashes. The bet is 50cr. You&#39;re in?&quot;,
	background: &quot;litf_bg_localbar.png&quot;,
    r1: &quot;credits&gt;=50&quot;,
	c1: &quot;Yes, you can count me in&quot;,
	a1: &quot;credits:-50|goNav:bar11&quot;,
	c2: &quot;Not tonight, thanks&quot;,
	a2: &quot;goNav:bar0&quot;
};

this.bar11 = {
	text: &quot;Today the liquor is the $LIQUOR$. &#39;First glass is mine&#39;. The $SPECIES_S$ raise the glass and drink the content in one gulp.&quot;,
	background: &quot;litf_bg_localbar.png&quot;,
	c1: &quot;It&#39;s my turn&quot;,
	a1: &quot;goNav:bar12&quot;
};

this.bar12 = {
	text: &quot;You raise your glass and drink. It burns, but you can stand it.&quot;,
	background: &quot;litf_bg_localbar.png&quot;,
	c1: &quot;It&#39;s your turn&quot;,
	a1: &quot;goNav:bar111&quot;
};

this.bar111 = {
	text: &quot;&#39;NEXT ROUND! You&#39;re not a newbie, I see!&#39;\nThe $SPECIES_S$ raise the glass and drink the content in one gulp.&quot;,
	background: &quot;litf_bg_localbar.png&quot;,
	c1: &quot;It&#39;s my turn&quot;,
	a1: &quot;goNav:bar112&quot;
};

this.bar112 = {
	text: &quot;You raise your glass and drink...&quot;,
	background: &quot;litf_bg_localbar.png&quot;,
	c1: &quot;It&#39;s your turn&quot;,
	a1: &quot;goNav:bar1111&quot;
};

this.bar1111 = {
	text: &quot;&#39;NEXT ROUND!&#39;\nThe $SPECIES_S$ raise the glass and drink the content in one gulp.&quot;,
	background: &quot;litf_bg_localbar.png&quot;,
	c1: &quot;It&#39;s my turn...&quot;,
	a1: &quot;goNav:bar1112,bar1112,bar1112,bar1112,bar1113,bar1113&quot;
};

this.bar1112 = {
	text: &quot;You raise your glass and drink...&quot;,
	background: &quot;litf_bg_localbar.png&quot;,
	c1: &quot;It&#39;s your turn!&quot;,
	a1: &quot;goNav:bar1111,bar1111,bar1111,bar1111,bar1114,bar1114&quot;
};

this.bar1113 = {
	text: &quot;You focus on the glass... but now you see two glasses on the table. No, three glasses... dancing glasses. You move your hand but you can&#39;t take them, they always slip away. Then table becomes bigger and someone turn off the lights.\n\nYou awake in the street, outside the bar. Your rival pats you on the shoulder: &#39;You&#39;re not bad. But I won. Thanks for the money.&#39;&quot;,
	c1: &quot;...burp&quot;,
	a1: &quot;flag_drinkChallenge:1|flag_getDrunk:1|time:3600|goNav:area3_1&quot;
};

this.bar1114 = {
	text: &quot;&#39;NEXT ROUND!&#39;\nThat said, the $SPECIES_S$ collapses on the table! You raise one arm for victory while the other pilots at the table applaud you. The bet is yours. Too bad you&#39;re drunk, after all, because you can not keep your balance. The owner goes with you to the exit and gently throw you out. &#39;You can go back when you learn how to walk alone!&#39;. The door closes but you can hear the laughters from inside.&quot;,
	c1: &quot;It&#39;s ok. I won!&quot;,
	a1: &quot;flag_drinkChallenge:1|flag_getDrunk:1|credits:100|time:1800|goNav:area3_1&quot;
};

//

this.bar2 = {
	text: &quot;The $SPECIES_S$ bartender pours a glass of liquor, and you start chatting. After a bit, the bartender tells you: $GOSSIP$.&quot;,
	background: &quot;litf_bg_localbar.png&quot;,
	c1: &quot;Ok, I think it&#39;s enough for now&quot;,
	a1: &quot;time:300|goNav:bar0&quot;
};

//

this.bar3 = {
	text: &quot;The customers at the counter rejoice and take their drinks. Many begin to sing. After everyone has been drinking his glass, another commander stands up and offers another round. And you have to start over!&quot;,
	background: &quot;litf_bg_localbar.png&quot;,
	c1: &quot;Let&#39;s go, another round!&quot;,
	a1: &quot;credits:-50,-150|reputation:5|goNav:bar31&quot;,
	c2: &quot;Ok, I&#39;m out, I don&#39;t want to go too far...&quot;,
	a2: &quot;flag_offerToCounter:0|time:600|goNav:bar0&quot;
};

this.bar31 = {
	text: &quot;You have just finished your glass, when another commander stands up and offer another round! Screams of joy and new songs! The party goes on!&quot;,
	background: &quot;litf_bg_localbar.png&quot;,
	c1: &quot;Let&#39;s go, another round!&quot;,
	a1: &quot;reputation:3|goNav:bar311,bar313&quot;,
	c2: &quot;Ok, I&#39;m out, I don&#39;t want to go too far...&quot;,
	a2: &quot;flag_offerToCounter:0|time:1200|goNav:bar0&quot;
};

this.bar311 = {
	text: &quot;And this glass is empty too! You try to say something when someone offers a new round! The glasses go around the counter, and you find one in your hands. This things could never end...&quot;,
	background: &quot;litf_bg_localbar.png&quot;,
	c1: &quot;Let&#39;s go, another round...&quot;,
	a1: &quot;reputation:2|goNav:bar31,bar313&quot;,
	c2: &quot;Ok, I&#39;m out, I don&#39;t want to go too far...&quot;,
	a2: &quot;flag_offerToCounter:0|time:2400|goNav:bar0&quot;
};

this.bar313 = {
	text: &quot;You say: &#39;Another round!&#39;, but there isn&#39;t another round. And there isn&#39;t the counter anymore. You open your eyes and you&#39;re on the street. The bar is closed since an hour at least. You decide to keep sitting in your place for a while, just to clear your mind.&quot;,
	c1: &quot;Five minutes. Five minutes and then I go...&quot;,
	a1: &quot;reputation:-15|flag_getDrunk:1|time:14400|goNav:area3_1&quot;
};

////

this.art0 = {
	text: &quot;The art gallery is open to the public, and there is a good attendance. You see people conversing about the present exhibit, comparing different painting schools. You go to the entrance and read the following announcement:\n\nTHE ART GALLERY IS PROUD TO PRESENT\n\n[[ The masters of $ARTGENRE$ ]]\n\nFOR AN INDEFINITE AND EXTREMELY VARIABLE AMOUNT OF TIME\n\nAdmission price: 10cr&quot;,
    r1: &quot;credits&gt;=10&quot;,
	c1: &quot;Let&#39;s take a look&quot;,
	a1: &quot;credits:-10|flag_artGallery:1|goNav:art11,art12,art13&quot;,
	c2: &quot;Exit the Art Gallery&quot;,
	a2: &quot;goNav:area3_3&quot;
};

this.art11 = {
	text: &quot;The display was better than expected. You have been amazed by certain shapes and combinations of colors and light effects. Not bad. Really.&quot;,
	c1: &quot;Exit the Art Gallery&quot;,
	a1: &quot;time:3600|goNav:area3_3&quot;
};

this.art12 = {
	text: &quot;At the end of the visit you understand that the only impression left on you is an irresistible boring one.&quot;,
	c1: &quot;Exit the Art Gallery&quot;,
	a1: &quot;time:1200|goNav:area3_3&quot;
};

this.art13 = {
	text: &quot;&#39;What&#39;s this vileness! This is an insult to Art in every form and conception!&#39; You can&#39;t stand looking at these horrible monstrosity for another second!&quot;,
	c1: &quot;Exit the Art Gallery&quot;,
	a1: &quot;time:600|goNav:area3_3&quot;
};

////

this.cinema0 = {
	text: &quot;A robo-clerk is showing the following announcement:\n\nTONIGHT AT THE CINEMA HALL\n\nAn extended retrospective on the $MOVIEGENRE$ genre\n\n\Three movies and a debate on the history and the importance of the genre in the review of the late artistic and technologic developments.\n\nPrice for admission: 30cr&quot;,
    r1: &quot;credits&gt;=30&quot;,
	c1: &quot;I&#39;m curious to see what sort of movies are these&quot;,
	a1: &quot;credits:-30|flag_cinemaHall:1|goNav:cinema11,cinema12,cinema13&quot;,
	c2: &quot;Exit the Cinema Hall&quot;,
	a2: &quot;goNav:area3_3&quot;
};

this.cinema11 = {
	text: &quot;The movies were great and the debate was interesting. All in all it was a good show.&quot;,
	c1: &quot;Exit the Cinema Hall&quot;,
	a1: &quot;time:7200,14400|reputation:1,2|chancesick:10|goNav:area3_3&quot;
};

this.cinema12 = {
	text: &quot;You liked the movies but at the end you felt pretty tired, so you exited the building before the debate.&quot;,
	c1: &quot;Exit the Cinema Hall&quot;,
	a1: &quot;time:6000,13200|chancesick:10|goNav:area3_3&quot;
};

this.cinema13 = {
	text: &quot;You don&#39;t know what were you expecting from this show, but it hasn&#39;t been a good idea. You decided to walk out, since nobody will ever give back to you the time you passed in the Hall...&quot;,
	c1: &quot;Exit the Cinema Hall&quot;,
	a1: &quot;time:3600,7200|chancesick:10|goNav:area3_3&quot;
};

////

this.opera01 = {
	text: &quot;Near the entrance you read the following announcement:\n\nTONIGHT THE OPERA HOUSE PRESENTS\n\nThe exclusive $MUSICGENRE$ singer that will play a selection of $GENDERPOSS$ best hits.\n\nAdmission price: 20cr&quot;,
    r1: &quot;credits&gt;=20&quot;,
	c1: &quot;That&#39;s a genre of music that I didn&#39;t know existed&quot;,
	a1: &quot;credits:-20|flag_operaHouse:1|goNav:opera11,opera12,opera13&quot;,
	c2: &quot;Exit the Opera House&quot;,
	a2: &quot;goNav:area3_3&quot;
};

this.opera02 = {
	text: &quot;Near the entrance you read the following announcement:\n\nTONIGHT THE OPERA HOUSE PRESENTS\n\nThe exclusive $MUSICGENRE$ musician that will play a selection of $GENDERPOSS$ best hits.\n\nAdmission price: 20cr&quot;,
	
	r1: &quot;credits&gt;=20&quot;,
	c1: &quot;That&#39;s a genre of music that I didn&#39;t know existed&quot;,
	a1: &quot;credits:-20|flag_operaHouse:1|goNav:opera11,opera12,opera13&quot;,
	
	c2: &quot;Exit the Opera House&quot;,
	a2: &quot;goNav:area3_3&quot;
};

this.opera03 = {
	text: &quot;Near the entrance you read the following announcement:\n\nTONIGHT THE OPERA HOUSE PRESENTS\n\nThe exclusive $MUSICGENRE$ band, ready to awe the audience with the tracks from their latest album\n\nAdmission price: 20cr&quot;,
	
	r1: &quot;credits&gt;=20&quot;,
	c1: &quot;That&#39;s a genre of music that I didn&#39;t know existed&quot;,
	a1: &quot;credits:-20|flag_operaHouse:1|goNav:opera11,opera12,opera13&quot;,
	
	c2: &quot;Exit the Opera House&quot;,
	a2: &quot;goNav:area3_3&quot;
};

this.opera11 = {
	text: &quot;The performance was a success. When you exit the show, your ears are still ringing. It was a riveting experience, that allowed you to explore unknown musical landscapes. You won&#39;t forget this concert for some time.&quot;,
	c1: &quot;Exit the Opera House&quot;,
	a1: &quot;time:3600,10800|reputation:1,2|chancesick:10|goNav:area3_3&quot;
};

this.opera12 = {
	text: &quot;When you exit the show, you fail to grasp the appeal of the exhibition. You keep a vague memory of strange melodies and awkward composition, nothing worthy remembering.&quot;,
	c1: &quot;Exit the Opera House&quot;,
	a1: &quot;time:3600,10800|chancesick:10|goNav:area3_3&quot;
};

this.opera13 = {
	text: &quot;&#39;LET-ME-PASS WHAT-IS-THIS-AUDIO-TORTURE MY-EARS-ARE-BLEEDING I-HAVE-TO-GET-OUT-OF-HERE!&#39;&quot;,
	c1: &quot;Exit the Opera House&quot;,
	a1: &quot;time:300,1200|chancesick:10|goNav:area3_3&quot;
};

////

this.med0 = {
	text: &quot;The place is clean and illuminated. Everything is white. The receptionist scans you for a moment before talking: &#39;Hello Commander, we can provide you services to rid of your physiological annoyances.&#39;&quot;,
	background: &quot;litf_bg_medcenter.png&quot;,

    //r1: &quot;health&gt;0&quot;,
	c1: &quot;Wounds Treatment and Tissue Repairing&quot;,
	a1: &quot;if:health&gt;0?goNav:med1;goNav:med1_1&quot;,

    //r2: &quot;sickness&gt;0&quot;,
	c2: &quot;Virus and germs Nano disinfestation&quot;,
	a2: &quot;if:sickness&gt;0?goNav:med2;goNav:med1_1&quot;,

    //r3: &quot;flag_getDrunk=1&quot;,
	c3: &quot;Quick alcoholic purge (can generate allergic reactions)&quot;,
	a3: &quot;if:flag_getDrunk=1?goNav:med3;goNav:med3_1&quot;,

    r4: &quot;tech=hitech,maxStrength&lt;200&quot;,
    c4: &quot;Recovering Therapy&quot;,
    a4: &quot;goNav:med4&quot;,

	c5: &quot;Exit the Medical Center&quot;,
	a5: &quot;goNav:area2_2&quot;
};

this.med1 = {
	text0: &quot;tech=lowtech|&#39;Technology on this station allow us to heal only light wounds. Price for treatment is 100cr.&#39;&quot;,
	text1: &quot;tech=avgtech|&#39;Technology on this station allow us to heal serious wounds. Price for treatment is 150cr.&#39;&quot;,
	text2: &quot;tech=hitech|&#39;We can heal wounds of every type and severity. Price for treatment is 250cr.&#39;&quot;,
	background: &quot;litf_bg_medcenter.png&quot;,

    r1: &quot;paytreatment=1&quot;,
	c1: &quot;I need the treatment, now&quot;,
	a1: &quot;paytreatment:health|goNav:med0&quot;,

	c2: &quot;Thanks, I&#39;ve changed my mind&quot;,
	a2: &quot;goNav:med0&quot;
};

this.med1_1 = {
    text: &quot;After a second the receptionist says: &#39;Our analysis confirms that you have no need for our treatment. You&#39;re already enough healthy. Please come back when your conditions will be more severe. We hope to see you soon. Goodbye.&#39;&quot;,
    background: &quot;litf_bg_medcenter.png&quot;,
    c1: &quot;I don&#39;t know if I want to see you soon too...&quot;,
    a1: &quot;goNav:med0&quot;
};

this.med2 = {
	text0: &quot;tech=lowtech|&#39;Technology on this station allow us to heal only light sickness. Price for treatment is 100cr.&#39;&quot;,
	text1: &quot;tech=avgtech|&#39;Technology on this station allow us to heal serious sickness. Price for treatment is 150cr.&#39;&#39;&quot;,
	text2: &quot;tech=hitech|&#39;We can heal sickness of every type and severity. Price for treatment is 250cr.&#39;&quot;,
	background: &quot;litf_bg_medcenter.png&quot;,

    r1: &quot;paytreatment=1&quot;,
	c1: &quot;I need the treatment, now&quot;,
	a1: &quot;paytreatment:sickness|goNav:med0&quot;,

	c2: &quot;Thanks, I&#39;ve changed my mind&quot;,
	a2: &quot;goNav:med0&quot;
};

this.med3 = {
	text: &quot;&#39;The treatment is free. Please enter the purging machine and stay still untile the process is terminated.&#39;\n\nYou enter the capsule and pass the worst three minutes of the day. But the results are worthy of the annoyance - you feel your mind clear and ready.&quot;,
	background: &quot;litf_bg_medcenter.png&quot;,
	c1: &quot;I really needed this&quot;,
	a1: &quot;flag_getDrunk:0|chancesick:10|goNav:med0&quot;
};

this.med3_1 = {
    text: &quot;After a second the receptionist says: &#39;I&#39;m sorry to inform you that this treatment isn&#39;t applicable to sober people. You should come back when you&#39;re drunk to be allowed to endure the treatment. We hope to see you soon. Goodbye.&#39;&quot;,
    c1: &quot;I&#39;ll be back when I&#39;ll be drunk, then&quot;,
    a1: &quot;goNav:med0&quot;
};

this.med4 = {
    text: &quot;&#39;This treatment allow to recover the body from damage endured in time, following prolungated work or efforts of various nature. The price for treatment is 400cr. The process will last about two hours.&#39;&quot;,
    background: &quot;litf_bg_medcenter.png&quot;,
    r1: &quot;credits&gt;=400&quot;,
    c1: &quot;Yes, you can proceed&quot;,
    a1: &quot;maxStrength:250|time:7200|credits:-400|goNav:med0&quot;,
    c2: &quot;I don&#39;t think this is the right time for this...&quot;,
    a2: &quot;goNav:med0&quot;
};

////

this.hotel0 = {
    text: &quot;In the main hall you can see the robo-receptionist. Little three-wheeled droids pick and transport baggages to the guest rooms, crossing each other at high speed without crashing - it&#39;s almost a miracle.\n\nThe robo-receptionist says: &#39;Welcome, guest. I&#39;m glad to announce that we have available rooms. You can spend 6 hours in a room for 60cr in advance. A modest price, in my opinion. Do you want to take a room?&#39;&quot;,
    c1: &quot;Yes, please, I want to get some rest&quot;,
    a1: &quot;if:credits&gt;=60?goNav:hotel2;goNav:hotel1&quot;,
    c2: &quot;No, thanks&quot;,
    a2: &quot;goNav:area2_1&quot;
};

this.hotel1 = {
    text: &quot;The robo-receptionist scans you. &#39;I&#39;m sorry, but I have to cancel the booking process, as I see that you haven&#39;t the required money for the payment. Good day.&#39; After this, it turns to another guest and continue working.&quot;,
    c1: &quot;I guess they don&#39;t give credit&quot;,
    a1: &quot;goNav:hotel0&quot;
};

this.hotel2 = {
    text: &quot;The robo-receptionist instructs a droid to take you to your room. The droid seems somewhat disappointed from your lack of baggages, but runs forward to the nearest elevator. After a brief walk, the droids stop at the door of the $ROOMNUM$, and emits a high-pitched sound before going away.\n\nYou enter the room. It&#39;s clean, of an average quality that doesn&#39;t impress you. But the bed is comfortable and the bathroom has hot water. A video terminal offers you a wide selection of movies or local transmissions.&quot;,
    c1: &quot;These 6 hours won&#39;t be a problem&quot;,
    a1: &quot;credits:-60|time:21600|goNav:hotel3&quot;
};

this.hotel3 = {
    text: &quot;You hear a buzzing sound. Your booking time is ended. You leave the room and get back outside. You feel relieved and relaxed.&quot;,
    c1: &quot;It has been a nice distraction&quot;,
    a1: &quot;goNav:area2_1&quot;
}; 

////

this.wwvt0 = {
    text: &quot;The WWVT bulding resemble an amusement park, filled with neon signs and holo-videos of strange planets with extreme climates. There are pictures of big fanged predators, and plants and trees of different variety and color. A guide guarantees an authentic immersive experience, a unique virtual 4 hour safari. All of this for only 5cr.&quot;,
    c1: &quot;Let&#39;s try this virtual experience&quot;,
    a1: &quot;if:credits&gt;=5?goNav:wwvt2;goNav:wwvt1&quot;,
    c2: &quot;I&#39;m not in the mood for simulated dangerous situations&quot;,
    a2: &quot;goNav:area3_1&quot;
};

this.wwvt1 = {
    text: &quot;The ticket-droid can&#39;t give you the ticket - you haven&#39;t the 5cr, as required. No money, no entry.&quot;,
    c1: &quot;Maybe another time&quot;,
    a1: &quot;goNav:area3_1&quot;
};

this.wwvt2 = {
    text: &quot;You join a group of people, and the guide leads you into a great empty hall. &#39;Some of you have already seen or visited an holographic ambient, but I assure you this is something more. Stay ready, let&#39;s begin this voyage.&#39;\nThe lights go out, and you notice shapes and colours gradually appearing out of thin air.&quot;,
    c1: &quot;It&#39;s like another place is becoming real... with us in it&quot;,
    a1: &quot;credits:-5|goNav:wwvt2_1,wwvt2_2,wwvt2_3,wwvt2_4&quot;
};

this.wwvt2_1 = {
    text: &quot;The tour brings you on a glacial planet, covered with ice and wind-blown. You see enormous mountains and deep white abysses, furious blizzard filled of spiky ice shards, and slow armored creatures that walks without pause on the white plains. Around them other little quick creatures jump and run, sometime digging holes in the ice. The big-armored creature use a long and flexible tail to fish into the holes, and the little quick ones hide under it when the blizzard comes.&quot;,
    c1: &quot;Really an unusual experience&quot;,
    a1: &quot;time:14400|goNav:area3_1&quot;
};

this.wwvt2_2 = {
    text: &quot;The tour brings you on a desert planet. Everything still, there&#39;s no wind, no clouds in the sky, all you see is an endless sea of yellowish sand. Only after a while you notice little creatures running in the sand, almost perfectly concealed by their colors. You don&#39;t understand if they&#39;re fleeing from someone, until a huge horned head surface from the sand with a loud roar. The little runners change quickly directions and run away from the creature, picking little straws of a purple plant in the process.&quot;,
    c1: &quot;It was like I was really there&quot;,  
    a1: &quot;time:14400|goNav:area3_1&quot;
};

this.wwvt2_3 = {
    text: &quot;The tour brings you on a oceanic planet. You&#39;re in the middle of an endless sea. In the waters you see a school of thousand fishes that forms a rotating circle. Other fishes, of various size, shape another smaller circle. This strange and hypnotic ritual get interrupted by a couple of big predators that starts hunting the fishes.&quot;,
    c1: &quot;Impressing...&quot;,
    a1: &quot;time:14400|goNav:area3_1&quot;
};

this.wwvt2_4 = {
    text: &quot;The tour brings you on a jungle planet. Everything is covered in grass, with huge plants and the tallest tree you have ever seen. There are hundreds of animal calls, a symphony that walks, jump, crawl and climb the trees. The light of two suns shines over life and death circling each other, a complex and complete ecosystem untouched since thousand of years.&quot;,
    c1: &quot;It was an awesome experience, I have to admit it&quot;,  
    a1: &quot;time:14400|goNav:area3_1&quot;
};

////

this.storage0 = {
    text0: &quot;You walk towards the passage to the Storage section, where a group of workers is chatting. When they see you, they block the passage.\n&quot;,
    text1: &quot;stance&gt;-25|One of them makes a step forward and talk directly to you: &#39;Hey, this area is for authorized personnel only. This means you can&#39;t walk there, at least you get a permission, and we are the ones who can get you a one-time permission for 25cr.&#39;&quot;,
    text2: &quot;stance&lt;=-25|One of them makes a step forward, but another worker stop $GENDEROBJ$, look at you and says: &#39;The boys told me this is a friend. This commander can pass.&#39;&quot;,
    r1: &quot;stance&gt;-25&quot;,
    c1: &quot;Pay and enter the Storage section&quot;,
    a1: &quot;if:credits&gt;=25?credits:-25goNav:storage2;goNav:storage1&quot;,
    r2: &quot;stance&lt;=25&quot;,
    c2: &quot;Visit the Storage section&quot;,
    a2: &quot;goNav:storage2&quot;,
    c3: &quot;Go back to the Cargo Area&quot;,
    a3: &quot;goNav:area1_2&quot;  
};

this.storage1 = {
    text: &quot;Where is the money? This isn&#39;t enough! Get lost before we lock you in a crate of trumbles!&quot;,
    c1: &quot;Ok ok there&#39;s no need to be so angry&quot;,
    a1: &quot;goNav:area1_2&quot;
};
 
this.storage2 = {
    text: &quot;You&#39;re in the Storage section.\n\nThe cargo from ships come here once it is removed from containers. It&#39;s basically a huge warehouse filled of box and crates of various shapes and size, that creates walls and corridors and rooms.\n\nFrom here you can return to the Cargo Area.&quot;,
    background: &quot;litf_bg_storagearea.png&quot;,
    c1: &quot;Exit to the Cargo Area&quot;,
    a1: &quot;goNav:area1_2&quot;
};

////

this.plounge0 = {
    text: &quot;In the lounge, dozens of persons are fiddling with terminals trying to get a passage out of the station. A number of monitors fixed to the walls display local and extra-system news. Other screens shows data about current departing and incoming passenger flights. You can use a terminal to see if there are available contracts.&quot;,
    c1: &quot;Unfortunately there are no suitable offers&quot;,
    a1: &quot;goNav:area2_1&quot;
};

////

this.church0 = {
    text: &quot;The hall has a strange configuration: you can&#39;t say for sure, but it seems that the walls change and slides modifying the shape of the building. On the walls you see pictures from several systems. The wall opposite to the entrance shows a hooded man in an embracing pose, surrounded by shining stars. In front of this sacred picture there&#39;s an altar, and a series of benches. A soothing melody plays in the background. Everything is silent.&quot;,
    c1: &quot;This place is a little weird. Maybe I&#39;ll explore it another time&quot;,
    a1: &quot;goNav:area2_2&quot;
};

////

this.bookshop0 = {
    text: &quot;You enter into an old-style shop built with some exotic type of wood. There are many shelves full of books, volumes, tomes of every size and colour: on the cover you read titles in various languages. You see piles of books on the ground and in the corner. It&#39;s impossible to estimate the exact size of the shop - this place is like a little maze.&quot;,
    c1: &quot;There&#39;s too much dust here. I need a breath of fresh air&quot;,
    a1: &quot;goNav:area2_2&quot; 
};

////

this.museum0 = {
    text: &quot;A number of slightly fluorescent signs guide you along the suggested path, allowing you to view and examine the collection of ancient and alien artifacts kept inside safe glasses box. Everyone whispers, fearing to disturb the tranquillity of the halls.&quot;,
    c1: &quot;Visit the museum&quot;,
    a1: &quot;time:1800|goNav:museum1&quot;
};

this.museum1 = {
    text: &quot;At the end of your visit, you notice you felt impressed $MUSEUMPIECE$.\n\nYou reach the exit, where a stand ask the visitors to contribute to the museum maintenance. You can make an offer, if you want.&quot;,
    c1: &quot;Give nothing&quot;,
    a1: &quot;go:&quot;,
    
    r2: &quot;credits&gt;=1&quot;,
    c2: &quot;Give 1cr&quot;,
    a2: &quot;reputation:1|credits:-1|goNav:area3_1&quot;,
    
    r3: &quot;credits&gt;=10&quot;,
    c3: &quot;Give 10cr&quot;,
    a3: &quot;reputation:5|credits:-10|goNav:area3_1&quot;,
    
    r4: &quot;credits&gt;=100&quot;,
    c4: &quot;Give 100cr&quot;,
    a4: &quot;reputation:50|credits:-100|goNav:area3_1&quot;,
    
    r5: &quot;credits&gt;=1000&quot;,
    c5: &quot;Give 1000cr&quot;,
    a5: &quot;reputation:500|credits:-1000|goNav:area3_1&quot;,
};    

////

/*
this.fit0 = {
    text: &quot;You walk to the reception, where a droid informs you that an unspecified malfunction prevents the Universal Fitness Badge validation. The center is closed until the situation will be fixed.&quot;,
    c1: &quot;That&#39;s a pity. I&#39;ll try again in the future&quot;,
    a1: &quot;goNav:area3_2&quot;
};
*/

this.fit0 = {
    text0: &quot;You walk to the reception, where a droids greets you.\n&quot;,
    text1: &quot;checkFitBadge=0|The droid tries to scan something and then says: &#39;I see you aren&#39;t in possession of an Universal Fitness Badge. You need one to spend time in Fit Centers like this. You get a monthly subscription with it, for 15cr.&#39;&quot;,
    //text2: &quot;checkFitBadge=1|&#39;I see that your subscription is expired. Do you want to renew it for 10cr?&#39;&quot;,
    text2: &quot;checkFitBadge=1|The droid scans the badge and then says: &#39;Sorry, it seems the expiration date is passed. You need to renew your subscription to continue using the Fit Center machinery. It will cost you 10cr for another month.&#39;&quot;,
    text3: &quot;checkFitBadge=2|The droid scans the badge and then says: &#39;Your subscription is still valid. You can proceed to the Health Validation Room. Good day&quot;,
    
    r1: &quot;checkFitBadge=0&quot;,
    c1: &quot;Ok, I&#39;ll subscribe&quot;,
    a1: &quot;goNav:fit1_1&quot;,

    r2: &quot;checkFitBadge=1&quot;,
    c2: &quot;Ok, I&#39;ll renew the subscription&quot;,
    a2: &quot;goNav:fit1_2&quot;,

    r3: &quot;checkFitBadge=2&quot;,
    c3: &quot;Enter the Health Validation Room&quot;,
    a3: &quot;goNav:fit2&quot;,

    c4: &quot;Maybe another time&quot;,
    a4: &quot;goNav:area3_2&quot;
};

this.fit1_1 = {
    text0: &quot;credits&gt;=15|&#39;Here it is your new badge. You have free access to any Fit Center for an entire month. You can proceed to the Health Validation Room now. Good day.&#39;&quot;,
    text1: &quot;credits&lt;15|&#39;It seems that you don&#39;t own the required money for buying the Universal Fitness Badge. I suggest you to return with the required sum. Good day.&#39;&quot;,

    r1: &quot;credits&gt;=15&quot;,
    c1: &quot;Enter the Health Validation Room&quot;,
    a1: &quot;credits:-15|writeTime:fitBadge_2592000|goNav:fit2&quot;,
    
    c2: &quot;Thanks for the badge. See you later&quot;,
    a2: &quot;credits:-15|writeTime:fitBadge_2592000|goNav:area3_2&quot;
};

this.fit1_2 = {
    text0: &quot;credits&gt;=10|&#39;I have just renewed you subscription for another month. You can proceed to the Health Validation Room now. Good day.&#39;&quot;,
    text1: &quot;credits&lt;10|&#39;It seems that you don&#39;t own the required money for buying the Universal Fitness Badge. I suggest you to return with the required sum. Good day.&#39;&quot;,

    r1: &quot;credits&gt;=10&quot;,
    c1: &quot;Enter the Health Validation Room&quot;,
    a1: &quot;credits:-10|writeTime:fitBadge_2592000|goNav:fit2&quot;,

    c2: &quot;Thanks for renewing my subscription. See you later&quot;,
    a2: &quot;credits:-10|writeTime:fitBadge_2592000|goNav:area3_2&quot;
};

this.fit2 = {
    text0: &quot;A couple of robo-docs makes some examination while producing a series of bips in various tones. After a couple of minutes they give you their response:\n&quot;,
    text1: &quot;health&gt;0|&#39;Negative: You&#39;re wounded. You can&#39;t access the gym in this conditions.&#39;\n&quot;,
    text2: &quot;sickness&gt;0|&#39;Negative: You&#39;re sick. You can&#39;t access the gym in this conditions.&#39;\n&quot;,
    text3: &quot;maxstrength&lt;100|&#39;Negative: Your body has endured too much damage.  You can&#39;t access the gym in this conditions. We suggest you get a recovering therapy from a Medical Center - this feature is available only on hi-tech systems.&#39;&quot;,
    text4: &quot;health=0,sickness=0,maxstrength&gt;=100|&#39;Positive: you can access the gym. Good day.&#39;&quot;,

    r1: &quot;health=0,sickness=0,maxstrength&gt;=100&quot;,
    c1: &quot;Enter the gym&quot;,
    a1: &quot;goNav:fit3&quot;,
    
    c2: &quot;I changed idea. Goodbye&quot;,
    a2: &quot;goNav:area3_2&quot;    
};

this.fit3 = {
    text: &quot;This building is comprised of various floors, and is full of gym machinery for every type of exercise and every type of alien race.&quot;,
    c1: &quot;Start exercising&quot;,
    a1: &quot;if:fitDamageChance&lt;=50?goNav:fit3_1;fit3_2&quot;,

    c2: &quot;I changed idea. Maybe another time&quot;,
    a2: &quot;goNav:area3_2&quot;
};

this.fit3_1 = {    
    text: &quot;At the end of your training period you have a shower. You feel tired but somewhat relaxed, and your body feels a little more tonic.&quot;,
    c1: &quot;Exit the Fit Center&quot;,
    a1: &quot;time:3600|strength:10,40|checkFitDamage:1|writeTime:lastFitSession_0|goNav:area3_2&quot;
};

this.fit3_2 = {
    text: &quot;While you&#39;re exercising, you feel an acute pain that makes you cringe and almost scream. Other people in the gym run to you, and call for help. Preliminary medical scans show that you hurt yourself: you can&#39;t continue exercising until you get healed.&quot;,
    c1: &quot;Exit the Fit Center&quot;,
    a1: &quot;time:1800|fitDamage:1|writeTime:lastFitSession_0|goNav:area3_2&quot;
};</pre></td>
                </tr>
                <tr>
                    <td valign="top">Scripts/LITF_RPGElements.js</td>
                    <td><pre>&quot;use strict&quot;;

this.name	= &quot;LITF_RPGElements&quot;;
this.author	= &quot;BeeTLe BeTHLeHeM&quot;;
this.copyright	= &quot;2015 BeeTLe BeTHLeHeM&quot;;
this.description= &quot;Life In The Frontier - RPG Elements&quot;;
this.licence	= &quot;CC BY-NC-SA 4.0&quot;;

///////////////////////////////////////

this.LITF_reputationDesc = [ &quot;Unknown&quot;, &quot;Barely Known&quot;, &quot;Recognized&quot;, &quot;Well-Known&quot;, &quot;Largely Known&quot;, &quot;Widely Known&quot;, &quot;Prestigious&quot;, &quot;Famous&quot;, &quot;Popular&quot;, &quot;Acclaimed&quot;, &quot;Renowned&quot;, &quot;Legendary&quot; ];

this.LITF_strengthDesc = [ &quot;Very poor&quot;, &quot;Poor&quot;, &quot;Average&quot;, &quot;Good&quot;, &quot;Excellent&quot; ];

this.LITF_healthShort = [ &quot;None&quot;, &quot;Slight&quot;, &quot;Medium&quot;, &quot;Serious&quot;, &quot;Severe&quot;, &quot;Critical&quot; ];
this.LITF_sicknessShort = [ &quot;Excellent&quot;, &quot;Good&quot;, &quot;Average&quot;, &quot;Weak&quot;, &quot;Severe&quot;, &quot;Critical&quot; ];

///////////////////////////////////////

this.$getReputationLevel = function(rep) {
	var repLev = 0;

	while (rep &gt; (Math.pow(2, repLev) * 200)) {
		repLev++;
	}

	return repLev;
};


this.$getReputationFromValue = function(rep) {
	var repLev = this.$getReputationLevel(rep);
	return this.LITF_reputationDesc[repLev];
};


this.$getStrengthLevel = function(str) {
	var strLev = 0;

	while (str &gt; (Math.pow(2, strLev) * 100)) {
		strLev++;
	}

	return strLev;
};


this.$getStrengthFromValue = function(str) {
	var strLev = this.$getStrengthLevel(str);
	return this.LITF_strengthDesc[strLev];
};


this.$getStanceFromValue = function(sta) {
	var desc = &quot;&quot;;

	if (sta == 0) { desc = &quot;absolutely neutral&quot;; }

	if (sta &lt; 5 &amp;&amp; sta &gt; -5) { desc = &quot;generally neutral&quot;; }

	if (sta &gt;= 5) { desc = &quot;sympathetic with GalCop&quot;; }
	if (sta &gt;= 25) { desc = &quot;friendly with GalCop&quot;; }
	if (sta &gt;= 75) { desc = &quot;loyal with GalCop&quot;; }
	if (sta &gt;= 200) { desc = &quot;sworn to act along the rules of GalCop&quot;; }

	if (sta &lt;= -5) { desc = &quot;sympathetic with criminals&quot;; }
	if (sta &lt;= -25) { desc = &quot;friendly with criminals&quot;; }
	if (sta &lt;= -75) { desc = &quot;loyal with criminals&quot;; }
	if (sta &lt;= -200) { desc = &quot;respectful of the laws of the criminal underworld&quot;; }

	return desc;
};


this.$getHealthFromValue = function(hea) {
	var heaDesc = &quot;&quot;;

	switch (hea) {
		case 0: 
			heaDesc = &quot;&quot;;
			break;
		case 1: 
			heaDesc = &quot;You have some bruises and scratches.&quot;;
			break;
		case 2:
			heaDesc = &quot;You are slightly wounded.&quot;;
			break;
		case 3:
			heaDesc = &quot;You are wounded.&quot;;
			break;
		case 4:
			heaDesc = &quot;You are severely wounded.&quot;;
			break;
		case 5: 
			heaDesc = &quot;Your health condition is critical!&quot;;
			break;
	}

	return heaDesc;
};


this.$getSicknessFromValue = function(sic) {
	var sicDesc = &quot;&quot;;

	switch (sic) {
		case 0: 
			sicDesc = &quot;&quot;;
			break;
		case 1: 
			sicDesc = &quot;You feel uneasy.&quot;;
			break;
		case 2:
			sicDesc = &quot;You cough, sneeze and feel chills all over your body.&quot;;
			break;
		case 3:
			sicDesc = &quot;You feel a strong nausea.&quot;;
			break;
		case 4:
			sicDesc = &quot;You feel tired and can&#39;t think straight.&quot;;
			break;
		case 5: 
			sicDesc = &quot;You feel burning inside. You&#39;re delirious.&quot;;
			break;
	}

	return sicDesc;
};
</pre></td>
                </tr>
                <tr>
                    <td valign="top">Scripts/LITF_RandomEvents.js</td>
                    <td><pre>&quot;use strict&quot;;

this.name	= &quot;LITF_RandomEvents&quot;;
this.author	= &quot;BeeTLe BeTHLeHeM&quot;;
this.copyright	= &quot;2015 BeeTLe BeTHLeHeM&quot;;
this.description= &quot;Life In The Frontier - RandomEvents&quot;;
this.licence	= &quot;CC BY-NC-SA 4.0&quot;;

///////////////////////////////////////

var LITF_reLabel = &quot;&quot;;

this.LITF_destPlace = &quot;&quot;;

this.$randomEvent = function(dPlace) {
	this.resumeLog = &quot;&quot;;
	this.$fireEvent();

	this.LITF_destPlace = dPlace;
};


this.$fireEvent = function(eLabel) {
	var _co = worldScripts.LITF_Common;

	var eTitle = &quot;SOMETHING HAPPENS&quot;;

	var reLabel = this.$chooseRandomEvent(eLabel);
	LITF_reLabel = reLabel;
	_co.$log(&quot;[fireEvent] reLabel = &quot; + LITF_reLabel);

	var rEvent = eval(&quot;worldScripts.LITF_EventsCatalog.&quot; + reLabel + &quot;;&quot;);
	_co.$log(&quot;[fireEvent] event text = &quot; + rEvent.text);

	var reChoices = _co.$extractChoices(rEvent);

	mission.runScreen(
		{
			title: eTitle, 
			message: _co.$replaceConstants(rEvent.text),
			choices: reChoices 
		},
		this.$selectChoice
	);

	_co.$screenBackground(rEvent.background);
};


this.$chooseRandomEvent = function(eLabel) {
	var _co = worldScripts.LITF_Common;

	var reLabel = &quot;&quot;;

	if (eLabel == undefined || eLabel == &quot;&quot;) {
		var totEvents = 30;

		var validEvent = 0;
		while (validEvent == 0) {
			var eIdx = Math.floor(Math.random() * totEvents) + 1;
			reLabel = &quot;rand&quot; + eIdx;			

			// Validate the event
			validEvent = this.$eventCheck(reLabel);
		}
	} else {
		// Specific event
		reLabel = eLabel;
	}
	
	_co.$log(&quot;[chooseRandomEvent] reLabel = &quot; + reLabel);

	return reLabel;
};


this.$eventCheck = function(reLabel) {
	var _co = worldScripts.LITF_Common;

	var actionData = eval(&quot;worldScripts.LITF_EventsCatalog.&quot; + reLabel);
	
	if (actionData.requires) {
		var checkSplit = actionData.requires.split(&quot;|&quot;);
		for (var i = 0; i &lt; checkSplit.length; i++) {
			var check = checkSplit[i];

			var items = check.split(&quot;,&quot;);
			for (var i = 0; i &lt; items.length; i++) {

				_co.$log(&quot;[eventCheck] checking = &quot; + items[i]);

				var checkItems = items[i].split(&quot;:&quot;);
				//var valid = _co.$checkRequirements(checkItems);
                var valid = _co.$checkRequirements(items[i]);
				if (valid == 0) { 
					return 0; 
				}
			}
		}
	}
		
	return 1;
};


this.$selectChoice = function(choice) {
	var _co = worldScripts.LITF_Common;

	if (choice == null || choice == &quot;null&quot;) { return; }
	_co.$log(&quot;[selectChoice] choice = &quot; + choice);

	var action = choice.replace(&#39;c&#39;, &#39;a&#39;);
	_co.$log(&quot;[selectChoice] action = &quot; + action);

	// Retrieve the associate actions

	var actionData = eval(&quot;worldScripts.LITF_EventsCatalog.&quot; + LITF_reLabel + &quot;.&quot; + action);

    _co.$executeActions(actionData);

    /*
	var actionsSplit = actionData.split(&quot;|&quot;);
	
	// Iterate, parse and execute the actions

	for (var i = 0; i &lt; actionsSplit.length; i++) {
		var action = actionsSplit[i];

        _co.$executeAction(action);
	}
	*/
};

this.$resetVars = function() {
	var _litf = worldScripts.LITF;

	//this.resumeLog = &quot;&quot;;

	_litf.LITF_varStore[&quot;SPECIES_S&quot;] = &quot;&quot;;
	_litf.LITF_varStore[&quot;SPECIES_P&quot;] = &quot;&quot;;
	_litf.LITF_varStore[&quot;GENDER&quot;] = [];
	_litf.LITF_varStore[&quot;COMMODITY&quot;] = &quot;&quot;;

	//this.LITF_eventTitle = &quot;&quot;;
};
</pre></td>
                </tr>
                <tr>
                    <td valign="top">Scripts/LifeInTheFrontier.js</td>
                    <td><pre>&quot;use strict&quot;;

this.name	= &quot;LITF&quot;;
this.author	= &quot;BeeTLe BeTHLeHeM&quot;;
this.copyright	= &quot;2015 BeeTLe BeTHLeHeM&quot;;
this.description= &quot;An attempt to provide more roleplaying environment on space stations: the player can get a casual event, that could bring an advantage or a risk, a reward or a trouble.&quot;;
this.licence	= &quot;CC BY-NC-SA 4.0&quot;;

///////////////////////////////////////

this.startUp = function() {
	var _co = worldScripts.LITF_Common;

	this.LITF_cmdStats = {};
	this.LITF_flags = {};

    // Clean obsolete variables //
    
    if (missionVariables.LITF_init) { missionVariables.LITF_init = null; }

    // Clean inactive variables //

    if (missionVariables.LITF_lastGymDay) { missionVariables.LITF_lastGymDay = null; }
    if (missionVariables.LITF_enableContractor) { missionVariables.LITF_enableContractor = null; }
    if (missionVariables.LITF_enableMission) { missionVariables.LITF_enableMission = null; }
    if (missionVariables.LITF_contractorData) { missionVariables.LITF_contractorData = null; }
    if (missionVariables.LITF_missionData) { missionVariables.LITF_missionData = null; }

    // Init legit variables //

    // Commander Stats
    this.$loadCommanderStats();

    // Flags
    this.$loadOXPFlags();
    
    /*
    // Other commander related data
    if (missionVariables.LITF_lastGymDay) {
        this.LITF_lastGymDay = missionVariables.LITF_lastGymDay;
    } else {
        this.LITF_lastGymDay = &quot;&quot;;
    }

    if (missionVariables.LITF_enableContractor) {
        this.LITF_enableContractor = missionVariables.LITF_enableContractor;
    } else {
        this.LITF_enableContractor = 0;
    }

    if (missionVariables.LITF_enableMission) {
        this.LITF_enableMission = missionVariables.LITF_enableMission;
    } else {
        this.LITF_enableMission = 0;
    }

    if (missionVariables.LITF_contractorData) {
        this.LITF_contractorData = missionVariables.LITF_contractorData;
    } else {
        this.LITF_contractorData = &quot;&quot;;
    }

    if (missionVariables.LITF_missionData) {
        this.LITF_missionData = missionVariables.LITF_missionData;
    } else {
        this.LITF_missionData = &quot;&quot;;
    }
    */
        
    ////////

	// Store OXP inner variables
	this.LITF_varStore = {};
	
	// Settings //
	this.LITF_logger = 0;

    _co.$log(&quot;[startUp] [[[ LIFE IN THE FRONTIER v&quot; + this.version + &quot; ]]]&quot;);
};

this.startUpComplete = function() {
	this.setInterface();
}

this.$loadOXPFlags = function() {
    var mvOXPFlagsArr = missionVariables.LITF_flagArr;

    if (!mvOXPFlagsArr || mvOXPFlagsArr.indexOf(&quot;map:&quot;) == -1) {
        this.LITF_flags = {
            getDrunk: 0,
            drinkChallenge: 0,
            chatBartender: 0,
            offerToCounter: 0,
            artGallery: 0,
            cinemaHall: 0,
            operaHouse: 0,
            defacedShip: 0,
            fitBadge: -1,
            lastFitSession: -1,
            fitDamageChance: 0,
            maxStrength: 2000
        };
    } else {
        mvOXPFlagsArr = mvOXPFlagsArr.substring(4);
        var OXPFlagsMap = mvOXPFlagsArr.split(&quot;,&quot;); // array of items
        for (var c = 0; c &lt; OXPFlagsMap.length; c++) {
            var OXPFlagsItem = OXPFlagsMap[c].split(&quot;=&quot;); // param=value
            
            var vartype = OXPFlagsItem[0].substring(0, 1);
            var varname = OXPFlagsItem[0].substring(1);

            if (vartype = &quot;S&quot;) {
                this.LITF_flags[varname] = OXPFlagsItem[1];
            } else if (vartype = &quot;N&quot;) {
                this.LITF_flags[varname] = parseInt(OXPFlagsItem[1]);
            }
            
            /*
            if (OXPFlagsItem[0] == &quot;fitBadge&quot; || OXPFlagsItem[0] == &quot;lastFitSession&quot;) {
                this.LITF_flags[OXPFlagsItem[0]] = OXPFlagsItem[1];
            } else {
                this.LITF_flags[OXPFlagsItem[0]] = parseInt(OXPFlagsItem[1]);
            }*/
        }
    }
};

this.$loadCommanderStats = function() {
    var mvCmdStatsArr = missionVariables.LITF_cmdStatsArr;
    
    if (!mvCmdStatsArr || mvCmdStatsArr.indexOf(&quot;map:&quot;) == -1) {
        this.LITF_cmdStats = {
            reputation: 0,
            health: 0,
            sickness: 0,
            strength: 200,
            stance: 0
        };
    } else {
        mvCmdStatsArr = mvCmdStatsArr.substring(4);
        var cmdStatsMap = mvCmdStatsArr.split(&quot;,&quot;); // array of items
        for (var c = 0; c &lt; cmdStatsMap.length; c++) {
            var cmdStatsItem = cmdStatsMap[c].split(&quot;=&quot;); // param=value
            
            this.LITF_cmdStats[cmdStatsItem[0]] = parseInt(cmdStatsItem[1]);
        }
    }
};

this.$saveCommanderStats = function() {
    var cmdStats = &quot;map:reputation=&quot; + this.LITF_cmdStats.reputation 
        + &quot;,health=&quot; + this.LITF_cmdStats.health 
        + &quot;,sickness=&quot; + this.LITF_cmdStats.sickness 
        + &quot;,strength=&quot; + this.LITF_cmdStats.strength 
        + &quot;,stance=&quot; + this.LITF_cmdStats.stance;
        
    missionVariables.LITF_cmdStatsArr = cmdStats;
};


this.$saveOXPFlags = function() {
    var flags = &quot;map:&quot;
        +  &quot;NgetDrunk=&quot; + this.LITF_flags.getDrunk 
        + &quot;,NdrinkChallenge=&quot; + this.LITF_flags.drinkChallenge 
        + &quot;,NchatBartender=&quot; + this.LITF_flags.chatBartender 
        + &quot;,NofferToCounter=&quot; + this.LITF_flags.offerToCounter 
        + &quot;,NartGallery=&quot; + this.LITF_flags.artGallery 
        + &quot;,NcinemaHall=&quot; + this.LITF_flags.cinemaHall 
        + &quot;,NoperaHouse=&quot; + this.LITF_flags.operaHouse 
        + &quot;,NdefacedShip=&quot; + this.LITF_flags.defacedShip
        + &quot;,NfitBadge=&quot; + this.LITF_flags.fitBadge
        + &quot;,NlastFitSession=&quot; + this.LITF_flags.lastFitSession
        + &quot;,NfitDamageChance=&quot; + this.LITF_flags.fitDamageChance
        + &quot;,NmaxStrength=&quot; + this.LITF_flags.maxStrength;
        
    missionVariables.LITF_flagsArr = flags;
};

this.playerWillSaveGame = function() {
	// Store variables in savegame

    //missionVariables.LITF_lastGymDay = this.LITF_lastGymDay;
    //missionVariables.LITF_enableContractor = this.LITF_enableContractor;
    //missionVariables.LITF_enableMission = this.LITF_enableMission;
    //missionVariables.LITF_contractorData = this.LITF_contractorData;
    //missionVariables.LITF_missionData = this.LITF_missionData;

	// Commander stats
    this.$saveCommanderStats();

	// Flags
	this.$saveOXPFlags();
};


this.shipWillDockWithStation = function(station) {
	//this.LITF_enableContractor = 0;

    if (this.LITF_varStore[&quot;ARTGENRE&quot;]) { this.LITF_varStore[&quot;ARTGENRE&quot;] = null; }
	if (this.LITF_varStore[&quot;MUSICGENRE&quot;]) { this.LITF_varStore[&quot;MUSICGENRE&quot;] = null; }
	if (this.LITF_varStore[&quot;MOVIEGENRE&quot;]) { this.LITF_varStore[&quot;MOVIEGENRE&quot;] = null; }

	// Flags
	this.LITF_flags.getDrunk = 0;
	this.LITF_flags.drinkChallenge = 0;
	this.LITF_flags.chatBartender = 0;
	this.LITF_flags.offerToCounter = 0;
	this.LITF_flags.artGallery = 0;
	this.LITF_flags.cinemaHall = 0;
	this.LITF_flags.operaHouse = 0;

    this.LITF_flags.defacedShip = 0;
};


this.shipDockedWithStation = function() {
	//worldScripts.LITF_Mission.$checkForContractor();
	//worldScripts.LITF_Mission.$checkForMission();

	this.$healthManagement();
	
	this.$checkLastFitSession();

	this.setInterface();
};


this.setInterface = function() {
	player.ship.dockedStation.setInterface(&quot;LITF_hangarScreen&quot;, 
		{
			title: &quot;Disembark from your ship&quot;,
			category: &quot;Activity&quot;,
			summary: &quot;Visit the station&quot;,
			callback: this.$enterStation.bind(this) 
		}
	);
};


///////////////////////////////////////

this.$checkLastFitSession = function() {
    var lfs = this.LITF_flags.lastFitSession;
    if (lfs &gt; -1) {
        var diff = clock.seconds - lfs;
        if (diff &gt; 604800) {
            // More than a week from the last fit session
            this.LITF_cmdStats.strength -= _co.$randomValue(5, 10);
            if (this.LITF_cmdStats.strength &lt; 0) { this.LITF_cmdStats.strength = 0; }
        }
    }
};

this.$healthManagement = function() {
	var chance;

	// Rule 1 - If player sickness &gt; 1, every time he docks on a station 
	//          there&#39;s a 10% chance of worsening (+1).

	chance = Math.floor(Math.random() * 100) + 1;
	if (this.LITF_cmdStats.sickness &gt; 1 &amp;&amp; chance &lt; 10) {
		this.LITF_cmdStats.sickness += 1;
	}

	// Rule 2 - If player sickness = 1, every time he docks on a station 
	//          there&#39;s a 10% chance of healing (sickness = 0)

	chance = Math.floor(Math.random() * 100) + 1;
	if (this.LITF_cmdStats.sickness == 1 &amp;&amp; chance &lt; 10) {
		this.LITF_cmdStats.sickness = 0;
	}

	// Rule 3 - If player health = 1, every time he docks on a station 
	//          there&#39;s a 10% chance of healing (health = 0)

	chance = Math.floor(Math.random() * 100) + 1;
	if (this.LITF_cmdStats.health == 1 &amp;&amp; chance &lt; 10) {
		this.LITF_cmdStats.health = 0;
	}

	// Rule 4 - If player health &gt; 1, every time he docks on a station 
	//          there&#39;s a 10% chance of worsening (+1).

	chance = Math.floor(Math.random() * 100) + 1;
	if (this.LITF_cmdStats.health &gt; 1 &amp;&amp; chance &lt; 10) {
		this.LITF_cmdStats.health += 1;
	}

	// Rule 5 - If player health &gt; 2 and sickness &lt; 2, every time he docks on a station 
	//          there&#39;s a 10% chance of generating infections (sickness +1)

	chance = Math.floor(Math.random() * 100) + 1;
	if (this.LITF_cmdStats.health &gt; 2 &amp;&amp; this.LITF_cmdStats.sickness &lt; 2 &amp;&amp; chance &lt; 10) {
		this.LITF_cmdStats.sickness += 1;
	}

	// Rule 6 - If player health &gt; 2 or player sickness &gt; 2 
	//          there&#39;s a chance of 10% of reducing physical shape 

	chance = Math.floor(Math.random() * 100) + 1;
	if ((this.LITF_cmdStats.health &gt; 2 || this.LITF_cmdStats.sickness &gt; 2) &amp;&amp; chance &lt; 10) {
		var decay = Math.floor(Math.random() * 10) + 1;

		this.LITF_cmdStats.strength -= decay;
		if (this.LITF_cmdStats.strength &lt; 10) {
			this.LITF_cmdStats.strength = 10;
		}
	}
};


this.$enterStation = function() {
    var _nav = worldScripts.LITF_Navigation; 
    _nav.$startNavigation();
};

</pre></td>
                </tr>
            </table>
        </a>
    </body>
</html>
