<html>
    <head>
        <title>Expansion Explorers&#39; Club</title>
        <link rel="stylesheet" href="../style.css">
    </head>
    <body>
        <table border="0" width="100%">
            <tr>
                <td>Back to <a href='../index.html'>Index</a></td>
                <td align="right"><small>Page generated: Oct 11, 2023, 3:16:48 PM</small></td>
            </tr>
        </table>

        <h1>Expansion Explorers&#39; Club</h1>

        <h2>Content</h2>
        <ul>
          <li><a href="#warnings">Warnings</a></li>
          <li><a href="#manifest">Manifest</a></li>
          <li><a href="#documentation">Documentation</a></li>
          <li><a href="#equipment">0 Equipment</a></li>
          <li><a href="#ships">0 Ships</a></li>
          <li><a href="#models">0 Models</a></li>
          <li><a href="#scripts">1 Scripts</a></li>
        </ul>

          <a name="warnings">
            <h2>Warnings</h2>
            <ol>
                <li>Tags mismatch between OXP Manifest and Expansion Manager at character position 0002 (RIGHT SQUARE BRACKET vs LATIN SMALL LETTER C)(&#39;[]&#39; vs &#39;[charts]&#39;)</li>
            </ol>
          </a>

        <a name="manifest">
        <h2>Manifest</h2>
            <table border="1">
                <tr>
                    <th></th>
                    <th>from Expansion Manager's OXP list</th>
                    <th>from Expansion Manifest</th>
                </tr>
                <tr>
                    <td>Description</td>
                    <td>Keeps a record of all the systems you visit and gives you an explorer rank. Lets you view your exploration achievements and provides a special Explorers’ Club long-range navigation chart.</td>
                    <td>Keeps a record of all the systems you visit and gives you an explorer rank. Lets you view your exploration achievements and provides a special Explorers’ Club long-range navigation chart.</td>
                </tr>
                <tr>
                    <td>Identifier</td>
                    <td>oolite.oxp.CaptMurphy.ExplorersClub</td>
                    <td>oolite.oxp.CaptMurphy.ExplorersClub</td>
                </tr>
                <tr>
                    <td>Title</td>
                    <td>Explorers&#39; Club</td>
                    <td>Explorers&#39; Club</td>
                </tr>
                <tr>
                    <td>Category</td>
                    <td>Activities</td>
                    <td>Activities</td>
                </tr>
                <tr>
                    <td>Author</td>
                    <td>Capt. Murphy &amp; Wildeblood</td>
                    <td>Capt. Murphy &amp; Wildeblood</td>
                </tr>
                <tr>
                    <td>Version</td>
                    <td>1.4.4</td>
                    <td>1.4.4</td>
                </tr>
                <tr>
                    <td>Tags</td>
                    <td></td>
                    <td>charts</td>
                </tr>
                <tr>
                    <td>Required Oolite Version</td>
                    <td></td>
                    <td></td>
                </tr>
                <tr>
                    <td>Maximum Oolite Version</td>
                    <td></td>
                    <td></td>
                </tr>
                <tr>
                    <td>Required Expansions</td>
                    <td>
                    </td>
                    <td>
                    </td>
                </tr>
                <tr>
                    <td>Optional Expansions</td>
                    <td>
                    </td>
                    <td>
                    </td>
                </tr>
                <tr>
                    <td>Conflict Expansions</td>
                    <td>
                    </td>
                    <td>
                    </td>
                </tr>
                <tr>
                    <td>Information URL</td>
                    <td><a target="_blank" href="http://wiki.alioth.net/index.php/Explorers%27_Club_OXP">http://wiki.alioth.net/index.php/Explorers%27_Club_OXP</a></td>
                    <td><a target="_blank" href="">n/a</a></td>
                </tr>
                <tr>
                    <td>Download URL</td>
                    <td><a target="_blank" href="https://wiki.alioth.net/img_auth.php/5/55/Explorers_Club_1.4.4.oxz">https://wiki.alioth.net/img_auth.php/5/55/Explorers_Club_1.4.4.oxz</a></td>
                    <td><a target="_blank" href="Explorers_Club_1.4.4.oxz">Explorers_Club_1.4.4.oxz</a></td>
                </tr>
                <tr>
                    <td>License</td>
                    <td>CC-BY-NC-SA 3.0</td>
                    <td>CC-BY-NC-SA 3.0</td>
                </tr>
                <tr>
                    <td>File Size</td>
                    <td>n/a</td>
                </tr>
                <tr>
                    <td>Upload date</td>
                    <td>1610873301</td>
                </tr>
            </table>
                </a>

        <a name="documentation">
        <h2>Documentation</h2>
        <p>Also read <a href='http://wiki.alioth.net/index.php/Explorers&#39;%20Club'>http://wiki.alioth.net/index.php/Explorers&#39;%20Club</a></p>
        <h3>New readme.rtf</h3>
        <pre>{\rtf1\ansi\ansicpg1252\deff0\nouicompat\deflang2057\deflangfe2057{\fonttbl{\f0\fswiss\fprq2\fcharset0 Arial;}{\f1\froman\fprq2\fcharset2 Symbol;}}
{\colortbl ;\red0\green0\blue255;}
{\*\generator Riched20 6.3.9600}\viewkind4\uc1 
\pard\nowidctlpar\f0\fs20 Explorers\rquote  Club OXP  ver. 1.4.4\par
Last updated on 19th August, 2014\par
\par
Code by Capt Murphy, 2011-2012, &amp; Wildeblood, 2013-2014\par

\pard Licence: CC BY-NC-SA 3.0 : Please visit {{\field{\*\fldinst{HYPERLINK http://creativecommons.org/licenses/by-nc-sa/3.0/ }}{\fldrslt{http://creativecommons.org/licenses/by-nc-sa/3.0/\ul0\cf0}}}}\f0\fs20  for more info.\par
Requires Oolite 1.80\par
\par
Overview: \par
\par
Once installed this OXP keeps track of unique systems visited and reports on the manifest screen (F5, F5) the total systems visited out of 256 in the current chart and the total systems visited out of 2048 in the whole Ooniverse. It also displays an Explorer \lquote rank\rquote . You need to visit all 2048 systems to be ranked an Elite Explorer.\par
\par
In addition this OXP adds some functionality to the Long Range Chart (F6, F6) in that it can be set to different modes. To access the options go to the Interfaces screen (F4) when docked. The available options are:\par
\par

\pard\nowidctlpar\fi-360\li720\tx720 1)\tab Default - standard long range chart behaviour.\par

\pard\nowidctlpar\fi-360\li720 2)\tab Long range chart shows animation of systems visited to date, in order of first visit.\par
3)\tab Long range chart marks unvisited systems.\par

\pard\nowidctlpar\par
The options screen also allows you to choose when a system is recorded as visited. The options are.\par
\par

\pard\nowidctlpar\fi-360\li720\tx720 1)\tab Default \endash  when docked at the main station.\par

\pard\nowidctlpar\fi-360\li720 2)\tab Immediately on arrival from witch-space.\par
3)\tab When reaching the planet&#39;s surface.\par

\pard\nowidctlpar\par
Options are persistent between sessions with the same saved game.\par
\par
The options screen also gives access to two further sets of mission screens.\par
\par

\pard\nowidctlpar\fi-360\li720\tx720 1)\tab Displays a list of the system names that have been visited so far in the current Galaxy, followed by a list of the system names that are yet to be visited in the current galaxy.\par

\pard\nowidctlpar\fi-360\li720 2)\tab Displays a list of mile-stones that the player has completed, or not completed, so far. Defined mile-stones are:\par

\pard\nowidctlpar\li360\par

\pard\nowidctlpar\fi-360\li1440\tx1440\f1\&#39;b7\tab\f0 Visited all of the \lquote Old Worlds\rquote  in galaxy 1.\par

\pard\nowidctlpar\fi-360\li1440\f1\&#39;b7\tab\f0 Visited all of the \lquote Famous Planets\rquote  in galaxy 1 (as per OXP of same name).\par
\f1\&#39;b7\tab\f0 Visited all of the \lquote Famous Planets\rquote  in galaxy 2 (as per OXP of same name).\par
\f1\&#39;b7\tab\f0 Visited the \lquote Prodigal Suns\rquote  in galaxy 3.\par
\f1\&#39;b7\tab\f0 Visited the \lquote Lost Worlds\rquote  in galaxy 6.\par
\f1\&#39;b7\tab\f0 Visited the systems beyond the \lquote Great Rift\rquote  in galaxy 7.\par
\f1\&#39;b7\tab\f0 Visited Oresrati in galaxy 8.\par
\f1\&#39;b7\tab\f0 Visited all 8 galaxies at least once.\par

\pard\nowidctlpar\par
The experimental feature to keep a photographic record of systems visited, only usable with development versions of Oolite, has been removed from this version of the OXP.\par
\par
Change Log:\par
\par
Version 1.4.4 (19/8/2014) Can now leave mission screens at any time, and fixed harmless bug introduced in 1.4.3. \par
\par
Version 1.4.3 (5/8/2014) Counter now displayed on interface summary, jumping into a nova system is now always logged immediately, and fine-tuned the change made in 1.4.2. \par
\par
Version 1.4.2 (27/7/2014) Code updated for Oolite 1.80: bug-fix for loading games saved at stations other than GalCop main.\par
\par
Version 1.4.1 (21/10/2013) System data screen tweaked, micro-tweak to API functions, last text string moved to missiontext.plist file.\par
\par
Version 1.4 (9/6/2013) Based on version 1.3.3, updated by Wildeblood. Code updated for Oolite 1.77, station interface added, photographic record feature removed, nearly all text strings moved to missiontext.plist file, new option for recording visit added, API functions added.\par
\par
\par
}
 </pre>
        <h3>Old readme.rtf</h3>
        <pre>{\rtf1\ansi\ansicpg1252\deff0\deflang2057\deflangfe2057{\fonttbl{\f0\fswiss\fprq2\fcharset0 Arial;}{\f1\froman\fprq2\fcharset2 Symbol;}}
{\colortbl ;\red0\green0\blue255;}
{\*\generator Msftedit 5.41.21.2510;}\viewkind4\uc1\pard\nowidctlpar\f0\fs20 Explorers\rquote  Club OXP v1.3.3 (30/06/12)\par
Inspired by Wildeblood, code by capt murphy - 2011,2012\par
\pard Licence: CC BY-NC-SA 3.0 : Please visit {\field{\*\fldinst{HYPERLINK &quot;http://creativecommons.org/licenses/by-nc-sa/3.0/&quot;}}{\fldrslt{\ul\cf1 http://creativecommons.org/licenses/by-nc-sa/3.0/}}}\f0\fs20  for more info.\par
Requires Oolite 1.76.1\par
\par
Overview: \par
\par
Once installed this OXP keeps track of unique systems visited and reports on the manifest screen (F5) the total systems visited in the current galaxy out of 256 and the total systems visited out of 2048 in the whole Ooniverse. It also displays an Explorer \lquote rank\rquote . You need to visit all 2048 systems to be ranked an Elite Explorer.\par
\par
In addition this OXP adds some functionality to the Long Range Chart (F6/F6) in that it can be set to different modes. To access the options screen press F2, then F6 when docked. The available options are:\par
\par
\pard\nowidctlpar\fi-360\li720\tx720 1)\tab Default - standard long range chart behaviour.\par
\pard\nowidctlpar\fi-360\li720 2)\tab Long range chart shows animation of systems visited to date, in order of first visit.\par
3)\tab Long range chart marks unvisited systems.\par
4)\tab Player can manually mark systems on long range chart as a destination (highlight a system with the cursor and press F7)\par
5)\tab Player can manually unmark systems on long range chart as a destination (highlight a system with the cursor and press F7)\par
\pard\nowidctlpar\par
Players should exercise caution when using the 2\super nd\nosupersub  and 3rd options as it will clear any currently marked systems (e.g mission or contract destinations), although the 4\super th\nosupersub  option can be used to manually reinstate them.\par
\par
The options screen also allows you to choose when a system is recorded as visited. The options are.\par
\par
\pard\nowidctlpar\fi-360\li720\tx720 1)\tab Default \endash  when docked at the main station.\par
\pard\nowidctlpar\fi-360\li720 2)\tab On arrival from witch-space.\par
\pard\nowidctlpar\par
Options are persistent between sessions with the same save game.\par
\par
The options screen also gives access to two further sets of mission screens.\par
\par
\pard\nowidctlpar\fi-360\li720\tx720 1)\tab Displays a list of the system names that have been visited so far in the current Galaxy, followed by a list of the system names that are yet to be visited in the current galaxy.\par
\pard\nowidctlpar\fi-360\li720 2)\tab Displays a list of mile-stones that the player has completed / not completed so far. Defined mile-stones are:\par
\pard\nowidctlpar\li360\par
\pard\nowidctlpar\fi-360\li1440\tx1440\f1\&#39;b7\tab\f0 Visited all of the \lquote Old Worlds\rquote  in galaxy 1.\par
\pard\nowidctlpar\fi-360\li1440\f1\&#39;b7\tab\f0 Visited all of the \lquote Famous Planets\rquote  in galaxy 1 (as per OXP of same name).\par
\f1\&#39;b7\tab\f0 Visited all of the \lquote Famous Planets\rquote  in galaxy 2 (as per OXP of same name).\par
\f1\&#39;b7\tab\f0 Visited the \lquote Prodigal Suns\rquote  in galaxy 3.\par
\f1\&#39;b7\tab\f0 Visited the \lquote Lost Worlds\rquote  in galaxy 6.\par
\f1\&#39;b7\tab\f0 Visited the systems beyond the \lquote Great Rift\rquote  in galaxy 7.\par
\f1\&#39;b7\tab\f0 Visited Oresrati in galaxy 8.\par
\f1\&#39;b7\tab\f0 Visited all 8 galaxies at least once.\par
\pard\nowidctlpar\par
The options screen also allows you to enable/disable an experimental feature to keep a photographic record of systems visited. This is disabled by default.\par
\par
If enabled the behaviour will depend on which option is set for recording a visit. If a visit is recorded on arrival from witch-space a screenshot will be automatically saved on exiting witch-space. If a visit is recorded on docking with the main station, at the next launch the player will be briefly \lquote teleported\rquote  to a good vantage point and a screenshot will be automatically saved before the player is teleported back to the launch point.\par
\par
Change Log:\par
\par
Version 1.0: 23/11/11 - Initial release.\par
\par
Version 1.1: 24/11/11 \endash  Fixed dodgy condition checks for the \lquote rank\rquote  string. Incorporated a number of code tweaks for efficiency suggested by Svengali.\par
\par
Version 1.2.1: 1/12/11\par
\par
Added functionality to view long range chart with unvisited systems marked, to view list of system names visited and unvisited in current galaxy, and to view list of mile-stones.\par
All missionScreens now managed via missionScreenOpportunity. \par
Long range chart mark visited systems animation will now complete in a maximum of 32 seconds (if all 256 systems have been visited).\par
Script now uses strict mode. \par
Added code to disable OXP entirely if player is in a galaxy outside of the range 1 to 8. \par
Added code to disable mile-stones feature if player is using a non-standard galaxy_seed.\par
\par
Version 1.3.1: 21/01/12\par
\par
Made compatible with Save Anywhere OXP.\par
Amended start-up behaviour for 1.76.\par
Removed use of forEach method for array iteration.\par
Message appended to system description on F7 screen to indicate whether system has been visited or not.\par
Added background image to missionScreens,\par
Added experimental photographic record of visited systems feature (thanks to Wildeblood for the snapshot HUD and some script suggestions, and thanks to the Honourable Guild of Test-Pilots for their valuable testing services).\par
\par
Version 1.3.2 and 1.3.2oxpC: 5/03/12\par
\par
Fixed minor bug in oxpC version that caused setting not to be saved in some circumstances.\par
Changed timing of record visit on witch space exit from this.shipWillExitWitchSpace to this.shipExitedWitchSpace - for compatibility with as yet unreleased long range jump OXPs.\par
Fixed mechanism of failsafe which prevents freeze should a JS timeout occur. \par
\par
Version 1.3.3 and 1.3.3oxpC: 30/06/12\par
\par
Fixed timer clean up mechanism to avoid unrooted timer errors when flicking rapidly to and from the long range chart.\par
\par
}
 </pre>
        </a>

        <a name="equipment">          
        <h2>Equipment</h2>
            This expansion declares no equipment. This may be related to warnings.
        </a>

        <a name="ships">    
        <h2>Ships</h2>
            This expansion declares no ships. This may be related to warnings.
        </a>

        <a name="models">    
        <h2>Models</h2>
            This expansion declares no models. This may be related to warnings.
        </a>

        <a name="scripts">    
        <h2>Scripts</h2>
            <table>
                <tr>
                    <th>Path</th>
                </tr>
                <tr>
                    <td valign="top">Config/script.js</td>
                    <td><pre>/* ========================================================
			EXPLORERS&#39; CLUB OXP

Created by Karl Smith (&quot;Wildeblood&quot;), June, 2013.
Based on an earlier work of the same name:- 

author:      &quot;Capt. Murphy&quot;
copyright:   2011, 2012 Steve Murphy
licence:     &quot;CC BY-NC-SA 3.0&quot;
description: Worldscript to record unique systems visited.
=========================================================== */

this.name    = &quot;Explorers Club&quot;; 
this.version = &quot;1.4.4&quot;;

/* ========================================================
			FUNCTIONS TO RECORD VISITS

 Check to see if new system has already been visited,
 and if not, add it to the record array.
=========================================================== */

    this._recordVisit = function () {
        &quot;use strict&quot;;
        if (this.$xc_record[galaxyNumber].indexOf(system.ID) === -1) {
            this.$xc_record[galaxyNumber].push(system.ID);
            return true;
        } else {
            return false;
        }
    }

    // Visiting option 1, default mode.

    this.shipWillDockWithStation = function (station) {
        &quot;use strict&quot;;
        if (this.$xc_visitOption === 1 &amp;&amp;
            station.isMainStation) {
            this._recordVisit();
        }
    }

    // Visiting option 2, easy mode.

    this.shipExitedWitchspace = function () {
        &quot;use strict&quot;;
        if (system.isInterstellarSpace) {
            return;
        }
        if (this.$xc_visitOption === 2) {
            this._recordVisit();
            return;
        }
        if (system.sun.hasGoneNova) {
            if (this._recordVisit()) {
                player.commsMessage(expandMissionText(&quot;explorers_club_visit_logged&quot;));
            }
        }
    }

    // Visiting option 3, expert mode.

    this.shipApproachingPlanetSurface = function (planet) {
        &quot;use strict&quot;;
        if (this.$xc_visitOption === 3 &amp;&amp;
            planet.isMainPlanet) {
            if (this._recordVisit()) {
                player.commsMessage(expandMissionText(&quot;explorers_club_visit_logged&quot;));
            }
        }
    }

    this.playerWillSaveGame = function () {
        &quot;use strict&quot;;
        missionVariables.explorerClub_record = JSON.stringify(this.$xc_record);
        missionVariables.explorerClub_chartOption = this.$xc_chartOption;
        missionVariables.explorerClub_visitOption = this.$xc_visitOption;
    }

/* ========================================================
			THE ENHANCED NAVIGATION CHARTS
=========================================================== */

    this.guiScreenChanged = function (to, from) {
        &quot;use strict&quot;;
        if (guiScreen === &quot;GUI_SCREEN_SYSTEM_DATA&quot;) {
            if (this.$xc_record[galaxyNumber].indexOf(player.ship.targetSystem) === -1) {
                mission.addMessageTextKey(&quot;explorers_club_never_visited&quot;);
            } else if (player.ship.targetSystem === system.ID) {
                mission.addMessageTextKey(&quot;explorers_club_here_now&quot;);
            } else {
                mission.addMessageTextKey(&quot;explorers_club_already_visited&quot;);
            }
        } else if (guiScreen === &quot;GUI_SCREEN_LONG_RANGE_CHART&quot;) {
            if (this.$xc_chartOption === 2) {
                for (var i = 0; i &lt; 256; i++) {
                    mission.unmarkSystem({system: i, name: &quot;exclubmap&quot;});
                }
                if (this.$xc_fadingReminder &gt; 1) {
                    player.consoleMessage(expandMissionText(&quot;explorers_club_chart_visited&quot;), this.$xc_fadingReminder);
                    this.$xc_fadingReminder -= 1;
                }
                // Double timer to execute function every 0.125 seconds.
                this.$xc_chartAnimationCounter = 0;
                this.$xc_markingTimer1 = new Timer(this, this._xc_markChart, 0.25, 0.25);
                this.$xc_markingTimer2 = new Timer(this, this._xc_markChart, 0.375, 0.25);
            } else if (this.$xc_chartOption === 3) {
                if (this.$xc_fadingReminder &gt; 1) {
                    player.consoleMessage(expandMissionText(&quot;explorers_club_chart_unvisited&quot;), this.$xc_fadingReminder);
                    this.$xc_fadingReminder -= 1;
                }
                var currentGalaxy = galaxyNumber;
                for (var i = 0; i &lt; 256; i++) {
                    if (this.$xc_record[currentGalaxy].indexOf(i) === -1) {
                        mission.markSystem({system: i, name: &quot;exclubmap&quot;, markerColor: &quot;orangeColor&quot;, markerScale: 1.0, markerShape: &quot;MARKER_DIAMOND&quot;});
                    } else {
                        mission.unmarkSystem({system: i, name: &quot;exclubmap&quot;});
                    }
                }
            }
            return; // Yes.
        }
        if (from === &quot;GUI_SCREEN_LONG_RANGE_CHART&quot;) {
            if (this.$xc_markingTimer1) {
                this.$xc_markingTimer1.stop();
                delete this.$xc_markingTimer1;
            }
            if (this.$xc_markingTimer2) {
                this.$xc_markingTimer2.stop();
                delete this.$xc_markingTimer2;
            }
            if (to !== &quot;GUI_SCREEN_SHORT_RANGE_CHART&quot; &amp;&amp;
                this.$xc_chartOption !== 1) {
                for (var i = 0; i &lt; 256; i++) {
                    mission.unmarkSystem({system: i, name: &quot;exclubmap&quot;});
                }
            }
        }
    }

    this._xc_markChart = function () {
        &quot;use strict&quot;;
        if (this.$xc_chartAnimationCounter &gt;= this.$xc_record[galaxyNumber].length) {
            if (this.$xc_markingTimer1) {
                this.$xc_markingTimer1.stop();
                delete this.$xc_markingTimer1;
            }
            if (this.$xc_markingTimer2) {
                this.$xc_markingTimer2.stop();
                delete this.$xc_markingTimer2;
            }
            return;
        }
        var sysID = this.$xc_record[galaxyNumber][this.$xc_chartAnimationCounter];
        mission.markSystem({system: sysID, name: &quot;exclubmap&quot;, markerColor: &quot;greenColor&quot;, markerScale: 1.0, markerShape: &quot;MARKER_X&quot;});
        this.$xc_chartAnimationCounter++;
    }

/* ========================================================
			EVENT HANDLERS FOR THE SPECIAL SCREENS
=========================================================== */

    this.shipDockedWithStation = function (station) {
        &quot;use strict&quot;;
        station.setInterface(&quot;explorers_club&quot;, {title: expandMissionText(&quot;explorers_club_interface_title&quot;), category: expandDescription(&quot;[interfaces-category-organisations]&quot;), summary: expandMissionText(&quot;explorers_club_interface_summary&quot;) + &quot;\n&quot; + this._playerRank(), callback: this.missionScreenOpportunity.bind(this)});
    }

    this.missionScreenOpportunity = function (screenToShowNext) {
        &quot;use strict&quot;;
        if (screenToShowNext) {
            this.$xc_screenToShowNext = screenToShowNext;
        }
        if (!this.$xc_screenToShowNext) {
            return;
        }
        switch (this.$xc_screenToShowNext) {
          case &quot;explorers_club&quot;:
            mission.runScreen({allowInterrupt: true, exitScreen: &quot;GUI_SCREEN_INTERFACES&quot;, titleKey: &quot;explorers_club_options_title&quot;, messageKey: &quot;explorers_club_options_text&quot;, background: &quot;Explorers_Club.png&quot;, choicesKey: &quot;explorers_club_options_choices&quot;, initialChoicesKey: [&quot;99_EXIT&quot;]}, this._xc_choice);
            delete this.$xc_screenToShowNext;
            mission.addMessageText(&quot;\n&quot; + this._playerRank());
            delete this.$xc_mileStonesPage;
            delete this.$xc_visitedNameAllPage;
            delete this.$xc_visitedNameFirstPage;
            delete this.$xc_visitedNameSecondPage;
            delete this.$xc_unvisitedNameAllPage;
            delete this.$xc_unvisitedNameFirstPage;
            delete this.$xc_unvisitedNameSecondPage;
            break;
          case &quot;settings&quot;:
            mission.runScreen({allowInterrupt: true, exitScreen: &quot;GUI_SCREEN_LONG_RANGE_CHART&quot;, titleKey: &quot;explorers_club_settings_title&quot;, messageKey: &quot;explorers_club_settings_text&quot;, background: &quot;Explorers_Club.png&quot;});
            delete this.$xc_screenToShowNext;
            switch (this.$xc_chartOption) {
              case 1:
                mission.addMessageTextKey(&quot;explorers_club_settings_chart_1&quot;);
                break;
              case 2:
                mission.addMessageTextKey(&quot;explorers_club_settings_chart_2&quot;);
                break;
              case 3:
                mission.addMessageTextKey(&quot;explorers_club_settings_chart_3&quot;);
                break;
              default:;
            }
            switch (this.$xc_visitOption) {
              case 1:
                mission.addMessageTextKey(&quot;explorers_club_settings_visit_1&quot;);
                break;
              case 2:
                mission.addMessageTextKey(&quot;explorers_club_settings_visit_2&quot;);
                break;
              case 3:
                mission.addMessageTextKey(&quot;explorers_club_settings_visit_3&quot;);
                break;
              default:;
            }
            break;
          case &quot;achievements&quot;:
            mission.runScreen({allowInterrupt: true, titleKey: &quot;explorers_club_achieved_title&quot;, message: this.$xc_mileStonesPage, background: &quot;Explorers_Club.png&quot;});
            this.$xc_screenToShowNext = &quot;explorers_club&quot;;
            break;
          case &quot;alternative_ooniverse&quot;:
            mission.runScreen({allowInterrupt: true, titleKey: &quot;explorers_club_achieved_title&quot;, messageKey: &quot;explorers_club_alternative_ooniverse&quot;, background: &quot;Explorers_Club.png&quot;});
            this.$xc_screenToShowNext = &quot;explorers_club&quot;;
            break;
          case &quot;systems_visited_all&quot;:
            mission.runScreen({allowInterrupt: true, title: &quot;G&quot; + (galaxyNumber + 1) + expandMissionText(&quot;explorers_club_systems_visited_all&quot;), message: this.$xc_visitedNameAllPage, background: &quot;Explorers_Club.png&quot;});
            this.$xc_screenToShowNext = &quot;systems_unvisited_1&quot;;
            break;
          case &quot;systems_unvisited_1&quot;:
            mission.runScreen({allowInterrupt: true, title: &quot;G&quot; + (galaxyNumber + 1) + expandMissionText(&quot;explorers_club_systems_unvisited_1&quot;), message: this.$xc_unvisitedNameFirstPage, background: &quot;Explorers_Club.png&quot;});
            this.$xc_screenToShowNext = &quot;systems_unvisited_2&quot;;
            break;
          case &quot;systems_unvisited_2&quot;:
            mission.runScreen({allowInterrupt: true, title: &quot;G&quot; + (galaxyNumber + 1) + expandMissionText(&quot;explorers_club_systems_unvisited_2&quot;), message: this.$xc_unvisitedNameSecondPage, background: &quot;Explorers_Club.png&quot;});
            this.$xc_screenToShowNext = &quot;explorers_club&quot;;
            break;
          case &quot;systems_visited_1&quot;:
            mission.runScreen({allowInterrupt: true, title: &quot;G&quot; + (galaxyNumber + 1) + expandMissionText(&quot;explorers_club_systems_visited_1&quot;), message: this.$xc_visitedNameFirstPage, background: &quot;Explorers_Club.png&quot;});
            this.$xc_screenToShowNext = &quot;systems_visited_2&quot;;
            break;
          case &quot;systems_visited_2&quot;:
            mission.runScreen({allowInterrupt: true, title: &quot;G&quot; + (galaxyNumber + 1) + expandMissionText(&quot;explorers_club_systems_visited_2&quot;), message: this.$xc_visitedNameSecondPage, background: &quot;Explorers_Club.png&quot;});
            this.$xc_screenToShowNext = &quot;systems_unvisited_all&quot;;
            break;
          case &quot;systems_unvisited_all&quot;:
            mission.runScreen({allowInterrupt: true, title: &quot;G&quot; + (galaxyNumber + 1) + expandMissionText(&quot;explorers_club_systems_unvisited_all&quot;), message: this.$xc_unvisitedNameAllPage, background: &quot;Explorers_Club.png&quot;});
            this.$xc_screenToShowNext = &quot;explorers_club&quot;;
            break;
          default:;
        }
    }

/* ========================================================
			OTHER FUNCTIONS FOR THE SPECIAL SCREENS
=========================================================== */

    this._xc_choice = function (choice) {
        &quot;use strict&quot;;
        switch (choice) {
          case &quot;99_EXIT&quot;:
            delete this.$xc_screenToShowNext;
            break;
          case &quot;31_SYSTEMS&quot;:
            this._xc_systemList();
            break;
          case &quot;32_ACHIEVE&quot;:
            this._xc_achievements();
            break;
          default: // All these go to the settings screen.
            switch (choice) {
              case &quot;11_CHART_NORMAL&quot;:
                this.$xc_chartOption = 1;
                for (var i = 0; i &lt; 256; i++) {
                    mission.unmarkSystem({system: i, name: &quot;exclubmap&quot;});
                }
                break;
              case &quot;12_CHART_VISITED&quot;:
                this.$xc_chartOption = 2;
                this.$xc_fadingReminder = 10;
                break;
              case &quot;13_CHART_UNVISITED&quot;:
                this.$xc_chartOption = 3;
                this.$xc_fadingReminder = 10;
                break;
              case &quot;21_DOCKED&quot;:
                this.$xc_visitOption = 1;
                if (player.ship.dockedStation.isMainStation) {
                    this._recordVisit();
                }
                break;
              case &quot;22_FLYING&quot;:
                this.$xc_visitOption = 2;
                this._recordVisit();
                break;
              case &quot;23_SURFACE&quot;:
                this.$xc_visitOption = 3;
                break;
              default:;
            }
            this.$xc_screenToShowNext = &quot;settings&quot;;
        }
    }

    this._xc_systemList = function () {
        &quot;use strict&quot;;
        var visitedName = new Array;
        var unVisitedName = new Array;
        var currentGalaxy = galaxyNumber;
        var arrayLength = this.$xc_record[galaxyNumber].length;
        var i;
        for (i = 0; i &lt; arrayLength; i++) {
            visitedName.push(&quot; &quot; + System.systemNameForID(this.$xc_record[currentGalaxy][i]));
        }
        for (i = 0; i &lt; 256; i++) {
            if (this.$xc_record[currentGalaxy].indexOf(i) === -1) {
                unVisitedName.push(&quot; &quot; + System.systemNameForID(i));
            }
        }
        unVisitedName = unVisitedName.sort();
        if (visitedName.length &lt;= 128) {
            this.$xc_visitedNameAllPage = visitedName;
            this.$xc_unvisitedNameFirstPage = unVisitedName.slice(0, 128);
            this.$xc_unvisitedNameSecondPage = unVisitedName.slice(128);
            this.$xc_screenToShowNext = &quot;systems_visited_all&quot;;
            this.missionScreenOpportunity();
        } else {
            this.$xc_visitedNameFirstPage = visitedName.slice(0, 128);
            this.$xc_visitedNameSecondPage = visitedName.slice(128);
            this.$xc_unvisitedNameAllPage = unVisitedName;
            this.$xc_screenToShowNext = &quot;systems_visited_1&quot;;
            this.missionScreenOpportunity();
        }
    }

    this._xc_achievements = function () {
        &quot;use strict&quot;;
        var testCoords = [[4.8, 40.6, 0], [9.6, 30.4, 0], [31.2, 42.4, 0], [62.4, 34.2, 0], [51.2, 28.8, 0], [86.4, 27.6, 0], [70.8, 4.6, 0], [90.8, 39.8, 0]];
        var alternativeOoniverse = false;
        if (System.infoForSystem(galaxyNumber, 255).coordinates.distanceTo(testCoords[galaxyNumber]) &gt; 0.00001) {
            alternativeOoniverse = true;
        }
        if (alternativeOoniverse) {
            this.$xc_screenToShowNext = &quot;alternative_ooniverse&quot;;
            this.missionScreenOpportunity();
            return;
        }
        if (!this.$xc_oldWorlds) {
            var oldWorlds = [7, 39, 46, 55, 129, 147, 255];
            this.$xc_oldWorlds = this._xc_isArray1_subsetOfArray2(oldWorlds, this.$xc_record[0]);
        }
        if (!this.$xc_famousPlanetsGalOne) {
            var famousPlanetsGalOne = [3, 7, 13, 16, 18, 21, 23, 28, 29, 35, 36, 39, 42, 44, 50, 55, 62, 66, 73, 86, 89, 90, 93, 99, 100, 101, 111, 124, 126, 129, 131, 132, 141, 147, 150, 153, 154, 172, 177, 186, 188, 198, 200, 221, 222, 227, 228, 241, 246, 250];
            this.$xc_famousPlanetsGalOne = this._xc_isArray1_subsetOfArray2(famousPlanetsGalOne, this.$xc_record[0]);
        }
        if (!this.$xc_famousPlanetsGalTwo) {
            var famousPlanetsGalTwo = [6, 23, 24, 29, 33, 42, 45, 48, 53, 54, 57, 58, 65, 66, 74, 78, 82, 88, 94, 109, 113, 114, 115, 122, 127, 136, 140, 144, 178, 188, 189, 193, 202, 204, 207, 221, 236];
            this.$xc_famousPlanetsGalTwo = this._xc_isArray1_subsetOfArray2(famousPlanetsGalTwo, this.$xc_record[1]);
        }
        if (!this.$xc_prodigalSuns) {
            var prodigalSuns = [133, 206];
            this.$xc_prodigalSuns = this._xc_isArray1_subsetOfArray2(prodigalSuns, this.$xc_record[2]);
        }
        if (!this.$xc_lostWorlds) {
            var lostWorlds = [33, 41, 55, 202];
            this.$xc_lostWorlds = this._xc_isArray1_subsetOfArray2(lostWorlds, this.$xc_record[5]);
        }
        if (!this.$xc_greatRift) {
            var greatRift = [15, 17, 27, 30, 61, 79, 97, 110, 115, 125, 130, 134, 137, 139, 153, 161, 173, 178, 186, 191, 205, 214, 218, 228, 229, 237, 248];
            this.$xc_greatRift = this._xc_isArray1_subsetOfArray2(greatRift, this.$xc_record[6]);
        }
        if (!this.$xc_oresratiChallenge) {
            if (this.$xc_record[7].indexOf(162) !== -1) {
                this.$xc_oresratiChallenge = true;
            }
        }
        if (!this.$xc_everyGalaxy) {
            if (this.$xc_record[0].length !== 0 &amp;&amp;
                this.$xc_record[1].length !== 0 &amp;&amp;
                this.$xc_record[2].length !== 0 &amp;&amp;
                this.$xc_record[3].length !== 0 &amp;&amp;
                this.$xc_record[4].length !== 0 &amp;&amp;
                this.$xc_record[5].length !== 0 &amp;&amp;
                this.$xc_record[6].length !== 0 &amp;&amp;
                this.$xc_record[7].length !== 0) {
                this.$xc_everyGalaxy = true;
            }
        }
        this.$xc_mileStonesPage = &quot;&quot;;
        if (this.$xc_oldWorlds) {
            this.$xc_mileStonesPage += expandMissionText(&quot;explorers_club_achieved_old&quot;) + &quot;\n&quot;;
        }
        if (this.$xc_famousPlanetsGalOne) {
            this.$xc_mileStonesPage += expandMissionText(&quot;explorers_club_achieved_famous_1&quot;) + &quot;\n&quot;;
        }
        if (this.$xc_famousPlanetsGalTwo) {
            this.$xc_mileStonesPage += expandMissionText(&quot;explorers_club_achieved_famous_2&quot;) + &quot;\n&quot;;
        }
        if (this.$xc_prodigalSuns) {
            this.$xc_mileStonesPage += expandMissionText(&quot;explorers_club_achieved_prodigal&quot;) + &quot;\n&quot;;
        }
        if (this.$xc_lostWorlds) {
            this.$xc_mileStonesPage += expandMissionText(&quot;explorers_club_achieved_lost&quot;) + &quot;\n&quot;;
        }
        if (this.$xc_greatRift) {
            this.$xc_mileStonesPage += expandMissionText(&quot;explorers_club_achieved_rift&quot;) + &quot;\n&quot;;
        }
        if (this.$xc_oresratiChallenge) {
            this.$xc_mileStonesPage += expandMissionText(&quot;explorers_club_achieved_oresrati&quot;) + &quot;\n&quot;;
        }
        if (this.$xc_everyGalaxy) {
            this.$xc_mileStonesPage += expandMissionText(&quot;explorers_club_achieved_eight&quot;) + &quot;\n&quot;;
        }
        if (!this.$xc_oldWorlds) {
            this.$xc_mileStonesPage += expandMissionText(&quot;explorers_club_achieved_no_old&quot;) + &quot;\n&quot;;
        }
        if (!this.$xc_famousPlanetsGalOne) {
            this.$xc_mileStonesPage += expandMissionText(&quot;explorers_club_achieved_no_famous_1&quot;) + &quot;\n&quot;;
        }
        if (!this.$xc_famousPlanetsGalTwo) {
            this.$xc_mileStonesPage += expandMissionText(&quot;explorers_club_achieved_no_famous_2&quot;) + &quot;\n&quot;;
        }
        if (!this.$xc_prodigalSuns) {
            this.$xc_mileStonesPage += expandMissionText(&quot;explorers_club_achieved_no_prodigal&quot;) + &quot;\n&quot;;
        }
        if (!this.$xc_lostWorlds) {
            this.$xc_mileStonesPage += expandMissionText(&quot;explorers_club_achieved_no_lost&quot;) + &quot;\n&quot;;
        }
        if (!this.$xc_greatRift) {
            this.$xc_mileStonesPage += expandMissionText(&quot;explorers_club_achieved_no_rift&quot;) + &quot;\n&quot;;
        }
        if (!this.$xc_oresratiChallenge) {
            this.$xc_mileStonesPage += expandMissionText(&quot;explorers_club_achieved_no_oresrati&quot;) + &quot;\n&quot;;
        }
        if (!this.$xc_everyGalaxy) {
            this.$xc_mileStonesPage += expandMissionText(&quot;explorers_club_achieved_no_eight&quot;) + &quot;\n&quot;;
        }
        this.$xc_screenToShowNext = &quot;achievements&quot;;
        this.missionScreenOpportunity();
    }

    this._xc_isArray1_subsetOfArray2 = function (array1, array2) {
        &quot;use strict&quot;;
        if (!array1 || !array2 || array1.length &gt; array2.length) {
            return false;
        }
        if (array1.length === array2.filter(function (value) {return this.indexOf(value) &gt;= 0;}, array1).length) {
            return true;
        } else {
            return false;
        }
    }

/* ========================================================
			INITIALIZATION
=========================================================== */

    this.startUp = function () {
        &quot;use strict&quot;;
        if (galaxyNumber &lt; 0 || galaxyNumber &gt; 7) {
            var message = &quot;Warning: Explorers&#39; Club is not compatible with additional hacked galaxies. OXP disabled.&quot;;
            log(this.name, message);
            player.consoleMessage(message, 10);
            for (prop in this) {
                if (prop !== &quot;name&quot; &amp;&amp; prop !== &quot;version&quot;) {
                    delete this[prop];
                }
            }
            return;
        }
        if (!missionVariables.explorerClub_record) {
            this.$xc_record = [[], [], [], [], [], [], [], []];
            this.$xc_chartOption = 1;
            this.$xc_visitOption = 1;
            this.$xc_firstRun = true;
        } else {
            this.$xc_record = JSON.parse(missionVariables.explorerClub_record);
            this.$xc_chartOption = missionVariables.explorerClub_chartOption;
            this.$xc_visitOption = missionVariables.explorerClub_visitOption;
        }
        this.$xc_fadingReminder = 7;
        delete this.startUp;
        // Defunct mission variables from previous versions:-
        delete missionVariables.explorerClub_snapshotOption;
        delete missionVariables.explorerClub_snapshotOnLaunch;
        mission.setInstructions(null, &quot;explorer_club.js&quot;);
    }

    this.startUpComplete = function () {
        &quot;use strict&quot;;
        if (player.ship.docked) {
            this.shipDockedWithStation(player.ship.dockedStation);
            if (this.$xc_firstRun) {
                delete this.$xc_firstRun;
                if (player.ship.dockedStation === system.mainStation) {
                    this.$xc_record[galaxyNumber][0] = system.ID;
                }
            }
        }
        delete this.startUpComplete;
    }

/* ========================================================
			INTERFACE FUNCTIONS

	Other scripts can call these functions.
=========================================================== */

    this._playerRank = function (requested) {
        &quot;use strict&quot;;
        if (this.startUp) {
            this.startUp();
        }
        var chartVisited = this.$xc_record[galaxyNumber].length;
        if (requested === &quot;chart&quot;) {
            return chartVisited;
        }
        var totalVisited = 0;
        for (var i = 0; i &lt; 8; i++) {
            totalVisited += this.$xc_record[i].length;
        }
        if (requested === &quot;total&quot;) {
            return totalVisited;
        }
        var rank;
        if (totalVisited &gt;= 2048) {
            rank = expandMissionText(&quot;explorers_club_rank_2048&quot;);
        } else if (totalVisited &gt;= 1024) {
            rank = expandMissionText(&quot;explorers_club_rank_1024&quot;);
        } else if (totalVisited &gt;= 512) {
            rank = expandMissionText(&quot;explorers_club_rank_512&quot;);
        } else if (totalVisited &gt;= 256) {
            rank = expandMissionText(&quot;explorers_club_rank_256&quot;);
        } else if (totalVisited &gt;= 128) {
            rank = expandMissionText(&quot;explorers_club_rank_128&quot;);
        } else {
            rank = expandMissionText(&quot;explorers_club_rank_1&quot;);
        }
        if (requested === &quot;rank&quot;) {
            return rank;
        }
        var rankString = expandMissionText(&quot;explorers_club_rank_string&quot;, {&quot;explorers_club_rank_chart&quot;: chartVisited, &quot;explorers_club_rank_total&quot;: totalVisited, &quot;explorers_club_rank_player&quot;: rank});
        return rankString;
    }

    this._playerVisited = function (galaxy, sysID) {
        &quot;use strict&quot;;
        if (this.startUp) {
            this.startUp();
        }
        if (typeof(sysID) === &quot;undefined&quot;) {
            return &quot;bad parameters&quot;;
        }
        if (galaxy &lt; 0 ||
            galaxy &gt; 7) {
            return &quot;bad galaxy&quot;;
        }
        if (sysID &lt; 0 ||
            sysID &gt; 255) {
            return &quot;bad system&quot;;
        }
        if (this.$xc_record[galaxy].indexOf(sysID) === -1) {
            return false;
        } else {
            return true;
        }
    }

/* ========================================================
			OTHER EVENT HANDLER
=========================================================== */

    this.guiScreenWillChange = function (to, from) {
        &quot;use strict&quot;;
        if (to === &quot;GUI_SCREEN_MANIFEST&quot;) {
            mission.setInstructions(this._playerRank(), this.name);
        }
    }

/* ========================================================
			THE END
=========================================================== */</pre></td>
                </tr>
            </table>
        </a>
    </body>
</html>
