<html>
    <head>
        <title>Expansion Mega Bat</title>
        <link rel="stylesheet" href="../style.css">
    </head>
    <body>
        <table border="0" width="100%">
            <tr>
                <td>Back to <a href='../index.html'>Index</a></td>
                <td align="right"><small>Page generated: Oct 11, 2023, 3:16:49 PM</small></td>
            </tr>
        </table>

        <h1>Expansion Mega Bat</h1>

        <h2>Content</h2>
        <ul>
          <li><a href="#warnings">Warnings</a></li>
          <li><a href="#manifest">Manifest</a></li>
          <li><a href="#documentation">Documentation</a></li>
          <li><a href="#equipment">0 Equipment</a></li>
          <li><a href="#ships">18 Ships</a></li>
          <li><a href="#models">0 Models</a></li>
          <li><a href="#scripts">2 Scripts</a></li>
        </ul>

          <a name="warnings">
            <h2>Warnings</h2>
            <ol>
                <li>Tags mismatch between OXP Manifest and Expansion Manager at character position 0002 (RIGHT SQUARE BRACKET vs LATIN SMALL LETTER S)(&#39;[]&#39; vs &#39;[ships]&#39;)</li>
                <li>Information URL mismatch between OXP Manifest and Expansion Manager string length at character position 0</li>
            </ol>
          </a>

        <a name="manifest">
        <h2>Manifest</h2>
            <table border="1">
                <tr>
                    <th></th>
                    <th>from Expansion Manager's OXP list</th>
                    <th>from Expansion Manifest</th>
                </tr>
                <tr>
                    <td>Description</td>
                    <td>A, based on the Fruit Bat and the Flying Fox, somewhat maneuverable medium fighter/escort. This ship is often used by pirates, assassins, hunters and escorts alike. For more details, please check the wiki page.</td>
                    <td>A, based on the Fruit Bat and the Flying Fox, somewhat maneuverable medium fighter/escort. This ship is often used by pirates, assassins, hunters and escorts alike. For more details, please check the wiki page.</td>
                </tr>
                <tr>
                    <td>Identifier</td>
                    <td>oolite.oxp.zzz.Montana05.BUS_MegaBat</td>
                    <td>oolite.oxp.zzz.Montana05.BUS_MegaBat</td>
                </tr>
                <tr>
                    <td>Title</td>
                    <td>Mega Bat</td>
                    <td>Mega Bat</td>
                </tr>
                <tr>
                    <td>Category</td>
                    <td>Ships</td>
                    <td>Ships</td>
                </tr>
                <tr>
                    <td>Author</td>
                    <td>Montana05</td>
                    <td>Montana05</td>
                </tr>
                <tr>
                    <td>Version</td>
                    <td>0.50</td>
                    <td>0.50</td>
                </tr>
                <tr>
                    <td>Tags</td>
                    <td></td>
                    <td>ships</td>
                </tr>
                <tr>
                    <td>Required Oolite Version</td>
                    <td></td>
                    <td></td>
                </tr>
                <tr>
                    <td>Maximum Oolite Version</td>
                    <td></td>
                    <td></td>
                </tr>
                <tr>
                    <td>Required Expansions</td>
                    <td>
                    </td>
                    <td>
                    </td>
                </tr>
                <tr>
                    <td>Optional Expansions</td>
                    <td>
                    </td>
                    <td>
                    </td>
                </tr>
                <tr>
                    <td>Conflict Expansions</td>
                    <td>
                    </td>
                    <td>
                    </td>
                </tr>
                <tr>
                    <td>Information URL</td>
                    <td><a target="_blank" href=""></a></td>
                    <td><a target="_blank" href="">n/a</a></td>
                </tr>
                <tr>
                    <td>Download URL</td>
                    <td><a target="_blank" href="https://wiki.alioth.net/img_auth.php/e/ed/Oolite.oxp.zzz.Montana05.BUS_MegaBat.OXZ">https://wiki.alioth.net/img_auth.php/e/ed/Oolite.oxp.zzz.Montana05.BUS_MegaBat.OXZ</a></td>
                    <td><a target="_blank" href="">n/a</a></td>
                </tr>
                <tr>
                    <td>License</td>
                    <td>CC BY-NC-SA 4.0</td>
                    <td>CC BY-NC-SA 4.0</td>
                </tr>
                <tr>
                    <td>File Size</td>
                    <td>n/a</td>
                </tr>
                <tr>
                    <td>Upload date</td>
                    <td>1637641163</td>
                </tr>
            </table>
                </a>

        <a name="documentation">
        <h2>Documentation</h2>
        <p>Also read <a href='http://wiki.alioth.net/index.php/Mega%20Bat'>http://wiki.alioth.net/index.php/Mega%20Bat</a></p>
        <h3>read_me.txt</h3>
        <pre>
Overview
========

The &quot;Mega Bat Mark I&quot; is a, rather maneuverable, medium fighter/escort. The design by Biarge United Shipyards is based 
on the &quot;Fruit Bat&quot; and the &quot;Flying Fox&quot; from SensimTrading.

This ship is often used by pirates, assassins, hunters and escorts alike.

History
=======

The &quot;Fruit Bat&quot; was designed for cheap mass production by the now defunct CLAN Ltd. from Erbiti. The production facilities 
were later bought by SensimTrading and relocated to Anisor.

The ship was not a very popular model, but when MASSTrans GLC bought into the traditional family business 
(holding 49.90 percent of the shares), the production of a slightly enhanced version under the name of &quot;Flying Fox&quot; started. 
This craft was exclusively sold to MASSTrans&#39; subsidiary firm MT SEC. 

While sales of the standard model have been rising slightly, the demand for a customer version of the &quot;Flying Fox&quot;
are estimated to be even higher. When MT SEC, with allowance of their parent company, started to open their escort services 
to private traders, an enhanced model was needed. This time, the management contacted Biarge United Shipyards and asked for
a design.

The result was the &quot;Mega Bat Mark I&quot; with a larger hull, faster, more energy, a better recharge rate and 3 front lasers. 
This ship, partly produced at SensimTrading and partly at Biarge United Shipyards, is slowly replacing the &quot;Flying Fox&quot; 
at MT SEC but is also available on the open market and highly requested. 

Credits
=======

The Mega Bat Mark I is inspired by the Fruit Bat and the Flying Fox (Fruit Bat OXP), thanks a lot to Rorschachhamster.

Rorschachhamster (basic model and textures)

Requirements
============

Oolite V 1.88 or higher. 

Details
=======

For additional details please check the wiki-page: http://wiki.alioth.net/index.php/Mega_Bat

License
=======

This work is licensed under Creative Commons Attribution Non-Commercial Share Alike 4.0 International (CC BY-NC-SA 4.0).
To view a copy of this license visit https://creativecommons.org/licenses/by-nc-sa/4.0

Version History
===============

V 0.50
initial release
</pre>
        </a>

        <a name="equipment">          
        <h2>Equipment</h2>
            This expansion declares no equipment. This may be related to warnings.
        </a>

        <a name="ships">    
        <h2>Ships</h2>
            <table>
                <tr>
                    <th>Name</th>
                </tr>
                <tr>
                    <td><a href="../ships/BUS_MegaBat_01.html">Mega Bat Mark I</a></td>
                </tr>
                <tr>
                    <td><a href="../ships/BUS_MegaBat_02.html">Mega Bat Mark I</a></td>
                </tr>
                <tr>
                    <td><a href="../ships/BUS_MegaBat_MT.html">MT SEC Mega Bat Mark I</a></td>
                </tr>
                <tr>
                    <td><a href="../ships/BUS_MegaBat_bhg.html">BHG Mega Bat Mark I</a></td>
                </tr>
                <tr>
                    <td><a href="../ships/BUS_MegaBat_bhg_team_01.html">BUS_MegaBat_bhg_team_01</a></td>
                </tr>
                <tr>
                    <td><a href="../ships/BUS_MegaBat_cargo_firearms.html">BUS_MegaBat_cargo_firearms</a></td>
                </tr>
                <tr>
                    <td><a href="../ships/BUS_MegaBat_cargo_food.html">Cargo container</a></td>
                </tr>
                <tr>
                    <td><a href="../ships/BUS_MegaBat_cargo_liquor_wines.html">BUS_MegaBat_cargo_liquor_wines</a></td>
                </tr>
                <tr>
                    <td><a href="../ships/BUS_MegaBat_cargo_witchfire_whiskey.html">BUS_MegaBat_cargo_witchfire_whiskey</a></td>
                </tr>
                <tr>
                    <td><a href="../ships/BUS_MegaBat_escape_capsule_MT.html">escape capsule</a></td>
                </tr>
                <tr>
                    <td><a href="../ships/BUS_MegaBat_escape_capsule_MT_pirate.html">escape capsule</a></td>
                </tr>
                <tr>
                    <td><a href="../ships/BUS_MegaBat_escape_capsule_bhg.html">escape capsule</a></td>
                </tr>
                <tr>
                    <td><a href="../ships/BUS_MegaBat_escape_capsule_bhg_pirate.html">escape capsule</a></td>
                </tr>
                <tr>
                    <td><a href="../ships/BUS_MegaBat_escape_capsule_pirate.html">escape capsule</a></td>
                </tr>
                <tr>
                    <td><a href="../ships/BUS_MegaBat_escape_capsule_std.html">escape capsule</a></td>
                </tr>
                <tr>
                    <td><a href="../ships/BUS_MegaBat_pirate.html">Mega Bat Mark I</a></td>
                </tr>
                <tr>
                    <td><a href="../ships/BUS_MegaBat_player_01.html">Mega Bat Mark I</a></td>
                </tr>
                <tr>
                    <td><a href="../ships/BUS_MegaBat_player_02.html">Mega Bat Mark I</a></td>
                </tr>
            </table>
        </a>

        <a name="models">    
        <h2>Models</h2>
            This expansion declares no models. This may be related to warnings.
        </a>

        <a name="scripts">    
        <h2>Scripts</h2>
            <table>
                <tr>
                    <th>Path</th>
                </tr>
                <tr>
                    <td valign="top">Scripts/BUS_MegaBat_events.js</td>
                    <td><pre>this.name			= &quot;BUS_MegaBat_events&quot;;
this.author			= &quot;Montana05&quot;;
this.description	= &quot;Event handler for Mega Bat Mark I&quot;;
this.version		= &quot;0.50&quot;;
this.copyright		= &quot;2021 Montana05&quot;;
this.licence		= &quot;CC BY-NC-SA 4.0&quot;;
&quot;use strict&quot;;

this.shipSpawned = function(ship)
{
	this.$BUS_MegaBat_shipType = this.ship.dataKey;
	this.$BUS_MegaBat_shipRole = this.ship.primaryRole;

	if(this.ship.hasRole(&quot;escape-capsule&quot;))
	{
		var crewName = expandDescription(&quot;[nom]&quot;);
		var crewDescription = &quot;a crew member of an evacuated ship&quot;;
		var crewRole = &quot;hunter&quot;;  // not perfect but somewhere in the middle
		var crewRank = &quot;Pilot&quot;;
		var bhgRank = &quot;Hunter&quot;;  // middle rank
		var crewRace = expandDescription(&quot;[BUS_MegaBat_GalCop_races_scientific]&quot;);  // add a race to the crew members
		var crewBounty = 0;
		var crewInsurance = this.$getRndInteger(90, 450);

		// based on an crew of 1 to 2 person
		this.$BUS_MegaBat_crew_ranks_array = 
		[&quot;Gunner&quot;, &quot;Co-Pilot&quot;, &quot;Pilot&quot;, &quot;Commander&quot;];
		crewRank = 
		$BUS_MegaBat_crew_ranks_array[Math.floor(Math.random() * $BUS_MegaBat_crew_ranks_array.length)];

		// ranks for Bounty Hunter Guild taken from Random Hits OXP, all credits to LittleBear
		this.$BUS_MegaBat_bhg_ranks_array = 
		[&quot;Outsider&quot;, &quot;Recruit&quot;, &quot;Vigilante&quot;, &quot;Bailiff&quot;, &quot;Deputy&quot;, &quot;Tracker&quot;, &quot;Hunter&quot;, &quot;Sheriff&quot;, &quot;Provost&quot;, &quot;Marshal&quot;, &quot;Enforcer&quot;, &quot;Executioner&quot;, &quot;Judge&quot;];
		bhgRank = 
		$BUS_MegaBat_bhg_ranks_array[Math.floor(Math.random() * $BUS_MegaBat_bhg_ranks_array.length)];

		switch(this.$BUS_MegaBat_shipType) 
		{
			case &quot;BUS_MegaBat_escape_capsule_std&quot;:

				crewName = (&quot;the &quot; + crewRace + &quot; &quot; + crewRank + &quot; &quot; + expandDescription(&quot;[nom]&quot;));
				crewDescription = &quot;a ship crew member&quot;;
				crewInsurance = crewInsurance;
				crewRole = &quot;hunter&quot;;
				break;

			case &quot;BUS_MegaBat_escape_capsule_MT&quot;:

				crewName = (&quot;the &quot; + crewRace + &quot; &quot; + crewRank + &quot; &quot; + expandDescription(&quot;[nom]&quot;));
				crewDescription = &quot;a MT Sec ship crew member&quot;;
				crewInsurance = (crewInsurance * 1.20);  // MT Sec got better insurance conditions
				crewRole = &quot;hunter&quot;;
				break;

			case &quot;BUS_MegaBat_escape_capsule_bhg&quot;:

				crewName = (&quot;the &quot; + crewRace + &quot; &quot; + bhgRank + &quot; &quot; + expandDescription(&quot;[nom]&quot;));
				crewDescription = &quot;a member of the Bounty Hunter Guild&quot;;
				crewInsurance = (crewInsurance * 1.10);  // BHG got better insurance conditions
				crewRole = &quot;hunter&quot;;
				break;

			case &quot;BUS_MegaBat_escape_capsule_pirate&quot;:
				
				crewName = (&quot;the &quot; + crewRace + &quot; &quot; + expandDescription(&quot;[BUS_MegaBat_pirate_nicknames]&quot;) + expandDescription(&quot;[nom]&quot;));
				crewDescription = &quot;a &quot; + expandDescription(&quot;[BUS_MegaBat_criminals]&quot;) +  &quot;wanted by GalCop police&quot;;
				crewRole = &quot;pirate&quot;;
				crewBounty = crewInsurance + (15 * system.government);  // stable governments pay extra bonus
				crewInsurance = 0;
				break;
	
			case &quot;BUS_MegaBat_escape_capsule_MT_pirate&quot;:

				crewName = (&quot;the &quot; + crewRace + &quot; &quot; + crewRank + &quot; &quot; + expandDescription(&quot;[nom]&quot;));
				crewDescription = &quot;a rouge MT Sec ship crew member&quot;;
				crewBounty = (crewInsurance * 1.20) + (15 * system.government);  // stable governments pay extra bonus
				crewInsurance = 0;
				crewRole = &quot;pirate&quot;;
				break;
	
			case &quot;BUS_MegaBat_escape_capsule_bhg_pirate&quot;:

				crewName = (&quot;the &quot; + crewRace + &quot; &quot; + bhgRank + &quot; &quot; + expandDescription(&quot;[nom]&quot;));
				crewDescription = &quot;a rouge member of the Bounty Hunter Guild&quot;;
				crewBounty = (crewInsurance * 1.10) + (15 * system.government);  // stable governments pay extra bonus
				crewInsurance = 0;
				crewRole = &quot;pirate&quot;;
				break;
			
			default: 
				break;
		};

		this.ship.setCrew
		(
			{
				name: crewName,
				short_description: crewDescription,
				role: crewRole,
				species: crewRace,
				insurance: crewInsurance,
				bounty: crewBounty
			}
		);

		// removes individual roles
		this.ship.primaryRole = &quot;escape-capsule&quot;;
	}
	else
	{
		var cargoSpace = this.ship.cargoSpaceCapacity;
		var cargoLoad = this.ship.cargoSpaceUsed;
		var cargoLeft = cargoSpace - cargoLoad;
		
		// removes individual roles of the ships, this roles will only be called from other OXP&#39;s
		// adds some cargo to all ships
		switch(this.$BUS_MegaBat_shipRole) 
		{
			case &quot;BUS_MegaBat_01&quot;:
			case &quot;BUS_MegaBat_MT&quot;:
			
				this.ship.primaryRole = &quot;escort-medium&quot;;
				break;

			case &quot;BUS_MegaBat_02&quot;:
			case &quot;BUS_MegaBat_bhg&quot;:
			case &quot;BUS_MegaBat_bhg_team_01&quot;:
			
				this.ship.primaryRole = &quot;hunter-medium&quot;;
				break;

			case &quot;BUS_MegaBat_pirate&quot;:

				this.ship.primaryRole = &quot;pirate-medium-fighter&quot;;
				break;

			default: 
				break;
		};

		if(cargoLeft &gt;= 3)
		{
			for(var i = this.$getRndInteger(1, 3) - 1 ; i &gt;= 0 ; --i)
			{
				this.ship.adjustCargo(this.$BUS_MegaBat_space_jockeyCargo(), 1);
			};
		};
	};
};	

this.shipDied = function(whom, why)
{
	if(this.ship.hasRole(&quot;escape-capsule&quot;))
	{
		return;
	}
	else
	{
		// neutral inits first
		var podType = &quot;escape-capsule&quot;;
		var podCount = 1;
		var criminalCrew = &quot;N&quot;;
		var cargoType = &quot;&quot;;
		var cargoPod = &quot;cargopod&quot;;
		var cargoCount = 0;

		if(this.ship.bounty &gt; 7 || this.$BUS_MegaBat_shipType == &quot;BUS_MegaBat_pirate&quot;)
		{
			criminalCrew = &quot;Y&quot;;
		};
					
		switch(this.$BUS_MegaBat_shipType) 
		{
			case &quot;BUS_MegaBat_01&quot;:
			case &quot;BUS_MegaBat_02&quot;:
			case &quot;BUS_MegaBat_pirate&quot;:
			
				if(criminalCrew == &quot;Y&quot;)
				{
					podType = &quot;BUS_MegaBat_escape_capsule_pirate&quot;;
				}	
				else
				{
					podType = &quot;BUS_MegaBat_escape_capsule_std&quot;;
				};
				break;
			
			case &quot;BUS_MegaBat_MT&quot;:
			
				if(criminalCrew == &quot;Y&quot;)
				{
					podType = &quot;BUS_MegaBat_escape_capsule_MT_pirate&quot;;
				}	
				else
				{
					podType = &quot;BUS_MegaBat_escape_capsule_MT&quot;;
				};
				break;

				case &quot;BUS_MegaBat_bhg&quot;:
				case &quot;BUS_MegaBat_bhg_team_01&quot;:

				if(criminalCrew == &quot;Y&quot;)
				{
					podType = &quot;BUS_MegaBat_escape_capsule_bhg_pirate&quot;;
				}	
				else
				{
					podType = &quot;BUS_MegaBat_escape_capsule_bhg&quot;;
				};
				break;

			default: 
				break;
		};

		// emergency crafts
		system.addShips(podType, podCount, this.ship.position);
		
		// cargopods
		if(this.ship.cargoSpaceUsed &gt; 0)
		{
			for(var i = this.ship.cargoList.length - 1 ; i &gt;= 0 ; --i)
			{
				cargoType = this.ship.cargoList[i].commodity;
				cargoPod = (&quot;BUS_MegaBat_cargo_&quot; + cargoType);
				cargoCount = this.ship.cargoList[i].quantity;
							
				if(cargoType == &quot;firearms&quot; || cargoType == &quot;food&quot; || cargoType == &quot;liquor_wines&quot; || cargoType == &quot;witchfire_whiskey&quot;)
				{
					system.addShips(cargoPod, cargoCount, this.ship.position);
				};
			};
		};
	};
};

// food, booze and guns, what else you need for your trip ? :P
this.$BUS_MegaBat_space_jockeyCargo = function()
{
	this.$BUS_MegaBat_space_jockey_cargo_array = [&quot;firearms&quot;, &quot;food&quot;, &quot;liquor_wines&quot;];

	if(worldScripts[&quot;witchfire-populator&quot;])  // Darkside Moonshine Distillery OXP
	{
		this.$BUS_MegaBat_space_jockey_cargo_array.push(&quot;witchfire_whiskey&quot;);
	};

	var space_jockey_cargo = 
	$BUS_MegaBat_space_jockey_cargo_array[Math.floor(Math.random() * $BUS_MegaBat_space_jockey_cargo_array.length)];

	return (space_jockey_cargo);
};

this.$getRndInteger = function(min, max)
{
	return Math.floor(Math.random() * (max - min + 1) ) + min;
};
</pre></td>
                </tr>
                <tr>
                    <td valign="top">Scripts/BUS_MegaBat_resources.js</td>
                    <td><pre>this.name			= &quot;BUS_MegaBat_resources&quot;;
this.author			= &quot;Montana05&quot;;
this.description	= &quot;adjusts containers&quot;;
this.version		= &quot;0.50&quot;;
this.copyright		= &quot;2021 Montana05&quot;;
this.licence		= &quot;CC BY-NC-SA 4.0&quot;;
&quot;use strict&quot;;

this.shipSpawned = function(ship)
{
	// standard primary roles
	if(this.ship.dataKey.indexOf(&quot;BUS_MegaBat_cargo&quot;) != -1)
		this.ship.primaryRole = &quot;cargopod&quot;;
};</pre></td>
                </tr>
            </table>
        </a>
    </body>
</html>
