<html>
    <head>
        <title>Expansion QTHI Auxiliary Energy Generators</title>
        <link rel="stylesheet" href="../style.css">
    </head>
    <body>
        <table border="0" width="100%">
            <tr>
                <td>Back to <a href='../index.html'>Index</a></td>
                <td align="right"><small>Page generated: Oct 11, 2023, 3:16:49 PM</small></td>
            </tr>
        </table>

        <h1>Expansion QTHI Auxiliary Energy Generators</h1>

        <h2>Content</h2>
        <ul>
          <li><a href="#warnings">Warnings</a></li>
          <li><a href="#manifest">Manifest</a></li>
          <li><a href="#documentation">Documentation</a></li>
          <li><a href="#equipment">7 Equipment</a></li>
          <li><a href="#ships">0 Ships</a></li>
          <li><a href="#models">0 Models</a></li>
          <li><a href="#scripts">2 Scripts</a></li>
        </ul>

          <a name="warnings">
            <h2>Warnings</h2>
            <ol>
                <li>Replaced equipment &#39;EQ_QTHI_AuxEnergyGeneratorHT_Sell&#39;</li>
                <li>Tags mismatch between OXP Manifest and Expansion Manager at character position 0002 (RIGHT SQUARE BRACKET vs LATIN SMALL LETTER E)(&#39;[]&#39; vs &#39;[equipment]&#39;)</li>
            </ol>
          </a>

        <a name="manifest">
        <h2>Manifest</h2>
            <table border="1">
                <tr>
                    <th></th>
                    <th>from Expansion Manager's OXP list</th>
                    <th>from Expansion Manifest</th>
                </tr>
                <tr>
                    <td>Description</td>
                    <td>Different auxiliary energy generators for those who often run short on Energy, but have plenty Witchspace fuel.</td>
                    <td>Different auxiliary energy generators for those who often run short on Energy, but have plenty Witchspace fuel.</td>
                </tr>
                <tr>
                    <td>Identifier</td>
                    <td>oolite.oxp.QCS.QTHI_AuxEnergyGenerators</td>
                    <td>oolite.oxp.QCS.QTHI_AuxEnergyGenerators</td>
                </tr>
                <tr>
                    <td>Title</td>
                    <td>QTHI Auxiliary Energy Generators</td>
                    <td>QTHI Auxiliary Energy Generators</td>
                </tr>
                <tr>
                    <td>Category</td>
                    <td>Equipment</td>
                    <td>Equipment</td>
                </tr>
                <tr>
                    <td>Author</td>
                    <td>QCS</td>
                    <td>QCS</td>
                </tr>
                <tr>
                    <td>Version</td>
                    <td>0.1.1</td>
                    <td>0.1.1</td>
                </tr>
                <tr>
                    <td>Tags</td>
                    <td></td>
                    <td>equipment</td>
                </tr>
                <tr>
                    <td>Required Oolite Version</td>
                    <td></td>
                    <td></td>
                </tr>
                <tr>
                    <td>Maximum Oolite Version</td>
                    <td></td>
                    <td></td>
                </tr>
                <tr>
                    <td>Required Expansions</td>
                    <td>
                    </td>
                    <td>
                    </td>
                </tr>
                <tr>
                    <td>Optional Expansions</td>
                    <td>
                    </td>
                    <td>
                    </td>
                </tr>
                <tr>
                    <td>Conflict Expansions</td>
                    <td>
                    </td>
                    <td>
                    </td>
                </tr>
                <tr>
                    <td>Information URL</td>
                    <td><a target="_blank" href="http://wiki.alioth.net/index.php/Energy_Equipment_OXP">http://wiki.alioth.net/index.php/Energy_Equipment_OXP</a></td>
                    <td><a target="_blank" href="">n/a</a></td>
                </tr>
                <tr>
                    <td>Download URL</td>
                    <td><a target="_blank" href="https://wiki.alioth.net/img_auth.php/e/e9/Oolite.oxp.QCS.QTHI_AuxEnergyGenerators_0.1.1.oxz">https://wiki.alioth.net/img_auth.php/e/e9/Oolite.oxp.QCS.QTHI_AuxEnergyGenerators_0.1.1.oxz</a></td>
                    <td><a target="_blank" href="">n/a</a></td>
                </tr>
                <tr>
                    <td>License</td>
                    <td>Creative Commons Attribution - Non-Commercial - Share Alike 4.0 license</td>
                    <td>Creative Commons Attribution - Non-Commercial - Share Alike 4.0 license</td>
                </tr>
                <tr>
                    <td>File Size</td>
                    <td>n/a</td>
                </tr>
                <tr>
                    <td>Upload date</td>
                    <td>1610873504</td>
                </tr>
            </table>
                </a>

        <a name="documentation">
        <h2>Documentation</h2>
        <p>Also read <a href='http://wiki.alioth.net/index.php/QTHI%20Auxiliary%20Energy%20Generators'>http://wiki.alioth.net/index.php/QTHI%20Auxiliary%20Energy%20Generators</a></p>
        </a>

        <a name="equipment">          
        <h2>Equipment</h2>
            <table>
                <tr>
                    <th>Name</th>
                    <th>Visible</th>
                    <th>Cost [deci-credits]</th>
                    <th>Tech-Level</th>
                </tr>
                <tr>
                    <td><a href="../equipment/EQ_QTHI_AuxEnergyGenerator.html">Auxiliary Energy Generator</a></td>
                    <td>yes</td>
                    <td align="right">8500</td>
                    <td align="center">6+</td>
                </tr>
                <tr>
                    <td><a href="../equipment/EQ_QTHI_AuxEnergyGeneratorHT.html">High-Tech Auxiliary Energy Generator</a></td>
                    <td>yes</td>
                    <td align="right">12500</td>
                    <td align="center">8+</td>
                </tr>
                <tr>
                    <td><a href="../equipment/EQ_QTHI_AuxEnergyGeneratorHT_Sell.html">Sell High-Tech Auxiliary Energy Generator</a></td>
                    <td>yes</td>
                    <td align="right">0</td>
                    <td align="center">8+</td>
                </tr>
                <tr>
                    <td><a href="../equipment/EQ_QTHI_AuxEnergyGeneratorHv.html">Heavy Auxiliary Energy Generator</a></td>
                    <td>yes</td>
                    <td align="right">25000</td>
                    <td align="center">8+</td>
                </tr>
                <tr>
                    <td><a href="../equipment/EQ_QTHI_AuxEnergyGeneratorLt.html">Light Auxiliary Energy Generator</a></td>
                    <td>yes</td>
                    <td align="right">25000</td>
                    <td align="center">8+</td>
                </tr>
                <tr>
                    <td><a href="../equipment/EQ_QTHI_AuxEnergyGeneratorLt_Sell.html">Uninstall High-Tech Light Auxiliary Energy Generator</a></td>
                    <td>yes</td>
                    <td align="right">5000</td>
                    <td align="center">8+</td>
                </tr>
                <tr>
                    <td><a href="../equipment/EQ_QTHI_AuxEnergyGenerator_Sell.html">Sell Auxiliary Energy Generator</a></td>
                    <td>yes</td>
                    <td align="right">0</td>
                    <td align="center">6+</td>
                </tr>
            </table>
        </a>

        <a name="ships">    
        <h2>Ships</h2>
            This expansion declares no ships. This may be related to warnings.
        </a>

        <a name="models">    
        <h2>Models</h2>
            This expansion declares no models. This may be related to warnings.
        </a>

        <a name="scripts">    
        <h2>Scripts</h2>
            <table>
                <tr>
                    <th>Path</th>
                </tr>
                <tr>
                    <td valign="top">Config/script.js</td>
                    <td><pre>
this.name           = &quot;QTHI Auxiliary Generators&quot;;
this.author         = &quot;QCS&quot;;
this.copyright      = &quot;(C) 2015 QCS.&quot;;
this.licence        = &quot;CC-NC-by-SA 4.0&quot;;
this.description    = &quot;Core script based on EnergyEquipment from Thargoid, content by QCS.&quot;;
this.version        = &quot;0.1.1&quot;;

&quot;use strict&quot;;

this.shipExitedWormhole = function()
{
  if(player.ship.equipmentStatus(&quot;EQ_QTHI_AuxEnergyGenerator&quot;) === &quot;EQUIPMENT_OK&quot;)
  {
    this.auxGeneratorKey = &quot;EQ_QTHI_AuxEnergyGenerator&quot;;
  }
  else if(player.ship.equipmentStatus(&quot;EQ_QTHI_AuxEnergyGeneratorHT&quot;) === &quot;EQUIPMENT_OK&quot;)
  {
    this.auxGeneratorKey = &quot;EQ_QTHI_AuxEnergyGeneratorHT&quot;;
  }
  else if(player.ship.equipmentStatus(&quot;EQ_QTHI_AuxEnergyGeneratorHT&quot;) === &quot;EQUIPMENT_OK&quot;)
  {
    this.auxGeneratorKey = &quot;EQ_QTHI_AuxEnergyGeneratorHT&quot;;
  }
  else if(player.ship.equipmentStatus(&quot;EQ_QTHI_AuxEnergyGeneratorHv&quot;) === &quot;EQUIPMENT_OK&quot;)
  {
    this.auxGeneratorKey = &quot;EQ_QTHI_AuxEnergyGeneratorHv&quot;;
  }
  else if(player.ship.equipmentStatus(&quot;EQ_QTHI_AuxEnergyGeneratorLt&quot;) === &quot;EQUIPMENT_OK&quot;)
  {
    this.auxGeneratorKey = &quot;EQ_QTHI_AuxEnergyGeneratorLt&quot;;
  }
  else
  {
    this.auxGeneratorKey = null;
  }
  if(this.auxGeneratorKey == null)
  {
    return;
  }
  if(player.ship.equipmentStatus(auxGeneratorKey) === &quot;EQUIPMENT_OK&quot;)
  {
    if(this.auxEnergyCheckTimer)
    {
      this.auxEnergyCheckTimer.start()
    }
    else
    {
      this.auxEnergyCheckTimer = new Timer(this, this.auxEnergyCheck,0,1);
    }
  }
  if (this.auxGeneratorKey === &quot;EQ_QTHI_AuxEnergyGeneratorHT&quot; || this.auxGeneratorKey === &quot;EQ_QTHI_AuxEnergyGeneratorLt&quot; || this.auxGeneratorKey === &quot;EQ_QTHI_AuxEnergyGeneratorHv&quot;)
  {
    if(this.auxHtEnergyCostTimer)
    {
      this.auxHtEnergyCostTimer.start()
    }
    else
    {
      this.auxHtEnergyCostTimer = new Timer(this, this.auxHtEnergyCost,0,1);
    }
  }
}

this.shipLaunchedFromStation = function(station)
{
  this.shipExitedWormhole();
}

this.auxHtEnergyCost = function()
{
  if (this.isGeneratorEnabled === true)
  {
    player.energy -= 2;
  }
}

this.auxEnergyCheck = function()
{
  if (this.auxEnergyGeneratorRunning === true)
  {
    return;
  }
  if (this.auxEnergyReloadTimer)
  {
    this.auxEnergyReloadTimer.stop();
  }
  if(player.ship.docked || player.ship.equipmentStatus(auxGeneratorKey) != &quot;EQUIPMENT_OK&quot;)
  {
    this.auxEnergyCheckTimer.stop();
  }
  else
  {
    if(this.isGeneratorEnabled === true &amp;&amp; player.ship.energy &lt; player.ship.maxEnergy * this.kickInRatio &amp;&amp; player.ship.fuel &gt; 0)
    {
      this.auxEnergyGeneratorRunning = true;
      player.ship.fuel -= 0.1;
      player.consoleMessage(&quot;Firing up Auxiliary Energy Generator!&quot;,6);
      log(this.name, &quot;Firing up Auxiliary Energy Generator!&quot;);
      this.auxEnergyReloadCount = 0;	
      this.auxEnergyReloadTimer = new Timer(this, this.auxEnergyReload, 0, 0.25);
    }
  }   	        
}

this.auxEnergyReload = function()
{
  if (this.auxEnergyReloadCount &lt; 50)
  {
    player.ship.energy += 2;
    if (this.auxGeneratorKey === &quot;EQ_QTHI_AuxEnergyGeneratorLt&quot;)
    {
      //only half the power from the Light generator
      player.ship.energy -= 1;
    }
    if (this.auxGeneratorKey === &quot;EQ_QTHI_AuxEnergyGeneratorHv&quot;)
    {
      //twice the power from the Heavy generator
      player.ship.energy += 2;
    }
    this.auxEnergyReloadCount++;
    player.ship.temperature *= 1.01;
  }
  else 
    if (this.auxEnergyGeneratorRunning === true)
    {
      if (player.ship.energy &lt; player.ship.maxEnergy * this.kickInRatio &amp;&amp; player.ship.fuel &gt; 0)
      {
	player.consoleMessage(&quot;Energy still critical: Keeping Auxiliary Energy Generator online&quot;);
	log(this.name, &quot;Energy still critical: Keeping Auxiliary Energy Generator online&quot;);
	this.auxEnergyReloadCount = 0;
	player.ship.fuel -= 0.1;
      }
      else
      {
	player.consoleMessage(&quot;Auxiliary Energy Generator offline.&quot;);
	log(this.name, &quot;Auxiliary Energy Generator offline.&quot;);
	this.auxEnergyGeneratorRunning = false;
      }
    }
}

this.shipDied = function()
{
  if(this.auxEnergyCheckTimer)
  {
    this.auxEnergyCheckTimer.stop()
  }
}

this.playerBoughtEquipment = function(equipmentKey)
{     
  if(equipmentKey == (&quot;EQ_QTHI_AuxEnergyGenerator_Sell&quot;))
  {
    player.ship.removeEquipment(&quot;EQ_QTHI_AuxEnergyGenerator&quot;);
    player.ship.removeEquipment(&quot;EQ_QTHI_AuxEnergyGenerator_Sell&quot;);
    player.credits += 500;
  }
  if(equipmentKey == (&quot;EQ_QTHI_AuxEnergyGeneratorHT_Sell&quot;))
  {
    player.ship.removeEquipment(&quot;EQ_QTHI_AuxEnergyGeneratorHT&quot;);
    player.ship.removeEquipment(&quot;EQ_QTHI_AuxEnergyGeneratorHT_Sell&quot;);
    player.credits += 800;
  }
  if(equipmentKey == (&quot;EQ_QTHI_AuxEnergyGeneratorHv_Sell&quot;))
  {
    player.ship.removeEquipment(&quot;EQ_QTHI_AuxEnergyGeneratorHv&quot;);
    player.ship.removeEquipment(&quot;EQ_QTHI_AuxEnergyGeneratorHv_Sell&quot;);
    player.credits += 1950;
  }
  //nothing special for EQ_QTHI_AuxEnergyGeneratorLt_Sell
}

this.playerStartedJumpCountdown = function(type)
{
  if (this.auxGeneratorKey === &quot;EQ_QTHI_AuxEnergyGeneratorLt&quot; &amp;&amp; this.isGeneratorEnabled === true)
  {
    player.consoleMessage(&quot;Witchspace drive disabled&quot;);
    player.ship.cancelHyperspaceCountdown();
  }
}</pre></td>
                </tr>
                <tr>
                    <td valign="top">Scripts/EQ_QTHI_AuxEnergyGenerator.js</td>
                    <td><pre>this.author      = &quot;QCS&quot;; 
this.copyright   = &quot;ï¿½ 2015 QCS.&quot;; 
this.licence = &quot;CC-BY-SA 4.0&quot;;
this.version     = &quot;0.1.1&quot;; 
this.name           = &quot;QTHI Auxiliary Generators Equipment&quot;;
this.author         = &quot;QCS&quot;;
this.copyright      = &quot;(C) 2015 QCS.&quot;;
this.licence        = &quot;CC-NC-by-SA 4.0&quot;;
this.description    = &quot;Equipment script for the Generator (Priming/Activation).&quot;;
this.version        = &quot;0.1.1&quot;;

this.activated = function ()
{
  var genScript = worldScripts[&quot;QTHI Auxiliary Generators&quot;];
  
  if (!genScript.isGeneratorEnabled)
  {
    genScript.isGeneratorEnabled = false;
  }
  
  genScript.isGeneratorEnabled = !genScript.isGeneratorEnabled;
  if (genScript.isGeneratorEnabled === false)
  {
     player.consoleMessage(&quot;Auxiliary Energy Generator disabled&quot;,6);
     if (genScript.auxGeneratorKey === &quot;EQ_QTHI_AuxEnergyGeneratorLt&quot;)
     {
       player.consoleMessage(&quot;Witchspace engine enabled&quot;,6);
     }
  }
  else
  {
     player.consoleMessage(&quot;Auxiliary Energy Generator enabled&quot;,6);
     if (genScript.auxGeneratorKey === &quot;EQ_QTHI_AuxEnergyGeneratorLt&quot;)
     {
       player.consoleMessage(&quot;Witchspace engine disabled&quot;,6);
     }
  } 
}

this.mode = function ()
{
  var genScript = worldScripts[&quot;QTHI Auxiliary Generators&quot;];
  
  if (!genScript.kickInRatio)
  {
    genScript.kickInRatio = 0.2;
  }
  
  genScript.kickInRatio = genScript.kickInRatio + 0.2;

  if (genScript.kickInRatio &gt; 1.0)
  {
    genScript.kickInRatio = 0.2;
  }

  player.consoleMessage(&quot;Auxiliary Energy Generator kicks in below &quot; + Math.floor(genScript.kickInRatio * 100) + &quot;% energy level&quot;,6);
}
</pre></td>
                </tr>
            </table>
        </a>
    </body>
</html>
