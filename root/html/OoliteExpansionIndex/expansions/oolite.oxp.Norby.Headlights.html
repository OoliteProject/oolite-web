<html>
    <head>
        <title>Expansion Headlights</title>
        <link rel="stylesheet" href="../style.css">
    </head>
    <body>
        <table border="0" width="100%">
            <tr>
                <td>Back to <a href='../index.html'>Index</a></td>
                <td align="right"><small>Page generated: Oct 11, 2023, 3:16:48 PM</small></td>
            </tr>
        </table>

        <h1>Expansion Headlights</h1>

        <h2>Content</h2>
        <ul>
          
          <li><a href="#manifest">Manifest</a></li>
          <li><a href="#documentation">Documentation</a></li>
          <li><a href="#equipment">2 Equipment</a></li>
          <li><a href="#ships">0 Ships</a></li>
          <li><a href="#models">0 Models</a></li>
          <li><a href="#scripts">1 Scripts</a></li>
        </ul>


        <a name="manifest">
        <h2>Manifest</h2>
            <table border="1">
                <tr>
                    <th></th>
                    <th>from Expansion Manager's OXP list</th>
                    <th>from Expansion Manifest</th>
                </tr>
                <tr>
                    <td>Description</td>
                    <td>Tune the light level with this primable equipment on the dark side of objects like you have powerful headlights.</td>
                    <td>Tune the light level with this primable equipment on the dark side of objects like you have powerful headlights.</td>
                </tr>
                <tr>
                    <td>Identifier</td>
                    <td>oolite.oxp.Norby.Headlights</td>
                    <td>oolite.oxp.Norby.Headlights</td>
                </tr>
                <tr>
                    <td>Title</td>
                    <td>Headlights</td>
                    <td>Headlights</td>
                </tr>
                <tr>
                    <td>Category</td>
                    <td>Ambience</td>
                    <td>Ambience</td>
                </tr>
                <tr>
                    <td>Author</td>
                    <td>Norby</td>
                    <td>Norby</td>
                </tr>
                <tr>
                    <td>Version</td>
                    <td>1.2</td>
                    <td>1.2</td>
                </tr>
                <tr>
                    <td>Tags</td>
                    <td></td>
                    <td></td>
                </tr>
                <tr>
                    <td>Required Oolite Version</td>
                    <td></td>
                    <td></td>
                </tr>
                <tr>
                    <td>Maximum Oolite Version</td>
                    <td></td>
                    <td></td>
                </tr>
                <tr>
                    <td>Required Expansions</td>
                    <td>
                    </td>
                    <td>
                    </td>
                </tr>
                <tr>
                    <td>Optional Expansions</td>
                    <td>
                    </td>
                    <td>
                    </td>
                </tr>
                <tr>
                    <td>Conflict Expansions</td>
                    <td>
                    </td>
                    <td>
                    </td>
                </tr>
                <tr>
                    <td>Information URL</td>
                    <td><a target="_blank" href="http://wiki.alioth.net/index.php/Headlights">http://wiki.alioth.net/index.php/Headlights</a></td>
                    <td><a target="_blank" href="">n/a</a></td>
                </tr>
                <tr>
                    <td>Download URL</td>
                    <td><a target="_blank" href="https://wiki.alioth.net/img_auth.php/3/39/Headlights.1.2.oxz">https://wiki.alioth.net/img_auth.php/3/39/Headlights.1.2.oxz</a></td>
                    <td><a target="_blank" href="">n/a</a></td>
                </tr>
                <tr>
                    <td>License</td>
                    <td>CC BY-NC-SA 4</td>
                    <td>CC BY-NC-SA 4</td>
                </tr>
                <tr>
                    <td>File Size</td>
                    <td>n/a</td>
                </tr>
                <tr>
                    <td>Upload date</td>
                    <td>1610873272</td>
                </tr>
            </table>
                </a>

        <a name="documentation">
        <h2>Documentation</h2>
        <p>Also read <a href='http://wiki.alioth.net/index.php/Headlights'>http://wiki.alioth.net/index.php/Headlights</a></p>
        <h3>Headlights_readme.txt</h3>
        <pre>Headlights

If you buy, prime (Shift+N) and activate (n) this equipment then you raise the level of the ambient light around you. Another activate set it back to the previous level as you turn on/off your headlights.

Using the mode (b) key you can change the function of the activate key between the following modes:
* switch between default and high level (on/off),
* decrease default level,
* increase default level,
* save the current level as high level (min. value: 2) and reset the default level to 1.

Useful with dark monitors combined with integrated graphics without gamma settings.

After you set your lights dock and save your game, this will be stored in your savegame. If you remove the equipment to reduce the length of your primable list, your setting will be remain. But if you keep it then you can use it to find ships: if you turn on an off repeatedly then highlight objects over the stars.

Can override very dark ambient_level settings in OXZs like Realistic Stars.

If your Oolite is older than 1.81 then you can edit the default setting in the Config/planetinfo.plist, for example set to 0.5 if you want darker than the default but not so dark than in Realistic Stars which is 0.1.

For more information see the regarding discussuion:
http://aegidian.org/bb/viewtopic.php?f=2&amp;t=4494&amp;start=4215#p230222


Instructions:

Do not unzip the .oxz file, just move into the AddOns folder of your Oolite installation.

License:

This work is licensed under the Creative Commons Attribution-NonCommercial-ShareAlike License version 4.0.
If you are re-using any piece of this OXP, please let me know by sending an e-mail to norbylite@gmail.com.

Changelog:
 2016.01.01. v1.2  New mode key functions.
 2015.05.10. v1.1  Fixed a bug after load game reported by Day.
 2014.12.04. v1.0  First release.
</pre>
        </a>

        <a name="equipment">          
        <h2>Equipment</h2>
            <table>
                <tr>
                    <th>Name</th>
                    <th>Visible</th>
                    <th>Cost [deci-credits]</th>
                    <th>Tech-Level</th>
                </tr>
                <tr>
                    <td><a href="../equipment/EQ_Headlights.html">Headlights</a></td>
                    <td>yes</td>
                    <td align="right">100</td>
                    <td align="center">1+</td>
                </tr>
                <tr>
                    <td><a href="../equipment/EQ_Headlights_REMOVE.html">Remove Headlights</a></td>
                    <td>yes</td>
                    <td align="right">0</td>
                    <td align="center">1+</td>
                </tr>
            </table>
        </a>

        <a name="ships">    
        <h2>Ships</h2>
            This expansion declares no ships. 
        </a>

        <a name="models">    
        <h2>Models</h2>
            This expansion declares no models. 
        </a>

        <a name="scripts">    
        <h2>Scripts</h2>
            <table>
                <tr>
                    <th>Path</th>
                </tr>
                <tr>
                    <td valign="top">Scripts/headlights.js</td>
                    <td><pre>&quot;use strict&quot;;
this.name	= &quot;headlights&quot;;
this.author	= &quot;Norby&quot;;
this.copyright	= &quot;2014 Norby&quot;;
this.description= &quot;Tune the light level on the dark side of objects&quot;;
this.licence	= &quot;CC BY-NC-SA 4.0&quot;;

//internal properties, should not touch
this.$Level = 1; //darker than the default but not &quot;too&quot; dark as 0.1 in Realistic Stars
this.$Level2 = 4; //highlight objects over star-filled background
this.$Mode = 1; //current mode

//equipment events
this.activated = function() { //increase ambient level
        var w = worldScripts[&quot;headlights&quot;];
        switch(w.$Mode) {
                case 1: //switch between default and high level
                if( system.ambientLevel == w.$Level2 )
                        system.ambientLevel = w.$Level;
                else system.ambientLevel = w.$Level2;
                player.consoleMessage(&quot;Headlights set to &quot;
                        +Math.round(system.ambientLevel*100)/100, 3);
                break;
                case 2: //decrease ambientLevel
                w.$eq(false, w);
                break;
                case 3: //increase ambientLevel
                w.$eq(true, w);
                break;
                case 4: //save as high level
                w.$Level2 = w.$hi();
                player.consoleMessage(&quot;Headlights high level set to &quot;+w.$Level2
                        +&quot;, default level set back to 1&quot;, 3);
                system.ambientLevel = w.$Level = 1; //reset default to 1
                w.$Mode = 1; //back to the switching mode
                break;
                default: //for sure
                w.$Mode = 1;
                break;
        }
}

this.mode = function() { //decrease ambient level
        var w = worldScripts[&quot;headlights&quot;];
        w.$Mode++;
        if( w.$Mode &gt; 4 ) w.$Mode = 1;
        switch(w.$Mode) {
                case 1: //switch between default and high level
                player.consoleMessage(&quot;Headlights mode: switch between default and high level&quot;, 3);
                break;
                case 2: //decrease ambientLevel
                player.consoleMessage(&quot;Headlights mode: decrease level&quot;, 3);
                break;
                case 3: //increase ambientLevel
                player.consoleMessage(&quot;Headlights mode: increase level&quot;, 3);
                break;
                case 4: //save as high level
                player.consoleMessage(&quot;Headlights mode: save &quot;+w.$hi()+&quot; as high level&quot;, 3);
                break;
                default: //for sure
                w.$Mode = 1;
                break;
        }
}

//worldscript events
this.startUp = function() {
        var l = missionVariables.$HeadlightsLevel;
        if( l ) {
                this.$Level = l;
                if( system.ambientLevel ) system.ambientLevel = l;
        }
        l = missionVariables.$HeadlightsLevel2;
        if( l ) this.$Level2 = l;
}

this.playerBoughtEquipment = function(equipmentKey) {
	if( equipmentKey == &quot;EQ_Headlights_REMOVE&quot; ) {
		var eq = equipmentKey.substr( 0, equipmentKey.length-7 );//the real eq
		player.ship.removeEquipment( eq ); //remove it
		player.ship.removeEquipment( equipmentKey ); //remove the &quot;bought&quot; remove eq
	}
}

this.playerWillSaveGame = function(message) {
        missionVariables.$HeadlightsLevel = this.$Level;
        missionVariables.$HeadlightsLevel2 = this.$Level2;
}

this.shipWillExitWitchspace = function() {
	system.ambientLevel = this.$Level; //force in every system
}

//headlights functions
this.$eq = function(up, w) { //decrease ambient level
	if( !system.ambientLevel ) {
		player.consoleMessage(&quot;You need Oolite 1.81 to use this equipment&quot;
			+&quot; but you can change ambient_level by hand in Config/planetinfo.plist&quot;, 10);
		return;
	}
	var step = 0.05;
	if( w.$Level &gt; 1.5 || up &amp;&amp; w.$Level == 1.5 ) step = 0.5;
	if( w.$Level &lt; 0.05 ) w.$Level = 0;
	if( up ) {
		w.$Level += step;
		if( w.$Level &gt; 10 ) w.$Level = 0.01;
	} else {
		w.$Level -= step;
		if( w.$Level &lt; 0 ) w.$Level = 10;
	}
	if(w.$Level == 0) w.$Level = 0.01;
	w.$Level = Math.round(w.$Level*100)/100;
	system.ambientLevel = w.$Level;
	player.consoleMessage(&quot;Headlights set to &quot;+w.$Level, 3);
}

this.$hi = function() { //high ambient level
        var hi = Math.round(system.ambientLevel*100)/100;
        if( hi &lt; 2 ) hi = 2; //min. 2
        return hi;
}</pre></td>
                </tr>
            </table>
        </a>
    </body>
</html>
