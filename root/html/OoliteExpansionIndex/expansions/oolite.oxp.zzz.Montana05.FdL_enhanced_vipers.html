<html>
    <head>
        <title>Expansion Enhanced Vipers</title>
        <link rel="stylesheet" href="../style.css">
    </head>
    <body>
        <table border="0" width="100%">
            <tr>
                <td>Back to <a href='../index.html'>Index</a></td>
                <td align="right"><small>Page generated: Oct 11, 2023, 3:16:49 PM</small></td>
            </tr>
        </table>

        <h1>Expansion Enhanced Vipers</h1>

        <h2>Content</h2>
        <ul>
          <li><a href="#warnings">Warnings</a></li>
          <li><a href="#manifest">Manifest</a></li>
          <li><a href="#documentation">Documentation</a></li>
          <li><a href="#equipment">0 Equipment</a></li>
          <li><a href="#ships">12 Ships</a></li>
          <li><a href="#models">0 Models</a></li>
          <li><a href="#scripts">3 Scripts</a></li>
        </ul>

          <a name="warnings">
            <h2>Warnings</h2>
            <ol>
                <li>Tags mismatch between OXP Manifest and Expansion Manager at character position 0002 (RIGHT SQUARE BRACKET vs LATIN SMALL LETTER P)(&#39;[]&#39; vs &#39;[police ships]&#39;)</li>
                <li>Information URL mismatch between OXP Manifest and Expansion Manager string length at character position 0</li>
            </ol>
          </a>

        <a name="manifest">
        <h2>Manifest</h2>
            <table border="1">
                <tr>
                    <th></th>
                    <th>from Expansion Manager's OXP list</th>
                    <th>from Expansion Manifest</th>
                </tr>
                <tr>
                    <td>Description</td>
                    <td>This OXP adds enhanced Viper Patrols, Viper Pursuits, and Viper Interceptors, to richer stable systems; GalCop Deputies to stable poor/average systems; and Bounty Hunters to unstable/dangerous systems. They are not über ships - far from it - but with the advent of heavy pirates and heavy assassins into the core game, some toughening of GalCop Vipers seemed appropriate.</td>
                    <td>This OXP adds enhanced Viper Patrols, Viper Pursuits, and Viper Interceptors, to richer stable systems; GalCop Deputies to stable poor/average systems; and Bounty Hunters to unstable/dangerous systems. They are not über ships - far from it - but with the advent of heavy pirates and heavy assassins into the core game, some toughening of GalCop Vipers seemed appropriate.</td>
                </tr>
                <tr>
                    <td>Identifier</td>
                    <td>oolite.oxp.zzz.Montana05.FdL_enhanced_vipers</td>
                    <td>oolite.oxp.zzz.Montana05.FdL_enhanced_vipers</td>
                </tr>
                <tr>
                    <td>Title</td>
                    <td>Enhanced Vipers</td>
                    <td>Enhanced Vipers</td>
                </tr>
                <tr>
                    <td>Category</td>
                    <td>Ships</td>
                    <td>Ships</td>
                </tr>
                <tr>
                    <td>Author</td>
                    <td>Montana05, Cody</td>
                    <td>Montana05, Cody</td>
                </tr>
                <tr>
                    <td>Version</td>
                    <td>0.52</td>
                    <td>0.52</td>
                </tr>
                <tr>
                    <td>Tags</td>
                    <td></td>
                    <td>police ships</td>
                </tr>
                <tr>
                    <td>Required Oolite Version</td>
                    <td></td>
                    <td></td>
                </tr>
                <tr>
                    <td>Maximum Oolite Version</td>
                    <td></td>
                    <td></td>
                </tr>
                <tr>
                    <td>Required Expansions</td>
                    <td>
                    </td>
                    <td>
                    </td>
                </tr>
                <tr>
                    <td>Optional Expansions</td>
                    <td>
                    </td>
                    <td>
                    </td>
                </tr>
                <tr>
                    <td>Conflict Expansions</td>
                    <td>
                    </td>
                    <td>
                    </td>
                </tr>
                <tr>
                    <td>Information URL</td>
                    <td><a target="_blank" href=""></a></td>
                    <td><a target="_blank" href="">n/a</a></td>
                </tr>
                <tr>
                    <td>Download URL</td>
                    <td><a target="_blank" href="https://wiki.alioth.net/img_auth.php/1/10/Oolite.oxp.zzz.Montana05.FdL_enhanced_vipers.OXZ">https://wiki.alioth.net/img_auth.php/1/10/Oolite.oxp.zzz.Montana05.FdL_enhanced_vipers.OXZ</a></td>
                    <td><a target="_blank" href="">n/a</a></td>
                </tr>
                <tr>
                    <td>License</td>
                    <td>CC BY-NC-SA 4.0</td>
                    <td>CC BY-NC-SA 4.0</td>
                </tr>
                <tr>
                    <td>File Size</td>
                    <td>n/a</td>
                </tr>
                <tr>
                    <td>Upload date</td>
                    <td>1638498259</td>
                </tr>
            </table>
                </a>

        <a name="documentation">
        <h2>Documentation</h2>
        <p>Also read <a href='http://wiki.alioth.net/index.php/Enhanced%20Vipers'>http://wiki.alioth.net/index.php/Enhanced%20Vipers</a></p>
        <h3>read_me.txt</h3>
        <pre>
Overview
========

This OXP adds enhanced Viper Patrols, Viper Pursuits, and Viper Interceptors, to richer, stable systems; GalCop Deputies to 
stable poor/average systems; and Bounty Hunters to unstable/dangerous systems. They are not über ships - far from it - but with the 
advent of heavy pirates and heavy assassins into the core game, some toughening of GalCop Vipers seemed appropriate.

Hopefully, the sight of a squad of Vipers being trounced by a gang of bandits, or getting slaughtered by a bunch of assassins, 
will become less common. Some of the enhanced Vipers have highly skilled pilots, so any players acting as bandits should beware.

History
=======
In a dangerous Ooniverse, the richer stable systems had traditionally been safe havens for traders. However, in the poorer, 
less well-policed systems, piracy was increasing. When tougher ships became available, pirate clans grew bolder, and those 
safe havens became the target of increasingly frequent raids. GalCop Vipers bore the brunt of these raids, and their losses 
began to mount. When trade started to suffer, the wealthy merchant guilds got together, and decided something had to be done. 
After much haggling, they struck a deal with GalCop, Faulcon de Lacy, and Griff Industries, to finance the building of enhanced 
replacements for the ageing Vipers. With a view to spreading the potential benefits to poorer systems, the Bounty Hunters Guild 
was brought onboard. As is often the case though, budgetary constraints - brought about by spiraling costs and pocket-lining 
by unscrupulous bureaucrats - limited the scope of the enhancements.

Nevertheless, GalCop&#39;s enhanced Vipers are now starting to make their presence felt, and this it is hoped will eventually 
turn the tide, and perhaps restore some semblance of normality. The improved performance and durability of the enhanced Vipers 
has also attracted the more skillful pilots, and recruitment - which had been declining - is on the up.

Credits
=======

Cody (concept and lore)
Griff (models and basic textures)
another_commander (basic specular map escape capsule)

Remarks
=======

Additional to the enhanced Vipers the GalCop police emblem and individual escape capsules are added to all core-vipers. 
Viper Pursuit, in the core-game just shown as Viper, is now correctly named.

The package is adjusted to Illicit Unlock OXP, Sniper Gun OXP, Carriers.OXP and Carriers_with_turrets.OXP.

Requirements
============

Oolite V 1.88 or higher.

Details
=======

For additional details, please check the wiki-page: http://wiki.alioth.net/index.php/Enhanced_Vipers

License
=======

This work is licensed under Creative Commons Attribution Non-Commercial Share Alike 4.0 International (CC BY-NC-SA 4.0).
To view a copy of this license, visit https://creativecommons.org/licenses/by-nc-sa/4.0

Version History
===============

V 0.50
initial release

V 0.51
removed a test routine in the script

V 0.52
small tweaks to adjust better with other OXP&#39;s
</pre>
        </a>

        <a name="equipment">          
        <h2>Equipment</h2>
            This expansion declares no equipment. This may be related to warnings.
        </a>

        <a name="ships">    
        <h2>Ships</h2>
            <table>
                <tr>
                    <th>Name</th>
                </tr>
                <tr>
                    <td><a href="../ships/FdL_viper_E_escape_capsule_bhg.html">escape capsule</a></td>
                </tr>
                <tr>
                    <td><a href="../ships/FdL_viper_E_escape_capsule_bhg_pirate.html">FdL_viper_E_escape_capsule_bhg_pirate</a></td>
                </tr>
                <tr>
                    <td><a href="../ships/FdL_viper_E_escape_capsule_police.html">escape capsule</a></td>
                </tr>
                <tr>
                    <td><a href="../ships/FdL_viper_E_interceptor.html">GalCop Viper-E Interceptor</a></td>
                </tr>
                <tr>
                    <td><a href="../ships/FdL_viper_E_patrol.html">GalCop Viper-E Patrol</a></td>
                </tr>
                <tr>
                    <td><a href="../ships/FdL_viper_E_pursuit.html">GalCop Viper-E Pursuit</a></td>
                </tr>
                <tr>
                    <td><a href="../ships/FdL_viper_E_pursuit_bhg.html">BHG Viper-E Pursuit</a></td>
                </tr>
                <tr>
                    <td><a href="../ships/FdL_viper_E_pursuit_bhg_deputy.html">Deputy BHG Viper-E Pursuit</a></td>
                </tr>
                <tr>
                    <td><a href="../ships/FdL_viper_E_pursuit_bhg_team_01.html">FdL_viper_E_pursuit_bhg_team_01</a></td>
                </tr>
                <tr>
                    <td><a href="../ships/viper-carrier-player-neutral.html">viper-carrier-player-neutral</a></td>
                </tr>
                <tr>
                    <td><a href="../ships/viper-carrier-player-neutral-turret.html">viper-carrier-player-neutral-turret</a></td>
                </tr>
                <tr>
                    <td><a href="../ships/viper-carrier-viper-neutral.html">viper-carrier-viper-neutral</a></td>
                </tr>
            </table>
        </a>

        <a name="models">    
        <h2>Models</h2>
            This expansion declares no models. This may be related to warnings.
        </a>

        <a name="scripts">    
        <h2>Scripts</h2>
            <table>
                <tr>
                    <th>Path</th>
                </tr>
                <tr>
                    <td valign="top">Scripts/FdL_viper_E_conditions.js</td>
                    <td><pre>this.name			= &quot;FdL_viper_E_conditions&quot;;
this.author			= &quot;Montana05&quot;;
this.description	= &quot;condition script for Viper-E ships&quot;;
this.version		= &quot;0.52&quot;;
this.copyright		= &quot;2021 Montana05&quot;;
this.licence		= &quot;CC BY-NC-SA 4.0&quot;;
&quot;use strict&quot;;

this.allowSpawnShip = function(shipKey) 
{
	var systemEco = system.economy;
	var systemGov = system.government;
	
	if(system.isInterstellarSpace || system.sun.isGoingNova || system.sun.hasGoneNova)
	{
		return false;
	};
	
	switch(shipKey) 
	{
		case &quot;FdL_viper_E_patrol&quot;:
		case &quot;FdL_viper_E_pursuit&quot;:
		case &quot;FdL_viper_E_interceptor&quot;:	
			
			// GalCop space police in rich, stable governments	
			if(systemGov &gt; 4 &amp;&amp; systemEco &lt;= 3)
			{
				return true;
			};
			break;

		// GalCop deputies in average or poor stable governments
		case &quot;FdL_viper_E_pursuit_bhg_deputy&quot;:
			
			if(systemGov &gt; 4 &amp;&amp; systemEco &gt; 3)
			{
				return true;
			};
			break;

		// bounty hunters in unstable and dangerous systems
		case &quot;FdL_viper_E_pursuit_bhg&quot;:
		case &quot;FdL_viper_E_pursuit_bhg_team_01&quot;:
		
			if(systemGov &lt;= 2)
			{
				return true;
			};
			break;
			
		default:
			break;	
	};
	return false;
};</pre></td>
                </tr>
                <tr>
                    <td valign="top">Scripts/FdL_viper_E_events.js</td>
                    <td><pre>this.name			= &quot;FdL_viper_E_events&quot;;
this.author			= &quot;Montana05&quot;;
this.description	= &quot;event handler for Viper-E ships&quot;;
this.version		= &quot;0.52&quot;;
this.copyright		= &quot;2021 Montana05&quot;;
this.licence   		= &quot;CC BY-NC-SA 4.0&quot;;
&quot;use strict&quot;;

this.shipSpawned = function(ship)
{
	this.FdL_viper_shipType = this.ship.dataKey;
		
	if(this.ship.hasRole(&quot;escape-capsule&quot;))
	{
		// neutral inits first
		var crewName = expandDescription(&quot;[nom]&quot;);
		var crewDescription = &quot;a crew member of an evacuated ship&quot;;
		var crewRole = &quot;police&quot;;  // most of the time
		var crewRank = &quot;Space Lieutenant&quot;;  // most common rank
		var crewRace = expandDescription(&quot;[FdL_viper_E_GalCop_races_scientific]&quot;);  // add a race to the crew members
		var crewBounty = 0;
		var crewInsurance = 0;
				
		// now it&#39;s time to be more specific, based on an crew of 1 to 2 person
		// insurance or bounty are defined so there shouldn&#39;t be slaves

		// ranks for Bounty Hunter Guild taken from Random Hits OXP, all credits to LittleBear
		this.$FdL_viper_bhg_ranks_array = 
		[&quot;Outsider&quot;, &quot;Recruit&quot;, &quot;Vigilante&quot;, &quot;Bailiff&quot;, &quot;Deputy&quot;, &quot;Tracker&quot;, &quot;Hunter&quot;, &quot;Sheriff&quot;, &quot;Provost&quot;, &quot;Marshal&quot;, &quot;Enforcer&quot;, &quot;Executioner&quot;, &quot;Judge&quot;];
		crewRank = 
		$FdL_viper_bhg_ranks_array[Math.floor(Math.random() * $FdL_viper_bhg_ranks_array.length)];

		switch(this.FdL_viper_shipType) 
		{
			case &quot;FdL_viper_E_escape_capsule_police&quot;:
			
				this.$FdL_viper_ranks_array = 
				[&quot;Ensign&quot;, &quot;Space Junior Lieutenant&quot;, &quot;Space Lieutenant&quot;, &quot;Lt. Commander&quot;];
				crewRank = 
				$FdL_viper_ranks_array[Math.floor(Math.random() * $FdL_viper_ranks_array.length)];
			
				crewName = (&quot;the &quot; + crewRace + &quot; &quot; + crewRank + &quot; &quot; + crewName);
				crewDescription = &quot;an officer of GalCop Space Police&quot;;
				crewInsurance = (this.$getRndInteger(90, 450) + (15 * system.government));  // stable governments pay extra bonus
				crewRole = &quot;police&quot;;	
				break;

			case &quot;FdL_viper_E_escape_capsule_bhg&quot;:

				crewName = (&quot;the &quot; + crewRace + &quot; &quot; + crewRank + &quot; &quot; + crewName);
				crewDescription = &quot;a member of the Bounty Hunter Guild&quot;;
				crewInsurance = (this.$getRndInteger(90, 450) * 1.10);  // BHG got better insurance conditions
				crewRole = &quot;hunter&quot;;	
				break;
						
			case &quot;FdL_viper_E_escape_capsule_bhg_pirate&quot;:
				
				crewName = (&quot;the &quot; + crewRace + &quot; &quot; + crewRank + &quot; &quot; + crewName);
				crewDescription = &quot;a rouge member of the Bounty Hunter Guild&quot;;
				crewBounty = (this.$getRndInteger(90, 450) * 1.10) + (15 * system.government);  // stable governments pay extra bonus
				crewRole = &quot;pirate&quot;;
				break;	
			
			default: 
				break;
		};

		this.ship.setCrew
		(
			{
				name: crewName,
				short_description: crewDescription,
				role: crewRole,
				species: crewRace,
				insurance: crewInsurance,
				bounty: crewBounty
			}
		);

		// remove individual roles
		this.ship.primaryRole = &quot;escape-capsule&quot;;
	}
	else
	{
		var shipRole = this.ship.primaryRole;
		
		// if the ship got no cargo there is a 50% chance that some is added
		if(this.ship.cargoSpaceCapacity &gt; 0 &amp;&amp; this.ship.cargoSpaceUsed === 0 &amp;&amp; this.$getRndInteger(1, 2) &gt; 1)
		{
			this.ship.adjustCargo(&quot;firearms&quot;, 1);
		};
		
		// individual role of the ship, will only be called from other OXP&#39;s
		switch(shipRole) 
		{
			case &quot;viper&quot;:
			case &quot;viper-pursuit&quot;:
			case &quot;viper-interceptor&quot;:
			case &quot;FdL_viper_E_patrol&quot;:
			case &quot;FdL_viper_E_pursuit&quot;:
			case &quot;FdL_viper_E_pursuit_bhg_deputy&quot;:
			case &quot;FdL_viper_E_interceptor&quot;:	
				
				this.ship.primaryRole = &quot;police&quot;;
				break;
				
			case &quot;FdL_viper_E_pursuit_bhg&quot;:
			case &quot;FdL_viper_E_pursuit_bhg_team_01&quot;:

				this.ship.primaryRole = &quot;hunter&quot;;
				break;
			
			default: 
				break;
		};
	};
};

this.shipDied = function(whom, why)
{
	if(this.ship.hasRole(&quot;escape-capsule&quot;))
	{
		return;
	}
	else
	{
		// neutral inits first
		var podType = &quot;escape-capsule&quot;;
		var cargoSpace = this.ship.cargoSpaceCapacity;
		var cargoLoad = this.ship.cargoSpaceUsed;
		
		// remove existing pods first
		if(this.ship.equipmentStatus(&quot;EQ_ESCAPE_POD&quot;) != &quot;EQUIPMENT_UNAVAILABLE&quot;)
		{
			this.ship.removeEquipment(&quot;EQ_ESCAPE_POD&quot;);
		};

		// prepare relevant pod type
		switch(this.FdL_viper_shipType) 
		{
			case &quot;viper&quot;:
			case &quot;viper-pursuit&quot;:
			case &quot;viper-interceptor&quot;:
			case &quot;FdL_viper_E_patrol&quot;:
			case &quot;FdL_viper_E_pursuit&quot;:
			case &quot;FdL_viper_E_interceptor&quot;:

				podType = &quot;FdL_viper_E_escape_capsule_police&quot;;
				break;

			case &quot;FdL_viper_E_pursuit_bhg_deputy&quot;:
			case &quot;FdL_viper_E_pursuit_bhg&quot;:
			case &quot;FdL_viper_E_pursuit_bhg_team_01&quot;:
				
				if(this.ship.bounty &gt; 7)
				{
					podType = &quot;FdL_viper_E_escape_capsule_bhg_pirate&quot;;
				}
				else
				{
					podType = &quot;FdL_viper_E_escape_capsule_bhg&quot;;
				};
				break;
				
			default: 
				break;	
		};	
		
		// 75% chance that the pilot could eject
		if(this.$getRndInteger(1, 100) &gt; 25)
		{
			system.addShips(podType, 1, this.ship.position);
		};

		// small chance that the ship had prisoners on board (Montanas Ressource Pack 01)
		if(worldScripts[&quot;MRP01_ressource_spawn&quot;] &amp;&amp; cargoSpace &gt; 0 &amp;&amp; cargoLoad == 0 &amp;&amp; this.$getRndInteger(1, 10) &gt; 8)
		{
			system.addShips(&quot;MRP01_container_prisoners&quot;, 1, this.ship.position);
		};	
	};
};	

this.$getRndInteger = function(min, max)
{
	return Math.floor(Math.random() * (max - min + 1) ) + min;
};
</pre></td>
                </tr>
                <tr>
                    <td valign="top">Scripts/FdL_viper_carrier_conditions.js</td>
                    <td><pre>this.name			= &quot;FdL_viper_carrier_conditions&quot;;
this.author			= &quot;Montana05&quot;;
this.description	= &quot;condition script for Viper Carriers&quot;;
this.version		= &quot;0.52&quot;;
this.copyright		= &quot;2021 Montana05&quot;;
this.licence		= &quot;CC BY-NC-SA 4.0&quot;;
&quot;use strict&quot;;

this.allowSpawnShip = function(shipKey)
{
	if(shipKey == &quot;viper-carrier-player-neutral&quot; &amp;&amp; worldScripts[&quot;carriers&quot;] &amp;&amp; !worldScripts[&quot;carriers_with_turrets&quot;])
	{
		return true;
	};

	if(shipKey == &quot;viper-carrier-player-neutral-turret&quot; &amp;&amp; worldScripts[&quot;carriers&quot;] &amp;&amp; worldScripts[&quot;carriers_with_turrets&quot;])
	{
		return true;
	};

	return false;
	
};</pre></td>
                </tr>
            </table>
        </a>
    </body>
</html>
