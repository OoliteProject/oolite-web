<html>
    <head>
        <title>Expansion The Classic Mussurana</title>
        <link rel="stylesheet" href="../style.css">
    </head>
    <body>
        <table border="0" width="100%">
            <tr>
                <td>Back to <a href='../index.html'>Index</a></td>
                <td align="right"><small>Page generated: Oct 11, 2023, 3:16:49 PM</small></td>
            </tr>
        </table>

        <h1>Expansion The Classic Mussurana</h1>

        <h2>Content</h2>
        <ul>
          <li><a href="#warnings">Warnings</a></li>
          <li><a href="#manifest">Manifest</a></li>
          <li><a href="#documentation">Documentation</a></li>
          <li><a href="#equipment">0 Equipment</a></li>
          <li><a href="#ships">7 Ships</a></li>
          <li><a href="#models">0 Models</a></li>
          <li><a href="#scripts">1 Scripts</a></li>
        </ul>

          <a name="warnings">
            <h2>Warnings</h2>
            <ol>
                <li>Unknown key &#39;upload_date&#39; at https://wiki.alioth.net/img_auth.php/7/70/ClassicMussurana_v1.3.oxz!manifest.plist</li>
            </ol>
          </a>

        <a name="manifest">
        <h2>Manifest</h2>
            <table border="1">
                <tr>
                    <th></th>
                    <th>from Expansion Manager's OXP list</th>
                    <th>from Expansion Manifest</th>
                </tr>
                <tr>
                    <td>Description</td>
                    <td>A modern update of Aegidian&#39;s classic Mussurana. This beautiful ship is a luxury executive express, but is also favoured by successful bounty-hunters and is perfect for small traders with a few Credits in the bank.</td>
                    <td>A modern update of Aegidian&#39;s classic Mussurana. This beautiful ship is a luxury executive express, but is also favoured by successful bounty-hunters and is perfect for small traders with a few Credits in the bank.</td>
                </tr>
                <tr>
                    <td>Identifier</td>
                    <td>oolite.oxp.smivs.ClassicMussurana</td>
                    <td>oolite.oxp.smivs.ClassicMussurana</td>
                </tr>
                <tr>
                    <td>Title</td>
                    <td>The Classic Mussurana</td>
                    <td>The Classic Mussurana</td>
                </tr>
                <tr>
                    <td>Category</td>
                    <td>Ships</td>
                    <td>Ships</td>
                </tr>
                <tr>
                    <td>Author</td>
                    <td>Smivs</td>
                    <td>Smivs</td>
                </tr>
                <tr>
                    <td>Version</td>
                    <td>1.3</td>
                    <td>1.3</td>
                </tr>
                <tr>
                    <td>Tags</td>
                    <td></td>
                    <td></td>
                </tr>
                <tr>
                    <td>Required Oolite Version</td>
                    <td></td>
                    <td></td>
                </tr>
                <tr>
                    <td>Maximum Oolite Version</td>
                    <td></td>
                    <td></td>
                </tr>
                <tr>
                    <td>Required Expansions</td>
                    <td>
                    </td>
                    <td>
                    </td>
                </tr>
                <tr>
                    <td>Optional Expansions</td>
                    <td>
                    </td>
                    <td>
                    </td>
                </tr>
                <tr>
                    <td>Conflict Expansions</td>
                    <td>
                    </td>
                    <td>
                    </td>
                </tr>
                <tr>
                    <td>Information URL</td>
                    <td><a target="_blank" href="http://wiki.alioth.net/index.php/Mussurana">http://wiki.alioth.net/index.php/Mussurana</a></td>
                    <td><a target="_blank" href="">n/a</a></td>
                </tr>
                <tr>
                    <td>Download URL</td>
                    <td><a target="_blank" href="https://wiki.alioth.net/img_auth.php/7/70/ClassicMussurana_v1.3.oxz">https://wiki.alioth.net/img_auth.php/7/70/ClassicMussurana_v1.3.oxz</a></td>
                    <td><a target="_blank" href="http://wiki.alioth.net/index.php/File:ClassicMussurana.oxz">http://wiki.alioth.net/index.php/File:ClassicMussurana.oxz</a></td>
                </tr>
                <tr>
                    <td>License</td>
                    <td>CC-BY-NC-SA 4.0</td>
                    <td>CC-BY-NC-SA 4.0</td>
                </tr>
                <tr>
                    <td>File Size</td>
                    <td>n/a</td>
                </tr>
                <tr>
                    <td>Upload date</td>
                    <td>1610873334</td>
                </tr>
            </table>
                </a>

        <a name="documentation">
        <h2>Documentation</h2>
        <p>Also read <a href='http://wiki.alioth.net/index.php/The%20Classic%20Mussurana'>http://wiki.alioth.net/index.php/The%20Classic%20Mussurana</a></p>
        <h3>readMe.txt</h3>
        <pre>The Classic Mussurana

This expansion adds a modern update of Aegidian&#39;s classic Mussurana. This beautiful ship is a luxury executive express, but is also favoured by successful bounty-hunters and is perfect for small traders with a few Credits in the bank.
The graphics have been brought up to date and some of the coding (eg ship roles) has been brought in line with Oolite v1.80 and above. Aegidian&#39;s  original model was found to have a few minor problems, but has now been optimised, and new gun and engine sub-entities have been added. The texture designs are firmly based on the originals and the specifications have remained unchanged from the old OXP versions.

This expansion forms part of The Classic Ships suite of OXPs, but is fully self-contained and can be installed by anyone - there are no dependancies on or requirement for any other &#39;Classic Ship&#39; expansions to be installed.

Licence:-

This work is Licenced under the Creative Commons Attribution-Noncommercial-Share Alike 4.0 Unported Licence. 
To view a copy of this Licence, send a letter to Creative Commons, 171 Second Street, Suite 300, San Francisco, California, 94105, USA.

Author and credits:-

The Classic Mussurana expansion was developed by Smivs. The main model, ship design and specifications are based on the original OXPs by Giles Williams (Aegidian). The model repair, sub-entities and texture are by Smivs.

v.1.3  
Update to correct role weight code in shipdata.
</pre>
        </a>

        <a name="equipment">          
        <h2>Equipment</h2>
            This expansion declares no equipment. This may be related to warnings.
        </a>

        <a name="ships">    
        <h2>Ships</h2>
            <table>
                <tr>
                    <th>Name</th>
                </tr>
                <tr>
                    <td><a href="../ships/classicShipsEngine1.html">classicShipsEngine1</a></td>
                </tr>
                <tr>
                    <td><a href="../ships/classicShipsGun.html">classicShipsGun</a></td>
                </tr>
                <tr>
                    <td><a href="../ships/classic_mussurana_hunter.html">classic_mussurana_hunter</a></td>
                </tr>
                <tr>
                    <td><a href="../ships/classic_mussurana_pirate.html">classic_mussurana_pirate</a></td>
                </tr>
                <tr>
                    <td><a href="../ships/classic_mussurana_player.html">classic_mussurana_player</a></td>
                </tr>
                <tr>
                    <td><a href="../ships/classic_mussurana_template.html">Mussurana</a></td>
                </tr>
                <tr>
                    <td><a href="../ships/classic_mussurana_trader.html">classic_mussurana_trader</a></td>
                </tr>
            </table>
        </a>

        <a name="models">    
        <h2>Models</h2>
            This expansion declares no models. This may be related to warnings.
        </a>

        <a name="scripts">    
        <h2>Scripts</h2>
            <table>
                <tr>
                    <th>Path</th>
                </tr>
                <tr>
                    <td valign="top">Scripts/classicMussuranaScript.js</td>
                    <td><pre>&quot;use strict&quot;; 

// Standard attributes 
this.name           = &quot;classicMussuranaScript.js&quot;; 
this.author         = &quot;Smivs&quot;; 
this.copyright	    = &quot;Â© Smivs&quot;; 
this.licence        = &quot;Creative Commons Attribution-Noncommercial-Share Alike 4.0 Unported License&quot;; 
this.version        = &quot;1.3&quot;; 
this.description    = &quot;Script to render ship derelict upon ejection of pilot.&quot; 


this.shipLaunchedEscapePod = function()
{
  this.switchFlashersAITimer = new Timer(this, this.$switchFlashersOff,8); // timer to switch off flashers after 8 seconds
  this.switchHullTexTimer = new Timer(this, this.$switchHullTex,12); // timer to switch off hull lights emission map after 12 seconds
  this.rotateDerelictTimer = new Timer(this, this.$rotateDerelict,25); // timer to start derelict rotation after 25 seconds
  this.switchEngineTexTimer = new Timer(this, this.$switchEngineTex,35); // timer to switch engines textures to derelict version after 35 seconds
}
this.$switchFlashersOff = function()
{
  this.ship.lightsActive = false; // turns flashers off
}
this.$switchHullTex = function()
{
  var $classicShipsTexture = this.ship.scriptInfo.classicShipsTexture; // uses scriptInfo key to build ship&#39;s default texture name
  var $classicShipsDiffuse = this.ship.scriptInfo.classicShipsDiffuse; // uses scriptInfo key to build ship&#39;s diffuse_map name
  var $classicShipsLighting = this.ship.scriptInfo.classicShipsLighting; // uses scriptInfo key to build ship&#39;s emission_map name
  var $classicShipsDerelict = this.ship.scriptInfo.classicShipsDerelict; // uses scriptInfo key to build derelict emission_map name
  var $classicShipsNormal = this.ship.scriptInfo.classicShipsNormal; // uses scriptInfo key to build ship&#39;s normal_map name
  var $classicShipsSpecular = this.ship.scriptInfo.classicShipsSpecular; // uses scriptInfo key to build ship&#39;s specular_map name
  var material = new Object(); // declare variable
  material[$classicShipsTexture] = {diffuse_map:$classicShipsDiffuse, emission_map:$classicShipsDerelict, normal_map:$classicShipsNormal, specular_map:$classicShipsSpecular}; // set up material entry
  this.ship.setMaterials(material); // apply material
}
this.$rotateDerelict = function()
{
  this.rotateVector = Vector3D.randomDirection(); // creates a random axis of rotation.
  this.rotateSpeedFactor = (Math.random() * (0.05) + 0.05); // creates a random rotate speed factor between 0.05 and 0.1 - 0.1 will result in a rotation speed of approx 1 full rotation every 63 seconds, 0.05 in a rotation speed of approx 1 full rotation every 126 seconds.
  this.rotateDerelictCallBack = addFrameCallback(this.rotateFunction.bind(this)); // create FrameCallback
}
this.rotateFunction = function(delta) // delta is the time in game seconds since the last frame.
{
  if (!this.ship.isValid){removeFrameCallback(this.rotateDerelictCallback);delete this.rotateDerelictCallback;return;} // end FrameCallback is ship has died;
  if (delta === 0){return;} // do nothing if game is paused;
  var newOrientation = this.ship.orientation.rotate(this.rotateVector,delta*this.rotateSpeedFactor); // calculates new orientation, using delta as a factor so that rotation speed is constant across varying frame rates. delta*this.rotateSpeedFactor is a value in radians. There are approx 6.3 radians in a full rotation.
  this.ship.orientation = newOrientation; // applies new orientation;
}
this.$switchEngineTex = function()
{
  var $onTexture; // declare variable
  var $offTexture; //declare variable
  var material = new Object(); // declare variable
  var subents = this.ship.subEntities; // create array of subents
  var counter = 0; // set up loop to check if subent is an engine and if so change texture to derelict version
  var subentsLength = subents.length;
  for (counter = 0; counter &lt; subentsLength;counter++)
    {
      if (subents[counter].scriptInfo.engineOnTexture)
	{
	  $onTexture = subents[counter].scriptInfo.engineOnTexture; // uses scriptInfo key to build engine texture name
	  $offTexture = subents[counter].scriptInfo.engineOffTexture; // uses scriptInfo key to build derelict engine texture name
	  material[$onTexture] = {emission_map:$offTexture}; // set up material entry
	  subents[counter].setMaterials(material); // sets material
	}
    }
}
this.entityDestroyed = function()
// stop timers
{
  if(this.switchFlashersAITimer)
    {
      if (this.switchFlashersAITimer.isRunning) 
        {
          this.switchFlashersAITimer.stop();
          delete this.switchFlashersAITimer;
        }
     }
  if(this.switchHullTexTimer)
     {
       if (this.switchHullTexTimer.isRunning) 
         {
           this.switchHullTexTimer.stop();
           delete this.switchHullTexTimer;
         }
     }
  if(this.rotateDerelictTimer)
     {
       if (this.rotateDerelictTimer.isRunning) 
         {
           this.rotateDerelictTimer.stop();
           delete this.rotateDerelictTimer;
         }
      }
  if(this.switchEngineTexTimer)
     {
       if (this.switchEngineTexTimer.isRunning) 
         {
           this.switchEngineTexTimer.stop();
           delete this.switchEngineTexTimer;
         }
      }
}

</pre></td>
                </tr>
            </table>
        </a>
    </body>
</html>
