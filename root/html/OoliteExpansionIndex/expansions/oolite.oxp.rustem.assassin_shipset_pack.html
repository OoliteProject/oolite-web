<html>
    <head>
        <title>Expansion Assassin Shipset Pack</title>
        <link rel="stylesheet" href="../style.css">
    </head>
    <body>
        <table border="0" width="100%">
            <tr>
                <td>Back to <a href='../index.html'>Index</a></td>
                <td align="right"><small>Page generated: Oct 11, 2023, 3:16:49 PM</small></td>
            </tr>
        </table>

        <h1>Expansion Assassin Shipset Pack</h1>

        <h2>Content</h2>
        <ul>
          <li><a href="#warnings">Warnings</a></li>
          <li><a href="#manifest">Manifest</a></li>
          <li><a href="#documentation">Documentation</a></li>
          <li><a href="#equipment">4 Equipment</a></li>
          <li><a href="#ships">153 Ships</a></li>
          <li><a href="#models">0 Models</a></li>
          <li><a href="#scripts">14 Scripts</a></li>
        </ul>

          <a name="warnings">
            <h2>Warnings</h2>
            <ol>
                <li>Required Expansions mismatch between OXP Manifest and Expansion Manager at character position 0062 (DIGIT ZERO vs LATIN SMALL LETTER N)</li>
                <li>Optional Expansions mismatch between OXP Manifest and Expansion Manager at character position 0070 (DIGIT ZERO vs LATIN SMALL LETTER N)</li>
                <li>Unresolved dependency reference to oolite.oxp.DTT.Tomahawk.Paradox:0</li>
                <li>Unresolved dependency reference to oolite.oxp.DTT.Wraith.Paradox:0</li>
                <li>Unknown key &#39;upload_date&#39; at https://wiki.alioth.net/img_auth.php/b/ba/Assassin_pack_shipset.oxz!manifest.plist</li>
            </ol>
          </a>

        <a name="manifest">
        <h2>Manifest</h2>
            <table border="1">
                <tr>
                    <th></th>
                    <th>from Expansion Manager's OXP list</th>
                    <th>from Expansion Manifest</th>
                </tr>
                <tr>
                    <td>Description</td>
                    <td>Add ships from Random Hits, Feudal States and other ship OXPs to the Ooniverse for ambiance and challenge on the parcel and passenger missions.</td>
                    <td>Add ships from Random Hits, Feudal States and other ship OXPs to the Ooniverse for ambiance and challenge on the parcel and passenger missions.</td>
                </tr>
                <tr>
                    <td>Identifier</td>
                    <td>oolite.oxp.rustem.assassin_shipset_pack</td>
                    <td>oolite.oxp.rustem.assassin_shipset_pack</td>
                </tr>
                <tr>
                    <td>Title</td>
                    <td>Assassin Shipset Pack</td>
                    <td>Assassin Shipset Pack</td>
                </tr>
                <tr>
                    <td>Category</td>
                    <td>Ships</td>
                    <td>Ships</td>
                </tr>
                <tr>
                    <td>Author</td>
                    <td>Rustem</td>
                    <td>Rustem</td>
                </tr>
                <tr>
                    <td>Version</td>
                    <td>0.2.2</td>
                    <td>0.2.2</td>
                </tr>
                <tr>
                    <td>Tags</td>
                    <td></td>
                    <td></td>
                </tr>
                <tr>
                    <td>Required Oolite Version</td>
                    <td></td>
                    <td></td>
                </tr>
                <tr>
                    <td>Maximum Oolite Version</td>
                    <td></td>
                    <td></td>
                </tr>
                <tr>
                    <td>Required Expansions</td>
                    <td>
                            <li>oolite.oxp.spara.random_hits:0</li>
                            <li>oolite.oxp.Ramirez.FeudalStates:0</li>
                            <li>oolite.oxp.Thargoid.Stealth:0</li>
                    </td>
                    <td>
                            <li>oolite.oxp.spara.random_hits:</li>
                            <li>oolite.oxp.Ramirez.FeudalStates:</li>
                            <li>oolite.oxp.Thargoid.Stealth:</li>
                    </td>
                </tr>
                <tr>
                    <td>Optional Expansions</td>
                    <td>
                            <li>oolite.oxp.captain_beatnik.Pitviper2:0</li>
                            <li>oolite.oxp.DTT.Tomahawk.Paradox:0</li>
                            <li>oolite.oxp.DTT.Wraith.Paradox:0</li>
                            <li>oolite.oxp.Robin.Sonoran:0</li>
                            <li>oolite.oxp.UK_Eliter.SuperSidewinder:0</li>
                            <li>oolite.oxp.redspear.new_lasers:0</li>
                            <li>oolite.oxp.Norby.Sniper_Gun:0</li>
                    </td>
                    <td>
                            <li>oolite.oxp.captain_beatnik.Pitviper2:</li>
                            <li>oolite.oxp.DTT.Tomahawk.Paradox:</li>
                            <li>oolite.oxp.DTT.Wraith.Paradox:</li>
                            <li>oolite.oxp.Robin.Sonoran:</li>
                            <li>oolite.oxp.UK_Eliter.SuperSidewinder:</li>
                            <li>oolite.oxp.redspear.new_lasers:</li>
                            <li>oolite.oxp.Norby.Sniper_Gun:</li>
                    </td>
                </tr>
                <tr>
                    <td>Conflict Expansions</td>
                    <td>
                    </td>
                    <td>
                    </td>
                </tr>
                <tr>
                    <td>Information URL</td>
                    <td><a target="_blank" href="http://aegidian.org/bb/viewtopic.php?f=4&amp;t=19169">http://aegidian.org/bb/viewtopic.php?f=4&amp;t=19169</a></td>
                    <td><a target="_blank" href="">n/a</a></td>
                </tr>
                <tr>
                    <td>Download URL</td>
                    <td><a target="_blank" href="https://wiki.alioth.net/img_auth.php/b/ba/Assassin_pack_shipset.oxz">https://wiki.alioth.net/img_auth.php/b/ba/Assassin_pack_shipset.oxz</a></td>
                    <td><a target="_blank" href="http://wiki.alioth.net/img_auth.php/b/ba/Assassin_pack_shipset.oxz">http://wiki.alioth.net/img_auth.php/b/ba/Assassin_pack_shipset.oxz</a></td>
                </tr>
                <tr>
                    <td>License</td>
                    <td>CC-BY-NC-SA 4.0</td>
                    <td>CC-BY-NC-SA 4.0</td>
                </tr>
                <tr>
                    <td>File Size</td>
                    <td>n/a</td>
                </tr>
                <tr>
                    <td>Upload date</td>
                    <td>1610873454</td>
                </tr>
            </table>
                </a>

        <a name="documentation">
        <h2>Documentation</h2>
        <p>Also read <a href='http://wiki.alioth.net/index.php/Assassin%20Shipset%20Pack'>http://wiki.alioth.net/index.php/Assassin%20Shipset%20Pack</a></p>
        <h3>ReadMe &amp; License.txt</h3>
        <pre>Assassin Shipset Pack OXP by Rustem

This OXP is released under the Creative Commons Attribution - Non-Commercial - Share Alike 4.0 license.
You are free to use and distribute this OXP on non-commercial basis.
Rebundling of this OXP within another distribution is permitted as long as it is unchanged.
Any mods/derivatives of this OXP must be distributed under another names.
The license information (either as this file or merged into a larger one) must be included in the OXP.

------------------------------------------------------------------------

Credits and Thanks:

spara - Random Hits Shipset boss spawn code.
Ramirez - Feudal States.
Stranger - Feudal Raiders.
Thargoid - Stealth.
Nick Rogers - GalCop&#39;s Most Wanted.
And all&#39;s authors of the additional ships OXP.

------------------------------------------------------------------------

Overview
========

 Add ships from Random Hits, Feudal States and other ship OXPs to the Ooniverse for ambiance and challenge on the parcel and passenger missions.

 Inspired by spara&#39;s Random Hits Shipset OXP, also by author&#39;s ships OXP.

 This OXP introduces:
 - dangerous assassins in more rich anarchy systems.
 - wild feudal raiders in feudal systems;
 - armoury and stealth ships in higher tech-level unstable systems (Multi-Government, Dictatorship, Communist);

 So this OXP added more regional specific for assassins roles, assigned a home system(WIP).

 These ships may take incursions into systems in 7 LY range from basic system also.
 Feudal ships specifications slightly rebalanced. Probability of incursions depends of local system government: more stable system is safer.
 Also added this ships and sniper gun ships(Asp SG and Ferdelance SG) as external dependency into the RH(Random Hits) missions.

Required OXP&#39;s
==============

 You need The Random Hits, The Feudal States and The Thargoid&#39;s Stealth OXP/OXZ installed to use this OXP!

Optional OXP&#39;s
==============

 Required for expansion of the amount armoury and stealth ships):

 - DTT Tomahawk (D.T.T. Ship Builders Inc.)
 - DTT Wraith  (D.T.T. Ship Builders Inc.)
 - Pitviper Mark II (Ecaptain_beatnik)
 - Super Sidewinder (UK_Eliter)
 - Sonoran (author - Robin. No in the exp. manager, found on the Oolite Discussion Forum: http://www.aegidian.org/bb/viewtopic.php?f=4&amp;t=15451)
 - Asp SG, Constrictor SG, Ferdelance SG (from The Sniper Gun and The Sniper Gun Rebalancer OXPs, by Norby)
 - Sidewinder (Z-GrOovY Variety Pack OXP, authors: Dertien, Griff, Amah)

 The expansion of the amount ships by steps:
 - Decrease a weight of roles slightly in the shipdata-overrides.plist.
 - Increase a weight of role and adjustment of the spawning by condition script in the selective systems.

 - New Lasers OXP:
 
 Released the some a laser setting from this OXP for the armoury and stealth ships.
 If New lasers OXP is not installed, then attempted setup default laser(P,B,M), otherwise sometime get a heavy-weapon assassin in the gameplay (seen shipdata.plist).
 The some ship included to the blacklist for avoid a weapons setup by worldscript.
 
 The interaction with Missions OXPs:

 - Testing an interaction with the GalCop Missions OXP for appearing assassins in the Hit Team(WIP).
 - Testing an interaction with the GC Most Wanted OXP for appearing armoury and stealth ships with assassin roles in the GC MW list(WIP).

 - Random Hits Missions:

 Adds the armoury and stealth ships to RandomHits-mission. For the marks and hunters was disabled a condition regional limitations.
 Also this pack for RandomHits-mission will added:
      - Adds the GalTech Escort Fighter(level 1) and pilots from the Feudal States OXP(level 1) to marks role.
      - Adds the Barracuda as big boss fighter, big boss, mark(2), markguard, mark revenge, patrol.
      - Adds the DTT Tomahawk, DTT Wraith, Sonoran, Super Sidewinder to big boss fighter, mark, markguard, mark revenge, patrol.
      - Adds the Sidewinder(from oolite-core as stealth ship) to marks guard.
      - Adds the Sidewinder from the Z-GrOovY Variety Pack OXP to marks role(level 1, 2), markguard, mark revenge and big boss fighter.
      - Adds pilots with sniper guns (Sniper Guns OXP, by Norby). Addition to sets - big boss fighter, big boss guard, big boss, mark, markguard, revenge, patrol. The Iguana SG, Asp SG and Ferdelance SG are added to the level 3 ships in the RH-classification of the marks. The Krait SG and Boa SG are added to the level 2 marks.
      - Adds a new role: &#39;random_hits_attack_fighter&#39; for small fighter.
      - Adds the GalTech Escort Fighter to small fighters (as GalTech Interceptor to worm missile and escort fighter).
      - Sometimes marks has a 8 Ship-Launched Fighters (Light, Swarm, Raider, GalTech Interceptor, Shark(2) and King(2) : like external dependency from the Fighters OXP, by Norby) as the Worm Attack Drone (&#39;random_hits_attackworm_MISSILE&#39; role with little weightings).
      - Adds the Anaconda, Boa, Boa Mk2, Boa SG to marks with ship-launched fighters and with small escort fighters.
      - Adds 3 drones like worm missile (external dependency from the Armoury OXP, Thargoid).


Special Note
============
 This OXP is what is called a &quot;work-in-progress&quot;. What that means is, what you have in your hands may not be the final version of the OXP. In fact there might be parts that are broken and could potentially unbalance the game. This isn&#39;t by-design, and hopefully there aren&#39;t any issues like that, but be aware that in many ways this is an experimental OXP. I&#39;m changing a lot of core functionality which opens the door for all sorts of unforeseen consequences, particularly when it comes to other OXP&#39;s. If you decide to help me in the process of polishing this package, please report any bugs or unexpected outcomes. Don&#39;t assume someone else has noticed it - if two people report a bug it makes tracking the bug down so much easier!

 (WIP)
 The some assassins has an naval energy unit (NEU) via simulated the energy recharge rate equals 10.79 (4.15 * 2.6).
 So, for correctly sets of the recharge rates recommended to install the N-Shields or NPC Energy Units(need to upgade) OXPs and etc.

Discussion
==========
 This OXP is discussed at this forum links: 
 
 - http://aegidian.org/bb/viewtopic.php?f=4&amp;t=19169
 - http://roolite.org/coriolis/viewtopic.php?f=10&amp;t=720&amp;sid=9f99a5e23a4bcc3da6c3db1e1d0d8e51

Download
========
 The OXP&#39;s files will updated on the forums.

 Temporary links:

 - OXP: https://app.box.com/s/kptjfquzi0le3mvmy5rd33vuxzf9kc3z
 - OXZ: https://app.box.com/s/pcbxs7g1lz4z3g28ip38qzxf0pddq0zo

Version History
===============

 30.12.2019 - Version 0.3.0
 - Clearing and corrected errors in shipdata.plist.
 - Corrects the system.info mechanics for spawnArmouryAssassins and spawnFeudalAssassins.

 16.05.2019 - Version 0.2.2
 - Adds the Sidewinder(oolite-core-ship) and Sidewinder from the Z-GrOovY Variety Pack OXP.
 - Adds the Wolf Mark I(from the Simon B&#39;s Favorites OXP) and Wolf Mark II to armoury ships.
 - Improvement of the Drone AI for correctly set as escort. Set scanner range for Captured Thargons to 25km.
 - Improvement the routines for set bounty in main script.
 - Set &#39;telescope = 1;&#39; in script_info the Sonoran, Sidewinder, Super Sidewinder(as stealth ship) and Drones(as small entity then usual ship) for detect in only normal scanner range.
 Addition to the RH missions:
 - Adds the Sidewinder from the Z-GrOovY Variety Pack OXP to marks roles and etc.

 15.04.2019 - Version 0.2.1
 - Adds the interaction with GalCop Missions OXPs for Hit Team Assassins.
 - Divided the some ships on the assassin and pirate roles. For assassins set bounty to zero.
 - Fix an error ship name, corrected a max energy in feudals ships.
 - Adjusted in shipdata vars: pilot, script_info(randomshipnames and skilled_npc_role), disable label &#39;extra&#39; in the RH-ship name.

 06.04.2019 - Version 0.2.0
 Addition to the RH missions:
 - Adds a new lasers for some marks (fixed in the main script and ship scripts).
 - Adds Captured Thargons for extraMissile.
 - Logging is off.

 24.12.2018 - Version 0.1.9
 Addition to the RH missions:
 - Sets an escape-capsule model for non-mark roles (for avoid a log errors in the Plasma era).
 - Added the GalTech Escort Fighter to small fighters (as GalTech Interceptor to worm missile and escort fighter).
 - Added the Worm Attack Drone and Adder to small fighters (like small fighter) for greater variety into escort fighter.
 - Added 2 drones like worm missile (external dependency from the Armoury OXP, Thargoid).
 - Added the Boa, Boa Mk2, Boa SG, GalTech Escort Fighter(level 1) to mark.
 - Added a pilots from the Feudal States OXP(level 1) to mark role.
 Other tweaks:
 - Adds the templates for feudal ships.
 - Adds &#39;_setStealthToShip&#39; and &#39;_safeSystemsForShipset&#39; function to main script and stealth-shipset script.
 - Adjustments an energy recharge rate for order to correctly simulated Naval Energy Unit(NEU) with NPC Military Shield Enhancer(MSE) in Barracuda and Super Sidewinder.
 - Formatted the JS code: AIs, plist and scripts.

 31.10.2018 - Version 0.1.8 - addition to the RH missions
 - Added the DTT Tomahawk to the list of the RH-targets (level 1).
 - The Ferdelance SG are added to the Level 3 Ships in the RH-classification of the marks(level 3).
 - Added a 8 fighters (Light, Swarm, Raider, GalTech Interceptor, Shark and King : external dependency from the Fighters OXP, Norby) as the worm missile (&#39;random_hits_attackworm_MISSILE&#39; role).
 - Other a small fixes.

 27.10.2018 - Version 0.1.7 - addition to the RH missions
 - Added the pack&#39;s ships and sniper gun ships(asp-sg and ferdelance-sg) to the RH missions (fighters, marks, hunters and etc.).
 - Fixed an error adjacent system in the condition script for assassins from anarchy system.
 - Added the script_info in the shipdata for randomshipnames.
 - Added a condition script for the some RH-ships.

 27.12.2017 - Version 0.1.6
 - Added the Asp SG, Constrictor SG, Ferdelance SG (from Sniper Gun and Sniper Gun Rebalancer OXPs, by Norby) ships.
 - Added the some ships to stealth roles.

 08.12.2017 - Version 0.1.5
 - Added encode and decode personality for save information about weapons, equipments for GC MW escorts.
 - The military jammer is disabled for Barracuda and in the ship script due to got heavy ship and no scanning capability him by warrant scanner.

 06.12.2017 - Version 0.1.4
 - Moved the ship script function for setting a equipments, wanted ship vars into the worldScript.
 - Adjustments the setting the New Lasers. Reorder of list lasers.
 - Added the update of the ship data in game-time for correct integration with GC MW OXP.
 - Fixed the setting weapon for hunter role.

 05.12.2017 - Version 0.1.3
 - Enable an addition of escorts in GC MW list at the assassin leader.
 - Moved the ship script functions for setting a roles, AI, bounty, weapons into the worldScript.
 - Added integration options for &quot;Bounty System&quot; OXP: add _hiddenBounty property to ships (in prev. version old name - initBounty).
 - Added calculates an array of safe systems for shipset(enable for assassin roles).
 - Adjustments a chance for set equipments for armoury assassins.
 - Bug fixes.

 01.12.2017 - Version 0.1.2
 - Add transparent value in exhaust emissive color for ship Barracuda.
 - Fixed a names for D.T.T. Ship Builders Inc. ships.
 - Addition escorts in GC MW list is disabled due to errors of the spawning escorts after jump.
 - Bug fixes.

 29.11.2017 - Version 0.1.1
 - Added integration options for &quot;Bounty System - Most Wanted&quot; OXP (armoury assassins: ship script + condition script) and &quot;Thargoids Warfare&quot; OXP(condition script).
 - Added a logging switch for set AI, weapons.
 - Code refactoring and some clearing.

 15.11.2017 - Version 0.1.0
 - Ship script: Added  setting the ship&#39;s crew of the escape pod for replaced bounty to more value (legal status + init bounty).
 - Clearing a code. Delete a some comments [//...].

 14.11.2017 - Version 0.0.9
 - Added a part code from stealth ships script to feudal ship script for check autoWeapons, bounty and AI.
 - Adjustments a bounty and max energy of the feudal ships.

 13.11.2017 - Version 0.0.8
 - Added worldscript blacklist for set weapons.
 - For escape-pod of the stealth ships added routines to addition a bounty by re-setup of crew.
 - Fixed a error shipKeys.

 12.11.2017 - Version 0.0.7
 - Optimized a scripts for case: New lasers OXP is not installed. Added a level 6: FM, [NONE, AB] (not used in defaul default core-function).
 - Adjustments the Super-Sidewinder (light and medium roles) for new version of the Super Sidewinder OXP. Edited a shipKey for some ships.
 - Added the Pitviper 2 like a hunter medium.
 - Modified an exhaust and exhaust color for Barracuda (test).

 11.11.2017 - Version 0.0.6
 - Corrected to routines for check AI and addition of new lasers.
 - Decrease a weight of roles slightly in the shipdata-overrides.plist.
 - Adjustments to shipdata.plist file.

 10.11.2017 - Version 0.0.5
 - Assigned the ship script for stealth ships (ship_assassin_tech_shipset.js) to the optional ships.
 - Adjustments to routines for addition of new lasers for stealth ships.
 - Added a bounty for optional ships in higher tech-level systems.
 - Fixed some shipKey and roles for compatibility with routines to addition of new lasers.

 09.11.2017 - Version 0.0.4
 - Added a routines to addition of new lasers for stealth ships (Barracuda) in the script: ship_assassin_tech_shipset.js.
 - Adjustments to shipdata.plist file.

 07.11.2017 - Version 0.0.3.
 - Added the ship script for feudal ship (ship_assassin_feudal_shipset.js).
 - Added routines to check bounty for assassin ship based on the oolite-populator rules.
 - Updates to shipdata for feudal and stealth raider ships(ship script, script_info, add roles, etc.).

 03.11.2017 - Version 0.0.2. Set weight of assassin roles to value 0.05 for ships from Random Hits Shipset OXP.

 02.11.2017 - Version 0.0.1. Initial beta-release.

------------------------------------------------------------------------

Note:

	Simon B&#39;s Favorites v1.1.3 (oolite.oxp.spara.sb-faves)  will adds 4 ships to the RH-missions:
             - Aphid, Cobra Clipper, Cobra Rapier, Cobra Cutlass.

	Staer9&#39;s Shipset v1.3.3 (oolite.oxp.staer9.staer9_shipset) will adds 13 ships to the RH-missions.


Templates:

 Added characters.plist file and template pilot script.

------------------------------------------------------------------------

Help info:

{
  &quot;oolite-character&quot; = {
    &quot;bounty&quot; =           10;
    &quot;insurance&quot; =        178;
    &quot;legal_status&quot; =     10;
    &quot;name&quot; =             &quot;Captain McArthur&quot;;
    &quot;origin&quot; =           151;
    &quot;random_seed&quot; =      &quot;0 0 0 0 0 0&quot;;
    &quot;role&quot;  =              pirate;
    &quot;short_description&quot; = &quot;an unworthy captain from hell&quot;;
    &quot;script_actions&quot; =   (
                           &quot;...code to be executed...&quot;
                           )
    &quot;script&quot; =           &quot;myCharacterScript.js&quot;;
  }
}

// * Characters for the Jaguar Company.

{
    jaguar-company-pilot =
    {
        name = &quot;a pilot of Jaguar Company&quot;;
        /* Show a rescue message. Actual insurance set in script. */
        insurance = 500;
        bounty = 0;
        legal_status = 0;
        role = &quot;jaguar_company&quot;;
        script = &quot;jaguar_company_pilot.js&quot;;
    };
}

------------------------------------------------------------------------
</pre>
        </a>

        <a name="equipment">          
        <h2>Equipment</h2>
            <table>
                <tr>
                    <th>Name</th>
                    <th>Visible</th>
                    <th>Cost [deci-credits]</th>
                    <th>Tech-Level</th>
                </tr>
                <tr>
                    <td><a href="../equipment/EQ_NPC_CD_MINE.html">Combat Drone</a></td>
                    <td>yes</td>
                    <td align="right">500</td>
                    <td align="center">101+</td>
                </tr>
                <tr>
                    <td><a href="../equipment/EQ_NPC_CT_MINE.html">Reprogram Thargon Fighter</a></td>
                    <td>yes</td>
                    <td align="right">500</td>
                    <td align="center">101+</td>
                </tr>
                <tr>
                    <td><a href="../equipment/EQ_NPC_KD_MINE.html">Kamikaze Drone</a></td>
                    <td>yes</td>
                    <td align="right">500</td>
                    <td align="center">101+</td>
                </tr>
                <tr>
                    <td><a href="../equipment/EQ_NPC_SWARM_MISSILE.html">Swarm Fighter Group</a></td>
                    <td>yes</td>
                    <td align="right">500</td>
                    <td align="center">101+</td>
                </tr>
            </table>
        </a>

        <a name="ships">    
        <h2>Ships</h2>
            <table>
                <tr>
                    <th>Name</th>
                </tr>
                <tr>
                    <td><a href="../ships/CT_launcher_shipset.html">Thargon Fighter launcher</a></td>
                </tr>
                <tr>
                    <td><a href="../ships/CT_thargon_shipset.html">Reprogrammed Fighter</a></td>
                </tr>
                <tr>
                    <td><a href="../ships/asp_sg_Assassin_AP_shipset.html">asp_sg_Assassin_AP_shipset</a></td>
                </tr>
                <tr>
                    <td><a href="../ships/asp_sg_Hunter_AP_shipset.html">asp_sg_Hunter_AP_shipset</a></td>
                </tr>
                <tr>
                    <td><a href="../ships/cb68_pitviper2_Assassin_AP_shipset.html">cb68_pitviper2_Assassin_AP_shipset</a></td>
                </tr>
                <tr>
                    <td><a href="../ships/cb68_pitviper2_Hunter_AP_shipset.html">cb68_pitviper2_Hunter_AP_shipset</a></td>
                </tr>
                <tr>
                    <td><a href="../ships/constrictor_sg_Assassin_AP_shipset.html">constrictor_sg_Assassin_AP_shipset</a></td>
                </tr>
                <tr>
                    <td><a href="../ships/constrictor_sg_Hunter_AP_shipset.html">constrictor_sg_Hunter_AP_shipset</a></td>
                </tr>
                <tr>
                    <td><a href="../ships/drones_combatDrone_shipset.html">drones_combatDrone_shipset</a></td>
                </tr>
                <tr>
                    <td><a href="../ships/drones_kamikazeDrone_shipset.html">drones_kamikazeDrone_shipset</a></td>
                </tr>
                <tr>
                    <td><a href="../ships/dtttomahawk_Hunter_AP_shipset.html">dtttomahawk_Hunter_AP_shipset</a></td>
                </tr>
                <tr>
                    <td><a href="../ships/dtttomahawk_Pirate_AP_shipset.html">dtttomahawk_Pirate_AP_shipset</a></td>
                </tr>
                <tr>
                    <td><a href="../ships/dttwraith_Hunter_AP_shipset.html">dttwraith_Hunter_AP_shipset</a></td>
                </tr>
                <tr>
                    <td><a href="../ships/dttwraith_Pirate_AP_shipset.html">dttwraith_Pirate_AP_shipset</a></td>
                </tr>
                <tr>
                    <td><a href="../ships/ferdelance_sg_Assassin_AP_shipset.html">ferdelance_sg_Assassin_AP_shipset</a></td>
                </tr>
                <tr>
                    <td><a href="../ships/ferdelance_sg_Hunter_AP_shipset.html">ferdelance_sg_Hunter_AP_shipset</a></td>
                </tr>
                <tr>
                    <td><a href="../ships/feudal_EscortHunter_AP_shipset.html">feudal_EscortHunter_AP_shipset</a></td>
                </tr>
                <tr>
                    <td><a href="../ships/feudal_Escort_AP_shipset.html">feudal_Escort_AP_shipset</a></td>
                </tr>
                <tr>
                    <td><a href="../ships/feudal_escort_shipset_template.html">Ritter-Klasse Jaeger</a></td>
                </tr>
                <tr>
                    <td><a href="../ships/feudal_knight_Assassin_AP_shipset.html">feudal_knight_Assassin_AP_shipset</a></td>
                </tr>
                <tr>
                    <td><a href="../ships/feudal_knight_Hunter_AP_shipset.html">feudal_knight_Hunter_AP_shipset</a></td>
                </tr>
                <tr>
                    <td><a href="../ships/feudal_knight_Pirate_AP_shipset.html">feudal_knight_Pirate_AP_shipset</a></td>
                </tr>
                <tr>
                    <td><a href="../ships/feudal_knight_shipset_template.html">Ritter-Class Jaeger</a></td>
                </tr>
                <tr>
                    <td><a href="../ships/feudal_lord_Assassin_AP_shipset.html">feudal_lord_Assassin_AP_shipset</a></td>
                </tr>
                <tr>
                    <td><a href="../ships/feudal_lord_Hunter_AP_shipset.html">feudal_lord_Hunter_AP_shipset</a></td>
                </tr>
                <tr>
                    <td><a href="../ships/feudal_lord_Pirate_AP_shipset.html">feudal_lord_Pirate_AP_shipset</a></td>
                </tr>
                <tr>
                    <td><a href="../ships/feudal_lord_shipset_template.html">Freiherr-Class Korvette</a></td>
                </tr>
                <tr>
                    <td><a href="../ships/feudal_prince_Assassin_AP_shipset.html">feudal_prince_Assassin_AP_shipset</a></td>
                </tr>
                <tr>
                    <td><a href="../ships/feudal_prince_Hunter_AP_shipset.html">feudal_prince_Hunter_AP_shipset</a></td>
                </tr>
                <tr>
                    <td><a href="../ships/feudal_prince_Pirate_AP_shipset.html">feudal_prince_Pirate_AP_shipset</a></td>
                </tr>
                <tr>
                    <td><a href="../ships/feudal_prince_shipset_template.html">Prinz-Class Zerstoerer</a></td>
                </tr>
                <tr>
                    <td><a href="../ships/fighters_swarm_shipset.html">fighters_swarm_shipset</a></td>
                </tr>
                <tr>
                    <td><a href="../ships/random_hits_attackfighter-galtech.html">random_hits_attackfighter-galtech</a></td>
                </tr>
                <tr>
                    <td><a href="../ships/random_hits_attackfighter-galtech_interceptor.html">GalTech Interceptor</a></td>
                </tr>
                <tr>
                    <td><a href="../ships/random_hits_attackfighter-ironking.html">random_hits_attackfighter-ironking</a></td>
                </tr>
                <tr>
                    <td><a href="../ships/random_hits_attackfighter-king.html">random_hits_attackfighter-king</a></td>
                </tr>
                <tr>
                    <td><a href="../ships/random_hits_attackfighter-light.html">random_hits_attackfighter-light</a></td>
                </tr>
                <tr>
                    <td><a href="../ships/random_hits_attackfighter-raider.html">random_hits_attackfighter-raider</a></td>
                </tr>
                <tr>
                    <td><a href="../ships/random_hits_attackfighter-shark.html">random_hits_attackfighter-shark</a></td>
                </tr>
                <tr>
                    <td><a href="../ships/random_hits_attackfighter-steelshark.html">random_hits_attackfighter-steelshark</a></td>
                </tr>
                <tr>
                    <td><a href="../ships/random_hits_attackfighter-swarm.html">random_hits_attackfighter-swarm</a></td>
                </tr>
                <tr>
                    <td><a href="../ships/random_hits_attackfighter_adder.html">random_hits_attackfighter_adder</a></td>
                </tr>
                <tr>
                    <td><a href="../ships/random_hits_attackfighter_attackworm.html">random_hits_attackfighter_attackworm</a></td>
                </tr>
                <tr>
                    <td><a href="../ships/random_hits_attackworm-galtech_interceptor.html">random_hits_attackworm-galtech_interceptor</a></td>
                </tr>
                <tr>
                    <td><a href="../ships/random_hits_big_boss_fighter_aspsg.html">random_hits_big_boss_fighter_aspsg</a></td>
                </tr>
                <tr>
                    <td><a href="../ships/random_hits_big_boss_fighter_aspsggsa.html">random_hits_big_boss_fighter_aspsggsa</a></td>
                </tr>
                <tr>
                    <td><a href="../ships/random_hits_big_boss_fighter_dtttomahawk.html">random_hits_big_boss_fighter_dtttomahawk</a></td>
                </tr>
                <tr>
                    <td><a href="../ships/random_hits_big_boss_fighter_dttwraith.html">random_hits_big_boss_fighter_dttwraith</a></td>
                </tr>
                <tr>
                    <td><a href="../ships/random_hits_big_boss_fighter_ferdelancesg.html">random_hits_big_boss_fighter_ferdelancesg</a></td>
                </tr>
                <tr>
                    <td><a href="../ships/random_hits_big_boss_fighter_ferdelancesggsa.html">random_hits_big_boss_fighter_ferdelancesggsa</a></td>
                </tr>
                <tr>
                    <td><a href="../ships/random_hits_big_boss_fighter_kraitsg.html">random_hits_big_boss_fighter_kraitsg</a></td>
                </tr>
                <tr>
                    <td><a href="../ships/random_hits_big_boss_fighter_sidewindercharlie.html">random_hits_big_boss_fighter_sidewindercharlie</a></td>
                </tr>
                <tr>
                    <td><a href="../ships/random_hits_big_boss_fighter_sonoran.html">random_hits_big_boss_fighter_sonoran</a></td>
                </tr>
                <tr>
                    <td><a href="../ships/random_hits_big_boss_fighter_stealthRaider.html">random_hits_big_boss_fighter_stealthRaider</a></td>
                </tr>
                <tr>
                    <td><a href="../ships/random_hits_big_boss_fighter_supersidewinder.html">random_hits_big_boss_fighter_supersidewinder</a></td>
                </tr>
                <tr>
                    <td><a href="../ships/random_hits_big_boss_guard_aspsg.html">random_hits_big_boss_guard_aspsg</a></td>
                </tr>
                <tr>
                    <td><a href="../ships/random_hits_big_boss_guard_aspsggsa.html">random_hits_big_boss_guard_aspsggsa</a></td>
                </tr>
                <tr>
                    <td><a href="../ships/random_hits_big_boss_guard_ferdelancesg.html">random_hits_big_boss_guard_ferdelancesg</a></td>
                </tr>
                <tr>
                    <td><a href="../ships/random_hits_big_boss_guard_ferdelancesggsa.html">random_hits_big_boss_guard_ferdelancesggsa</a></td>
                </tr>
                <tr>
                    <td><a href="../ships/random_hits_big_boss_iguanasg.html">random_hits_big_boss_iguanasg</a></td>
                </tr>
                <tr>
                    <td><a href="../ships/random_hits_big_boss_iguanasg_spacelane.html">random_hits_big_boss_iguanasg_spacelane</a></td>
                </tr>
                <tr>
                    <td><a href="../ships/random_hits_mark_anacondaf.html">random_hits_mark_anacondaf</a></td>
                </tr>
                <tr>
                    <td><a href="../ships/random_hits_mark_anacondafe.html">random_hits_mark_anacondafe</a></td>
                </tr>
                <tr>
                    <td><a href="../ships/random_hits_mark_aspsg.html">random_hits_mark_aspsg</a></td>
                </tr>
                <tr>
                    <td><a href="../ships/random_hits_mark_aspsggsa.html">random_hits_mark_aspsggsa</a></td>
                </tr>
                <tr>
                    <td><a href="../ships/random_hits_mark_barracuda.html">random_hits_mark_barracuda</a></td>
                </tr>
                <tr>
                    <td><a href="../ships/random_hits_mark_boa2f.html">random_hits_mark_boa2f</a></td>
                </tr>
                <tr>
                    <td><a href="../ships/random_hits_mark_boa2fe.html">random_hits_mark_boa2fe</a></td>
                </tr>
                <tr>
                    <td><a href="../ships/random_hits_mark_boaf.html">random_hits_mark_boaf</a></td>
                </tr>
                <tr>
                    <td><a href="../ships/random_hits_mark_boafe.html">random_hits_mark_boafe</a></td>
                </tr>
                <tr>
                    <td><a href="../ships/random_hits_mark_boasg.html">random_hits_mark_boasg</a></td>
                </tr>
                <tr>
                    <td><a href="../ships/random_hits_mark_dtttomahawk.html">random_hits_mark_dtttomahawk</a></td>
                </tr>
                <tr>
                    <td><a href="../ships/random_hits_mark_dttwraith.html">random_hits_mark_dttwraith</a></td>
                </tr>
                <tr>
                    <td><a href="../ships/random_hits_mark_ferdelancesg.html">random_hits_mark_ferdelancesg</a></td>
                </tr>
                <tr>
                    <td><a href="../ships/random_hits_mark_ferdelancesggsa.html">random_hits_mark_ferdelancesggsa</a></td>
                </tr>
                <tr>
                    <td><a href="../ships/random_hits_mark_feudalknight.html">random_hits_mark_feudalknight</a></td>
                </tr>
                <tr>
                    <td><a href="../ships/random_hits_mark_feudallord.html">random_hits_mark_feudallord</a></td>
                </tr>
                <tr>
                    <td><a href="../ships/random_hits_mark_galtech_escort_fighter1.html">random_hits_mark_galtech_escort_fighter1</a></td>
                </tr>
                <tr>
                    <td><a href="../ships/random_hits_mark_igusg.html">random_hits_mark_igusg</a></td>
                </tr>
                <tr>
                    <td><a href="../ships/random_hits_mark_kraitsg.html">random_hits_mark_kraitsg</a></td>
                </tr>
                <tr>
                    <td><a href="../ships/random_hits_mark_pccfe.html">random_hits_mark_pccfe</a></td>
                </tr>
                <tr>
                    <td><a href="../ships/random_hits_mark_pythonetfe.html">random_hits_mark_pythonetfe</a></td>
                </tr>
                <tr>
                    <td><a href="../ships/random_hits_mark_pythonfe.html">random_hits_mark_pythonfe</a></td>
                </tr>
                <tr>
                    <td><a href="../ships/random_hits_mark_revenge1_shipset.html">random_hits_mark_revenge1_shipset</a></td>
                </tr>
                <tr>
                    <td><a href="../ships/random_hits_mark_revenge3_shipset.html">random_hits_mark_revenge3_shipset</a></td>
                </tr>
                <tr>
                    <td><a href="../ships/random_hits_mark_revenge4_shipset.html">random_hits_mark_revenge4_shipset</a></td>
                </tr>
                <tr>
                    <td><a href="../ships/random_hits_mark_revenge_wing1_shipset.html">random_hits_mark_revenge_wing1_shipset</a></td>
                </tr>
                <tr>
                    <td><a href="../ships/random_hits_mark_revenge_wing2_shipset.html">random_hits_mark_revenge_wing2_shipset</a></td>
                </tr>
                <tr>
                    <td><a href="../ships/random_hits_mark_revenge_wing3_shipset.html">random_hits_mark_revenge_wing3_shipset</a></td>
                </tr>
                <tr>
                    <td><a href="../ships/random_hits_mark_sidewinderable.html">random_hits_mark_sidewinderable</a></td>
                </tr>
                <tr>
                    <td><a href="../ships/random_hits_mark_sidewinderbaker.html">random_hits_mark_sidewinderbaker</a></td>
                </tr>
                <tr>
                    <td><a href="../ships/random_hits_mark_sidewindercharlie.html">random_hits_mark_sidewindercharlie</a></td>
                </tr>
                <tr>
                    <td><a href="../ships/random_hits_mark_sidewinderdoris.html">random_hits_mark_sidewinderdoris</a></td>
                </tr>
                <tr>
                    <td><a href="../ships/random_hits_mark_sidewinderfarragut.html">random_hits_mark_sidewinderfarragut</a></td>
                </tr>
                <tr>
                    <td><a href="../ships/random_hits_mark_sonoran.html">random_hits_mark_sonoran</a></td>
                </tr>
                <tr>
                    <td><a href="../ships/random_hits_mark_stealthAssassin.html">random_hits_mark_stealthAssassin</a></td>
                </tr>
                <tr>
                    <td><a href="../ships/random_hits_mark_supersidewinder.html">random_hits_mark_supersidewinder</a></td>
                </tr>
                <tr>
                    <td><a href="../ships/random_hits_markguard16_shipset.html">random_hits_markguard16_shipset</a></td>
                </tr>
                <tr>
                    <td><a href="../ships/random_hits_markguard17_shipset.html">random_hits_markguard17_shipset</a></td>
                </tr>
                <tr>
                    <td><a href="../ships/random_hits_markguard21_shipset.html">random_hits_markguard21_shipset</a></td>
                </tr>
                <tr>
                    <td><a href="../ships/random_hits_markguard22_shipset.html">random_hits_markguard22_shipset</a></td>
                </tr>
                <tr>
                    <td><a href="../ships/random_hits_markguard23_shipset.html">random_hits_markguard23_shipset</a></td>
                </tr>
                <tr>
                    <td><a href="../ships/random_hits_markguard7_shipset.html">random_hits_markguard7_shipset</a></td>
                </tr>
                <tr>
                    <td><a href="../ships/random_hits_patrol_aspsg.html">random_hits_patrol_aspsg</a></td>
                </tr>
                <tr>
                    <td><a href="../ships/random_hits_patrol_aspsggsa.html">random_hits_patrol_aspsggsa</a></td>
                </tr>
                <tr>
                    <td><a href="../ships/random_hits_patrol_dtttomahawk.html">random_hits_patrol_dtttomahawk</a></td>
                </tr>
                <tr>
                    <td><a href="../ships/random_hits_patrol_dttwraith.html">random_hits_patrol_dttwraith</a></td>
                </tr>
                <tr>
                    <td><a href="../ships/random_hits_patrol_ferdelancesg.html">random_hits_patrol_ferdelancesg</a></td>
                </tr>
                <tr>
                    <td><a href="../ships/random_hits_patrol_ferdelancesggsa.html">random_hits_patrol_ferdelancesggsa</a></td>
                </tr>
                <tr>
                    <td><a href="../ships/random_hits_patrol_iguanasg.html">random_hits_patrol_iguanasg</a></td>
                </tr>
                <tr>
                    <td><a href="../ships/random_hits_patrol_sonoran.html">random_hits_patrol_sonoran</a></td>
                </tr>
                <tr>
                    <td><a href="../ships/random_hits_patrol_stealthRaider.html">random_hits_patrol_stealthRaider</a></td>
                </tr>
                <tr>
                    <td><a href="../ships/sbwolf_Assassin_AP_shipset.html">sbwolf_Assassin_AP_shipset</a></td>
                </tr>
                <tr>
                    <td><a href="../ships/sbwolf_Hunter_AP_shipset.html">sbwolf_Hunter_AP_shipset</a></td>
                </tr>
                <tr>
                    <td><a href="../ships/sbwolf_Pirate_AP_shipset.html">sbwolf_Pirate_AP_shipset</a></td>
                </tr>
                <tr>
                    <td><a href="../ships/sidewinder_Assassin_AP_shipset.html">sidewinder_Assassin_AP_shipset</a></td>
                </tr>
                <tr>
                    <td><a href="../ships/sidewinder_Escort_AP_shipset.html">sidewinder_Escort_AP_shipset</a></td>
                </tr>
                <tr>
                    <td><a href="../ships/sidewinder_Hunter_AP_shipset.html">sidewinder_Hunter_AP_shipset</a></td>
                </tr>
                <tr>
                    <td><a href="../ships/sidewinder_NPC_stealth_prototype.html">sidewinder_NPC_stealth_prototype</a></td>
                </tr>
                <tr>
                    <td><a href="../ships/sidewinder_Raider_escort_AP_shipset.html">sidewinder_Raider_escort_AP_shipset</a></td>
                </tr>
                <tr>
                    <td><a href="../ships/sidewinder_harderAssassin_AP_shipset.html">sidewinder_harderAssassin_AP_shipset</a></td>
                </tr>
                <tr>
                    <td><a href="../ships/sidewinder_harderPirate_AP_shipset.html">sidewinder_harderPirate_AP_shipset</a></td>
                </tr>
                <tr>
                    <td><a href="../ships/sidewinder_npc_able_AP_shipset.html">sidewinder_npc_able_AP_shipset</a></td>
                </tr>
                <tr>
                    <td><a href="../ships/sidewinder_npc_baker_AP_shipset.html">sidewinder_npc_baker_AP_shipset</a></td>
                </tr>
                <tr>
                    <td><a href="../ships/sidewinder_npc_charlie_AP_shipset.html">sidewinder_npc_charlie_AP_shipset</a></td>
                </tr>
                <tr>
                    <td><a href="../ships/sidewinder_npc_charlie_Escort_AP_shipset.html">sidewinder_npc_charlie_Escort_AP_shipset</a></td>
                </tr>
                <tr>
                    <td><a href="../ships/sidewinder_npc_charlie_Raider_escort_AP_shipset.html">sidewinder_npc_charlie_Raider_escort_AP_shipset</a></td>
                </tr>
                <tr>
                    <td><a href="../ships/sidewinder_npc_doris_AP_shipset.html">sidewinder_npc_doris_AP_shipset</a></td>
                </tr>
                <tr>
                    <td><a href="../ships/sidewinder_npc_emile_AP_shipset.html">sidewinder_npc_emile_AP_shipset</a></td>
                </tr>
                <tr>
                    <td><a href="../ships/sidewinder_npc_farragut_AP_shipset.html">sidewinder_npc_farragut_AP_shipset</a></td>
                </tr>
                <tr>
                    <td><a href="../ships/sidewinder_npc_ganymede_AP_shipset.html">sidewinder_npc_ganymede_AP_shipset</a></td>
                </tr>
                <tr>
                    <td><a href="../ships/sonoran_Hunter_AP_shipset.html">sonoran_Hunter_AP_shipset</a></td>
                </tr>
                <tr>
                    <td><a href="../ships/sonoran_Pirate_AP_shipset.html">sonoran_Pirate_AP_shipset</a></td>
                </tr>
                <tr>
                    <td><a href="../ships/stealth_Assassin_AP_shipset.html">stealth_Assassin_AP_shipset</a></td>
                </tr>
                <tr>
                    <td><a href="../ships/stealth_Assassin_light_AP_shipset.html">stealth_Assassin_light_AP_shipset</a></td>
                </tr>
                <tr>
                    <td><a href="../ships/stealth_Assassin_medium_AP_shipset.html">stealth_Assassin_medium_AP_shipset</a></td>
                </tr>
                <tr>
                    <td><a href="../ships/stealth_Courier_AP_shipset.html">stealth_Courier_AP_shipset</a></td>
                </tr>
                <tr>
                    <td><a href="../ships/stealth_Escort_AP_shipset.html">stealth_Escort_AP_shipset</a></td>
                </tr>
                <tr>
                    <td><a href="../ships/stealth_Hunter_light_AP_shipset.html">stealth_Hunter_light_AP_shipset</a></td>
                </tr>
                <tr>
                    <td><a href="../ships/stealth_Hunter_medium_AP_shipset.html">stealth_Hunter_medium_AP_shipset</a></td>
                </tr>
                <tr>
                    <td><a href="../ships/stealth_Raider_escort_AP_shipset.html">stealth_Raider_escort_AP_shipset</a></td>
                </tr>
                <tr>
                    <td><a href="../ships/stealth_Raider_light_AP_shipset.html">stealth_Raider_light_AP_shipset</a></td>
                </tr>
                <tr>
                    <td><a href="../ships/stealth_Raider_medium_AP_shipset.html">stealth_Raider_medium_AP_shipset</a></td>
                </tr>
                <tr>
                    <td><a href="../ships/stealth_barracuda_shipset_template.html">Barracuda</a></td>
                </tr>
                <tr>
                    <td><a href="../ships/superSidewinder_Assassin_AP_shipset.html">superSidewinder_Assassin_AP_shipset</a></td>
                </tr>
                <tr>
                    <td><a href="../ships/superSidewinder_Escort_AP_shipset.html">superSidewinder_Escort_AP_shipset</a></td>
                </tr>
                <tr>
                    <td><a href="../ships/superSidewinder_Hunter_AP_shipset.html">superSidewinder_Hunter_AP_shipset</a></td>
                </tr>
                <tr>
                    <td><a href="../ships/superSidewinder_Raider_escort_AP_shipset.html">superSidewinder_Raider_escort_AP_shipset</a></td>
                </tr>
                <tr>
                    <td><a href="../ships/superSidewinder_harderAssassin_AP_shipset.html">superSidewinder_harderAssassin_AP_shipset</a></td>
                </tr>
                <tr>
                    <td><a href="../ships/superSidewinder_harderPirate_AP_shipset.html">superSidewinder_harderPirate_AP_shipset</a></td>
                </tr>
                <tr>
                    <td><a href="../ships/wolfmk2SE_Assassin_AP_shipset.html">wolfmk2SE_Assassin_AP_shipset</a></td>
                </tr>
                <tr>
                    <td><a href="../ships/wolfmk2SE_Hunter_AP_shipset.html">wolfmk2SE_Hunter_AP_shipset</a></td>
                </tr>
                <tr>
                    <td><a href="../ships/wolfmk2SE_Pirate_AP_shipset.html">wolfmk2SE_Pirate_AP_shipset</a></td>
                </tr>
            </table>
        </a>

        <a name="models">    
        <h2>Models</h2>
            This expansion declares no models. This may be related to warnings.
        </a>

        <a name="scripts">    
        <h2>Scripts</h2>
            <table>
                <tr>
                    <th>Path</th>
                </tr>
                <tr>
                    <td valign="top">Scripts/asp-random-hits-mark.js</td>
                    <td><pre>&quot;use strict&quot;;
this.name = &quot;asp-random-hits-mark&quot;;
this.author = &quot;LittleBear&quot;;
this.copyright = &quot;September 2008 - But do what you like with it in your OXPs!&quot;;
this.description	= &quot;Tests who destroyed a RandomHits OXP Victim Ship and how they did it. The main script acts on the setting of variables.&quot;;
this.licence     = &quot;CC BY-NC-SA 3.0&quot;;
this.version = &quot;2.8.2&quot;;

//2.8 fixed mark naming when random shipnames oxp is not present. -spara-
//2.8.1 adds new lasers addition feature -rustem-
//2.8.2 adds extra missiles delevoped for Armoury OXP v1.13 and more. -rustem-

/*
All the marks have a similar AI. The only difference is the random factor in decicions. So instead of maintaining 6 versions of
the AI it is easyer to just have one AI that calls the shipscript for making the desicions. The level of the target is defined
in the script_info of ships in  shipData.plist.
Level 1 marks had two different scripts. The 1s version had a higher tendency to beg for life than the 1 version and I gave it a level 0 value
for the differentiation between both. (it was only the boy-racer with the 1s script) The 2a and the 3a version had just no &quot;fireMissile&quot; command.
Therefor I introduced a &quot;hasExtraMissileLauncher&quot; variable. Now all ships call the scriptMessage to fire a missile, but only those that used
to fire missiles by AI will actually fire missiles. 1.74 will also allow missile manipulation so you could create a ship that always selects a
random type of the installed missiles.
*/

this.shipSpawned = function ()
{
    var w = worldScripts.Assassin_shipset_pack;
    if (!missionVariables.random_hits_status || (w &amp;&amp; w.test)) { // for reset in console: missionVariables.random_hits_status = null;
        missionVariables.random_hits_store_mark_ship_name = this.ship.name + &quot;: Test Hits Mark&quot;;
        missionVariables.random_hits_store_mark_first_name = &quot;Testmark&quot;;
        missionVariables.random_hits_store_mark_nick_name = &quot;Nickname&quot;;
        missionVariables.random_hits_store_mark_second_name = &quot;Surname&quot;;
        missionVariables.random_hits_store_mark_gender = expandDescription(&quot;[mark_gender]&quot;);
        missionVariables.random_hits_store_skill = 0;
        missionVariables.random_hits_markposition = worldScripts.Random_Hits.anyInt(10,90);
        missionVariables.random_hits_status = &quot;RUNNING&quot;;
        if (w) w.test = true; // else this.$test = true
    }

    //this.ship.name = &quot;Random Hits Mark&quot;; // name only visible in debugging logs.
    if (!worldScripts.randomshipnames)
		this.ship.displayName = this.ship.name + &quot;: &quot; + expandDescription(&quot;[random_hits_main_name]&quot;);
	else
		this.ship.displayName = missionVariables.random_hits_store_mark_ship_name;
	// Show the Criminal&#39;s name on the ID Computer when targeted.
		
    this.random_hits_whoshot = &quot;NO_ATTACK&quot;; // start with assuming its no-attack.
    // this.ship.inspect(); // this line opens the target inspector on a mac with the debugConsole.oxp installed
    this.hasExtraMissileLauncher = this.ship.scriptInfo.extraMissileLauncher;
    if (this.hasExtraMissileLauncher === &quot;no&quot;) this.hasExtraMissileLauncher = false; // test needed in case the code is in open-step plist
    this.level = parseInt(this.ship.scriptInfo.markLevel); // the level of the mark.
    this.ship.accuracy = this.level * ( 1 + 4 * missionVariables.random_hits_markposition / 100) - 6; // -4.6 till 7.8

    if (w) {
        var s = this.ship;

        // Adds a new lasers
        var l = worldScripts[&quot;new_lasers&quot;]; // if (!l) break;

        var laserLevel = (1 + Math.pow(Math.random(), 2)) * this.level;
        if (this.level === 3) laserLevel += Math.pow(Math.random(), 4) * 4; // extra bonus
        //log(this.name, s.script.name + &quot; : pre-set(&quot; + laserLevel.toFixed(1) + &quot;) to new lasers for &quot; + s.name);

        if (l) w._setNewLasers(s, laserLevel, true) // w._setWeaponsToShip(s, chance);
        else log(this.name, s.script.name + &quot; : new lasers not installed.&quot;);

        // Adds a extra missiles
        if (w._extraMissiles.length &gt; 0 &amp;&amp; (this.level &gt; 1 || this.hasExtraMissileLauncher == 1)) {
            var missileKey = false;
            if (this.hasExtraMissileLauncher) missileKey = &quot;random_hits_attackworm_MISSILE&quot;;
            w._setExtraMissiles(s, this.hasExtraMissileLauncher, missileKey)
        }
    }

    delete this.shipSpawned;
}

this.shipBeingAttacked = function (who)
{
    if (!who) return;
    if (who.isPlayer)
    {
        this.random_hits_whoshot = &quot;PLAYER_ATTACK&quot;; // Shooter was the player not using an e-bomb, q-mine or cloak. The variable remains undefined if the player e-bombs, q-mines or kills the victim whilst cloaked as thisBeingAttacked does not get run. The main script then awards the player the credit for the kill, but fines him for dishonerable conduct!
    }
    else
    {
        this.random_hits_whoshot = &quot;NPC_ATTACK&quot;; // Shooter was NPC ship. Every time the victim is hit, the variable is reset. Once he&#39;s dead the variable is not longer reset. So the last ship to hit him was also the killer!
        log(this.name, &quot;Mark was hit by: &quot;+who);
    }
};

this.shipDied = function (whom, cause)
{
    log(this.name, &quot;Mark was killed by: &quot; + whom + &quot; Because of: &quot; + cause + &quot;. Last recorded hit: &quot;+this.random_hits_whoshot);
    if (whom &amp;&amp; whom.isPlayer)
    {
        if (this.random_hits_whoshot === &quot;NPC_ATTACK&quot; || cause === &quot;cascade weapon&quot;)
        // Player has finished off a Mark attacked by an NPC or with an e-bomb or by q-bomb.
        // The Player is credited with the kill, but as he&#39;s a cowardly custard he is fined and he won&#39;t earn any points for completing this hit!
        {
            missionVariables.random_hits_status = &quot;COMPLETE&quot;; // Record the fact that the Victim&#39;s ship has been destroyed.
            worldScripts[&quot;Random_Hits&quot;].$unmarkSystem(missionVariables.random_hits_planetnumber);
            player.credits -= missionVariables.random_hits_fine;
            mission.setInstructionsKey(&quot;random_hits_shortdescription2&quot;, &quot;Random_Hits&quot;); // Update the mission info.
            player.consoleMessage(expandDescription(&quot;[random_hits_complete_ebomb]&quot;));
            missionVariables.random_hits_store_skill = 0;
        }
        else // The player did a honest kill...
        {
            if (Math.random() &lt; parseFloat(this.ship.scriptInfo.podChance)) // Chance of Victim making it to his pod.
            {
                log(this.name, &quot;Mark podded out of his ship&quot;);
                missionVariables.random_hits_status = &quot;PODEDOUT&quot;; // Set the variable to reflect that the player still needs to kill or scoop the Pod!
                this.ship.awardEquipment(&quot;EQ_ESCAPE_POD&quot;); // Award an escape capsule
                this.ship.abandonShip(); // and bail out. Any shooting or scooping of the Pod is handled by the Pod&#39;s own Script.
                mission.setInstructionsKey(&quot;random_hits_shortdescription4&quot;, &quot;Random_Hits&quot;); // Update the mission info.
                player.consoleMessage(expandDescription(&quot;[random_hits_poded]&quot;));
                return;

            }

            if (Math.random() &lt; parseFloat(this.ship.scriptInfo.qmineChance)) // Chance of Victim dropping a q-mine.
            {	
                this.ship.spawnOne(&quot;RANDOM_HITS_MINE&quot;); // Spawn a Q-Mine which taunts the player before exploding! Nasty!
            }
            missionVariables.random_hits_status = &quot;COMPLETE&quot;; // Record the fact that the Victim&#39;s ship has been destroyed.
            worldScripts[&quot;Random_Hits&quot;].$unmarkSystem(missionVariables.random_hits_planetnumber);
            mission.setInstructionsKey(&quot;random_hits_shortdescription2&quot;, &quot;Random_Hits&quot;); // Update the mission info.
            player.consoleMessage(expandDescription(&quot;[random_hits_complete_comms]&quot;));
        }
        this.setRevengeMark();
    }
    else // whom is not the player
    {
        if (this.random_hits_whoshot === &quot;NPC_ATTACK&quot;) // If an NPC fired the fatal shot ...
        {	
            missionVariables.random_hits_deathcause = expandDescription(&quot;[random_hits_deathcause]&quot;);
            mission.setInstructionsKey(&quot;random_hits_shortdescription6&quot;, &quot;Random_Hits&quot;); // Update the mission info.
            player.consoleMessage(expandDescription(&quot;[random_hits_npckill]&quot;));
        }
        else // Deals with any other situation where cause of death was neither the player nor an NPC Laser. EG: Victim did somthing silly like crashing, burnt up near the Sun or some other odd death!
        {	
            missionVariables.random_hits_deathcause = expandDescription(&quot;[random_hits_deathcause_accident]&quot;);
            mission.setInstructionsKey(&quot;random_hits_shortdescription6a&quot;, &quot;Random_Hits&quot;); // Update the mission info.
            player.consoleMessage(expandDescription(&quot;[random_hits_accident]&quot;));
        }
        missionVariables.random_hits_status = &quot;NPCKILL&quot;; // Record the fact that the Victim&#39;s ship has been destroyed.
        missionVariables.random_hits_npcdays = clock.days;
        worldScripts[&quot;Random_Hits&quot;].$unmarkSystem(missionVariables.random_hits_planetnumber);
    }

    var w = worldScripts.Assassin_shipset_pack;
    if (w &amp;&amp; w.test) {
        //worldScripts.Random_Hits.resetStoreVariables();        
        missionVariables.random_hits_store_mark_ship_name = null;
        missionVariables.random_hits_store_mark_first_name = null;
        missionVariables.random_hits_store_mark_nick_name = null;
        missionVariables.random_hits_store_mark_second_name = null;
        missionVariables.random_hits_store_mark_gender = null;
        missionVariables.random_hits_store_skill = null;
        missionVariables.random_hits_markposition = null;
        w.test = null;
        delete missionVariables.random_hits_status;
    }    
};

this.shipWillEnterWormhole = function ()
{
    log(this.name, &quot;Mark has jumped out of the &quot;+system.info.name+&quot; system.&quot;);
    // If the mark jumped out of the system, set the mission description to tell the player to follow him.
    missionVariables.random_hits_status = &quot;JUMPED&quot;;
    mission.setInstructionsKey(&quot;random_hits_shortdescription7&quot;, &quot;Random_Hits&quot;); // Update the mission info.
    player.consoleMessage(expandDescription(&quot;[random_hits_jumped_comms]&quot;));
    worldScripts[&quot;Random_Hits&quot;].$unmarkSystem(missionVariables.random_hits_planetnumber);
};

this.shipExitedWormhole = function ()
{
    log(this.name, &quot;Mark has jumped into the &quot;+system.info.name+&quot; system.&quot;);
    // when the mark jumped enough to become clean, let him play the innocent trader. 
    if (this.ship.bounty === 0)
    {
        this.ship.switchAI(&quot;route1traderAI.plist&quot;);
        system.addShips(&quot;police&quot;, 1);
        system.addShips(&quot;hunter&quot;, 2);
    }
};

this.setRevengeMark = function(){
    missionVariables.random_hits_revenge_mark_first_name = missionVariables.random_hits_store_mark_first_name;
    missionVariables.random_hits_revenge_mark_second_name = missionVariables.random_hits_store_mark_second_name;
};

this.fireMissile = function (){
    // just give some ships the ability to fire missiles at will by the AI, not all.
    if (this.hasExtraMissileLauncher) this.ship.fireMissile();
};


/*
    below are chace functions called by AI, based on mark levels.
    Level 0 is a special case of level 1 that is only used for some ships but are part
    of the easy targets in the mission screens.
*/
this.reactToPlayer = function ()
{
    var chance = Math.random();
    switch(this.level)
    {
        case 0:
        case 1:
        {
            if (chance &lt; 0.66) this.ship.reactToAIMessage(&quot;ON_COURSE&quot;)
            else if (chance &lt; 0.88) this.ship.reactToAIMessage(&quot;FIGHT_PLAYER&quot;)
            else this.ship.reactToAIMessage(&quot;FLEE_PLAYER&quot;);
            break;
        }
        case 2:
        {
            if (chance &lt; 0.11) this.ship.reactToAIMessage(&quot;ON_COURSE&quot;)
            else if (chance &lt; 0.66) this.ship.reactToAIMessage(&quot;FIGHT_PLAYER&quot;)
            else this.ship.reactToAIMessage(&quot;FLEE_PLAYER&quot;);
            break;
        }
        case 3:
        {
            if (chance &lt; 0.22) this.ship.reactToAIMessage(&quot;ON_COURSE&quot;)
            else this.ship.reactToAIMessage(&quot;FIGHT_PLAYER&quot;);
            break;
        }
        default:
        {
            this.ship.reactToAIMessage(&quot;FIGHT_PLAYER&quot;);
            break;
        }
    }
}

this.reactToPlayerAttack = function ()
{
    var chance = Math.random();
    switch(this.level)
    {
        case 0:
        case 1:
        {
            if (chance &lt; 0.77) this.ship.reactToAIMessage(&quot;FIGHT_PLAYER&quot;)
            else this.ship.reactToAIMessage(&quot;FLEE_PLAYER&quot;);
            break;
        }
        case 2:
        case 3:
        {
            if (chance &lt; 0.88) this.ship.reactToAIMessage(&quot;FIGHT_PLAYER&quot;)
            else this.ship.reactToAIMessage(&quot;FLEE_PLAYER&quot;);
            break;
        }
        default:
        {
            this.ship.reactToAIMessage(&quot;FIGHT_PLAYER&quot;);
            break;
        }
    }
}

this.markHurt = function ()
{
    var chance = Math.random();
    switch(this.level)
    {
        case 0:
        {
            if (chance &lt; 0.37) this.ship.reactToAIMessage(&quot;BEG_FOR_LIFE&quot;)
            else if (chance &lt; 0.59) this.ship.reactToAIMessage(&quot;FLEE_PLAYER&quot;)
            else if (chance &lt; 0.58) this.ship.reactToAIMessage(&quot;FIGHT_PLAYER&quot;)
            else this.ship.reactToAIMessage(&quot;JUMP_OUT&quot;);
            break;
        }
        case 1:
        {
            if (chance &lt; 0.33) this.ship.reactToAIMessage(&quot;BEG_FOR_LIFE&quot;)
            else if (chance &lt; 0.55) this.ship.reactToAIMessage(&quot;FLEE_PLAYER&quot;)
            else if (chance &lt; 0.77) this.ship.reactToAIMessage(&quot;FIGHT_PLAYER&quot;)
            else this.ship.reactToAIMessage(&quot;JUMP_OUT&quot;);
            break;
        }
        case 2:
        {
            if (chance &lt; 0.11) this.ship.reactToAIMessage(&quot;BEG_FOR_LIFE&quot;)
            else if (chance &lt; 0.33) this.ship.reactToAIMessage(&quot;FLEE_PLAYER&quot;)
            else if (chance &lt; 0.66) this.ship.reactToAIMessage(&quot;FIGHT_PLAYER&quot;)
            else this.ship.reactToAIMessage(&quot;JUMP_OUT&quot;);
            break;
        }
        case 3:
        {
            if (chance &lt; 0.11) this.ship.reactToAIMessage(&quot;BEG_FOR_LIFE&quot;)
            else if (chance &lt; 0.66) this.ship.reactToAIMessage(&quot;FIGHT_PLAYER&quot;)
            else this.ship.reactToAIMessage(&quot;JUMP_OUT&quot;);
            break;
        }
        default:
        {
            this.ship.reactToAIMessage(&quot;FIGHT_PLAYER&quot;);
            break;
        }
    }
}

this.fleeMine = function ()
{
    var chance = Math.random();
    switch(this.level)
    {
        case 0:
        case 1:
        {
            if (chance &lt; 0.5) this.ship.reactToAIMessage(&quot;JUMP_OUT&quot;)
            else this.ship.reactToAIMessage(&quot;MINE_RUN&quot;);
            break;
        }
        case 2:
        case 3:
        {
            if (chance &lt; 0.66) this.ship.reactToAIMessage(&quot;JUMP_OUT&quot;)
            else this.ship.reactToAIMessage(&quot;MINE_RUN&quot;);
            break;
        }
        default:
        {
            this.ship.reactToAIMessage(&quot;JUMP_OUT&quot;);
            break;
        }
    }
}
</pre></td>
                </tr>
                <tr>
                    <td valign="top">Scripts/assassins_shipset_pack.js</td>
                    <td><pre>&quot;use strict&quot;;
this.name			= &quot;Assassin_shipset_pack&quot;;
this.author			= &quot;Rustem&quot;;
this.copyright		= &quot;2017&quot;;
this.description	= &quot;worldscript for Assassin shipset pack&quot;;
this.licence		= &quot;CC BY-NC-SA 4.0&quot;;

this._shipSpawnOverride = false;

// Addition to GC MostWanted list delevoped for assassin role. Current GC MostWanted v0.7.

this.logging = false;        // false/true
this._debug = true;          // debug for GC MW
this._debug_AI = false;      // logging setAI
this._debug_Bty = false;     // logging setBounty
this._debug_Wpn = false;     // logging setWeapon
this._debug_Eqp = false;     // logging setEquipment

//this._ai_Drone = null;		// logging of AI State of Drone
//this._ai_Tharglet = null;	// logging of AI State of Tharglet

this._sdc_Installed = false;  // indicates whether Station Dock Control OXP is installed
this._gcm_ht_Installed = false; // indicates whether GalCop Missions OXP is installed (v0.5.2)

// var used in the ship script

this._safeSystem = [];
this._safeDangerous = [];     // list of safe/dangerous systems (array of dictionarys, having &quot;id&quot;-int and &quot;dangerous&quot;-array of ints)
this._ht_amount = 0;	      // amount ship from GalCopBB_HitTeams
this._mw_count = 0;           // count ship in the actual spawn state
this._mw_escorts = null;      // allow spawn escorts

// Addition of the extra missiles delevoped for Armoury OXP v1.13 and more.
this._extraMissiles = [];	  // array for extra missiles

this._weaponNoneSet = { // blacklist for weapons unchanged // ships with special weapon specification (ex: Sniper Guns)
	&quot;asp_sg_Assassin_AP_shipset&quot;: &quot;WEAPON_NONE&quot;,
	&quot;asp_sg_Hunter_AP_shipset&quot;: &quot;WEAPON_NONE&quot;,
	&quot;constrictor_sg_Assassin_AP_shipset&quot;: &quot;WEAPON_NONE&quot;,
	&quot;constrictor_sg_Hunter_AP_shipset&quot;: &quot;WEAPON_NONE&quot;,
	&quot;dttwraith_Pirate_AP_shipset&quot;: &quot;WEAPON_NONE&quot;,
	&quot;dttwraith_Hunter_AP_shipset&quot;: &quot;WEAPON_NONE&quot;,
	&quot;ferdelance_sg_Assassin_AP_shipset&quot;: &quot;WEAPON_NONE&quot;,
	&quot;ferdelance_sg_Hunter_AP_shipset&quot;: &quot;WEAPON_NONE&quot;
}

this._aftWeaponNone = { // from shipKey specification, blacklist for aft weapons unchanged
	&quot;stealth_Escort_AP_shipset&quot;: &quot;WEAPON_NONE&quot;,
	&quot;stealth_Raider_escort_AP_shipset&quot;: &quot;WEAPON_NONE&quot;,
	&quot;cb68_pitviper2_AP_shipset&quot;: &quot;WEAPON_NONE&quot;,
	&quot;cb68_pitviper2_HunterAP_shipset&quot;: &quot;WEAPON_NONE&quot;
}

/* The global level of bias in weapon selection. A few useful // copy from populator
 * threshold values if modifying this:
 *
 * 0: default weapon selection
 *
 * 0.2: above this military lasers start being granted to rare ships
 *
 * 1.2: above this aft military lasers start appearing; forward
 * military/aft beam is common
 *
 * -0.8: no ships have aft beam laser; forward beam is rare
 *
 * -1.8: no ships have beam lasers
 *
 * A few ships (e.g. police ships) do not have variable lasers and
 * are not affected by this setting.
 */
this.$weaponLevelBias = 0;

/* World script event handlers */

this.startUpComplete = function startUpComplete() {
	var mw = worldScripts.BountySystem_MostWanted; // worldScripts[&quot;BountySystem_MostWanted&quot;]
	if (mw) this._mw_Installed = true;
	var ht = worldScripts.GalCopBB_HitTeams;
	if (ht) {
		this._gcm_ht_Installed = true;
	}
	if (worldScripts.StationDockControl) {
		this._sdc_Installed = true;
		// WAIT: Disable, need enable?
		// worldScripts.StationDockControl._propertiesToKeep.push(&quot;_mostWanted&quot;);
	}

	// check wanted records
	if (this._mw_Installed) {
		this._leader = [];
		this._wantedGroup = [];
		this._groupName = &quot;&quot;;
		this._wanted_amount = 0;
		if (mw._wanted.length === 0) {
			log(this.name, &quot;First start: GC MostWanted&quot;)
		} else {
			this.$updateMWData()
		}
	}

	// sets extra missiles
	if (worldScripts.CT_Script) {
		this._armInstalled = true;
		this._extraMissiles.push(&quot;EQ_NPC_CD_MINE&quot;, &quot;EQ_NPC_KD_MINE&quot;) // for &quot;EQ_NPC_CT_MINE&quot; will be check a ship mass or level
		// based on EQ_CT_MINE, EQ_CDRONE_LAUNCHER_MINE, EQ_KDRONE_LAUNCHER_MINE / EQ_ATDRONE_LAUNCHER_MINE
	} else {
		this._extraMissiles.push(&quot;EQ_HARDENED_MISSILE&quot;)
	}
	if (worldScripts.fighters) {
		this._fightersInstalled = true;
		this._extraMissiles.push(&quot;EQ_NPC_SWARM_MISSILE&quot;) // based on fighters-swarm
	}
}

this.playerWillEnterWitchspace = function playerWillEnterWitchspace() {
	if (this._mw_Installed) {
		this._mw_count = 0; // count ship in the actual spawn state
		this._mw_escorts = null; // allow spawn escort	
		// TEST: worldScripts.BountySystem_MostWanted._pending.length = 0;
		//worldScripts.BountySystem_MostWanted.$lookForPendingRecords(); // TEST: added before fully check in GC MW.
	}
	if (this._gcm_ht_Installed) this.$updateHTData();
}

this.shipLaunchedFromStation = this.shipExitedWitchspace = function shipExitedWitchspace() {
	if (this._mw_Installed) this.$updateMWData(); 

	//if (this._gcm_ht_Installed) this.$updateHTData();

	var n = Math.floor(10 + 1.0 * Math.log(worldScripts[&quot;oolite-populator&quot;].$repopulatorFrequencyOutgoing.assassins)); //8..-inf // oolite stats:7..2
	log(this.name, &quot;ASPack: Factor(FreqOutgoingAssassins): &quot; + n);
}

/* Ship addition functions for GC MW list*/
this.$updateMWData = function () {
	// delay need for set dta.shipName and etc.
	var mw = worldScripts.BountySystem_MostWanted;
	this._wanted_amount = 0;
	for (var i = 0; i &lt; mw._wanted.length; i++) {
		var wanted = mw._wanted[i];
		if (wanted.shipDataKey.indexOf(&#39;_AP_shipset&#39;) &gt; -1) {
			this._wanted_amount++;
		}
	}
	this._wantedGroup.length = 0;
	if (this._wanted_amount &gt; 0) {
		log(this.name, &quot;ASPack: Amount of the ships in GC MW list: &quot; + this._wanted_amount);
	}
}

/* Ship addition functions for in GC_HitTeams list*/
this.$updateHTData = function () {
	var ht = worldScripts.GalCopBB_HitTeams;
	this._ht_ships = [];
	if (ht._hitTeams &amp;&amp; ht._hitTeams.length &gt; 0) {
		this._ht_amount = 0;
		for (var i = 0; i &lt; ht._hitTeams.length; i++) {
			for (var j = 0; j &lt; ht._hitTeams[i].ships.length; j++) {
				var s = ht._hitTeams[i].ships[j].dataKey;
				if (s.indexOf(&#39;_shipset&#39;) &gt; -1) { // &#39;_AP_shipset&#39; / &#39;_shipset&#39;
					this._ht_amount++;
					this._ht_ships.push(s);
				}
			}
		}
		if (this._ht_amount &gt; 0) {
			log(this.name, &quot;ASPack: Amount of the ships in GC HT list: &quot; + this._ht_amount);
		}
	}
}

/* Ship addition functions */

this._setBountyToShip = function (ship) {
	var random = Math.random;
	var s = ship;
	var pr = s.primaryRole;
	var sc = s.script;
	var k = s.dataKey;

	var bounty, ai;
	var g = s.group;

	// for ensure set correctly JS AI, but not reset for custom AI.plist
	if (s.AI === &quot;nullAI.plist&quot; &amp;&amp; s.AIScript) {
		var js = true;
		var nm = s.AIScript.name;
	}
	// autoAImap.plist	
	if (pr.indexOf(&#39;assassin&#39;) &gt; -1) {
		if (js &amp;&amp; nm.indexOf(&quot;Assassin&quot;) &lt; 0) ai = &quot;oolite-assassinAI.js&quot;;
		bounty = true;
	} else if (pr.indexOf(&#39;hunter&#39;) &gt; -1) {
		if (g &amp;&amp; g.leader &amp;&amp; s == g.leader) {
			if (js &amp;&amp; nm.indexOf(&quot;Bounty Hunter&quot;) &lt; 0) ai = &quot;oolite-bountyHunterLeaderAI.js&quot;;
		} else {
			if (js &amp;&amp; nm.indexOf(&quot;Bounty Hunter&quot;) &lt; 0) ai = &quot;oolite-bountyHunterAI.js&quot;;
		}
		bounty = null;
	} else if (pr.indexOf(&#39;courier&#39;) &gt; -1 || pr.indexOf(&#39;trader&#39;) &gt; -1) {
		if (js &amp;&amp; nm.indexOf(&quot;Trader&quot;) &lt; 0) ai = &quot;oolite-traderAI.js&quot;;
		bounty = null;
	} 
	else if (pr.indexOf(&#39;escort&#39;) &gt; -1) {
		if (js &amp;&amp; nm.indexOf(&quot;Escort&quot;) &lt; 0) ai = &quot;oolite-escortAI.js&quot;;		
		if (g &amp;&amp; g.leader &amp;&amp; (g.leader.AIScript.name.indexOf(&quot;Assassin&quot;) &gt; -1 || g.leader.AIScript.name.indexOf(&quot;Pirate&quot;) &gt; -1)) {
			bounty = true;
		}
	} else if (pr.indexOf(&#39;freighter&#39;) &gt; -1) {
		if (ai &amp;&amp; nm.indexOf(&quot;Pirate Freighter&quot;) &lt; 0) ai = &quot;oolite-pirateFreighterAI.js&quot;;
		bounty = true;
	} else if (pr.indexOf(&#39;pirate&#39;) &gt; -1 &amp;&amp; pr.indexOf(&#39;fighter&#39;) &gt; -1) {
		if (js &amp;&amp; nm.indexOf(&quot;Pirate Fighter&quot;) &lt; 0) ai = &quot;oolite-pirateFighterAI.js&quot;;
		bounty = true;					
	} else if (pr.indexOf(&#39;pirate-interceptor&#39;) &gt; -1 || pr.indexOf(&#39;aegis-raider&#39;) &gt; -1) {
		if (js &amp;&amp; nm.indexOf(&quot;Pirate&quot;) &lt; 0) ai = &quot;oolite-pirateInterceptorAI.js&quot;;
		bounty = true;
	} else if (pr.indexOf(&#39;pirate&#39;) &gt; -1 || pr.indexOf(&#39;raider&#39;) &gt; -1) {
		if (js &amp;&amp; nm.indexOf(&quot;Pirate&quot;) &lt; 0) ai = &quot;oolite-pirateAI.js&quot;;
		bounty = true;
	}
	if (ai) {
		ship.setAI(ai);
		if (this._debug_AI) log(&quot;Assassin_shipset_pack&quot;, sc.name + &quot; : set &quot; + ai + &quot; for &quot; + s.displayName + &quot; [&quot; + k + &quot;]&quot;);
	}

	if (bounty &amp;&amp; !s.bounty) {
		var bonus = system.info.government + ~~(random() * system.info.techlevel);
		if (!g) {
			bonus += ~~(random() * 8);
		} else if (g &amp;&amp; g.leader &amp;&amp; g.leader.bounty) {
			bonus += ~~(random() * 0.25 * g.leader.bounty);
			bounty = false;			
		}
		ship.setBounty(20 + bonus,&quot;setup actions&quot;);
	}
	
	// set hiddenBounty
	if (bounty &amp;&amp; s.bounty) {
		if (this._debug_Bty) log(&quot;Assassin_shipset_pack&quot;, sc.name + &quot; : add hiddenBounty for &quot; + pr + &quot;: &quot; + s.displayName + &quot; [&quot; + k + &quot;]&quot;);
		ship.script._hiddenBounty = s.bounty;
		ship.script._storedHiddenBounty = ship.script._hiddenBounty;
		bounty = null;
	} else if (this._debug_Bty) log(&quot;Assassin_shipset_pack&quot;, sc.name + &quot; : no hiddenBounty for &quot; + pr + &quot;: &quot; + s.displayName + &quot; [&quot; + k + &quot;]&quot;);

	if (bounty === null) ship.bounty = 0;
}

this._setWeaponsToShip = function (ship,bias,debug) {
	var s = ship;
	var pr = s.primaryRole;
	var sc = s.script;
	var k = s.dataKey;
	var level;
	var dg = debug;
	if (!dg) dg = this._debug_Wpn; 

	//WIP: Default and new lasers
	if (this._weaponNoneSet[k]) {
		sc.$setWeapons = false;
		if (dg) log(&quot;Assassin_shipset_pack&quot;, sc.name + &quot; :  setup lasers denied for &quot; + s.displayName + &quot; [&quot; + k + &quot;]&quot;);
	}

	var l = worldScripts[&quot;new_lasers&quot;];
	if (!l &amp;&amp; !ship.autoWeapons) {
		// Set default lasers // TODO: pirate[1.3]

		level = this.$setLevel(pr, bias);

		if (sc.$setWeapons) {
			if (dg) log(&quot;Assassin_shipset_pack&quot;, sc.name + &quot; : pre-set(&quot; + level.toFixed(1) + &quot;) to default lasers for &quot; + ship.name);
			this._setWeapons(s, level, dg)
		}
	} else if (l &amp;&amp; !ship.autoWeapons) {
		// Set New lasers / Set Uber lasers // this script not set for escort, fighter and freighter roles // TODO: pirate[1.3]

		level = this.$setNewWeaponsLevel(pr, bias);

		if (sc.$setWeapons) {
			if (dg) log(&quot;Assassin_shipset_pack&quot;, sc.name + &quot; : pre-set(&quot; + level.toFixed(1) + &quot;) to new lasers for &quot; + ship.name);
			this._setNewLasers(s, level, dg)
		}
	}

	// Replacement to extra missiles
	if (this._extraMissiles.length &gt; 0 &amp;&amp; level &gt; 2 &amp;&amp; bias &lt; 0.3) {
		this._setExtraMissiles(s, 1)
	}
}

/* Levels:
 * &lt;= 1: FP
 *    2: FB
 *    3: FB, AB (rare in core)
 *    4: FM, AB (not used in core)
 *    5: FM, AM (not used in core)
 * &gt;= 6: FM, [NONE, AB] (not used in default core-function)
 * Fractional levels may be one or other (e.g. 2.2 = 80% 2, 20% 3)
 * Side weapons unchanged
 */

/* Run _setWeapons on the default ship */
this._setWeapons = function (ship,level,logging,debug) { // copy from populator
	var s = ship;
	var pr = s.primaryRole;
	var sc = s.script;
	var k = s.dataKey;
	var lg = logging;
	var dg = debug;
	if (!lg) lg = this._debug_Wpn;
	if (!dg) dg = this.logging;

	level += this.$weaponLevelBias;
	if (s.autoWeapons) { // autoWeapons is inverted rule for _setWeapons!!!
		// default is not to change anything
		if (dg) log(this.name, &quot;Check a shipdata and ship script condition! No change anything for [&quot; + k + &quot;](&quot; + pr + &quot;)&quot;);
		return false;
	}
	if (pr.indexOf(&#39;fighter&#39;) &gt; -1 || pr.indexOf(&#39;escort&#39;) &gt; -1) {
		// not will set for all escort and fighter roles
		if (dg) log(this.name, &quot;Default lasers doesn&#39;t set to escort and fighter roles : [&quot; + k + &quot;](&quot; + pr + &quot;)&quot;);
		return false;
	}
	var fwent = ship;
	if (ship.forwardWeapon == null) {
		var se = ship.subEntities;
		for (var i = 0; i &lt; se.length; i++) {
			if (se[i].forwardWeapon != null) {
				if (fwent != ship) {
					if (dg) log(this.name, &quot;auto_weapons doesn&#39;t work on ships with MFLs : [&quot; + k + &quot;](&quot; + pr + &quot;)&quot;);
					return false; // auto_weapons doesn&#39;t work on ships with MFLs
				}
				fwent = se[i];
			}
		}
	}
	if (this._aftWeaponNone[ship.dataKey]) {
		ship.aftWeapon = null;
		if (lg) log(this.name, &quot;aft laser doesn&#39;t set for [&quot; + k + &quot;](&quot; + pr + &quot;)&quot;);
		//return false; // off to set a forward uber laser
	}
	var choice = Math.floor(level);
	if (level - Math.floor(level) &gt; Math.random()) {
		choice++;
	}
	if (choice &lt;= 1) {
		fwent.forwardWeapon = &quot;EQ_WEAPON_PULSE_LASER&quot;;
		ship.aftWeapon = null;
	} else if (choice == 2) {
		fwent.forwardWeapon = &quot;EQ_WEAPON_BEAM_LASER&quot;;
		ship.aftWeapon = null;
	} else if (choice == 3) {
		fwent.forwardWeapon = &quot;EQ_WEAPON_BEAM_LASER&quot;;
		if (!this._aftWeaponNone[ship.dataKey]) ship.aftWeapon = &quot;EQ_WEAPON_BEAM_LASER&quot;;
	} else if (choice == 4) {
		fwent.forwardWeapon = &quot;EQ_WEAPON_MILITARY_LASER&quot;;
		if (!this._aftWeaponNone[ship.dataKey]) ship.aftWeapon = &quot;EQ_WEAPON_BEAM_LASER&quot;;
	} else if (choice == 5) {
		fwent.forwardWeapon = &quot;EQ_WEAPON_MILITARY_LASER&quot;;
		if (!this._aftWeaponNone[ship.dataKey]) ship.aftWeapon = &quot;EQ_WEAPON_MILITARY_LASER&quot;;
	} else if (choice &gt;= 6) // not used in default core-function
	{
		fwent.forwardWeapon = &quot;EQ_WEAPON_MILITARY_LASER&quot;;
		if (!this._aftWeaponNone[ship.dataKey]) {
			if (Math.random() &gt; 0.60) {
				ship.aftWeapon = null;
			} else {
				ship.aftWeapon = &quot;EQ_WEAPON_PULSE_LASER&quot;
			}
		}
	}
	if (lg) log(this.name, &quot;Set (l:&quot; + level.toFixed(1) + &quot; -&gt; c:&quot; + choice + &quot;) &quot; + fwent.forwardWeapon + &quot;/&quot; + ship.aftWeapon + &quot; on the [&quot; + k + &quot;](&quot; + pr + &quot;)&quot;);
	return true;
}
/* Roles: this._setWeapons()
 *
 * - hunter : [1.5] / mixed weapons, medium[1.9] / usually ensure have beam lasers, heavy[2.2] / occasionally give aft lasers
 *
 * - pirate : [1.3], [1.75] / hasHyperspaceMotor, leader[2.8] / usually give aft laser
 *
 * - pirate-fighter : light[1.2] / basic fighters, medium[1.8] / often beam weapons, heavy[2.05] / very rarely aft lasers
 *
 * - pirate-aegis-raider has very heavily armed : [2.7]
 *
 * - pirate-interceptor has heavily armed 		: [2.3]
 *
 * - assassin 									: light[2], medium[2.5], heavy[2.8], extra[1.8]
 *
 * - smuggler has rarely good weapons 			: [1.2]
 *
 * - opportunist 								: [2.5]
 *
 */

/* Run _setEscortWeapons on the escort group */
this._setEscortWeapons = function (mothership) { // copy from populator
	if (!mothership.escortGroup) { // TEST: rustem: error in oolite-populator.js : [escortGroup --&gt; group]?
		return;
	}
	var eg = mothership.escortGroup.ships; // TEST: rustem: error in oolite-populator.js : [escortGroup --&gt; group]?
	for (var i = eg.length - 1; i &gt;= 0; i--) {
		var ship = eg[i];
		if (ship == mothership) {
			continue;
		}
		if (ship.autoWeapons) // autoWeapons is inverted rule for _setEscortWeapons!!!
		{
			continue;
		}
		var pr = ship.primaryRole;
		if (pr == &quot;escort&quot; || pr == &quot;pirate-light-fighter&quot;) {
			this._setWeapons(ship, 1.3); // usually lightly armed as escorts
		} else if (pr == &quot;escort-medium&quot; || pr == &quot;pirate-medium-fighter&quot;) {
			this._setWeapons(ship, 1.8); // usually heavily armed as escorts
		} else if (pr == &quot;escort-heavy&quot; || pr == &quot;pirate-heavy-fighter&quot;) {
			this._setWeapons(ship, 2.05); // rarely have an aft laser
		}
	}
}
/* Roles:
 *
 * - escort[1.3], medium[1.8], heavy[2.05]
 *
 * - _addFreighter, _addCourier, _addSmuggler : this._setEscortWeapons(t[0])
 *
 * - _addPiratePack : this._setEscortWeapons(lead[0])
 *
 */

/* Levels: New lasers: 1-5, Uber lasers: 6-10
 * &lt;= 1: FP
 *    2: FB, AP (mass&gt;175t)
 *    3: FB, AB
 *    4: FM, AB
 *    5: FM, AM
 * 	  6: FU, [NONE, AB, AM], AB (chance: 0.75)
 *    7: FU, [NONE, AB, AM]
 *    8: FU, [NONE, AB, AM]
 * &gt;= 9: FU, [NONE, AB, AM]
 * For level 6 and more, if mass&gt;175t, first setup: NONE --&gt; AP (also a little chance for sniping)
 * Fractional levels may be one or other (e.g. 2.2 = 80% 2, 20% 3)
 * Side weapons unchanged
 */

/* Run _setNewLasers on the default ship (test) */
this._setNewLasers = function (ship,level,logging,debug) { // edit _setWeapons for New Lasers
	var s = ship;
	var pr = s.primaryRole;
	var sc = s.script;
	var k = s.dataKey;
	var lg = logging;
	var dg = debug;
	if (!lg) lg = this._debug_Wpn;
	if (!dg) dg = this.logging;

	level += this.$weaponLevelBias;
	if (s.autoWeapons) // autoWeapons is inverted rule for setNewLasers!!!
	{
		// default is not to change anything
		if (dg) log(this.name, &quot;weapons was set by populator, so it is not to change anything for &quot; + s.name + &quot; (&quot; + pr + &quot;)&quot;);
		return false;
	}
	if (pr.indexOf(&#39;fighter&#39;) &gt; -1 || pr.indexOf(&#39;escort&#39;) &gt; -1) {
		// not will set for all escort and fighter roles
		if (dg) log(this.name, &quot;New lasers doesn&#39;t set to escort and fighter roles: &quot; + s.name + &quot; (&quot; + pr + &quot;)&quot;);
		return false;
	}
	var fwent = ship;
	if (ship.forwardWeapon == null) {
		var se = ship.subEntities;
		for (var i = 0; i &lt; se.length; i++) {
			if (se[i].forwardWeapon != null) {
				if (fwent != ship) {
					if (lg) log(this.name, &quot;Setup of new lasers doesn&#39;t work on ships with MFLs for &quot; + s.name + &quot; (&quot; + pr + &quot;)&quot;);
					return false; // setNewLasers doesn&#39;t work on ships with MFLs
				}
				fwent = se[i];
			}
		}
	}
	var aftCheck = true;
	if (this._aftWeaponNone[ship.dataKey] || ship.aftWeapon === &quot;WEAPON_NONE&quot;) {
		aftCheck = false;
		ship.aftWeapon = null;
		if (lg) log(this.name, &quot;aft laser doesn&#39;t set on the [&quot; + k + &quot;](&quot; + pr + &quot;)&quot;);
		//return false; // off to set a forward uber laser
	}
	var choice = Math.floor(level);
	var chanceFrd = Math.random();
	var chanceAft = Math.random();
	if (level - Math.floor(level) &gt; Math.random()) {
		choice++;
	}
	if (choice &gt;= 6 &amp;&amp; aftCheck) // forward uber laser, aft laser: NONE(mass&gt;175t: --&gt; AP), AB, AM
	{
		if (ship.awardEquipment(&quot;EQ_LASER_COUPLER&quot;)) {
			if (chanceAft &gt; 0.4) {
				if (ship.mass &gt; 175000) {
					if (chanceAft &gt; 0.95) ship.aftWeapon = &quot;EQ_WEAPON_HIRAD_LASER&quot; // sniping					
					else if (chanceAft &gt; 0.8) ship.aftWeapon = &quot;EQ_WEAPON_EPULSE_LASER&quot;
					else if (chanceAft &gt; 0.6) ship.aftWeapon = &quot;EQ_WEAPON_PULSE_LASER&quot;
				} else ship.aftWeapon = null // &quot;WEAPON_NONE&quot;
			} else if (chanceAft &gt; 0.25) {
				ship.aftWeapon = &quot;EQ_WEAPON_BEAM_LASER&quot;;
			} else if (chanceAft &gt; 0.15) {
				ship.aftWeapon = &quot;EQ_WEAPON_EBEAM_LASER&quot;;
			} else {
				ship.aftWeapon = &quot;EQ_WEAPON_MILITARY_LASER&quot;;
			}
		} else {
			log(this.name, &quot;Uber lasers doesn&#39;t set (l:&quot; + level + &quot; -&gt; c:&quot; + choice + &quot;) on the [&quot; + k + &quot;](&quot; + pr + &quot;)&quot;);
			return false;
		}
	}
	if (choice &lt;= 1) { // Pulse Lasers(threat_assessment): EQ_WEAPON_EPULSE_LASER(0.0) + // Defence Lasers: EQ_WEAPON_BLAST_LASER(0.125) / EQ_WEAPON_DUAL_LASER(0.25)
		if (chanceFrd &gt; 0.85) {
			fwent.forwardWeapon = &quot;EQ_WEAPON_DUAL_LASER&quot;;
		} else if (chanceFrd &gt; 0.50) {
			fwent.forwardWeapon = &quot;EQ_WEAPON_BLAST_LASER&quot;;
		} else if (chanceFrd &gt; 0.15) {
			fwent.forwardWeapon = &quot;EQ_WEAPON_EPULSE_LASER&quot;; // + cool-running
		} else {
			fwent.forwardWeapon = &quot;EQ_WEAPON_PULSE_LASER&quot;;
		} // EQ_WEAPON_PULSE_LASER(0.0)
		ship.aftWeapon = null;
	} else if (choice == 2) { // VariScan Lasers(0.25): EQ_WEAPON_HVARISCAN_LASER / EQ_WEAPON_VARISCAN_LASER + // Beam Lasers: EQ_WEAPON_EBEAM_LASER(0.5)
		if (chanceFrd &gt; 0.85) {
			fwent.forwardWeapon = &quot;EQ_WEAPON_HVARISCAN_LASER&quot;;
		} else if (chanceFrd &gt; 0.50) {
			fwent.forwardWeapon = &quot;EQ_WEAPON_VARISCAN_LASER&quot;;
		} else if (chanceFrd &gt; 0.15) {
			fwent.forwardWeapon = &quot;EQ_WEAPON_EBEAM_LASER&quot;; // + cool-running
		} else {
			fwent.forwardWeapon = &quot;EQ_WEAPON_BEAM_LASER&quot;;
		} // EQ_WEAPON_BEAM_LASER(0.5)
		if (aftCheck &amp;&amp; ship.mass &gt; 175000 &amp;&amp; ship.aftWeapon != &quot;WEAPON_NONE&quot;) {
			if (chanceAft &gt; 0.8) ship.aftWeapon = &quot;EQ_WEAPON_PULSE_LASER&quot;
			else if (chanceAft &gt; 0.6) ship.aftWeapon = &quot;EQ_WEAPON_EPULSE_LASER&quot;
		} else ship.aftWeapon = null;
	} else if (choice == 3) { // Beam Lasers: EQ_WEAPON_EBEAM_LASER(0.5) + // Burst Lasers: EQ_WEAPON_BURST_LASER(0.75) / EQ_WEAPON_ASSAULT_LASER(1.0)
		if (chanceFrd &gt; 0.85) {
			fwent.forwardWeapon = &quot;EQ_WEAPON_ASSAULT_LASER&quot;; // dogfighting
		} else if (chanceFrd &gt; 0.50) {
			fwent.forwardWeapon = &quot;EQ_WEAPON_BURST_LASER&quot;; // dogfighting
		} else if (chanceFrd &gt; 0.15) {
			fwent.forwardWeapon = &quot;EQ_WEAPON_EBEAM_LASER&quot;; // + cool-running
		} else {
			fwent.forwardWeapon = &quot;EQ_WEAPON_BEAM_LASER&quot;;
		} // EQ_WEAPON_BEAM_LASER(0.5)
		if (aftCheck &amp;&amp; chanceAft &gt; 0.2) ship.aftWeapon = &quot;EQ_WEAPON_BEAM_LASER&quot;; // EQ_WEAPON_BEAM_LASER
	} else if (choice == 4) { // Bolt Lasers(0.75): EQ_WEAPON_HIRAD_LASER / EQ_WEAPON_STAR_LASER + // Burst Lasers: EQ_WEAPON_ASSAULT_LASER(1.0)
		if (chanceFrd &gt; 0.85) {
			fwent.forwardWeapon = &quot;EQ_WEAPON_HIRAD_LASER&quot;; // sniping
		} else if (chanceFrd &gt; 0.50) {
			fwent.forwardWeapon = &quot;EQ_WEAPON_STAR_LASER&quot;; // sniping
		} else if (chanceFrd &gt; 0.15) {
			fwent.forwardWeapon = &quot;EQ_WEAPON_ASSAULT_LASER&quot;; // dogfighting
		} else {
			fwent.forwardWeapon = &quot;EQ_WEAPON_MILITARY_LASER&quot;;
		} // EQ_WEAPON_MILITARY_LASER(1.0)
		if (aftCheck) {
			if (chanceAft &lt; 0.16) ship.aftWeapon = &quot;EQ_WEAPON_HIRAD_LASER&quot;
				else ship.aftWeapon = &quot;EQ_WEAPON_BEAM_LASER&quot;
		} // EQ_WEAPON_BEAM_LASER
	} else if (choice == 5) { // Military Lasers(1.0): EQ_WEAPON_EMILITARY_LASER // versatile and powerful combat lasers
		if (chanceFrd &gt; 0.3) {
			fwent.forwardWeapon = &quot;EQ_WEAPON_EMILITARY_LASER&quot;; // + cool-running
		} else {
			fwent.forwardWeapon = &quot;EQ_WEAPON_MILITARY_LASER&quot;;
		} // EQ_WEAPON_MILITARY_LASER
		if (aftCheck) {
			if (chanceAft &lt; 0.26) ship.aftWeapon = &quot;EQ_WEAPON_HIRAD_LASER&quot;
				else ship.aftWeapon = &quot;EQ_WEAPON_MILITARY_LASER&quot;
		} // EQ_WEAPON_MILITARY_LASER
	} else if (choice == 6) { // &#39;Uber&#39; Lasers(0.5): EQ_WEAPON_FRONTIER_LASER(0.25) / EQ_WEAPON_WILLIAMS_LASER / EQ_WEAPON_ZEUSCORP_LASER / EQ_WEAPON_ANDERSON_LASER
		if (chanceFrd &gt; 0.75) {
			fwent.forwardWeapon = &quot;EQ_WEAPON_FRONTIER_LASER&quot;; // standard pulse laser except that it kills things
		} // EQ_WEAPON_BEAM_LASER
		else if (chanceFrd &gt; 0.50) {
			fwent.forwardWeapon = &quot;EQ_WEAPON_WILLIAMS_LASER&quot;; // powerful, medium speed defence laser
		} else if (chanceFrd &gt; 0.25) {
			fwent.forwardWeapon = &quot;EQ_WEAPON_ZEUSCORP_LASER&quot;; // little beauty of a VariScan laser
		} else {
			fwent.forwardWeapon = &quot;EQ_WEAPON_ANDERSON_LASER&quot;; // mining
		}
		if (aftCheck &amp;&amp; chanceAft &lt; 0.16) {
			ship.aftWeapon = &quot;EQ_WEAPON_BEAM_LASER&quot;; // AM --&gt; AB
		} // little NONE(mass&gt;175t: AP), more AB, AM
	} else if (choice == 7) { // &#39;Uber&#39; Lasers: EQ_WEAPON_LUCAS_LASER(0.75) / EQ_WEAPON_QVC_LASER(1.0)
		if (chanceFrd &gt; 0.5) {
			fwent.forwardWeapon = &quot;EQ_WEAPON_LUCAS_LASER&quot;; // powerful beam laser
		} else {
			fwent.forwardWeapon = &quot;EQ_WEAPON_QVC_LASER&quot;; // amazing burst laser
		} // EQ_WEAPON_BEAM_LASER
		if (aftCheck &amp;&amp; chanceAft &lt; 0.16) {
			ship.aftWeapon = &quot;EQ_WEAPON_EBEAM_LASER&quot;; // AM --&gt; cool-running AB
		}
		// Aft: first setup: NONE(mass&gt;175t: AP), AB, AM
	} else if (choice == 8) { // &#39;Uber&#39; Lasers(1.0): EQ_WEAPON_DEXM_LASER
		fwent.forwardWeapon = &quot;EQ_WEAPON_DEXM_LASER&quot;; // EQ_WEAPON_MILITARY_LASER // hard bolt laser
		// Aft: first setup: NONE(mass&gt;175t: AP), AB, AM
	} else if (choice &gt;= 9) { // &#39;Uber&#39; Lasers(1.0): EQ_WEAPON_RIMMERACE_LASER
		fwent.forwardWeapon = &quot;EQ_WEAPON_RIMMERACE_LASER&quot;; // EQ_WEAPON_MILITARY_LASER // cool military laser
		if (aftCheck &amp;&amp; chanceAft &gt; 0.85) {
			ship.aftWeapon = &quot;EQ_WEAPON_HIRAD_LASER&quot;; // more sniping		
		}
		// Aft: first setup: NONE(mass&gt;175t: AP), AB, AM
	}
	if (lg) log(this.name, &quot;Set (l:&quot; + level.toFixed(1) + &quot; -&gt; c:&quot; + choice + &quot;) &quot; + fwent.forwardWeapon + &quot;/&quot; + ship.aftWeapon + &quot; on the [&quot; + k + &quot;](&quot; + pr + &quot;)&quot;);
	return true;
}
/* Roles:
 *
 * - ships from tech assassin shipset pack : this._setNewLasers(t[0])
 *
 */

// Loads one type of the extra missile to ship (with equipmentKey replacement option)
this._setExtraMissiles = function (ship,extraMissileLauncher,equipmentKey) {
	var l = parseInt(extraMissileLauncher);
	var m, eqpKey, extra;
	var extras = [];
	var capacity = ship.missileCapacity;
	if (this._extraMissiles.length === 0) return;

	if (!equipmentKey) eqpKey = &quot;EQ_MISSILE&quot;
		else eqpKey = equipmentKey;

	extras = extras.concat(this._extraMissiles);
	if (l &amp;&amp; l &gt; 0 &amp;&amp; ship.mass &gt; 175000) { // &gt;= Boa
		extras.push(&quot;EQ_NPC_CT_MINE&quot;)
	}

	extra = extras[Math.floor(Math.random() * extras.length)];
	
	// v1 - full load
	// m = capacity;
	// while (m--) {
	// 	ship.removeEquipment(eqpKey);
	// 	ship.awardEquipment(extra);
	// }

	// v2 - not work
	// for (var i = ship.missiles.length -1 ; i &gt;= 0 ; i--) {
	// 	if (ship.missiles[i].primaryRole == eqpKey) {
	// 		ship.removeEquipment(eqpKey);
	// 		ship.awardEquipment(extra);
	// 	}
	// }

	// v3 - perhaps partial, depend from amount of missiles
	for (var i = ship.missiles.length -1 ; i &gt;= 0 ; i--) {
		ship.removeEquipment(eqpKey);
		ship.awardEquipment(extra);
	}//if (capacity &gt; 1 &amp;&amp; ship.missiles.length === 0) ship.awardEquipment(extra);

	//log(this.name, extra + &quot; extra missile will be installed.&quot;); // in case eqpKey = &quot;EQ_HARDENED_MISSILE&quot; not installed
}

/* Bias:
 * +N = N 50% chances that each normal missile converted to hardened
 * -N = N 50% chances that each normal missile removed
 */
this._setMissiles = function(ship,bias) // not used, for example
{
	if (ship.autoWeapons)
	{
		var chance = Math.pow(0.5,Math.abs(bias));
		for (var i = ship.missiles.length -1 ; i &gt;= 0 ; i--)
		{
			if (ship.missiles[i].primaryRole == &quot;EQ_MISSILE&quot; &amp;&amp; chance &lt; Math.random())
			{
				ship.removeEquipment(&quot;EQ_MISSILE&quot;);
				if (bias &gt; 0)
				{
					ship.awardEquipment(&quot;EQ_HARDENED_MISSILE&quot;);
				}
			}
		}

	}
}

this.$defaultRoles = [
	&quot;trader&quot;, &quot;trader-courier&quot;, &quot;trader-smuggler&quot;,
	&quot;pirate&quot;, &quot;pirate-light-freighter&quot;, &quot;pirate-medium-freighter&quot;, &quot;pirate-heavy-freighter&quot;,
	&quot;pirate-light-fighter&quot;, &quot;pirate-medium-fighter&quot;, &quot;pirate-heavy-fighter&quot;,
	&quot;hunter&quot;, &quot;hunter-medium&quot;, &quot;hunter-heavy&quot;, &quot;assassin-light&quot;, &quot;assassin-medium&quot;, &quot;assassin-heavy&quot;,
	&quot;escort&quot;, &quot;escort-light&quot;, &quot;escort-medium&quot;, &quot;escort-heavy&quot;,
	&quot;stealth-assassin&quot;, &quot;stealth-hunter&quot;, &quot;stealth-raider&quot;, &quot;stealth-courier&quot;, &quot;stealth-assassin-light&quot;, &quot;stealth-assassin-medium&quot;, &quot;stealth-assassin-heavy&quot;
]

this.$setRoleName = function (role) {
	// no roles: fighter, miner, police, scavenger, shuttle, wingman
	var pr, r = role;

	// single role
	if (r.indexOf(&#39;courier&#39;) &gt; -1) {
		return &quot;trader-courier&quot;;
	} else if (r.indexOf(&#39;smuggler&#39;) &gt; -1) {
		return &quot;trader-smuggler&quot;;
	} else if (r.indexOf(&#39;interceptor&#39;) &gt; -1) {
		return &quot;pirate-interceptor&quot;;
	} else if (r.indexOf(&#39;raider&#39;) &gt; -1) {
		return &quot;pirate-aegis-raider&quot;;
	}

	// 1 word
	if (r.indexOf(&#39;trader&#39;) &gt; -1) {
		pr = &quot;trader&quot;;
	} else if (r.indexOf(&#39;hunter&#39;) &gt; -1) {
		pr = &quot;hunter&quot;;
		if (r.indexOf(&#39;light&#39;) &gt; -1) {
			return &quot;hunter&quot;;
		}
	} else if (r.indexOf(&#39;escort&#39;) &gt; -1) {
		pr = &quot;escort&quot;;
	} else if (r.indexOf(&#39;assassin&#39;) &gt; -1) {
		pr = &quot;assassin&quot;;
	} else if (r.indexOf(&#39;pirate&#39;) &gt; -1) {
		pr = &quot;pirate&quot;;
		if (r.indexOf(&#39;heavy&#39;) &gt; -1) {
			pr += &quot;-heavy-freighter&quot;;
		} else if (r.indexOf(&#39;medium&#39;) &gt; -1) {
			pr += &quot;-medium-freighter&quot;;
		} else if (r.indexOf(&#39;light&#39;) &gt; -1) {
			pr += &quot;-light-freighter&quot;;
		}
		return pr;
	}

	// 2 word
	if (r.indexOf(&#39;heavy&#39;) &gt; -1) {
		pr += &quot;-heavy&quot;;
	} else if (r.indexOf(&#39;medium&#39;) &gt; -1) {
		pr += &quot;-medium&quot;;
	} else if (r.indexOf(&#39;light&#39;) &gt; -1) {
		pr += &quot;-light&quot;;
	}

	if (!pr) pr = r; // not found a standart roles and will set a role

	return pr;
}

this.$setLevel = function (role,bias) {
	var level;
	var pr = role;
	var level = 1;
	var addLevel = 1; // for default-ship role
	var chance = bias;

	// 1 word
	if (pr.indexOf(&#39;hunter&#39;) &gt; -1) {
		level = 0.4
	} else if (pr.indexOf(&#39;pirate&#39;) &gt; -1) {
		level = 0.7
	} else if (pr.indexOf(&#39;assassin&#39;) &gt; -1) {
		level = 1.0
	}                                // hunter != assassin 

	// 2 word
	// base level: hunter: [1.5], medium[1.9], heavy[2.2+0.6], smuggler[1.2]
	// base level: assassin: light[2], medium[2.5], heavy[2.8+0.6], pirate-interceptor[2.3], pirate-aegis-raider[2.7]
	if (pr === &quot;hunter&quot;) {
		level += 1.1
	} else if (pr.indexOf(&#39;light&#39;) &gt; -1) {
		level += 1.0
	}                                // a: l(100) --&gt; 0/65/35/0/0/0
	else if (pr.indexOf(&#39;interceptor&#39;) &gt; -1) {
		level += 1.6
	} else if (pr.indexOf(&#39;medium&#39;) &gt; -1) {
		level += 1.5
	} // a: m(100) --&gt; 0/21/71/8/0/0
	else if (pr.indexOf(&#39;raider&#39;) &gt; -1) {
		level += 2.0
	} else if (pr.indexOf(&#39;heavy&#39;) &gt; -1) {
		level += 2.4;
		addLevel = 2.4;
	}                                // a: h(100) --&gt; 0/0/18/50/24/8 : heavy roles is expandable: add 0.6 to base + 0.6 to level 6
	else if (pr.indexOf(&#39;smuggler&#39;) &gt; -1) {
		level += 0.2
	} else if (pr.indexOf(&#39;shipset&#39;) &gt; -1) {
		level += 0.4;
		addLevel = 4.4;
	}                                // for console demo test based on shipKey | shipset --&gt; 8/36/24/14/12/6

	// unusual role
	else if (pr.indexOf(&#39;assassin&#39;) &gt; -1 || pr.indexOf(&#39;hunter&#39;) &gt; -1) {
		if (chance &lt; 0.142) {
			level = 2.8;
			addLevel = 3.0;
		}                         // ~ 0.25 : heavy roles is expandable
		else if (chance &lt; 0.428) {
			level = 2.5
		}                        // ~ 0.50
		else {
			level = 2
		}                        // ~ 1.00
	}
	level += Math.pow(Math.random(), 2) * addLevel; // ^2 : a: l/m/h(100) --&gt; 0/27/41/20/9/3
	return level
}

this.$setNewWeaponsLevel = function (role,bias) {
	var level;
	var pr = role;
	var level = 1;
	var addLevel = 1; // for default-ship role
	var chance = bias;

	// 1 word
	if (pr.indexOf(&#39;hunter&#39;) &gt; -1) {
		level = 0.7
	} else if (pr.indexOf(&#39;pirate&#39;) &gt; -1) {
		level = 0.7
	} else if (pr.indexOf(&#39;assassin&#39;) &gt; -1) {
		level = 1.0
	} // hunter != assassin

	// 2 word
	// level: hunter: [0.9], medium[1.9], heavy[3.4], smuggler[1.5]
	// level: assassin: light[1.2], medium[2.2], heavy[3.7], interceptor[2.0], raider[2.7]
	if (pr === &quot;hunter&quot;) {
		level += 0.2;
	} else if (pr.indexOf(&#39;light&#39;) &gt; -1) {
		level += 0.2;
	} else if (pr.indexOf(&#39;interceptor&#39;) &gt; -1) {
		level += 1.3;
	} else if (pr.indexOf(&#39;medium&#39;) &gt; -1) {
		level += 1.2;
		addLevel = 3;
	} else if (pr.indexOf(&#39;raider&#39;) &gt; -1) {
		level += 2.0;
		addLevel = 4;
	} else if (pr.indexOf(&#39;heavy&#39;) &gt; -1) {
		level += 2.7;
		addLevel = 6;
	} else if (pr.indexOf(&#39;smuggler&#39;) &gt; -1) {
		level += 0.5
	} else if (pr.indexOf(&#39;shipset&#39;) &gt; -1) {
		level += 3;
		addLevel = 6;
	} // for console demo test based on shipKey

	// unusual role
	else if (pr.indexOf(&#39;assassin&#39;) &gt; -1 || pr.indexOf(&#39;hunter&#39;) &gt; -1) {
		if (chance &lt; 0.142) {
			level = 3.7;
			addLevel = 6;
		} // ~ 0.25
		else if (chance &lt; 0.428) {
			level = 2.2;
			addLevel = 3;
		} // ~ 0.50
		else {
			level = 1.2
		} // ~ 1.00
	}

	level += Math.pow(Math.random(), 3) * addLevel; // ^3
	return level
}

this._setPrimaryRoleToShip = function (ship) {
	var pr = ship.primaryRole;
	if (pr) {
		var dr = this.$defaultRoles;
		if (dr.indexOf(pr) &lt; 0) {
			ship.primaryRole = this.$setRoleName(pr); // log(this.name +&quot; : set a primary role: &quot;+ ship.primaryRole);
		}
		return ship.primaryRole;
	}
}

this._setStealthToShip = function (ship) {
	// add our shipExitedWormhole, shipDied and shipRemoved events to the ship
	// monkey patch if necessary
	var s = ship;
	var sc = s.script; // TODO?: s.scriptInfo.telescope

	if (!sc.$stealthMode) {
		sc.$stealthMode = this.$stealthMode;
		
		if (sc.shipEnergyBecameFull) sc.$stealth_ovr_shipEnergyBecameFull = sc.shipEnergyBecameFull;
		sc.shipEnergyBecameFull = this.$stealth_shipEnergyBecameFull;
		if (sc.shipEnergyIsLow) sc.$stealth_ovr_shipEnergyIsLow = sc.shipEnergyIsLow;
		sc.shipEnergyIsLow = this.$stealth_shipEnergyIsLow;
		
		s.scannerDisplayColor1 = [0, 0, 0, 0];
	}
}

this.$stealthMode = function (state) {
	if (state &amp;&amp; state == &quot;off&quot;) {
		this.ship.scannerDisplayColor1 = &quot;yellowColor&quot;;
		this.ship.scannerDisplayColor2 = &quot;redColor&quot;;
	} else {
		this.ship.scannerDisplayColor1 = [0, 0, 0, 0];
		this.ship.scannerDisplayColor2 = [0, 0, 0, 0];
	}
}

this.$stealth_shipEnergyBecameFull = function () {
	if (this.ship.script.$stealth_ovr_shipEnergyBecameFull) this.ship.script.$stealth_ovr_shipEnergyBecameFull(); //whom, why
	this.$stealthMode(&quot;on&quot;);
}

this.$stealth_shipEnergyIsLow = function () {
	if (this.ship.script.$stealth_ovr_shipEnergyIsLow) this.ship.script.$stealth_ovr_shipEnergyIsLow();
	this.$stealthMode(&quot;off&quot;);
}

/* Ship addition functions for BountySystem_MostWanted */

this._delayedAddMostWanted = function (ship,t) {
	// delay need for set dta.shipName and etc.
	var w = worldScripts.Assassin_shipset_pack;
	if (ship) {
		w._wantedGroup = ship; //ship; //_wantedGroup.push(ship); //w._leader = ship; //log(this.name, ship);
		if (!t) {
			t = 4;
		}
		if (!w.$addShipTimer) {
			w.$addShipTimer = new Timer(w, w._delayedAddMostWanted, t, t);
		} else {
			w.$addShipTimer.start();
		}
	} else {
		w.$addShipTimer.stop();
		w.$addShipToMostWanted(w._wantedGroup);
	}
}

this.$addShipToMostWanted = function (entity) { //copy a function this.$testData from GC MostWanted --&gt; been modify for ASPack

	var mw = worldScripts.BountySystem_MostWanted;
	// v1 - for push version
	//if (entity &amp;&amp; entity.count &gt; 0) {
	// v2 - basic
	if (entity) {
		var ship;

		/*// v1
		for (var i=0; i&lt;entity.length;i++) {
			if (this._leader != entity[i]) {
				log(this.name, &quot;Replaced wanted pilot&quot;);
			}
		}
		ship = this._leader; //*/

		// v2
		ship = entity; // ship // group.ships[0] //if (this.logging) log(this.name, ship);

		var group = ship.group;
		if (this._debug) log(this.name, &quot;Start setting the group: &quot; + this._groupName);

		/*// set up a dummy type 3
		var syslist = system.info.systemsInRange(7);
		var list = [];
		for (var i = 0; i &lt; syslist.length; i++) {
			list.push(syslist[i].systemID);
		}
		this._safeDangerous.push({
			id: system.ID,
			dangerous: list
		});
		//*/
		// TODO: select optimal version, need modify for ASPack or read a ship.homeSystem?

		// create a record
		var s_name, a_type, s_type = 4;
		var role = ship.primaryRole;
		if (!role) { // TEST: Fixed in future
			log(this.name, &quot;Error: not create a record, this ship: &quot; + ship + &quot; from group: &quot; + group.name + &quot; have incorrect role setting&quot;);
			return
		}
		if (role.indexOf(&#39;assassin&#39;) &gt; -1) {
			a_type = 3;
			s_type = 8; // temp for ASPack
			if (role.indexOf(&#39;heavy&#39;) &gt; -1) {
				s_type = 9
			}
		}

		// default start setting for ASPack
		var dta = {};
		dta.index = mw.$newItemIndex();
		dta.routeMode = &quot;OPTIMIZED_FOR_JUMPS&quot;;
		dta.pending = true; // TEST: in order to not create repeatly
		dta.bounty = 0;

		/* // setting from GC MostWanted, version = &quot;0.5&quot;
			- assassin:
					// bounty between 250 and 11600
					dta.realBounty = parseInt(Math.random() * 100 + 250) + ((parseInt(Math.random() * 250) + 200) * Math.pow(5, s_type - 7));
					// vary rarely add some really juicy numbers
					if (Math.random() &gt; 0.97) dta.realBounty += parseInt(Math.random() * 5000 + 5000);
					dta.routeMode = &quot;OPTIMIZED_FOR_TIME&quot;;
			- $testData:
					// bounty between 250 and 15200
					dta.realBounty = parseInt(Math.random() * 100 + 250) + ((parseInt(Math.random() * 250) + 200) * Math.pow(3, s_type - 4));
					dta.bounty = 60 + (Math.floor(Math.random() * 8)) + Math.floor(Math.random() * 8);
					dta.pending = false;
		*/

		// WIP: set to ASPack
		if (Math.random() &gt; 0.5) dta.routeMode = &quot;OPTIMIZED_FOR_TIME&quot;;
		// bounty between 250 and 11600 // WIP: + ship.script.$initBounty ?
		dta.realBounty = parseInt(Math.random() * 100 + 250) + ((parseInt(Math.random() * 250) + 200) * Math.pow(5, s_type - 7));
		// vary rarely add some really juicy numbers
		if (Math.random() &gt; 0.97) dta.realBounty += parseInt(Math.random() * 5000 + 5000);
		// build a ship
		var def_role = &quot;assassin-light&quot;; // set for ASPack	 //var role = &quot;&quot;;
		switch (s_type) {
			case 4:
				//role = &quot;pirate&quot;; // dta.shipAI = &quot;oolite-pirateAI.js&quot;;
				dta.escortsRole = &quot;pirate&quot;;
				break;
			case 5:
				//role = &quot;pirate-light-freighter&quot;;
				dta.escortsRole = &quot;pirate-light-fighter&quot;;
				break;
			case 6:
				//role = &quot;pirate-medium-freighter&quot;;
				dta.escortsRole = &quot;pirate-medium-fighter&quot;;
				break;
			case 7:
				//role = &quot;pirate-heavy-freighter&quot;;
				dta.escortsRole = &quot;pirate-heavy-fighter&quot;;
				break;
			case 8:
				//role = &quot;assassin-medium&quot;; // dta.shipAI = &quot;oolite-assassinAI.js&quot;;
				dta.escortsRole = &quot;assassin-light&quot;;
				break;
			case 9:
				//role = &quot;assassin-heavy&quot;; // dta.shipAI = &quot;oolite-assassinAI.js&quot;;
				dta.escortsRole = &quot;assassin-medium&quot;;
				break;
		}
		if (mw.$roleExists(role) === false) role = def_role;
		dta.shipAI = &quot;oolite-assassinAI.js&quot;; // temp for ASPack

		//var found = false;
		//do {
		//dta.shipDataKey = mw.$getRandomShipKey(role);
		//var shipPlist = Ship.shipDataForKey(dta.shipDataKey);
		//dta.shipType = shipPlist.name;
		//// make sure this is a serious pirate (not a bug or hognose)
		//if (shipPlist.max_cargo &gt;= 20 + (s_type - 4) * 20) found = true;
		//} while (found === false);
		// TODO: added to ASPack ? --&gt; no for assassin: 2 below string
		dta.shipDataKey = ship.dataKey; // TODO: need added: &quot;bounty_&quot;+ shipKey ?
		s_name = ship.displayName.split(&#39;: &#39;);
		dta.shipType = s_name[0]; // dta.shipType = ship.name;
		dta.shipName = s_name[1];
		dta.personality = ship.entityPersonality; // can only do this in Oolite 1.81 or greater --&gt; dta.personality = Math.floor(Math.random() * 32767);
		dta.primaryRole = role;
		dta.accuracy = ship.accuracy;
		dta.heatInsulation = 2; // or ship.heatInsulation
		switch (s_type) {
			case 4:
				dta.equipment = &quot;FORE:EQ_WEAPON_MILITARY_LASER&quot;;
				break;
			case 5:
				dta.equipment = &quot;FORE:EQ_WEAPON_BEAM_LASER,AFT:EQ_WEAPON_BEAM_LASER,EQ_CLOAKING_DEVICE&quot;;
				break;
			case 6:
				dta.equipment = &quot;FORE:EQ_WEAPON_MILITARY_LASER,AFT:EQ_WEAPON_BEAM_LASER,EQ_CLOAKING_DEVICE&quot;;
				break;
			case 7:
				dta.equipment = &quot;FORE:EQ_WEAPON_MILITARY_LASER,AFT:EQ_WEAPON_MILITARY_LASER,EQ_CLOAKING_DEVICE&quot;;
				break;
			case 8:
			case 9:
				var aft = &quot;null&quot;, frw = &quot;null&quot;; // TODO TEST
				if (ship.aftWeapon) aft = ship.aftWeapon.equipmentKey;				
				if (ship.forwardWeapon) frw = ship.forwardWeapon.equipmentKey;
				dta.equipment = &quot;FORE:&quot; + frw + &quot;,AFT:&quot; + aft;
				break;
		}
		// ship.hasEquipment(&quot;EQ_ESCAPE_POD&quot;) / ship.hasEquipment(EquipmentInfo.infoForKey(&quot;EQ_ESCAPE_POD&quot;))
		if (ship.equipmentStatus(&quot;EQ_ESCAPE_POD&quot;) === &quot;EQUIPMENT_OK&quot;) {
			dta.equipment += &quot;,EQ_ESCAPE_POD&quot;;
		} else {
			dta.equipment += &quot;,X:EQ_ESCAPE_POD&quot;;
		}
		if (ship.equipmentStatus(&quot;EQ_SHIELD_BOOSTER&quot;) === &quot;EQUIPMENT_OK&quot;) { // ship.equipmentStatus() (replaces playerShip.equipmentStatus()) work in oolite v1.84
			dta.equipment += &quot;,EQ_SHIELD_BOOSTER&quot;;
			dta.realBounty += parseInt(Math.random() * 1000 + 1000); // WAIT: Optimal ?
		}
		if (ship.equipmentStatus(&quot;EQ_SHIELD_ENHANCER&quot;) === &quot;EQUIPMENT_OK&quot;) {
			dta.equipment += &quot;,EQ_SHIELD_ENHANCER&quot;;
			dta.realBounty += parseInt(Math.random() * 2000 + 2000); // WAIT: Optimal ?
		}
		// booster and shield enhancer not fixed equipment, semi-variable usable due to ship script and shipdata.plist
		if (ship.equipmentStatus(&quot;EQ_CLOAKING_DEVICE&quot;) === &quot;EQUIPMENT_OK&quot;) {
			dta.equipment += &quot;,EQ_CLOAKING_DEVICE&quot;;
			dta.realBounty += parseInt(Math.random() * 3000 + 3000); // WAIT: Optimal ?
		} else {
			dta.equipment += &quot;,X:EQ_CLOAKING_DEVICE&quot;;
		}
		// disable before solve about including in shipdata.plist
		//if (ship.equipmentStatus(&quot;EQ_MILITARY_JAMMER&quot;) === &quot;EQUIPMENT_OK&quot;) {
		//dta.equipment += &quot;,EQ_MILITARY_JAMMER&quot;;
		//dta.realBounty += parseInt(Math.random() * 2000 + 2000); // WAIT: Optimal ?
		//} else {
		//dta.equipment += &quot;,X:EQ_MILITARY_JAMMER&quot;;
		//}
		if (ship.forwardWeapon.equipmentKey.indexOf(&#39;EQ_WEAPON_CANNON_SNIPER_GUN&#39;) &gt; -1 ||
			ship.forwardWeapon.equipmentKey.indexOf(&#39;EQ_WEAPON_CANNON_HEAVY_SNIPER_GUN&#39;) &gt; -1) {
			dta.realBounty += parseInt(Math.random() * 1500 + 1500); // WAIT: Optimal ? // log(this.name, &quot;Added realBounty for forwardWeapon : &quot;+ ship.forwardWeapon.equipmentKey);
		}
		if (ship.aftWeapon.equipmentKey.indexOf(&#39;EQ_WEAPON_CANNON_SNIPER_GUN&#39;) &gt; -1 ||
			ship.aftWeapon.equipmentKey.indexOf(&#39;EQ_WEAPON_CANNON_HEAVY_SNIPER_GUN&#39;) &gt; -1) {
			dta.realBounty += parseInt(Math.random() * 1500 + 1500); // WAIT: Optimal ? // log(this.name, &quot;Added realBounty for aftWeapon : &quot;+ ship.aftWeapon.equipmentKey);			
		}
		// WAIT: assassin can buy &quot;X&quot;-equipment in the route ?

		//dta.escorts = ((s_type - 3) * 2); // 2, 4, 6 or 8

		// adding escorts
		dta.escorts = 0;
		dta.escortData = [];

		/*//
		dta.escorts = 0;
		dta.escortData = [];
		//if (group &amp;&amp; group.leader.entityPersonality === ship.entityPersonality) {
			// this ship is leader group
			this.$addEscortsToData(ship,dta);
		//}
		//*/
		// TEST: need modify for ASPack or read a ship.escorts?
		//mw.$addEscortsToData(dta);

		// create a pilot, picking a random system as home
		//t var pilot = mw.$createPilot(Math.floor(Math.random() * 256)); // TODO: added to ASPack or ship.crew[0]?
		var p = ship.crew[0];
		dta.pilotDescription = p.description;
		dta.pilotName = p.name;
		dta.pilotHomeSystem = p.homeSystem;
		dta.pilotSpecies = p.species;

		/* // setting : assassin - from GC MostWanted, version = &quot;0.5&quot;
					// where are they now, and where are they headed?
					// pick a safe/dangerous element, start them in the safe one
					dta.arrayIndex = Math.floor(Math.random() * this._safeDangerous.length);
					dta.movement = 3; // star-type movement (if there is more than 1 dangerous system against the safe one, otherwise same as a milkrun)
					var sd = this._safeDangerous[dta.arrayIndex];
					dta.system = sd.dangerous[0];
					dta.destinationSystem = sd.id;

					// when did they dock?
					dta.dockTime = clock.adjustedSeconds - (Math.random() * 21600 + 3600);
					// when will they leave dock?
					dta.departureTime = clock.adjustedSeconds + (Math.random() * 21600 + 3600);
					// arrival time in new system will be departureTime + travelTime(time between systems) + extraTime(random flight time)
					// is their current position visible to GalCop?
					dta.updateChance = (s_type / 15);
		*/

		// where are they now, and where are they headed?
		// pick a safe/dangerous element, start them in the safe one
		dta.arrayIndex = mw._safeDangerous.length; //  /- 1 / edit for ASPack
		dta.movement = 3; // star-type movement (if there is more than 1 dangerous system against the safe one, otherwise same as a milkrun)
		//var sd = this._safeDangerous[dta.arrayIndex]; // modify for ASPack
		var ss = this._safeSystemsForShipset(a_type);
		dta.system = system.ID; // this system : system.info.systemID;
		// v1 - default
		//dta.system = sd.id; //sd.dangerous[0];
		//dta.destinationSystem = sd.dangerous[0]; //sd.id;
		// v2 - from ship
		//dta.destinationSystem = ship.destinationSystem; //ship.homeSystem;
		// v3 - from script
		dta.destinationSystem = ss[Math.floor(Math.random() * ss.length)];
		// WAIT: need modify safe/dangerous element or createCustomPath for ASPack?

		// after leader add escort record
		this.$addEscortsToData(ship, dta);

		// when did they dock?
		dta.dockTime = clock.adjustedSeconds - 3600; // (3600 * 10.5);
		// when will they leave dock?
		dta.departureTime = clock.adjustedSeconds + (3600 * 4.5); //(3600 * 8.5);
		// arrival time in new system will be departureTime + travelTime(time between systems) + extraTime(random flight time)
		// is their current position visible to GalCop?
		dta.updateChance = (s_type / 15); // WIP: (s_type / 15) | ((s_type - 3) / 5)
		// WAIT: need modify dockTime, departureTime, updateChance for ASPack?

		if (Math.random() &gt; dta.updateChance) { // 0 | dta.updateChance
			dta.lastVisibleSystem = dta.system;
			dta.lastVisibleDestination = dta.destinationSystem;
			dta.updated = dta.dockTime;
		} else {
			dta.lastVisibleSystem = -1;
		}
		dta.lastVisibleHistory = [2];
		//dta.lastVisibleHistory = {updated:dta.updated, system:dta.lastVisibleSystem, destination:dta.lastVisibleDestination};
		// WAIT: need modify current position visible for ASPack?

		/* // finalise settings - from GC MostWanted, version = &quot;0.5&quot;
			if (Math.random() &gt; dta.updateChance) {
				dta.lastVisibleSystem = dta.system;
				dta.lastVisibleDestination = dta.destinationSystem;
				dta.updated = clock.adjustedSeconds - ((Math.random() * 14) * 86400) + (Math.random() * 86400);
			} else {
				dta.lastVisibleSystem = -1;
			}
			dta.lastVisibleHistory = [2];
		*/

		if (mw._debug) mw.$writeDataToLog(dta, &quot;Creating special record&quot;);
		mw._wanted.push(dta);

		this._wanted_amount++;
		if (this._debug) log(this.name, &quot;Added special record to MostWanted list&quot;)

	} else {
		log(this.name, &quot;Error: d&#39;t added a ship to MostWanted list : &quot; + ship);
		return
	}
	this._leader.length = 0; // this._wantedGroup = [];

	//*//
	// TEST: Need update ship or this.$updateMovementData() will right?
	this.$updateShip(ship, dta)

	//if (dta.escorts &gt; 0 &amp;&amp; dta.escortData.length &gt; 0) {}

	if (this._sdc_Installed) {
		var sdc = worldScripts.StationDockControl;
		sdc.$awaitShipDocking({
			shipName: dta.shipName,
			pilotName: dta.pilotName,
			worldScript: this.name,
			callback: &quot;$sdc_shipDockedWithStation&quot;,
			parameter: dta.index,
			launchCallback: &quot;$bounty_launchCallback&quot;
		});
	}

	/* temp before release
	if (mw._wanted.push(dta)) {
		if (mw._debug) mw.$writeDataToLog(dta, &quot;Creating special record&quot;);
		if (this.logging) log(this.name, &quot;Added special record to MostWanted list&quot;);
		return true
	} else {
		return false
	}
	*/
}

this.$addEscortsToData = function (leader,dta) {
	dta.escorts = 0;
	dta.escortData = [];
	if (!leader.group) { // TEST: rustem: error in oolite-populator.js : [escortGroup --&gt; group]?
		return;
	}

	var eg = leader.group.ships; // TEST: rustem: error in oolite-populator.js : [escortGroup --&gt; group]?
	if (this._debug) log(this.name, &quot;Start setting : &quot; + (eg.length - 1) + &quot; escorts&quot;);

	for (var i = eg.length - 1; i &gt;= 0; i--) {
		var escort = eg[i];
		if (escort == leader) {
			continue;
		}
		dta.escorts++;
		var esc = {};
		// small update
		var bounty = escort.bounty;
		var hiddenBounty = 0;
		var e_name = escort.displayName.split(&#39;: &#39;);
		var personality = this._encodePersonality(escort);
		if (escort._hiddenBounty) {
			hiddenBounty = escort._hiddenBounty;
			escort.script._hiddenBounty = hiddenBounty;
			escort.script._storedHiddenBounty = hiddenBounty;
			if (this._debug) log(this.name, &quot;Added hiddenBounty : &quot; + hiddenBounty);
		}
		escort.shipUniqueName = e_name[1];
		escort.entityPersonality = personality;

		// create record
		esc[&quot;escortShipKey&quot;] = escort.dataKey;
		esc[&quot;escortShipName&quot;] = e_name[1];
		//esc[&quot;escortPersonality&quot;] = escort.entityPersonality; // Math.floor(Math.random() * 32768);
		esc[&quot;escortPersonality&quot;] = personality;
		esc[&quot;escortPilotName&quot;] = escort.crew[0].name; // this.$generateName(); //randomName() +&quot; &quot;+ randomName();
		if (dta.primaryRole.indexOf(&quot;pirate&quot;) &gt;= 0) {
			esc[&quot;escortBounty&quot;] = bounty + Math.floor(Math.random() * (d.accuracy * 5) + 5);
		} else {
			esc[&quot;escortBounty&quot;] = bounty;
		}
		esc[&quot;escortHiddenBounty&quot;] = hiddenBounty + Math.floor(Math.random() * 30 + 5); // WAIT: Add bonus (sc._hiddenBounty) for asssasin band ?
		dta.escortData.push(esc);

		if (this._debug) log(this.name, &quot;Added &quot; + dta.escorts + &quot; escort ship to MW leader&quot;);
	}
}

this.$updateShip = function (leader,dta) {
	var scn = worldScripts.BountySystem_WarrantScanner;
	var mw = worldScripts.BountySystem_MostWanted;

	// attach scripts for leader
	mw.$bounty_launchCallback(&quot;launched&quot;, leader);
	//dta.fuel = 7 - (rt ? rt.distance : 0);

	// need added goods for trader, pirate roles
	//dta.goods = &quot;&quot;;

	// update ship : some comment
	scn.$setBounty(leader, dta.realBounty);
	leader.setBounty(dta.bounty, &quot;setup actions&quot;);
	leader.shipUniqueName = dta.shipName;
	leader.homeSystem = dta.pilotHomeSystem;
	leader.destinationSystem = dta.destinationSystem;
	leader.fuel = 7; //ship.fuel = dta.fuel;
	leader.script._mostWanted = dta.index;
	if (this._debug) log(this.name, &quot;Update leader in real-time&quot;);

	if (!leader.group) {
		return;
	}

	var count = 0;
	var eg = leader.group.ships;
	if (this._debug) log(this.name, &quot;Start update : &quot; + (eg.length - 1) + &quot; escorts&quot;);

	for (var i = eg.length - 1; i &gt;= 0; i--) {
		var escort = eg[i];
		if (escort == leader) {
			continue;
		}

		count++;

		// update escort
		//escort.shipUniqueName = escort.escortShipName; // been set in this.$addEscortsToData
		//escort.entityPersonality = escort.escortPersonality; // been set in this.$addEscortsToData
		escort.fuel = 7;
		escort.homeSystem = dta.pilotHomeSystem;
		escort.destinationSystem = leader.destinationSystem;
		// set the seed values so that the pilot&#39;s species can be defined by their home system
		var seed = &quot;0 0 0 0 &quot; + dta.pilotHomeSystem.toString() + &quot; 2&quot;;
		escort.setCrew({
			name: escort.escortPilotName,
			origin: dta.pilotHomeSystem,
			bounty: escort.escortBounty,
			random_seed: seed
		});

		mw.$bounty_escortLaunchCallback(&quot;launched&quot;, escort);

		escort.script._mostWanted = dta.index;
		//escort.script._hiddenBounty = item.escortHiddenBounty; // been set in this.$addEscortsToData
		//wpop._setWeapons(esc, 2.5); // not need for ASPack

		// temp disable
		//escort.group = grp;
		//grp.addShip(escort);

		// try to do an escort offer
		//escort.performEscort();

	}

	if (this._debug) log(this.name, &quot;Updated &quot; + count + &quot; escorts in real-time&quot;);
}

// functions for encode and decode a personality

this._encodePersonality = function (ship) {
	//ship = this.ship;
	var p = 0; // personality: [0..32767]
	var code;
	if (ship.forwardWeapon) {
		code = this.$itemEncode[ship.forwardWeapon.equipmentKey];
		p |= code &lt;&lt; 10;
	}
	if (ship.aftWeapon) {
		code = this.$itemEncode[ship.aftWeapon.equipmentKey];
		p |= code &lt;&lt; 5;
	}
	if (ship.equipmentStatus(&quot;EQ_ESCAPE_POD&quot;) === &quot;EQUIPMENT_OK&quot;) {
		p |= 0x0010;
	}
	if (ship.equipmentStatus(&quot;EQ_SHIELD_BOOSTER&quot;) === &quot;EQUIPMENT_OK&quot;) {
		p |= 0x0008;
	}
	if (ship.equipmentStatus(&quot;EQ_SHIELD_ENHANCER&quot;) === &quot;EQUIPMENT_OK&quot;) {
		p |= 0x0004;
	}
	// booster and shield enhancer not fixed equipment, semi-variable usable due to ship script and shipdata.plist
	if (ship.equipmentStatus(&quot;EQ_CLOAKING_DEVICE&quot;) === &quot;EQUIPMENT_OK&quot;) {
		p |= 0x0002;
	}
	if (ship.equipmentStatus(&quot;EQ_MILITARY_JAMMER&quot;) === &quot;EQUIPMENT_OK&quot;) {
		p |= 0x0001;
	}
	if (this._debug_Eqp) log(this.name, ship.script.name + &quot; : escort has personality: &quot; + p);
	/*/ tepmlate
	if (ship.portWeapon) {
		code = this.$itemEncode[ship.portWeapon.equipmentKey];
		p |= code&lt;&lt;20;
	}
	if (ship.starboardWeapon) {
		code = this.$itemEncode[ship.starboardWeapon.equipmentKey];
		p |= code&lt;&lt;15;
	}
	//*/
	return p;
}

this._decodePersonality = function (personality) {
	// ship = this.ship; // var personality = ship.entityPersonality
	var eq = new Object; // equipments
	var code = (personality &amp; 0x7C00) &gt;&gt; 10;
	eq.frw = this.$itemDecode(code);
	if (!eq.frw) {
		eq.frw = null;
	}
	code = (personality &amp; 0x03E0) &gt;&gt; 5;
	eq.aft = this.$itemDecode(code);
	if (!eq.aft) {
		eq.aft = null;
	}
	code = (personality &amp; 0x0010) &gt;&gt; 4;
	if (code) {
		eq.ep = &quot;EQ_ESCAPE_POD&quot;;
	}
	code = (personality &amp; 0x0008) &gt;&gt; 3;
	if (code) {
		eq.sb = &quot;EQ_SHIELD_BOOSTER&quot;;
	}
	code = (personality &amp; 0x0004) &gt;&gt; 2;
	if (code) {
		eq.se = &quot;EQ_SHIELD_ENHANCER&quot;;
	}
	code = (personality &amp; 0x0002) &gt;&gt; 1;
	if (code) {
		eq.cd = &quot;EQ_CLOAKING_DEVICE&quot;;
	}
	code = (personality &amp; 0x0001);
	if (code) {
		eq.mj = &quot;EQ_MILITARY_JAMMER&quot;;
	}
	return eq;
}

this.$itemEncode = { // for encode	// 5 bits for 31 lasers + none state

	&quot;WEAPON_NONE&quot;: 0x0,
	&quot;EQ_WEAPON_PULSE_LASER&quot;: 0x1,        // 1
	&quot;EQ_WEAPON_EPULSE_LASER&quot;: 0x2,
	&quot;EQ_WEAPON_BLAST_LASER&quot;: 0x3,
	&quot;EQ_WEAPON_DUAL_LASER&quot;: 0x4,
	&quot;EQ_WEAPON_VARISCAN_LASER&quot;: 0x5,
	&quot;EQ_WEAPON_HVARISCAN_LASER&quot;: 0x6,    // 6, free code: 7, 8

	&quot;EQ_WEAPON_BEAM_LASER&quot;: 0x9,
	&quot;EQ_WEAPON_EBEAM_LASER&quot;: 0xA,
	&quot;EQ_WEAPON_BURST_LASER&quot;: 0xB,
	&quot;EQ_WEAPON_ASSAULT_LASER&quot;: 0xC,      // 12

	&quot;EQ_WEAPON_MILITARY_LASER&quot;: 0x11,    // 17
	&quot;EQ_WEAPON_HIRAD_LASER&quot;: 0x12,
	&quot;EQ_WEAPON_STAR_LASER&quot;: 0x13,
	&quot;EQ_WEAPON_EMILITARY_LASER&quot;: 0x14,   // 20, free code: 21, 22

	&quot;EQ_WEAPON_WILLIAMS_LASER&quot;: 0xD,     // 13
	&quot;EQ_WEAPON_ZEUSCORP_LASER&quot;: 0xE,     // 14, free code: 15, 16

	&quot;EQ_WEAPON_LUCAS_LASER&quot;: 0x17,       // 23
	&quot;EQ_WEAPON_QVC_LASER&quot;: 0x18,
	&quot;EQ_WEAPON_DEXM_LASER&quot;: 0x19,
	&quot;EQ_WEAPON_RIMMERACE_LASER&quot;: 0x20    // 26, free code: 27..31
}

this.$itemDecode = function (code) {
	var eqpKey;

	// switch
	if (code === 0x0) {
		eqpKey === &quot;WEAPON_NONE&quot;;
	}
	// pulse
	else if (code === 0x1) {
		eqpKey = &quot;EQ_WEAPON_PULSE_LASER&quot;;
	} // 1
	else if (code === 0x2) {
		eqpKey = &quot;EQ_WEAPON_EPULSE_LASER&quot;;
	} else if (code === 0x3) {
		eqpKey = &quot;EQ_WEAPON_BLAST_LASER&quot;;
	} else if (code === 0x4) {
		eqpKey = &quot;EQ_WEAPON_DUAL_LASER&quot;;
	} else if (code === 0x5) {
		eqpKey = &quot;EQ_WEAPON_VARISCAN_LASER&quot;;
	} else if (code === 0x6) {
		eqpKey = &quot;EQ_WEAPON_HVARISCAN_LASER&quot;;
	} // 6, free code: 7, 8
	// beam
	else if (code === 0x9) {
		eqpKey = &quot;EQ_WEAPON_BEAM_LASER&quot;;
	} else if (code === 0xA) {
		eqpKey = &quot;EQ_WEAPON_EBEAM_LASER&quot;;
	} else if (code === 0xB) {
		eqpKey = &quot;EQ_WEAPON_BURST_LASER&quot;;
	} else if (code === 0xC) {
		eqpKey = &quot;EQ_WEAPON_ASSAULT_LASER&quot;;
	} // 12
	// sniper
	else if (code === 0x11) {
		eqpKey = &quot;EQ_WEAPON_MILITARY_LASER&quot;;
	} // 17
	else if (code === 0x12) {
		eqpKey = &quot;EQ_WEAPON_HIRAD_LASER&quot;;
	} else if (code === 0x13) {
		eqpKey = &quot;EQ_WEAPON_STAR_LASER&quot;;
	} else if (code === 0x14) {
		eqpKey = &quot;EQ_WEAPON_EMILITARY_LASER&quot;;
	} // 20, free code: 21, 22
	// uber beam
	else if (code === 0xD) {
		eqpKey = &quot;EQ_WEAPON_WILLIAMS_LASER&quot;;
	} // 13
	else if (code === 0xE) {
		eqpKey = &quot;EQ_WEAPON_ZEUSCORP_LASER&quot;;
	} // 14, free code: 15, 16
	// uber sniper
	else if (code === 0x17) {
		eqpKey = &quot;EQ_WEAPON_MILITARY_LASER&quot;;
	} // 23
	else if (code === 0x18) {
		eqpKey = &quot;EQ_WEAPON_HIRAD_LASER&quot;;
	} else if (code === 0x19) {
		eqpKey = &quot;EQ_WEAPON_STAR_LASER&quot;;
	} else if (code === 0x20) {
		eqpKey = &quot;EQ_WEAPON_EMILITARY_LASER&quot;;
	} // 26, free code: 27..31
	// 5 bits for 31 lasers + none state

	/*/

	// escape pod
	if (eqpKey === &quot;X:EQ_ESCAPE_POD&quot;) { code = 0x0; }
	else if (eqpKey === &quot;EQ_ESCAPE_POD&quot;) { code = 0x1; }

	// energy
	if (eqpKey === &quot;X:EQ_SHIELD_BOOSTER&quot;) { code = 0x0; }
	else if (eqpKey === &quot;EQ_SHIELD_BOOSTER&quot;) { code = 0x1; }

	if (eqpKey === &quot;X:EQ_SHIELD_ENHANCER&quot;) { code = 0x0; }
	else if (eqpKey === &quot;EQ_SHIELD_ENHANCER&quot;) { code = 0x1; }

	if (eqpKey === &quot;X:EQ_CLOAKING_DEVICE&quot;) { code = 0x0; }
	else if (eqpKey === &quot;EQ_CLOAKING_DEVICE&quot;) { code = 0x1; }

	if (eqpKey === &quot;X:EQ_MILITARY_JAMMER&quot;) { code = 0x0; }
	else if (eqpKey === &quot;EQ_MILITARY_JAMMER&quot;) { code = 0x1; }

	// 4 bits for 4 equipment

	//*/

	return eqpKey;

}

// award equipment for GC MW escorts

this._awardWeaponEquipments = function (ship) {
	//ship = this.ship;
	if (ship) {
		var eq = this._decodePersonality(ship.entityPersonality); // ship.entityPersonality | entityPersonality
		if (eq) {
			if (this._debug_Eqp) log(this.name, ship.script.name + &quot; : escort has lasers: frw:&quot; + eq.frw + &quot;, aft:&quot; + eq.aft);
			ship.forwardWeapon = eq.frw;
			ship.aftWeapon = eq.aft;
			if (eq.ep) {
				ship.awardEquipment(eq.ep);
			}
			if (eq.sb) {
				ship.awardEquipment(eq.sb);
			}
			if (eq.se) {
				ship.awardEquipment(eq.se);
			}
			if (eq.cd) {
				ship.awardEquipment(eq.cd);
			}
			if (eq.mj) {
				ship.awardEquipment(eq.mj);
			}
			//} else {
			//if (eq != &quot;&quot;) {
			//ship.awardEquipment(itm);
			//}
			//}
		}
	}
}

this._awardEquipment = function (shipData) { // not used
	ship = this.ship;
	if (shipData.equipment != &quot;&quot;) {
		// process all the equipment additions
		var items = shipData.equipment.split(&quot;,&quot;);
		for (var j = 0; j &lt; items.length; j++) {
			var itm = items[j];
			if (itm.indexOf(&quot;:&quot;) &gt;= 0) {
				var subitems = itm.split(&quot;:&quot;);
				switch (subitems[0]) {
					case &quot;X&quot;:
						ship.removeEquipment(subitems[1]);
						break;
					case &quot;FORE&quot;:
						ship.forwardWeapon = subitems[1];
						break;
					case &quot;AFT&quot;:
						ship.aftWeapon = subitems[1];
						break;
					case &quot;PORT&quot;:
						ship.portWeapon = subitems[1];
						break;
					case &quot;STARBOARD&quot;:
						ship.starboardWeapon = subitems[1];
						break;
				}
			} else {
				if (itm != &quot;&quot;) {
					ship.awardEquipment(itm);
				}
			}
		}
	}
}

// award equipment for all types

this._setEquipments = function (ship,bias) {
	var s = ship;
	var pr = s.primaryRole;
	var sc = s.script;
	var k = s.dataKey;
	var chance = bias;

	// WIP: Check autoWeapons rules
	if (!s.autoWeapons &amp;&amp; pr.indexOf(&#39;raider&#39;) &gt; -1) { // raiders need the best equipment
		s.awardEquipment(&quot;EQ_FUEL_INJECTION&quot;);
		s.awardEquipment(&quot;EQ_SHIELD_BOOSTER&quot;);
		s.awardEquipment(&quot;EQ_ECM&quot;);
		s.fuel = 7;
		if (this._debug_Eqp) log(&quot;Assassin_shipset_pack&quot;, sc.name + &quot; : award raider the best equipment: &quot; + s.displayName + &quot; [&quot; + k + &quot;]&quot;);
	}
	// WIP: Also for GC MostWanted added a little chance to shipdata vars.
	if (player.score &gt; 512) {
		if (chance &lt; 0.28) {
			s.awardEquipment(&quot;EQ_SHIELD_BOOSTER&quot;);
		}
		if (chance &lt; 0.19) {
			s.awardEquipment(&quot;EQ_SHIELD_ENHANCER&quot;);
		}
		// heavy ship + not scanning by warrant scanner
		//if (chance &lt; 0.12 &amp;&amp; Math.random() &lt; 0.7) { s.awardEquipment(&quot;EQ_MILITARY_JAMMER&quot;); }
		if (chance &lt; 0.08 &amp;&amp; Math.random() &lt; 0.7) {
			s.awardEquipment(&quot;EQ_CLOAKING_DEVICE&quot;);
		}
	}
	/* // not used

	// Install heat shields and injector
	if (this.ship.heatInsulation === 1) this.ship.heatInsulation = 2;
	if (this.ship.injectorSpeedFactor &lt; 7) this.ship.injectorSpeedFactor = 7;

	//if (player.score &gt;  512 &amp;&amp; chance &lt; 0.2) { this.ship.awardEquipment(&quot;EQ_SHIELD_BOOSTER&quot;); }
	//if (player.score &gt; 1024 &amp;&amp; chance &lt; 0.2) { this.ship.awardEquipment(&quot;EQ_SHIELD_ENHANCER&quot;); }
	//if (player.score &gt; 2560 &amp;&amp; chance &lt; 0.2) { this.ship.awardEquipment(&quot;EQ_MILITARY_JAMMER&quot;); } // seen has_military_jammer in shipdata.plist

	//if (Math.random() &lt; parseFloat(this.ship.scriptInfo.jammerChance)) // Chance of award jammer.
	//{
		//this.ship.awardEquipment(&quot;EQ_MILITARY_JAMMER&quot;)
	//}

	*/
}

// calculates an array of safe systems for assassin with close by dangerous systems
// For default GC MW: 		combination count : [88,0,0,0,0,0,0,0]
// For ASPack(assassin):	combination count : [88,0,0,0,0,0,0,0]

this._safeSystemsForShipset = function (type,range) {
	this._safeSystem.length = 0;
	var syslist;
	if (!range) range = 7;
	syslist = system.info.systemsInRange(range);
	var list = [];
	for (var i = 0; i &lt; syslist.length; i++) {
		var sys = syslist[i];
		if (!sys.sun_gone_nova) {
			if (type === 1 &amp;&amp; sys.government === 0 &amp;&amp; sys.government &lt; 5 ||
				type === 2 &amp;&amp; sys.government === 1 &amp;&amp; sys.government &lt; 5 ||
				type === 3 &amp;&amp; sys.government &gt;= 2 &amp;&amp; sys.government &lt; 5) {
				list.push(sys.systemID);
			}
		}
	}
	if (list.length &gt; 0) {
		if (this._debug) log(this.name, &quot;Near safe systems(&quot; + range + &quot;) for type &quot; + type + &quot;: &quot; + list);
	}
	return list;
}

this._calculateSafeDangerousSystemsForShipset = function (type) { // TEST: not used
	this._safeDangerous.length = 0;
	if (this._debug) log(this.name, &quot;SafeDangerous systems for shipset: &quot; + type);
	for (var i = 0; i &lt; 256; i++) {
		var data = {
			id: i,
			dangerous: []
		};
		var sys = System.infoForSystem(galaxyNumber, i);
		// is this one of our safe systems (gov &gt;= 5)
		if (!sys.sun_gone_nova) {
			if (type === 1 &amp;&amp; sys.government === 0 &amp;&amp; sys.government &lt; 5 ||
				type === 2 &amp;&amp; sys.government === 1 &amp;&amp; sys.government &lt; 5 ||
				type === 3 &amp;&amp; sys.government &gt;= 2 &amp;&amp; sys.government &lt; 5) {
				var locals = sys.systemsInRange(7);
				// any dangerous systems in range?
				for (var j = 0; j &lt; locals.length; j++) {
					var lcl = locals[j];
					if (!lcl.sun_gone_nova &amp;&amp; lcl.government &lt;= 2) {
						data.dangerous.push(lcl.systemID);
					}
				}
			}
			if (data.dangerous.length &gt; 0) {
				this._safeDangerous.push(data);
				if (this._debug) log(this.name, &quot;SafeDangerous &quot; + data.id + &quot;, &quot; + data.dangerous);
			}
		}
	}
}

this._delayedCheckPendingList = function (count,t) { // TEST: a wait for constant use
	// delay need for correctly allow a spawn ship.
	var w = worldScripts.Assassin_shipset_pack;
	if (count) {
		w.$num = count; // formal, not required for $checkPendingList
		if (!t) {
			t = 2;
		}
		if (!w.$checkPendingTimer) {
			w.$checkPendingTimer = new Timer(w, w._delayedCheckPendingList, t, t);
		} else {
			w.$checkPendingTimer.start();
		}
	} else {
		w.$checkPendingTimer.stop();
		w.$checkPendingList(w.$num); // (w.$num) | ()
		w.$num = 0;
	}
}

this.$checkPendingList = function (count) { // TEST: a wait for constant use
	var cond, mw = worldScripts.BountySystem_MostWanted;
	this._mw_escorts = false;
	if (mw._pending.length &gt; 0) {
		for (var i = 0; i &lt; mw._pending.length; i++) {
			var k = mw._pending[i].shipKey;
			if (k.indexOf(&#39;_AP_shipset&#39;) &gt; -1) cond = true;
		}
		if (!cond &amp;&amp; this._mw_count != 0) { // count | this._mw_count
			this._mw_count = 0;
			log(this.name, &quot;!!! Protected from an error var: this._mw_count[&quot; + count + &quot;], count is set: 0&quot;);
		}
	}
}
</pre></td>
                </tr>
                <tr>
                    <td valign="top">Scripts/assassins_shipset_pack_pilot.js.bk</td>
                    <td><pre>/*

 assassins_shipset_pack_pilot.js

 Character script for Assassin Shipset Pack.


 - an unknown role has pilot role = &quot;slave&quot; : payment: 0 cr., sell in the market

 */

this.name			= &quot;assassins_shipset_pack_pilot&quot;;
this.author			= &quot;Rustem&quot;;
this.copyright		= &quot; 2017 Rustem.&quot;;
this.description 	= &quot;Assassin Shipset Pack Pilot script for delivering escape-pods to a station.&quot;;
this.version 		= &quot;0.0&quot;;

&quot;use strict&quot;;

// WIP: message, role

this.logging = true; // false/true

this.unloadCharacter = function (role) // , insuranceCredits, bounty, legalStatus
{
	// message
	var message = &quot;pilot was scooped&quot; // test msg

	if(this.logging) {
		if(this.insuranceCredits) { log(&quot;Assassin_shipset_pack&quot;, this.name+&quot; : Pre-set insurance of the &quot;+this.role+&quot;: &quot;+this.insuranceCredits); }
		if(this.bounty) { log(&quot;Assassin_shipset_pack&quot;, this.name+&quot; : Pre-set bounty of the &quot;+this.role+&quot;: &quot;+this.bounty); }
		if(this.legalStatus) { log(&quot;Assassin_shipset_pack&quot;, this.name+&quot; : Pre-set legalStatus of the &quot;+this.role+&quot;: &quot;+this.legalStatus); }
	}

	switch (role) {
		case &quot;assassin&quot;:
			{
				if (this.logging) log(&quot;Assassin_shipset_pack&quot;, this.name+&quot; : added for rescue &quot;+role+&quot;: 1000&quot;);
				player.credits += 1000;
				// Pilot was scooped, print congratulatory message from the GalCop award a special bounty
				player.addMessageToArrivalReport(expandMissionText(&quot;assassin : &quot; + message));
				break;
			}
		case &quot;pirate&quot;:
			{
				if (this.logging) log(&quot;Assassin_shipset_pack&quot;, this.name+&quot; : added for rescue &quot;+role+&quot;: 500&quot;);
				player.credits += 500;
				// Pilot was scooped, print congratulatory message from the GalCop award a special bounty
				player.addMessageToArrivalReport(expandMissionText(&quot;pirate : &quot; + message));
				break;
			}
		case &quot;hunter&quot;:
			{
				if (this.logging) log(&quot;Assassin_shipset_pack&quot;, this.name+&quot; : added for rescue &quot;+role+&quot;: 500&quot;);
				player.credits += 500;
				// Pilot was scooped, but the ship is still intact. Mission continues.
				player.addMessageToArrivalReport(expandMissionText(&quot;hunter : &quot; + message));
				break;
			}
		default:
			{
				if (this.logging) log(&quot;Assassin_shipset_pack&quot;, this.name+&quot; : added for rescue &quot;+role+&quot;: 250&quot;);

				player.credits += 250;
				/* Show message on arrival. */
				player.addMessageToArrivalReport(expandDescription(&quot;default : &quot; + message));
				break;
			}
	}
}
</pre></td>
                </tr>
                <tr>
                    <td valign="top">Scripts/drones_launcher_shipset.js</td>
                    <td><pre> &quot;use strict&quot;;
this.name = &quot;drones_launcher_shipset&quot;;
this.author = &quot;Thargoid &amp; Eric Walch &amp; Rustem&quot;;
this.copyright = &quot;CC BY-NC-SA 4.0&quot;;
this.description = &quot;Spawn ship with setting a master and ship position&quot;;
this.version = &quot;2.03&quot;;

this.shipDied = function () {
    let drone = this.ship.spawnOne(this.ship.scriptInfo.launch_name);
    drone.master = this.ship.owner;
    drone.position = this.ship.position;
    delete this.shipDied;
}
</pre></td>
                </tr>
                <tr>
                    <td valign="top">Scripts/drones_thargon_shipset.js</td>
                    <td><pre>&quot;use strict&quot;;
this.name = &quot;drones_thargon_shipset&quot;;   // CT_thargon
this.author = &quot;Thargoid &amp; Rustem&quot;;
this.copyright = &quot;CC BY-NC-SA 4.0&quot;;
this.description = &quot;Actions script for the captured thargon&quot;;
this.version = &quot;0.1&quot;;

this.shipWasScooped = function (scooper) {
	if (scooper.isPlayer) {
		if (Math.random() &lt; 0.8 &amp;&amp; missionVariables.CT_thargonCount &lt; 5) {
			missionVariables.CT_thargonCount += 1;
			if (missionVariables.CT_thargonCount == 1) {
				player.ship.awardEquipment(this.ship.scriptInfo.DroneEquipment); //player.ship.awardEquipment(&quot;EQ_CT_MINE&quot;);
				player.consoleMessage(this.ship.name + &quot; recovered, recharged and ready for use.&quot;, 6);
			} else {
				player.consoleMessage(this.ship.name + &quot; scooped. Ready for use.&quot;, 6);
			}
		} else {
			player.credits += this.ship.bounty;
			player.consoleMessage(&quot;Bounty: &quot; + this.ship.bounty+&quot;&quot;, 4);
			player.consoleMessage(&quot;1 ton Alien Items scooped.&quot;, 6);
			manifest[&quot;alien_items&quot;] += 1; // this.ship.bounty = 0; //this.ship.setCargo(&quot;alien_items&quot;);
		}
	} else {
		this.ship.setCargo(&quot;alien_items&quot;)
	}
}

// this.shipDied = function (whom, why) {
// 	if (whom &amp;&amp; whom.isValid &amp;&amp; whom.isPlayer) {
// 		//player.credits += this.ship.bounty;
// 		//player.consoleMessage(&quot;Bounty: &quot; + this.ship.bounty+&quot;&quot;, 6);
// 	}
// }</pre></td>
                </tr>
                <tr>
                    <td valign="top">Scripts/rh_mark_shipset.bk</td>
                    <td><pre>&quot;use strict&quot;;
this.name = &quot;rh-mark-shipset&quot;;
this.author = &quot;spara&quot;;
this.description	= &quot;Name RH ships with RSN&quot;;

this.shipSpawned = function ()
{
	if (worldScripts.randomshipnames) {
		if (ship.primaryRole === &quot;pirate&quot;)
			this.ship.displayName = this.ship.name + &quot;: &quot; + worldScripts.randomshipnames.$randomPirateName(this.ship);
		else if (ship.primaryRole === &quot;escort&quot;)
			this.ship.displayName = this.ship.name + &quot;: &quot; + worldScripts.randomshipnames.$randomHunterName(this.ship);
		else
			this.ship.displayName = this.ship.name + &quot;: &quot; + worldScripts.randomshipnames.$randomTraderName(this.ship);
	}
    //log(&quot;rh_shipset_mark&quot;,this.ship.displayName);
    delete this.shipSpawned;
}
</pre></td>
                </tr>
                <tr>
                    <td valign="top">Scripts/rh_mark_shipset.js</td>
                    <td><pre>&quot;use strict&quot;;
this.name = &quot;rh-mark-shipset&quot;;
this.author = &quot;spara&quot;;
this.description	= &quot;Name RH ships with RSN&quot;;

this.shipSpawned = function ()
{
	if (worldScripts.randomshipnames) {
		if (ship.primaryRole === &quot;pirate&quot;)
			this.ship.displayName = this.ship.name + &quot;: &quot; + worldScripts.randomshipnames.$randomPirateName(this.ship);
		else if (ship.primaryRole === &quot;escort&quot;)
			this.ship.displayName = this.ship.name + &quot;: &quot; + worldScripts.randomshipnames.$randomHunterName(this.ship);
		else
			this.ship.displayName = this.ship.name + &quot;: &quot; + worldScripts.randomshipnames.$randomTraderName(this.ship);
	}
    //log(&quot;rh_shipset_mark&quot;,this.ship.displayName);
    delete this.shipSpawned;
}
</pre></td>
                </tr>
                <tr>
                    <td valign="top">Scripts/rh_patrol_shipset.bk</td>
                    <td><pre>&quot;use strict&quot;;
this.name = &quot;rh-patrol-shipset&quot;;
this.author = &quot;Spara from script by LittleBear, Eric Walch &amp; Thargoid&quot;;
this.copyright = &quot;2013&quot;;
this.description	= &quot;Name RH shipset hunter ships&quot;;
this.licence     = &quot;CC BY-NC-SA 3.0&quot;; 
this.version = &quot;1.7&quot;;

this.shipSpawned = function ()
{
	var level = parseInt(this.ship.scriptInfo.level);
	var name = &quot;&quot;;
	switch(level)
	{
		case 1: name = expandDescription(&quot;[random_hits_hunterlow_name]&quot;); break;
		case 2: name = expandDescription(&quot;[random_hits_huntermedium_name]&quot;); break;
		case 3: name = expandDescription(&quot;[random_hits_hunterhigh_name]&quot;); break;
		default: name = &quot;unknown&quot;; // means a wrong level definition in shipData.plist. 
	}
	this.ship.displayName = this.ship.name+&quot;: &quot;+name; // Show the Hunters name on the ID Computer when targeted.
    //log(&quot;rh_shipset_patrol&quot;,this.ship.displayName);
    delete this.shipSpawned;
}
</pre></td>
                </tr>
                <tr>
                    <td valign="top">Scripts/rh_patrol_shipset.js</td>
                    <td><pre>&quot;use strict&quot;;
this.name = &quot;rh-patrol-shipset&quot;;
this.author = &quot;Spara from script by LittleBear, Eric Walch &amp; Thargoid&quot;;
this.copyright = &quot;2013&quot;;
this.description	= &quot;Name RH shipset hunter ships&quot;;
this.licence     = &quot;CC BY-NC-SA 3.0&quot;; 
this.version = &quot;1.7&quot;;

this.shipSpawned = function ()
{
	var level = parseInt(this.ship.scriptInfo.level);
	var name = &quot;&quot;;
	switch(level)
	{
		case 1: name = expandDescription(&quot;[random_hits_hunterlow_name]&quot;); break;
		case 2: name = expandDescription(&quot;[random_hits_huntermedium_name]&quot;); break;
		case 3: name = expandDescription(&quot;[random_hits_hunterhigh_name]&quot;); break;
		default: name = &quot;unknown&quot;; // means a wrong level definition in shipData.plist. 
	}
	this.ship.displayName = this.ship.name+&quot;: &quot;+name; // Show the Hunters name on the ID Computer when targeted.
    //log(&quot;rh_shipset_patrol&quot;,this.ship.displayName);
    delete this.shipSpawned;
}
</pre></td>
                </tr>
                <tr>
                    <td valign="top">Scripts/ship_assassin_feudal_shipset.js</td>
                    <td><pre>&quot;use strict&quot;;
this.name 			= &quot;asp-feudal-shipset&quot;;
this.author 		= &quot;Rustem&quot;;
this.copyright 		= &quot;2017&quot;;
this.description	= &quot;Ship script for feudal ship from feudal system&quot;;
this.licence     	= &quot;CC BY-NC-SA 4.0&quot;;
this.version 		= &quot;0.6&quot;;

// ! :  No addition to GC MostWanted list.

this.logging = true;      // false/true
this.debug_AI = false;    // logging setAI
this.debug_Bty = false;   // logging setBounty
this.debug_Wpn = false;   // logging setWeapon
this.debug_Eqp = false;   // logging setEquipment

this.shipSpawned = function (shipKey) {
	var s = this.ship;
	var k = s.dataKey;
	var pr = s.primaryRole;
	var sc = s.script;

	var w = worldScripts.Assassin_shipset_pack;
	if (w) {
		// Setting role : check at array of default roles
		pr = w._setPrimaryRoleToShip(s);
		//mw_chance = 1; // always added to GC MW list for test

		// Setting bounty : check current bounty for role and set a hiddenBounty
		if (pr &amp;&amp; !sc.hasOwnProperty(&quot;_hiddenBounty&quot;)) {
			if (this.debug_Bty) log(this.name + &quot; : &quot; + pr);

			// Check bounty and AI for primaryRole based on the oolite-populator rules // TODO: check ship.autoAI
			w._setBountyToShip(s);
		}
	}

	// WIP: Check autoWeapons rules
	if (!s.autoWeapons &amp;&amp; pr.indexOf(&#39;raider&#39;) &gt; -1) { // raiders need the best equipment
		s.awardEquipment(&quot;EQ_FUEL_INJECTION&quot;);
		s.awardEquipment(&quot;EQ_SHIELD_BOOSTER&quot;);
		s.awardEquipment(&quot;EQ_ECM&quot;);
		s.fuel = 7;
		if (this.debug_Eqp) log(&quot;Assassin_shipset_pack&quot;, this.name + &quot; : award raider the best equipment: &quot; + s.displayName + &quot; [&quot; + k + &quot;]&quot;);
	}

	delete this.shipSpawned;
}

this.shipLaunchedEscapePod = function (escapepod, passengers) {
	if (escapepod) {
		var pod = escapepod; // var ws = worldScripts.BountySystem_Core;
		// add for pirate only
		if (this._hiddenBounty) { // $initBounty
			this.$assassinEscapePod = true;
			// edit the pilot legalStatus // ALTERNATIVE: may be solved via oolite-character
			var pilotBounty = pod.crew[0].legalStatus + this._hiddenBounty; // $initBounty
			// set the seed values so that the pilot&#39;s species can be defined by their home system
			// var seed = &quot;0 0 0 0 &quot;+ pod.crew[0].homeSystem.toString() +&quot; 2&quot;; // WAIT: ?
			var seed = &quot;0 0 0 0 0 0&quot;;
			pod.setCrew({
				name: pod.crew[0].name,
				origin: pod.crew[0].homeSystem,
				insurance: pod.crew[0].insuranceCredits,
				bounty: pilotBounty,
				short_description: pod.crew[0].description,
				random_seed: seed
			});
			// , random_seed:seed / , species:pod.crew[0].species
			this._hiddenBounty = null; // $initBounty

			if (this.debug_Bty) log(&quot;Assassin_shipset_pack&quot;, this.name + &quot; : added the hiddenBounty to crew legalStatus of the pod&quot;);
		}
		//if (this.ship.bounty) this.ship.bounty = null; // WAIT: Need or edited this.shipDied? The oolite-core don&#39;t processed.
		if (this.logging) log(&quot;Assassin_shipset_pack&quot;, this.name + &quot; : derelicted &quot; + this.ship.name + &quot;(&quot; + this.ship.primaryRole + &quot;) apply ePod: &quot; + pod.name + &quot;, passengers: &quot; + passengers);
	}
}

this.shipDied = function (whom, cause) {
	// check bounty 	// 250 /750 /2250 from shipdata feudal_...AP_shipset
	// If pod.crew[0].legalStatus will writen status then should fixed checking bounty mechanic.
	var bounty;
	if (this.$assassinEscapePod || this.ship.bounty &amp;&amp; this._hiddenBounty) { // this.ship.bounty &amp;&amp; this.$initBounty ... &amp;&amp; !this.ship.isDerelict
		bounty = this._hiddenBounty; // $initBounty
		if (whom &amp;&amp; whom.isPlayer &amp;&amp; !player.ship.isCloaked) {
			player.credits += bounty;
			// TODO: Add delay consoleMessage
			player.consoleMessage(&quot;Bonus: &quot; + formatCredits(bounty, true, true), 8);
			player.consoleMessage(&quot;Total: &quot; + formatCredits(player.credits, true, true), 10);
			if (this.debug_Bty) log(&quot;Assassin_shipset_pack&quot;, this.name + &quot; : &quot; + bounty + &quot; Cr. of the hiddenBounty added to player credits&quot;);
		}
	} else if (this.debug_Bty) log(&quot;Assassin_shipset_pack&quot;, this.name + &quot; : bounty: &quot; + this.ship.bounty + &quot;, hiddenBounty: &quot; + this._hiddenBounty);

	if (this.logging) {
		log(&quot;Assassin_shipset_pack&quot;, this.name + &quot; : died(orig) &quot; + this.ship.name + &quot; (&quot; + this.ship.primaryRole + &quot;), &quot; + this.ship.displayName + &quot; [&quot; + this.ship.dataKey + &quot;]&quot;);
		log(&quot;Assassin_shipset_pack&quot;, this.name + &quot; : &quot; + this.ship.name + &quot; was killed by &quot; + whom + &quot; because of &quot; + cause);
	}

	delete this.shipDied;
}
</pre></td>
                </tr>
                <tr>
                    <td valign="top">Scripts/ship_assassin_tech_shipset.js</td>
                    <td><pre>&quot;use strict&quot;;
this.name 			= &quot;asp-tech-shipset&quot;;
this.author 		= &quot;Rustem&quot;;
this.copyright 		= &quot;2017&quot;;
this.description	= &quot;Ship script for stealth ship from higher tech-level worlds&quot;;
this.licence     	= &quot;CC BY-NC-SA 4.0&quot;;
this.version 		= &quot;0.7.6&quot;;

// !!! : this script not will set some var for escort, fighter and freighter roles

// Addition to GC MostWanted list delevoped for assassin role. Current GC MostWanted v0.5.

// TODO: How do a clearing bounty for hunter (AIScript) in the thargoid-counter / friendly fire

this.logging = false;       // false/true
this.debug_AI = false;     // logging setAI
this.debug_Bty = false;    // logging setBounty
this.debug_Wpn = false;    // logging setWeapon
this.debug_Eqp = false;    // logging setEquipment

this.$setWeapons = true; // true - a tunning of the weapons. Also it is setted from worldscript blacklist.
// If New lasers OXP is not installed, then attempted setup default laser(P,B,M), otherwise get a heavy-weapon assassin in the gameplay (seen shipdata.plist).

this.shipSpawned = function (shipKey) {
	var s = this.ship;
	var k = s.dataKey;
	var pr = s.primaryRole;
	var sc = s.script;

	var w = worldScripts.Assassin_shipset_pack;

	if (k.indexOf(&quot;stealth&quot;) &gt; -1) {
		w._setStealthToShip(s)
		if (this.logging) log(&quot;Assassin_shipset_pack&quot;, this.name + &quot; : set a stealth features&quot;);
	}

	// WIP: Deny rule : for BountySystem_MostWanted
	var mostWanted = true;
	var mw = worldScripts.BountySystem_MostWanted;
	if (w &amp;&amp; mw) {
		var index = sc._mostWanted; // leader &amp; escorts
		if (index) {
			// allow spawn escort - version 2, other version locate in spawnArmouryAssassins
			//w._mw_escorts = true; log(&quot;assassin_shipset_pack&quot;, &quot;! allow spawn mw-escorts&quot;); // allow after leader

			s.bounty = 0; // if (s.primaryRole.indexOf(&quot;pirate&quot;) &lt; 0) s.bounty = 0;
			// escort has non-default role name
			if (pr.indexOf(k) &gt; -1) { // special set for escort
				if (s.group &amp;&amp; s.group.leader &amp;&amp; s.group.leader.AIScript.name.indexOf(&quot;Oolite Assassin&quot;) &gt; -1) {
					s.switchAI(&quot;oolite-assassinAI.js&quot;);
					if (this.logging) log(&quot;Assassin_shipset_pack&quot;, this.name + &quot; : set assassinAI for escort&quot;);
				}
				s.setBounty(s.bounty, &quot;setup actions&quot;);
				w._awardWeaponEquipments(s)
			}
			// delete logging after testing
			if (this.logging) log(&quot;Assassin_shipset_pack&quot;, this.name + &quot; - Amount: &quot; + w._wanted_amount + &quot;, spawn count: &quot; + w._mw_count + &quot;. This &quot; + pr + &quot;[&quot; + k + &quot;] has MW index: &quot; + index + &quot; --&gt; deny a standart set AI, bounty, weapons&quot;);
			w._delayedCheckPendingList(w._mw_count); // TEST: a wait for constant use
			w._mw_count--;
			delete this.shipSpawned;
			return;
		}
		if (w._mw_count &gt; 0) { // bountyVersionExists(k) // other solution: check ship.script._mostWanted ~ wanted.index
			// delete logging after testing
			if (this.logging) log(&quot;Assassin_shipset_pack&quot;, this.name + &quot; - Amount: &quot; + w._wanted_amount + &quot;, spawn count: &quot; + w._mw_count + &quot;. This &quot; + pr + &quot;[&quot; + k + &quot;] in the MW pending list --&gt; deny a standart set AI, bounty, weapons&quot;);
			w._delayedCheckPendingList(w._mw_count); // TEST: a wait for constant use
			w._mw_count--;
			delete this.shipSpawned;
			return;
		} else mostWanted = false;
	}

	// WIP: Calculate chance and set a chance for group leader.
	var chance = Math.random();
	var mw_chance = 0.7; // TODO: add secondary rule : for example, check _wanted.length &lt; max_limit, distance to player
	var lead = s;
	var wg_name = &quot;one_pilot&quot;;
	var g = s.group;
	if (g) {
		if (g.leader) lead = g.leader;
		if (g.leader &amp;&amp; s.entityPersonality === g.leader.entityPersonality) {
			chance *= 0.428;
			mw_chance += 0.27;
		}
		if (!g.name) {
			wg_name = &quot;wanted_pack_group_&quot; + w._wanted_amount;
		} else {
			wg_name = g.name + &quot; &quot; + w._wanted_amount;
		}
	}

	// Setting a primaryRole, bounty, AI, weapons
	if (w) {
		// Check at array of default roles
		pr = w._setPrimaryRoleToShip(s);
		//mw_chance = 1; // always added to GC MW list for test

		// Check current bounty for role and set a hiddenBounty
		if (pr &amp;&amp; !sc.hasOwnProperty(&quot;_hiddenBounty&quot;)) {
			if (this.debug_Bty) log(this.name + &quot; : &quot; + pr);

			// Check bounty and AI for primaryRole based on the oolite-populator rules // TODO: check ship.autoAI
			w._setBountyToShip(s);
		}
		// Set lasers and extra missiles
		if ($setWeapons) {
			w._setWeaponsToShip(s, chance, this.debug_Wpn);
		} else log(&quot;Assassin_shipset_pack&quot;, this.name + &quot; : Check var: autoWeapons, $setWeapons, roles to set lasers for &quot; + ship.name + &quot;!!!&quot;);

		// Setting a equipments : award with chance 
		// all roles: shield booster, shield enhancer, military jammer and cloaking device
		// raiders role need the best equipment: fuel injection, ecm, shield booster
		w._setEquipments(s, chance);
	}

	// TEMP: Cut the role name : temp for beta-testing. Role identification will deleted before final release.
	if (s.displayName.indexOf(&#39;(&#39;) &gt; -1 &amp;&amp; s.displayName.indexOf(&#39;)&#39;) &gt; -1) { // displayName | name
		var name = s.displayName.split(&#39; (&#39;); // var sname = name[1].split(&#39;: &#39;);
		s.displayName = name[0]; //+&quot;: &quot;+sname[1];
	}

	// WIP: Checking rule for addition this ship to GC MostWanted list : only assassin
	if (!mostWanted &amp;&amp; (pr.indexOf(&#39;assassin&#39;) &gt; -1)) { // WAIT: may be in next version will expanded roles
		// TEST: need modify secondary rule // !mw.$bountyVersionExists(k)
		if (w._wanted_amount &lt; 5) {
			if (this.logging) log(&quot;Assassin_shipset_pack&quot;, this.name + &quot; : &quot; + mw_chance + &quot; chance &quot; + s.name + &quot; add to MostWanted list&quot;);
			if (Math.random() &lt; mw_chance) {
				if (s === lead) { // WAIT REPEAT OF ERROR: not lead will added to MostWanted list?
					var wg_name;
					w._leader = lead;
					w._groupName = wg_name;
					//if (this.logging)
					log(&quot;Assassin_shipset_pack&quot;, this.name + &quot; : adding &quot; + s.name + &quot; [&quot; + wg_name + &quot;] to MostWanted list, count: &quot; + w._wanted_amount);
					// creates new records of ship and pilot data
					w._delayedAddMostWanted(s);
				} else log(&quot;Assassin_shipset_pack&quot;, this.name + &quot; : this ship is not leader for addition in MW list for pack: &quot; + s);
			}
		} else log(&quot;Assassin_shipset_pack&quot;, this.name + &quot; : Overlimited an amount ship in MW list for pack&quot;);
	}

	delete this.shipSpawned;
}

this.shipLaunchedEscapePod = function (escapepod, passengers) {
	if (this.$stealthMode) this.$stealthMode(&quot;off&quot;); //test

	if (escapepod) {
		var pod = escapepod; // var ws = worldScripts.BountySystem_Core;
		// add for pirate only
		if (this._hiddenBounty) {
			this.$assassinEscapePod = true;
			// edit the pilot legalStatus // ALTERNATIVE: may be solved via oolite-character
			var pilotBounty = pod.crew[0].legalStatus + this._hiddenBounty;
			// set the seed values so that the pilot&#39;s species can be defined by their home system
			// var seed = &quot;0 0 0 0 &quot;+ pod.crew[0].homeSystem.toString() +&quot; 2&quot;; // WAIT: ?
			var seed = &quot;0 0 0 0 0 0&quot;;
			pod.setCrew({
				name: pod.crew[0].name,
				origin: pod.crew[0].homeSystem,
				insurance: pod.crew[0].insuranceCredits,
				bounty: pilotBounty,
				short_description: pod.crew[0].description,
				random_seed: seed
			});
			// , random_seed:seed / , species:pod.crew[0].species
			this._hiddenBounty = null;

			if (this.debug_Bty) log(&quot;Assassin_shipset_pack&quot;, this.name + &quot; : added the hiddenBounty to crew legalStatus of the pod&quot;);
		}
		//if (this.ship.bounty) this.ship.bounty = null; // WAIT: Need or edited this.shipDied? The oolite-core don&#39;t processed.		
		if (this.logging) {
			log(&quot;Assassin_shipset_pack&quot;, this.name + &quot; : derelicted(orig) &quot; + this.ship.name + &quot; (&quot; + this.ship.primaryRole + &quot;), &quot; + this.ship.displayName + &quot; [&quot; + this.ship.dataKey + &quot;]&quot;);
			log(&quot;Assassin_shipset_pack&quot;, this.name + &quot; : personality &quot; + this.ship.entityPersonality + &quot; apply ePod: &quot; + pod.name + &quot;, passengers: &quot; + passengers);
		}
	}
}

this.shipDied = function (whom, cause) // copy and merge from main script deep_stealth_raiders
{
	// check bounty 	// 500 /1500 /4500 from shipdata stealth_...AP_shipset
	// If pod.crew[0].legalStatus will writen status then should fixed checking bounty mechanic.
	var bounty;
	if (this.$assassinEscapePod || this.ship.bounty &amp;&amp; this._hiddenBounty) { // this.ship.bounty &amp;&amp; this.$initBounty ... &amp;&amp; !this.ship.isDerelict
		bounty = this._hiddenBounty;
		if (whom &amp;&amp; whom.isPlayer &amp;&amp; !player.ship.isCloaked) {
			player.credits += bounty;
			// TODO: Add delay consoleMessage
			player.consoleMessage(&quot;Bonus: &quot; + formatCredits(bounty, true, true), 8);
			player.consoleMessage(&quot;Total: &quot; + formatCredits(player.credits, true, true), 10);
			if (this.debug_Bty) log(&quot;Assassin_shipset_pack&quot;, this.name + &quot; : &quot; + bounty + &quot; Cr. of the hiddenBounty added to player credits&quot;);
		}
	} else if (this.debug_Bty) log(&quot;Assassin_shipset_pack&quot;, this.name + &quot; : bounty: &quot; + this.ship.bounty + &quot;, hiddenBounty: &quot; + this._hiddenBounty);

	if (this.logging) {
		log(&quot;Assassin_shipset_pack&quot;, this.name + &quot; : died(orig) &quot; + this.ship.name + &quot; (&quot; + this.ship.primaryRole + &quot;), &quot; + this.ship.displayName + &quot; [&quot; + this.ship.dataKey + &quot;]&quot;);
		log(&quot;Assassin_shipset_pack&quot;, this.name + &quot; : personality &quot; + this.ship.entityPersonality + &quot; was killed by &quot; + whom + &quot; because of &quot; + cause);
	}

	delete this.shipDied;
}
</pre></td>
                </tr>
                <tr>
                    <td valign="top">Scripts/spawn_feudal_shipset.js</td>
                    <td><pre>&quot;use strict&quot;;
this.name 			= &quot;spawnFeudalAssassins&quot;;
this.author 		= &quot;spara &amp; rustem &amp; Stranger&quot;;
this.copyright 		= &quot;2017 Creative Commons: attribution, non-commercial, sharealike.&quot;; // CC BY-NC-SA 4.0
this.description	= &quot;Conditional spawning of assassins from Feudal system&quot;;
this.version 		= &quot;0.3&quot;;

// This is modification of spara&#39;s rh-boss-spawn-shipset script

this.logging = false; // false / true

this.allowSpawnShip = function (shipKey) {
	// System validator
	if (system.isInterstellarSpace || !system.sun || system.sun.isGoingNova || system.sun.hasGoneNova)
		return false;
	
	// Check worldScripts
	var ws = worldScripts.Assassin_shipset_pack,
		ht = worldScripts.GalCopBB_HitTeams;
	if (ht &amp;&amp; ws._ht_ships &amp;&amp; ws._ht_ships.length &gt; 0) { // ws._ht_amount &gt; 0
		var k = shipKey;
		for (var i = 0; i &lt; ws._ht_ships.length; i++) {
			if (k === ws._ht_ships[i]) {
				ws._ht_ships.splice(i, 1); //ws._ht_amount--; // log(&quot;assassin_shipset_pack&quot;, &quot;spawn feudal ht-ship&quot;);
				return true;
			}
		}
	}

	var adjacent, homeSystem, homeRichSystem;

	// Feudal system (G1..3, 5..8), that&#39;s where feudal assassins primarily lurk (only hunter). // Total systems : 32
	if (system.government == 1) {
		if (shipKey.indexOf(&#39;feudal_&#39;) &gt; -1) { // hunter &amp; pirate
			if (this.logging) {
				log(&quot;assassin_shipset_pack&quot;, &quot;Spawning in Feudal system: &quot; + shipKey + &quot; from this system&quot;);
			}
			return true; // true --&gt; false // need design AI //edit rustem
		} // add rustem
		else { // add rustem
			if (system.economy &lt; 4) return false; // add rustem
		} // add rustem
	} // } //add rustem

	// Nearby feudal systems scan.
	var adjacentSystems = system.info.systemsInRange(7);
	var raidBase = 0; // Feudal systems in 7 LY proximity
	var richBase = 0; // Rich feudal systems in 7 LY proximi
	for (var i = 0; i &lt; adjacentSystems.length; i++) {
		adjacent = System.infoForSystem(adjacentSystems[i].galaxyID, adjacentSystems[i].systemID);
		if (adjacent.government == 1) { // Total : 32
			raidBase += 1;
			homeSystem = adjacent;
			if (adjacent.economy &lt; 4) { // Total Ind (ind raidBase) : ~ 16 [8..22]
				richBase += 1;
				homeRichSystem = adjacent;
			}
		}
	}

	// Feudal system(s) next door. 	1 ind raidBase &amp; other gov --&gt; populate only hunters.
	// Sometimes feudal hunters visit nearby systems. Poor the economy, frequent the incident.
	if (Math.random() * (7 - system.economy) &lt; richBase) {
		if (shipKey.indexOf(&#39;feudal_&#39;) &gt; -1 &amp;&amp; shipKey.indexOf(&#39;_AP_shipset&#39;) &gt; -1) { // pirate
			return false;
		}
		// TODO: homeSystem, consoleMessage and etc.
		if (homeRichSystem != undefined) {
			homeSystem = homeRichSystem;
		}
		if (this.logging) {
			log(&quot;assassin_shipset_pack&quot;, &quot;Spawning in nearby poor-system: &quot; + shipKey + &quot; from &quot; + homeSystem.systemID + &quot;, raidBase=&quot; + raidBase + &quot;, richBase=&quot; + richBase);
		}
		return true; // hunter
	}

	// Feudal system(s) next door. 	1 ind raidBase &amp; other gov --&gt; populate only hunters.
	// Sometimes feudal raiders visit nearby systems. Higher the government, rarer the incident.
	if (Math.random() * system.government &lt; raidBase) {
		if (raidBase == richBase &amp;&amp; (shipKey.indexOf(&#39;feudal_&#39;) &gt; -1 &amp;&amp; shipKey.indexOf(&#39;Hunter_AP_shipset&#39;) &gt; -1)) { // hunter &amp; hunters escort
			return false;
		}
		// TODO: homeSystem, consoleMessage and etc.
		if (homeRichSystem != undefined) {
			homeSystem = homeRichSystem;
		}
		if (this.logging) {
			log(&quot;assassin_shipset_pack&quot;, &quot;Spawning in nearby risk-system: &quot; + shipKey + &quot; from &quot; + homeSystem.systemID + &quot;, raidBase=&quot; + raidBase + &quot;, richBase=&quot; + richBase);
		}
		return true; // hunter &amp; pirate
	}

	return false;
}
</pre></td>
                </tr>
                <tr>
                    <td valign="top">Scripts/spawn_randomhits_shipset.js</td>
                    <td><pre>&quot;use strict&quot;;
this.name 			= &quot;spawnAnarchyAssassins&quot;;
this.author 		= &quot;spara &amp; rustem&quot;;
this.copyright 		= &quot;2017 Creative Commons: attribution, non-commercial, sharealike.&quot;; // CC BY-NC-SA 4.0
this.description	= &quot;Conditional spawning of assassins from Anarchy system&quot;;
this.version 		= &quot;0.3&quot;;

// This is modification of spara&#39;s rh-boss-spawn-shipset script

this.logging = false; // false / true

this.allowSpawnShip = function (shipKey) {
	// Sanity check
	if (system.isInterstellarSpace || !system.sun || system.sun.isGoingNova || system.sun.hasGoneNova)
		return false;

	// Check worldScripts
	var ws = worldScripts.Assassin_shipset_pack,
		ht = worldScripts.GalCopBB_HitTeams;
	if (ht &amp;&amp; ws._ht_ships &amp;&amp; ws._ht_ships.length &gt; 0) { // ws._ht_amount &gt; 0
		var k = shipKey;
		for (var i = 0; i &lt; ws._ht_ships.length; i++) {
			if (k === ws._ht_ships[i]) {
				ws._ht_ships.splice(i, 1); //ws._ht_amount--; // log(&quot;assassin_shipset_pack&quot;, &quot;spawn anarchy ht-ship&quot;);
				return true;
			}
		}
	}

	var adjacent, homeSystem; // var shipKey = dataKey;

	// An anarchy system (G1..8), that&#39;s where the assassins primarily lurk. // Total systems : 32 (max: 64 in Galaxy 4)
	// economy: 0 (Rich Industrial) ... 7 (Poor Agricultural)

	//if (system.government === 0) {
	if (system.government === 0 &amp;&amp; system.economy &lt; 4) { // RandomHit_tweak: SpaceBar -&gt; Total Ind : ~ 18,5 (16..32)
		if (this.logging) {
			homeSystem = system;
			log(&quot;assassin_shipset_pack&quot;, &quot;Spawning in Anarchy system: &quot; + shipKey + &quot; from this system&quot;);
		}
		return true;
	}
	// Ok, not an anarchy system, but maybe there is such a system close by.
	var adjacentSystems = system.info.systemsInRange(7);
	var dangerousHood = false;
	for (var i = 0; i &lt; adjacentSystems.length; i++) {
		adjacent = System.infoForSystem(adjacentSystems[i].galaxyID, adjacentSystems[i].systemID);
		if (adjacent.government === 0 &amp;&amp; adjacent.economy &lt; 4) { // RandomHit_tweak: SpaceBar
			dangerousHood = true;
			homeSystem = adjacent;
			log(&quot;assassin_shipset_pack&quot;, &quot;Found nearby dangerous homeSystem&quot;);
			break;
		}
	}

	// This is dangerous hood, there is an anarchy system next door.
	// Sometimes bosses visit nearby systems. Higher the government, rarer the incident.
	if (dangerousHood &amp;&amp; Math.random() * system.government &lt; 0.5) { // 0.5/1.0
		// TODO: homeSystem, consoleMessage and etc.
		//if (homeSystem === undefined) { homeSystem = system; }
		if (this.logging) {
			log(&quot;assassin_shipset_pack&quot;, &quot;Spawning in Anarchy zone: &quot; + shipKey + &quot; from &quot; + homeSystem.systemID);
		}
		return true;
	}
	return false;
}
</pre></td>
                </tr>
                <tr>
                    <td valign="top">Scripts/spawn_tech_shipset.js</td>
                    <td><pre>&quot;use strict&quot;;
this.name 			= &quot;spawnArmouryAssassins&quot;;
this.author 		= &quot;spara &amp; rustem&quot;;
this.copyright 		= &quot;2017 Creative Commons: attribution, non-commercial, sharealike.&quot;; // CC BY-NC-SA 4.0
this.description	= &quot;Conditional spawning of armoury-assassins from high tech system&quot;;
this.version 		= &quot;0.8&quot;;

// This is modification of spara&#39;s rh-boss-spawn-shipset script

// Addition to GC MostWanted list delevoped for assassin role. Current GC MostWanted v0.12.

this.logging = false; // false / true

// government:	0 (Anarchy) to 7 (Corporate State)
this.govTypes = [
	&quot;Anarchy&quot;,
	&quot;Feudal&quot;,
	&quot;Multi-Government&quot;,
	&quot;Dictatorship&quot;,
	&quot;Communist&quot;,
	&quot;Confederacy&quot;,
	&quot;Democracy&quot;,
	&quot;Corporate State&quot;
];
// techlevel: 	0 to 15
// economy: 	0 (Rich Industrial) ... 7 (Poor Agricultural)

this.allowSpawnShip = function (shipKey) {
	// Sanity check
	if (!system.sun || system.sun.isGoingNova || system.sun.hasGoneNova) {
		if (!system.isInterstellarSpace)
			return false;
	}

	// Check worldScripts
	var ws = worldScripts.Assassin_shipset_pack,
		mw = worldScripts.BountySystem_MostWanted,
		ht = worldScripts.GalCopBB_HitTeams;
	if (mw) {
		var c, k = shipKey;
		c = system.countShipsWithRole(&quot;[&quot; + k + &quot;]&quot;);
		if (mw._pending.length &gt; 0) { // WAIT: mw.$bountyVersionExists(shipKey) / Ship.shipDataForKey(&quot;bounty_stealth_Assassin_AP_shipset&quot;)
			for (var i = 0; i &lt; mw._pending.length; i++) {
				if (k === mw._pending[i].shipKey) { // JSON.parse(mw._pending[i].data).shipDataKey
					ws._mw_count++; // TEST: Sometime may be errors, so two times is checked this condition script by populator.
					ws._mw_escorts = true;
					log(&quot;assassin_shipset_pack&quot;, &quot;! allow spawn mw-escorts&quot;); // allow after leader
					if (this.logging) {
						if (c &gt; 0) {
							log(&quot;assassin_shipset_pack&quot;, &quot;!! (in-system): &quot; + ws._mw_count + &quot; count for spawn a mw-ship: &quot; + k + &quot;, current shipKey count:&quot; + c);
						} else {
							log(&quot;assassin_shipset_pack&quot;, &quot;! (in-system): &quot; + ws._mw_count + &quot; count for spawn a new mw-ship: &quot; + k);
						}
					}
					return true;
				}
			}
			if (ws._mw_escorts) {
				ws._mw_count++;
				log(&quot;assassin_shipset_pack&quot;, &quot;! (in-system): &quot; + ws._mw_count + &quot; count for spawn a mw-escort: &quot; + k);
				return true;
			}
		}
	}
	// Check GalCopBB_HitTeams
	if (ht &amp;&amp; ws._ht_ships &amp;&amp; ws._ht_ships.length &gt; 0) { // ws._ht_amount &gt; 0
		var k = shipKey;
		for (var i = 0; i &lt; ws._ht_ships.length; i++) {
			if (k === ws._ht_ships[i]) {
				ws._ht_ships.splice(i, 1); //ws._ht_amount--; // log(&quot;assassin_shipset_pack&quot;, &quot;spawn armoury ht-ship&quot;);
				return true;
			}
		}
	}
	ws = worldScripts.Thargoids_Warfare; // test oxp
	if (ws) {
		if (ws.invasionExtantInCurrentSystem) return true;
	}

	var adjacent, homeSystem; //var shipKey = dataKey; // gov, tech

	// WAIT: need correct system.info mechanics // 9+Math.random()*6 &lt; system.info.techlevel || Math.random() * (15 - system.info.techlevel) &lt; 0.5

	// An anarchy system, that&#39;s where the armoury primarily lurk.
	//if (system.government === 0) { // test work version

	// WAIT: An tech/risk system, that&#39;s where the armoury possibly lurk. // Total systems : ~ 45 (48+40+42+44+47+52+43+43)
	if (system.government &lt; 5 &amp;&amp; system.economy &lt; 4 &amp;&amp; 8 + Math.random() * 7 &lt; system.info.techlevel) { // system.government &lt; 5 || system.techlevel  &gt; 8/12
		//if (system.government &lt; 5 &amp;&amp; system.economy &lt; 4 &amp;&amp; 9+Math.random()*6 &lt; system.info.techlevel) { // Total systems :
		// TODO: homeSystem, consoleMessage and etc.
		homeSystem = system.info; // if (homeSystem === undefined) { homeSystem = system.info; };
		if (this.logging) {
			log(&quot;assassin_shipset_pack&quot;, &quot;Spawning of armoury in tech/risk system: &quot; + shipKey + &quot; from &quot; + homeSystem.systemID + &quot; (&quot; + this.govTypes[homeSystem.government] + &quot; [TL:&quot; + homeSystem.techlevel + &quot;])&quot;);
		}
		return true; // armoury (hunter &amp; pirate)
	}

	// WAIT: need correct system.info mechanics

	// Ok, not an tech/risk system, but maybe there is high tech (or Multi-Government[2], Dictatorship[3], Communist[4]) system close by.
	// That&#39;s where armoury primarily lurk.
	var adjacentSystems = system.info.systemsInRange(7);
	var dangerousHood = false;
	for (var i = 0; i &lt; adjacentSystems.length; i++) {
		adjacent = System.infoForSystem(adjacentSystems[i].galaxyID, adjacentSystems[i].systemID); // gov = parseInt(adjacent.government); tech = parseInt(adjacent.techlevel);
		//if (adjacent.government === 0) // test work version
		// WAIT:
		//if (adjacent.techlevel &gt; 9 &amp;&amp; adjacent.government &gt; 1 &amp;&amp; adjacent.government &lt; 5) // Total systems :
		if (adjacent.techlevel &gt; 8 &amp;&amp; adjacent.government &gt; 1 &amp;&amp; adjacent.government &lt; 5) // Total systems : ~ 37 (40+33+32+40+41+39+35+34)
		{
			dangerousHood = true;
			homeSystem = adjacent; // log(&quot;assassin_shipset_pack&quot;, &quot;Found nearby tech/risk homeSystem (&quot;+this.govTypes[homeSystem.government]+&quot; [TL:&quot;+homeSystem.techlevel+&quot;])&quot;);
			break;
		}
	}

	// This is dangerous hood, there is an interstellar or anarchy system next door.
	if (dangerousHood) {
		// 1 rule: addition in the interstellar space ~ (interstellar hunters), stats: [100]		
		if (system.isInterstellarSpace) {
			if (this.logging) {
				log(&quot;assassin_shipset_pack&quot;, &quot;Spawning of armoury in the interstellar space.&quot;);
			}
			return true; // armoury (hunter &amp; pirate)
		// 2 rule: Sometimes armoury visit nearby systems. Higher the government, rarer the incident.
		} else if (Math.random() * system.government &lt; 0.5) { //0.5/1.0
			// TODO: homeSystem, consoleMessage and etc.
			if (this.logging) {
				log(&quot;assassin_shipset_pack&quot;, &quot;Spawning of armoury in nearby system: &quot; + shipKey + &quot; from &quot; + homeSystem.systemID + &quot; (&quot; + this.govTypes[homeSystem.government] + &quot; [TL:&quot; + homeSystem.techlevel + &quot;])&quot;);
			}
			return true; // armoury (hunter &amp; pirate)
		}
	}
	return false;
}
</pre></td>
                </tr>
            </table>
        </a>
    </body>
</html>
