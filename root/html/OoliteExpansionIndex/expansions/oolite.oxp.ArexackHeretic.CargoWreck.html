<html>
    <head>
        <title>Expansion Cargo Wrecks Teaser</title>
        <link rel="stylesheet" href="../style.css">
    </head>
    <body>
        <table border="0" width="100%">
            <tr>
                <td>Back to <a href='../index.html'>Index</a></td>
                <td align="right"><small>Page generated: Oct 11, 2023, 3:16:48 PM</small></td>
            </tr>
        </table>

        <h1>Expansion Cargo Wrecks Teaser</h1>

        <h2>Content</h2>
        <ul>
          <li><a href="#warnings">Warnings</a></li>
          <li><a href="#manifest">Manifest</a></li>
          <li><a href="#documentation">Documentation</a></li>
          <li><a href="#equipment">0 Equipment</a></li>
          <li><a href="#ships">51 Ships</a></li>
          <li><a href="#models">0 Models</a></li>
          <li><a href="#scripts">6 Scripts</a></li>
        </ul>

          <a name="warnings">
            <h2>Warnings</h2>
            <ol>
                <li>License not specified</li>
                <li>XML script list found</li>
                <li>Tags mismatch between OXP Manifest and Expansion Manager at character position 0002 (RIGHT SQUARE BRACKET vs LATIN CAPITAL LETTER C)(&#39;[]&#39; vs &#39;[Cargopods]&#39;)</li>
                <li>Unknown key &#39;licence&#39; at https://wiki.alioth.net/img_auth.php/d/d1/Cargo_wrecks_teaser_1.7.2.oxz!manifest.plist</li>
            </ol>
          </a>

        <a name="manifest">
        <h2>Manifest</h2>
            <table border="1">
                <tr>
                    <th></th>
                    <th>from Expansion Manager's OXP list</th>
                    <th>from Expansion Manifest</th>
                </tr>
                <tr>
                    <td>Description</td>
                    <td>Adds diffent models of cargopods to the universe</td>
                    <td>Adds diffent models of cargopods to the universe</td>
                </tr>
                <tr>
                    <td>Identifier</td>
                    <td>oolite.oxp.ArexackHeretic.CargoWreck</td>
                    <td>oolite.oxp.ArexackHeretic.CargoWreck</td>
                </tr>
                <tr>
                    <td>Title</td>
                    <td>Cargo Wrecks Teaser</td>
                    <td>Cargo Wrecks Teaser</td>
                </tr>
                <tr>
                    <td>Category</td>
                    <td>Ambience</td>
                    <td>Ambience</td>
                </tr>
                <tr>
                    <td>Author</td>
                    <td>Arexack Heretic</td>
                    <td>Arexack Heretic</td>
                </tr>
                <tr>
                    <td>Version</td>
                    <td>1.7.2</td>
                    <td>1.7.2</td>
                </tr>
                <tr>
                    <td>Tags</td>
                    <td></td>
                    <td>Cargopods</td>
                </tr>
                <tr>
                    <td>Required Oolite Version</td>
                    <td></td>
                    <td></td>
                </tr>
                <tr>
                    <td>Maximum Oolite Version</td>
                    <td></td>
                    <td></td>
                </tr>
                <tr>
                    <td>Required Expansions</td>
                    <td>
                    </td>
                    <td>
                    </td>
                </tr>
                <tr>
                    <td>Optional Expansions</td>
                    <td>
                    </td>
                    <td>
                    </td>
                </tr>
                <tr>
                    <td>Conflict Expansions</td>
                    <td>
                    </td>
                    <td>
                    </td>
                </tr>
                <tr>
                    <td>Information URL</td>
                    <td><a target="_blank" href="http://wiki.alioth.net/index.php/Cargo_Wreck_Teaser_OXP">http://wiki.alioth.net/index.php/Cargo_Wreck_Teaser_OXP</a></td>
                    <td><a target="_blank" href="">n/a</a></td>
                </tr>
                <tr>
                    <td>Download URL</td>
                    <td><a target="_blank" href="https://wiki.alioth.net/img_auth.php/d/d1/Cargo_wrecks_teaser_1.7.2.oxz">https://wiki.alioth.net/img_auth.php/d/d1/Cargo_wrecks_teaser_1.7.2.oxz</a></td>
                    <td><a target="_blank" href="">n/a</a></td>
                </tr>
                <tr>
                    <td>License</td>
                    <td></td>
                    <td></td>
                </tr>
                <tr>
                    <td>File Size</td>
                    <td>n/a</td>
                </tr>
                <tr>
                    <td>Upload date</td>
                    <td>1610873478</td>
                </tr>
            </table>
                </a>

        <a name="documentation">
        <h2>Documentation</h2>
        <p>Also read <a href='http://wiki.alioth.net/index.php/Cargo%20Wrecks%20Teaser'>http://wiki.alioth.net/index.php/Cargo%20Wrecks%20Teaser</a></p>
        <h3>readmeifyouplease_wrex.txt</h3>
        <pre>Wrex-teaser2 OXP.

Created by Arexack as part of an ongoing project to insert greater variety into the wonderfull Ooniverse. 
These files are part of the game Oolite and are subject to the Creative Commons Licence.
(Or whatever licence the Oolite comunity operates under at this point)

Contains new cargopods, fuelpods and other riches to be &#39;found&#39; in the depths of space.
To use this OXP, unzip this package (or for mac users: drag/drop the folder named &quot;Cargo_wrecks_teaser.oxp&quot;) into your C:/../Oolite/Addons/ folder



Changelog:
Revised: August 1 2006 
-explosiveAI.plist fixed and altered. (thanks Ahruman)
-texturenames fixed.
-Shipdata slightly altered to include a small_debris model.

Version 1.2: 
august 11 2006
-Fixed several bugs and typo&#39;s. 
-Included descriptions that were missing from v1.1
-added treasuroid easteregg.
March 22 2007
-Note: on OOsat2 the version is pre-v1, check the wiki for recent versions.
-Changed cargo_type of treasuroid in shiplist to RANDOM.

Version 1.3: 
27 september 2007
-In v1.2 shipdata was somehow moved to topfolder, replaced in config.
-fixed typo in descriptions.plist. (thanks Eric!) 
-altered script.plist to be functional instead of a test script, 
  -treasuroid is now ingame. Including comms-messages.
-Added extra code to scripted pods to check for player. (thanks Eric!)
-removed dependency on nubarrel.dat from Aegidian&#39;s X-ships.OXP.
-switched to consolemessage. yay! :D
-Altered AI, then changed it differently. more comms too.
-treasuroids still not working properly.

version 1.3.1
5 oktober 2007
-added lots of special-cargo descriptions.
-Some changes to explosiveAI, fixed capital CommsMessage typo.
todo: 
-treasuroids are still spawned without cargo inside.
-Free_missile pod not able to check/compare player.missiles and playership.max_missiles. 
 When possible change to check and award 1TC firearms if no pylons are available.

Version 1.3.2
15 may 2008
-fixed bugs in weaponpods (thanks Eric Walch/Cmdr James)
-model name barrel_AH.dat to barrel_ah.dat.
-dysfunctional CARGO_FIREARMS changed to CARGO_CARRIED.
-added 0.1 chance of gem-pirapod spawning.
-some custom messages were not using hardcoded &#39;wildcards&#39; properly &quot;[%i1] cargo&quot; (hoopy)
-added new descriptions to fix this. [i1]+[i2]+[i3]+[i4] = [species] 
-added some more descriptions. 
-added [special-trumble].  
-added trumblepod
 todo: borrow model for trumblepod from Aegidian.

Version 1.3.3
22 august 2008
-fixed messages of fuelpods (since oolite 1.71 normal canisters can&#39;t broadcast messages in the old way). Did it by explicit adding a pilot (character) to the pods. With this fix it will work both on 1.65 and 1.72+ Oolite

Version 1.3.4
27 august 2008
-fixed code for red fuelpod scooped by NPC ship. (rare event)
-changed explosiveAI script-name to a less obvious name to prevent possible name conflicts
-&quot;Quirium&quot; now spells correct.
-Changed &quot;[d100_number] lessthan 75&quot; into d100_number lessthan 75. (2 locations in shipdata.plist)

Version 1.4
14 april 2009
-replaced the script_action in shipdate.plist by js scripts with similar function. This made it easier to randomise quantities. script_action  now will only be used when running Oolite 1.65. Newer Oolites will use the js barrel scripts. NB most barrels in this oxp don&#39;t use scripts at all.
-trumblepod model now borrowed from aegidian. It only will give trumbles when the player has in the past bought the trumbles from the original trumble offer. It won&#39;t spoil this internal &quot;mission&quot; by giving trumbles first.
-renamed several files to more unique names to avoid future name conflicts. e.g. all descriptions start now with &quot;ah_&quot;

Version 1.5
8 october 2009
- Changed the way cargo is added in accordance to the new rules for Oolite versions after 1.73.

Version 1.5.1
11 october 2009
- Changed all quantity definitions in script_info from string into number.

Version 1.5.2
17 october 2009
- added extra roles for specific cargo. e.g. goldpod, alienpod firearmspod etc, to be used by external oxp&#39;s.

version 1.5.3
21 october 2009
- merged the two line messages into one single line. e.g. &quot;1 ton of grapes scooped.&quot; instead of  &quot;1 ton of grapes&quot; + &quot;cargopod scooped.&quot;. This only works with the newer Oolite versions after 1.70. For old Oolite 1.65 the old messages remain.

version 1.6.0
10 february 2010
- Added specular/shiny maps to all barrels to get selective surface reflection.

version 1.6.2
29 May 2010
- Version adapted to new scripting in Oolite 1.74. When used with this Oolite version, the scripted barrels stay in game after scooping (like the normal barrels always did)

version 1.6.3
5 Oktober 2010
- Changed some roles of scripted barrels from &quot;cargopod&quot; into &quot;commodity&quot;. This allows Oolite to select those pods that match the availability at the local marked instead of just a random one.

version 1.6.4
9 January 2011
- Changed &quot;System&quot; to &quot;system&quot; in scripts so it will work after Oolite 1.74.2

version 1.6.5
31 January 2011
- The trumblepod did not show its scoop messages when fur was scooped.

version 1.7
11 February 2012
- Raised minimum Oolite to 1.74.
- Removed old code no longer needed.
- Converted XML plists to open-step.
- Added a &#39;cargopod(0)&#39; role to all cargo for other scripts to check.
- Colliding with the fuelpod without scooping is now dangerous.

version 1.7.1
7 October 2012
- Changed a few strings that will give problems after Oolite 1.76

version 1.7.2
23 November 2012
- Found another string in shipdata that won&#39;t work correctly with Oolite 1.77</pre>
        </a>

        <a name="equipment">          
        <h2>Equipment</h2>
            This expansion declares no equipment. This may be related to warnings.
        </a>

        <a name="ships">    
        <h2>Ships</h2>
            <table>
                <tr>
                    <th>Name</th>
                </tr>
                <tr>
                    <td><a href="../ships/alien_cargo2_ah.html">alien_cargo2_ah</a></td>
                </tr>
                <tr>
                    <td><a href="../ships/alien_cargo_ah.html">Alien cargo</a></td>
                </tr>
                <tr>
                    <td><a href="../ships/alloy_ah.html">Metal fragment</a></td>
                </tr>
                <tr>
                    <td><a href="../ships/barrel_ah.html">Cargo container</a></td>
                </tr>
                <tr>
                    <td><a href="../ships/barrel_ah2.html">Cargo container</a></td>
                </tr>
                <tr>
                    <td><a href="../ships/container_blue.html">container_blue</a></td>
                </tr>
                <tr>
                    <td><a href="../ships/container_green.html">container_green</a></td>
                </tr>
                <tr>
                    <td><a href="../ships/container_red.html">Cargo container</a></td>
                </tr>
                <tr>
                    <td><a href="../ships/emptypod_type1.html">emptypod_type1</a></td>
                </tr>
                <tr>
                    <td><a href="../ships/emptypod_type2.html">emptypod_type2</a></td>
                </tr>
                <tr>
                    <td><a href="../ships/foodpod_type1.html">Cargo cannister</a></td>
                </tr>
                <tr>
                    <td><a href="../ships/foodpod_type2.html">Cargo cannister</a></td>
                </tr>
                <tr>
                    <td><a href="../ships/foodpod_type3.html">Cargo crate</a></td>
                </tr>
                <tr>
                    <td><a href="../ships/foodpod_type4.html">Cargo container</a></td>
                </tr>
                <tr>
                    <td><a href="../ships/foodpod_type5.html">foodpod_type5</a></td>
                </tr>
                <tr>
                    <td><a href="../ships/foodpod_type6.html">foodpod_type6</a></td>
                </tr>
                <tr>
                    <td><a href="../ships/foodpod_type7.html">foodpod_type7</a></td>
                </tr>
                <tr>
                    <td><a href="../ships/fuelpod1_ah.html">Fuel cannister</a></td>
                </tr>
                <tr>
                    <td><a href="../ships/fuelpod2_ah.html">fuelpod2_ah</a></td>
                </tr>
                <tr>
                    <td><a href="../ships/furpod_type1.html">Cargopod</a></td>
                </tr>
                <tr>
                    <td><a href="../ships/furpod_type2.html">Cargo crate</a></td>
                </tr>
                <tr>
                    <td><a href="../ships/furpod_type3.html">Shiny cargopod</a></td>
                </tr>
                <tr>
                    <td><a href="../ships/gempod_type1.html">Cargo Cannister</a></td>
                </tr>
                <tr>
                    <td><a href="../ships/gempod_type2.html">Secure Container</a></td>
                </tr>
                <tr>
                    <td><a href="../ships/gempod_type3.html">Cargo Container</a></td>
                </tr>
                <tr>
                    <td><a href="../ships/hexapod_a.html">Cargo container</a></td>
                </tr>
                <tr>
                    <td><a href="../ships/hexapod_b.html">hexapod_b</a></td>
                </tr>
                <tr>
                    <td><a href="../ships/hexapod_c.html">hexapod_c</a></td>
                </tr>
                <tr>
                    <td><a href="../ships/liquorpod_type1.html">Cargo crate</a></td>
                </tr>
                <tr>
                    <td><a href="../ships/liquorpod_type2.html">Cargo crate</a></td>
                </tr>
                <tr>
                    <td><a href="../ships/liquorpod_type3.html">Cargo crate</a></td>
                </tr>
                <tr>
                    <td><a href="../ships/liquorpod_type4.html">Cargo crate</a></td>
                </tr>
                <tr>
                    <td><a href="../ships/liquorpod_type5.html">Cargo crate</a></td>
                </tr>
                <tr>
                    <td><a href="../ships/narcpod_type1.html">Container</a></td>
                </tr>
                <tr>
                    <td><a href="../ships/narcpod_type2.html">Trigonal Container</a></td>
                </tr>
                <tr>
                    <td><a href="../ships/narcpod_type3.html">Container</a></td>
                </tr>
                <tr>
                    <td><a href="../ships/narcpod_type4.html">Cargopod</a></td>
                </tr>
                <tr>
                    <td><a href="../ships/pirapod_gems.html">Cargo container</a></td>
                </tr>
                <tr>
                    <td><a href="../ships/pirapod_gold.html">Cargo container</a></td>
                </tr>
                <tr>
                    <td><a href="../ships/pirapod_platinum.html">Cargo container</a></td>
                </tr>
                <tr>
                    <td><a href="../ships/pirapod_valuables.html">Cargo container</a></td>
                </tr>
                <tr>
                    <td><a href="../ships/slavepod_type1.html">Red crate</a></td>
                </tr>
                <tr>
                    <td><a href="../ships/slavepod_type2.html">Green crate</a></td>
                </tr>
                <tr>
                    <td><a href="../ships/slavepod_type3.html">Blue crate</a></td>
                </tr>
                <tr>
                    <td><a href="../ships/small_debris_ah.html">small_debris_ah</a></td>
                </tr>
                <tr>
                    <td><a href="../ships/trumblepod_ah.html">trumblepod_ah</a></td>
                </tr>
                <tr>
                    <td><a href="../ships/weaponpod_type1.html">Cargo crate</a></td>
                </tr>
                <tr>
                    <td><a href="../ships/weaponpod_type2.html">Cargo Container</a></td>
                </tr>
                <tr>
                    <td><a href="../ships/weaponpod_type3.html">Cargo Container</a></td>
                </tr>
                <tr>
                    <td><a href="../ships/weaponpod_type4.html">Cargo Container</a></td>
                </tr>
                <tr>
                    <td><a href="../ships/weaponpod_type5.html">Cargo Container</a></td>
                </tr>
            </table>
        </a>

        <a name="models">    
        <h2>Models</h2>
            This expansion declares no models. This may be related to warnings.
        </a>

        <a name="scripts">    
        <h2>Scripts</h2>
            <table>
                <tr>
                    <th>Path</th>
                </tr>
                <tr>
                    <td valign="top">Scripts/cargoWreckBarrel.js</td>
                    <td><pre>&quot;use strict&quot;;
this.name			= &quot;cargoWreckBarrel&quot;;
this.author			= &quot;Arexack Heretic (oxp) &amp; Eric Walch (js script)&quot;;
this.copyright		= &quot;Share alike&quot;;
this.description    = &quot;Code for a generic pod&quot;;
this.version		= &quot;1.7.2&quot;;


/* 
    &quot;this.shipSpawned&quot; is in rare occasions skipped in Oolite 1.73 or older, because in some occasions
    the splinter is scooped before the this.shipSpawned is triggered. (This could for example happen when
    the player rams the target to death and barrels fly directly into the scoop.
    But, once scooped, &quot;this.shipSpawned&quot; will never trigger again! (fixed in Oolite 1.74)
    Initialising on scooping now, to also have less code to execute during the explosion itself.
*/
this.initialise = function ()
{
    this.message = this.ship.scriptInfo.message;
    this.cargotype = this.ship.scriptInfo.cargotype;
    this.quantity = parseInt(this.ship.scriptInfo.quantity);
    // use parseInt for open step plists or you will be awarding wrong quantities.
    if (isNaN(this.quantity)) {this.quantity = 1; log(this.name, &quot;Detected a NaN quantity for: &quot;+this.cargotype)};
    if (this.quantity &lt; 0) this.quantity = Math.ceil(Math.random()*(-this.quantity));
    if (this.quantity &gt; 1) this.message = this.message.replace(&quot;gram &quot;, &quot;grams &quot;);
    if (this.quantity &gt; 0 &amp;&amp; this.cargotype) this.ship.setCargo(this.cargotype, this.quantity);
    this.message = this.quantity + &quot; &quot; + expandDescription(this.message);
    this.init = true;
};


this.shipWasScooped = function (scooper)
{
    if (!this.init) this.initialise();
    if (scooper.isPlayer)
    {
        player.consoleMessage(this.message);
    }
};
</pre></td>
                </tr>
                <tr>
                    <td valign="top">Scripts/cargoWreckFuel.js</td>
                    <td><pre>&quot;use strict&quot;;
this.name			= &quot;cargoWreckFuel&quot;;
this.author			= &quot;Arexack Heretic (oxp) &amp; Eric Walch (js script)&quot;;
this.copyright		= &quot;Share alike&quot;;
this.description	= &quot;fuel pod&quot;;
this.version		= &quot;1.7&quot;;

this.shipDied = function ()
{
    delete this.shipDied;
    this.ship.AIState = &quot;EXPLODE&quot;; // make sure the ship explodes with doing damage, even when collided or shot at.
}


this.shipWasScooped = function (scooper)
{
     var hasFuel = this.ship.scriptInfo.awardFuel;
     if (hasFuel === &quot;NO&quot;) hasFuel = false; // test needed in case the code is in open-step plist. &quot;NO&quot; is interpreted as true by js.
     
     if (scooper.isPlayer)
	 {
		if (hasFuel)
		{
			if(player.ship.fuel &lt;= 6)
			{
				player.ship.fuel += 1;
				player.consoleMessage(&quot;1.0 LY Fuel Transfered!&quot;);
			}
			else
			{
				var fuel = Math.round(70 - player.ship.fuel*10)/10;
				player.consoleMessage(fuel+&quot; LY Fuel Transfered!&quot;);
				player.ship.fuel += fuel;
			}
		}
		else
		{
			player.ship.fuel += 1;
			player.consoleMessage(&quot;FuelPod Failure!&quot;);
			player.ship.fuelLeakRate = 2.5;
		}
	 }
	 else  // NPC ship scooped pod
	 {
		if (hasFuel)
		{
			scooper.fuel += 1;
		}
		else
		{
			// scooper becomes a q-bomb when scooping up a bad fuelpod.
			scooper.commsMessage(expandDescription(&quot;[ah_last-words]&quot;));
			scooper.switchAI(&quot;explosiveCWreckAI.plist&quot;);
			scooper.AIState = &quot;DETONATE&quot;;
		}
	}
}
</pre></td>
                </tr>
                <tr>
                    <td valign="top">Scripts/cargoWreckMissile.js</td>
                    <td><pre>&quot;use strict&quot;;
this.name			= &quot;cargoWreckMissile&quot;;
this.author			= &quot;Arexack Heretic (oxp) &amp; Eric Walch (js script)&quot;;
this.copyright		= &quot;Share alike&quot;;
this.description	= &quot;firearms pod&quot;;
this.version		= &quot;1.7&quot;;


this.shipWasScooped = function (scooper)
{
    if (scooper.missiles.length &lt; scooper.missileCapacity)
    {
        var missile = Math.random()&gt;0.1 ? &quot;EQ_MISSILE&quot; : &quot;EQ_HARDENED_MISSILE&quot;;
        scooper.awardEquipment(missile);
        this.ship.displayName = &quot;A free missile&quot;;
    }
    else
    {
        // no check for free storage as scooping success already means there was 1 ton of free cargo space.
        this.ship.setCargo(&quot;firearms&quot;);
    }
     delete this.shipWasScooped; // we don&#39;t want to run this script again when it is scooped a second time.
}

this.shipDied = function ()
{
	delete this.shipDied; // prefent recursion.
    this.ship.switchAI(&quot;missileAI.plist&quot;);
	this.ship.AIState = &quot;DETONATE&quot;;
}</pre></td>
                </tr>
                <tr>
                    <td valign="top">Scripts/cargoWreckTeaser.js</td>
                    <td><pre>/*

cargoWreckTeaser
Copyright Â© 2006-2009 Arexack Heretic and contributors

This program is free software; you can redistribute it and/or
modify it under the terms of the GNU General Public License
as published by the Free Software Foundation; either version 2
of the License, or (at your option) any later version.

This program is distributed in the hope that it will be useful,
but WITHOUT ANY WARRANTY; without even the implied warranty of
MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
GNU General Public License for more details.

For a copy of the GNU General Public License write to the Free
Software Foundation, Inc., 51 Franklin Street, Fifth Floor,
Boston, MA 02110-1301, USA.

*/


&quot;use strict&quot;;
this.name			= &quot;Cargo_Wreck_Teaser&quot;;
this.author			= &quot;Arexack Heretic (oxp) &amp; Eric Walch (js script)&quot;;
this.copyright		= &quot;Share alike&quot;;
this.description	= &quot;WorldScript for cargo_wreck_teaser&quot;;
this.version		= &quot;1.7.1&quot;;

this.shipExitedWitchspace = function ()
{
    if(!system.isInterstellarSpace &amp;&amp; system.government &lt; 4 &amp;&amp; Math.random() &lt; 0.15 &amp;&amp; system.countShipsWithPrimaryRole(&quot;rockhermit&quot;) &gt; 1)
    {
        this.addPirateStash();
    }
}

this.addPirateStash = function ()
{
    /*
    Just transform a plain asteroid into a stash. This avoids the problem of the treasuroid
    being completely different than other asteroids when asteroid replacing oxps are used.
    */
    var stash = system.addGroupToRoute(&quot;asteroid&quot;, 9).ships[0];
    stash.displayName = &quot;Treasuroid&quot;;
    stash.setScript(&quot;cargoWreckTreasuroid.js&quot;);
}</pre></td>
                </tr>
                <tr>
                    <td valign="top">Scripts/cargoWreckTreasuroid.js</td>
                    <td><pre>&quot;use strict&quot;;
this.name			= &quot;cargoWreckTreasuroid&quot;;
this.author			= &quot;Arexack Heretic (oxp) &amp; Eric Walch (js script)&quot;;
this.copyright		= &quot;Share alike&quot;;
this.description	= &quot;Treasuroid asteroid&quot;;
this.version		= &quot;1.7&quot;;
// this script is attached to a selected asteroid by the worldScript.


this.shipDied = function ()
{
    var stashGroup = new ShipGroup(&quot;Treasuroid Group&quot;);
    var asteroids = this.ship.group.ships;
    for (var i = 0; i&lt;asteroids.length; i++)
    {
        var pirate = asteroids[i].spawnOne(&quot;pirate&quot;);
        stashGroup.addShip(pirate);
        pirate.group = stashGroup;
        
        if (asteroids[i] == this.ship)
        {
            pirate.commsMessage(expandDescription(&quot;[ah_stash-message]&quot;));
        }
        else
        {
            asteroids[i].explode(true);
        }
    }
	delete this.shipDied;
}</pre></td>
                </tr>
                <tr>
                    <td valign="top">Scripts/cargoWreckTrumble.js</td>
                    <td><pre>&quot;use strict&quot;;
this.name			= &quot;cargoWreckTrumble&quot;;
this.author			= &quot;Arexack Heretic (oxp) &amp; Eric Walch (js script)&quot;;
this.copyright		= &quot;Share alike&quot;;
this.description	= &quot;trumble pod&quot;;
this.version		= &quot;1.7.2&quot;;


this.shipWasScooped = function (scooper)
{
	 if (!this.message) this.message = expandDescription(&quot;1 ton [ah_trumble-furs]&quot;)
	 if (scooper.isPlayer)
	 {
		// only give player trumbles when he already did the trumblemission in the past.
        if (missionVariables.trumbles === &quot;TRUMBLE_BOUGHT&quot; &amp;&amp; (Math.random() &lt; 0.25 || player.trumbleCount &gt; 0))
		{
            if (player.trumbleCount === 0)
			{
				scooper.awardEquipment(&quot;EQ_TRUMBLE&quot;);
				player.consoleMessage(this.message);
			}
			else
			{
				if (player.trumbleCount === 1) player.consoleMessage(&quot;Your trumble is exited about a scooped friend.&quot;, 6);
				else player.consoleMessage(&quot;Your trumbles are exited about a scooped mate.&quot;, 6);
			}
		}
		else
		{
            player.consoleMessage(this.message);
            this.ship.setCargo(&quot;furs&quot;);
		}
	 }
     else // scooped by npc
     {
        this.ship.setCargo(&quot;furs&quot;);
     }
     //delete this.shipWasScooped;
}</pre></td>
                </tr>
            </table>
        </a>
    </body>
</html>
