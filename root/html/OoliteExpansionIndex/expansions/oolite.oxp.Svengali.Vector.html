<html>
    <head>
        <title>Expansion Vector</title>
        <link rel="stylesheet" href="../style.css">
    </head>
    <body>
        <table border="0" width="100%">
            <tr>
                <td>Back to <a href='../index.html'>Index</a></td>
                <td align="right"><small>Page generated: Oct 11, 2023, 3:16:49 PM</small></td>
            </tr>
        </table>

        <h1>Expansion Vector</h1>

        <h2>Content</h2>
        <ul>
          
          <li><a href="#manifest">Manifest</a></li>
          <li><a href="#documentation">Documentation</a></li>
          <li><a href="#equipment">10 Equipment</a></li>
          <li><a href="#ships">87 Ships</a></li>
          <li><a href="#models">0 Models</a></li>
          <li><a href="#scripts">24 Scripts</a></li>
        </ul>


        <a name="manifest">
        <h2>Manifest</h2>
            <table border="1">
                <tr>
                    <th></th>
                    <th>from Expansion Manager's OXP list</th>
                    <th>from Expansion Manifest</th>
                </tr>
                <tr>
                    <td>Description</td>
                    <td>An unusual mission type - fast money, slavers, tricks and GalCop is watching you... Depends on Cabal Common Library and Snoopers, suggests BGS and OXPConfig.</td>
                    <td>An unusual mission type - fast money, slavers, tricks and GalCop is watching you... Depends on Cabal Common Library and Snoopers, suggests BGS and OXPConfig.</td>
                </tr>
                <tr>
                    <td>Identifier</td>
                    <td>oolite.oxp.Svengali.Vector</td>
                    <td>oolite.oxp.Svengali.Vector</td>
                </tr>
                <tr>
                    <td>Title</td>
                    <td>Vector</td>
                    <td>Vector</td>
                </tr>
                <tr>
                    <td>Category</td>
                    <td>Missions</td>
                    <td>Missions</td>
                </tr>
                <tr>
                    <td>Author</td>
                    <td>Svengali</td>
                    <td>Svengali</td>
                </tr>
                <tr>
                    <td>Version</td>
                    <td>1.7.2</td>
                    <td>1.7.2</td>
                </tr>
                <tr>
                    <td>Tags</td>
                    <td></td>
                    <td></td>
                </tr>
                <tr>
                    <td>Required Oolite Version</td>
                    <td></td>
                    <td></td>
                </tr>
                <tr>
                    <td>Maximum Oolite Version</td>
                    <td></td>
                    <td></td>
                </tr>
                <tr>
                    <td>Required Expansions</td>
                    <td>
                            <li>oolite.oxp.Svengali.CCL:1.6</li>
                            <li>oolite.oxp.Svengali.Snoopers:2.3.3</li>
                    </td>
                    <td>
                            <li>oolite.oxp.Svengali.CCL:1.6</li>
                            <li>oolite.oxp.Svengali.Snoopers:2.3.3</li>
                    </td>
                </tr>
                <tr>
                    <td>Optional Expansions</td>
                    <td>
                            <li>oolite.oxp.Svengali.BGS:1.5</li>
                            <li>oolite.oxp.Svengali.OXPConfig:2.0</li>
                    </td>
                    <td>
                            <li>oolite.oxp.Svengali.BGS:1.5</li>
                            <li>oolite.oxp.Svengali.OXPConfig:2.0</li>
                    </td>
                </tr>
                <tr>
                    <td>Conflict Expansions</td>
                    <td>
                    </td>
                    <td>
                    </td>
                </tr>
                <tr>
                    <td>Information URL</td>
                    <td><a target="_blank" href="http://wiki.alioth.net/index.php/Vector_OXP">http://wiki.alioth.net/index.php/Vector_OXP</a></td>
                    <td><a target="_blank" href="">n/a</a></td>
                </tr>
                <tr>
                    <td>Download URL</td>
                    <td><a target="_blank" href="https://wiki.alioth.net/img_auth.php/d/dc/Vector_1.7.2.oxz">https://wiki.alioth.net/img_auth.php/d/dc/Vector_1.7.2.oxz</a></td>
                    <td><a target="_blank" href="">n/a</a></td>
                </tr>
                <tr>
                    <td>License</td>
                    <td>CC BY-NC-SA 3</td>
                    <td>CC BY-NC-SA 3</td>
                </tr>
                <tr>
                    <td>File Size</td>
                    <td>n/a</td>
                </tr>
                <tr>
                    <td>Upload date</td>
                    <td>1610873485</td>
                </tr>
            </table>
                </a>

        <a name="documentation">
        <h2>Documentation</h2>
        <p>Also read <a href='http://wiki.alioth.net/index.php/Vector'>http://wiki.alioth.net/index.php/Vector</a></p>
        <h3>Vector Readme.rtf</h3>
        <pre>{\rtf1\ansi\ansicpg1250\deff0
{\fonttbl
{\f0\fnil\fcharset0\fprq0\fttruetype Helvetica;}
{\f1\fnil\fcharset0\fprq0\fttruetype Arial;}
{\f2\fnil\fcharset0\fprq0\fttruetype Liberation Sans;}
{\f3\fnil\fcharset0\fprq0\fttruetype Dingbats;}
{\f4\fnil\fcharset0\fprq0\fttruetype Symbol;}
{\f5\fnil\fcharset0\fprq0\fttruetype Liberation Serif;}
{\f6\fnil\fcharset0\fprq0\fttruetype Courier New;}}
{\colortbl
\red0\green0\blue0;
\red255\green255\blue255;
\red0\green128\blue0;
\red128\green128\blue128;
\red128\green0\blue128;}
{\stylesheet
{\s1\fi-431\li720\sbasedon28\snext28Contents 1;}
{\s2\fi-431\li1440\sbasedon28\snext28Contents 2;}
{\s3\fi-431\li2160\sbasedon28\snext28Contents 3;}
{\s8\fi-431\li720\sbasedon28Lower Roman List;}
{\s5\tx431\sbasedon24\snext28Numbered Heading 1;}
{\s6\tx431\sbasedon25\snext28Numbered Heading 2;}
{\s7\fi-431\li720Square List;}
{\*\cs11\sbasedon28Endnote Text;}
{\s4\fi-431\li2880\sbasedon28\snext28Contents 4;}
{\s9\fi-431\li720Diamond List;}
{\s10\fi-431\li720Numbered List;}
{\*\cs12\fs20\superEndnote Reference;}
{\s13\fi-431\li720Triangle List;}
{\s14\tx431\sbasedon26\snext28Numbered Heading 3;}
{\s15\fi-431\li720Dashed List;}
{\s16\fi-431\li720\sbasedon10Upper Roman List;}
{\s17\sb440\sa60\f2\fs24\b\sbasedon28\snext28Heading 4;}
{\s18\fi-431\li720Heart List;}
{\s34\fi-431\li720Box List;}
{\s20\fi-431\li720\sbasedon10Upper Case List;}
{\s21\fi-431\li720Bullet List;}
{\s22\fi-431\li720Hand List;}
{\*\cs23\fs20\sbasedon28Footnote Text;}
{\s24\sb440\sa60\f2\fs34\b\sbasedon28\snext28Heading 1;}
{\s25\sb440\sa60\f2\fs28\b\sbasedon28\snext28Heading 2;}
{\s19\qc\sb240\sa120\f2\fs32\b\sbasedon28\snext28Contents Header;}
{\s27\fi-431\li720Tick List;}
{\s26\sb440\sa60\f2\fs24\b\sbasedon28\snext28Heading 3;}
{\s29\fi-431\li720\sbasedon10Lower Case List;}
{\s30\li1440\ri1440\sa120\sbasedon28Block Text;}
{\s36\f6\sbasedon28Plain Text;}
{\s32\tx1584\sbasedon5\snext28Section Heading;}
{\s33\fi-431\li720Implies List;}
{\s28\f5\fs24Normal;}
{\s35\fi-431\li720Star List;}
{\*\cs31\fs20\superFootnote Reference;}
{\s37\tx1584\sbasedon5\snext28Chapter Heading;}}
\kerning0\cf0\ftnbj\fet2\ftnstart1\ftnnar\aftnnar\ftnstart1\aftnstart1\aenddoc\revprop3{\info\uc1}\deftab720\viewkind1\paperw12240\paperh15840\margl1440\margr1440\widowctrl
\sectd\sbknone\colsx0\marglsxn1800\margrsxn1800\pgncont\ltrsect
\pard\plain\ltrpar\ql\sl240\slmult1\itap0{\f0\fs24\b\ul\lang1031{\*\listtag0}\abinodiroverride\ltrch VECTOR}{\f0\fs28\lang1031{\*\listtag0} }{\f0\fs24\lang1031{\*\listtag0}for Oolite\tab \tab \tab \tab \tab \tab \tab }{\cf2\f0\fs18\lang1031{\*\listtag0}Compatible to OXPConfig.oxp}{\f0\fs24\b\ul\lang1031{\*\listtag0}\par}
\pard\plain\ltrpar\ql\sl240\slmult1\itap0{\cf3\f0\fs18\lang1031{\*\listtag0}\abinodiroverride\ltrch Licence: see below}{\cf3\f0\fs18\lang1031{\*\listtag0}\par}
\pard\plain\ltrpar\ql\sl240\slmult1\itap0{\cf3\f0\fs18\lang1031{\*\listtag0}\par}
\pard\plain\ltrpar\ql\sl240\slmult1\itap0{\f0\fs24\ul\lang1031{\*\listtag0}\abinodiroverride\ltrch OVERVIEW:}{\f0\fs24\ul\lang1031{\*\listtag0}\par}
\pard\plain\ltrpar\ql\sl240\slmult1\itap0{\f0\fs22\lang1031{\*\listtag0}\abinodiroverride\ltrch This Addon adds a new, fast, rare and expensive type of player-ship to the universe and includes also another}{\f0\fs22\lang1031{\*\listtag0}\par}
\pard\plain\ltrpar\ql\sl240\slmult1\itap0{\f0\fs22\lang1031{\*\listtag0}\abinodiroverride\ltrch special feature - &#39;Richmans World&#39; - a unusual mission type. The Vectors design is clear, elegant and speed-optimized.}{\f0\fs22\lang1031{\*\listtag0}\par}
\pard\plain\ltrpar\ql\sl240\slmult1\itap0{\f0\fs22\lang1031{\*\listtag0}\abinodiroverride\ltrch With a big touch of nostalgic italian lines, so it&#39;s price is no surprise. Like other ships it is capable to transport some}{\f0\fs22\lang1031{\*\listtag0}\par}
\pard\plain\ltrpar\ql\sl240\slmult1\itap0{\f0\fs22\lang1031{\*\listtag0}\abinodiroverride\ltrch cargo (your doggy-bag must have some place), but most of the available place is used by it&#39;s extravagant big engine.}{\f0\fs22\lang1031{\*\listtag0}\par}
\pard\plain\ltrpar\ql\sl240\slmult1\itap0{\f0\fs22\lang1031{\*\listtag0}\abinodiroverride\ltrch Some people might say that only hoopy froods will fly a Vector, but fact is that it is a sports ship at it&#39;s best. You don&#39;t}{\f0\fs22\lang1031{\*\listtag0}\par}
\pard\plain\ltrpar\ql\sl240\slmult1\itap0{\f0\fs22\lang1031{\*\listtag0}\abinodiroverride\ltrch have to be a multi-millionaire to get one of these very rare ships. And flying such a beauty will change your life.}{\f0\fs22\lang1031{\*\listtag0}\par}
\pard\plain\ltrpar\ql\sl240\slmult1\itap0{\f0\fs22\lang1031{\*\listtag0}\abinodiroverride\ltrch Rumors says that this ship was originally designed for one of the chairmen of the GRS company for some weekend trips,}{\f0\fs22\lang1031{\*\listtag0}\par}
\pard\plain\ltrpar\ql\sl240\slmult1\itap0{\f0\fs22\lang1031{\*\listtag0}\abinodiroverride\ltrch but who believes in rumors?}{\f0\fs22\lang1031{\*\listtag0}\par}
\pard\plain\ltrpar\ql\sl240\slmult1\itap0{\f0\fs22\lang1031{\*\listtag0}\par}
\pard\plain\ltrpar\ql\sl240\slmult1\itap0{\f0\fs22\lang1031{\*\listtag0}\abinodiroverride\ltrch You can play this oxp in very different ways. Stay clean or climb to the top of the &#39;business&#39;. Every way has it&#39;s own}{\f0\fs22\lang1031{\*\listtag0}\par}
\pard\plain\ltrpar\ql\sl240\slmult1\itap0{\f0\fs22\lang1031{\*\listtag0}\abinodiroverride\ltrch advantages and disadvantages. It&#39;s your decision and for sure some work. Oh, and you&#39;ll stumble into the story that}{\f0\fs22\lang1031{\*\listtag0}\par}
\pard\plain\ltrpar\ql\sl240\slmult1\itap0{\f0\fs22\lang1031{\*\listtag0}\abinodiroverride\ltrch opens your eyes. Someday, maybe. It rambles into your life when you don&#39;t expect it, so keep your eyes open.}{\f0\fs22\lang1031{\*\listtag0}\par}
\pard\plain\ltrpar\ql\sl240\slmult1\itap0{\f0\fs22\lang1031{\*\listtag0}\abinodiroverride\ltrch Additionally it is compatible and configurable via OXPConfig.}{\f0\fs22\lang1031{\*\listtag0}\par}
\pard\plain\ltrpar\ql\sl240\slmult1\itap0{\f0\fs22\lang1031{\*\listtag0}\par}
\pard\plain\ltrpar\ql\sl240\slmult1\itap0{\f0\fs24\ul\lang1031{\*\listtag0}\abinodiroverride\ltrch FEATURES:}{\f0\fs24\ul\lang1031{\*\listtag0}\par}
\pard\plain\ltrpar\ql\sl240\slmult1\itap0{\f0\fs24\lang1031{\*\listtag0}\abinodiroverride\ltrch - Rare player-ship and NPC versions.}{\f0\fs24\lang1031{\*\listtag0}\par}
\pard\plain\ltrpar\ql\sl240\slmult1\itap0{\f0\fs24\lang1031{\*\listtag0}\abinodiroverride\ltrch - Missions about richmen, fast money and risk.}{\f0\fs24\lang1031{\*\listtag0}\par}
\pard\plain\ltrpar\ql\sl240\slmult1\itap0{\f0\fs24\lang1031{\*\listtag0}\abinodiroverride\ltrch - Music, sounds and voices.}{\f0\fs24\lang1031{\*\listtag0}\par}
\pard\plain\ltrpar\ql\sl240\slmult1\itap0{\f0\fs24\lang1031{\*\listtag0}\abinodiroverride\ltrch - Ingame overlays if shaders available.}{\f0\fs24\lang1031{\*\listtag0}\par}
\pard\plain\ltrpar\ql\sl240\slmult1\itap0{\f0\fs24\lang1031{\*\listtag0}\par}
\pard\plain\ltrpar\ql\sl240\slmult1\itap0{\f0\fs24\ul\lang1031{\*\listtag0}\abinodiroverride\ltrch REQUIREMENTS:}{\f0\fs24\ul\lang1031{\*\listtag0}\par}
\pard\plain\ltrpar\ql\sl240\slmult1\itap0{\f0\fs22\lang1031{\*\listtag0}\abinodiroverride\ltrch - Oolite v1.76.1.}{\f0\fs22\lang1031{\*\listtag0}\par}
\pard\plain\ltrpar\ql\sl240\slmult1\itap0{\f0\fs22\lang1031{\*\listtag0}\abinodiroverride\ltrch - Cabal_Common_Library1.6.}{\f0\fs22\lang1031{\*\listtag0}\par}
\pard\plain\ltrpar\ql\sl240\slmult1\itap0{\f0\fs22\lang1031{\*\listtag0}\abinodiroverride\ltrch - Snoopers2.3.3.}{\f0\fs22\lang1031{\*\listtag0}\par}
\pard\plain\ltrpar\ql\sl240\slmult1\itap0{\f0\fs22\lang1031{\*\listtag0}\abinodiroverride\ltrch - BGS-A1.5 or BGS-M1.5 for engine sounds for the Vector (optional).}{\f0\fs22\lang1031{\*\listtag0}\par}
\pard\plain\ltrpar\ql\sl240\slmult1\itap0{\f0\fs22\lang1031{\*\listtag0}\par}
\pard\plain\ltrpar\ql\sl240\slmult1\itap0{\f0\fs24\ul\lang1031{\*\listtag0}\abinodiroverride\ltrch PROBLEMS:}{\f0\fs24\ul\lang1031{\*\listtag0}\par}
\pard\plain\ltrpar\ql\sl240\slmult1\itap0{\f0\fs22\lang1031{\*\listtag0}\abinodiroverride\ltrch In case of problems, please report it: }{\cf4\f0\fs22\lang1031{\*\listtag0}http://aegidian.org/bb/viewtopic.php?f=4&amp;t=4634}{\f0\fs22\lang1031{\*\listtag0} and include the following infos:}{\f0\fs22\lang1031{\*\listtag0}\par}
\pard\plain\ltrpar\ql\sl240\slmult1\itap0{\f0\fs22\lang1031{\*\listtag0}\abinodiroverride\ltrch - Oolites version (and if trunk or nightly is used the revision number)}{\f0\fs22\lang1031{\*\listtag0}\par}
\pard\plain\ltrpar\ql\sl240\slmult1\itap0{\f0\fs22\lang1031{\*\listtag0}\abinodiroverride\ltrch - OS, Graphics card (and driver version)}{\f0\fs22\lang1031{\*\listtag0}\par}
\pard\plain\ltrpar\ql\sl240\slmult1\itap0{\f0\fs22\lang1031{\*\listtag0}\abinodiroverride\ltrch - Fullscreen/Windowed mode}{\f0\fs22\lang1031{\*\listtag0}\par}
\pard\plain\ltrpar\ql\sl240\slmult1\itap0{\f0\fs22\lang1031{\*\listtag0}\abinodiroverride\ltrch - Shader mode}{\f0\fs22\lang1031{\*\listtag0}\par}
\pard\plain\ltrpar\ql\sl240\slmult1\itap0{\f0\fs22\lang1031{\*\listtag0}\abinodiroverride\ltrch - List of used OXPs (incl. versions)}{\f0\fs22\lang1031{\*\listtag0}\par}
\pard\plain\ltrpar\ql\sl240\slmult1\itap0{\f0\fs24\lang1031{\*\listtag0}\abinodiroverride\ltrch ___________________________________________________________________________________________}{\f0\fs24\lang1031{\*\listtag0}\par}
\pard\plain\ltrpar\ql\sl240\slmult1\itap0{\f0\fs24\lang1031{\*\listtag0}\par}
\pard\plain\ltrpar\ql\sl240\slmult1\itap0{\f0\fs20\lang1031{\*\listtag0}\abinodiroverride\ltrch Thanks to:}{\f0\fs20\lang1031{\*\listtag0}\par}
\pard\plain\ltrpar\ql\sl240\slmult1\itap0{\f0\fs20\lang1031{\*\listtag0}\abinodiroverride\ltrch \tab - }{\f0\fs20\ul\lang1031{\*\listtag0}The development team}{\f0\fs20\lang1031{\*\listtag0}\par}
\pard\plain\ltrpar\ql\sl240\slmult1\itap0{\f0\fs20\lang1031{\*\listtag0}\abinodiroverride\ltrch \tab Giles Williams (aegidian), Jens Ayton (Ahruman), Nikos Barkas (another_commander), David Taylor (dajt), Chris Crowther (hikari),}{\f0\fs20\lang1031{\*\listtag0}\par}
\pard\plain\ltrpar\ql\sl240\slmult1\itap0{\f0\fs20\lang1031{\*\listtag0}\abinodiroverride\ltrch \tab James (cmdrjames), Darren Salt (dsalt), Eddy Petri\uc1\u351\&#39;baor (eddyp), Erich Ritz (eritz), Konstantinos Sykas (getafix),}{\f0\fs20\lang1031{\*\listtag0}\par}
\pard\plain\ltrpar\ql\sl240\slmult1\itap0{\f0\fs20\lang1031{\*\listtag0}\abinodiroverride\ltrch \tab Kaks, Nic (nic_asdf), Michael Werle (mwerle), Dave Hughes (selezen), Eric Walch, Dylan Smith (winston).}{\f0\fs20\lang1031{\*\listtag0}\par}
\pard\plain\ltrpar\ql\sl240\slmult1\itap0{\f0\fs18\lang1031{\*\listtag0}\abinodiroverride\ltrch special thanks to:}{\f0\fs18\lang1031{\*\listtag0}\par}
\pard\plain\ltrpar\ql\sl240\slmult1\itap0{\f0\fs18\lang1031{\*\listtag0}\abinodiroverride\ltrch \tab Eric Walch for his thoughts about mission-screen handling (and his solutions to avoid clashes)}{\f0\fs18\lang1031{\*\listtag0}\par}
\pard\plain\ltrpar\ql\sl240\slmult1\itap0{\f0\fs18\lang1031{\*\listtag0}\abinodiroverride\ltrch \tab Ahruman for the nice shader examples (Shady Cobra) - modified, abused, misused and used :-)}{\f0\fs18\lang1031{\*\listtag0}\par}
\pard\plain\ltrpar\ql\sl240\slmult1\itap0{\f0\fs18\lang1031{\*\listtag0}\abinodiroverride\ltrch \tab caracal for playtesting and his excellent suggestions}{\f0\fs18\lang1031{\*\listtag0}\par}
\pard\plain\ltrpar\ql\sl240\slmult1\itap0{\f0\fs18\lang1031{\*\listtag0}\abinodiroverride\ltrch \tab Zieman for his pointers to shader problems for ATI users}{\f0\fs18\lang1031{\*\listtag0}\par}
\pard\plain\ltrpar\ql\sl240\slmult1\itap0{\f0\fs18\lang1031{\*\listtag0}\abinodiroverride\ltrch \tab Xcyril, Marcos Oliva and Edward Blakeley for permission to use parts of their music creations}{\f0\fs18\lang1031{\*\listtag0}\par}
\pard\plain\ltrpar\ql\sl240\slmult1\itap0{\f0\fs18\lang1031{\*\listtag0}\abinodiroverride\ltrch \tab }{\f1\fs18\lang1031{\*\listtag0}Andrei Cristea, Marc Davis and Cyril Verrier - the artists of the stunning mission screen pictures}{\f0\fs18\lang1031{\*\listtag0}\par}
\pard\plain\ltrpar\ql\sl240\slmult1\itap0{\f1\fs18\lang1031{\*\listtag0}\abinodiroverride\ltrch \tab  - permission for all included files is granted (CC-by-nc-sa-3.0).}{\f1\fs18\lang1031{\*\listtag0}\par}
\pard\plain\ltrpar\ql\sl240\slmult1\itap0{\f1\fs18\lang1031{\*\listtag0}\par}
\pard\plain\ltrpar\ql\sl240\slmult1\itap0{\f0\fs18\lang1031{\*\listtag0}\abinodiroverride\ltrch Oolite is a Creative Commons protected project by Giles Williams. Oolite is a space simulation game developed by Giles Williams}{\f0\fs18\lang1031{\*\listtag0}\par}
\pard\plain\ltrpar\ql\sl240\slmult1\itap0{\f0\fs18\lang1031{\*\listtag0}\abinodiroverride\ltrch based on Elite by Ian Bell and David Braben. All rights reserved.}{\f0\fs18\lang1031{\*\listtag0}\par}
\pard\plain\ltrpar\ql\sl240\slmult1\itap0{\f0\fs18\lang1031{\*\listtag0}\abinodiroverride\ltrch ______________________________________________________________________________________________________________________}{\f0\fs18\lang1031{\*\listtag0}\par}
\pard\plain\ltrpar\ql\sl240\slmult1\itap0{\f0\fs18\lang1031{\*\listtag0}\par}
\pard\plain\ltrpar\ql\sl240\slmult1\itap0{\f0\fs18\lang1031{\*\listtag0}\abinodiroverride\ltrch Copyright 2009-2012,  Made by Svengali October 2012}{\f0\fs18\lang1031{\*\listtag0}\par}
\pard\plain\ltrpar\ql\sl240\slmult1\itap0{\f0\fs18\lang1031{\*\listtag0}\par}
\pard\plain\ltrpar\ql\sl240\slmult1\itap0{\f0\fs20\lang1031{\*\listtag0}\abinodiroverride\ltrch - This OXP is licensed under the Creative Commons Attribution-NonCommercial-ShareAlike 3.0 Unported License.}{\f0\fs20\lang1031{\*\listtag0}\par}
\pard\plain\ltrpar\ql\sl240\slmult1\itap0{\f0\fs20\lang1031{\*\listtag0}\abinodiroverride\ltrch  To view a copy of this license, visit }{\cf4\f0\fs20\lang1031{\*\listtag0}http://creativecommons.org/licenses/by-nc-sa/3.0/}{\f0\fs20\lang1031{\*\listtag0} or send a letter to}{\f0\fs20\lang1031{\*\listtag0}\par}
\pard\plain\ltrpar\ql\sl240\slmult1\itap0{\f0\fs20\lang1031{\*\listtag0}\abinodiroverride\ltrch  Creative Commons, 444 Castro Street, Suite 900, Mountain View, California, 94041, USA.}{\f0\fs20\lang1031{\*\listtag0}\par}
\pard\plain\ltrpar\ql\sl240\slmult1\itap0{\f0\fs20\lang1031{\*\listtag0}\par}
\pard\plain\ltrpar\ql\sl240\slmult1\itap0{\f0\fs20\lang1031{\*\listtag0}\abinodiroverride\ltrch DISCLAIMER:}{\f0\fs20\lang1031{\*\listtag0}\par}
\pard\plain\ltrpar\ql\sl240\slmult1\itap0{\f0\fs20\lang1031{\*\listtag0}\abinodiroverride\ltrch THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS &quot;AS IS&quot; AND ANY EXPRESS OR IMPLIED WARRANTIES,}{\f0\fs20\lang1031{\*\listtag0}\par}
\pard\plain\ltrpar\ql\sl240\slmult1\itap0{\f0\fs20\lang1031{\*\listtag0}\abinodiroverride\ltrch  INCLUDING, BUT NOT LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE}{\f0\fs20\lang1031{\*\listtag0}\par}
\pard\plain\ltrpar\ql\sl240\slmult1\itap0{\f0\fs20\lang1031{\*\listtag0}\abinodiroverride\ltrch  DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL,}{\f0\fs20\lang1031{\*\listtag0}\par}
\pard\plain\ltrpar\ql\sl240\slmult1\itap0{\f0\fs20\lang1031{\*\listtag0}\abinodiroverride\ltrch  SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS}{\f0\fs20\lang1031{\*\listtag0}\par}
\pard\plain\ltrpar\ql\sl240\slmult1\itap0{\f0\fs20\lang1031{\*\listtag0}\abinodiroverride\ltrch  OR SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY,}{\f0\fs20\lang1031{\*\listtag0}\par}
\pard\plain\ltrpar\ql\sl240\slmult1\itap0{\f0\fs20\lang1031{\*\listtag0}\abinodiroverride\ltrch  WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE}{\f0\fs20\lang1031{\*\listtag0}\par}
\pard\plain\ltrpar\ql\sl240\slmult1\itap0{\f0\fs20\lang1031{\*\listtag0}\abinodiroverride\ltrch  OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.}{\f0\fs20\lang1031{\*\listtag0}\par}
\pard\plain\ltrpar\ql\sl240\slmult1\itap0{\f0\fs20\lang1031{\*\listtag0}\par}
\pard\plain\ltrpar\ql\sl240\slmult1\itap0{\f0\fs20\lang1031{\*\listtag0}\abinodiroverride\ltrch A SMALL PERCENTAGE OF USERS MAY EXPERIENCE EPILEPTIC SEIZURES WHEN EXPOSED TO CERTAIN LIGHT PATTERNS OR}{\f0\fs20\lang1031{\*\listtag0}\par}
\pard\plain\ltrpar\ql\sl240\slmult1\itap0{\f0\fs20\lang1031{\*\listtag0}\abinodiroverride\ltrch  BACKGROUNDS ON A COMPUTER SCREEN OR WHILE USING THIS OXP. CERTAIN CONDITIONS MAY INDUCE PREVIOUSLY UNDETECTED}{\f0\fs20\lang1031{\*\listtag0}\par}
\pard\plain\ltrpar\ql\sl240\slmult1\itap0{\f0\fs20\lang1031{\*\listtag0}\abinodiroverride\ltrch  EPILEPTIC SYMPTOMS EVEN IN USERS WHO HAVE NO HISTORY OF PRIOR SEIZURES OR EPILEPSY. IF YOU, OR ANYONE IN YOUR FAMILY,}{\f0\fs20\lang1031{\*\listtag0}\par}
\pard\plain\ltrpar\ql\sl240\slmult1\itap0{\f0\fs20\lang1031{\*\listtag0}\abinodiroverride\ltrch  HAVE AN EPILEPTIC CONDITION, CONSULT YOUR PHYSICIAN PRIOR TO USING THIS OXP. IMMEDIATELY DISCONTINUE USE OF THIS OXP}{\f0\fs20\lang1031{\*\listtag0}\par}
\pard\plain\ltrpar\ql\sl240\slmult1\itap0{\f0\fs20\lang1031{\*\listtag0}\abinodiroverride\ltrch  AND CONSULT YOUR PHYSICIAN IF YOU EXPERIENCE ANY OF THE FOLLOWING SYMPTOMS WHILE USING THIS OXP: DIZZINESS,}{\f0\fs20\lang1031{\*\listtag0}\par}
\pard\plain\ltrpar\ql\sl240\slmult1\itap0{\f0\fs20\lang1031{\*\listtag0}\abinodiroverride\ltrch  ALTERED VISION, EYE OR MUSCLE TWITCHES, LOSS OF AWARENESS, DISORIENTATION, ANY INVOLUNTARY MOVEMENT, OR CONVULSIONS.}{\f0\fs20\lang1031{\*\listtag0}\par}
\pard\plain\ltrpar\ql\sl240\slmult1\itap0{\f0\fs24\lang1031{\*\listtag0}\abinodiroverride\ltrch ___________________________________________________________________________________________}{\f0\fs24\lang1031{\*\listtag0}\par}
\pard\plain\ltrpar\ql\sl240\slmult1\itap0{\f0\fs24\lang1031{\*\listtag0}\par}
\pard\plain\ltrpar\ql\sl240\slmult1\itap0{\f0\fs18\lang1031{\*\listtag0}\par}}</pre>
        </a>

        <a name="equipment">          
        <h2>Equipment</h2>
            <table>
                <tr>
                    <th>Name</th>
                    <th>Visible</th>
                    <th>Cost [deci-credits]</th>
                    <th>Tech-Level</th>
                </tr>
                <tr>
                    <td><a href="../equipment/EQ_VECTOR_ALDRIN.html">Aldrin Escobar (Passenger)</a></td>
                    <td>yes</td>
                    <td align="right">0</td>
                    <td align="center">100+</td>
                </tr>
                <tr>
                    <td><a href="../equipment/EQ_VECTOR_AREIDIS_SCANNER.html">Areidis Scanner</a></td>
                    <td>yes</td>
                    <td align="right">17000</td>
                    <td align="center">100+</td>
                </tr>
                <tr>
                    <td><a href="../equipment/EQ_VECTOR_ARNP.html">Arn D&#39;ercul (Passenger)</a></td>
                    <td>yes</td>
                    <td align="right">0</td>
                    <td align="center">100+</td>
                </tr>
                <tr>
                    <td><a href="../equipment/EQ_VECTOR_EMP_MINE.html">EMP Device</a></td>
                    <td>yes</td>
                    <td align="right">0</td>
                    <td align="center">100+</td>
                </tr>
                <tr>
                    <td><a href="../equipment/EQ_VECTOR_FUNA_MISSILE.html">Missile</a></td>
                    <td>yes</td>
                    <td align="right">0</td>
                    <td align="center">100+</td>
                </tr>
                <tr>
                    <td><a href="../equipment/EQ_VECTOR_FUNB_MISSILE.html">Missile</a></td>
                    <td>yes</td>
                    <td align="right">0</td>
                    <td align="center">100+</td>
                </tr>
                <tr>
                    <td><a href="../equipment/EQ_VECTOR_FUNC_MISSILE.html">Missile</a></td>
                    <td>yes</td>
                    <td align="right">0</td>
                    <td align="center">100+</td>
                </tr>
                <tr>
                    <td><a href="../equipment/EQ_VECTOR_PAD.html">PAD (Personal Assistance Device)</a></td>
                    <td>yes</td>
                    <td align="right">0</td>
                    <td align="center">100+</td>
                </tr>
                <tr>
                    <td><a href="../equipment/EQ_VECTOR_SCOOPS.html">Arn D&#39;erculs FuelScoops Extension</a></td>
                    <td>yes</td>
                    <td align="right">17000</td>
                    <td align="center">100+</td>
                </tr>
                <tr>
                    <td><a href="../equipment/EQ_VECTOR_SPACELANE.html">Spacelane scanner</a></td>
                    <td>yes</td>
                    <td align="right">10000</td>
                    <td align="center">100+</td>
                </tr>
            </table>
        </a>

        <a name="ships">    
        <h2>Ships</h2>
            <table>
                <tr>
                    <th>Name</th>
                </tr>
                <tr>
                    <td><a href="../ships/vector.html">Vector</a></td>
                </tr>
                <tr>
                    <td><a href="../ships/vector_areidisAlpha.html">Areidis Alpha</a></td>
                </tr>
                <tr>
                    <td><a href="../ships/vector_areidisBeta.html">Areidis Beta</a></td>
                </tr>
                <tr>
                    <td><a href="../ships/vector_areidisBuoyA.html">Areidis Buoy</a></td>
                </tr>
                <tr>
                    <td><a href="../ships/vector_areidisBuoyB.html">Areidis Buoy</a></td>
                </tr>
                <tr>
                    <td><a href="../ships/vector_areidisDelta.html">Areidis Delta</a></td>
                </tr>
                <tr>
                    <td><a href="../ships/vector_areidisEpsilon.html">Areidis Epsilon</a></td>
                </tr>
                <tr>
                    <td><a href="../ships/vector_areidisGamma.html">Areidis Gamma</a></td>
                </tr>
                <tr>
                    <td><a href="../ships/vector_areidis_bay.html">vector_areidis_bay</a></td>
                </tr>
                <tr>
                    <td><a href="../ships/vector_areidis_rock.html">vector_areidis_rock</a></td>
                </tr>
                <tr>
                    <td><a href="../ships/vector_areidis_sign.html">vector_areidis_sign</a></td>
                </tr>
                <tr>
                    <td><a href="../ships/vector_areidis_sub.html">vector_areidis_sub</a></td>
                </tr>
                <tr>
                    <td><a href="../ships/vector_areidis_turret.html">vector_areidis_turret</a></td>
                </tr>
                <tr>
                    <td><a href="../ships/vector_areidiswalk_blend.html">vector_areidiswalk_blend</a></td>
                </tr>
                <tr>
                    <td><a href="../ships/vector_areidiswalk_continue.html">vector_areidiswalk_continue</a></td>
                </tr>
                <tr>
                    <td><a href="../ships/vector_areidiswalk_corridor.html">vector_areidiswalk_corridor</a></td>
                </tr>
                <tr>
                    <td><a href="../ships/vector_areidiswalk_doorA.html">vector_areidiswalk_doorA</a></td>
                </tr>
                <tr>
                    <td><a href="../ships/vector_areidiswalk_doorB.html">vector_areidiswalk_doorB</a></td>
                </tr>
                <tr>
                    <td><a href="../ships/vector_arn.html">Arn D&#39;ercul</a></td>
                </tr>
                <tr>
                    <td><a href="../ships/vector_arnForce.html">Headhunter</a></td>
                </tr>
                <tr>
                    <td><a href="../ships/vector_benus.html">Anaconda</a></td>
                </tr>
                <tr>
                    <td><a href="../ships/vector_buildUpA.html">Racer</a></td>
                </tr>
                <tr>
                    <td><a href="../ships/vector_cpodA.html">Cargo container</a></td>
                </tr>
                <tr>
                    <td><a href="../ships/vector_cpodB.html">Cargo container</a></td>
                </tr>
                <tr>
                    <td><a href="../ships/vector_cpodC.html">Cargo container</a></td>
                </tr>
                <tr>
                    <td><a href="../ships/vector_cpodD.html">Cargo container</a></td>
                </tr>
                <tr>
                    <td><a href="../ships/vector_cpodDClone.html">Cargo container</a></td>
                </tr>
                <tr>
                    <td><a href="../ships/vector_cubeA.html">vector_cubeA</a></td>
                </tr>
                <tr>
                    <td><a href="../ships/vector_cubeActive.html">Active</a></td>
                </tr>
                <tr>
                    <td><a href="../ships/vector_cubes.html">vector_cubes</a></td>
                </tr>
                <tr>
                    <td><a href="../ships/vector_emp.html">EMP Mine</a></td>
                </tr>
                <tr>
                    <td><a href="../ships/vector_empmine.html">EMP Mine</a></td>
                </tr>
                <tr>
                    <td><a href="../ships/vector_epodA.html">Escape Pod</a></td>
                </tr>
                <tr>
                    <td><a href="../ships/vector_epodHintA.html">Escape capsule</a></td>
                </tr>
                <tr>
                    <td><a href="../ships/vector_frood.html">Vector</a></td>
                </tr>
                <tr>
                    <td><a href="../ships/vector_funA.html">Missile</a></td>
                </tr>
                <tr>
                    <td><a href="../ships/vector_funB.html">Missile</a></td>
                </tr>
                <tr>
                    <td><a href="../ships/vector_funC.html">Missile</a></td>
                </tr>
                <tr>
                    <td><a href="../ships/vector_geek.html">Vector</a></td>
                </tr>
                <tr>
                    <td><a href="../ships/vector_inspection.html">GC Inspection Team</a></td>
                </tr>
                <tr>
                    <td><a href="../ships/vector_intermezzo.html">Intermezzo</a></td>
                </tr>
                <tr>
                    <td><a href="../ships/vector_mark.html">Mark</a></td>
                </tr>
                <tr>
                    <td><a href="../ships/vector_mercilessA.html">Merciless Pirate</a></td>
                </tr>
                <tr>
                    <td><a href="../ships/vector_millionaire.html">Vector</a></td>
                </tr>
                <tr>
                    <td><a href="../ships/vector_newsA.html">vector_newsA</a></td>
                </tr>
                <tr>
                    <td><a href="../ships/vector_newsB.html">vector_newsB</a></td>
                </tr>
                <tr>
                    <td><a href="../ships/vector_ov01.html">Lane Scanner</a></td>
                </tr>
                <tr>
                    <td><a href="../ships/vector_ov02.html">Vector Scoop</a></td>
                </tr>
                <tr>
                    <td><a href="../ships/vector_ov03.html">PAD</a></td>
                </tr>
                <tr>
                    <td><a href="../ships/vector_ov04.html">Time</a></td>
                </tr>
                <tr>
                    <td><a href="../ships/vector_ov05.html">Money</a></td>
                </tr>
                <tr>
                    <td><a href="../ships/vector_ov06.html">Level</a></td>
                </tr>
                <tr>
                    <td><a href="../ships/vector_ov07.html">Comms</a></td>
                </tr>
                <tr>
                    <td><a href="../ships/vector_ov08.html">08</a></td>
                </tr>
                <tr>
                    <td><a href="../ships/vector_ov09.html">Ship Inspector</a></td>
                </tr>
                <tr>
                    <td><a href="../ships/vector_ov10.html">Arn D&#39;ercul</a></td>
                </tr>
                <tr>
                    <td><a href="../ships/vector_ov11.html">Aldrin Escobar</a></td>
                </tr>
                <tr>
                    <td><a href="../ships/vector_ov12.html">Passenger</a></td>
                </tr>
                <tr>
                    <td><a href="../ships/vector_ov13.html">Major Hurst</a></td>
                </tr>
                <tr>
                    <td><a href="../ships/vector_ov14.html">Benus Triadon</a></td>
                </tr>
                <tr>
                    <td><a href="../ships/vector_ov15.html">Captain</a></td>
                </tr>
                <tr>
                    <td><a href="../ships/vector_ov16.html">Agent</a></td>
                </tr>
                <tr>
                    <td><a href="../ships/vector_ovComm.html">Communicator</a></td>
                </tr>
                <tr>
                    <td><a href="../ships/vector_padCodeA.html">Codecard A</a></td>
                </tr>
                <tr>
                    <td><a href="../ships/vector_padOverview.html">Rank and Medals</a></td>
                </tr>
                <tr>
                    <td><a href="../ships/vector_pirateA.html">Slaver</a></td>
                </tr>
                <tr>
                    <td><a href="../ships/vector_pirateB.html">Slaver</a></td>
                </tr>
                <tr>
                    <td><a href="../ships/vector_pirateC.html">Slaver</a></td>
                </tr>
                <tr>
                    <td><a href="../ships/vector_pirateD.html">Slaver</a></td>
                </tr>
                <tr>
                    <td><a href="../ships/vector_pirateE.html">Slaver</a></td>
                </tr>
                <tr>
                    <td><a href="../ships/vector_player.html">Vector (SE)</a></td>
                </tr>
                <tr>
                    <td><a href="../ships/vector_ppodA.html">Empty???</a></td>
                </tr>
                <tr>
                    <td><a href="../ships/vector_ppodB.html">Empty???</a></td>
                </tr>
                <tr>
                    <td><a href="../ships/vector_ppodC.html">Empty???</a></td>
                </tr>
                <tr>
                    <td><a href="../ships/vector_ppodD.html">Empty???</a></td>
                </tr>
                <tr>
                    <td><a href="../ships/vector_ppodE.html">Empty???</a></td>
                </tr>
                <tr>
                    <td><a href="../ships/vector_ppodF.html">Empty</a></td>
                </tr>
                <tr>
                    <td><a href="../ships/vector_revenge1.html">Richmans Hand</a></td>
                </tr>
                <tr>
                    <td><a href="../ships/vector_shuttleA.html">Committee Shuttle</a></td>
                </tr>
                <tr>
                    <td><a href="../ships/vector_specialist.html">vector_specialist</a></td>
                </tr>
                <tr>
                    <td><a href="../ships/vector_specialistbay.html">Bay</a></td>
                </tr>
                <tr>
                    <td><a href="../ships/vector_specialistcenter.html">Center</a></td>
                </tr>
                <tr>
                    <td><a href="../ships/vector_specialistdefense.html">Asp II</a></td>
                </tr>
                <tr>
                    <td><a href="../ships/vector_specialistlaser.html">vector_specialistlaser</a></td>
                </tr>
                <tr>
                    <td><a href="../ships/vector_specialistmark.html">Mark</a></td>
                </tr>
                <tr>
                    <td><a href="../ships/vector_specialiststruct.html">Struct</a></td>
                </tr>
                <tr>
                    <td><a href="../ships/vector_visitor.html">Headhunter</a></td>
                </tr>
            </table>
        </a>

        <a name="models">    
        <h2>Models</h2>
            This expansion declares no models. 
        </a>

        <a name="scripts">    
        <h2>Scripts</h2>
            <table>
                <tr>
                    <th>Path</th>
                </tr>
                <tr>
                    <td valign="top">Scripts/vector.js</td>
                    <td><pre>&quot;use strict&quot;;
this.name = &quot;vector&quot;;
this.author = &quot;Svengali&quot;;
this.copyright = &quot;CC-by-nc-sa-3.0&quot;;
this.description = &quot;Mission. Funny things in &#39;Richman&#39;s World&#39;&quot;;
this.version = &quot;1.7.1&quot;;

this.startUp = function()
{
	delete this.startUp;
	if(worldScripts.vector_pad.startUp) worldScripts.vector_pad.startUp();
	this.logging = false;
	this.audio = true;
	this.extraA = false;
	this.extraB = true;
	this.excludedScreens = [&#39;GUI_SCREEN_OPTIONS&#39;,&#39;GUI_SCREEN_SAVE&#39;,&#39;GUI_SCREEN_LOAD&#39;,&#39;GUI_SCREEN_INTRO1&#39;,&#39;GUI_SCREEN_INTRO2&#39;,&#39;GUI_SCREEN_MISSION&#39;,&#39;GUI_SCREEN_REPORT&#39;];
	this.mySound = new SoundSource;
	this.mySound.loop = true;
	this.hasShown = false;
	this.slaunch = false;
	if(!this.andale) this.andale = false;
	this.ISSOrNova = false;
	this.allowS = false;
	this.allowI = false;
	this.tempRisk = 0;
	this.addChance = 1;
	this.red = 0;
	this.dataRW(1);
}
this.dataRW = function(mode)
{
	if(mode){
		if(!worldScripts.vector_pad.deactivated) this.inf = worldScripts.vector_pad.padInfos.generic;
		else this.inf ={cpod:[],cpods:0,epod:[],epods:0,expFactor:1,passengerState:0,superman:0}
		if(missionVariables.vector_cpod){
			this.inf.cpod = missionVariables.vector_cpod.split(&#39;|&#39;);
			this.inf.cpods = this.inf.cpod.length;
		}
		if(missionVariables.vector_epod){
			this.inf.epod = missionVariables.vector_epod.split(&#39;|&#39;);
			this.inf.epods = this.inf.epod.length;
		}
		if(player.score&gt;249) missionVariables.vector_limiter = null;
		missionVariables.vector_passengerState = null;
		missionVariables.vector_cpod = null;
		missionVariables.vector_cpods = null;
		missionVariables.vector_epod = null;
		missionVariables.vector_epods = null;
	} else {
		this.inf.passengerState = 0;
		this.inf.cpod = [];
		this.inf.cpods = 0;
		this.inf.epod = [];
		this.inf.epods = 0;
		this.inf.pasState = 0;
		if(!worldScripts.vector_pad.deactivated){
			this.inf.superman = worldScripts.vector_pad.padInfos.generic.superman;
			worldScripts.vector_pad.padInfos.generic = this.inf;
		}
	}
	return;
}
this.shipWillDockWithStation = function(station)
{
	if(!player.ship.docked) return;
	this.dataRW(1);
	if(this.ISSOrNova){
		this.allowS = false;
		this.allowI = false;
		this.tempRisk = 0;
	} else this.setStationFlags(station);
}
this.setStationFlags = function(curstat)
{ /* Station, Risk, Screen, GalCop */
	var sList = [&quot;Astromine Penal Colony&quot;,1.3,true,true,&quot;Augeaian Orbital Repair Facility&quot;,0.8,true,true,&quot;Black Monk Monastery&quot;,0.8,true,false,
		&quot;CoachWhip hOopy Casino&quot;,1.8,true,true,&quot;Collective SLAPU Imperial AstroFactory&quot;,1.3,true,true,&quot;Collective ZGF&quot;,0.7,true,false,
		&quot;Deep Space Hoopy Hotel : Hades Branch&quot;,1.1,true,true,&quot;Deep Space Hoopy Hotel : Lernean Branch&quot;,1.1,true,true,
		&quot;Free Trade Zone&quot;,0.8,true,false,&quot;Griff Research Ltd Orbital Base&quot;,1.2,true,true,&quot;GRS Buoy Factory&quot;,1.5,true,true,&quot;Hacker Outpost&quot;,0.8,true,false,
		&quot;Hesperides Wiseguy Way-Station&quot;,1.1,true,true,&quot;Imperial AstroFactory&quot;,1.7,true,true,&quot;Liberty Station&quot;,1.8,true,true,&quot;Navy SecCom Station&quot;,1.8,true,true,
		&quot;Pirate Base&quot;,1.8,true,false,&quot;Pirate Rock&quot;,1.7,true,false,&quot;Rebel Outpost&quot;,1.8,true,false,&quot;Renegade Phoenix&quot;,1.8,true,true,&quot;Renegade Station&quot;,1.6,true,true,
		&quot;Rock Hermit&quot;,1.2,true,true,&quot;Royal Court&quot;,1.7,false,false,&quot;Royal Hunting Lodge&quot;,1.7,false,false,&quot;Salvage Gang&quot;,1.2,true,false,&quot;Sentinel Station&quot;,1.4,true,true,
		&quot;Special Branch Orbital Headquaters&quot;,1.8,true,true,&quot;Special Interstellar Repairs and Shipyard Facility&quot;,1.6,true,true,&quot;Sun Research Station Alpha&quot;,1.5,true,true,
		&quot;Sun Research Station Beta&quot;,1.5,true,true,&quot;Sun Research Station Delta&quot;,1.5,true,true,&quot;Sun Research Station Omega&quot;,1.5,true,true,&quot;Super Hub&quot;,1.4,true,true,
		&quot;Taranis Corporation HQ&quot;,1.8,true,true,&quot;The Link Base&quot;,1.9,true,false,&quot;TransHab Station&quot;,1.4,true,true];
	let e = sList.indexOf(curstat.name);
	if(e!==-1){
		if(!curstat.bounty){this.allowS = sList[e+2]; this.allowI = sList[e+3]; this.tempRisk = sList[e+1];}
		else {this.allowS = sList[e+2]; this.allowI = false; this.tempRisk = sList[e+1];}
	} else {
		if(curstat.isMainStation &amp;&amp; !curstat.bounty){this.allowS = true; this.allowI = true; this.tempRisk = 1.5;}
		else {
			if(curstat.AI===&quot;randomhitsbarAI.plist&quot;){this.allowS = true; this.allowI = true; this.tempRisk = 1.3;}
			else if(curstat.primaryRole===&quot;constore&quot;){this.allowS = true; this.allowI = true; this.tempRisk = 1.6;}
			else {this.allowS = false; this.allowI = false; this.tempRisk = 0;}
		}
	}
	if(this.logging) log(this.name,this.name+&#39;: Stationkey: ISS:&#39;+this.ISSOrNova+&#39; S:&#39;+this.allowS+&#39; I:&#39;+this.allowI+&#39; R:&#39;+this.tempRisk);
	return;
}
this.shipDockedWithStation = function()
{
	this.mySound.stop();
	this.hasShown = false;
	if(!player.ship.docked || this.ISSOrNova || !this.allowS) return;
	if(!this.inf.cpods &amp;&amp; !this.inf.epods &amp;&amp; this.excludedScreens.indexOf(guiScreen)===-1){
		if(this.inf.expFactor&gt;20 &amp;&amp; Math.random()&lt;(0.01*Math.log(this.inf.expFactor))){
			this.showScreen(2,null,null,null);
			this.revenge = Math.ceil(Math.log(this.inf.expFactor*500)*0.25);
		} else if(this.andale &amp;&amp; system.government&gt;5 &amp;&amp; !(clock.days&amp;3) &amp;&amp; Math.random()&gt;0.8){this.dataRW(1); this.showScreen(6,null,null,5);}
		this.hasShown = true;
		return;
	}
}
this.missionScreenOpportunity = function()
{
	if(this.ISSOrNova || !player.ship.docked || !this.allowS || this.hasShown || (!this.inf.cpods &amp;&amp; !this.inf.epods)) return;
	if(!this.mc){
		this.dataRW(1);
		this.mc = new Object({screen:0,react:0,sumToOffer:0,sumCargo:0,sumPods:0,sTotal:0,loop:0,advice:&#39;&#39;,EName:&#39;&#39;,ETyp:&#39;&#39;,CName:&#39;&#39;,CTyp:&#39;&#39;});
		this.mc.expLog = Math.log(this.inf.expFactor*5);
		this.mc.rp = this.mc.expLog*0.1;
		this.mc.hint = Math.floor(Math.log((1+system.government)*this.mc.expLog)*1.7);
		if(this.inf.cpod.length) ++this.mc.screen;
		if(this.inf.epod.length) ++this.mc.screen;
	}
	this.missionOffers();
}
this.missionOffers = function()
{
	if(this.inf.epod.length) this.mc.loop = 1;
	else if(this.inf.cpod.length) this.mc.loop = 2;
	switch(this.mc.loop){
		case 1: this.showEPods(); this.mc.loop = 4; break;
		case 2: this.showCPods(); this.mc.loop = 4; break;
		default: this.hasShown = true;}
	return;
}
this.showEPods = function()
{
	var lineAdd = 8-this.inf.epod.length;
	if(this.inf.epod.length===1){
		if(this.inf.expFactor&lt;40) this.showScreen(1,&#39;VECTOR_OFFERA&#39;,null,null);
		else this.showScreen(1,&#39;VECTOR_OFFERC&#39;,null,null);
	} else {
		if(this.inf.expFactor&lt;40) this.showScreen(1,&#39;VECTOR_OFFERB&#39;,null,null);
		else this.showScreen(1,&#39;VECTOR_OFFERD&#39;,null,null);
	}
	var i = this.inf.epod.length;
	while(i--){
		this.calculateSum(this.inf.epod[i],1);
		mission.addMessageText(&quot;Esc-Pod:\r\r&quot;+this.mc.EName+&quot; &quot;+this.mc.ETyp+&quot;.&quot;);
	}
	mission.addMessageTextKey(&quot;VECTOR_LINE&quot;);
	this.mc.sumPods = Math.ceil(this.mc.sumToOffer);
	if(this.mc.sumPods&lt;400) this.mc.sumPods = 400;
	if(this.inf.expFactor&gt;=40){
		lineAdd--;
		mission.addMessageText(&quot;\r\r\r\r\r\r\r\rPossible ransom: &quot;+this.mc.sumPods+&quot; Credits.&quot;);
	}
	i = lineAdd;
	while(i--) mission.addMessageText(&quot;&quot;);
	let friends = [&quot;low&quot;,&quot;acceptable&quot;,&quot;average&quot;,&quot;medium&quot;,&quot;high&quot;,&quot;dangerous&quot;,&quot;extreme&quot;];
	if(this.inf.expFactor&gt;20) mission.addMessageText(&quot;Friends gave you a hint that the risk for transactions is currently &quot;+friends[this.mc.hint]+&quot;.&quot;);
	mission.addMessageTextKey(&quot;VECTOR_QUESTION&quot;);
	this.mc.sumToOffer = 0;
	return;
}
this.showCPods = function()
{
	var lineAdd = 8-this.inf.cpod.length;
	if(this.inf.expFactor&lt;30) this.showScreen(1,&#39;VECTOR_OFFERE&#39;,null,null);
	else this.showScreen(1,&#39;VECTOR_OFFERF&#39;,null,null);
	var i = this.inf.cpod.length;
	while(i--){
		this.calculateSum(this.inf.cpod[i],2);
		mission.addMessageText(&quot;Cargo:\r\r&quot;+this.mc.CName+&quot; &quot;+this.mc.CTyp+&quot;.&quot;);
	}
	mission.addMessageTextKey(&quot;VECTOR_LINE&quot;);
	this.mc.sumCargo = Math.ceil(this.mc.sumToOffer);
	if(this.mc.sumCargo&lt;300) this.mc.sumCargo = 300;
	if(this.inf.expFactor&gt;=30){
		lineAdd--;
		mission.addMessageText(&quot;\r\r\r\r\r\r\r\rPossible deal: &quot;+this.mc.sumCargo+&quot; Credits.&quot;);
	}
	i = lineAdd;
	while(i--) mission.addMessageText(&quot;&quot;);
	let friends = [&quot;low&quot;,&quot;acceptable&quot;,&quot;average&quot;,&quot;medium&quot;,&quot;high&quot;,&quot;dangerous&quot;,&quot;extreme&quot;];
	if(this.inf.expFactor&gt;10) mission.addMessageText(&quot;Friends gave you a hint that the risk for transactions is currently &quot;+friends[this.mc.hint]+&quot;.&quot;);
	mission.addMessageTextKey(&quot;VECTOR_QUESTION&quot;);
	this.mc.sumToOffer = 0;
	return;
}
this.calculateSum = function(nam,typ)
{
	var factorPod = 1,currentName = nam.split(&#39; &#39;);
	if(!currentName[2]) currentName[2] = &#39;(unknown)&#39;;
	if(typ===1){
		switch(currentName[2]){
			case &#39;(Frood)&#39;: factorPod += 1.3; break;
			case &#39;(Geek)&#39;: factorPod += 1.6; break;
			case &#39;(Millionaire)&#39;: factorPod += 2; break;
			default: factorPod = 1.0;
		}
		this.mc.EName = currentName[0]+&#39; &#39;+currentName[1];
		this.mc.ETyp = currentName[2];
	} else {
		switch(currentName[2]){
			case &#39;(Collection)&#39;: factorPod += 1.1; break;
			case &#39;(Precious)&#39;: factorPod += 0.7; break;
			case &#39;(Heirloom)&#39;: factorPod += 0.3; break;
			default: factorPod += 0.2;
		}
		this.mc.CName = currentName[0]+&#39; &#39;+currentName[1];
		this.mc.CTyp = currentName[2];
	}
	var singleSum = Math.log(system.productivity*this.inf.expFactor*(factorPod*((1+system.government)*0.5)))*(5*this.inf.expFactor)*(1+Math.random());
	if(this.red&gt;2) singleSum /= Math.log(this.red);
	this.mc.sumToOffer += singleSum;
	return;
}
this.choiceEvaluation = function(choice)
{
	switch(choice){
		case &quot;VECTOR_FREE&quot;: this.mc.loop = 2; this.inf.epod = []; this.mc.react += 1; this.mc.sumPods = this.mc.sumPods*0.1667;
			if(this.inf.expFactor&gt;1) this.inf.expFactor -= 1; this.mc.screen--; if(this.inf.cpod.length) this.showCPods(); break;
		case&quot;VECTOR_SLAVE&quot;: this.mc.loop = 2; this.inf.epod = []; this.mc.react += 2; this.mc.sumPods = this.mc.sumPods*0.25;
			if(this.inf.expFactor&lt;100) this.inf.expFactor += 1; this.mc.screen--; if(this.inf.cpod.length) this.showCPods(); break;
		case &quot;VECTOR_ZRANSOM&quot;: this.mc.loop = 2; this.inf.epod = []; this.mc.react += 4;
			if(this.inf.expFactor&lt;97) this.inf.expFactor += 3; this.mc.screen--; if(this.inf.cpod.length) this.showCPods(); break;
		case &quot;VECTOR_LEAVE&quot;: this.mc.loop = 4; this.inf.cpod = []; this.mc.react += 8; this.mc.sumCargo = this.mc.sumCargo*0.1667;
			if(this.inf.expFactor&gt;1) this.inf.expFactor -= 1; this.mc.screen--; break;
		case &quot;VECTOR_SELL&quot;: this.mc.loop = 4; this.inf.cpod = []; this.mc.react += 16; this.mc.sumCargo = this.mc.sumCargo*0.25;
			if(this.inf.expFactor&lt;100) this.inf.expFactor += 1; this.mc.screen--; break;
		case &quot;VECTOR_ZDEAL&quot;: this.mc.loop = 4; this.inf.cpod = []; this.mc.react += 32;
			if(this.inf.expFactor&lt;98) this.inf.expFactor += 2; this.mc.screen--; break;
		default:
	}
	if(!this.inf.epod.length &amp;&amp; !this.inf.cpod.length &amp;&amp; !this.mc.screen &amp;&amp; this.mc.react) this.createReaction();
	return;
}
this.createReaction = function()
{
	this.slaunch = false;
	this.mc.sumPods = Math.ceil(this.mc.sumPods);
	this.mc.sumCargo = Math.ceil(this.mc.sumCargo);
	this.mc.sTotal = this.mc.sumPods+this.mc.sumCargo;
	this.calculateRisk();
	var chance = Math.random();
	if((this.mc.react&amp;1)) this.freeHim(chance);
	if((this.mc.react&amp;2)) this.sellAsSlave(chance);
	if((this.mc.react&amp;4)){this.mc.risk += 1.5; this.ransomNow(chance);}
	if((this.mc.react&amp;8)) this.giveBack(chance);
	if((this.mc.react&amp;16)) this.blackMarket(chance);
	if((this.mc.react&amp;32)){this.mc.risk += 1.3; this.makeDeal(chance);}
	this.finishedAndExit();
	return;
}
this.calculateRisk = function(simple)
{
	this.mc.risk = this.tempRisk;
	if(!simple) this.mc.risk *=(Math.log((this.mc.sumPods+this.mc.sumCargo)/32)*(1+system.government)*Math.random())*(this.inf.expFactor*0.01);
	else this.mc.risk = Math.ceil(this.mc.risk/(1+(system.government*Math.random())));
	return;
}
this.calculateRed = function(mode){
	switch(mode){
		case 1: this.mc.sumPods = Math.ceil(this.mc.sumPods/Math.log(this.red)); break;
		case 3: this.mc.sTotal = Math.ceil(this.mc.sTotal*Math.log(this.red)); break;
		case 5: this.mc.sumCargo = Math.ceil(this.mc.sumCargo/Math.log(this.red)); break;
	}
	return;
}
this.freeHim = function(chance)
{
	if(this.allowI) chance *= 0.7;
	if(chance&gt;(0.25-this.mc.rp*0.5)){
		this.mc.react &amp;= 56;
		this.mc.sumPods = 0;
		return;
	}
	this.mc.advice = expandDescription(&quot;[vector_free]&quot;)+&quot;\nWith this words &quot;+this.mc.EName+&quot; presents you\n&quot;+this.mc.sumPods+&quot;.0 Credits for his safe return.&quot;;
	player.credits += this.mc.sumPods;
	this.showScreen(3,null,1,5);
	return;
}
this.sellAsSlave = function(chance)
{
	if(this.allowI){
		if(this.mc.risk&gt;25 &amp;&amp; chance&gt;(0.90-this.mc.rp)){
			if(this.red&gt;3) this.calculateRed(3);
			this.mc.advice = &quot;GalCop Police fined you with &quot;+(Math.ceil(this.mc.sTotal*2.5))+&quot;.0 Credits\nfor slavery and added an entry to your ID.&quot;;
			this.calculatePenalty(this.mc.sTotal*2.5);
			this.mc.react = 64;
			player.ship.bounty += 3;
			this.showScreen(5,null,1,7);
			return;
		}
		if(chance&gt;0.45 &amp;&amp; chance&lt;(0.50+this.mc.rp*0.5) &amp;&amp; this.mc.risk &gt; 4){
			if(this.red&gt;3) this.calculateRed(3);
			this.mc.advice = &quot;GalCop Police fined you with &quot;+(Math.ceil(this.mc.sTotal*2))+&quot;.0 Credits\nfor intentional slavery.&quot;;
			this.calculatePenalty(this.mc.sTotal*2);
			this.mc.react = 64;
			this.showScreen(5,null,1,7);
			return;
		}
		if(chance&gt;0.25 &amp;&amp; chance&lt;0.40 &amp;&amp; this.mc.risk&gt;1){
			this.mc.react &amp;= 56;
			this.mc.advice = &quot;GalCop Police has confiscated your Pods.&quot;;
			this.mc.sumPods = 0;
			return;
		}
	} else chance -= Math.random();
	if(chance&lt;0.15){
		this.mc.react &amp;= 56;
		this.mc.sumPods = 0;
		this.mc.advice = &quot;The slaver tricked you and you lost your money.&quot;;
		return;
	}
	this.mc.advice = &quot;The slaver paid &quot;+this.mc.sumPods+&quot;.0 Credits for your special cargo.&quot;;
	return;
}
this.ransomNow = function(chance)
{
	if(this.allowI){
		if(this.mc.risk&gt;20 &amp;&amp; chance&gt;(0.90-this.mc.rp)){
			if(this.red&gt;3) this.calculateRed(3);
			this.mc.advice = &quot;GalCop Police fined you with &quot;+(Math.ceil(this.mc.sTotal*4))+&quot;.0 Credits\nfor intentional hijacking of &quot;+this.mc.EName+&quot;\nand added an entry to your ID.&quot;;
			this.calculatePenalty(this.mc.sTotal*4);
			this.mc.react = 64;
			player.ship.bounty += 3;
			this.showScreen(5,null,1,6);
			return;
		}
		if(chance&gt;0.25 &amp;&amp; chance&lt;0.40 &amp;&amp; this.mc.risk&gt;1){
			this.mc.react &amp;= 56;
			this.mc.advice = &quot;GalCop Police has confiscated your Pods.&quot;;
			this.mc.sumPods = 0;
			return;
		}
		if(chance&gt;0.45 &amp;&amp; chance&lt;(0.50+this.mc.rp*0.7) &amp;&amp; this.mc.risk&gt;3){
			if(this.red&gt;3) this.calculateRed(3);
			this.mc.advice = &quot;GalCop Police fined you with &quot;+(Math.ceil(this.mc.sTotal*3.2))+&quot;.0 Credits\nfor kidnapping &quot;+this.mc.EName+&quot;.&quot;;
			this.calculatePenalty(this.mc.sTotal*3.2);
			this.mc.react = 64;
			this.showScreen(5,null,1,7);
			return;
		}
	} else chance -= Math.random();
	if(chance&lt;0.15){
		this.mc.react &amp;= 56;
		this.mc.sumPods = 0;
		this.mc.advice = &quot;The family tricked you and you lost your money.&quot;;
		return;
	}
	this.mc.advice = &quot;The family paid to you: &quot;+this.mc.sumPods+&quot;.0 Credits.&quot;;
	return;
}
this.giveBack = function(chance)
{
	if(this.allowI) chance *= 1.1;
	if(chance&lt;(0.55+this.mc.rp*0.5)){
		this.mc.react &amp;= 7;
		this.mc.sumCargo = 0;
		return;
	}
	this.mc.advice = &quot;For returning the &quot;+this.mc.CName+&quot;\nwe&#39;ll award you &quot;+this.mc.sumCargo+&quot;.0 Credits.\n\nIt takes a few moments to transfer it\nto your account.&quot;;
	player.credits += this.mc.sumCargo;
	if(this.allowI) this.showScreen(4,null,1,4);
	else this.showScreen(7,null,1,4);
	return;
}
this.blackMarket = function(chance)
{
	if(this.allowI){
		if(this.mc.risk&gt;25 &amp;&amp; chance&lt;(0.10+this.mc.rp)){
			if(this.red&gt;3) this.calculateRed(3);
			this.mc.advice = &quot;GalCop Police fined you with &quot;+(Math.ceil(this.mc.sTotal*2.5))+&quot;.0 Credits\nfor intentional dealing with stolen goods\nand added an entry to your ID.&quot;;
			this.calculatePenalty(this.mc.sTotal*2.5);
			this.mc.react = 64;
			player.ship.bounty += 3;
			this.showScreen(5,null,1,6);
			return;
		}
		if(chance&gt;0.15 &amp;&amp; chance&lt;(0.20+this.mc.rp*0.5) &amp;&amp; this.mc.risk&gt;1){
			this.mc.react &amp;= 7;
			this.mc.advice += &quot;\nGalCop Police has confiscated your stolen goods.&quot;;
			this.mc.sumCargo = 0;
			return;
		}
		if(chance&gt;0.45 &amp;&amp; chance&lt;(0.60+this.mc.rp*0.8) &amp;&amp; this.mc.risk&gt;4){
			if(this.red&gt;3) this.calculateRed(3);
			this.mc.advice = &quot;GalCop Police fined you with &quot;+(Math.ceil(this.mc.sTotal*2))+&quot;.0 Credits\nfor dealing with stolen goods.&quot;;
			this.calculatePenalty(this.mc.sTotal*2);
			this.mc.react = 64;
			this.showScreen(5,null,1,7);
			return;
		}
	} else chance += Math.random();
	if(chance&gt;0.75){
		this.mc.react &amp;= 7;
		this.mc.sumCargo = 0;
		this.mc.advice += &quot;\nThe dealer tricked you and you lost your money.&quot;;
		return;
	}
	this.mc.advice += &quot;\nOn the blackmarket you&#39;ve got: &quot;+this.mc.sumCargo+&quot;.0 Credits.&quot;;
	return;
}
this.makeDeal = function(chance)
{
	if(this.allowI){
		if(this.mc.risk&gt;20 &amp;&amp; chance&lt;(0.10+this.mc.rp)){
			if(this.red&gt;3) this.calculateRed(3);
			this.mc.advice = &quot;GalCop Police fined you with &quot;+(Math.ceil(this.mc.sTotal*4.5))+&quot;.0 Credits\nfor attempted extortion and added an entry\nto your ID.&quot;;
			this.calculatePenalty(this.mc.sTotal*4.5);
			this.mc.react = 64;
			player.ship.bounty += 3;
			this.showScreen(5,null,1,6);
			return;
		}
		if(chance&gt;0.15 &amp;&amp; chance&lt;(0.20+this.mc.rp*0.5) &amp;&amp; this.mc.risk&gt;1){
			this.mc.react &amp;= 7;
			this.mc.advice += &quot;\nGalCop Police has confiscated your stolen goods.&quot;;
			this.mc.sumCargo = 0;
			return;
		}
		if(chance&gt;0.45 &amp;&amp; chance&lt;(0.50+this.mc.rp*0.8) &amp;&amp; this.mc.risk&gt;5){
			if(this.red&gt;3) this.calculateRed(3);
			this.mc.advice = &quot;GalCop Police fined you with &quot;+(Math.ceil(this.mc.sTotal*3))+&quot;.0 Credits\nfor attempted extortion.&quot;;
			this.calculatePenalty(this.mc.sTotal*3);
			this.mc.react = 64;
			this.showScreen(5,null,1,7);
			return;
		}
	} else chance -= Math.random();
	if(chance&lt;0.15){
		this.mc.react &amp;= 7;
		this.mc.sumCargo = 0;
		this.mc.advice = &quot;The assurance tricked you and you lost your money.&quot;;
		return;
	}
	this.mc.advice += &quot;\nThe assurance paid: &quot;+this.mc.sumCargo+&quot;.0 Credits.&quot;;
	return;
}
this.calculatePenalty = function(penalty)
{
	let p = Math.ceil(penalty);
	player.credits = Math.max(player.credits-p,30);
	if(this.mc){
		this.mc.sumPods = 0;
		this.mc.sumCargo = 0;
	}
	worldScripts.vector_pad.addToLogbook(&quot;BAD $&quot;+p);
	return;
}
this.finishedAndExit = function()
{
	if(!(this.mc.react&amp;64)){
		var a = this.mc.sumPods+this.mc.sumCargo;
		player.credits += a;
		if(a) worldScripts.vector_pad.addToLogbook(&quot;BAC $&quot;+(this.mc.sumPods+this.mc.sumCargo));
		else worldScripts.vector_pad.addToLogbook(&quot;BAE &quot;+system.name);
	}
	if(this.mc.advice){
		if(!this.adviceTimer) this.adviceTimer = new Timer(this,this.doAdviceTimer,0,3);
		else this.adviceTimer.start();
	}
	this.hasShown = true;
	this.dataRW();
	if(this.logging){
		for(let prop in this.mc) log(this.name,this.name+&#39;:&#39;+prop+&#39;: &#39;+this.mc[prop]);
		log(this.name,this.name+&quot;: hasShown:&quot;+this.hasShown+&quot; addChance:&quot;+this.addChance+&quot; pasState:&quot;+this.inf.pasState+&quot; expFactor:&quot;+this.inf.expFactor);
		log(this.name,this.name+&quot; mV.cpods:&quot;+this.inf.cpods+&quot; mV.epods:&quot;+this.inf.epods);
	}
	return;
}
this.doAdviceTimer = function()
{
	if(this.mc &amp;&amp; this.mc.advice!==&#39;&#39; &amp;&amp; this.excludedScreens.indexOf(guiScreen)===-1){
		player.commsMessage(this.mc.advice,8);
		this.mc.advice = &#39;&#39;;
		this.cleanAdvice();
	} else if(!player.ship.isValid) this.cleanAdvice();
}
this.shipWillLaunchFromStation = function()
{
	if(!this.myColor){
		this.myColor = [[0.4,1,0.4,1],null];
		if(worldScripts.OXPConfig) this.myColor = worldScripts.OXPConfig.genericUserColors[4];
		else if(missionVariables.genericUserColors) this.myColor = JSON.parse(missionVariables.genericUserColors)[4];
	}
	this.checkSun();
	this.cleanAdvice();
	this.red = 0;
	if(worldScripts.Cabal_Common_OXPStrength){
		var c = worldScripts.Cabal_Common_OXPStrength.checkOXPStrength.checkPower(player.ship);
		if(c&gt;320) this.red = Math.ceil(Math.log(c-320));
		else this.red = 0;
	} else if(player.score&gt;512) this.red = 6;
	if(this.ISSOrNova) return;
	++this.addChance;
	this.addChance &amp;= 7;
}
this.shipLaunchedFromStation = function(station)
{
	if(this.ISSOrNova) return;
	if(this.mc){
		if(this.mc.screen){
			player.commsMessage(&quot;You&#39;ve decided to reload your special cargo.&quot;);
			if(Math.random()&gt;(0.4/this.tempRisk) &amp;&amp; !this.revenge &amp;&amp; this.slaunch &amp;&amp; this.allowI) worldScripts.vector_insp.startInspection(station);
		}
		if(parseInt(this.inf.epods)&gt;0){
			if(this.inf.passengerState==1){
				this.setSound(1);
				player.commsMessage(&quot;Your passenger is still totally drunken.&quot;);
			} else if(this.inf.passengerState==2){
				this.setSound(2);
				player.commsMessage(&quot;Your passenger is still a little bit renitent.&quot;);
			}
		}
		if(this.hasShown &amp;&amp; this.mc.advice &amp;&amp; this.mc.advice!==&#39;&#39;) player.commsMessage(this.mc.advice,8);
		delete this.mc;
		this.slaunch = false;
	}
	if(this.revenge){
		system.addShips(&#39;vector_revenge1&#39;,this.revenge,player.ship.position,15000);
		delete this.revenge;
	}
}
this.isEnemy = function(entity){return(entity.isShip &amp;&amp; entity.isValid &amp;&amp; (entity.isPirate || entity.isPolice || entity.isTrader) &amp;&amp; entity.target &amp;&amp; entity.target==player.ship &amp;&amp; entity.missiles.length);}
this.alertConditionChanged = function(to)
{
	if(to===3 &amp;&amp; this.red&gt;2){
		var a = system.filteredEntities(this,this.isEnemy,player.ship,25600);
		if(!a || !a.length) return;
		var b = a[Math.floor(a.length*Math.random())];
		if(Math.random()&gt;0.8-(Math.log(this.red)*0.1)){
			b.fireMissile();
			b.awardEquipment(&#39;EQ_VECTOR_FUNA_MISSILE&#39;);
		}
	}
}
this.setSound = function(newSound)
{
	if(!this.audio) return;
	switch(newSound){
		case 1: this.mySound.sound = &#39;vector_passenger1.ogg&#39;; break;
		case 2: this.mySound.sound = &#39;vector_passenger2.ogg&#39;; break;
	}
	this.mySound.play();
	this.inf.passengerState = newSound;
	return;
}
this.showScreen = function(mtyp,moffer,advice,status)
{
	var ov = &quot;message&quot;;
	if(mtyp===1){
		var Title = &quot;Dark corner of &quot;+player.ship.dockedStation.displayName,Message = &#39;VECTOR_WELCOME&#39;,Pic = &#39;vector_cargobay&#39;+Math.floor(Math.random()*2)+&#39;.png&#39;,ov = &quot;tiled&quot;,Music = &#39;vector_opener.ogg&#39;;
		this.slaunch = true;
	} else {
		var Title = player.ship.dockedStation.displayName,Message = &#39;VECTOR_MESSAGE&#39;;
		switch(mtyp){
			case 2: var Pic = &#39;vector_message&#39;+Math.floor(Math.random()*2)+&#39;.png&#39;,Music = &#39;vector_message.ogg&#39;,Message = &#39;VECTOR_REVENGE&#39;; break;
			case 3: var Pic = &#39;vector_thanks&#39;+Math.floor(Math.random()*2)+&#39;.png&#39;,Music = &#39;vector_gift.ogg&#39;; break;
			case 4: var Pic = &#39;vector_official&#39;+Math.floor(Math.random()*2)+&#39;.png&#39;,Music = &#39;vector_gift.ogg&#39;; break;
			case 5: var Pic = &#39;vector_official&#39;+Math.floor(Math.random()*2)+&#39;.png&#39;,ov=&quot;caught&quot;,Music = &#39;vector_caught.ogg&#39;; break;
			case 6: var Pic = &#39;vector_thanks&#39;+Math.floor(Math.random()*2)+&#39;.png&#39;,Music = &#39;vector_gift.ogg&#39;,Message = &#39;VECTOR_PRESENT&#39;; break;
			case 7: var Pic = &#39;vector_inofficial&#39;+Math.floor(Math.random()*2)+&#39;.png&#39;,Music = &#39;vector_gift.ogg&#39;; break;}
		moffer = null;}
	if(!this.audio) Music = null;
	Message = expandMissionText(Message);
	if(mtyp==1){
		if(this.inf.expFactor&gt;1) Message += &quot; \f\f\f\f\f\f\f\f\f\f\f\f\f\f\f\f\f\f\f\f\f\f\f\f\fexp: &quot;+this.inf.expFactor+&quot;\n&quot;;
		else Message += &quot; \n------------------------------------------------------------\n&quot;;
	}
	ov = &quot;vector_ov&quot;+ov+&quot;.png&quot;;
	if(moffer) mission.runScreen({title:Title,message:Message,background:Pic,overlay:ov,choicesKey:moffer,music:Music},this.choiceEvaluation);
	else mission.runScreen({title:Title,message:Message,background:Pic,overlay:ov,music:Music});
	if(advice){
		mission.addMessageText(this.mc.advice);
		this.mc.advice = &#39;&#39;;
	}
	if(status){
		var i = status;
		while(i--){mission.addMessageText(&quot;&quot;);}
		mission.addMessageText(&quot;Name: \r\r\r\r\r&quot;+expandDescription(&quot;[commander_name]&quot;)+&quot;\r\r\r\r\rGC-ID: #&quot;+player.ship.entityPersonality);
		mission.addMessageText(&quot;Account:\r\r\r\r&quot;+player.credits.toFixed(1)+&quot;\nStatus:\r\r\r\r\r&quot;+player.legalStatus+&quot;\nClassification: \r&quot;+player.rank+&quot;\nRating:\r\r\r\r\r&quot;+player.score);
		if(this.inf.expFactor&lt;=1) b = &quot;none&quot;;
		else {
			var a = Math.floor(this.inf.expFactor*0.33),b = &#39;&#39;;
			while(a--){b += &#39;\b&#39;;}
		}
		mission.addMessageText(&quot;\nExperience: &quot;+b);
	}
	return;
}
this.shipWillEnterWitchspace = function()
{
	this.cleanAdvice();
}
this.shipWillExitWitchspace = function()
{
	this.checkSun();
	this.checkPodsTime();
	this.allowS = false;
	this.allowI = false;
	if(this.ISSOrNova) return;
	++this.addChance;
	this.addChance &amp;= 7;
	if((clock.days&amp;31)===this.addChance &amp;&amp; missionVariables.vector_arn &amp;&amp; missionVariables.vector_arn===&#39;UNLIMITED&#39;) system.addShipsToRoute(&#39;vector_arn&#39;,1,0.1,&#39;wp&#39;);
	if(!this.extraA || this.red&gt;6) return;
	if(this.logging) log(this.name,this.name+&quot;: Exp:&quot;+this.inf.expFactor+&quot; Ships:&quot;+system.countShipsWithRole(&#39;vector&#39;)+&quot; Gov:&quot;+system.government);
	if((system.ID&amp;this.addChance)===this.addChance &amp;&amp; system.government&gt;3 &amp;&amp; player.score&gt;200) system.addShipsToRoute(&#39;vector_richman&#39;,1,(this.inf.expFactor*0.01),&#39;wp&#39;);
}
this.equipmentDamaged = function(equipmentKey)
{
	if(equipmentKey===&#39;EQ_VECTOR_SCOOPS&#39;) player.ship.removeEquipment(&#39;EQ_VECTOR_SCOOPS&#39;);
}
this.checkSun = function()
{
	if(system.isInterstellarSpace || system.sun.isGoingNova || system.sun.hasGoneNova) this.ISSOrNova = true;
	else this.ISSOrNova = false;
	return;
}
this.checkPodsTime = function()
{
	if(player.score&gt;249) return;
	if((clock.days&amp;7)===7 &amp;&amp; this.extraA) missionVariables.vector_limiter = Math.max(1,this.red);
	else missionVariables.vector_limiter = 0;
	if(this.logging) log(this.name,this.name+&#39;: Pods:&#39;+missionVariables.vector_limiter+&#39; Day:&#39;+(clock.days&amp;7));
	return;
}
this.shipDied = function()
{
	this.cleanAdvice();
	this.mySound.stop();
}
this.cleanAdvice = function()
{
	if(this.adviceTimer){
		this.adviceTimer.stop();
		delete this.adviceTimer;
	}
	return;
}
/* Notification from OXPConfig2.x -&gt; change subscripts */
this.oxpcNotifyOnChange = function()
{
	if(worldScripts.vector_missionArn.init) worldScripts.vector_missionArn.init = true;
	return;
}
/* OXPConfig audio = sound and music, extraA = adding additional vector, extraB = advanced status display */
this.oxpcSettings = {
	Info: {Name:&quot;vector&quot;,Display:&quot;Vector&quot;,InfoB:&quot;Climb to the top of the &#39;business&#39; or be the good guy.&quot;},
	Bool0: {Name:&quot;logging&quot;,Def:false,Desc:&quot;Logging functions.&quot;},
	Bool1: {Name:&quot;audio&quot;,Def:true,Desc:&quot;Sound and music.&quot;},
	Bool2: {Name:&quot;extraA&quot;,Def:false,Desc:&quot;Additional Vectors.&quot;},
	Bool3: {Name:&quot;extraB&quot;,Def:true,Desc:&quot;Advanced Status Display.&quot;}
};
</pre></td>
                </tr>
                <tr>
                    <td valign="top">Scripts/vector_areidis.js</td>
                    <td><pre>&quot;use strict&quot;;
this.name = &quot;vector_areidis&quot;;
this.author = &quot;Svengali&quot;;
this.copyright = &quot;CC-by-nc-sa-3.0&quot;;
this.description = &quot;Areidis-Station handling&quot;;
this.version = &quot;1.7.2&quot;;

this.startUp = function()
{
	delete this.startUp;
	if(!worldScripts.Cabal_Common_Functions || typeof(worldScripts.Cabal_Common_Functions.Cabal_Common)===&#39;undefined&#39;){this.killSelf(&quot; -&gt; Cabal_Common_Library is missing.&quot;); return;}
	this.helper = new worldScripts.Cabal_Common_Functions.Cabal_Common();
	if(this.helper.internalVersion&lt;14){this.killSelf(&quot; -&gt; Cabal_Common_Functions is too old.&quot;); return;}
	delete this.killSelf;
	if(worldScripts.vector_pad.startUp) worldScripts.vector_pad.startUp();
	this.infos = worldScripts.vector_pad.padInfos.areidis;
}
this.killSelf = function(desc)
{
	if(desc!==1){player.consoleMessage(this.name+&quot; - Check your Latest.log.&quot;,10); log(this.name,this.name+&quot; - Shutting down.&quot;+desc);}
	for(prop in this){if(prop!==&#39;name&#39; &amp;&amp; prop!==&#39;version&#39; &amp;&amp; prop!==&#39;oolite_manifest_identifier&#39;) delete this[prop];}
	this.deactivated = true;
	return;
}
this.missionScreenOpportunity = function()
{
// Codes 1 = codecard, 2 who, 4 where, 8 password, 16 message, 32 decrypted, 64 visited, 128 disabled, 256 destroyed, 512 actor found, 1024 actor done
	if(!player.ship.docked) return;
	var st = player.ship.dockedStation;
	if(!st.hasRole(&#39;areidis&#39;)) return;
	this.infos = worldScripts.vector_pad.padInfos.areidis;
	if(this.walkDone){
		if(this.ar &amp;&amp; this.ar.cubeDone) this.cubesCB(true);
		else this.cubesCB(false);
	} else {
		this.ar = new Object({s:null,blocked:true,cubeDone:false});
		this.ar.swSound = new SoundSource;
		this.ar.swSound.loop = false;
		if(oolite.gameSettings.shaderEffectsLevel==&#39;SHADERS_OFF&#39; || oolite.gameSettings.shaderEffectsLevel==&#39;SHADERS_NOT_SUPPORTED&#39;) this.ar.sLevel = false;
		else this.ar.sLevel = true;
		// Change blocked...
		this.ar.blocked = st.script.autoDefense;
		// Set current #
		this.ar.areidis = this.infos.locations.indexOf(system.ID);
		var obj = {
			role:&quot;vector_areidiswalk_corridor&quot;,
			absolutePos:[0.1,0.1,250],
			ori:[1,0,0,0],
			briefing:[
				[1,&quot;repos&quot;,[0,2,[0,0,218]]],
				[2,&quot;repos&quot;,[0,3,[0,0,218]]],
				[3,&quot;prop&quot;,[0,-1,&quot;fuel&quot;,0.1,4,0,4]],
				[4,&quot;prop&quot;,[0,2,&quot;fuel&quot;,0.1,4,0,4]],
				[16,&quot;walk&quot;,[0,-1,6,10,0.15,2,0,0],&quot;Spooky. Looks like a major malfunction... or sabotage.&quot;,&quot;vector_stationwalk.ogg&quot;,3],
				[40,null,null,null,&quot;vector_stationdoors1.ogg&quot;],
				[41,&quot;prop&quot;,[0,-1,&quot;lightsActive&quot;,true,0,0,0]],
				[42,&quot;continue&quot;,[&quot;checkpoints&quot;,1]],
				[45,&quot;stopVelo&quot;,[0,-1]],
				[46,null,null,null,&quot;vector_stationdoors2.ogg&quot;],
				[47,&quot;mVelo&quot;,[0,0,12,0,-5.7,0,0,2,4]],
				[48,&quot;mVelo&quot;,[0,1,12,0,5.7,0,0,2,4]],
				[90,&quot;prop&quot;,[0,-1,&quot;lightsActive&quot;,false,0,0,0]],
				[97,&quot;walk&quot;,[0,-1,16,26.7,0.15,0.75,0,0],&quot;Hmm. Nobody&#39;s here.&quot;,&quot;vector_stationwalk.ogg&quot;,8],
				[121,null,null,&quot;What happened? There must have been a explosion.&quot;],
				[159,&quot;prop&quot;,[0,2,&quot;fuel&quot;,-0.05,4,4,4]],
				[160,&quot;stopSound&quot;],
				[161,&quot;bind&quot;,[0,2,8,3,0]],
				[162,&quot;rot&quot;,[0,3,2.5,0,0.015,0,0,1,1]],
				[163,&quot;rot&quot;,[0,2,2.5,0,0.018,0,0,1,1]],
				[164,&quot;zoom&quot;,[0,3,1.5,0.995,0,1,0.5]],
				[165,null,null,&quot;I just got here. This terminal seems to be active...&quot;,&quot;vector_walkdone.ogg&quot;],
				[196,&quot;zoom&quot;,[0,3,1,0.975,0,1,0]],
				[200,&quot;kill&quot;,&quot;VECTOR_AREIDIS_SKIP&quot;],
				[201,0]
			],
			title:player.ship.dockedStation.displayName,
			background:&quot;vector_areidiswalk.png&quot;,
			music:&quot;vector_areidis.ogg&quot;,
			callback:this.name,
			callbackf:&quot;choiceEval&quot;
		};
		if(this.ar.blocked || !missionVariables.vector_arn || missionVariables.vector_arn!==&#39;UNLIMITED&#39;) obj.callbackc = &#39;VECTOR_AREIDIS&#39;;
		else obj.callbackc = &#39;VECTOR_AREIDISB&#39;;
		// Set visited
		worldScripts.vector_pad.padInfos.areidis.codes[this.currentAreidis] |= 64;
		// Set where
		if(worldScripts.vector_pad.padInfos.areidis.display.where[this.currentAreidis]===&quot;Unknown&quot;) worldScripts.vector_pad.addToLogbook(&quot;DAA &quot;+system.name,&quot;DAB&quot;);
		worldScripts.vector_pad.padInfos.areidis.display.where[this.currentAreidis] = system.name;
		worldScripts.Cabal_Common_Briefing.startBriefing(obj);
	}
	return;
}
this.checkpoints = function(n)
{
	if(!missionVariables.vector_arn || missionVariables.vector_arn!==&#39;UNLIMITED&#39;) return(false);
	if(n===1){
		if(!this.ar.blocked) return(true);
		else mission.addMessageText(&quot;Hmm. The doors seem to be blocked. I should return later.&quot;);
	}
	return(false);
}
this.callCubes = function()
{
	if((worldScripts.vector_pad.padInfos.areidis.codes[this.currentAreidis]&amp;1)){
		var hint = worldScripts.vector_pad.decrypt(this.infos.code,this.infos.hints[this.currentAreidis].hint,this.infos.hints[this.currentAreidis].fib);
		var obj = new Object({who:this.name,code:this.infos.cubic[this.currentAreidis],ovl:this.infos.materials[this.currentAreidis],noovl:hint,image:&#39;vector_areidiswalk.png&#39;});
	} else var obj = new Object({who:this.name,code:this.infos.cubic[this.currentAreidis],ovl:0,noovl:0,image:&#39;vector_areidiswalk.png&#39;});
	worldScripts.vector_cubes.startCubes(obj);
	return;
}
this.choiceEval = function(choice){worldScripts.vector_areidis.delayChoice(choice); return;}
this.delayChoice = function(choice)
{
	switch(choice){
		case &#39;VECTOR_AREIDIS_EXIT&#39;:
			this.ar.swSound.stop();
			player.ship.launch();
			break;
		case &#39;VECTOR_AREIDIS_SKIP&#39;:
			this.ar.swSound.stop();
			this.callCubes();
			break;
		case &#39;VECTOR_AREIDIS_TERMINAL&#39;:
			this.callCubes();
			break;
		case &#39;VECTOR_AREIDIS_PAD&#39;:
			worldScripts.vector_pad.startPAD(&quot;codes&quot;);
			break;
	}
	return;
}
// Callback
this.cubesCB = function(state)
{
	if(state){
		mission.runScreen({title:player.ship.dockedStation.displayName,choicesKey:&#39;VECTOR_AREIDISD&#39;,background:&#39;vector_areidiswalk.png&#39;,music:&#39;vector_areidis.ogg&#39;},this.choiceEval);
		var a = worldScripts.vector_pad.padInfos.areidis.messages[this.currentAreidis];
		var b = this.helper.strScreenSubString(expandMissionText(a),70);
		mission.addMessageText(&quot;Messages to &#39;contacts&#39;:\n&quot;);
		mission.addMessageText(b);
		this.showSound(0,&#39;vector_areidismessage.ogg&#39;);
		this.ar.cubeDone = true;
		this.walkDone = true;
		worldScripts.vector_pad.padInfos.areidis.codes[this.currentAreidis] |= 16;
	} else mission.runScreen({title:player.ship.dockedStation.displayName,choicesKey:&#39;VECTOR_AREIDISC&#39;,background:&#39;vector_areidiswalk.png&#39;,music:&#39;vector_areidis.ogg&#39;},this.choiceEval);
	return;
}
this.showSound = function(loop,sound)
{
	if(loop) this.ar.swSound.loop = true;
	else this.ar.swSound.loop = false;
	this.ar.swSound.sound = sound;
	this.ar.swSound.play();
	return;
}
this.shipWillLaunchFromStation = function()
{
	this.walkDone = false;
	if(this.ar) delete this.ar;
}
</pre></td>
                </tr>
                <tr>
                    <td valign="top">Scripts/vector_areidisStation.js</td>
                    <td><pre>&quot;use strict&quot;;
this.name = &quot;vector_areidisStation&quot;;
this.author = &quot;Svengali&quot;;
this.copyright = &quot;CC-by-nd-sa-3.0&quot;;
this.description = &quot;Areidis station&quot;;
this.version = &quot;1.7.1&quot;;

this.shipSpawned = function()
{
	let c = [&#39;Alpha&#39;,&#39;Beta&#39;,&#39;Gamma&#39;,&#39;Delta&#39;,&#39;Epsilon&#39;];
	this.areidisIndex = c.indexOf(this.ship.name.substr(8,30));
	this.ship.subEntities[2].fuel = this.areidisIndex/10;
	this.prop = -0.35;
	this.autoDefense = true;
	this.emp = true;
	this.channel = false;
	this.ship.suppressArrivalReports = true;
	if(this.areidisIndex&gt;2) this.areidisComm = {display:&quot;Areidis&quot;,who:this.ship,ent:true,pID:this.ship.entityPersonality,callback:&quot;commCall&quot;,react:[{display:&quot;Send code&quot;},{display:&quot;Back&quot;}]};
	var buoy = 0;
	if(player.ship.equipmentStatus(&#39;EQ_VECTOR_AREIDIS_SCANNER&#39;)===&#39;EQUIPMENT_OK&#39;) buoy=2;
	else if(!this.areidisIndex) buoy=1;
	if(!buoy) return;
	if(!system.countShipsWithRole(&#39;vector_areidisBuoy&#39;)){
		if(buoy===1) system.addShips(&#39;vector_areidisBuoyA&#39;,1,this.ship.position.add([5000,5000,5000]));
		else system.addShips(&#39;vector_areidisBuoyB&#39;,1,this.ship.position.add([5000,5000,5000]));
	}
	if(buoy===2) player.commsMessage(&quot;Areidis station detetcted.&quot;);
	else player.commsMessage(&quot;Unknown architecture detetcted.&quot;);
}
this.shipTakingDamage = function(amount,whom,type)
{
	if(!player.ship.isValid) return;
	if(whom){
		if(whom.isPlayer){
			if(this.ship.subEntities.length&lt;(this.ship.subEntityCapacity-this.areidisIndex)){
				this.autoDefense = false;
				this.ship.lightsActive = false;
				if(!this.ship.subEntities[3].fuel &amp;&amp; !this.animTimer){
					this.prop *= -1.0;
					this.animTimer = new Timer(this,this.doAnimTimer,0,0.25);
				}
				if(this.ship.target) this.ship.target = null;
				return;
			}
		}
	}
	this.autoDefense = true;
	this.ship.lightsActive = true;
	if(this.ship.subEntities[3].fuel===7 &amp;&amp; !this.animTimer){
		this.prop *= -1.0;
		this.animTimer = new Timer(this,this.doAnimTimer,0,0.25);
	}
}
this.shipBeingAttackedByCloaked = function()
{
	if(!player.ship.isValid) return;
	if((this.areidisIndex&amp;1) &amp;&amp; this.emp){
		this.ship.spawnOne(&quot;EQ_VECTOR_EMP_MINE&quot;);
		this.emp = false;
	}
}
this.alertConditionChanged = this.getTarget = function(nC)
{
	if(!player.ship.isValid) return;
	if(player.ship.docked &amp;&amp; player.ship.dockedStation==this.ship){
		if(nC===3){
			var aSound = new SoundSource;
			aSound.sound = &#39;vector_stationalert.ogg&#39;;
			aSound.play();
			this.autoDefense = true;
			this.ship.lightsActive = true;
			if(!this.ship.subEntities[3].fuel &amp;&amp; !this.animTimer){
				this.prop *= -1.0;
				this.animTimer = new Timer(this,this.doAnimTimer,0,0.25);
			}
			return;
		}
	}
	var entList = this.findTheBadOnes();
	if(entList.length&gt;0){
		var enemy = entList[0];
		if(enemy.position.distanceTo(this.ship.position)&gt;22000) enemy = entList[Math.floor(Math.random()*entList.length)];
		if(enemy.isPlayer){
			if(!this.autoDefense) return;
			if(!this.channel){
				worldScripts.Cabal_Common_Comms.addToComm(this.myComm);
				this.channel = true;
			}
		}
		if(enemy.position.distanceTo(this.ship.position)&lt;22000){
			if(this.autoDefense){
				this.ship.target = enemy;
				this.ship.reactToAIMessage(&#39;TARGET_FOUND&#39;);
				this.ship.lightsActive = true;
				if(this.ship.subEntities[3].fuel===7 &amp;&amp; !this.animTimer){
					this.prop *= -1.0;
					this.animTimer = new Timer(this,this.doAnimTimer,0,0.25);
				}
				return;
			}
		}
	}
	if(this.ship.alertCondition&gt;2) this.ship.reactToAIMessage(&#39;COOL_DOWN&#39;);
	return;
}
this.isBad = function(entity)
{
	return(entity.isShip &amp;&amp; !entity.isBeacon &amp;&amp; !entity.isCargo &amp;&amp; (!entity.isWeapon || (entity.owner &amp;&amp; !entity.owner.hasRole(&#39;areidis&#39;))) &amp;&amp; entity.status==&#39;STATUS_IN_FLIGHT&#39; &amp;&amp; !entity.isCloaked);
}
this.findTheBadOnes = function()
{
	return system.filteredEntities(this,this.isBad,this.ship,25600);
}
this.shipDied = function()
{
	if(!player.ship.isValid) return;
	if(this.animTimer) this.animTimer.stop();
	if(worldScripts.vector_areidis.swSound) worldScripts.vector_areidis.swSound.stop();
	if(system.countShipsWithRole(&#39;vector_areidisBuoy&#39;)) system.shipsWithRole(&#39;vector_areidisBuoy&#39;)[0].explode();
}
this.doAnimTimer = function()
{
	this.ship.subEntities[3].fuel += this.prop;
	this.ship.fuel -= this.prop*1.3;
	if(!this.ship.subEntities[3].fuel || this.ship.subEntities[3].fuel===7){
		this.animTimer.stop();
		delete this.animTimer;
	}
}
this.commCall = function(action)
{
	switch(action){
		case 0:
			if(!this.ship.subEntities[3].fuel &amp;&amp; !this.animTimer){
				this.autoDefense = false;
				this.ship.lightsActive = false;
				this.prop *= -1.0;
				this.animTimer = new Timer(this,this.doAnimTimer,0,0.25);
				if(this.ship.target) this.ship.target = null;
				this.ship.commsMessage(&quot;Disabling selfdefense mode.&quot;);
			}
			if(this.ship.subEntities[3].fuel===7 &amp;&amp; !this.animTimer){
				this.autoDefense = true;
				this.ship.lightsActive = true;
				this.prop *= -1.0;
				this.animTimer = new Timer(this,this.doAnimTimer,0,0.25);
				this.ship.commsMessage(&quot;Enabling selfdefense mode.&quot;);
			}
			break;
	}
	return;
}
</pre></td>
                </tr>
                <tr>
                    <td valign="top">Scripts/vector_arn.js</td>
                    <td><pre>&quot;use strict&quot;;
this.name = &quot;vector_arn&quot;;
this.author = &quot;Svengali&quot;;
this.copyright = &quot;CC-by-nc-sa-3.0&quot;;
this.description = &quot;Richmans World&quot;;
this.version = &quot;1.7.1&quot;;

this.shipSpawned = this.shipExitedWormhole = function()
{
	if(system.sun.isGoingNova || system.sun.isGoneNova || system.mainStation.position.distanceTo(this.ship)&lt;35000) this.ship.switchAI(&#39;exitingTraderAI.plist&#39;);
	else if(this.ship.AI!==&#39;vector_arnAI.plist&#39;) this.ship.switchAI(&#39;vector_arnAI.plist&#39;);
	if(this.ship.escorts &amp;&amp; this.ship.escorts.length) this.passE = this.ship.escorts;
	this.counter = 0;
	this.enableP = true;
	if(missionVariables.vector_arn &amp;&amp; missionVariables.vector_arn===&#39;UNLIMITED&#39;){
		this.doArn = false;
		this.meetAgain = true;
		if(worldScripts.vector.logging) log(this.name,this.name+&#39;: Arn entered system.&#39;);
	} else {
		if(missionVariables.vector_arnmeet&lt;5) missionVariables.vector_arnmeet++;
		this.actArn = Math.floor(Math.random()*6)+2;
		this.doArn = true;
		if(worldScripts.vector.logging) log(this.name,this.name+&#39;: Arn entered system. act:&#39;+this.actArn+&#39; do:&#39;+this.doArn);
	}
}
this.shipLaunchedEscapePod = function(escapepod)
{
	if(this.ship.isValid) this.ship.displayName = &quot;Abandoned&quot;;
	if(escapepod) escapepod.script.breakoff = this.passE;
}
this.chattyPilot = function()
{
	if(!player.ship.isValid) return;
	var distance = Math.round(player.ship.position.distanceTo(this.ship));
	if(distance&lt;25000){
		if(this.meetAgain){
			this.ship.reactToAIMessage(&#39;CHATBOXC&#39;);
			return;
		}
		if(this.doArn &amp;&amp; this.counter===this.actArn){
			system.addShips(&#39;vector_arnForce&#39;,3,this.ship.position,12000);
			this.ship.fuel = 0;
			this.ship.AIState = &#39;PLAYER_DIE&#39;;
		} else {
			if(this.ship.escorts &amp;&amp; this.ship.escorts.length) this.passE = this.ship.escorts;
			if(this.doArn &amp;&amp; (this.counter&amp;1)) this.ship.reactToAIMessage(&#39;CHATBOXB&#39;);
			else this.ship.reactToAIMessage(&#39;CHATBOX&#39;);
			if(this.enableP){worldScripts.vector_pad.seenArn = true; delete this.enableP;}
		}
		++this.counter;
	}
	return;
}
</pre></td>
                </tr>
                <tr>
                    <td valign="top">Scripts/vector_benus.js</td>
                    <td><pre>&quot;use strict&quot;;
this.name = &quot;vector_benus&quot;;
this.author = &quot;Svengali&quot;;
this.copyright = &quot;CC-by-nd-sa-3.0&quot;;
this.description = &quot;Benus Triadon&quot;;
this.version = &quot;1.7.2&quot;;

this.shipSpawned = function()
{
	if(worldScripts.vector.logging) log(this.name,this.name+&#39;: Benus entered system. Uh, trouble.&#39;);
	if(this.ship.primaryRole===&quot;trader&quot;){this.ship.setScript(&quot;oolite-default-ship-script.js&quot;); this.ship.switchAI(&quot;route1traderAI.plist&quot;); return;}
	this.commChannel = {display:&quot;Benus Triadon&quot;,who:this.ship,ent:true,pID:this.ship.entityPersonality,callback:&quot;commCall&quot;,
		react:[{display:&quot;Hail&quot;},{display:&quot;Direction&quot;},{display:&quot;Safety&quot;},{display:&quot;Back&quot;}]};
	this.pflag = false;
	this.aflag = false;
	this.sflag = false;
	this.chatter = 1;
	this.ship.primaryRole===&#39;trader&#39;;
	this.ov = new worldScripts.vector_news.VectorOV();
	this.ov.addCharacterOVOff(&#39;14&#39;);
	if(Math.random()&gt;0.5){
		system.addShips(&#39;thargoid&#39;,2,this.ship.position,25000.0);
		player.commsMessage(&quot;Mayday! Thargoids are attacking. Position marked (X). Send help!&quot;);
		this.mark = system.addShips(&#39;vector_mark&#39;,1,this.ship.position.add([0,0,300]),100)[0];
	}
	this.bla = [&quot;Oh boy - good work. Please stay close.&quot;,
		&quot;Good work! Please stay close, we need some support.&quot;,
		&quot;Please escort us. I can smell that there are still some of them.&quot;,
		&quot;Rock on! Please stay close.&quot;];
	return;
}
this.shipBeingAttacked = function(whom)
{
	if(!player.ship.isValid) return;
	if(whom &amp;&amp; whom.isPlayer){
		if(!this.pflag &amp;&amp; this.chatter&gt;0) worldScripts.Cabal_Common_Comms.removeFromComm(this.commChannel);
		this.chatter = 0;
		this.pflag = true;
		if(this.mark &amp;&amp; this.mark.isValid) this.mark.explode();
	} else {
		this.aflag = true;
		if(this.chatter==1 &amp;&amp; this.ship.position.distanceTo(player.ship.position)&lt;23000){
			this.ship.displayName = &quot;Benus Triadon&quot;;
			this.ov.addOv(1,&#39;07&#39;,null,null,1);
			worldScripts.Cabal_Common_Comms.addToComm(this.commChannel);
			this.chatbox(1);
			this.chatter = 2;
			var cols = worldScripts.vector.myColor;
			this.ship.scannerDisplayColor1 = cols[0];
			this.ship.scannerDisplayColor2 = cols[1];
			if(this.mark &amp;&amp; this.mark.isValid) this.mark.explode();
		}
	}
	return;
}
this.shipEnergyBecameFull = this.shipTargetDestroyed = this.shipTargetLost = function()
{
	if(!this.ship.isPiloted || this.ship.isDerelict || !player.ship.isValid) return;
	var enemy = this.getArea();
	if(enemy.length){
		for(let i=0;i&lt;enemy.length;i++){
			if(enemy[i].isValid){
				this.aflag = true;
				this.ship.target = enemy[i];
				this.ship.reactToAIMessage(&quot;TARGET_FOUND&quot;);
				break;
			}
		}
	} else {
		this.aflag = false;
		this.placeNewSet();
		if(this.ship.position.distanceTo(player.ship.position)&lt;23000 &amp;&amp; this.chatter==2) this.chatter = 3;
	}
	return;
}
this.isOuch = function(entity)
{
	return(entity.isShip &amp;&amp; !entity.isPlayer &amp;&amp; !entity.hasSuspendedAI &amp;&amp; !entity.isCargo &amp;&amp; !entity.isRock &amp;&amp; !entity.isDerelict &amp;&amp; (entity.bounty&gt;0 || entity.primaryRole===&#39;pirate&#39; || (entity.target==this.ship &amp;&amp; entity.group!=this.ship.group)));
}
this.getArea = function()
{
	return system.filteredEntities(this,this.isOuch,this.ship,25600);
}
this.shipEnteredStationAegis = this.shipEnteredPlanetaryVicinity = function()
{
	if(!player.ship.isValid) return;
	if(this.ship.position.distanceTo(player.ship.position)&lt;23000){
		if(this.chatter&gt;1){
			if(this.chatter!=2) this.chatbox(4);
			this.placeNewSet();
			this.ship.reactToAIMessage(&quot;SPEED_UP_MORE&quot;);
		}
	}
	return;
}
this.shipWillDockWithStation = function()
{
	if(!player.ship.isValid) return;
	if(this.mark &amp;&amp; this.mark.isValid) this.mark.explode();
	worldScripts.Cabal_Common_Comms.removeFromComm(this.commChannel);
	if(this.ship.position.distanceTo(player.ship.position)&lt;23000){
		if(!player.ship.docked){
			if(this.chatter&gt;1){
				this.chatbox(3);
				worldScripts.vector_pad.addToLogbook(&quot;AAB &quot;+system.name,&quot;AAC&quot;);
				worldScripts.vector_pad.showBenus = true;
			}
		} else player.commsMessage(&quot;Benus here. You should have waited for me. Next time then...&quot;);
	}
	return;
}
this.shipDied = this.shipLaunchedEscapePod = function()
{
	if(!player.ship.isValid) return;
	player.commsMessage(&quot;Aaargh..&quot;);
	if(this.mark &amp;&amp; this.mark.isValid) this.mark.explode();
	worldScripts.Cabal_Common_Comms.removeFromComm(this.commChannel);
	return;
}
this.chatbox = function(m)
{
	if(!player.ship.isValid || this.pflag) return;
	if(typeof(m)===&#39;object&#39; &amp;&amp; (this.ship.position.distanceTo(player.ship.position)&gt;23000 || this.chatter&lt;2)) return;
	if(m){
		var speak,sound;
		if(typeof(m)===&#39;object&#39;){
			if(this.chatter&gt;1) speak = &quot;Uff. Station reached. Requesting slot now. Wait until I&#39;m docked, ok?&quot;;
		} else {
			switch(m){
				case 1: speak = &quot;Over here, Commander. Please help!&quot;; sound = &#39;[vector_benusA]&#39;; break;
				case 3: this.ov.addOv(null,&#39;14&#39;,1,null,&quot;Will meet you in a minute on the bar.&quot;); break;
				case 4: speak = &quot;Yeeha. Only a quick hop now. We should have some drinks together.&quot;; break;
			}
		}
	} else {
		if(this.ship.position.distanceTo(player.ship.position)&gt;23000 || this.chatter&lt;2 || this.aflag) return;
		if(this.bla.length){speak = this.bla[0]; this.bla.shift();}
	}
	if(speak){
		if(sound) this.ov.addOv(null,&#39;14&#39;,1,null,{ent:this.ship,message:speak},sound);
		else this.ov.addOv(null,&#39;14&#39;,1,null,{ent:this.ship,message:speak},&#39;[vector_benusB]&#39;);
	}
	return;
}
this.placeNewSet = function()
{
	if(this.mark &amp;&amp; this.mark.isValid) this.mark.explode();
	if(!this.sflag &amp;&amp; !this.pflag){
		this.sflag = true;
		var newSet = [{display:&quot;Hail&quot;},{display:&quot;Direction&quot;},{display:&quot;Safety&quot;},{display:&quot;Help&quot;},{display:&quot;Speed up&quot;},{display:&quot;Back&quot;}];
		worldScripts.Cabal_Common_Comms.changeChoicesComm(this.commChannel.pID,newSet);
		this.commChannel.react = newSet;
	}
	return;
}
this.commCall = function(action)
{
	if(this.pflag || this.ship.position.distanceTo(player.ship.position)&gt;25000) return;
	var m=null;
	switch(action){
		case 0: if(this.aflag) m = &#39;[vector_commhailB]&#39;; else m = &#39;[vector_commhailA]&#39;; break;
		case 1: if(this.aflag) m = &#39;[vector_commdirectionB]&#39;; else m = &#39;[vector_commdirectionA]&#39;; break;
		case 2: if(this.aflag) m = &#39;[vector_commsafetyB]&#39;; else m = &#39;[vector_commsafetyA]&#39;; break;
		case 3: 
			if(this.aflag) m = &#39;[vector_commhelpC]&#39;;
			else {
				if(player.ship.hasHostileTarget || player.alertCondition===3){
					if(player.ship.target &amp;&amp; player.ship.target!=this.ship &amp;&amp; player.ship.target.bounty){
						this.ship.target = player.ship.target;
						this.ship.reactToAIMessage(&quot;ATTACKED&quot;);
					}
					m = &#39;[vector_commhelpB]&#39;;
				} else m = &#39;[vector_commhelpD]&#39;;
			}
			break;
		case 4:
			if(player.ship.maxSpeed&gt;340 &amp;&amp; !this.aflag){
				if(this.ship.position.distanceTo(system.mainStation.position)&gt;25000){
					m = &#39;[vector_commbenusspeedA]&#39;;
					if(!this.ship.fuel) this.ship.fuel+=1;
					this.ship.reactToAIMessage(&quot;SPEED_UP_MORE&quot;);
					break;
				}
			}
			m = &#39;[vector_commbenusspeedB]&#39;;
			break;
	}
	if(m) this.ship.commsMessage(expandDescription(m));
	return;
}
</pre></td>
                </tr>
                <tr>
                    <td valign="top">Scripts/vector_cpodD.js</td>
                    <td><pre>&quot;use strict&quot;;
this.name = &quot;vector_cpodD&quot;;
this.author = &quot;Svengali&quot;;
this.copyright = &quot;CC-by-nc-sa-3.0&quot;;
this.description = &quot;Special Pod D&quot;;
this.version = &quot;1.7.1&quot;;

this.shipSpawned = function()
{
	this.cargoSwitch = (this.ship.entityPersonality*this.ship.spawnTime)&amp;15;
	var podname = [&quot;Black Pearls (Collection)&quot;,&quot;Jade Elephant (Collection)&quot;,&quot;Diamond Collection (Collection)&quot;,&quot;Unknown Goods (Stolen)&quot;,
		&quot;Black Pearls (Precious)&quot;,&quot;Jade Elephant (Precious)&quot;,&quot;Diamond Collection (Precious)&quot;,&quot;Unknown Goods (Stolen)&quot;,
		&quot;Black Pearls (Heirloom)&quot;,&quot;Jade Elephant (Heirloom)&quot;,&quot;Diamond Collection (Heirloom)&quot;,&quot;Unknown Goods (Stolen)&quot;,
		&quot;Black Pearls (Unknown)&quot;,&quot;Jade Elephant (Unknown)&quot;,&quot;Diamond Collection (Unknown)&quot;,&quot;Unknown Goods (Unknown)&quot;];
	this.ship.name = podname[this.cargoSwitch];
	this.ship.displayName = podname[this.cargoSwitch];
	if(player.score&lt;250) missionVariables.vector_limiter = 0;
	this.ov = new worldScripts.vector_news.VectorOV();
	delete this.shipSpawned;
}
this.shipWasScooped = function(scooper)
{
	if(scooper.isPlayer){
		var limit = 1;
		if(player.ship.equipmentStatus(&#39;EQ_VECTOR_SCOOPS&#39;)===&#39;EQUIPMENT_OK&#39;) limit = 5;
		if(worldScripts.vector_pad.padInfos.generic.cpods&lt;limit){
			var makeTrap = (this.ship.spawnTime*3)&amp;15;
			if(this.cargoSwitch===makeTrap){
				player.commsMessage(&quot;TRAP: Fuel throwing off.&quot;);
				player.ship.fuelLeakRate = 0.2;
				return;
			}
			worldScripts.vector_pad.padInfos.generic.cpods++;
			player.commsMessage(&quot;Scooped: &quot;+this.ship.displayName);
			if(limit===5) this.ov.addOv(1,&#39;02&#39;,1,null,null);
			worldScripts.vector_pad.padInfos.generic.cpod.push(this.ship.name);
		} else player.commsMessage(&quot;Your special cargo bay is full: &quot;+this.ship.displayName+&quot; crashed.&quot;);
	}
}
</pre></td>
                </tr>
                <tr>
                    <td valign="top">Scripts/vector_cubes.js</td>
                    <td><pre>&quot;use strict&quot;;
this.name = &quot;vector_cubes&quot;;
this.author = &quot;Svengali&quot;;
this.copyright = &quot;CC-by-nd-sa-3.0&quot;;
this.description = &quot;Cubes hehe&quot;;
this.version = &quot;1.7.1&quot;;

/* The passed object must have who, code, ovl, noovl and image!
worldScripts.vector_cubes.startCubes({who:null,code:22,ovl:null,noovl:null,image:&#39;vector_areidiswalk.png&#39;})
*/
this.startCubes = function(obj)
{
	if(!player.ship.docked || !obj) return(false);
	this.cube = new Object({
		cb:obj.who,
		code:obj.code,
		ovl:obj.ovl,
		noovl:obj.noovl,
		image:obj.image,
		init:true,
		rotate:0,
		rotloop:0,
		done:false,
		snd:new SoundSource,
		oris:[[1,0,0,0],[0,1,0,0],[0,0,1,0],[0,0,0,1],[1,0,0,1],[1,1,0,0],[1,0,1,0],[1,0,0,0]],
		posA:[[0,0,0],[-28,-70,-290],[0,-70,-290],[28,-70,-290],[-28,-42,-290],[0,-42,-290],[28,-42,-290],[-28,-15,-290],[0,-15,-290],[28,-15,-290]]
	});
	if(!this.curCubes){
		this.curCubes = new Object({
			active:1,
			1:this.cube.oris[Math.floor(Math.random()*this.cube.oris.length)],
			2:this.cube.oris[Math.floor(Math.random()*this.cube.oris.length)],
			3:this.cube.oris[Math.floor(Math.random()*this.cube.oris.length)],
			4:this.cube.oris[Math.floor(Math.random()*this.cube.oris.length)],
			5:this.cube.oris[Math.floor(Math.random()*this.cube.oris.length)],
			6:this.cube.oris[Math.floor(Math.random()*this.cube.oris.length)],
			7:this.cube.oris[Math.floor(Math.random()*this.cube.oris.length)],
			8:this.cube.oris[Math.floor(Math.random()*this.cube.oris.length)],
			9:this.cube.oris[Math.floor(Math.random()*this.cube.oris.length)]
		});
	}
	this.cube.snd.sound = &#39;vector_entercode.ogg&#39;;
	if(oolite.gameSettings.shaderEffectsLevel==&#39;SHADERS_OFF&#39; || oolite.gameSettings.shaderEffectsLevel==&#39;SHADERS_NOT_SUPPORTED&#39;) this.cube.sLevel = false;
	else this.cube.sLevel = true;
	this.cubeRot = new Timer(this,this.doCubeRot,0,0.25);
	this.cubeRot.stop();
	this.showCubes();
	return(true);
}
this.showCubes = function()
{
	if(!player.ship.docked) return;
	mission.runScreen({title:player.ship.dockedStation.displayName,choicesKey:&#39;VECTOR_CUBESA&#39;,model:&#39;vector_cubes&#39;,spinModel:false,background:this.cube.image,music:&#39;vector_cubesm.ogg&#39;},this.cubeEval);
	mission.displayModel.orientation = [1,0,0,0];
	mission.displayModel.position = [0,40,280];
	for(let i=1;i&lt;10;i++) mission.displayModel.subEntities[i].orientation = this.curCubes[i];
	// Set flasher
	mission.displayModel.subEntities[10].position = this.cube.posA[this.curCubes.active];
	mission.displayModel.subEntities[10].lightsActive = true;
	mission.displayModel.fuel = 7;
	// Init
	if(this.cube.init){
		if(this.cube.ovl || this.cube.noovl) mission.addMessageText(&quot;Damn, I need a code.\f\f\f\f\f\f\f\f\f\f\f\f\f\f\f\f\f\f\f\f\f\fPAD connected.&quot;);
		else mission.addMessageText(&quot;Damn, I need a code.&quot;);
		this.cube.init = false;
	} else {
		mission.addMessageText(&quot;&quot;);
		this.cube.snd.sound = &#39;vector_cubes.ogg&#39;;
	}
	this.cube.snd.play();
	// Set overlay or texthint
	if(this.cube.sLevel &amp;&amp; this.cube.ovl) mission.displayModel.subEntities[0].setMaterials({&quot;vector_modelview.png&quot;:{diffuse_map:&quot;vector_cubeA.png&quot;}},this.cube.ovl);
	else if(this.cube.noovl){
		mission.displayModel.subEntities[0].setMaterials({&quot;vector_modelview.png&quot;:{diffuse_map:&quot;vector_codes_ns.png&quot;}});
		mission.addMessageText(&quot;\n\n\n\n\n\n\n\n\n\n\n\n\n&quot;+this.cube.noovl);
		mission.displayModel.subEntities[0].position = [180,80,400];
		mission.displayModel.subEntities[0].orientation = [1,0,0,0];
	}
	var l = this.getLock();
	this.checkLock(l);
	return;
}
this.cubeEval = function(choice){worldScripts.vector_cubes.delayChoice(choice); return;}
this.delayChoice = function(choice)
{
	switch(choice){
		case &#39;VECTOR_CUBENEXT&#39;:
			if(this.cube.rotloop) this.abortRot();
			this.cube.rotloop = 0;
			this.cube.rotate = 0;
			this.curCubes.active++;
			if(this.curCubes.active&gt;9) this.curCubes.active = 1;
			this.showCubes();
			break;
		case &#39;VECTOR_CUBEPREVIOUS&#39;:
			if(this.cube.rotloop) this.abortRot();
			this.cube.rotloop = 0;
			this.cube.rotate = 0;
			this.curCubes.active--;
			if(this.curCubes.active&lt;1) this.curCubes.active = 9;
			this.showCubes();
			break;
		case &#39;VECTOR_CUBEROTX&#39;:
			if(this.cube.rotloop) this.abortRot();
			this.cube.rotloop = 0;
			this.cube.rotate = 1;
			if(!this.cubeRot.isRunning) this.cubeRot.start();
			this.showCubes();
			break;
		case &#39;VECTOR_CUBEROTY&#39;:
			if(this.cube.rotloop) this.abortRot();
			this.cube.rotloop = 0;
			this.cube.rotate = 2;
			if(!this.cubeRot.isRunning) this.cubeRot.start();
			this.showCubes();
			break;
		case &#39;VECTOR_CUBEROTZ&#39;:
			if(this.cube.rotloop) this.abortRot();
			this.cube.rotloop = 0;
			this.cube.rotate = 3;
			if(!this.cubeRot.isRunning) this.cubeRot.start();
			this.showCubes();
			break;
		case &#39;VECTOR_CZQUIT&#39;:
			if(this.cube.cb){ // Leaves the option of missionScreenOpportunity if not used
				if(this.cube.done) worldScripts[this.cube.cb].cubesCB(true);
				else worldScripts[this.cube.cb].cubesCB(false);
			}
			break;
	}
	return;
}
this.abortRot = function()
{
	mission.displayModel.subEntities[this.curCubes.active].orientation = this.rotEnd;
	this.curCubes[this.curCubes.active] = this.rotEnd;
	this.correctRot();
	return;
}
this.getLock = function()
{
	var lock = 0,pri = [3,5,7,11,13,17,19,23,29,31,37,41,43,47,53,59,61];
	for(var i=1;i&lt;10;i++){
		let a = pri[i];
		let b = mission.displayModel.subEntities[i].orientation.vectorUp();
		if(b.x&gt;0) lock += b.x*11*a;
		if(b.y&gt;0) lock += b.y*13*a;
		if(b.z&gt;0) lock += b.z*17*a;
		b = mission.displayModel.subEntities[i].orientation.vectorRight();
		if(b.x&gt;0) lock += b.x*19*a;
		if(b.y&gt;0) lock += b.y*23*a;
		if(b.z&gt;0) lock += b.z*29*a;
		b = mission.displayModel.subEntities[i].orientation.vectorForward();
		if(b.x&gt;0) lock += b.x*31*a;
		if(b.y&gt;0) lock += b.y*37*a;
		if(b.z&gt;0) lock += b.z*41*a;
	}
	lock = Math.floor(lock);
	//log(this.name,this.name+&quot;: code:&quot;+lock);
	return(lock);
}
this.checkLock = function(lock)
{
	if(lock===this.cube.code){
		this.cube.done = true;
		this.cube.rotloop = 0;
		mission.displayModel.lightsActive = false;
		mission.displayModel.velocity = [0,0,50];
		mission.displayModel.fuel = 0;
		this.cube.snd.sound = &#39;vector_verified.ogg&#39;;
		this.cube.snd.play();
		if(!this.cubeRot.isRunning) this.cubeRot.start();
	}
	return;
}
this.doCubeRot = function()
{
	if(!player.ship.docked){this.cubeRot.stop(); return;}
	if(this.cube.done){
		if(this.cube.rotloop&gt;=10){
			this.cubeRot.stop();
			if(this.cube.cb){ // Leaves the option of missionScreenOpportunity if not used
				worldScripts[this.cube.cb].cubesCB(true);
			}
		}
		this.cube.rotloop++;
		return;
	}
	if(!this.cube.rotate){this.cubeRot.stop(); return;}
	var a = new Quaternion(mission.displayModel.subEntities[this.curCubes.active].orientation);
	// Get end point
	if(!this.cube.rotloop){
		var b = a;
		for(var e=0;e&lt;10;e++){
			switch(this.cube.rotate){
				case 1: b = b.rotateX(0.1566); break;
				case 2: b = b.rotateY(0.1566); break;
				case 3: b = b.rotateZ(0.1566); break;
			}
		}
		this.rotEnd = new Quaternion(b);
	}
	// Do rotation
	this.cube.rotloop++;
	switch(this.cube.rotate){
		case 1: a = a.rotateX(0.1566); break;
		case 2: a = a.rotateY(0.1566); break;
		case 3: a = a.rotateZ(0.1566); break;
	}
	mission.displayModel.subEntities[this.curCubes.active].orientation = a;
	this.curCubes[this.curCubes.active] = this.rotEnd;
	// End rotation
	if(this.cube.rotloop==10){
		this.cube.rotate = 0;
		this.cube.rotloop = 0;
		this.cubeRot.stop();
		delete this.rotEnd;
		this.correctRot();
		var l = this.getLock();
		this.checkLock(l);
	}
	return;
}
this.correctRot = function()
{
	var a = mission.displayModel.subEntities[this.curCubes.active].orientation;
	a.w = this.getCorrected(a.w);
	a.x = this.getCorrected(a.x);
	a.y = this.getCorrected(a.y);
	a.z = this.getCorrected(a.z);
	mission.displayModel.subEntities[this.curCubes.active].orientation = a;
	this.curCubes[this.curCubes.active] = a;
	return;
}
this.getCorrected = function(e)
{
	if(e &gt; 0.9) e = 1;
	if(e &gt; 0.6 &amp;&amp; e &lt; 0.8) e = 0.707107;
	if(e &gt; 0.4 &amp;&amp; e &lt; 0.6) e = 0.5;
	if(e &gt;-0.1 &amp;&amp; e &lt; 0.1) e = 0.0;
	if(e &gt;-0.6 &amp;&amp; e &lt;-0.4) e = -0.5;
	if(e &gt;-0.8 &amp;&amp; e &lt;-0.6) e = -0.707107;
	if(e &lt;-0.9) e = -1;
	return(e);
}
</pre></td>
                </tr>
                <tr>
                    <td valign="top">Scripts/vector_empmine.js</td>
                    <td><pre>&quot;use strict&quot;;
this.name = &quot;vector_empmine&quot;;
this.author = &quot;Svengali&quot;;
this.copyright = &quot;CC-by-nc-sa-3.0&quot;;
this.description = &quot;Boooh&quot;;
this.version = &quot;1.7.1&quot;;

this.goBoom = function()
{
	this.ship.spawn(&quot;vector_effect_emp&quot;,1);
	let targets = system.filteredEntities(this,this.badBoys,this.ship,25000);
	if(targets){
		for(let i=0;i&lt;targets.length;i++){
			if(targets[i].isPlayer){
				var s = new SoundSource;
				s.sound = &quot;vector_empbang.ogg&quot;;
				s.play();
			}
			if(targets[i].isCloaked &amp;&amp; targets[i].equipmentStatus(&#39;EQ_CLOAKING_DEVICE&#39;)===&#39;EQUIPMENT_OK&#39;){
				targets[i].setEquipmentStatus(&#39;EQ_CLOAKING_DEVICE&#39;,&#39;EQUIPMENT_DAMAGED&#39;);
				if(targets[i].isPlayer){
					player.commsMessage(&quot;Hit by EMP!&quot;);
				}
			}
		}
	}
}
this.badBoys = function(entity)
{
	return(entity.isValid &amp;&amp; entity.isShip);
}
</pre></td>
                </tr>
                <tr>
                    <td valign="top">Scripts/vector_epodA.js</td>
                    <td><pre>&quot;use strict&quot;;
this.name = &quot;vector_epodA&quot;;
this.author = &quot;Svengali&quot;;
this.copyright = &quot;CC-by-nc-sa-3.0&quot;;
this.description = &quot;Special Escapepod&quot;;
this.version = &quot;1.7.1&quot;;

this.shipSpawned = function()
{
	this.ship.switchAI(&#39;vector_epodAI.plist&#39;);
	var podname = expandDescription(&#39;%N&#39;)+&#39; &#39;+randomName();
	this.ship.name = podname;
	this.ship.displayName = podname;
	if(this.ship.owner &amp;&amp; !this.ship.owner.isPlayer){
		this.ship.displayName = podname+this.ship.owner.scriptInfo.vector_epodName;
		this.ship.owner.switchAI(&#39;vector_wreckAI.plist&#39;);
	}
	if(player.score&lt;250) missionVariables.vector_limiter = 0;
	this.ov = new worldScripts.vector_news.VectorOV();
	delete this.shipSpawned;
}
this.shipWasScooped = function(scooper)
{
	if(scooper.isPlayer){
		var limit = 1;
		if(player.ship.equipmentStatus(&#39;EQ_VECTOR_SCOOPS&#39;)===&#39;EQUIPMENT_OK&#39;) limit = 5;
		if(worldScripts.vector_pad.padInfos.generic.epods&lt;limit){
			worldScripts.vector_pad.padInfos.generic.epods++;
			if(limit===5) this.ov.addOv(1,&#39;02&#39;,1,null,null);
			worldScripts.vector_pad.padInfos.generic.epod.push(this.ship.displayName);
			switch((this.ship.entityPersonality&amp;7)){
				case 1: worldScripts.vector.setSound(1); player.commsMessage(&#39;Your new passenger &#39;+this.ship.name+&#39; is totally drunken.&#39;); break;
				case 2: worldScripts.vector.setSound(2); player.commsMessage(&#39;Your new passenger &#39;+this.ship.name+&#39; is a little bit renitent.&#39;); break;
			}
		} else player.commsMessage(&#39;Your special pod bay is full: &#39;+this.ship.displayName+&#39; crashed.&#39;);
	}
}
</pre></td>
                </tr>
                <tr>
                    <td valign="top">Scripts/vector_epodHintA.js</td>
                    <td><pre>&quot;use strict&quot;;
this.name = &quot;vector_epodHintA&quot;;
this.author = &quot;Svengali&quot;;
this.copyright = &quot;CC-by-nc-sa-3.0&quot;;
this.description = &quot;Special Escapepod&quot;;
this.version = &quot;1.7.1&quot;;

this.shipWasScooped = function(scooper)
{
	var yep = 0;
	if(scooper &amp;&amp; scooper.isPlayer &amp;&amp; galaxyNumber===5){
		if(worldScripts.vector_news.secondaryInfos.specialist.state.stage===0){
			yep = 1;
			worldScripts.vector_news.secondaryInfos.specialist.state.stage = 1;
			worldScripts.vector_pad.addToLogbook(&quot;EAA Qubiisis&quot;);
			player.addMessageToArrivalReport(&quot;After unloading the escape pods one of the rescued pilots tells you about a strange station hidden behind the sun at Qubiisis. \&#39;I haven&#39;t docked there, but it seems to be a colony. Who knows what kind of species lives there, but they must have some kind of heat shielding so close to the sun. They didn&#39;t made any attempt to communicate. Strange. I&#39;ve only noticed them, because I was heading away from the sun for cooling the ship down and tried to avoid a group of pirates. I doubt that I could find this colony again, because it was so far off from any standard route. Must have been 2 sun radii or so at a strange angle.\&#39;&quot;);
		} else if(worldScripts.vector_pad.padInfos.areidis.codes[0]===1){
			yep = 1;
			player.addMessageToArrivalReport(&quot;One of the pilots tells you about a strange station. \&#39;I was hired to gather infos about solar winds when we stumbled over this \&#39;thing\&#39;. A station on a rock somewhere between planet and sun, but off from the lanes at Tetied. We&#39;ve had this on our scanner and visual contact was possible, but didn&#39;t close in to investigate. Probably a abandoned station, but who knows. I was surprised, but unfortunately there was no time anymore.\&#39;&quot;);
		}
		if(yep) player.commsMessage(&quot;Woow. I really thought it&#39;s over. My oxygen level was low.&quot;);
		else player.ship.manifest.slaves += 1;
	}
}
</pre></td>
                </tr>
                <tr>
                    <td valign="top">Scripts/vector_funA.js</td>
                    <td><pre>&quot;use strict&quot;;
this.name = &quot;vector_funA&quot;;
this.author = &quot;Svengali&quot;;
this.copyright = &quot;CC-by-nc-sa-3.0&quot;;
this.description = &quot;SpecialA&quot;;
this.version = &quot;1.7.1&quot;;

this.shipSpawned = function()
{
	var min = 0;
	switch(this.ship.primaryRole){
		case &quot;EQ_VECTOR_FUNA_MISSILE&quot;: min = 3; this.ship.displayName = &#39;Marc X Rocketeer Missile&#39;; break;
		case &quot;EQ_VECTOR_FUNB_MISSILE&quot;: min = 6; this.ship.displayName = &#39;Barkas Barrier Missile&#39;; break;
		case &quot;EQ_VECTOR_FUNC_MISSILE&quot;: min = 0; this.ship.displayName = &#39;Sorrowbringer&#39;; break;
	}
	if(min){
		if(worldScripts.vector.red&lt;min || !this.ship.owner || !this.ship.target || !this.ship.target.isPlayer) this.ship.explode();
		if(player.ship.subEntities.length){
			var plcheck = player.ship.subEntities;
			var i = plcheck.length;
			while(i--){
				if(plcheck[i].status===&#39;STATUS_ACTIVE&#39;){
					if(!this.die) this.die = [];
					this.die.push(plcheck[i]);
				}
			}
		}
	}
	this.t = this.ship.target;
}
this.confuseTarget = function()
{
	if(this.die){
		var a = this.die[Math.floor(Math.random()*this.die.length)];
		if(a &amp;&amp; a.isValid) a.explode();
	}
	this.ship.AIState = &#39;EXPLODE&#39;;
}
this.waitForDecloak = function()
{
	if(this.t.isCloaked) return;
	this.ship.target = this.t
	this.ship.AIState = &#39;MAKE_CONFUSION&#39;;
}
</pre></td>
                </tr>
                <tr>
                    <td valign="top">Scripts/vector_insp.js</td>
                    <td><pre>&quot;use strict&quot;;
this.name = &quot;vector_insp&quot;;
this.author = &quot;Svengali&quot;;
this.copyright = &quot;CC-by-nc-sa-3.0&quot;;
this.description = &quot;Inspection&quot;;
this.version = &quot;1.7.1&quot;;

this.startUp = function()
{
	delete this.startUp;
	this.ov = new worldScripts.vector_news.VectorOV();
}
this.shipWillDockWithStation = function()
{
	if(this.inspectionTimer){this.inspectionTimer.stop(); delete this.inspectionTimer;}
	if(this.insp){
		if(this.insp.penalty) player.addMessageToArrivalReport(&quot;You&#39;re fined with &quot;+this.insp.penalty+&quot; Credits for trading in illegal goods.&quot;);
		if(this.insp.ins &amp;&amp; this.insp.ins.isValid) this.insp.ins.remove();
		delete this.insp;
	}
}
this.startInspection = function(station,other)
{
	if(!player.ship.isValid || this.insp) return; // No double walk .-)
	if(player.bounty&gt;7){
		let a = station;
		a.launchPatrol();
		player.commsMessage(station.name+&quot;: Give up, pirate! Over and out.&quot;);
		return;
	}
	if(worldScripts.vector.audio) this.mySound = new SoundSource;
	this.insp = new Object({wait:0,loop:0,warn:0,penalty:0,init:false,freight:0,station:station,time:clock.seconds,other:other});
	this.inspectionTimer = new Timer(this,this.doInspectionTimer,0,10);
	if(worldScripts[&quot;BGS-M&quot;]) worldScripts[&quot;BGS-M&quot;].bgsDisableChatter = true;
	return;
}
this.calculatePenalty = function(penalty)
{
	if(player.credits&lt;=penalty) player.credits = Math.min(player.credits,30);
	else player.credits -= penalty;
	return;
}
this.doInspectionTimer = function()
{
	if(!player.ship.isValid || !this.insp.station.isValid){
		this.shipDied();
		return;
	}
	if(clock.isAdjusting || player.ship.position.distanceTo(this.insp.station)&gt;17000){
		this.insp.time = clock.seconds;
		return;
	}
	if(this.insp.init){
		if(worldScripts[&quot;BGS-M&quot;]) worldScripts[&quot;BGS-M&quot;].bgsDisableChatter = true;
		if(!this.insp.freight){
			this.insp.wait = 0;
			this.insp.warn = 0;
			this.setSound(3);
			if(worldScripts.vector.andale &amp;&amp; Math.random()&gt;0.3){
				this.ov.addOv(null,&#39;09&#39;,1,null,&quot;Hmm, you&#39;re on my list. Sorry for the inconvenience, sir. Have a nice travel.&quot;,&quot;vector_insp_list.ogg&quot;);
				worldScripts.vector_pad.addToLogbook(&quot;BAB &quot;+system.name);
				this.backFrom(3,1);
				delete this.insp;
				return;
			}
			++this.insp.freight;
			this.ov.addOv(null,&#39;09&#39;,1,null,&quot;Your documents seem to be ok. Let&#39;s take a look in your cargo hold.&quot;,&quot;vector_insp_look.ogg&quot;);
			return;
		} else {
			++this.insp.freight;
			if(this.insp.freight===2){
				if(manifest.slaves || manifest.narcotics || manifest.firearms){
					this.insp.penalty += manifest.slaves*20+manifest.narcotics*50+manifest.firearms*70;
					this.ov.addOv(null,&#39;09&#39;,1,null,&quot;Commander. Illegal goods found. Confiscated!&quot;,&quot;vector_insp_confiscated.ogg&quot;);
					manifest.slaves = 0;
					manifest.narcotics = 0;
					manifest.firearms = 0;
				} else if(this.insp.other){
					this.insp.penalty += this.insp.other.length*40;
					this.ov.addOv(null,&#39;09&#39;,1,null,&quot;Tss, tss. Special goods, eh? You know they are not legal here?&quot;,&quot;vector_insp_goods.ogg&quot;);
				} else this.ov.addOv(null,&#39;09&#39;,1,null,&quot;No illegal goods in your usual cargo hold found.&quot;,&quot;vector_insp_noillegal.ogg&quot;);
			} else if(this.insp.freight===3){
				this.insp.penalty += (worldScripts.vector_pad.padInfos.generic.epods*400+worldScripts.vector_pad.padInfos.generic.cpods*300);
				this.insp.penalty *= system.government+1;
				var a = false;
				if(worldScripts.vector_pad.padInfos.generic.epods) a = true;
				if(worldScripts.vector_pad.padInfos.generic.cpods) a = true;
				if(this.insp.penalty){
					if(a) this.ov.addOv(null,&#39;09&#39;,1,null,&quot;We have confiscated illegal goods. You are fined with &quot;+this.insp.penalty+&quot; Credits.&quot;,&quot;vector_insp_confiscatedfined.ogg&quot;);
					else this.ov.addOv(null,&#39;09&#39;,1,null,&quot;You are fined with &quot;+this.insp.penalty+&quot; Credits.&quot;,&quot;vector_insp_fined.ogg&quot;);
					worldScripts.vector_pad.addToLogbook(&quot;BAF&quot;);
					worldScripts.vector.calculatePenalty(this.insp.penalty);
					worldScripts.vector.dataRW();
				} else {
					this.ov.addOv(null,&#39;09&#39;,1,null,&quot;Nothing unusual found on your ship.&quot;,&quot;vector_insp_nothing.ogg&quot;);
					worldScripts.vector_pad.addToLogbook(&quot;BAA &quot;+system.name);
				}
				return;
			} else if(this.insp.freight===4){
				this.ov.addOv(null,&#39;09&#39;,1,null,&quot;Inspection is over. Have a nice travel.&quot;,&quot;vector_insp_inspectionover.ogg&quot;);
			} else if(this.insp.freight&gt;=5){
				this.backFrom(3,1);
				delete this.insp;
				return;
			}
		}
	} else {
		var timecheck = clock.seconds-this.insp.time;
		if(timecheck&gt;400){
			this.backFrom(11,1);
			player.commsMessage(this.insp.station.name+&quot;: A technical malfunction has occured - aborting inspection. Sorry for inconveniences and have a nice journey. Over and out.&quot;);
			return;
		}
		if(this.insp.ins &amp;&amp; !system.countShipsWithRole(&#39;vector_inspection&#39;)){
			this.insp.station.launchShipWithRole(&#39;vector_inspection&#39;,true);
			return;
		}
		if(system.countShipsWithRole(&#39;vector_inspection&#39;)) this.insp.ins = system.shipsWithRole(&#39;vector_inspection&#39;)[0];
		let stationCorridor = new Vector3D(this.insp.station.position.subtract(system.mainPlanet.position)),corridorVector = new Vector3D(player.ship.position.subtract(this.insp.station.position));
		let distToStation = corridorVector.magnitude();
		let distToCorridor = distToStation*Math.sin(stationCorridor.angleTo(corridorVector));
		let sdist = player.ship.position.distanceTo(this.insp.station.position);
		if(distToCorridor&lt;300 || sdist&lt;4000){
			if(!this.insp.wait){
				if(distToCorridor&lt;300){
					this.setSound(12);
					if(player.ship.targetSystem!==system.ID) player.commsMessage(this.insp.station.name+&quot;: Clear docking corridor and stop your engines and rudder. Do not try to jump. Over.&quot;);
					else player.commsMessage(this.insp.station.name+&quot;: Clear docking corridor and stop your engines and rudder. Don&#39;t try to flee. Over.&quot;);
				} else {
					this.setSound(13);
					if(player.ship.targetSystem!==system.ID) player.commsMessage(this.insp.station.name+&quot;: Clear danger zone and stop your engines and rudder. Do not try to jump. Over.&quot;);
					else player.commsMessage(this.insp.station.name+&quot;: Clear danger zone and stop your engines and rudder. Don&#39;t try to flee. Over.&quot;);
				}
			} else {
				if(this.insp.wait&gt;5){
					player.bounty += 70;
					player.commsMessage(this.insp.station.name+&quot;: Hostile vessel. Face the consequences! Over and out.&quot;);
					this.insp.station.launchPatrol();
					this.insp.penalty += 1000;
					this.backFrom(15,1);
				}
			}
			++this.insp.wait;
			return;
		} else {
			if(sdist&gt;18000){
				player.commsMessage(this.insp.station.name+&quot;: This time we don&#39;t have the time to inspect your ship. Good luck out there. Over and out.&quot;);
				this.backFrom(17,1);
				delete this.insp;
				return;
			}
			if(player.ship.speed!==0){
				if(this.insp.warn===0){
					this.setSound(18);
					this.insp.station.launchPatrol();
					player.commsMessage(this.insp.station.name+&quot;: Stop your engines and rudder for ship inspection. Over.&quot;);
				} else if(this.insp.warn===1){
					this.insp.up = player.ship.vectorUp;
				} else if(this.insp.warn===2){
					this.insp.penalty += 100;
					this.setSound(16);
					this.insp.station.launchPatrol();
					player.commsMessage(this.insp.station.name+&quot;: Stop your engines immediately or we will stop you! Over.&quot;);
				} else if(this.insp.warn===3){
					player.bounty += 60;
					this.insp.penalty += 1000;
					this.insp.station.launchPatrol();
					player.commsMessage(this.insp.station.name+&quot;: Hostile vessel. Face the consequences! Over and out.&quot;);
					this.backFrom(15,1);
				}
				++this.insp.warn;
				return;
			} else {
				if(this.insp.loop===4 &amp;&amp; (this.insp.vU.dot(player.ship.vectorUp)&lt;0.999 || this.insp.pos!==player.ship.position.x)){
					player.bounty += 50;
					this.insp.penalty += 1000;
					player.commsMessage(this.insp.station.name+&quot;: Hostile vessel. Face the consequences. Over and out.&quot;);
					this.backFrom(15,1);
				} else if(this.insp.loop===3){
					this.insp.vU = player.ship.vectorUp;
					this.insp.pos = player.ship.position.x;
				} else if(this.insp.loop===2 &amp;&amp; (this.insp.vU.dot(player.ship.vectorUp)&lt;0.999 || this.insp.pos!==player.ship.position.x)){
					this.insp.penalty += 100;
					this.setSound(16);
					player.commsMessage(this.insp.station.name+&quot;: This is our last warning. Stop! Over.&quot;);
					this.insp.station.launchPatrol();
				} else if(this.insp.loop===1){
					this.insp.vU = player.ship.vectorUp;
					this.insp.pos = player.ship.position.x;
					this.insp.station.launchPatrol();
				} else if(this.insp.loop===0){
					this.setSound(18);
					this.insp.station.launchShipWithRole(&#39;vector_inspection&#39;,true);
					this.insp.station.launchPatrol();
					player.commsMessage(this.insp.station.name+&quot;: Stop and await inspection team. Over.&quot;);
				}
				++this.insp.loop;
				return;
			}
		}
	}
	return;
}
this.backFrom = function(sound,abort)
{
	if(abort) if(this.inspectionTimer){this.inspectionTimer.stop(); delete this.inspectionTimer;}
	this.setSound(sound);
	if(this.insp.ins &amp;&amp; this.insp.ins.isValid) this.insp.ins.AIState = &#39;RETURN_TO_SENDER&#39;;
	if(worldScripts[&quot;BGS-M&quot;]) worldScripts[&quot;BGS-M&quot;].bgsDisableChatter = false;
	return;
}
this.setSound = function(newSound)
{
	if(!this.mySound) return;
	switch(newSound){
		case 3: this.mySound.sound = &#39;vector_inspection.ogg&#39;; break;
		case 4: this.mySound.sound = &#39;[vector_peep]&#39;; break;
		case 11: this.mySound.sound = &#39;vector_insp_abort.ogg&#39;; break;
		case 12: this.mySound.sound = &#39;vector_insp_clearcorridor.ogg&#39;; break;
		case 13: this.mySound.sound = &#39;vector_insp_cleardangerzone.ogg&#39;; break;
		case 13: this.mySound.sound = &#39;vector_insp_cleardangerzone.ogg&#39;; break;
		case 14: this.mySound.sound = &#39;vector_insp_flee.ogg&#39;; break;
		case 15: this.mySound.sound = &#39;vector_insp_hostile.ogg&#39;; break;
		case 16: this.mySound.sound = &#39;vector_insp_lastwarning.ogg&#39;; break;
		case 17: this.mySound.sound = &#39;vector_insp_luck.ogg&#39;; break;
		case 18: this.mySound.sound = &#39;vector_insp_stop.ogg&#39;; break;
	}
	this.mySound.play();
	return;
}
this.shipWillEnterWitchspace = function()
{
	if(this.inspectionTimer){this.inspectionTimer.stop(); delete this.inspectionTimer;}
	if(this.insp) delete this.insp;
	if(this.mySound){
		this.mySound.stop();
		delete this.mySound;
	}
}
this.playerStartedJumpCountdown = function()
{
	if(this.inspectionTimer &amp;&amp; this.inspectionTimer.isRunning){
		this.backFrom(14,1);
		player.bounty += 50;
		player.commsMessage(this.insp.station.name+&quot;: Fleeing vessel. Face the consequences!&quot;);
	}
	if(this.insp) delete this.insp;
}
this.shipDied = function()
{
	if(this.inspectionTimer){this.inspectionTimer.stop(); delete this.inspectionTimer;}
	if(this.mySound) this.mySound.stop();
}
</pre></td>
                </tr>
                <tr>
                    <td valign="top">Scripts/vector_inspection.js</td>
                    <td><pre>&quot;use strict&quot;;
this.name = &quot;vector_inspection&quot;;
this.author = &quot;Svengali&quot;;
this.copyright = &quot;CC-by-nc-sa-3.0&quot;;
this.description = &quot;Inspector - you are not cute and fluffy.&quot;;
this.version = &quot;1.7.1&quot;;

this.getPos = function()
{
	if(!player.ship.isValid) return;
	if(!this.loop){
		this.loop = 1;
		this.mul = (185580/player.ship.mass)*player.ship.mass*1.5;
	}
	let a = player.ship.orientation.vectorForward().multiply(this.mul*(0.1/(this.loop*50.0)));
	let b = player.ship.orientation.vectorUp().multiply(this.loop*20.0);
	a = player.ship.position.add(a);
	a = a.subtract(b);
	++this.loop;
	this.ship.savedCoordinates = a;
	this.ship.reactToAIMessage(&#39;NEW_VECTOR&#39;);
	return;
}
this.getOtherPos = function()
{
	if(!player.ship.isValid) return;
	if(this.loop) delete this.loop;
	this.mul = (185580/player.ship.mass)*player.ship.mass;
	let b = player.ship.vectorUp.multiply(200.0);
	let a = player.ship.position.add(player.ship.vectorForward.multiply(this.mul*0.004)).subtract(b);
	this.ship.savedCoordinates = a;
	this.ship.reactToAIMessage(&#39;OTHER_VECTOR&#39;);
	return;
}
this.initInspection = function()
{
	if(!player.ship.isValid) return;
	worldScripts.vector_insp.insp.init = true;
	if(!worldScripts.vector_insp.inspectionTimer.isRunning) worldScripts.vector_insp.inspectionTimer.start();
	++this.loop;
	return;
}
this.shipCollided = function(other)
{
	if(!player.ship.isValid) return;
	if(this.loop &amp;&amp; (this.loop===3 || this.loop===4) &amp;&amp; other.isPlayer) this.ship.AIState = &#39;INSPECT_IT&#39;;
	return;
}
</pre></td>
                </tr>
                <tr>
                    <td valign="top">Scripts/vector_missionArn.js</td>
                    <td><pre>&quot;use strict&quot;;
this.name = &quot;vector_missionArn&quot;;
this.author = &quot;Svengali&quot;;
this.copyright = &quot;CC-by-nc-sa-3.0&quot;;
this.description = &quot;Mission - Arn D&#39;ercul&quot;;
this.version = &quot;1.7.2&quot;;

this.startUp = function()
{
	delete this.startUp;
	if(!worldScripts.Cabal_Common_Functions || typeof(worldScripts.Cabal_Common_Functions.Cabal_Common)===&#39;undefined&#39;){this.killSelf(&quot; -&gt; Cabal_Common_Library is missing.&quot;); return;}
	var helper = new worldScripts.Cabal_Common_Functions.Cabal_Common();
	if(helper.internalVersion&lt;14){this.killSelf(&quot; -&gt; Cabal_Common_Functions is too old.&quot;); return;}
	var requires = [&quot;snoopers&quot;,&quot;2.3.2&quot;];
	if(!helper.oxpVersionTest(this.name,requires)){this.killSelf(&quot;&quot;); return;}
	if(missionVariables.vector_arn &amp;&amp; missionVariables.vector_arn===&#39;UNLIMITED&#39; &amp;&amp; missionVariables.TL_FOR_EQ_VECTOR_SCOOPS){this.killSelf(1); return;}
	delete this.killSelf;
	this.ov = new worldScripts.vector_news.VectorOV();
	this.logging = false;
	this.audio = true;
	this.extraB = true;
	this.init = true;
	this.allowS = false;
	this.mySound = new SoundSource;
	this.mySound.loop = true;
	this.hasShown = false;
	this.recalc = false;
	this.visitors = 0;
	this.compNews = 7;
	this.excludedScreens = [&#39;GUI_SCREEN_OPTIONS&#39;,&#39;GUI_SCREEN_SAVE&#39;,&#39;GUI_SCREEN_LOAD&#39;,&#39;GUI_SCREEN_INTRO1&#39;,&#39;GUI_SCREEN_INTRO2&#39;,&#39;GUI_SCREEN_MISSION&#39;,&#39;GUI_SCREEN_REPORT&#39;];
	if(!missionVariables.vector_arnmeet) missionVariables.vector_arnmeet = 0;
	if(missionVariables.vector_nextvisit){
		missionVariables.vector_arnnextvisit = missionVariables.vector_nextvisit;
		missionVariables.vector_nextvisit = null;
		mission.setInstructionsKey(&#39;VECTOR_ARNNEXTVISIT&#39;);
		missionVariables.vector_arnvisits = missionVariables.vector_visits;
		missionVariables.vector_visits = null;
	}
}
this.killSelf = function(desc)
{
	if(desc!==1){
		player.consoleMessage(this.name+&quot; - Check your Latest.log.&quot;,10);
		log(this.name,this.name+&quot; - Shutting down.&quot;+desc);
	}
	if(desc===1) missionVariables.vector_arnmeet = null; // CHECK
	for(prop in this){if(prop!==&#39;name&#39; &amp;&amp; prop!==&#39;version&#39; &amp;&amp; prop!==&#39;oolite_manifest_identifier&#39;) delete this[prop];}
	this.deactivated = true;
	return;
}
this.grabSettings = function()
{
	if(missionVariables.vector_arnvisits) this.visitlist = missionVariables.vector_arnvisits.split(&quot; &quot;);
	this.logging = worldScripts.vector.logging;
	this.audio = worldScripts.vector.audio;
	this.extraB = worldScripts.vector.extraB;
	this.init = false;
	return;
}
this.shipWillDockWithStation = function()
{
	if(this.init) this.grabSettings();
	if(this.redo){
		player.addMessageToArrivalReport(this.redo);
		delete this.redo;
	}
	this.mySound.loop = true;
}
this.shipDockedWithStation = function()
{
	this.allowS = worldScripts.vector.allowS;
	this.hasShown = false;
	this.mySound.stop();
	this.visitors = 0;
}
this.missionScreenOpportunity = function()
{
	if(!player.ship.docked || this.hasShown || !this.allowS || (!missionVariables.vector_arn &amp;&amp; missionVariables.vector_arnmeet&lt;5)) return;
	this.grabSettings();
	this.missionOffers();
}
this.calculateVisits = function()
{
	if(galaxyNumber === 3){missionVariables.vector_arnnextvisit = &quot;in the next galaxy&quot;; return;}
	var myInfo = worldScripts.Cabal_Common_Functions.moreInfo,exSys = [6,23,55,70,128,133,162,178,194,229,247,251],setVisitlist = [],shortlist = [],checker = 0,i=256,t;
	while(i--){
		if(exSys.indexOf(i) !== -1) continue;
		t = myInfo.galaxyStats.contains(i);
		if(!t.sun || t.government !== 7) continue;
		setVisitlist.push(i);
	}
	var l = setVisitlist.length;
	if(l &lt; 4){missionVariables.vector_arnnextvisit = &quot;in the next galaxy&quot;; player.commsMessage(&quot;Arn&#39;s friend was ordered to the next galaxy.&quot;,8); return;}
	for(var s=0;s&lt;4;s++){
		checker = setVisitlist[Math.floor(Math.random()*l)];
		if(shortlist.indexOf(checker) != -1 || checker == system.ID) s--;
		else shortlist.push(checker);
	}
	shortlist.push(galaxyNumber);
	missionVariables.vector_arnvisits = shortlist.join(&quot; &quot;);
	mission.markSystem(shortlist[0]);
	missionVariables.vector_arnnextvisit = &#39;Major Hurst at &#39;+myInfo.galaxyStats.contains(shortlist[0]).name+&#39;, galaxy &#39;+(shortlist[4]+1);
	if(this.logging) log(this.name,&#39;Calculated destinations:&#39;+missionVariables.vector_arnvisits+&quot; next name:&quot;+myInfo.galaxyStats.contains(shortlist[0]).name);
	return;
}
this.getNextVisit = function(clr,nextName)
{
	mission.unmarkSystem(system.ID);
	if(clr){
		missionVariables.vector_arn = &#39;UNLIMITED&#39;;
		missionVariables.vector_arnnextvisit = null;
		missionVariables.vector_arnvisits = null;
		missionVariables.vector_aldrin = null;
		missionVariables.vector_arnrepeat = null;
		missionVariables.vector_arnmeet = null;
		mission.setInstructionsKey(null);
		this.visitors = 0;
	} else {
		missionVariables.vector_arn = &#39;VISIT&#39;+String(this.currentStage+1);
		missionVariables.vector_arnnextvisit = nextName+&#39; at &#39;+System.systemNameForID(this.visitlist[this.currentStage])+&#39;, galaxy &#39;+(parseInt(this.visitlist[4])+1);
		mission.markSystem(this.visitlist[this.currentStage]);
		mission.setInstructionsKey(&#39;VECTOR_ARNNEXTVISIT&#39;);
		worldScripts.vector_pad.addToLogbook(&quot;CAI &amp;&quot;+nextName+&quot; at &quot;+System.systemNameForID(this.visitlist[this.currentStage]));
	}
	return;
}
this.loser = function()
{
	this.showScreen(&#39;VISIT4NA&#39;,null,4,null);
	this.mySound.loop = true;
	this.mySound.sound = &#39;vector_stokitch.ogg&#39;;
	this.mySound.play();
	this.piLoop = 0;
	worldScripts.vector_pad.addToLogbook(&quot;CAW&quot;);
	if(!this.pickItemTimer) this.pickItemTimer = new Timer(this,this.pickItem,0,0.5);
	else if(!this.pickItemTimer.isRunning) this.pickItemTimer.start();
	missionVariables.vector_arn = &#39;RETRY4&#39;;
	return;
}
this.pickItem = function()
{
	if(guiScreen===&#39;GUI_SCREEN_LOAD&#39;){
		this.mySound.stop();
		this.piRestart = true;
	} else if(this.piRestart){
		this.mySound.play();
		delete this.piRestart;
	}
	this.piLoop++;
	if(this.piLoop&lt;12) return;
	var eqList = [&#39;EQ_ADVANCED_COMPASS&#39;,&#39;EQ_ADVANCED_NAVIGATIONAL_ARRAY&#39;,&#39;EQ_CLOAKING_DEVICE&#39;,&#39;EQ_DOCK_COMP&#39;,&#39;EQ_ECM&#39;,&#39;EQ_FUEL_INJECTION&#39;,&#39;EQ_FUEL_SCOOPS&#39;,&#39;EQ_ENERGY_BOMB&#39;,
		&#39;EQ_ENERGY_UNIT&#39;,&#39;EQ_ESCAPE_POD&#39;,&#39;EQ_GAL_DRIVE&#39;,&#39;EQ_HEAT_SHIELD&#39;,&#39;EQ_MILITARY_JAMMER&#39;,&#39;EQ_MILITARY_SCANNER_FILTER&#39;,&#39;EQ_MULTI_TARGET&#39;,&#39;EQ_NAVAL_ENERGY_UNIT&#39;,&#39;EQ_NAVAL_SHIELD_BOOSTER&#39;,
		&#39;EQ_SCANNER_SHOW_MISSILE_TARGET&#39;,&#39;EQ_SHIELD_BOOSTER&#39;,&#39;EQ_TARGET_MEMORY&#39;,&#39;EQ_WORMHOLE_SCANNER&#39;];
	if(!player.ship.docked){
		this.pickItemTimer.stop();
		delete this.pickItemTimer;
		return;
	}
	var a = Math.floor(Math.random()*eqList.length);
	var b = eqList[a];
	if(player.ship.equipmentStatus(b)===&#39;EQUIPMENT_OK&#39;){
		player.ship.setEquipmentStatus(b,&#39;EQUIPMENT_DAMAGED&#39;);
		var z = EquipmentInfo.infoForKey(b).name;
		if(guiScreen===&#39;GUI_SCREEN_MISSION&#39;) mission.addMessageText(&quot;Uh, your &quot;+z+&quot; is gone.&quot;);
		else player.commsMessage(&quot;Uh, your &quot;+z+&quot; is gone.&quot;);
		worldScripts.vector_pad.addToLogbook(&quot;CAX &amp;&quot;+z);
	}
	this.piLoop = 0;
	return;
}
this.playerBoughtEquipment = function(equipmentKey)
{
	if(equipmentKey===&#39;EQ_PASSENGER_BERTH&#39;){
		if(missionVariables.vector_arn===&#39;RETRY3B&#39;){
			missionVariables.vector_arn = &#39;RETRY3&#39;;
			this.missionOffers();
		}
	}
	return;
}
this.missionOffers = function()
{
	if(!player.ship.docked || this.hasShown || !player.ship.dockedStation.isMainStation) return;
	if(!missionVariables.vector_arn){
		if(missionVariables.vector_arnmeet==5 &amp;&amp; (!missionVariables.vector_arnrepeat || parseInt(missionVariables.vector_arnrepeat)&lt;=clock.days)){
			if(player.ship.passengerCapacity &amp;&amp; player.ship.passengerCapacity&gt;player.ship.passengerCount){
				missionVariables.vector_arnrepeat = clock.days+31;
				var a = system.info.systemsInRange(7);
				missionVariables.vector_arnnextvisit = a[0].name;
				this.showScreen(&#39;ASKING&#39;,&#39;PASSAGE&#39;,7,1);
				return;
			}
		} else if(missionVariables.vector_arnmeet==6 &amp;&amp; system.name===missionVariables.vector_arnnextvisit){
			player.ship.removeEquipment(&#39;EQ_VECTOR_ARNP&#39;);
			mission.setInstructionsKey(null);
			mission.unmarkSystem(system.ID);
			missionVariables.vector_arnrepeat = null;
			missionVariables.vector_arnmeet = null;
			missionVariables.vector_arn = &#39;SCOOPED&#39;;
			worldScripts.vector_pad.addToLogbook(&quot;CAH&quot;);
		}
	}
	if(missionVariables.vector_arn===&#39;SCOOPED&#39;){
		this.showScreen(&#39;SPECIAL&#39;,&#39;OFFERSPECIAL&#39;,6,1);
		return;
	}
	if(missionVariables.vector_arn &amp;&amp; missionVariables.vector_arn!==&#39;RETRY4&#39;){
		if(missionVariables.vector_arnvisits){
			this.visitlist = missionVariables.vector_arnvisits.split(&quot; &quot;);
			if(this.visitlist[4]==galaxyNumber){
				if(!system.sun.hasGoneNova &amp;&amp; !system.sun.isGoingNova){
					this.currentStage = parseInt(missionVariables.vector_arn[5]);
					if(system.ID==this.visitlist[this.currentStage-1]){
						switch(this.currentStage){
							case 1: worldScripts.vector_pad.addToLogbook(&quot;CAK&quot;); this.getNextVisit(null,&#39;Linda Bevenger&#39;);
								this.showScreen(&#39;VISIT1&#39;,null,1,1); this.visitors = 1; break;
							case 2: worldScripts.vector_pad.addToLogbook(&quot;CAL&quot;); this.getNextVisit(null,&#39;Aldrin Escobar&#39;);
								this.showScreen(&#39;VISIT2&#39;,null,2,1); this.visitors = 2; worldScripts.vector_pad.padInfos.areidis.codes[0] = &#39;1&#39;; break;
							case 3: if(missionVariables.vector_arn===&#39;RETRY3B&#39;) break;
								missionVariables.vector_arnnextvisit = &#39;Pavel Stokitch at &#39;+System.systemNameForID(this.visitlist[this.currentStage])+&#39;, galaxy &#39;+(parseInt(this.visitlist[4])+1);
								if(player.ship.passengerCapacity &amp;&amp; player.ship.passengerCapacity&gt;player.ship.passengerCount){
									if(missionVariables.vector_arn===&#39;RETRY3&#39;) this.showScreen(&#39;VISIT3A&#39;,&#39;OFFERPICKUP&#39;,3,1);
									else this.showScreen(&#39;VISIT3&#39;,&#39;OFFERPICKUP&#39;,3,1);
									break;
								} else {
									if(missionVariables.vector_arn===&#39;RETRY3&#39;){
										this.showScreen(&#39;VISIT3C&#39;,null,3,1); worldScripts.vector_pad.addToLogbook(&quot;CAN&quot;);
									} else {
										this.showScreen(&#39;VISIT3B&#39;,null,3,1); worldScripts.vector_pad.addToLogbook(&quot;CAM&quot;);
									}
									missionVariables.vector_arn = &#39;RETRY3B&#39;; break;}
							case 4: if(player.ship.equipmentStatus(&#39;EQ_VECTOR_ALDRIN&#39;)===&#39;EQUIPMENT_OK&#39;){
								this.showScreen(&#39;VISIT4&#39;,&#39;QUESTIONA&#39;,4,1); worldScripts.vector_pad.addToLogbook(&quot;CAV&quot;);}
								else this.loser(); this.visitors = 3;
								break;
						}
					} else {
						if(missionVariables.vector_aldrin &amp;&amp; system.ID==this.visitlist[3]){
							if(this.logging) log(this.name,this.name+&#39;: Visit Pavel without Aldrin.&#39;);
							this.loser();
						}
					}
				}
			}
		}
	}
	return;
}
this.choiceEvaluation = function(choice)
{
	if(!choice) return;
	switch(choice.substr(10,40)){
		case &#39;PASSAGEN&#39;: missionVariables.vector_arnnextvisit = null; missionVariables.vector_arnrepeat = clock.days+31; this.hasShown = true;
			worldScripts.vector_pad.addToLogbook(&quot;CAD&quot;);
			missionVariables.vector_arnmeet = 3;
			break;
		case &#39;PASSAGEY&#39;: mission.setInstructions(&quot;Bring Arn D&#39;ercul to &quot;+missionVariables.vector_arnnextvisit+&quot;.&quot;);
			mission.markSystem(System.systemIDForName(missionVariables.vector_arnnextvisit));
			missionVariables.vector_arnmeet = 6; player.ship.awardEquipment(&#39;EQ_VECTOR_ARNP&#39;); this.visitors = 1; this.hasShown = true;
			worldScripts.vector_pad.addToLogbook(&quot;CAG &quot;+missionVariables.vector_arnnextvisit); break;
		case &#39;HANDOVER&#39;: missionVariables.vector_arn = null; player.credits += 2000; this.showScreen(&#39;HANDED&#39;,null,6,1);
			if(worldScripts.vector_pad.padInfos.generic.expFactor&lt;98) worldScripts.vector_pad.padInfos.generic.expFactor += 2;
			worldScripts.vector_pad.addToLogbook(&quot;CAE&quot;); break;
		case &#39;RESCUE&#39;: this.calculateVisits(); missionVariables.vector_arn = &#39;VISIT1&#39;; mission.setInstructionsKey(&#39;VECTOR_ARNNEXTVISIT&#39;);
			this.visitors = 1; this.showScreen(&#39;RESCUED&#39;,null,7,1); break;
		case &#39;PICKUP&#39;: worldScripts.vector_pad.addToLogbook(&quot;CAQ&quot;); this.visitors = 1;
			this.getNextVisit(null,&#39;Pavel Stokitch&#39;); player.ship.awardEquipment(&#39;EQ_VECTOR_ALDRIN&#39;);
			this.showScreen(&#39;VISIT3E&#39;,null,3,1); this.hasShown = true; 
			if(!missionVariables.vector_aldrin) missionVariables.vector_aldrin = 1;
			if(player.ship.equipmentStatus(&#39;EQ_HEAT_SHIELD&#39;)===&#39;EQUIPMENT_OK&#39; &amp;&amp; player.ship.equipmentStatus(&#39;EQ_FUEL_SCOOPS&#39;)===&#39;EQUIPMENT_OK&#39;) mission.addMessageTextKey(&#39;VECTOR_ARNVISIT3F&#39;);
			break;
		case &#39;DENIED&#39;: this.showScreen(&#39;VISIT3D&#39;,null,3,1); this.hasShown = true; missionVariables.vector_arn = &#39;RETRY3&#39;;
			worldScripts.vector_pad.addToLogbook(&quot;CAP&quot;); this.visitors = 1; break;
		case &#39;QSTART&#39;: this.showScreen(&#39;VISIT4A&#39;,&#39;QUESTIONB&#39;,4,1); this.visitors = 4; return;
		case &#39;QDENIED&#39;: this.loser(); this.visitors = 4; break;
		case &#39;QFA&#39;: this.loser(); this.visitors = 4; break;
		case &#39;QFB&#39;: this.showScreen(&#39;VISIT4B&#39;,&#39;QUESTIONC&#39;,4,1); this.visitors = 4; return;
		case &#39;QFC&#39;: this.loser(); this.visitors = 4; break;
		case &#39;QFD&#39;: this.loser(); this.visitors = 4; break;
		case &#39;QFE&#39;: this.showScreen(&#39;VISIT4C&#39;,&#39;QUESTIOND&#39;,4,1); this.visitors = 4; return;
		case &#39;QFF&#39;: this.showScreen(&#39;VISIT4C&#39;,&#39;QUESTIOND&#39;,4,1); this.visitors = 4; return;
		case &#39;QFG&#39;: this.showScreen(&#39;VISIT4C&#39;,&#39;QUESTIOND&#39;,4,1); this.visitors = 4; return;
		case &#39;QFH&#39;: this.showScreen(&#39;VISIT4D&#39;,null,5,1); this.getNextVisit(1); player.ship.awardEquipment(&#39;EQ_VECTOR_SCOOPS&#39;);
			player.ship.removeEquipment(&#39;EQ_VECTOR_ALDRIN&#39;);
			if(worldScripts.vector_pad.padInfos.areidis.codes[0]) worldScripts.vector_pad.addToLogbook(&quot;CAY&quot;,&quot;CAZ&quot;);
			else worldScripts.vector_pad.addToLogbook(&quot;CAZ&quot;);
			return;
		case &#39;QFI&#39;: this.loser(); this.visitors = 4; break;
		default: this.hasShown = true;
	}
	return;
}
this.shipWillLaunchFromStation = function(station)
{
	if(this.init) this.grabSettings();
	this.mySound.stop();
	if(this.pickItemTimer &amp;&amp; this.pickItemTimer.isRunning) this.pickItemTimer.stop();
	if(this.visitors){
		system.addShips(&#39;vector_visitor&#39;,this.visitors,player.ship.position.add([0,0,9000]),2000);
		worldScripts.vector_news.arnvisitor = true;
		worldScripts.Cabal_Common_Music.changeStatus(&quot;vector_news&quot;,true);
		this.visitors = 0;
		return;
	}
	if(missionVariables.vector_arnmeet&lt;5 &amp;&amp; this.allowS &amp;&amp; Math.random()&lt;0.1 &amp;&amp; system.government&gt;4 &amp;&amp; player.score&gt;300 &amp;&amp; worldScripts.vector_news.newsPointer[0]&gt;2 &amp;&amp; !system.countShipsWithRole(&#39;vector_arn&#39;)) station.launchShipWithRole(&#39;vector_arn&#39;);
}
this.shipLaunchedFromStation = function()
{
	if(missionVariables.vector_arn===&#39;RETRY3B&#39;) missionVariables.vector_arn = &#39;RETRY3&#39;;
	else if(missionVariables.vector_arn===&#39;RETRY4&#39;) missionVariables.vector_arn = &#39;VISIT4&#39;;
	if(!player.ship.passengerCapacity || player.ship.passengerCapacity&lt;=player.ship.passengerCount){
		if(missionVariables.vector_arn===&#39;VISIT4&#39;){
			this.visitlist = missionVariables.vector_arnvisits.split(&quot; &quot;);
			if(this.visitlist[4]==galaxyNumber &amp;&amp; player.ship.equipmentStatus(&#39;EQ_VECTOR_ALDRIN&#39;)===&#39;EQUIPMENT_OK&#39;){
				worldScripts.vector_pad.addToLogbook(&quot;CAR&quot;);
				this.currentStage = 2;
				this.getNextVisit(null,&#39;Aldrin Escobar&#39;);
				player.ship.removeEquipment(&#39;EQ_VECTOR_ALDRIN&#39;);
				missionVariables.vector_arn = &#39;RETRY3&#39;;
				this.ov.addOv(1,&#39;03&#39;,null,null,1);
				player.commsMessage(&quot;Aldrin: Oh, man. What the heck are you trying? Believe me, if I&#39;m not there Pavel will kill you! Or you won&#39;t find him. You can pick me up again at &quot;+System.systemNameForID(this.visitlist[this.currentStage])+&#39;.&#39;);
			}
		} else if(missionVariables.vector_arnmeet===&#39;6&#39;){
			missionVariables.vector_arnmeet = 5;
			missionVariables.vector_arnrepeat = clock.days+31;
			if(player.ship.equipmentStatus(&#39;EQ_VECTOR_ARNP&#39;)===&#39;EQUIPMENT_OK&#39;) player.ship.removeEquipment(&#39;EQ_VECTOR_ARNP&#39;);
			this.ov.addOv(1,&#39;03&#39;,null,null,1);
			player.commsMessage(&quot;Arn: Hey man! That was not nice. And I really thought you&#39;d help me.&quot;);
			mission.unmarkSystem(System.systemIDForName(missionVariables.vector_arnnextvisit));
			mission.setInstructionsKey(null);
		}
	}
	if(missionVariables.vector_arn===&#39;SCOOPED&#39; || player.ship.equipmentStatus(&#39;EQ_VECTOR_ARNP&#39;)===&#39;EQUIPMENT_OK&#39;){
		system.addShips(&#39;vector_visitor&#39;,1,player.ship.position.add([0,0,9000]),1000);
		this.ov.addOv(null,&#39;10&#39;,1,null,&quot;Maybe we can sneak through.&quot;);
		worldScripts.vector_news.arnvisitor = true;
		worldScripts.Cabal_Common_Music.changeStatus(&quot;vector_news&quot;,true);
	}
}
this.showScreen = function(text,offer,image,music)
{
	var ov = &quot;full&quot;;
	if(!image) image = 0;
	switch(image){
		case 6: image = &#39;vector_arnmessage2.png&#39;; music = &#39;vector_arnopener.ogg&#39;; ov=&quot;fullmessage&quot;; break;
		case 7: image = &#39;vector_arnrescued.png&#39;; music = &#39;vector_arnvisit.ogg&#39;; break;
		default: image = &#39;vector_arnvisit&#39;+String(image)+&#39;.png&#39;; if(music) music = &#39;vector_arnvisit.ogg&#39;;
	}
	if(text) text = expandMissionText(&#39;VECTOR_ARN&#39;+text);
	if(!this.audio) music = null;
	ov = &quot;vector_ov&quot;+ov+&quot;.png&quot;;
	if(offer){
		offer = &#39;VECTOR_ARN&#39;+offer;
		mission.runScreen({title:player.ship.dockedStation.displayName,message:text,background:image,overlay:ov,choicesKey:offer,music:music},this.choiceEvaluation);
	} else mission.runScreen({title:player.ship.dockedStation.displayName,message:text,background:image,overlay:ov,music:music});
	return;
}
this.shipWillExitWitchspace = function()
{
	if(system.isInterstellarSpace) return;
	if(!missionVariables.vector_arn){
		if(missionVariables.vector_arnmeet==6 &amp;&amp; player.ship.equipmentStatus(&#39;EQ_VECTOR_ARNP&#39;)===&#39;EQUIPMENT_OK&#39;){
			system.addShips(&#39;vector_visitor&#39;,1,player.ship.position.add([0,0,5000]),2000);
			worldScripts.vector_news.arnvisitor = true;
			worldScripts.Cabal_Common_Music.changeStatus(&quot;vector_news&quot;,true);
		} else if((clock.days&amp;7)===this.compNews){
			if(worldScripts.vector_news.startNews(0)) this.compNews ^= 3;
		} else if(missionVariables.vector_arnmeet&lt;5 &amp;&amp; system.government&gt;4 &amp;&amp; player.score&gt;300 &amp;&amp; Math.random()&lt;0.39 &amp;&amp; worldScripts.vector_news.newsPointer[0]&gt;2) system.addShipsToRoute(&#39;vector_arn&#39;,1,0.1,&#39;wp&#39;);
	} else {
		if(this.recalc){
			this.calculateVisits();
			mission.setInstructionsKey(&#39;VECTOR_ARNNEXTVISIT&#39;);
			player.commsMessage(&quot;Locating Arn D&#39;erculs friend.&quot;,8);
			this.recalc = false;
		}
		if(missionVariables.vector_arnvisits){
			if(missionVariables.vector_aldrin) missionVariables.vector_aldrin++;
			this.visitlist = missionVariables.vector_arnvisits.split(&quot; &quot;);
			if(this.visitlist[4]==galaxyNumber){
				this.currentStage = parseInt(missionVariables.vector_arn[5]);
				if(system.ID==this.visitlist[this.currentStage-1]){
					system.addShips(&#39;vector_visitor&#39;,this.currentStage,player.ship.position.add([0,0,5000]),2000);
					worldScripts.vector_news.arnvisitor = true;
					worldScripts.Cabal_Common_Music.changeStatus(&quot;vector_news&quot;,true);
					if(this.currentStage&gt;2) worldScripts.vector_pad.addToLogbook(&quot;CAO &quot;+system.name);
					if(system.sun.hasGoneNova || system.sun.isGoingNova){
						this.calculateVisits();
						mission.setInstructionsKey(&#39;VECTOR_ARNNEXTVISIT&#39;);
						player.commsMessage(&quot;Malfunction. Recalculating location of Arn D&#39;erculs friend.&quot;,8);
					}
				} else {
					if(Math.random()&lt;0.1){
						system.addShips(&#39;vector_visitor&#39;,1,player.ship.position.add([0,0,8000]),2000);
						worldScripts.vector_news.arnvisitor = true;
						worldScripts.Cabal_Common_Music.changeStatus(&quot;vector_news&quot;,true);
					} else if(player.ship.equipmentStatus(&#39;EQ_VECTOR_ALDRIN&#39;)===&#39;EQUIPMENT_OK&#39;){
						this.ov.addOv(null,&#39;11&#39;,1,null,&quot;Aldrin: Ok, let&#39;s go sundiving...&quot;);
					}
					if((clock.days&amp;2) &amp;&amp; worldScripts.vector_news.startNews(1)) this.compNews ^= 3;
				}
			}
		} else if((clock.days&amp;7)===this.compNews){
			if(worldScripts.vector_news.startNews(2)) this.compNews ^= 3;
		}
	}
	if(this.logging) log(this.name,this.name+&#39;: N:&#39;+worldScripts.vector_news.newsPointer+&#39; C1:&#39;+(clock.days&amp;7)+&#39; C3:&#39;+(clock.days&amp;7)+&#39; C:&#39;+this.compNews);
}
this.shipExitedWitchspace = function()
{
	if(missionVariables.vector_arn===&#39;SCOOPED&#39; || player.ship.equipmentStatus(&#39;EQ_VECTOR_ARNP&#39;)===&#39;EQUIPMENT_OK&#39;){
		this.ov.addOv(null,&#39;10&#39;,1,null,&quot;They have found us. Bring us to the station!&quot;,&#39;vector_arn.ogg&#39;);
	}
}
this.shipEnteredPlanetaryVicinity = function(planet)
{
	if(!missionVariables.vector_aldrin) return;
	if(this.logging) log(this.name,this.name+&#39;: Sun:&#39;+(planet.isSun)+&#39; aldrinCount:&#39;+missionVariables.vector_aldrin);
	if(planet.isSun &amp;&amp; player.ship.equipmentStatus(&#39;EQ_VECTOR_ALDRIN&#39;)===&#39;EQUIPMENT_OK&#39;){
		if(Math.random()&lt;0.4-(parseInt(missionVariables.vector_aldrin)*0.05)){
			if(this.audio){
				this.mySound.loop = false;
				this.mySound.sound = &#39;[vector_peep]&#39;;
				this.mySound.play();
			}
			if(player.ship.equipmentStatus(&#39;EQ_HEAT_SHIELD&#39;)===&#39;EQUIPMENT_OK&#39;){
				player.commsMessage(&quot;WARNING! Heat shields malfunction. Radiation leaks in passenger berth.&quot;);
				player.ship.setEquipmentStatus(&#39;EQ_HEAT_SHIELD&#39;,&#39;EQUIPMENT_DAMAGED&#39;);
			} else player.commsMessage(&quot;WARNING! WARNING! Radiation leaks in passenger berth.&quot;);
			player.ship.setEquipmentStatus(&#39;EQ_VECTOR_ALDRIN&#39;,&#39;EQUIPMENT_DAMAGED&#39;);
		} else {
			this.ov.addOv(null,&#39;11&#39;,1,null,&quot;Wow! What a nice corona. Refuel and bring us out of here.&quot;);
			if(missionVariables.vector_aldrin&lt;3) worldScripts.vector_pad.addToLogbook(&quot;CAU &quot;+system.name);
		}
	}
}
this.playerEnteredNewGalaxy = function()
{
	if(missionVariables.vector_arnnextvisit &amp;&amp; missionVariables.vector_arnnextvisit===&#39;in the next galaxy&#39;) this.recalc = true;
}
this.playerjumpFailed = this.playerCancelledJumpCountdown = function()
{
	if(!system.isInterstellarSpace) this.recalc = false;
}
this.equipmentDamaged = this.equipmentDestroyed = function(equipmentKey)
{
	if(equipmentKey===&#39;EQ_VECTOR_ARNP&#39;){
		missionVariables.vector_arnmeet = 5;
		missionVariables.vector_arnrepeat = clock.days+15;
		if(player.ship.equipmentStatus(&#39;EQ_VECTOR_ARNP&#39;)===&#39;EQUIPMENT_DAMAGED&#39;) player.ship.removeEquipment(&#39;EQ_VECTOR_ARNP&#39;);
		player.commsMessage(&quot;Arn D&#39;ercul has been injured.&quot;);
		this.redo = &quot;Arn D&#39;ercul has been immediately transfered to hospital.&quot;;
		mission.unmarkSystem(System.systemIDForName(missionVariables.vector_arnnextvisit));
		mission.setInstructionsKey(null);
	} else if(equipmentKey===&#39;EQ_VECTOR_ALDRIN&#39;){
		this.ov.addOv(1,&#39;03&#39;,null,null,1);
		worldScripts.vector_pad.addToLogbook(&quot;CAT&quot;);
		if(player.ship.equipmentStatus(&#39;EQ_VECTOR_ALDRIN&#39;)===&#39;EQUIPMENT_DAMAGED&#39;) player.ship.removeEquipment(&#39;EQ_VECTOR_ALDRIN&#39;);
		player.commsMessage(&quot;Aldrin Escobar has been injured, so better stay away from Pavel Stokitch.&quot;);
		this.visitlist = missionVariables.vector_arnvisits.split(&quot; &quot;);
		this.currentStage = 2;
		if(this.visitlist[4]==galaxyNumber){
			this.getNextVisit(null,&#39;Aldrin Escobar&#39;);
			missionVariables.vector_arn = &#39;RETRY3&#39;;
			this.redo = &quot;Aldrin Escobar has been immediately transfered to hospital. Pick him up again at &quot;+System.systemNameForID(this.visitlist[this.currentStage])+&quot;.&quot;;
		} else {
			missionVariables.vector_arn = &#39;VISIT2&#39;;
			this.redo = &quot;Aldrin Escobar has been immediately transfered to hospital. Pick him up again in galaxy &quot;+this.visitlist[4]+&quot;.&quot;;
		}
	}
	return;
}
this.guiScreenChanged = function(to)
{
	if(this.init &amp;&amp; this.excludedScreens.indexOf(guiScreen)===-1) this.grabSettings();
	if(to===&#39;GUI_SCREEN_SYSTEM_DATA&#39;){
		if(missionVariables.vector_aldrin &amp;&amp; this.visitlist[4]==galaxyNumber &amp;&amp; player.ship.targetSystem==this.visitlist[3]){
			mission.addMessageText(&quot;Residence of Pavel Stokitch.&quot;);
		}
	}
}
this.alertConditionChanged = function()
{
	if(this.init) this.grabSettings();
	delete this.alertConditionChanged;
}
this.shipDied = function()
{
	this.mySound.stop();
}
</pre></td>
                </tr>
                <tr>
                    <td valign="top">Scripts/vector_news.js</td>
                    <td><pre>&quot;use strict&quot;;
this.name = &quot;vector_news&quot;;
this.author = &quot;Svengali&quot;;
this.copyright = &quot;CC-by-nc-sa-3.0&quot;;
this.description = &quot;Newsflashes -&gt; Snoopers and Station stuff&quot;;
this.version = &quot;1.7.1&quot;;

this.startUp = function()
{
	delete this.startUp;
	if(!worldScripts.Cabal_Common_Functions || typeof(worldScripts.Cabal_Common_Functions.Cabal_Common)===&#39;undefined&#39;){this.killSelf(&quot; -&gt; Cabal_Common_Library is missing.&quot;); return;}
	this.helper = new worldScripts.Cabal_Common_Functions.Cabal_Common();
	if(this.helper.internalVersion&lt;14){this.killSelf(&quot; -&gt; Cabal_Common_Functions is too old.&quot;); return;}
	var requires = [&quot;snoopers&quot;,&quot;2.3.2&quot;];
	if(this.helper.oxpVersionTest(this.name,requires)){
		this.showNews = true;
		var a = this.helper.strGetCRC(player.name);
		var hola = [482,493,612,711,825,914,920,1280,1349,1475];
		if(hola.indexOf(a)!==-1) worldScripts.vector.andale = true;
	} else {
		this.showNews = false;
		log(this.name,this.name+&quot; - deactivating all specials&quot;);
	}
	this.objNews = [
		[{Ag:1,m:&quot;VECTOR_NEWS01&quot;,Pr:1},{m:&quot;VECTOR_NEWS02&quot;,Pi:&quot;snoopers_gcnewsA11.png&quot;,Mo:&quot;vector_newsA&quot;,Po:[2.4,1.2,10],Pr:1},{Ag:2,m:&quot;VECTOR_NEWS03&quot;,Pr:1}],
		[{m:&quot;VECTOR_NEWS11&quot;,Pi:&quot;snoopers_gcnewsA11.png&quot;,Mo:&quot;vector_newsA&quot;,Po:[2.4,1.2,10],Pr:1},{Ag:2,m:&quot;VECTOR_NEWS12&quot;,Pr:1},{Ag:3,m:&quot;VECTOR_NEWS13&quot;,Pr:1}],
		[{m:&quot;VECTOR_NEWS21&quot;,Pi:&quot;snoopers_gcnewsA11.png&quot;,Mo:&quot;vector_newsB&quot;,Po:[2.4,1.2,10],Pr:1},{m:&quot;VECTOR_NEWS22&quot;,Pi:&quot;snoopers_gcnewsA11.png&quot;,Mo:&quot;vector_newsB&quot;,Po:[2.4,1.2,10],Pr:1},{m:&quot;VECTOR_NEWS23&quot;,Pi:&quot;snoopers_gcnewsA21.png&quot;,Mo:&quot;vector_newsB&quot;,Po:[2.4,1.2,10],Pr:1}],
		[{Ag:1,m:&quot;VECTOR_NEWS41&quot;,Pr:1},{Ag:1,m:&quot;VECTOR_NEWS42&quot;,Pr:1}]
	];
	if(!missionVariables.vector_newspointer) this.newsPointer = [0,0,0,0,0,0];
	else this.newsPointer = missionVariables.vector_newspointer.split(&#39;|&#39;);
	if((missionVariables.vector_arnvisits || missionVariables.vector_visits) &amp;&amp; this.newsPointer[2]==&quot;3&quot; &amp;&amp; this.newsPointer[1]===&quot;0&quot;){
		this.newsPointer[2] = 0;
		missionVariables.TL_FOR_EQ_VECTOR_SCOOPS = null;
		if(player.ship.equipmentStatus(&#39;EQ_VECTOR_SCOOPS&#39;)===&#39;EQUIPMENT_OK&#39;){
			player.ship.removeEquipment(&#39;EQ_VECTOR_SCOOPS&#39;);
			player.credits += 1700;
		}
	}
	if(this.newsPointer[1]==3 &amp;&amp; missionVariables.vector_arn &amp;&amp; missionVariables.vector_arn===&#39;UNLIMITED&#39; &amp;&amp; !missionVariables.TL_FOR_EQ_VECTOR_SCOOPS) this.changeEQ(1);
	this.secondaryInfos = {
		specialist: {
			goods:{
				standard:[],
				illegal:[
					{item:&quot;Dephrac Crystals&quot;,galaxy:[5],buyID:[180],sellID:[76],stationID:[[&quot;main&quot;],[&quot;vector_specialist&quot;]],cb:this.name,cbb:&quot;specialCargo&quot;,avail:0,priceclass:60,offset:1.5,refresh:0.4,decrease:0.1,times:clock.days-10,oneShot:true,legal:false,desc:&quot;Dephrac Crystals are prohibited in most systems, because of their structural instability. Logistic companies will need a special license to transport them.&quot;}
				],
				sealing:[],
				contract:[]
			},
			state: {
				trade:[],
				stage:0
			},
			scenes: [
				{w:&quot;vector_news&quot;,f:&quot;sceneA&quot;,p:1,s:5,t:&quot;The Specialst - Building&quot;}
			]
		}
	};
	if(missionVariables.vector_specialist) this.secondaryInfos.specialist.state = JSON.parse(missionVariables.vector_specialist);
	this.arnvisitor = false;
	this.logging = false;
	this.hasShown = false;
	this.cleanMVs();
	this.delTimer = new Timer(this,this.delayed,1);
	delete this.killSelf;
}
this.delayed = function()
{
	for(let prop in this.secondaryInfos){
		// Reimplement cutscenes
		if(this.secondaryInfos[prop].hasOwnProperty(&quot;scenes&quot;)){
			for(let i=0;i&lt;this.secondaryInfos[prop].scenes.length;i++){
				if(this.secondaryInfos[prop].scenes[i].s&lt;this.secondaryInfos[prop].state.stage) worldScripts.vector_pad.padInfos.replay.push(this.secondaryInfos[prop].scenes[i]);
			}
		}
		// Reimplement markets
		if(this.secondaryInfos[prop].hasOwnProperty(&quot;state&quot;)){
			if(this.secondaryInfos[prop].state.hasOwnProperty(&quot;trade&quot;)){
				if(this.secondaryInfos[prop].state.trade.length){
					let w = this.secondaryInfos[prop].state.trade[0];
					this.setMarketStats(w[0],w[1],w[2],w[3]);
				}
			}
		}
	}
	// CCL_Music
	this.ccl_handlers = worldScripts.Cabal_Common_Music.requestHandlerSet;
	this.ccl_music = [
		{fadeQ:1,ent:&quot;vector_specialist&quot;,dist:25000,music:&quot;vector_areidis.ogg&quot;},
		{prop:&quot;arnvisitor&quot;,fadeQ:1,ent:&quot;Headhunter&quot;,dist:25000,music:&quot;vector_areidis.ogg&quot;}
	];
	this.startMusicSet([0x070100,0x070101],false);
	this.delTimer.stop();
	delete this.delTimer;
	return;
}
this.playerWillSaveGame = function()
{
	missionVariables.vector_specialist = JSON.stringify(this.secondaryInfos.specialist.state);
	missionVariables.vector_newspointer = this.newsPointer.join(&#39;|&#39;);
	this.saved = true;
}
this.cleanMVs = function()
{
	missionVariables.vector_specialist = null;
	missionVariables.vector_newspointer = null;
	delete this.saved;
	return;
}
this.killSelf = function(desc)
{
	if(desc!==1){
		player.consoleMessage(this.name+&quot; - Check your Latest.log.&quot;,10);
		log(this.name,this.name+&quot; - Shutting down.&quot;+desc);
	}
	this.showNews = false;
	delete this.shipWillExitWitchspace;
	delete this.shipWillLaunchFromStation;
	delete this.performCheck;
	delete this.guiScreenChanged;
	delete this.alertConditionChanged;
	delete this.prepare;
	return;
}
/* Usage: worldScripts.vector_news.startNews(type); */
this.startNews = function(type,specifier)
{
	if(!missionVariables.TL_FOR_EQ_VECTOR_PAD) return(false);
	if(!this.showNews){
		if(type===2 &amp;&amp; this.newsPointer[2]&gt;2) this.changeEQ(1);
		return(false);
	}
	if(type===3) this.newsPointer[type] = specifier;
	if(this.objNews[type].length&lt;=this.newsPointer[type]) return(false);
	var m = &quot;&quot;,ID = &quot;&quot;,Ag = null,Pr = null,Pi = null,Mu = null,Mo = null,Po = null;
	m = expandMissionText(this.objNews[type][this.newsPointer[type]].m);
	if(this.objNews[type][this.newsPointer[type]].Ag) Ag = this.objNews[type][this.newsPointer[type]].Ag;
	if(this.objNews[type][this.newsPointer[type]].Pi) Pi = this.objNews[type][this.newsPointer[type]].Pi;
	if(this.objNews[type][this.newsPointer[type]].Mo) Mo = this.objNews[type][this.newsPointer[type]].Mo;
	if(this.objNews[type][this.newsPointer[type]].Po) Po = this.objNews[type][this.newsPointer[type]].Po;
	if(this.objNews[type][this.newsPointer[type]].Pr) Pr = this.objNews[type][this.newsPointer[type]].Pr;
	var obj = new Object({ID:this.name,Agency:Ag,Priority:Pr,Message:m,Pic:Pi,Music:Mu,Model:Mo,Pos:Po});
	var a = worldScripts.snoopers.insertNews(obj);
	if(!a){
		++this.newsPointer[type];
		return(true);
	} else return(false);
}
this.newsDisplayed = function(which)
{
	if(!worldScripts.vector_missionArn.grabSettings &amp;&amp; !worldScripts.vector_missionArn.deactivated) return;
	switch(which){
		case &quot;A MURDER investigati&quot;:
			worldScripts.vector_pad.padInfos.phones.current |= 1;
			worldScripts.vector_pad.addToLogbook(&quot;CAA&quot;,&quot;AAE&quot;); break;
		case &quot;Conspiracy or strang&quot;: worldScripts.vector_pad.addToLogbook(&quot;CAB&quot;); break;
		case &quot;We&#39;re trying to conf&quot;: worldScripts.vector_pad.addToLogbook(&quot;CAJ&quot;); break;
		case &quot;USQUEN -- On an open&quot;: worldScripts.vector_pad.addToLogbook(&quot;BAG&quot;); this.changeEQ(1); break;
	}
	return;
}
this.changeEQ = function(mode)
{
	switch(mode){
		case 1: if(!missionVariables.TL_FOR_EQ_VECTOR_SCOOPS) EquipmentInfo.infoForKey(&#39;EQ_VECTOR_SCOOPS&#39;).effectiveTechLevel = 9; break;
	}
	return;
}
this.shipWillExitWitchspace = function()
{
	this.placeSpecials();
}
this.shipWillLaunchFromStation = this.alertConditionChanged = function(w)
{
	if(this.saved) this.cleanMVs();
	if(w &amp;&amp; w.isValid) this.placeSpecials();
}
this.shipLaunchedFromStation = function()
{
	this.hasShown = false;
}
this.guiScreenChanged = function(w)
{
	if(!player.ship.isValid || player.ship.docked) return;
	if(this.saved) this.cleanMVs();
}
this.shipWillDockWithStation = function(station)
{
	this.killOVs();
	if(!player.ship.isValid || !station) return;
	this.checkers = [];
	switch(station.name){
		case &quot;vector_specialist&quot;:
			var a = station.script.granted;
			var b = station.subEntities[3].energy;
			this.checkers = [a,b];
			if(b&gt;1){
				var s = new SoundSource;
				s.sound = &quot;cabal_common_bang.ogg&quot;;
				s.play();
			}
			break;
	}
}
this.shipWillEnterWitchspace = function()
{
	this.killOVs();
	this.arnvisitor = false;
	this.changeMusicStatus(false);
}
this.killOVs = function()
{
	// Removing is necessary to avoid CTD
	var t = system.shipsWithRole(&quot;vector_ov&quot;);
	while(t.length){
		t[0].script.getRid(1,1);
		t.shift();
	}
	missionVariables.vector_cslot = null;
	missionVariables.vector_islot = null;
	return;
}
this.placeSpecials = function()
{
	var iss = false,nov = false,what,where,ori=false,boo=0;
	if(worldScripts.Cabal_Common_OXPStrength) boo = worldScripts.Cabal_Common_OXPStrength.checkOXPStrength.checkPower(player.ship);
	if(system.isInterstellarSpace) iss = true;
	else if(system.sun.isGoingNova || system.sun.hasGoneNova) nov = true;
	switch(galaxyNumber){
		case 5:
			if(!iss &amp;&amp; !nov){
				switch(system.ID){
					case 3:
						what = &quot;vector_areidisAlpha&quot;;
						where = new Vector3D([0.5,-0.5,-0.3]).fromCoordinateSystem(&quot;wsu&quot;);
						ori = system.sun;
						break;
					case 76:
						if(boo &amp;&amp; boo&lt;350){
							what = &quot;vector_specialist&quot;;
							where = system.sun.position.add([system.sun.radius*2,0,0]);
							this.changeMusicStatus(true);
						}
						break;
					case 84:
						what = &quot;vector_areidisDelta&quot;;
						where = new Vector3D([0.5,-0.5,-0.3]).fromCoordinateSystem(&quot;wsu&quot;);
						ori = system.sun;
						break;
					case 88:
						what = &quot;vector_areidisEpsilon&quot;;
						where = new Vector3D([0.5,-0.5,-0.3]).fromCoordinateSystem(&quot;wsu&quot;);
						ori = system.sun;
						break;
					case 184:
						what = &quot;vector_areidisGamma&quot;;
						where = new Vector3D([0.5,-0.5,-0.3]).fromCoordinateSystem(&quot;wsu&quot;);
						ori = system.sun;
						break;
					case 196:
						what = &quot;vector_areidisBeta&quot;;
						where = new Vector3D([0.5,-0.5,-0.3]).fromCoordinateSystem(&quot;wsu&quot;);
						ori = system.sun;
						break;
				}
			}
			break;
	}
	if(what){
		let a;
		if(system.countShipsWithRole(what)) return;
		if(where) a = system.addShips(what,1,where,10000);
		else a = system.addShips(what,1,player.ship.position,10000);
		if(a &amp;&amp; a.isValid &amp;&amp; ori) this.helper.entFaceEntity(a[0],ori);
	} else {
		this.changeMusicStatus(false);
	}
	return;
}
this.setMarketStats = function(who,typ,n,times)
{
	var d = this.secondaryInfos[who].goods[typ][n];
	d.times = times;
	if(worldScripts.Cabal_Common_SpecialMarkets.registerLocation(d)){
		this.secondaryInfos[who].state.trade.push([who,typ,n,times]);
		return(true);
	}
	return(false);
}
this.missionScreenOpportunity = function()
{
	if(!player.ship.isValid || !player.ship.docked || this.hasShown) return;
	switch(player.ship.dockedStation.name){
		case &quot;vector_specialist&quot;:
			var a = player.ship.dockedStation.script.granted;
			var b = player.ship.dockedStation.subEntities[3].energy;
			if(this.checkers[0]){
				if(this.checkers[1]&gt;1) this.showScreen(1,null,&quot;[VECTOR_SPECIALIST_AA]&quot;,&quot;VECTOR_SPECIALIST_A&quot;,&quot;vector_specialist.png&quot;,&quot;vector_ovfull.png&quot;,&quot;vector_intermezzo.ogg&quot;);
				else {
					switch(this.secondaryInfos.specialist.state.stage){
						case 0: this.showScreen(1,null,&quot;[VECTOR_SPECIALIST_AB]&quot;,null,&quot;vector_specialist.png&quot;,&quot;vector_ovfull.png&quot;,&quot;vector_opener.ogg&quot;); break;
						case 1: this.showScreen(1,null,&quot;[VECTOR_SPECIALIST_AC]&quot;,&quot;VECTOR_SPECIALIST_C&quot;,&quot;vector_specialist.png&quot;,&quot;vector_ovfull.png&quot;,&quot;vector_opener.ogg&quot;);
							worldScripts.vector_pad.addToLogbook(&quot;EAB &quot;+system.name,&quot;EAC&quot;); break;
						case 3: this.showScreen(1,null,&quot;[VECTOR_SPECIALIST_AE]&quot;,null,&quot;vector_specialist.png&quot;,&quot;vector_ovfull.png&quot;,&quot;vector_opener.ogg&quot;);
							this.secondaryInfos.specialist.state.stage = 4; player.ship.dockedStation.spawnOne(&quot;vector_specialistmark&quot;);
							player.credits += 1000; player.ship.fuel = 7; break;
						case 4: this.sceneA(); this.secondaryInfos.specialist.state.stage = 6; this.hasShown = true;
							worldScripts.vector_pad.padInfos.replay.push(this.secondaryInfos.specialist.scenes[0]);
							worldScripts.vector_pad.addToLogbook(&quot;EAD&quot;);
							break;
					}
				}
			} else {
				if(this.checkers[1]&gt;1){
					player.ship.energy /= this.checkers[1];
					player.ship.forwardShield /= this.checkers[1];
					player.ship.aftShield /= this.checkers[1];
				}
				if(player.ship.dockedStation.script.psa) this.showScreen(1,null,&quot;[VECTOR_ARNVISIT4NA]&quot;,&quot;VECTOR_SPECIALIST_A&quot;,&quot;vector_specialist.png&quot;,&quot;vector_ovfull.png&quot;,&quot;vector_caught.ogg&quot;);
				else this.showScreen(1,null,&quot;[VECTOR_SPECIALIST_AA]&quot;,&quot;VECTOR_SPECIALIST_A&quot;,&quot;vector_specialist.png&quot;,&quot;vector_ovfull.png&quot;,&quot;vector_intermezzo.ogg&quot;);
			}
			break;
	}
}
this.showScreen = function(sho,tit,tex,chc,pic,ov,mus,mod)
{
	if(sho) this.hasShown = true;
	var spin = false;
	if(!tit) tit = player.ship.dockedStation.displayName;
	if(tex &amp;&amp; tex[0]===&quot;[&quot;){
		tex = tex.substr(1,tex.length-2);
		tex = expandMissionText(tex);
	}
	if(chc) mission.runScreen({title:tit,message:tex,choicesKey:chc,background:pic,overlay:ov,model:mod,spinModel:spin,music:mus},this.choiceEval);
	else mission.runScreen({title:tit,message:tex,background:pic,overlay:ov,model:mod,music:mus});
}
this.choiceEval = function(choice){worldScripts.vector_news.choiceEvaluation(choice); return;}
this.choiceEvaluation = function(choice)
{
	switch(choice){
		case &quot;VECTOR_SPECIALIST_EXIT&quot;:
			player.ship.launch();
			break;
		case &quot;VECTOR_SPECIALIST_ACCEPT&quot;:
			this.secondaryInfos.specialist.state.stage = 2;
			worldScripts.vector_pad.addToLogbook(&quot;BAH Intisoar&quot;);
			this.showScreen(1,null,&quot;[VECTOR_SPECIALIST_AD]&quot;,null,&quot;vector_specialist.png&quot;,&quot;vector_ovfull.png&quot;,&quot;vector_opener.ogg&quot;);
			this.setMarketStats(&quot;specialist&quot;,&quot;illegal&quot;,0,clock.days-10); 
			break;
	}
	return;
}
this.sceneA = function(n)
{
	var objA = {
		role:&quot;vector_buildUpA&quot;,
		getOri:&quot;vector_buildO&quot;,
		getPos:&quot;vector_buildP&quot;,
		prepareProps:{energy:0,fuel:0},
		briefing:[
			[0,&quot;mes&quot;,&quot;\f\f\f\fNow I&#39;ll show you something.&quot;],
			[9,&quot;mes&quot;,&quot;\f\f\f\fMatrix generator enabled.&quot;],
			[10,&quot;prop&quot;,[0,-1,&quot;energy&quot;,130,0,0,0]],
			[11,&quot;prop&quot;,[0,-1,&quot;energy&quot;,0.02,60,0,40]],
			[50,&quot;mes&quot;,&quot;\f\f\f\fCalculating hull.&quot;],
			[150,&quot;mes&quot;,&quot;\f\f\f\fEstablishing welding and plating.&quot;],
			[230,&quot;prop&quot;,[0,-1,&quot;lightsActive&quot;,true,0,0,0],null],
			[250,&quot;mes&quot;,&quot;\f\f\f\fReady for a testride.&quot;],
			[251,&quot;mVelo&quot;,[0,-1,2,1.003,0,0,1,0.85,0.85],null,&quot;ccl_briefing_enginestart.ogg&quot;],
			[260,&quot;prop&quot;,[0,0,&quot;energy&quot;,7,5,1,0]],
			[270,&quot;mSpeed&quot;,[0,-1,6,370,0,4,0]],
			[285,&quot;prop&quot;,[0,-1,&quot;energy&quot;,-2,10,0,0]],
			[286,&quot;prop&quot;,[0,0,&quot;energy&quot;,0,0,0,0]],
			[300,&quot;stopVelo&quot;,[0,-1]],
			[301,0]
		],
		title:&quot;The Specialist - Building&quot;,
		background:&quot;vector_buildUpA.png&quot;,
		callback:this.name,
		callbackf:&quot;choiceEval&quot;,
		music:&quot;vector_cubesm.ogg&quot;
	};
	worldScripts.Cabal_Common_Briefing.startBriefing(objA);
	return;
}
this.specialCargo = function(what,amount){worldScripts.vector_news.specialCargoEval(what,amount); return;}
this.specialCargoEval = function(what,amount)
{
	var c = false;
	switch(what){
		case &quot;Dephrac Crystals&quot;:
			this.secondaryInfos.specialist.state.stage = 3;
			this.secondaryInfos.specialist.state.trade = [];
			c=true;
			break;
	}
	return(c);
}
this.startMusicSet = function(arr,ini)
{
	var eventMusic = {who:this.name,start:ini};
	for(let i=0;i&lt;arr.length;i++){
		let a = (arr[i]&amp;0xFF0000)&gt;&gt;16,b = (arr[i]&amp;0xFF00)&gt;&gt;8,c = arr[i]&amp;0xFF;
		if(!eventMusic.hasOwnProperty(this.ccl_handlers[a][0])) eventMusic[ccl_handlers[a][0]] = {};
		if(!eventMusic[this.ccl_handlers[a][0]].hasOwnProperty(this.ccl_handlers[a][b])) eventMusic[this.ccl_handlers[a][0]][this.ccl_handlers[a][b]] = [];
		eventMusic[this.ccl_handlers[a][0]][this.ccl_handlers[a][b]].push(this.ccl_music[c]);
	}
	worldScripts.Cabal_Common_Music.addMedia(eventMusic);
	return;
}
this.changeMusicStatus = function(stat)
{
	worldScripts.Cabal_Common_Music.changeStatus(this.name,stat);
	return;
}
this.removeMusic = function()
{
	worldScripts.Cabal_Common_Music.removeMedia(this.name);
	return;
}
this.VectorOV = function(){}
VectorOV.prototype = {
	addOv: function(s,which,always,slot,simple,sounds){
		if(always || missionVariables.TL_FOR_EQ_VECTOR_PAD){
			var a = &#39;vector_ov&#39;+which;
			if(!system.countShipsWithRole(a)){
				let vu = player.ship.vectorUp.multiply(300.0);
				let pos = player.ship.position.add(player.ship.vectorForward.multiply(300)).subtract(vu);
				var shw = system.addShips(a,1,pos,1000)[0];
			} else var shw = system.shipsWithRole(a)[0];
			if(s) shw.script.passPods(slot,simple);
			else {
				if(sounds) shw.script.speakUp(slot,simple,sounds);
				else shw.script.speakUp(slot,simple);
			}
		}
		return;
	},
	offPosition: function(){
		var moveOutPos;
		if(system.isInterstellarSpace || !system.sun || system.sun.isGoingNova || system.sun.hasGoneNova) moveOutPos = new Vector3D([100000,74580,0]);
		else moveOutPos = system.sun.position;
		var pos = moveOutPos.multiply(20).add([1000,0,0]);
		return(pos);
	},
	addCharacterOVOff: function(which){
		var a = &#39;vector_ov&#39;+which;
		if(!system.countShipsWithRole(a)){
			var shw = system.addShips(a,1,this.offPosition(),1000)[0];
			shw.script.addSilent();
		}
		return;
	}
};
</pre></td>
                </tr>
                <tr>
                    <td valign="top">Scripts/vector_ovc.js</td>
                    <td><pre>&quot;use strict&quot;;
this.name = &quot;vector_ovc&quot;;
this.author = &quot;Svengali&quot;;
this.copyright = &quot;CC-by-nc-sa-3.0&quot;;
this.description = &quot;Overlays Characters&quot;;
this.version = &quot;1.7.1&quot;;

this.shipSpawned = function()
{
	this.getSlot();
	this.cycle = parseInt(this.ship.scriptInfo.vector_ovcycle);
	this.getPos();
	if(!this.reposTimer) this.reposTimer = new Timer(this,this.repositionIt,0,3.81);
	delete this.shipSpawned;
}
this.repositionIt = function()
{
	if(!player.ship.isValid || player.ship.docked){this.getRid(1,1); return;}
	if(!this.cycle){
		this.ship.position = this.moveOutPos.add([1000+this.ship.fuel,0,0]);
		this.getRid();
		return;
	}
	let a = player.ship.vectorForward.multiply(400.0*(this.ship.fuel+1)),b = player.ship.vectorUp.multiply(200.0*(this.ship.fuel+1));
	this.ship.position = player.ship.position.subtract(a).subtract(b);
	this.ship.orientation = player.ship.orientation;
	if(this.cycle&gt;0) this.cycle--;
	if(this.displayMessage){
		var mySound = new SoundSource;
		if(this.displaySound) mySound.sound = this.displaySound;
		else mySound.sound = &#39;[vector_peep]&#39;;
		mySound.play();
		if(typeof(this.displayMessage)===&#39;string&#39;) this.ship.commsMessage(this.displayMessage);
		else this.displayMessage.ent.commsMessage(this.displayMessage.message);
		delete this.displayMessage;
	}
	return;
}
this.getRid = function(way,all)
{
	if(this.reposTimer) this.reposTimer.stop();
	missionVariables.vector_cslot &amp;= 0xffff-Math.pow(2,this.ship.fuel);
	if(way) this.ship.remove(true);
	if(all) missionVariables.vector_cslot = null;
	else if(missionVariables.vector_cslot===&quot;0&quot;) missionVariables.vector_cslot = null;
	return;
}
this.shipRemoved = function(suppressDeathEvent)
{
	delete this.shipDied;
	return;
}
this.shipDied = this.shipWillEnterWitchspace = function()
{
	this.getRid();
	return;
}
this.speakUp = function(slot,message,audio)
{
	if(!slot &amp;&amp; (!this.reposTimer || !this.reposTimer.isRunning)) this.getSlot();
	this.cycle = parseInt(this.ship.scriptInfo.vector_ovcycle);
	if(!this.moveOutPos) this.getPos();
	if(!this.reposTimer) this.reposTimer = new Timer(this,this.repositionIt,0,3.81);
	else {
		if(!this.reposTimer.isRunning){
			this.reposTimer.nextTime = clock.absoluteSeconds+1;
			this.reposTimer.start();
		}
	}
	if(message) this.displayMessage = message;
	if(audio) this.displaySound = audio;
	delete this.shipSpawned;
	return;
}
this.addSilent = function()
{
	delete this.shipSpawned;
	this.cycle = 0;
	this.getPos();
	if(this.reposTimer) this.reposTimer.stop();
	return;
}
this.getSlot = function()
{
	if(missionVariables.vector_cslot===null) missionVariables.vector_cslot = 0;
	var a = parseInt(missionVariables.vector_cslot);
	for(var i=0;i&lt;8;i++){
		var o = Math.pow(2,i);
		if(!(a&amp;o)){
			this.ship.fuel = i;
			missionVariables.vector_cslot |= o;
			break;
		}
	}
	return;
}
this.getPos = function()
{
	if(system.isInterstellarSpace || !system.sun || system.sun.isGoingNova || system.sun.hasGoneNova) this.moveOutPos = new Vector3D([100000,66640,0]);
	else this.moveOutPos = system.sun.position;
	this.moveOutPos = this.moveOutPos.multiply(20);
	return;
}</pre></td>
                </tr>
                <tr>
                    <td valign="top">Scripts/vector_ovi.js</td>
                    <td><pre>&quot;use strict&quot;;
this.name = &quot;vector_ovi&quot;;
this.author = &quot;Svengali&quot;;
this.copyright = &quot;CC-by-nc-sa-3.0&quot;;
this.description = &quot;Overlays Instruments and Special Point Markers&quot;;
this.version = &quot;1.7.1&quot;;

this.shipSpawned = function()
{
	this.getSlot();
	this.cycle = parseInt(this.ship.scriptInfo.vector_ovcycle);
	if(this.ship.primaryRole===&#39;vector_ov02&#39;) this.passPods(1);
	this.getMoveOutPos();
	if(!this.reposTimer) this.reposTimer = new Timer(this,this.repositionIt,0,3.81);
	delete this.shipSpawned;
}
this.getMoveOutPos = function()
{
	if(system.isInterstellarSpace || !system.sun || system.sun.isGoingNova || system.sun.hasGoneNova) this.moveOutPos = new Vector3D([100000,55550,0]);
	else this.moveOutPos = system.sun.position;
	this.moveOutPos = this.moveOutPos.multiply(20);
	return;
}
this.repositionIt = function()
{
	if(!player.ship.isValid || player.ship.docked){this.getRid(1,1); return;}
	if(!this.cycle){
		this.ship.position = this.moveOutPos.add([1000+this.ship.fuel,0,0]);
		this.getRid();
		return;
	}
	let a = player.ship.vectorForward.multiply(200.0*(this.ship.fuel+1)),b = player.ship.vectorUp.multiply(400.0*(this.ship.fuel+1));
	this.ship.position = player.ship.position.subtract(a).subtract(b);
	this.ship.orientation = player.ship.orientation;
	if(this.cycle&gt;0) this.cycle--;
	return;
}
this.getRid = function(way,all)
{
	if(this.reposTimer) this.reposTimer.stop();
	missionVariables.vector_islot &amp;= 0xffff-Math.pow(2,this.ship.fuel);
	if(way) this.ship.remove(true);
	if(all) missionVariables.vector_islot = null;
	else if(missionVariables.vector_islot===&quot;0&quot;) missionVariables.vector_islot = null;
	return;
}
this.shipRemoved = function(suppressDeathEvent)
{
	delete this.shipDied;
	return;
}
this.shipDied = this.shipWillEnterWitchspace = function()
{
	this.getRid();
	return;
}
this.passPods = function(slot,simple)
{
	if(!slot &amp;&amp; (!this.reposTimer || !this.reposTimer.isRunning)) this.getSlot();
	if(!simple){
		var d=0,c = worldScripts.vector_pad.padInfos.generic.cpods,e = worldScripts.vector_pad.padInfos.generic.epods;
		if(c) d = Math.pow(2,c)-1;
		if(e) for(let i=0;i&lt;e;i++){d += Math.pow(2,i+5);}
		this.ship.energy = 100+d;
		player.consoleMessage(&quot;Cargo:&quot;+c+&quot; Pods:&quot;+e);
	}
	this.cycle = parseInt(this.ship.scriptInfo.vector_ovcycle);
	if(!this.moveOutPos) this.getMoveOutPos();
	if(!this.reposTimer) this.reposTimer = new Timer(this,this.repositionIt,0,3.81);
	else {
		if(!this.reposTimer.isRunning){
			this.reposTimer.nextTime = clock.absoluteSeconds+1;
			this.reposTimer.start();
		}
	}
	delete this.shipSpawned;
	return;
}
this.getSlot = function()
{
	if(missionVariables.vector_islot===null) missionVariables.vector_islot = 0;
	var a = parseInt(missionVariables.vector_islot);
	for(var i=0;i&lt;8;i++){
		var o = Math.pow(2,i);
		if(!(a&amp;o)){
			this.ship.fuel = i;
			missionVariables.vector_islot = a+o;
			break;
		}
	}
	return;
}
// Later on I&#39;ll move it into a multiEQ script
this.activated = function(equipmentKey)
{
	switch(this.equipmentKey){
		case &quot;EQ_VECTOR_SPACELANE&quot;:
			if(!system.countShipsWithRole(&#39;vector_ov01&#39;)) var a = system.addShips(&#39;vector_ov01&#39;,1,player.ship.position.add([5000,0,-500]))[0];
			else {
				var a = system.shipsWithRole(&#39;vector_ov01&#39;)[0];
				a.script.cycle = 0;
			}
			break;
		case &quot;EQ_VECTOR_SCOOPS&quot;:
			if(!system.countShipsWithRole(&#39;vector_ov02&#39;)) var a = system.addShips(&#39;vector_ov02&#39;,1,player.ship.position.add([5000,0,-500]))[0];
			else {
				var a = system.shipsWithRole(&#39;vector_ov02&#39;)[0];
				a.script.passPods();
			}
			break;
	}
}
</pre></td>
                </tr>
                <tr>
                    <td valign="top">Scripts/vector_pad.js</td>
                    <td><pre>&quot;use strict&quot;;
this.name = &quot;vector_pad&quot;;
this.author = &quot;Svengali&quot;;
this.copyright = &quot;CC-by-nc-sa-3.0&quot;;
this.description = &quot;PAD&quot;;
this.version = &quot;1.7.2&quot;;

this.startUp = function()
{
	delete this.startUp;
	if(missionVariables.TL_FOR_EQ_VECTOR_PAD) delete this.shipExitedWitchspace;
	else this.showBenus = false;
	if(!worldScripts.Cabal_Common_Functions || typeof(worldScripts.Cabal_Common_Functions.Cabal_Common)===&#39;undefined&#39;){this.killSelf(&quot; -&gt; Cabal_Common_Library is missing.&quot;); return;}
	this.helper = new worldScripts.Cabal_Common_Functions.Cabal_Common();
	if(this.helper.internalVersion&lt;14){this.killSelf(&quot; -&gt; Cabal_Common_Functions is too old.&quot;); return;}
	delete this.killSelf;
	this.core = [];
	this.compEnts = [];
	this.actOnEnts = 55;
	this.seenArn = false;
	this.padSound = new SoundSource;
	function fib(){var i=0,j=1; while(true){yield i;[i,j] = [j,i+j];}}
	var g = fib(); for(let i=0;i&lt;50;i++){let a = g.next(); if(i&gt;40) this.core.push(a);}
	this.padInfos = {
		areidis:{
			materials: [
				{&quot;vector_modelview.png&quot;:{fragment_shader:&quot;vector_ovcode.fragment&quot;,vertex_shader:&quot;vector_ov.vertex&quot;,textures:[&quot;vector_modelview.png&quot;,{name:&quot;vector_codes.png&quot;,repeat_s:&quot;yes&quot;,min_filter:&quot;linear&quot;}],uniforms:{tex0:{type:&quot;texture&quot;,value:0},tex1:{type:&quot;texture&quot;,value:1},uDisplay:{type:&quot;int&quot;,value:0},uFuel:&quot;fuel&quot;,uTime:&quot;timeElapsedSinceSpawn&quot;,uDestination:{type:&quot;vector&quot;,value:&quot;0.56 -0.62 1.0 1.0&quot;},uVRA:{type:&quot;vector&quot;,value:&quot;4.0 1.0 4.0 1.0&quot;},uVWA:{type:&quot;vector&quot;,value:&quot;0.0 0.0 3.0 1.0&quot;},uVRB:{type:&quot;vector&quot;,value:&quot;1.0 5.0 0.0 1.0&quot;},uVWB:{type:&quot;vector&quot;,value:&quot;0.0 6.0 1.0 1.0&quot;},uVRC:{type:&quot;vector&quot;,value:&quot;3.0 0.0 2.0 1.0&quot;},uVWC:{type:&quot;vector&quot;,value:&quot;3.0 5.0 6.0 1.0&quot;}}}},
				{&quot;vector_modelview.png&quot;:{fragment_shader:&quot;vector_ovcode.fragment&quot;,vertex_shader:&quot;vector_ov.vertex&quot;,textures:[&quot;vector_modelview.png&quot;,{name:&quot;vector_codes.png&quot;,repeat_s:&quot;yes&quot;,min_filter:&quot;linear&quot;}],uniforms:{tex0:{type:&quot;texture&quot;,value:0},tex1:{type:&quot;texture&quot;,value:1},uDisplay:{type:&quot;int&quot;,value:0},uFuel:&quot;fuel&quot;,uTime:&quot;timeElapsedSinceSpawn&quot;,uDestination:{type:&quot;vector&quot;,value:&quot;0.56 -0.62 1.0 1.0&quot;},uVRA:{type:&quot;vector&quot;,value:&quot;2.0 4.0 1.0 1.0&quot;},uVWA:{type:&quot;vector&quot;,value:&quot;5.0 0.0 6.0 1.0&quot;},uVRB:{type:&quot;vector&quot;,value:&quot;0.0 3.0 4.0 1.0&quot;},uVWB:{type:&quot;vector&quot;,value:&quot;0.0 3.0 1.0 1.0&quot;},uVRC:{type:&quot;vector&quot;,value:&quot;5.0 4.0 1.0 1.0&quot;},uVWC:{type:&quot;vector&quot;,value:&quot;3.0 2.0 5.0 1.0&quot;}}}},
				{&quot;vector_modelview.png&quot;:{fragment_shader:&quot;vector_ovcode.fragment&quot;,vertex_shader:&quot;vector_ov.vertex&quot;,textures:[&quot;vector_modelview.png&quot;,{name:&quot;vector_codes.png&quot;,repeat_s:&quot;yes&quot;,min_filter:&quot;linear&quot;}],uniforms:{tex0:{type:&quot;texture&quot;,value:0},tex1:{type:&quot;texture&quot;,value:1},uDisplay:{type:&quot;int&quot;,value:0},uFuel:&quot;fuel&quot;,uTime:&quot;timeElapsedSinceSpawn&quot;,uDestination:{type:&quot;vector&quot;,value:&quot;0.56 -0.62 1.0 1.0&quot;},uVRA:{type:&quot;vector&quot;,value:&quot;5.0 4.0 3.0 1.0&quot;},uVWA:{type:&quot;vector&quot;,value:&quot;0.0 2.0 3.0 1.0&quot;},uVRB:{type:&quot;vector&quot;,value:&quot;4.0 0.0 2.0 1.0&quot;},uVWB:{type:&quot;vector&quot;,value:&quot;0.0 7.0 3.0 1.0&quot;},uVRC:{type:&quot;vector&quot;,value:&quot;1.0 1.0 5.0 1.0&quot;},uVWC:{type:&quot;vector&quot;,value:&quot;5.0 6.0 3.0 1.0&quot;}}}},
				{&quot;vector_modelview.png&quot;:{fragment_shader:&quot;vector_ovcode.fragment&quot;,vertex_shader:&quot;vector_ov.vertex&quot;,textures:[&quot;vector_modelview.png&quot;,{name:&quot;vector_codes.png&quot;,repeat_s:&quot;yes&quot;,min_filter:&quot;linear&quot;}],uniforms:{tex0:{type:&quot;texture&quot;,value:0},tex1:{type:&quot;texture&quot;,value:1},uDisplay:{type:&quot;int&quot;,value:0},uFuel:&quot;fuel&quot;,uTime:&quot;timeElapsedSinceSpawn&quot;,uDestination:{type:&quot;vector&quot;,value:&quot;0.56 -0.62 1.0 1.0&quot;},uVRA:{type:&quot;vector&quot;,value:&quot;4.0 5.0 1.0 1.0&quot;},uVWA:{type:&quot;vector&quot;,value:&quot;6.0 3.0 6.0 1.0&quot;},uVRB:{type:&quot;vector&quot;,value:&quot;3.0 2.0 1.0 1.0&quot;},uVWB:{type:&quot;vector&quot;,value:&quot;6.0 5.0 0.0 1.0&quot;},uVRC:{type:&quot;vector&quot;,value:&quot;4.0 0.0 5.0 1.0&quot;},uVWC:{type:&quot;vector&quot;,value:&quot;6.0 6.0 0.0 1.0&quot;}}}},
				{&quot;vector_modelview.png&quot;:{fragment_shader:&quot;vector_ovcode.fragment&quot;,vertex_shader:&quot;vector_ov.vertex&quot;,textures:[&quot;vector_modelview.png&quot;,{name:&quot;vector_codes.png&quot;,repeat_s:&quot;yes&quot;,min_filter:&quot;linear&quot;}],uniforms:{tex0:{type:&quot;texture&quot;,value:0},tex1:{type:&quot;texture&quot;,value:1},uDisplay:{type:&quot;int&quot;,value:0},uFuel:&quot;fuel&quot;,uTime:&quot;timeElapsedSinceSpawn&quot;,uDestination:{type:&quot;vector&quot;,value:&quot;0.56 -0.62 1.0 1.0&quot;},uVRA:{type:&quot;vector&quot;,value:&quot;2.0 2.0 0.0 1.0&quot;},uVWA:{type:&quot;vector&quot;,value:&quot;0.0 5.0 4.0 1.0&quot;},uVRB:{type:&quot;vector&quot;,value:&quot;1.0 3.0 5.0 1.0&quot;},uVWB:{type:&quot;vector&quot;,value:&quot;6.0 3.0 0.0 1.0&quot;},uVRC:{type:&quot;vector&quot;,value:&quot;5.0 3.0 4.0 1.0&quot;},uVWC:{type:&quot;vector&quot;,value:&quot;3.0 0.0 0.0 1.0&quot;}}}}
			],
			cubic: [3440,4415,4611,5240,7846],
			code: &quot;VECTOR_CODEHINTS&quot;,
			hints: [
				{hint:&quot;VECTOR_CODEHINTAA&quot;,fib:0},
				{hint:&quot;VECTOR_CODEHINTAA&quot;,fib:0},
				{hint:&quot;VECTOR_CODEHINTAA&quot;,fib:0},
				{hint:&quot;VECTOR_CODEHINTAA&quot;,fib:0},
				{hint:&quot;VECTOR_CODEHINTAA&quot;,fib:0},
			],
			names: [&#39;Alpha&#39;,&#39;Beta&#39;,&#39;Gamma&#39;,&#39;Delta&#39;,&#39;Epsilon&#39;],
			locations:[3,196,184,84,88],
			codes:[0,0,0,0,0,0],
			pwd:[&quot;VECTOR_AREIDIS_CA&quot;,&quot;VECTOR_AREIDIS_CB&quot;,&quot;VECTOR_AREIDIS_CC&quot;,&quot;VECTOR_AREIDIS_CD&quot;,&quot;VECTOR_AREIDIS_CE&quot;,&quot;&quot;],
			messages:[&quot;VECTOR_AREIDIS_MA&quot;,&quot;VECTOR_AREIDIS_MB&quot;,&quot;VECTOR_AREIDIS_MC&quot;,&quot;VECTOR_AREIDIS_MD&quot;,&quot;VECTOR_AREIDIS_ME&quot;,&quot;&quot;],
			display:{
				who:[&quot;Linda Bevenger&quot;,&quot;&quot;,&quot;&quot;,&quot;&quot;,&quot;&quot;,&quot;&quot;],
				where:[&quot;Unknown&quot;,&quot;Unknown&quot;,&quot;Unknown&quot;,&quot;Unknown&quot;,&quot;Unknown&quot;,&quot;Unknown&quot;]
			}
		},
		ranks: {
			names: [&quot;Inofficial&quot;,&quot;GCI Private Second Class&quot;,&quot;GCI Private First Class&quot;,&quot;GCI Sergeant&quot;,&quot;GCI Lieutenant&quot;,&quot;GCI Captain&quot;,&quot;None&quot;]
		},
		medals: {
			names: [&quot;Confed Blue Belt Medal&quot;,&quot;Confed Medal of Services&quot;,&quot;Confed Medal of Honour&quot;,&quot;Confed Cross Medal&quot;,&quot;Confed White Star Medal&quot;,&quot;Confed Defender of Freedom Medal&quot;],
			energy: [101,103,107,115,131,163]
		},
		phones: {
			code: &quot;VECTOR_NUMBERS&quot;,
			who:[
				{link:&quot;VECTOR_NUMBERAA&quot;,fib:0},
				{link:&quot;VECTOR_NUMBERAB&quot;,fib:0},
				{link:&quot;VECTOR_NUMBERAC&quot;,fib:0},
				{link:&quot;VECTOR_NUMBERAD&quot;,fib:0},
				{link:&quot;VECTOR_NUMBERAE&quot;,fib:0},
				{link:&quot;VECTOR_NUMBERAF&quot;,fib:0}
			],
			current:0
		},
		linkUp: {
			code: &quot;VECTOR_ARNHINTS&quot;,
			dialOK: &quot;vector_phoneA.ogg&quot;,
			dialNO: &quot;vector_phoneB.ogg&quot;,
			who:[
				{tov:&quot;vector_ov09.png&quot;,tme:[&quot;VECTOR_ARNHINTAA&quot;,&quot;VECTOR_ARNHINTAB&quot;],fib:0},
				{tov:&quot;vector_ov14.png&quot;,tme:[&quot;VECTOR_ARNHINTBA&quot;],fib:0},
				{tov:&quot;vector_ov13.png&quot;,tme:[&quot;VECTOR_ARNHINTCA&quot;],fib:0},
				{tov:&quot;vector_ov01.png&quot;,tme:[&quot;VECTOR_ARNHINTDA&quot;],fib:0},
				{tov:&quot;vector_ov01.png&quot;,tme:[&quot;VECTOR_ARNHINTEA&quot;],fib:0},
				{tov:&quot;vector_ov10.png&quot;,tme:[&quot;VECTOR_ARNHINTFA&quot;],fib:0}
			]
		},
		replay:[],
		logExtensions:[],
		generic: {
			cpod:[],
			cpods:0,
			epod:[],
			epods:0,
			expFactor:1,
			passengerState:0,
			superman:0
		}
	};
	if(!missionVariables.vector_logbook) this.logbook = [&quot;AAA&quot;];
	else this.logbook = missionVariables.vector_logbook.split(&#39;|&#39;);
	if(missionVariables.vector_codes) this.padInfos.areidis.codes = missionVariables.vector_codes.split(&#39;|&#39;);
	if(missionVariables.vector_areidis) this.padInfos.areidis.display = JSON.parse(missionVariables.vector_areidis);
	if(missionVariables.vector_generic) this.padInfos.generic = JSON.parse(missionVariables.vector_generic);
	if(missionVariables.vector_expFactor) this.padInfos.generic.expFactor = parseInt(missionVariables.vector_expFactor);
	if(missionVariables.vector_phone) this.padInfos.phones.current = parseInt(missionVariables.vector_phone);
	if(!this.padInfos.generic.hasOwnProperty(&quot;superman&quot;)) this.padInfos.generic.superman = 0;
	this.cleanMVs();
}
this.playerWillSaveGame = function()
{
	missionVariables.vector_codes = this.padInfos.areidis.codes.join(&#39;|&#39;);
	missionVariables.vector_areidis = JSON.stringify(this.padInfos.areidis.display);
	missionVariables.vector_generic = JSON.stringify(this.padInfos.generic);
	missionVariables.vector_phone = this.padInfos.phones.current;
	missionVariables.vector_logbook = this.logbook.join(&#39;|&#39;);
	this.mvClean = true;
}
this.guiScreenChanged = function()
{
	if(player.ship.docked &amp;&amp; this.mvClean){
		this.cleanMVs();
		delete this.mvClean;
	}
}
this.cleanMVs = function()
{
	missionVariables.vector_areidis = null;
	missionVariables.vector_codes = null;
	missionVariables.vector_expFactor = null;
	missionVariables.vector_generic = null;
	missionVariables.vector_logbook = null;
	missionVariables.vector_phone = null;
	return;
}
this.killSelf = function(desc)
{
	if(desc!==1){
		player.consoleMessage(this.name+&quot; - Check your Latest.log.&quot;,10);
		log(this.name,this.name+&quot; - Shutting down.&quot;+desc);
	}
	var leave = [&#39;name&#39;,&#39;version&#39;,&#39;startPad&#39;,&#39;addToLogbook&#39;,&#39;clearLogbook&#39;,&#39;logbook&#39;,&#39;playerBoughtEquipment&#39;,&#39;oolite_manifest_identifier&#39;];
	for(prop in this){if(leave.indexOf(prop)===-1) delete this[prop];}
	this.deactivated = true;
	return;
}
this.playerBoughtEquipment = function(equipmentKey)
{
	if(equipmentKey===&#39;EQ_VECTOR_PAD&#39;){
		player.ship.removeEquipment(&#39;EQ_VECTOR_PAD&#39;);
		if(!this.deactivated) this.startPAD();
		else player.consoleMessage(&quot;Nope. Still no Cabal_Common_Library.&quot;);
	}
	return;
}
this.startPAD = function(direct)
{
	if(this.deactivated || !player.ship.docked || !missionVariables.TL_FOR_EQ_VECTOR_PAD) return;
	this.pad = {logPages:12,logScreen:0,comms:[],cb:0,codePages:0,codeScreen:1,scenePage:0,sceneCur:0};
	if(direct){
		switch(direct){
			case &#39;codes&#39;: delete this.currentCodes; this.showCodes(); break;
		}
	}
	this.showOverview();
	return;
}
this.showOverview = function()
{
	var sel = 0,chc = &quot;&quot;;
	if(this.padInfos.phones.current) sel |= 1;
	if(this.padInfos.areidis.codes[0]) sel |= 2;
	if(this.padInfos.replay.length) sel |= 4;
	if(!sel) chc = &#39;VECTOR_PADOVERVIEWA&#39;;
	else {
		if(sel===1) chc = &#39;VECTOR_PADOVERVIEWB&#39;;
		else {
			if((sel&amp;4)) chc = &#39;VECTOR_PADOVERVIEWE&#39;;
			else {
				if((sel&amp;1)) chc = &#39;VECTOR_PADOVERVIEWD&#39;;
				else chc = &#39;VECTOR_PADOVERVIEWC&#39;;
			}
		}
	}
	mission.runScreen({title:&quot;P.A.D&quot;,choicesKey:chc,background:&#39;vector_pad.png&#39;,model:&#39;vector_padOverview&#39;,spinModel:false},this.padEval);
	var mod = mission.displayModel;
	mod.energy = 100;
	mission.addMessageText(&quot;Name: \r\r\r\r\r&quot;+player.name+&quot;\r\r\r\r\rGC-ID: #&quot;+player.ship.entityPersonality);
	mission.addMessageText(&quot;Account:\r\r\r\r&quot;+player.credits.toFixed(1)+&quot;\nStatus:\r\r\r\r\r&quot;+player.legalStatus+&quot;\nClassification: \r&quot;+player.rank+&quot;\nRating:\r\r\r\r\r&quot;+player.score);
	var exp = parseInt(this.padInfos.generic.expFactor);
	if(exp&lt;=1) var b = &quot;none&quot;;
	else {
		var a = Math.floor(exp*0.33),b = &#39;&#39;;
		while(a--){b += &#39;\b&#39;;}
	}
	mission.addMessageText(&quot;\nGuild Rank: &quot;+b);
	if(missionVariables.vector_gcirank){
		b = missionVariables.vector_gcirank;
		mission.addMessageText(&quot;\nGCI Rank:\f\f\f\f\f\f&quot;+b);
		mod.fuel = this.padInfos.ranks.names.indexOf(b);
		if(missionVariables.vector_gcimedal){
			mission.addMessageText(&quot;Medals:&quot;);
			var c = this.padInfos.medals.names.indexOf(missionVariables.vector_gcimedal);
			if(c!==-1){
				for(let i=0;i&lt;c+1;i++) mission.addMessageText(&quot;- &quot;+this.padInfos.medals.names[i]);
				mod.energy = this.padInfos.medals.energy[c];
			}
		}
	}
	return;
}
this.showLogbook = function()
{ // Special signs # = get name for system.ID, $ = credits, &amp; = more than a word
	if(this.logbook.length&lt;this.pad.logPages+1) mission.runScreen({title:&quot;P.A.D&quot;,choicesKey:&#39;VECTOR_PADLOGBOOKA&#39;,background:&#39;vector_pad.png&#39;},this.padEval);
	else {
		if(this.logbook.length&gt;this.pad.logScreen+this.pad.logPages){
			if(this.pad.logScreen &amp;&amp; this.logbook.length&gt;this.pad.logScreen+this.pad.logPages) mission.runScreen({title:&quot;P.A.D&quot;,choicesKey:&#39;VECTOR_PADLOGBOOKC&#39;,background:&#39;vector_pad.png&#39;},this.padEval);
			else mission.runScreen({title:&quot;P.A.D&quot;,choicesKey:&#39;VECTOR_PADLOGBOOKB&#39;,background:&#39;vector_pad.png&#39;},this.padEval);
		} else mission.runScreen({title:&quot;P.A.D&quot;,choicesKey:&#39;VECTOR_PADLOGBOOKD&#39;,background:&#39;vector_pad.png&#39;},this.padEval);
	}
	var txt = &quot;\f\f\f\f\f\f\f\f\f\f\f\f\f\f\f\f\fLogs from: &quot;+this.pad.logScreen+&quot; of &quot;+this.logbook.length+&quot;\n\n&quot;;
	var display = &quot;&quot;,m = this.logbook.length,check;
	for(var d=this.pad.logScreen;d&lt;this.pad.logScreen+this.pad.logPages;d++){
		if(m-1&gt;=d){
			let a = this.logbook[d].split(&#39; &#39;);
			check = expandMissionText(&#39;VECTOR_PAD&#39;+a[0]);
			if(check===&#39;null&#39; || !check &amp;&amp; this.padInfos.logExtensions.length){
				for(let ex=0;ex&lt;this.padInfos.logExtensions.length;ex++){
					check = expandMissionText(this.padInfos.logExtensions[ex]+a[0]);
					if(check) break;
				}
			}
			// External entries available?
			if(check===&#39;null&#39; || !check) display += &quot;- not available -\n&quot;;
			else {
				if(a.length&gt;1){
					display += check+&quot; &quot;;
					let b = a[1][0];
					let c = a[1].substr(1);
					if(b===&#39;#&#39;) display += System.systemNameForID(c)+&quot;.\n&quot;;
					else {
						if(b===&#39;$&#39;) display += c+&quot;.0 Cr.\n&quot;;
						else {
							if(b===&#39;&amp;&#39;){
								display += c;
								for(let i=2;i&lt;a.length;i++) display += &quot; &quot;+a[i];
								display += &quot;.\n&quot;;
							} else display += a[1]+&quot;.\n&quot;;
						}
					}
				} else display += check+&quot;\n&quot;;
			}
		}
		if(d==m-1) display += &quot;\n***End***&quot;;
	}
	txt += display;
	mission.addMessageText(txt);
	return;
}
this.showPhone = function()
{
	mission.runScreen({title:&quot;P.A.D&quot;,choicesKey:&#39;VECTOR_PADPHONEA&#39;,background:&#39;vector_pad.png&#39;},this.padEval);
	mission.addMessageText(&quot;Communicator Channels:\n&quot;);
	this.phone = this.padInfos.phones.current;
	var txt=&#39;&#39;,temp=&#39;&#39;,tmp =[],loop = this.padInfos.phones.who.length,cur=0;
	this.pad.comms = [];
	for(let i=0;i&lt;loop;i++){
		cur = Math.pow(2,i);
		if((this.phone&amp;cur)){
			temp = this.decrypt(this.padInfos.phones.code,this.padInfos.phones.who[i].link,this.padInfos.phones.who[i].fib);
			this.pad.comms.push(temp);
			tmp = this.getSplit(temp,&quot;: &quot;,10);
			txt += tmp+&quot;\n&quot;;
		}
	}
	mission.addMessageText(txt);
	return;
}
this.showComm = function(which)
{
	/*	phone.current
		1 GalCop Police
		2 Benus Triadon
		4 Major Hurst
		8 Linda Bevenger
		16 Pavel Stokitch
		32 Arn D&#39;ercul */
	mission.runScreen({title:&quot;P.A.D&quot;,choicesKey:&#39;VECTOR_PADPHONEB&#39;,background:&#39;vector_pad.png&#39;,model:&#39;vector_ovComm&#39;,spinModel:false},this.padEval);
	mission.displayModel.orientation = [1,0,0,0];
	mission.displayModel.position = [150,100,600];
	var tov,tso = &#39;vector_phoneB.ogg&#39;,tpw,tme;
	switch(which){
		case 1: if((this.phone&amp;1)){tov = &#39;vector_ov09.png&#39;; tso = &#39;vector_phoneA.ogg&#39;;
				if(this.seenArn){tpw = &#39;VECTOR_ARNHINTS&#39;; tme = &#39;VECTOR_ARNHINTAA&#39;;}
				else {tpw = &#39;VECTOR_ARNHINTS&#39;; tme = &#39;VECTOR_ARNHINTAB&#39;;}} break;
		case 2: if((this.phone&amp;2)){tov = &#39;vector_ov14.png&#39;; tso = &#39;vector_phoneA.ogg&#39;;} break;
		case 3: if((this.phone&amp;4)){tov = &#39;vector_ov13.png&#39;; tso = &#39;vector_phoneA.ogg&#39;;} break;
		case 4: if((this.phone&amp;8)){tov = &#39;vector_ov01.png&#39;; tso = &#39;vector_phoneA.ogg&#39;;} break;
		case 5: if((this.phone&amp;16)){tov = &#39;vector_ov01.png&#39;; tso = &#39;vector_phoneA.ogg&#39;;} break;
		case 6: if((this.phone&amp;32)){tov = &#39;vector_ov10.png&#39;; tso = &#39;vector_phoneA.ogg&#39;;} break;
		default: tov = null; break;
	}
	this.talkLoop = 0;
	this.padSound.sound = tso;
	this.padSound.play();
	if(tpw) this.talkBox = {over:tov,sound:tso,messages:this.decrypt(tpw,tme,0).split(&quot;|&quot;)};
	else delete this.talkBox;
	this.talkTimer = new Timer(this,this.doTalk,0,3);
	return;
}
this.doTalk = function()
{
	if(!player.ship.docked){
		this.talkTimer.stop();
		delete this.talkTimer;
	}
	if(this.padSound.isPlaying) return;
	switch(this.talkLoop){
		case 0: if(this.talkBox &amp;&amp; this.talkBox.over) mission.displayModel.setMaterials({&quot;vector_modelview.png&quot;:{diffuse_map:this.talkBox.over}});
			else {mission.addMessageText(&quot;\nSeems to be a wrong number.&quot;); this.talkLoop = 5;}
			break;
		case 1: mission.addMessageText(this.talkBox.messages[0]); break;
		case 2: mission.addMessageText(this.talkBox.messages[1]); break;
		case 3: mission.addMessageText(this.talkBox.messages[2]); break;
		case 4: mission.addMessageText(this.talkBox.messages[3]); break;
	}
	this.talkLoop++;
	if(this.talkLoop&gt;4){
		this.talkTimer.stop();
		delete this.talkTimer;
		this.padSound.sound = &#39;vector_phoneC.ogg&#39;;
		this.padSound.play();
		mission.displayModel.setMaterials({&quot;vector_modelview.png&quot;:{}});
		if((this.phone&amp;1) &amp;&amp; this.seenArn){
			this.seenArn = false;
			if(player.bounty&gt;1) player.bounty--;
		}
	}
	return;
}
this.showCodes = function()
{
	// Codes 1 = codecard, 2 who, 4 where, 8 password, 16 message, 32 decrypted, 64 visited, 128 disabled, 256 destroyed, 512 actor found, 1024 actor done
	if(oolite.gameSettings.shaderEffectsLevel===&#39;SHADERS_OFF&#39; || oolite.gameSettings.shaderEffectsLevel===&#39;SHADERS_NOT_SUPPORTED&#39;) this.textHints = true;
	else this.textHints = false;
	if(!this.currentCodes){
		this.currentCodes = this.padInfos.areidis.codes;
		var n = 0;
		for(let i=0;i&lt;this.currentCodes.length;i++){
			this.currentCodes[i] = parseInt(this.currentCodes[i]);
			if(this.currentCodes[i]!==0) n++;
		}
		this.pad.codePages = n;
	}
	var chc = &#39;&#39;;
	if(this.pad.codePages&gt;1){
		if((this.currentCodes[this.pad.codeScreen-1]&amp;32)) chc = &#39;VECTOR_PADCODESA&#39;;
		else if((this.currentCodes[this.pad.codeScreen-1]&amp;16)) chc = &#39;VECTOR_PADCODESC&#39;;
		else chc = &#39;VECTOR_PADCODESA&#39;;
	} else {
		if((this.currentCodes[this.pad.codeScreen-1]&amp;32)) chc = &#39;VECTOR_PADLOGBOOKA&#39;;
		else if((this.currentCodes[this.pad.codeScreen-1]&amp;16)) chc = &#39;VECTOR_PADCODESB&#39;;
		else chc = &#39;VECTOR_PADLOGBOOKA&#39;;
	}
	mission.runScreen({title:&quot;P.A.D&quot;,choicesKey:chc,background:&#39;vector_pad.png&#39;,model:&#39;vector_ovComm&#39;,spinModel:false},this.padEval);
	mission.displayModel.position = [180,100,600];
	mission.displayModel.orientation = [1,0,0,0];
	// who
	mission.addMessageText(&quot;Codecard: &quot;+this.padInfos.areidis.display.who[this.pad.codeScreen-1]+&quot;\n&quot;);
	// where
	mission.addMessageText(&quot;Where:\f\f\f&quot;+this.padInfos.areidis.display.where[this.pad.codeScreen-1]+&quot;.&quot;);
	if((this.currentCodes[this.pad.codeScreen-1]&amp;64)) mission.addMessageText(&quot;Status:\f\f\fVisited.&quot;);
	else mission.addMessageText(&quot;Status:\f\f\fUnknown.&quot;);
	// Hints and overlays
	if((this.currentCodes[this.pad.codeScreen-1]&amp;1)){
		mission.addMessageText(&quot;\nUsage:&quot;);
		if(this.textHints){
			mission.addMessageText(&quot;Something is scribbled on the rearside.\n&quot;);
			var a = this.decrypt(&#39;VECTOR_CODEHINTS&#39;,&#39;VECTOR_CODEHINTAA&#39;,0); // TODO
			mission.addMessageText(a);
			if((this.currentCodes[this.pad.codeScreen-1]&amp;1)) mission.displayModel.orientation = [1,0,1,0];
			mission.displayModel.setMaterials({&quot;vector_modelview.png&quot;:{diffuse_map:&quot;vector_codes_ns.png&quot;}});
		} else {
			mission.addMessageText(&quot;Orient the symbols in the same way.\n&quot;);
			if((this.currentCodes[this.pad.codeScreen-1]&amp;1)) mission.displayModel.setMaterials({&quot;vector_modelview.png&quot;:{diffuse_map:&quot;vector_modelview.png&quot;}},this.padInfos.areidis.materials[this.pad.codeScreen-1]);
		}
	} else {
		mission.displayModel.orientation = [1,0,1,0];
		mission.addMessageText(&quot;\n\n\n&quot;);
	}
	// pwd
	if((this.currentCodes[this.pad.codeScreen-1]&amp;8)){
		let a = expandMissionText(this.padInfos.areidis.pwd[this.pad.codeScreen-1]);
		let b = this.helper.strDecrypt(a,String(this.core[0]));
		mission.addMessageText(&quot;Password:\f\f\f&quot;+b+&quot;.&quot;);
	} else mission.addMessageText(&quot;&quot;);
	// message
	if((this.currentCodes[this.pad.codeScreen-1]&amp;32)){
		mission.addMessageText(&quot;Message:&quot;);
		let a = this.padInfos.areidis.messages[this.pad.codeScreen-1];
		let b = this.decrypt(this.padInfos.areidis.pwd[this.pad.codeScreen-1],a,0);
		let c = this.helper.strScreenString(b,null,null);
		mission.addMessageText(c);
	} else if((this.currentCodes[this.pad.codeScreen-1]&amp;16)){
		mission.addMessageText(&quot;Message:&quot;);
		var a = expandMissionText(this.padInfos.areidis.messages[this.pad.codeScreen-1]);
		var b = this.helper.strScreenSubString(a,70);
		mission.addMessageText(b);
	} else mission.addMessageText(&quot;\n\n&quot;);
	mission.displayModel.fuel=7;
	return;
}
this.showSpecials = function()
{
	return;
}
this.showReplayPage = function()
{
	if(this.padInfos.replay.length&lt;2) mission.runScreen({title:&quot;P.A.D&quot;,choicesKey:&quot;VECTOR_PADREPLAYSA&quot;,background:&#39;vector_pad.png&#39;},this.padEval);
	else mission.runScreen({title:&quot;P.A.D&quot;,choicesKey:&quot;VECTOR_PADREPLAYSB&quot;,background:&#39;vector_pad.png&#39;},this.padEval);
	mission.addMessageText(&quot;Cutscenes:\n-------------------------------\n&quot;);
	var m = &quot;  &quot;;
	for(let i=0;i&lt;this.padInfos.replay.length;i++){
		if(this.pad.sceneCur===i) m = &quot;&gt; &quot;;
		else m = &quot;  &quot;;
		mission.addMessageText(m+this.padInfos.replay[i].t);
	}
	delete this.replayScene;
	return;
}
this.showReplay = function(n)
{
	var a = this.padInfos.replay[n];
	worldScripts[a.w][a.f](a.s);
	this.replayScene = 1;
	return;
}
this.getSplit = function(m,sep,width)
{
	var a = m.split(sep),b=&#39;&#39;;
	if(width){
		b = this.helper.strToWidth(a[0],width);
		b += a[1];
	} else b = a.join(&quot; &quot;);
	return(b);
}
this.decrypt = function(a,b,c)
{
	var ha = this.helper.strDecrypt(expandMissionText(a),String(this.core[c]));
	var hb = this.helper.strDecrypt(expandMissionText(b),ha);
	return(hb);
}
this.padEval = function(choice){worldScripts.vector_pad.doChoice(choice); return;}
this.doChoice = function(choice)
{
	switch(choice){
		case &#39;VECTOR_PADOVA&#39;: this.pad.logScreen = 0; this.showLogbook(); break;
		case &#39;VECTOR_PADOVB&#39;: if(this.talkTimer){this.talkTimer.stop(); delete this.talkTimer;} this.showPhone(); break;
		case &#39;VECTOR_PADOVC&#39;: delete this.currentCodes; this.showCodes(); break;
		case &#39;VECTOR_PADOVD&#39;: this.showReplayPage(); break;
		case &#39;VECTOR_PADLOGA&#39;: this.pad.logScreen += this.pad.logPages; if(this.pad.logScreen&gt;=this.logbook.length) this.pad.logScreen = 0; this.showLogbook(); break;
		case &#39;VECTOR_PADLOGB&#39;: this.pad.logScreen -= this.pad.logPages; if(this.pad.logScreen&lt;=0) this.pad.logScreen = 0; this.showLogbook(); break;
		case &#39;VECTOR_PADLOGC&#39;: this.showOverview(); break;
		case &#39;VECTOR_PADCALLP&#39;: this.pad.cb = 1; worldScripts.Cabal_Common_Keyboard.start(this.name,4,2,&#39;vector&#39;); break;
		case &#39;VECTOR_PADCODEA&#39;: this.pad.codeScreen++; if(this.pad.codeScreen&gt;this.pad.codePages) this.pad.codeScreen=1; this.showCodes(); break;
		case &#39;VECTOR_PADCODEB&#39;: this.pad.cb = 2; worldScripts.Cabal_Common_Keyboard.start(this.name,6,1,&#39;vector&#39;); break;
		case &#39;VECTOR_PADQUIT&#39;: if(this.talkTimer){this.talkTimer.stop(); delete this.talkTimer;} break;
		case &#39;VECTOR_PADEPLAYA&#39;: this.showReplay(this.pad.sceneCur); break;
		case &#39;VECTOR_PADEPLAYB&#39;: this.pad.sceneCur++; if(this.pad.sceneCur&gt;this.padInfos.replay.length-1) this.pad.sceneCur = 0; this.showReplayPage(); break;
	}
	return;
}
this.Cabal_Common_Keyboard_Output = function(str)
{
	switch(this.pad.cb){
		case 1:
			if(str===&#39;&#39;) this.showPhone(0);
			else {
				var c = [],react = 0;
				for(let i=0;i&lt;this.pad.comms.length;i++){c.push(this.pad.comms[i].split(&quot;: &quot;));}
				for(let i=0;i&lt;c.length;i++){if(c[i][1]===str){react = i+1; break;}}
				this.showComm(react);
			}
			break;
		case 2:
			if(str===&#39;&#39;) this.showCodes();
			else {
				let a = this.helper.strDecrypt(expandMissionText(this.padInfos.areidis.messages[this.pad.codeScreen-1]),str);
				if(a.substr(0,16)===&#39;Diplomatic Code:&#39;){
					if(!(this.padInfos.areidis.codes[this.pad.codeScreen-1]&amp;32)) this.addToLogbook(&quot;DAG&quot;);
					this.padInfos.areidis.codes[this.pad.codeScreen-1] |= 40;
					this.currentCodes = this.padInfos.areidis.codes;
				} else this.addToLogbook(&quot;DAH&quot;);
				this.showCodes();
			}
			break;
	}
	return;
}
this.addToLogbook = function(wa,wb,wc,wd)
{
	for(var i=0;i&lt;arguments.length;++i){
		let a = arguments[i];
		this.logbook.push(a);
		if(this.logbook.length&gt;47){
			while(this.logbook.length&gt;47) this.logbook.shift();
		}
	}
	return(true);
}
this.clearLogbook = function()
{
	this.logbook = [&quot;AAA&quot;];
	return;
}
this.shipWillLaunchFromStation = function()
{
	if(this.talkTimer){
		this.talkTimer.stop();
		delete this.talkTimer;
	}
}
this.shipSpawned = function(ship)
{
	if(!player.ship || this.startUp || !ship) return;
	if(ship &amp;&amp; ship.hasHostileTarget &amp;&amp; ship.target &amp;&amp; ship.target===player.ship.target &amp;&amp; !ship.owner &amp;&amp; !ship.group){
		if(ship.forwardWeapon){this.padInfos.generic.superman++; return;}
		if(ship.subEntities) for(let s=0;s&lt;ship.subEntities.length;s++) if(ship.subEntities[s].forwardWeapon){this.padInfos.generic.superman++; break;}
	}
	return;
}
this.shipExitedWitchspace = function()
{
	this.showBenus = false;
	this.seenArn = false;
	if(system.isInterstellarSpace || system.sun.isGoingNova || system.sun.hasGoneNova || !missionVariables.vector_version || player.score&lt;300) return;
	if(!missionVariables.TL_FOR_EQ_VECTOR_PAD){
		// Get average number of entities
		if(this.compEnts){
			if(this.compEnts.length&lt;10){
				this.compEnts.push(system.allShips.length);
				var n=0;
				for(let a=0;a&lt;this.compEnts.length;a++){n+=this.compEnts[a];}
				this.actOnEnts = Math.max(Math.ceil(n/this.compEnts.length),55);
			} else delete this.compEnts;
		}
		if((clock.seconds&amp;1)) return;
		if(system.allShips.length&lt;this.actOnEnts &amp;&amp; !system.countShipsWithRole(&#39;vector_benus&#39;)) system.addShipsToRoute(&#39;vector_benus&#39;,1,0.75,&#39;wp&#39;);
	}
}
this.missionScreenOpportunity = function()
{
	if(!player.ship.docked) return;
	if(this.showBenus){
		mission.runScreen({title:player.ship.dockedStation.displayName,messageKey:&#39;VECTOR_BENUSPRESENT&#39;,background:&#39;vector_benuspresent.png&#39;,music:&#39;vector_gift.ogg&#39;});
		EquipmentInfo.infoForKey(&#39;EQ_VECTOR_PAD&#39;).effectiveTechLevel = 1;
		delete this.showBenus;
		this.addToLogbook(&quot;AAD&quot;);
	} else if(this.replayScene) this.showReplayPage();
	return;
}
</pre></td>
                </tr>
                <tr>
                    <td valign="top">Scripts/vector_pirate.js</td>
                    <td><pre>&quot;use strict&quot;;
this.name = &quot;vector_pirate&quot;;
this.author = &quot;Svengali&quot;;
this.copyright = &quot;CC-by-nc-sa-3.0&quot;;
this.description = &quot;Gold,gold,gold.&quot;;
this.version = &quot;1.7.1&quot;;

this.shipSpawned = function()
{
	if(worldScripts.vector_pad.deactivated) this.noAct = true;
	if(worldScripts.vector.red&lt;3 || !this.ship.missiles) this.mAction = false;
	else this.mAction = true;
}
this.shipDied = function()
{
	var c = Math.random();
	if((c&lt;0.9 &amp;&amp; !missionVariables.vector_arn) || c&lt;0.6) return;
	if(!this.noAct){
		var entryNumber = (Math.random()*this.ship.entityPersonality)&amp;3;
		var podToEject = [&#39;vector_cpodA&#39;,&#39;vector_cpodB&#39;,&#39;vector_cpodC&#39;,&#39;vector_cpodD&#39;];
		this.ship.ejectSpecificItem(podToEject[entryNumber]);
	}
}
this.shipFiredMissile = function(missile,target)
{
	if(!target.isPlayer || !this.mAction) return;
	this.ship.awardEquipment(Math.random()&gt;0.5?&#39;EQ_VECTOR_FUNA_MISSILE&#39;:&#39;EQ_VECTOR_FUNB_MISSILE&#39;);
	this.mAction = false;
}
</pre></td>
                </tr>
                <tr>
                    <td valign="top">Scripts/vector_ppodF.js</td>
                    <td><pre>&quot;use strict&quot;;
this.name = &quot;vector_ppodF&quot;;
this.author = &quot;Svengali&quot;;
this.copyright = &quot;CC-by-nc-sa-3.0&quot;;
this.description = &quot;Special Escapepod Arn&quot;;
this.version = &quot;1.7.1&quot;;

this.shipSpawned = function()
{
	this.ship.switchAI(&#39;vector_epodAI.plist&#39;);
	if(this.ship.owner) this.ship.owner.switchAI(&#39;vector_wreckAI.plist&#39;);
	this.ov = new worldScripts.vector_news.VectorOV();
	delete this.shipSpawned;
}
this.shipWasScooped = function(scooper)
{
	if(scooper.isPlayer){
		if(!missionVariables.vector_arn){
			worldScripts.vector_pad.addToLogbook(&quot;CAC&quot;);
			missionVariables.vector_arn = &quot;SCOOPED&quot;;
			this.ov.addOv(null,&#39;10&#39;,1,null,&quot;I&#39;m Arn, Arn D&#39;ercul - you have rescued me. I really thought you&#39;d be one of them. For a safe passage to the next main station I&#39;ll give you something special...&quot;);
		} else {
			if(player.ship.equipmentStatus(&#39;EQ_VECTOR_SCOOPS&#39;)===&#39;EQUIPMENT_OK&#39;) this.ov.addOv(null,&#39;10&#39;,1,null,&quot;Nice to see you again. And you&#39;ve visited my friends, very good.&quot;);
			else this.ov.addOv(null,&#39;10&#39;,1,null,&quot;You again! Hehe. Nice joke.&quot;);
			player.addMessageToArrivalReport(&quot;Arn D&#39;ercul: &#39;I&#39;m afraid I must buy a new ship now. Well, it was fun while it lasted ...&#39; With this word he walked away.&quot;);
		}
		if(this.breakoff){
			for(var i=this.breakoff.length-1;i&gt;-1;--i){
				if(this.breakoff[i].isValid) this.breakoff[i].switchAI(&#39;vector_leaveAI.plist&#39;);}
		}
	}
}
</pre></td>
                </tr>
                <tr>
                    <td valign="top">Scripts/vector_richman.js</td>
                    <td><pre>&quot;use strict&quot;;
this.name = &quot;vector_richman&quot;;
this.author = &quot;Svengali&quot;;
this.copyright = &quot;CC-by-nc-sa-3.0&quot;;
this.description = &quot;Richman&#39;s action&quot;;
this.version = &quot;1.7.1&quot;;

this.shipSpawned = function()
{
	if(worldScripts.vector_pad.deactivated) this.noAct = true;
	this.cargoAmount = Math.max(1,Math.ceil(Math.random()*8));
	this.hitsCounter = 0;
	this.entryNumber = (Math.random()*this.ship.entityPersonality)&amp;3;
	if(Math.random()&gt;0.9 &amp;&amp; missionVariables.vector_arn) this.podToEject = [&#39;vector_cpodD&#39;,&#39;vector_cpodB&#39;,&#39;vector_cpodC&#39;,&#39;vector_cpodD&#39;];
	else this.podToEject = [&#39;vector_cpodA&#39;,&#39;vector_cpodB&#39;,&#39;vector_cpodC&#39;,&#39;vector_cpodD&#39;];
	if(this.ship.primaryRole===&#39;vector_richman&#39;) this.ship.primaryRole = &#39;trader&#39;;
	if(this.ship.scriptInfo.vector_name!==null) this.vector_plea = &quot;[vector_plea&quot;+this.ship.scriptInfo.vector_name+&quot;]&quot;;
	this.ship.displayName = &quot;Vector&quot;+this.ship.scriptInfo.vector_epodName;
	if(system.sun.isGoingNova || system.sun.isGoneNova || system.countShipsWithRole(&#39;vector&#39;)&gt;1){
		this.ship.switchAI(&#39;vector_leaveAI.plist&#39;);
		return;
	} else {
		if(!system.mainStation || system.mainStation.position.distanceTo(this.ship)&lt;35000 || this.entryNumber===1) this.ship.switchAI(&#39;vector_sunskimAI.plist&#39;);
		else {
			this.ship.switchAI(&#39;vector_traderAI.plist&#39;);
			this.ship.fuel = 2;
			if(Math.random()&lt;0.4 &amp;&amp; system.countShipsWithRole(&#39;repaired-buoy-station&#39;)) this.goToStat = system.shipsWithPrimaryRole(&#39;repaired-buoy-station&#39;)[0];
			else this.goToStat = system.mainStation;
		}
	}
	this.init = true;
}
this.shipBeingAttacked = function(whom)
{
	if(!this.init) this.shipSpawned();
	if(this.cargoAmount) this.vectorDropCargo(whom);
	this.vectorDisplayName();
}
this.shipAttackedWithMissile = function(missile,whom)
{
	if(!this.init) this.shipSpawned();
	this.ship.target = missile;
	if(this.cargoAmount) this.vectorDropCargo(whom);
	this.vectorDisplayName();
}
this.shipTargetDestroyed = function()
{
	this.ship.displayName = &quot;Vector(Pleased &quot;+this.ship.scriptInfo.vector_name+&quot;)&quot;;
}
this.vectorDisplayName = function()
{
	if(this.ship.energy===this.ship.maxEnergy) this.ship.displayName = &quot;Vector(&quot;+this.ship.scriptInfo.vector_name+&quot;)&quot;;
	if(this.ship.energy&gt;430 &amp;&amp; this.ship.energy&lt;this.ship.maxEnergy) this.ship.displayName = &quot;Vector(Angry &quot;+this.ship.scriptInfo.vector_name+&quot;)&quot;;
	if(this.ship.energy&lt;431 &amp;&amp; this.ship.energy&gt;179) this.ship.displayName = &quot;Vector(Shaked &quot;+this.ship.scriptInfo.vector_name+&quot;)&quot;;
	if(this.ship.energy&lt;180) this.ship.displayName = &quot;Vector(Scared &quot;+this.ship.scriptInfo.vector_name+&quot;)&quot;;
	this.entryNumber =(Math.random()*this.ship.entityPersonality)&amp;3;
}
this.vectorDropCargo = function(whom)
{
	if(this.hitsCounter&lt;5) ++this.hitsCounter;
	else {
		if(!this.noAct) this.ship.ejectSpecificItem(this.podToEject[this.entryNumber]);
		this.cargoAmount -= 1;
		this.hitsCounter = 0;
		if(whom.isPlayer) player.commsMessage(expandDescription(this.vector_plea));
	}
	this.vectorDisplayName();
}
this.shipHitByECM = function(ecmPulsesRemaining)
{
	if(!this.ship.target &amp;&amp; ecmPulsesRemaining===2 &amp;&amp;(this.ship.AIState===&#39;HEAD_FOR&#39; || this.ship.AIState===&#39;GO_TO_WAYPOINT&#39;) &amp;&amp; this.ship.escorts) this.ship.AIState = &#39;SCAN_AREA&#39;;
}
this.checkTarget = function()
{
	var attackbreak = false;
	if(this.ship.escorts){
		var i = this.ship.escorts.length;
		while(--i){
			if(this.ship.escorts[i]==this.ship.target){
				attackbreak = true;
				this.ship.target = null;
				this.ship.AIState = &#39;HEAD_FOR&#39;;
			}
		}
		if(!attackbreak) this.ship.AIState = &#39;ATTACK_SHIP&#39;;
	} else {
		if(this.ship.energy&lt;250) this.ship.AIState = &#39;FLEE&#39;;
		else this.ship.AIState = &#39;ATTACK_SHIP&#39;;
	}
}
this.checkDistanceToSun = function()
{
	if(this.ship.AI===&#39;vector_sunskimAI.plist&#39; &amp;&amp; system.sun.position.distanceTo(this.ship)&lt;system.sun.radius*2.5){
		this.ship.fuel += 3.0;
		this.ship.reactToAIMessage(&#39;SPEED_UP&#39;);
	}
}
this.addFuel = function()
{
	this.ship.fuel += 3.0;
}
this.getStation = function()
{
	if(this.goToStat===system.mainStation || Math.random()&lt;0.4){
		if(!system.mainStation || !system.mainStation.isValid){
			this.ship.switchAI(&#39;vector_leaveAI.plist&#39;);
			return;
		} else {
			this.ship.target = system.mainStation;
			this.ship.AIState = &#39;GO_TO_STATIONA&#39;;
		}
	} else {
		this.ship.target = this.goToStat;
		this.ship.AIState = &#39;GO_TO_STATIONB&#39;;
	}
	return;
}
</pre></td>
                </tr>
                <tr>
                    <td valign="top">Scripts/vector_specialiststation.js</td>
                    <td><pre>&quot;use strict&quot;;
this.name = &quot;vector_specialiststation&quot;;
this.author = &quot;Svengali&quot;;
this.copyright = &quot;CC-by-nd-sa-3.0&quot;;
this.description = &quot;Station&quot;;
this.version = &quot;1.7.1&quot;;

this.shipSpawned = function()
{
	this.fcbhelper = new worldScripts.Cabal_Common_Briefing.Cabal_Common_ScreenFCB();
	this.anim = false;
	this.dd = this.ship.dockedDefenders;
	this.ddscheduled = 0;
	this.fun = [
		[{display:&quot;Send identification&quot;},{display:&quot;Back&quot;}],
		[{display:&quot;Send identification&quot;},{display:&quot;Readout status&quot;},{display:&quot;Back&quot;}]
	];
	this.commChannel = {display:&quot;Specialist&quot;,who:this.ship,ent:true,pID:this.ship.entityPersonality,callback:&quot;commCall&quot;,react:this.fun[0]};
	this.ov = new worldScripts.vector_news.VectorOV();
	this.granted = false;
	if(worldScripts.vector_news.secondaryInfos.specialist.state&gt;3) this.ship.spawnOne(&quot;vector_specialistmark&quot;);
}
this.doAnim = function(n)
{
	if(this.anim) return;
	this.anim = true;
	if(this.ship.subEntities[3].energy&gt;0) this.fcbhelper.fcbSetProp(this.ship,3,&quot;energy&quot;,-0.01*n,19/n,1,0);
	else this.fcbhelper.fcbSetProp(this.ship,3,&quot;energy&quot;,0.01*n,19/n,1,0);
	this.animTimer = new Timer(this,this.doAnimTimer,20/n,0);
}
this.doAnimTimer = function()
{
	this.shipDied();
	if(this.granted &amp;&amp; this.ship.subEntities[3].energy===0) this.ship.commsMessage(&quot;Laser disabled.&quot;);
	this.anim = false;
}
this.shipDied = this.shipRemoved = function()
{
	this.fcbhelper.fcbRemoveAll();
	if(this.animTimer) this.animTimer.stop();
	delete this.animTimer;
	if(this.closeDD){
		this.closeDD.stop();
		delete this.closeDD;
	}
	if(this.closeup){
		this.closeup.stop();
		delete this.closeup;
	}
	return;
}
this.commCall = function(action)
{
	if(this.ship.position.distanceTo(player.ship.position)&gt;25000 || this.psa) return;
	switch(action){
		case 0:
			this.ship.commsMessage(&quot;Received Identification. We&#39;ll disable the laser now.&quot;);
			if(this.ship.subEntities[3].energy&gt;0) this.doAnim(1);
			if(!this.granted){
				this.granted = true;
				var newSet = this.fun[1];
				worldScripts.Cabal_Common_Comms.changeChoicesComm(this.commChannel.pID,newSet);
				this.commChannel.react = newSet;
			}
			break;
		case 1:
			if(this.animTimer) this.ship.commsMessage(&quot;Laser status is changing.&quot;);
			else {
				if(this.ship.subEntities[3].energy&gt;0) this.ship.commsMessage(&quot;Laser enabled.&quot;);
				else this.ship.commsMessage(&quot;Laser disabled.&quot;);
			}
	}
	return;
}
this.shipBeingAttacked = function(whom)
{
	if(!whom){
		this.ship.spawnOne(&quot;EQ_VECTOR_EMP_MINE&quot;);
		return;
	}
	if(!this.ddscheduled &amp;&amp; this.ship.dockedDefenders &amp;&amp; this.ship.AIState===&quot;DEFENSE_MODE&quot;) this.getThemOut();
	if(player.ship.isValid &amp;&amp; whom.isPlayer){
		if(this.chan){
			worldScripts.Cabal_Common_Comms.removeFromComm(this.commChannel);
			delete this.chan;
		}
		this.psa = true;
		this.granted = false;
	}
	this.ship.fireMissile(&quot;EQ_VECTOR_FUNC_MISSILE&quot;);
}
this.getThemOut = function()
{
	let n = this.ship.dockedDefenders;
	if(n){
		while(n--){
			this.ship.launchDefenseShip();
			this.ddscheduled++;
		}
		if(!this.anim &amp;&amp; this.ship.subEntities[3].energy&gt;0) this.doAnim(10);
	}
	return;
}
this.shipTargetCloaked = function()
{
	if(!this.anim &amp;&amp; this.ship.subEntities[3].energy===0) this.doAnim(10);
	this.ship.spawnOne(&quot;EQ_VECTOR_EMP_MINE&quot;);
}
this.checkDock = function()
{
	if(!player.ship.isValid) return;
	if(!this.psa &amp;&amp; !this.chan){
		if(this.ship.position.distanceTo(player.ship.position)&lt;25000){
			if(player.ship.isCloaked){
				this.ship.commsMessage(&quot;Unknown vessel. Decloak to communicate.&quot;);
			} else {
				worldScripts.Cabal_Common_Comms.addToComm(this.commChannel);
				this.ov.addOv(1,&#39;07&#39;,null,null,1);
				this.ship.commsMessage(&quot;Unknown vessel. Identify! We have established a secure channel.&quot;);
				this.chan = true;
			}
		}
	}
	if(!this.closeup) this.closeup = new Timer(this,this.doCloseup,0,2);
}
this.stationLaunchedShip = function(whom)
{
	if(whom){
		if(whom.isPlayer){
			this.shipDied();
			this.anim = false;
			this.ship.subEntities[3].energy = 9;
		} else {
			if(this.ddscheduled) this.ddscheduled--;
			this.dd = this.ship.dockedDefenders;
			if(!this.closeDD) this.closeDD = new Timer(this,this.doCloseDD,0,2);
		}
	}
}
this.doCloseDD = function()
{
	if(this.ddscheduled) return;
	if(!this.anim &amp;&amp; this.ship.subEntities[3].energy===0){
		this.doAnim(10);
		this.closeDD.stop();
		delete this.closeDD;
		this.dd = this.ship.dockedDefenders;
	}
}
this.doCloseup = function()
{
	function isDocker(entity){return entity.isValid &amp;&amp; entity.isShip &amp;&amp; !entity.isWeapon &amp;&amp; !entity.isCargo}
	var a = system.filteredEntities(this,isDocker,this.ship,3500);
	if(a.length){
		for(let i=0;i&lt;a.length;i++){
			if(a[i].owner &amp;&amp; a[i].owner===this.ship){
				let d = a[i].position.distanceTo(this.ship.position);
				if(a[i].position.distanceTo(this.ship.position)&lt;2600 &amp;&amp; !this.anim &amp;&amp; this.ship.subEntities[3].energy&gt;0) this.doAnim(10);
			}
		}
	}
}
this.otherShipDocked = function(whom)
{
	if(whom.owner===this.ship){
		this.dd = this.ship.dockedDefenders;
		if(this.closeup){
			this.closeup.stop();
			delete this.closeup;
		}
		if(this.ddscheduled) this.ddscheduled = 0;
	}
	if(!this.anim &amp;&amp; this.ship.subEntities[3].energy===0) this.doAnim(10);
}
</pre></td>
                </tr>
                <tr>
                    <td valign="top">Scripts/vector_trader.js</td>
                    <td><pre>&quot;use strict&quot;;
this.name = &quot;vector_trader&quot;;
this.author = &quot;Svengali&quot;;
this.copyright = &quot;CC-by-nc-sa-3.0&quot;;
this.description = &quot;Display name change&quot;;
this.version = &quot;1.7.1&quot;;

this.shipSpawned = function()
{
	var a = [&quot;GRS Chairman&quot;,&quot;Independent Courier&quot;,&quot;Hotelmanager&quot;,&quot;Banker&quot;,&quot;Dubious Businessman&quot;,
		&quot;Ship-Dealer&quot;,&quot;Hoopy frood&quot;,&quot;Financial Consultant&quot;,&quot;Miss Universe&quot;,&quot;Master of Science&quot;,
		&quot;Ultra G-Kricket Captain&quot;,&quot;Head Programmer&quot;,&quot;Selfmademan&quot;,&quot;Testpilot Vector Inc.&quot;,&quot;Yuppie&quot;,&quot;Vector&quot;];
	this.ship.displayName = a[(this.ship.entityPersonality&amp;15)];
	delete this.shipSpawned;
}
</pre></td>
                </tr>
                <tr>
                    <td valign="top">Scripts/vector_updater.js</td>
                    <td><pre>&quot;use strict&quot;;
this.name = &quot;vector_updater&quot;;
this.author = &quot;svengali&quot;;
this.copyright = &quot;CC-by-nc-sa-3.0&quot;;
this.description = &quot;Updater for older versions&quot;;
this.version = &quot;1.7.2&quot;;

this.startUp = function()
{
	delete this.startUp;
	if(worldScripts.vector_pad.startUp) worldScripts.vector_pad.startUp();
	if(worldScripts.vector_pad.deactivated){this.killSelf(); return;}
	if(player.ship.status === &quot;STATUS_START_GAME&quot;){this.killSelf(); return;}
	if(missionVariables.vector_version){this.killSelf(); return;}
	var excl = [&quot;vector_cpod&quot;,&quot;vector_cpods&quot;,&quot;vector_epod&quot;,&quot;vector_epods&quot;,&quot;vector_expFactor&quot;,&quot;vector_passengerState&quot;,&quot;vector_limiter&quot;,&quot;vector_generic&quot;];
	var action = false;
	for(let prop in missionVariables){if((prop.substr(0,6)===&#39;vector&#39; || prop.substr(0,9)===&#39;localhero&#39;) &amp;&amp; excl.indexOf(prop)===-1){action = true; break;}}
	if(!action){this.killSelf(); return;}
}
this.killSelf = function()
{
	missionVariables.vector_version = &quot;1_7&quot;;
/*	for(prop in this){
		log(this.name, prop);
		if(prop!==&#39;name&#39; &amp;&amp; prop!==&#39;version&#39; &amp;&amp; prop!==&#39;oolite_manifest_identifier&#39;) 
			delete this[prop];
		//will break on each new read-only property like oolite_manifest_identifier in 1.81
	}
*/
	delete this.startUp;
	delete this.missionScreenOpportunity;
	this.deactivated = true;
	return;
}
this.missionScreenOpportunity = function()
{
	if(!player.ship.docked) return;
	mission.runScreen({messageKey:&#39;VECTOR_UPDATE&#39;,choicesKey:&#39;VECTOR_UPDATEYN&#39;,background:&#39;vector_official1.png&#39;,music:&#39;vector_transmission.ogg&#39;},this.choiceEval);
	return;
}
this.choiceEval = function(choice)
{
	if(!choice){log(this.name,&quot;Booh. Not updated!&quot;); return;}
	switch(choice){
		case &#39;VECTOR_UPDATEJ&#39;:
			var gal,destNum,destIDs,destName;
			// Clear destinations from versions&lt;1.4.3
			if(missionVariables.vector){
				if((missionVariables.vector[0]===&#39;V&#39; || missionVariables.vector[0]===&#39;R&#39;)){
					if(missionVariables.vector_visits &amp;&amp; galaxyNumber===parseInt(missionVariables.vector_visits[missionVariables.vector_visits.length-1])){
						gal = parseInt(missionVariables.vector_visits[missionVariables.vector_visits.length-1])
						destNum = parseInt(missionVariables.vector[5]);
						destIDs = missionVariables.vector_visits.split(&quot; &quot;);
						destName = System.systemNameForID(destIDs[destNum-1]);
						mission.unmarkSystem(destIDs[destNum-1]);
						mission.setInstructionsKey(null,&#39;vector&#39;);
					} else mission.setInstructionsKey(null,&#39;vector&#39;);
				}
			}
			// Clear destinations versions&gt;1.4.2
			if(missionVariables.vector_arn){
				if((missionVariables.vector_arn[0]===&#39;V&#39; || missionVariables.vector_arn[0]===&#39;R&#39;)){
					if(missionVariables.vector_arnvisits &amp;&amp; galaxyNumber===parseInt(missionVariables.vector_arnvisits[missionVariables.vector_arnvisits.length-1])){
						gal = parseInt(missionVariables.vector_arnvisits[missionVariables.vector_arnvisits.length-1]);
						destNum = parseInt(missionVariables.vector_arn[5]);
						destIDs = missionVariables.vector_arnvisits.split(&quot; &quot;);
						destName = System.systemNameForID(destIDs[destNum-1]);
						mission.unmarkSystem(destIDs[destNum-1]);
						mission.setInstructionsKey(null,&#39;vector_missionArn&#39;);
					} else mission.setInstructionsKey(null,&#39;vector_missionArn&#39;);
				}
			}
			mission.setInstructionsKey(null,&#39;localhero&#39;);
			// Clear mVs
			var excl = [&quot;vector_cpod&quot;,&quot;vector_cpods&quot;,&quot;vector_epod&quot;,&quot;vector_epods&quot;,&quot;vector_expFactor&quot;,&quot;vector_passengerState&quot;,&quot;vector_limiter&quot;,&quot;vector_generic&quot;];
			for(let prop in missionVariables){
				if((prop.substr(0,6)===&#39;vector&#39; || prop.substr(0,9)===&#39;localhero&#39;) &amp;&amp; excl.indexOf(prop)===-1){
					missionVariables[prop] = null;
				}
			}
			// Get rid of the EQs
			missionVariables.TL_FOR_EQ_VECTOR_SCOOPS = null;
			if(player.ship.equipmentStatus(&#39;EQ_VECTOR_SCOOPS&#39;)===&#39;EQUIPMENT_OK&#39;) player.ship.removeEquipment(&#39;EQ_VECTOR_SCOOPS&#39;);
			missionVariables.TL_FOR_EQ_VECTOR_PAD = null;
			if(player.ship.equipmentStatus(&#39;EQ_VECTOR_PAD&#39;)===&#39;EQUIPMENT_OK&#39;) player.ship.removeEquipment(&#39;EQ_VECTOR_PAD&#39;);
			if(player.ship.equipmentStatus(&#39;EQ_VECTOR_ARNP&#39;)===&#39;EQUIPMENT_OK&#39;) player.ship.removeEquipment(&#39;EQ_VECTOR_ARNP&#39;);
			if(player.ship.equipmentStatus(&#39;EQ_VECTOR_ALDRIN&#39;)===&#39;EQUIPMENT_OK&#39;) player.ship.removeEquipment(&#39;EQ_VECTOR_ALDRIN&#39;);
			// Byebye
			this.killSelf();
			break;
		case &#39;VECTOR_UPDATEN&#39;:
			this.killSelf();
			break;
		default: log(this.name,&quot;Choice not handled.&quot;);
	}
	// Kill mission to avoid problems
	for(let prop in worldScripts.vector_missionArn){if(prop!==&#39;name&#39; &amp;&amp; prop!==&#39;version&#39;) delete worldScripts.vector_missionArn.prop;}
	for(let prop in worldScripts.vector_news){if(prop!==&#39;name&#39; &amp;&amp; prop!==&#39;version&#39;) delete worldScripts.vector_news.prop;}
	// Clear log
	worldScripts.vector_pad.clearLogbook();
	return;
}
</pre></td>
                </tr>
            </table>
        </a>
    </body>
</html>
