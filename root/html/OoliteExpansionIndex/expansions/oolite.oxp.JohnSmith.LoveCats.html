<html>
    <head>
        <title>Expansion Love Cats</title>
        <link rel="stylesheet" href="../style.css">
    </head>
    <body>
        <table border="0" width="100%">
            <tr>
                <td>Back to <a href='../index.html'>Index</a></td>
                <td align="right"><small>Page generated: Oct 11, 2023, 3:16:48 PM</small></td>
            </tr>
        </table>

        <h1>Expansion Love Cats</h1>

        <h2>Content</h2>
        <ul>
          <li><a href="#warnings">Warnings</a></li>
          <li><a href="#manifest">Manifest</a></li>
          <li><a href="#documentation">Documentation</a></li>
          <li><a href="#equipment">0 Equipment</a></li>
          <li><a href="#ships">5 Ships</a></li>
          <li><a href="#models">0 Models</a></li>
          <li><a href="#scripts">4 Scripts</a></li>
        </ul>

          <a name="warnings">
            <h2>Warnings</h2>
            <ol>
                <li>License not specified</li>
                <li>XML Manifest found</li>
                <li>Unknown key &#39;licence&#39; in XML manifest.plist</li>
            </ol>
          </a>

        <a name="manifest">
        <h2>Manifest</h2>
            <table border="1">
                <tr>
                    <th></th>
                    <th>from Expansion Manager's OXP list</th>
                    <th>from Expansion Manifest</th>
                </tr>
                <tr>
                    <td>Description</td>
                    <td>A tale of love and betrayal amongst the vicious furry feline races of galaxy four.</td>
                    <td>A tale of love and betrayal amongst the vicious furry feline races of galaxy four.</td>
                </tr>
                <tr>
                    <td>Identifier</td>
                    <td>oolite.oxp.JohnSmith.LoveCats</td>
                    <td>oolite.oxp.JohnSmith.LoveCats</td>
                </tr>
                <tr>
                    <td>Title</td>
                    <td>Love Cats</td>
                    <td>Love Cats</td>
                </tr>
                <tr>
                    <td>Category</td>
                    <td>Missions</td>
                    <td>Missions</td>
                </tr>
                <tr>
                    <td>Author</td>
                    <td>John Smith</td>
                    <td>John Smith</td>
                </tr>
                <tr>
                    <td>Version</td>
                    <td>1.3.1</td>
                    <td>1.3.1</td>
                </tr>
                <tr>
                    <td>Tags</td>
                    <td></td>
                    <td></td>
                </tr>
                <tr>
                    <td>Required Oolite Version</td>
                    <td></td>
                    <td></td>
                </tr>
                <tr>
                    <td>Maximum Oolite Version</td>
                    <td></td>
                    <td></td>
                </tr>
                <tr>
                    <td>Required Expansions</td>
                    <td>
                    </td>
                    <td>
                    </td>
                </tr>
                <tr>
                    <td>Optional Expansions</td>
                    <td>
                    </td>
                    <td>
                    </td>
                </tr>
                <tr>
                    <td>Conflict Expansions</td>
                    <td>
                    </td>
                    <td>
                    </td>
                </tr>
                <tr>
                    <td>Information URL</td>
                    <td><a target="_blank" href="http://wiki.alioth.net/index.php/Lovecats.oxp">http://wiki.alioth.net/index.php/Lovecats.oxp</a></td>
                    <td><a target="_blank" href="">n/a</a></td>
                </tr>
                <tr>
                    <td>Download URL</td>
                    <td><a target="_blank" href="https://wiki.alioth.net/img_auth.php/8/83/LoveCats_1.3.1.oxz">https://wiki.alioth.net/img_auth.php/8/83/LoveCats_1.3.1.oxz</a></td>
                    <td><a target="_blank" href="">n/a</a></td>
                </tr>
                <tr>
                    <td>License</td>
                    <td></td>
                    <td></td>
                </tr>
                <tr>
                    <td>File Size</td>
                    <td>n/a</td>
                </tr>
                <tr>
                    <td>Upload date</td>
                    <td>1610873351</td>
                </tr>
            </table>
                </a>

        <a name="documentation">
        <h2>Documentation</h2>
        <p>Also read <a href='http://wiki.alioth.net/index.php/Love%20Cats'>http://wiki.alioth.net/index.php/Love%20Cats</a></p>
        <h3>Lovecats readme.rtf</h3>
        <pre>{\rtf1\ansi\ansicpg1252\cocoartf1038\cocoasubrtf360
{\fonttbl\f0\fnil\fcharset0 Verdana;}
{\colortbl;\red255\green255\blue255;}
\paperw11900\paperh16840\margl1440\margr1440\vieww24780\viewh15940\viewkind0
\deftab720
\pard\pardeftab720\sl340\sa340\ql\qnatural

\f0\fs28 \cf0 By johnsmith\
A tale of love and betrayal amongst the vicious furry feline races of galaxy four. Can you pilot your way through the intrigue of the ancient mating rituals of the Teance system, and save star-crossed lovers from a fate worse than death?\
Starts in galaxy four. A fast ship, fuel scoops, and a hard heart are recommended.\
Minimum requirements: Oolite 1.75\
To install:\
Move the Lovecats.oxp file into the AddOns folder in your Oolite folder. The Oolite folder is where the Oolite program resides. The Lovecats.oxp file is in the Lovecats folder along with this README.txt file. DO NOT move the entire Lovecats folder into the AddOns folder - you only need the Lovecats.oxp file.\
\pard\tx566\tx1133\tx1700\tx2267\tx2834\tx3401\tx3968\tx4535\tx5102\tx5669\tx6236\tx6803\pardeftab720\ql\qnatural\pardirnatural
\cf0 \
Version 1.3.1 Code change by Eric Walch.\
- Removed all 1.65 files and last legacy code.\
- Converted plists to open-step versions.\
- Changed the code for marking mission destinations, so it will work correct after Oolite 1.76.\
\
Version 1.3 Code change by Eric Walch.\
- Translated the legacy script code to JS. Raised the minimum Oolite to version 1.75.\
- One can still play it with 1.65 and the legacy code when the file requires.plist is removed but it will bug than with intermediate Oolite releases.\
\
Version 1.2.1 Code change by Eric Walch.\
- Minor improvement to place one mission ship at a more defined start location. (Because of randomness it was sometimes impossible to find)\
\
Version 1.2 Code change by Eric Walch.\
- Added code to recover from other oxp&#39;s that overwrite its mission screens before a choice was made.\
- Renamed internally files to more unique names.\
\
Version 1.1 Code change by Eric Walch.\
- Added MOP code to prevent clashing mission offers.\
- Restructured the code for faster code evaluation.\
- Removed the necessity to do this mission after the native nova mission. Added code that made them both more compatible and it now gives a clue when there is no solution because of a (rare) nova mission conflict. Doing this mission first will even prevent this rare conflict to happen at all.\
\
Version 1.0 Original version Written by johnsmith.}</pre>
        </a>

        <a name="equipment">          
        <h2>Equipment</h2>
            This expansion declares no equipment. This may be related to warnings.
        </a>

        <a name="ships">    
        <h2>Ships</h2>
            <table>
                <tr>
                    <th>Name</th>
                </tr>
                <tr>
                    <td><a href="../ships/carlo_asp.html">Valrisian&#39;s Asp</a></td>
                </tr>
                <tr>
                    <td><a href="../ships/carlo_escpod.html">carlo_escpod</a></td>
                </tr>
                <tr>
                    <td><a href="../ships/cat_asp.html">Valrisian Hunter</a></td>
                </tr>
                <tr>
                    <td><a href="../ships/cat_asp2.html">Valrisian Hunters</a></td>
                </tr>
                <tr>
                    <td><a href="../ships/cat_asp3.html">Valrisian&#39;s Hunters</a></td>
                </tr>
            </table>
        </a>

        <a name="models">    
        <h2>Models</h2>
            This expansion declares no models. This may be related to warnings.
        </a>

        <a name="scripts">    
        <h2>Scripts</h2>
            <table>
                <tr>
                    <th>Path</th>
                </tr>
                <tr>
                    <td valign="top">Scripts/lovecat.js</td>
                    <td><pre>this.name        = &quot;wedding&quot;; 
this.author      = &quot;johnsmith, JS translation by Eric Walch&quot;; 
this.description = &quot;Script used for the lovecats mission.&quot;; 
this.version     = &quot;1.3&quot;; 

this.startUp = function() {
    if (missionVariables.wedding == &quot;THE_END&quot;) {
        // mission is over, no need to evaluate any code anymore.
        this.$clearHandlers();
    }
};

this.missionScreenOpportunity = function () {
    if (galaxyNumber != 3) return;
    var wedding = missionVariables.wedding;
    if (player.ship.dockedStation.isMainStation) {

        if (system.ID &gt; 142 &amp;&amp; !wedding) {
            mission.runScreen({title: &quot;Lovecat&quot;, messageKey: &quot;wedding_quietword&quot;});
            missionVariables.wedding = &quot;STAGE199&quot;;
            missionVariables.wedding_started = &quot;YES&quot;;
            mission.setInstructionsKey(&quot;wm1_short_desc0&quot;);
            mission.markSystem(141);
        }

        if (system.ID == 141 &amp;&amp; (wedding == &quot;STAGE0&quot; || wedding == &quot;STAGE199&quot;)) {
            mission.unmarkSystem(141);
            mission.runScreen({title: &quot;Lovecat&quot;, messageKey: &quot;wedding_first_briefing&quot;, choicesKey: &quot;wedding_caruth_choice&quot;
            },
            function (choice) {
                if (choice == &quot;WEDDING_YES&quot;) {
                    missionVariables.wedding = &quot;STAGE1&quot;;
                    mission.setInstructionsKey(&quot;wm1_short_desc1&quot;);
                    mission.markSystem(149);
                }
                if (choice == &quot;WEDDING_NO&quot;) {
                    this.$missionEnded();
                }
            });
        }

        if (system.ID &gt; 142 &amp;&amp; wedding == &quot;STAGE1&quot;) {
            mission.runScreen({title: &quot;Lovecat&quot;, messageKey: &quot;wedding_news&quot;, overlay: &quot;iNews.png&quot;});
            missionVariables.wedding = &quot;STAGE2&quot;;
        }

        if (system.ID == 149 &amp;&amp; (wedding == &quot;STAGE1&quot; || wedding == &quot;STAGE2&quot;)) {
            mission.unmarkSystem(149);
            mission.setInstructionsKey(null); // needed here to avoid an string expansion problem in Oolite. Will be solved in Oolite 1.75.4
            mission.runScreen({title: &quot;Lovecat&quot;, messageKey: &quot;wedding_second_briefing&quot;,
                            background: &quot;lovecats_Valrisian.png&quot;, model: &quot;lovecat_carlo&quot;});
            var ship = mission.displayModel;
            ship.position = ship.position.multiply(4); // put a bit further away so it becomes smaller.
            missionVariables.wedding = &quot;STAGE3&quot;;
            mission.setInstructionsKey(&quot;wm1_short_desc2&quot;);
            mission.markSystem(114);
        }

        if (system.ID == 16) {
            if (wedding == &quot;DESTROYED&quot;) {
                mission.runScreen({title: &quot;Lovecat&quot;, messageKey: &quot;wedding_killed&quot;, overlay: &quot;lovecats_Valrisian.png&quot;});
                mission.setInstructionsKey(null);
                mission.unmarkSystem(16);
                this.$missionEnded();
                player.legalStatus += 64;
                player.ship.manifest.narcotics += 1;
                player.ship.launch();
            }
            if (wedding == &quot;CAPTURED&quot;) {
                mission.runScreen({title: &quot;Lovecat&quot;, messageKey: &quot;wedding_thanks_briefing&quot;, overlay: &quot;lovecats_Valrisian.png&quot;});
                missionVariables.wedding = &quot;STAGE4&quot;;
                mission.setInstructionsKey(null);
                mission.unmarkSystem(16);
                player.credits += 10000;
                player.legalStatus = 0;
            }
        }

        if (system.ID &gt; 17 &amp;&amp; (wedding == &quot;STAGE4&quot; || wedding == &quot;STAGE98&quot;)) { // Test for STAGE98 has historical reasons and could be in old save files.
            mission.runScreen({title: &quot;Lovecat&quot;, messageKey: &quot;wedding_oola&quot;, choicesKey: &quot;wedding_oola_choice&quot;, overlay: &quot;lovecats_heart.png&quot;
            },
            function (choice) {
                if (choice == &quot;WEDDING_YES&quot;) {
                    missionVariables.wedding = &quot;STAGE99&quot;;
                    mission.setInstructionsKey(&quot;wm1_short_desc6&quot;);
                    mission.markSystem(41);
                }
                if (choice == &quot;WEDDING_NO&quot;) {
                    this.$missionEnded();
                }
            });
        }

        if (system.ID == 41 &amp;&amp; wedding == &quot;STAGE99&quot;) {
            mission.runScreen({title: &quot;Lovecat&quot;, messageKey: &quot;wedding_oola_thanks&quot;, overlay: &quot;lovecats_heart.png&quot;});
            missionVariables.wedding = &quot;STAGE100&quot;;
            mission.setInstructionsKey(null);
            mission.unmarkSystem(41);
            player.credits += 3209;
            player.score += 6;
        }

        if ((system.ID == 16 || system.ID == 149) &amp;&amp; wedding == &quot;STAGE99&quot;) {
            mission.runScreen({title: &quot;Lovecat&quot;, messageKey: &quot;wedding_oola_betrayed&quot;, overlay: &quot;lovecats_Valrisian.png&quot;});
            missionVariables.wedding = &quot;STAGE100&quot;;
            mission.setInstructionsKey(null);
            mission.unmarkSystem(41);
        }

        if (system.ID &gt; 42 &amp;&amp; wedding == &quot;STAGE100&quot;) {
            mission.runScreen({title: &quot;Lovecat&quot;, messageKey: &quot;wedding_news2&quot;, overlay: &quot;iNews.png&quot;});
            this.$missionEnded();
        }

        if (this.nova_bug) {
            mission.runScreen({title: &quot;Lovecat&quot;, messageKey: &quot;nova_wedding_newsflash&quot;, overlay: &quot;solar.png&quot;});
            this.nova_bug = false;
            if (wedding == &quot;STAGE3&quot; &amp;&amp; (this.nova_bug_planet == 83 || this.nova_bug_planet == 114)) {
                mission.addMessageTextKey(&quot;nova_wedding_newsflash2&quot;);
            } else {
                this.$missionEnded(); // no solution left because of nova system.
            }
        }
    }
};

this.shipLaunchedFromStation = function () {
    if (galaxyNumber == 3) {
        this.$addShips();
    }
    delete this.shipLaunchedFromStation; // we only need this handler on the very first launch.
};

this.shipExitedWitchspace = function () {
    if (galaxyNumber != 3 || system.isInterstellarSpace) return;
    this.$addShips();
    if (!missionVariables.nova &amp;&amp; missionVariables.wedding_started == &quot;YES&quot;) {
        missionVariables.novacount = 0; // suppress the nova mission.
    }
    if (system.sun &amp;&amp; system.sun.hasGoneNova &amp;&amp; [16, 41, 83, 114, 141, 149].indexOf(system.ID) &gt; -1) {
        // one of the mission systems is a nova system.
        this.nova_bug = true;
        this.nova_bug_planet = system.ID;
    }
};

this.guiScreenChanged = function ()
{
    if (galaxyNumber == 3 &amp;&amp; player.ship.docked &amp;&amp; player.ship.dockedStation.isMainStation &amp;&amp; guiScreen == &quot;GUI_SCREEN_SYSTEM_DATA&quot;)
    {
        if (system.ID == 114 &amp;&amp; missionVariables.wedding == &quot;STAGE3&quot;)
        {
            mission.addMessageTextKey(&quot;wedding_moved&quot;);
            mission.setInstructionsKey(&quot;wm1_short_desc4&quot;);
            mission.unmarkSystem(114);
            mission.markSystem(83);
        }
        if (system.ID == 83 &amp;&amp; missionVariables.wedding == &quot;STAGE3&quot;)
        {
            mission.addMessageTextKey(&quot;wedding_missed&quot;);
            mission.setInstructionsKey(&quot;wm1_short_desc4&quot;);
            mission.unmarkSystem(114);
            mission.unmarkSystem(83);
        }
    }
};

this.$addShips = function () {
    if (system.ID == 83 &amp;&amp; missionVariables.wedding == &quot;STAGE3&quot;) {
        var position = Vector3D(-0.02, 0, 0.11).fromCoordinateSystem(&quot;wpu&quot;);
        system.addShips(&quot;lovecat_carlo&quot;, 1, position);
        mission.setInstructionsKey(&quot;wm1_short_desc4&quot;);
    }
    if (system.ID == 41 &amp;&amp; missionVariables.wedding == &quot;STAGE99&quot;) {
        system.addShipsToRoute(&quot;cat_asp&quot;, 4, 0.01, &quot;wp&quot;);
        system.addShipsToRoute(&quot;cat_asp2&quot;, 2, 0.01, &quot;wp&quot;);
    }
    if (system.ID == 149 &amp;&amp; missionVariables.conhunt == &quot;MISSION_COMPLETE&quot;) {
        system.addShipsToRoute(&quot;cat_asp3&quot;, 4, 0.5, &quot;wp&quot;);
    }
};

this.$missionEnded = function () {
    missionVariables.wedding = &quot;THE_END&quot;;
    delete missionVariables.wedding_started;
    this.$clearHandlers();
};


this.$clearHandlers = function () {
    delete this.missionScreenOpportunity;
    delete this.shipLaunchedFromStation;
    delete this.shipExitedWitchspace;
    delete this.missionScreenOpportunity;
    delete this.guiScreenChanged;
};
</pre></td>
                </tr>
                <tr>
                    <td valign="top">Scripts/lovecat_asp.js</td>
                    <td><pre>this.name      = &quot;lovecat_asp&quot;; 
this.author    = &quot;eric walch&quot;; 
this.copyright = &quot;&quot;;
this.description = &quot;ship script for lovecats&quot;;
this.version   = &quot;1.1&quot;;

this.shipDied = function ()
{
	this.ship.commsMessage(&quot;Miew! Miew!!!&quot;)
	if (this.ship.primaryRole == &quot;lovecat_carlo&quot;)
	{
		if(missionVariables.wedding != &quot;CAPTURED&quot;) missionVariables.wedding = &quot;DESTROYED&quot;
		// missionVariables.wedding will be set to &quot;CAPTURED&quot; when delivering the scooped pilot
        mission.unmarkSystem(83);
        mission.unmarkSystem(114);
	}
}

this.shipLaunchedEscapePod = function (pod)
{
	if (this.ship.primaryRole == &quot;lovecat_carlo&quot;)
	{
		pod.commsMessage(&quot;I&#39;ll never mary Oola Waad.&quot;);
        pod.setCargo(&quot;slaves&quot;, 1); // needed to keep a scripted pod in the hold.
        mission.setInstructionsKey(&quot;wm1_short_desc3a&quot;, &quot;wedding&quot;);
        mission.unmarkSystem(83);
        mission.unmarkSystem(114);
	}
}


this.shipEnergyIsLow = function ()
{
    this.ship.abandonShip();
    delete shipEnergyIsLow;
}</pre></td>
                </tr>
                <tr>
                    <td valign="top">Scripts/lovecat_escapepod.js</td>
                    <td><pre>this.name      = &quot;lovecat_escapepod&quot;; 
this.author    = &quot;eric walch&quot;; 
this.copyright = &quot;&quot;;
this.description = &quot;ship script for lovecats&quot;;
this.version   = &quot;1.0&quot;;

this.shipDied = function ()
{
    missionVariables.wedding = &quot;DESTROYED&quot;;
}

this.shipWasScooped = function (scooper)
{
    
    if (scooper.isPlayer)
	{
        mission.setInstructionsKey(&quot;wm1_short_desc3&quot;, &quot;wedding&quot;);
        missionVariables.wedding = &quot;CAPTURED&quot;;
        mission.markSystem(16);
	}
}
</pre></td>
                </tr>
                <tr>
                    <td valign="top">Scripts/lovecat_romeo.js</td>
                    <td><pre>this.name      = &quot;lovecat_romeo&quot;; 
this.author    = &quot;eric walch&quot;; 
this.copyright = &quot;&quot;;
this.description = &quot;pilot script for lovecats&quot;;
this.version   = &quot;1.0&quot;;


this.unloadCharacter = function ()
{
    missionVariables.wedding = &quot;CAPTURED&quot;;
    player.addMessageToArrivalReport(expandMissionText(&quot;wedding_transfer&quot;));
    player.bounty |= 64;
}</pre></td>
                </tr>
            </table>
        </a>
    </body>
</html>
