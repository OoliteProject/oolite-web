<html>
    <head>
        <title>Expansion Shieldtastic Crosshairs</title>
        <link rel="stylesheet" href="../style.css">
    </head>
    <body>
        <table border="0" width="100%">
            <tr>
                <td>Back to <a href='../index.html'>Index</a></td>
                <td align="right"><small>Page generated: Oct 11, 2023, 3:16:49 PM</small></td>
            </tr>
        </table>

        <h1>Expansion Shieldtastic Crosshairs</h1>

        <h2>Content</h2>
        <ul>
          <li><a href="#warnings">Warnings</a></li>
          <li><a href="#manifest">Manifest</a></li>
          <li><a href="#documentation">Documentation</a></li>
          <li><a href="#equipment">0 Equipment</a></li>
          <li><a href="#ships">0 Ships</a></li>
          <li><a href="#models">0 Models</a></li>
          <li><a href="#scripts">1 Scripts</a></li>
        </ul>

          <a name="warnings">
            <h2>Warnings</h2>
            <ol>
                <li>http://wiki.alioth.net/index.php/Shieldtastic%20Crosshairs -&gt; 404 Not Found</li>
                <li>Tags mismatch between OXP Manifest and Expansion Manager at character position 0002 (RIGHT SQUARE BRACKET vs LATIN SMALL LETTER C)(&#39;[]&#39; vs &#39;[crosshairs]&#39;)</li>
            </ol>
          </a>

        <a name="manifest">
        <h2>Manifest</h2>
            <table border="1">
                <tr>
                    <th></th>
                    <th>from Expansion Manager's OXP list</th>
                    <th>from Expansion Manifest</th>
                </tr>
                <tr>
                    <td>Description</td>
                    <td>Adds two semi-circular indicators, showing the state of the shields, around the central cross-hairs. Compatible with most HUDs.</td>
                    <td>Adds two semi-circular indicators, showing the state of the shields, around the central cross-hairs. Compatible with most HUDs.</td>
                </tr>
                <tr>
                    <td>Identifier</td>
                    <td>oolite.oxp.Wildeblood.ShieldtasticCrosshairs</td>
                    <td>oolite.oxp.Wildeblood.ShieldtasticCrosshairs</td>
                </tr>
                <tr>
                    <td>Title</td>
                    <td>Shieldtastic Crosshairs</td>
                    <td>Shieldtastic Crosshairs</td>
                </tr>
                <tr>
                    <td>Category</td>
                    <td>HUDs</td>
                    <td>HUDs</td>
                </tr>
                <tr>
                    <td>Author</td>
                    <td>Wildeblood</td>
                    <td>Wildeblood</td>
                </tr>
                <tr>
                    <td>Version</td>
                    <td>1.0</td>
                    <td>1.0</td>
                </tr>
                <tr>
                    <td>Tags</td>
                    <td></td>
                    <td>crosshairs</td>
                </tr>
                <tr>
                    <td>Required Oolite Version</td>
                    <td></td>
                    <td></td>
                </tr>
                <tr>
                    <td>Maximum Oolite Version</td>
                    <td></td>
                    <td></td>
                </tr>
                <tr>
                    <td>Required Expansions</td>
                    <td>
                    </td>
                    <td>
                    </td>
                </tr>
                <tr>
                    <td>Optional Expansions</td>
                    <td>
                    </td>
                    <td>
                    </td>
                </tr>
                <tr>
                    <td>Conflict Expansions</td>
                    <td>
                    </td>
                    <td>
                    </td>
                </tr>
                <tr>
                    <td>Information URL</td>
                    <td><a target="_blank" href="http://aegidian.org/bb/viewtopic.php?f=4&amp;t=14368">http://aegidian.org/bb/viewtopic.php?f=4&amp;t=14368</a></td>
                    <td><a target="_blank" href="">n/a</a></td>
                </tr>
                <tr>
                    <td>Download URL</td>
                    <td><a target="_blank" href="https://wiki.alioth.net/img_auth.php/9/95/ShieldtasticCrosshairs_1.0.oxz">https://wiki.alioth.net/img_auth.php/9/95/ShieldtasticCrosshairs_1.0.oxz</a></td>
                    <td><a target="_blank" href="ShieldtasticCrosshairs.oxz">ShieldtasticCrosshairs.oxz</a></td>
                </tr>
                <tr>
                    <td>License</td>
                    <td>See within.</td>
                    <td>See within.</td>
                </tr>
                <tr>
                    <td>File Size</td>
                    <td>n/a</td>
                </tr>
                <tr>
                    <td>Upload date</td>
                    <td>1610873375</td>
                </tr>
            </table>
                </a>

        <a name="documentation">
        <h2>Documentation</h2>
        
        <h3>Shieldtastic Crosshairs READ ME.txt</h3>
        <pre>------------------------------------
Shieldtastic Crosshairs OXP ver. 1.0
------------------------------------
  Date: October 8th, 2014
Author: Wildeblood


---------------------
Installation and use:
---------------------

Adds two semi-circular indicators showing the state of the shields around the central cross-hairs. Compatible with most HUDs.


-----------
Change Log:
-----------

1.0 (October 8th, 2014) First published.
</pre>
        </a>

        <a name="equipment">          
        <h2>Equipment</h2>
            This expansion declares no equipment. This may be related to warnings.
        </a>

        <a name="ships">    
        <h2>Ships</h2>
            This expansion declares no ships. This may be related to warnings.
        </a>

        <a name="models">    
        <h2>Models</h2>
            This expansion declares no models. This may be related to warnings.
        </a>

        <a name="scripts">    
        <h2>Scripts</h2>
            <table>
                <tr>
                    <th>Path</th>
                </tr>
                <tr>
                    <td valign="top">Scripts/shieldtastic_crosshairs.js</td>
                    <td><pre>&quot;use strict&quot;;

this.name    = &quot;Shieldtastic Crosshairs&quot;;
this.version = &quot;1.0&quot;;

this.warningLevel_1 = 0.9;
this.warningLevel_2 = 0.6;
this.dangerLevel    = 0.3;

/* ====================================================================================
			START-UP
======================================================================================= */

    this.startUp = function () {
        &quot;use strict&quot;;
        if (worldScripts[&quot;Auto Crosshairs&quot;]) {
            this._monitorShields = this._monitorShields_v2;
        }
        delete this._monitorShields_v2;
        delete this.startUp;
    }

/* ====================================================================================
			STARTING &amp; STOPPING FRAME CALLBACK

	FCB starts when player.alertCondition becomes &gt; 1. Player is mass-locked.
======================================================================================= */

    this.alertConditionChanged = function (newLevel, oldLevel) {
        &quot;use strict&quot;;
        if (newLevel &gt; 1 &amp;&amp;
            !this.$runningFCB) {
            if (player.ship.crosshairs === null) {
                this.$ooliteQuirk = [
                    player.ship.hud,
                    player.ship.reticleTargetSensitive,
                    player.ship.scannerNonLinear,
                    player.ship.scannerUltraZoom
                ];
            }
            this.$runningFCB = addFrameCallback(this._monitorShields.bind(this));
        }
    }

    this._ooliteQuirk = function () {
        &quot;use strict&quot;;
        if (player.ship.hud == this.$ooliteQuirk[0]) {
            player.ship.reticleTargetSensitive = this.$ooliteQuirk[1];
            player.ship.scannerNonLinear = this.$ooliteQuirk[2];
            player.ship.scannerUltraZoom = this.$ooliteQuirk[3];
        } else {
            // The HUD has changed, so preserving these settings is no longer our responsibility.
            delete this.$ooliteQuirk;
        }
    }

    this.shipWillDockWithStation = this.shipWillEnterWitchspace = this.shipDied = function () {
        &quot;use strict&quot;;
        this._endFCB();
    }

    this._endFCB = function () {
        &quot;use strict&quot;;
        if (this.$runningFCB) {
            removeFrameCallback(this.$runningFCB);
            delete this.$runningFCB;
         // FixMe: what if player.ship.crosshairs == null was not so to begin with?
            player.ship.crosshairs = null; // &quot;crosshairs.plist&quot;;
            if (this.$ooliteQuirk) {
                this._ooliteQuirk();
                delete this.$ooliteQuirk;
            }
            this.$lastForeStep = &quot;-1&quot;;
            this.$lastAftStep = &quot;-1&quot;;
        }
    }

/* ====================================================================================
			FRAME CALLBACK
======================================================================================= */

    this._monitorShields = function (delta) {
        &quot;use strict&quot;;
        var self = player.ship;
        var fore = self.forwardShield / self.maxForwardShield;
        var aft  = self.aftShield / self.maxAftShield;
        if (player.alertCondition &lt; 2 &amp;&amp;    // Not mass-locked, and
            fore == 1 &amp;&amp; aft == 1) {        // both shields fully charged...
            this._endFCB();
            return;
        }
        var foreStep = 3;
        if (fore &lt; this.dangerLevel) {
            foreStep = 0;
        } else if (fore &lt; this.warningLevel_2) {
            foreStep = 1;
        } else if (fore &lt; this.warningLevel_1) {
            foreStep = 2;
        }
        var aftStep = 3;
        if (aft &lt; this.dangerLevel) {
            aftStep = 0;
        } else if (aft &lt; this.warningLevel_2) {
            aftStep = 1;
        } else if (aft &lt; this.warningLevel_1) {
            aftStep = 2;
        }
        if (foreStep != this.$lastForeStep ||
            aftStep != this.$lastAftStep) {
            self.crosshairs = &quot;shieldtastic_crosshairs_&quot; + foreStep + aftStep + &quot;.plist&quot;;
        //  worldScripts[&quot;Auto Crosshairs&quot;].$offTargetCrosshairs = &quot;shieldtastic_crosshairs_&quot; + foreStep + aftStep + &quot;.plist&quot;;
            this.$lastForeStep = foreStep;
            this.$lastAftStep = aftStep;
        }
    }

    this._monitorShields_v2 = function (delta) {
        &quot;use strict&quot;;
        var self = player.ship;
        var fore = self.forwardShield / self.maxForwardShield;
        var aft  = self.aftShield / self.maxAftShield;
        if (player.alertCondition &lt; 2 &amp;&amp;    // Not mass-locked, and
            fore == 1 &amp;&amp; aft == 1) {        // both shields fully charged...
            this._endFCB();
            return;
        }
        var foreStep = 3;
        if (fore &lt; this.dangerLevel) {
            foreStep = 0;
        } else if (fore &lt; this.warningLevel_2) {
            foreStep = 1;
        } else if (fore &lt; this.warningLevel_1) {
            foreStep = 2;
        }
        var aftStep = 3;
        if (aft &lt; this.dangerLevel) {
            aftStep = 0;
        } else if (aft &lt; this.warningLevel_2) {
            aftStep = 1;
        } else if (aft &lt; this.warningLevel_1) {
            aftStep = 2;
        }
        if (foreStep != this.$lastForeStep ||
            aftStep != this.$lastAftStep) {
            self.crosshairs = &quot;shieldtastic_crosshairs_&quot; + foreStep + aftStep + &quot;.plist&quot;;
            worldScripts[&quot;Auto Crosshairs&quot;].$offTargetCrosshairs = &quot;shieldtastic_crosshairs_&quot; + foreStep + aftStep + &quot;.plist&quot;;
            this.$lastForeStep = foreStep;
            this.$lastAftStep = aftStep;
        }
    }

/* ====================================================================================
			COPYRIGHT NOTICE

	(C) 2013,2014 Wildeblood. All rights reserved. 
	Free to use, but DO NOT PROMULGATE MODIFIED VERSIONS.

This was created by some fellow with the user name &quot;Wildeblood&quot; on the Oolite forums, 
he&#39;ll tell you his real name if you bother to ask.
To use means to play with, modify or re-use in whole or in part, and to distribute freely.
To use DOES NOT imply to use for commercial gain, which would be a breach of copyright.
To promulgate means to make official announcements.
======================================================================================= */</pre></td>
                </tr>
            </table>
        </a>
    </body>
</html>
