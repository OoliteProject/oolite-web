<html>
    <head>
        <title>Expansion Scourge of the Black Baron</title>
        <link rel="stylesheet" href="../style.css">
    </head>
    <body>
        <table border="0" width="100%">
            <tr>
                <td>Back to <a href='../index.html'>Index</a></td>
                <td align="right"><small>Page generated: Oct 11, 2023, 3:16:49 PM</small></td>
            </tr>
        </table>

        <h1>Expansion Scourge of the Black Baron</h1>

        <h2>Content</h2>
        <ul>
          <li><a href="#warnings">Warnings</a></li>
          <li><a href="#manifest">Manifest</a></li>
          <li><a href="#documentation">Documentation</a></li>
          <li><a href="#equipment">0 Equipment</a></li>
          <li><a href="#ships">1 Ships</a></li>
          <li><a href="#models">0 Models</a></li>
          <li><a href="#scripts">1 Scripts</a></li>
        </ul>

          <a name="warnings">
            <h2>Warnings</h2>
            <ol>
                <li>Information URL mismatch between OXP Manifest and Expansion Manager string length at character position 0</li>
            </ol>
          </a>

        <a name="manifest">
        <h2>Manifest</h2>
            <table border="1">
                <tr>
                    <th></th>
                    <th>from Expansion Manager's OXP list</th>
                    <th>from Expansion Manifest</th>
                </tr>
                <tr>
                    <td>Description</td>
                    <td>Scourge of the Black Baron mission in Galaxy 1</td>
                    <td>Scourge of the Black Baron mission in Galaxy 1</td>
                </tr>
                <tr>
                    <td>Identifier</td>
                    <td>oolite.oxp.Rxke.BlackBaron</td>
                    <td>oolite.oxp.Rxke.BlackBaron</td>
                </tr>
                <tr>
                    <td>Title</td>
                    <td>Scourge of the Black Baron</td>
                    <td>Scourge of the Black Baron</td>
                </tr>
                <tr>
                    <td>Category</td>
                    <td>Missions</td>
                    <td>Missions</td>
                </tr>
                <tr>
                    <td>Author</td>
                    <td>Rxke</td>
                    <td>Rxke</td>
                </tr>
                <tr>
                    <td>Version</td>
                    <td>2.0</td>
                    <td>2.0</td>
                </tr>
                <tr>
                    <td>Tags</td>
                    <td></td>
                    <td></td>
                </tr>
                <tr>
                    <td>Required Oolite Version</td>
                    <td></td>
                    <td></td>
                </tr>
                <tr>
                    <td>Maximum Oolite Version</td>
                    <td></td>
                    <td></td>
                </tr>
                <tr>
                    <td>Required Expansions</td>
                    <td>
                    </td>
                    <td>
                    </td>
                </tr>
                <tr>
                    <td>Optional Expansions</td>
                    <td>
                    </td>
                    <td>
                    </td>
                </tr>
                <tr>
                    <td>Conflict Expansions</td>
                    <td>
                    </td>
                    <td>
                    </td>
                </tr>
                <tr>
                    <td>Information URL</td>
                    <td><a target="_blank" href=""></a></td>
                    <td><a target="_blank" href="">n/a</a></td>
                </tr>
                <tr>
                    <td>Download URL</td>
                    <td><a target="_blank" href="https://wiki.alioth.net/img_auth.php/5/54/BlackBaron.oxz">https://wiki.alioth.net/img_auth.php/5/54/BlackBaron.oxz</a></td>
                    <td><a target="_blank" href="">n/a</a></td>
                </tr>
                <tr>
                    <td>License</td>
                    <td>CC-BY-NC-SA 3.0</td>
                    <td>CC-BY-NC-SA 3.0</td>
                </tr>
                <tr>
                    <td>File Size</td>
                    <td>n/a</td>
                </tr>
                <tr>
                    <td>Upload date</td>
                    <td>1610873301</td>
                </tr>
            </table>
                </a>

        <a name="documentation">
        <h2>Documentation</h2>
        <p>Also read <a href='http://wiki.alioth.net/index.php/Scourge%20of%20the%20Black%20Baron'>http://wiki.alioth.net/index.php/Scourge%20of%20the%20Black%20Baron</a></p>
        <h3>black_baron_readme.txt</h3>
        <pre>Black Baron oxp

Written by Rxke, compatible with Oolite v1.76 and above. (Fingers crossed)

A sequel to the Long Way Around mission, featuring combat and transport missions. Well suited to a relative novice. Commanders with less than a competent rating need not apply, though!

Somewhere near the centre of Galaxy 1, a group of exiles dream of returning to their home planet...


Install:

Copy black_baron.oxp to Oolite&#39;s AddOns folder.

Uninstall:

Remove black_baron.oxp from Oolite&#39;s AddOns folder.


Changelog:

v 2.0
- Added some cleanup code.
- Updated ship model to Griff-based version.
- Converted XML-based plist files to OpenStep format.

v 1.76.1
bugfix thanks to richard.a.p.smith  jun 2012

v. 1.74
Thargoid - 22nd July 2010

- Updated JS for v1.74 (No longer works with lower versions of Oolite - for that use v. 1.70).
- Corrected bug that if mission is accepted in G1 then player goes into G2 (or beyond), the next stages could still trigger.
- Gave a yes/no choice for first mission offering.
- Updated mission text to be flexible if systems used in the OXP are renamed by other OXPs.

v. 1.70
Kaks - 24 March 2008

- corrected it, now starts only if Long Way Around has been completed.
- works even if LWA has been removed from AddOns(after completing it).
- restored ambush code.
- rearranged texture from three files to one.
- minor tidy up, more distinctive names for descriptions and ship data.
- converted to js script for Oolite 1.70+.


Previous versions:

The first OXP not made by Aegidian!
No readme found. Latest file changes made on 29 April 2006 by Rxke. 
</pre>
        </a>

        <a name="equipment">          
        <h2>Equipment</h2>
            This expansion declares no equipment. This may be related to warnings.
        </a>

        <a name="ships">    
        <h2>Ships</h2>
            <table>
                <tr>
                    <th>Name</th>
                </tr>
                <tr>
                    <td><a href="../ships/rxke_blackbaron_minion.html">Black Baron Minion</a></td>
                </tr>
            </table>
        </a>

        <a name="models">    
        <h2>Models</h2>
            This expansion declares no models. This may be related to warnings.
        </a>

        <a name="scripts">    
        <h2>Scripts</h2>
            <table>
                <tr>
                    <th>Path</th>
                </tr>
                <tr>
                    <td valign="top">Config/script.js</td>
                    <td><pre>&quot;use strict&quot;;
this.name           = &quot;blackbaron&quot;;
this.author         = &quot;Thargoid, Kaks, Rxke, phkb&quot;;
this.copyright      = &quot;Creative Commons: attribution, non-commercial, sharealike.&quot;;
this.description    = &quot;The Black Baron Mission - original plist script by Rxke, js script by Kaks&quot;;
this.licence        = &quot;CC BY-NC-SA 3.0&quot;;

// Script update for 1.74 - will not work with any lower version

this.startUp = function() {
	if (missionVariables.blackbaron==&#39;MISSION_COMPLETE&#39;) {
		delete this.missionScreenOpportunity;
		delete this.shipWillExitWitchspace;
		delete this.playerEnteredNewGalaxy;
		delete this.startUp;
		return;
	}
	if(!missionVariables.blackbaron) missionVariables.blackbaron=&#39;OFFER&#39;;
}
	

this.addMinions = function() {
	if (player.ship.isInSpace === false) {
		this.timer.stop();
		return;
	}
	this.minionCounter++;
	if(system.shipsWithRole(&#39;rxke_blackbaron_minion&#39;).length &lt; 7 &amp;&amp; Math.random() &lt; 0.5) system.addShips(&#39;rxke_blackbaron_minion&#39;, 1);
	if(this.minionCounter &gt;= (system.ID==222 ? 9 :6)) this.timer.stop();
}

// mission offers --------------------------------------------------------

this.missionScreenOpportunity = function ()	{	
	if (player.ship.docked &amp;&amp; player.ship.dockedStation.isMainStation &amp;&amp; galaxyNumber==0) {
		if (missionVariables.longwayround==&#39;MISSION_COMPLETE&#39;
			&amp;&amp; missionVariables.blackbaron == &#39;OFFER&#39;
			&amp;&amp; system.ID==243
			&amp;&amp; player.score&gt;150) {
			mission.runScreen({screenID:&quot;blackbaron&quot;, title:&quot;Black Baron&quot;, messageKey: &quot;rxke_blackbaron_briefing1&quot;, choicesKey: &quot;rxke_blackbaron_choices&quot;}, this.choice);
			return;
		}
				
		switch(missionVariables.blackbaron) {
			case &#39;STAGE1&#39;: {
				if (system.ID==93 &amp;&amp; galaxyNumber==0){
					mission.runScreen({screenID:&quot;blackbaron&quot;, title:&quot;Black Baron&quot;, messageKey: &quot;rxke_blackbaron_briefing2&quot;});
					mission.setInstructionsKey(&quot;rxke_blackbaron_short1&quot;); 
					player.credits+=1000;
					player.consoleMessage(&quot;You have been awarded 1000cr.&quot;);
					missionVariables.blackbaron=&#39;STAGE2&#39;;
				}
				break;
			}
			case &#39;STAGE2&#39;: {
				if (system.ID==180 &amp;&amp; galaxyNumber==0){
					mission.runScreen({screenID:&quot;blackbaron&quot;, title:&quot;Black Baron&quot;, messageKey: &quot;rxke_blackbaron_briefing3&quot;});
					player.credits+=5000;
					player.consoleMessage(&quot;You have been awarded 5000cr.&quot;);
					missionVariables.blackbaron=&#39;MISSION_COMPLETE&#39;;
					mission.setInstructionsKey(null);
					delete this.missionScreenOpportunity;
					delete this.shipWillExitWitchspace;
					delete this.playerEnteredNewGalaxy;
				}	
				break;
			}
		}
	}
}

this.choice = function(choice) {
	switch(choice) {
		case &quot;rxke_blackbaron_choiceAccept&quot;: {
			mission.setInstructionsKey(&quot;rxke_blackbaron_short2&quot;); 
			missionVariables.blackbaron=&#39;STAGE1&#39;;
			break;
		}
		case &quot;rxke_blackbaron_choiceReject&quot;: {
			missionVariables.blackbaron=&#39;MISSION_COMPLETE&#39;;
			mission.setInstructionsKey(null);
			break;
		}
	}
}

//    events  ---------------------------------------------------------------

this.shipWillExitWitchspace = function() {
	if (missionVariables.blackbaron==&#39;STAGE2&#39; &amp;&amp; galaxyNumber == 0) {
		if (system.ID==180)
			system.addShips(&#39;rxke_blackbaron_minion&#39;, 7);
		else if (system.ID==222 || system.ID==48) {
			this.minionCounter=0;
			this.timer=new Timer(this, this.addMinions,2,8);
		}
	}
}

this.playerEnteredNewGalaxy = function(galaxyNumber) {
    if(galaxyNumber == 1 &amp;&amp; (missionVariables.blackbaron==&#39;STAGE1&#39; || missionVariables.blackbaron==&#39;STAGE2&#39;)) {
		mission.setInstructionsKey(null);
		missionVariables.blackbaron=&#39;MISSION_COMPLETE&#39;;
		delete this.missionScreenOpportunity;
		delete this.shipWillExitWitchspace;
		delete this.playerEnteredNewGalaxy;
	}
}
</pre></td>
                </tr>
            </table>
        </a>
    </body>
</html>
