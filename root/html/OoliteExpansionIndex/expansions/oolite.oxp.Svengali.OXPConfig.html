<html>
    <head>
        <title>Expansion OxpConfig</title>
        <link rel="stylesheet" href="../style.css">
    </head>
    <body>
        <table border="0" width="100%">
            <tr>
                <td>Back to <a href='../index.html'>Index</a></td>
                <td align="right"><small>Page generated: Oct 11, 2023, 3:16:49 PM</small></td>
            </tr>
        </table>

        <h1>Expansion OxpConfig</h1>

        <h2>Content</h2>
        <ul>
          
          <li><a href="#manifest">Manifest</a></li>
          <li><a href="#documentation">Documentation</a></li>
          <li><a href="#equipment">8 Equipment</a></li>
          <li><a href="#ships">2 Ships</a></li>
          <li><a href="#models">0 Models</a></li>
          <li><a href="#scripts">1 Scripts</a></li>
        </ul>


        <a name="manifest">
        <h2>Manifest</h2>
            <table border="1">
                <tr>
                    <th></th>
                    <th>from Expansion Manager's OXP list</th>
                    <th>from Expansion Manifest</th>
                </tr>
                <tr>
                    <td>Description</td>
                    <td>Provides menus to configure supported OXPs.</td>
                    <td>Provides menus to configure supported OXPs.</td>
                </tr>
                <tr>
                    <td>Identifier</td>
                    <td>oolite.oxp.Svengali.OXPConfig</td>
                    <td>oolite.oxp.Svengali.OXPConfig</td>
                </tr>
                <tr>
                    <td>Title</td>
                    <td>OxpConfig</td>
                    <td>OxpConfig</td>
                </tr>
                <tr>
                    <td>Category</td>
                    <td>Miscellaneous</td>
                    <td>Miscellaneous</td>
                </tr>
                <tr>
                    <td>Author</td>
                    <td>Svengali, Lone_Wolf</td>
                    <td>Svengali, Lone_Wolf</td>
                </tr>
                <tr>
                    <td>Version</td>
                    <td>2.3.4</td>
                    <td>2.3.4</td>
                </tr>
                <tr>
                    <td>Tags</td>
                    <td></td>
                    <td></td>
                </tr>
                <tr>
                    <td>Required Oolite Version</td>
                    <td></td>
                    <td></td>
                </tr>
                <tr>
                    <td>Maximum Oolite Version</td>
                    <td></td>
                    <td></td>
                </tr>
                <tr>
                    <td>Required Expansions</td>
                    <td>
                            <li>oolite.oxp.Svengali.CCL:1.7.1</li>
                    </td>
                    <td>
                            <li>oolite.oxp.Svengali.CCL:1.7.1</li>
                    </td>
                </tr>
                <tr>
                    <td>Optional Expansions</td>
                    <td>
                    </td>
                    <td>
                    </td>
                </tr>
                <tr>
                    <td>Conflict Expansions</td>
                    <td>
                    </td>
                    <td>
                    </td>
                </tr>
                <tr>
                    <td>Information URL</td>
                    <td><a target="_blank" href="http://wiki.alioth.net/index.php/OXPConfig">http://wiki.alioth.net/index.php/OXPConfig</a></td>
                    <td><a target="_blank" href="">n/a</a></td>
                </tr>
                <tr>
                    <td>Download URL</td>
                    <td><a target="_blank" href="https://wiki.alioth.net/img_auth.php/f/f3/OxpConfig_2.3.4.oxz">https://wiki.alioth.net/img_auth.php/f/f3/OxpConfig_2.3.4.oxz</a></td>
                    <td><a target="_blank" href="http://wiki.alioth.net/img_auth.php/5/50/OxpConfig_2.3.4.oxz">http://wiki.alioth.net/img_auth.php/5/50/OxpConfig_2.3.4.oxz</a></td>
                </tr>
                <tr>
                    <td>License</td>
                    <td>CC BY-NC-SA 3</td>
                    <td>CC BY-NC-SA 3</td>
                </tr>
                <tr>
                    <td>File Size</td>
                    <td>n/a</td>
                </tr>
                <tr>
                    <td>Upload date</td>
                    <td>1610873512</td>
                </tr>
            </table>
                </a>

        <a name="documentation">
        <h2>Documentation</h2>
        <p>Also read <a href='http://wiki.alioth.net/index.php/OxpConfig'>http://wiki.alioth.net/index.php/OxpConfig</a></p>
        </a>

        <a name="equipment">          
        <h2>Equipment</h2>
            <table>
                <tr>
                    <th>Name</th>
                    <th>Visible</th>
                    <th>Cost [deci-credits]</th>
                    <th>Tech-Level</th>
                </tr>
                <tr>
                    <td><a href="../equipment/EQ_OXPCONFIG_COLORS.html">HUD</a></td>
                    <td>no</td>
                    <td align="right">0</td>
                    <td align="center">100+</td>
                </tr>
                <tr>
                    <td><a href="../equipment/EQ_OXPCONFIG_M0.html">HUD</a></td>
                    <td>no</td>
                    <td align="right">0</td>
                    <td align="center">100+</td>
                </tr>
                <tr>
                    <td><a href="../equipment/EQ_OXPCONFIG_M1.html">HUD</a></td>
                    <td>no</td>
                    <td align="right">0</td>
                    <td align="center">100+</td>
                </tr>
                <tr>
                    <td><a href="../equipment/EQ_OXPCONFIG_M2.html">HUD</a></td>
                    <td>no</td>
                    <td align="right">0</td>
                    <td align="center">100+</td>
                </tr>
                <tr>
                    <td><a href="../equipment/EQ_OXPCONFIG_M3.html">HUD</a></td>
                    <td>no</td>
                    <td align="right">0</td>
                    <td align="center">100+</td>
                </tr>
                <tr>
                    <td><a href="../equipment/EQ_OXPCONFIG_M4.html">HUD</a></td>
                    <td>no</td>
                    <td align="right">0</td>
                    <td align="center">100+</td>
                </tr>
                <tr>
                    <td><a href="../equipment/EQ_OXPCONFIG_M5.html">HUD</a></td>
                    <td>no</td>
                    <td align="right">0</td>
                    <td align="center">100+</td>
                </tr>
                <tr>
                    <td><a href="../equipment/EQ_OXPCONFIG_W0.html">HUD</a></td>
                    <td>no</td>
                    <td align="right">0</td>
                    <td align="center">100+</td>
                </tr>
            </table>
        </a>

        <a name="ships">    
        <h2>Ships</h2>
            <table>
                <tr>
                    <th>Name</th>
                </tr>
                <tr>
                    <td><a href="../ships/oxpconfig_modelview.html">oxpconfig_modelview</a></td>
                </tr>
                <tr>
                    <td><a href="../ships/oxpconfig_sub.html">oxpconfig_sub</a></td>
                </tr>
            </table>
        </a>

        <a name="models">    
        <h2>Models</h2>
            This expansion declares no models. 
        </a>

        <a name="scripts">    
        <h2>Scripts</h2>
            <table>
                <tr>
                    <th>Path</th>
                </tr>
                <tr>
                    <td valign="top">Scripts/OXPConfig.js</td>
                    <td><pre>&quot;use strict&quot;;
this.name = &quot;OXPConfig&quot;;
this.author = &quot;Svengali, Lone_Wolf&quot;;
this.copyright = &quot;(C)2009-2015, License:CC-by-nc-sa-3.0&quot;;
this.description = &quot;Tool. Configures settings to en/disable features or adjusts them.&quot;;
this.version = &quot;2.3.4&quot;;

this.oxpcSettings = {
	Info: {Name:&quot;OXPConfig&quot;,MinVersion:this.version,Display:&quot;0XPConfig&quot;,EarlyCall:false,EarlySet:false,Notify:false,DynamicNotify:false,LeaveData:false,
		InfoB:&quot;logEarly measures the startUp time. Note that time is quantised in units of maybe 50/60ms or 16 ms or 10ms or ..., depending on system. Changes to OXPConfigs displayAll and collectAll require a restart to take effect.&quot;,
		InfoS:&quot;The &#39;sliders&#39; are short unsigned integers in range of 0-255 (or 0x0-0xff) and can be adjusted via increase / decrease or onscreen keyboard. They could also be used as additional bitmasks.&quot;,
		InfoE:&quot;The entities entries are one 24Bit unsigned integer in range of 0-16777216 (or 0x0-0xffffff) and are splitted into single bits. This is meant specially for oxps to en/disable appearance of entities, like replacement sets.&quot;},
	Bool0: {Name:&quot;logging&quot;,Def:false,Desc:&quot;Logging functions. Verbose and slow.&quot;},
	Bool1: {Name:&quot;logEarly&quot;,Def:false,Desc:&quot;Logs early calls and time.&quot;},
	Bool2: {Name:&quot;displayAll&quot;,Def:false,Desc:&quot;Included OXPs or with oxpcSettings.&quot;},
	Bool3: {Name:&quot;collectAll&quot;,Def:false,Desc:&quot;All worldScripts. Slow.&quot;},
	SInt0: {Name:&quot;SIntA&quot;,Def:0x2,Max:0xf,Desc:&quot;Only a test&quot;},
	SInt1: {Name:&quot;SIntB&quot;,Def:0xaf,Max:0xbf,Desc:&quot;for the&quot;},
	SInt2: {Name:&quot;SIntC&quot;,Def:0xfe,Max:0xff,Desc:&quot;integers&quot;},
	SInt3: {Name:&quot;SIntD&quot;,Def:0x10,Max:0x13,Desc:&quot;mechanism.&quot;},
	EInt0: {Name:&quot;EIntA&quot;,Def:0xffffff,Max:0xffffff,Desc:[&quot;description 01&quot;,&quot;description 02&quot;,&quot;description 03&quot;,&quot;description 04&quot;,&quot;description 05&quot;,&quot;description 06&quot;,&quot;description 07&quot;,&quot;description 08&quot;,&quot;description 09&quot;,&quot;description 10&quot;,&quot;description 11&quot;,&quot;description 12&quot;,&quot;description 13&quot;,&quot;description 14&quot;,&quot;description 15&quot;,&quot;description 16&quot;,&quot;description 17&quot;,&quot;description 18&quot;,&quot;description 19&quot;,&quot;description 20&quot;,&quot;description 21&quot;,&quot;description 22&quot;,&quot;description 23&quot;,&quot;description 24&quot;]}
};
// Color definitions
this.genericUserColors = [[[1,0.9,0.4,1],null],[[1,0.5,0,1],null],[[1,0,1,1],null],[[0.9,0.2,0.5,1],null],[[0.3,0.6,0.3,1],null],[[1,1,1,1],[1,0,0,1]],[[1,1,1,1],[0,1,0,1]],[[0.4,0.4,0.4,1],[0.6,0.9,1,1]],[[1,0.3,0.3,1],[0.3,1,0.3,1]],[[0.6,0,0,1],[1,0,0,1]],[[0,0.5,0.6,1],null],[[0.6,0.4,0.2,0.9],null],[[0.6,0,1,0.8],null],[[0.6,1,0.7,1],null],[[0,0.5,1,0.8],null],[[1,0,0,0.9],[0.9,0.3,0.9,1]],[[0.7,0.8,0,1],[0,0,1,1]],[[1,1,0,1],[0,1,1,1]],[[0,0,0.7,1],[0,1,0,1]],[[0,0,1,0.9],[1,0,0,1]]];
// OXPconfig gathers the infos on startUp and builds the searchtrees and arrays.
// For applying settings it runs two cycles - one on startUp and the other on guiScreenChanged/alertConditionChanged or timer.
this.startUp = function()
{
	var start = (new Date()).getTime();
	delete this.startUp;
	if(missionVariables.genericUserColors) this.genericUserColors = JSON.parse(missionVariables.genericUserColors);
	else missionVariables.genericUserColors = JSON.stringify(this.genericUserColors);
	if(!worldScripts.Cabal_Common_Functions || typeof(worldScripts.Cabal_Common_Functions.Cabal_Common)===&#39;undefined&#39;){this.killSelf(&quot; -&gt; Cabal_Common_Functions missing.&quot;); return;}
	else {
		this.helper = new worldScripts.Cabal_Common_Functions.Cabal_Common();
		if(this.helper.internalVersion&lt;15){this.killSelf(&quot; -&gt; Cabal_Common_Functions is too old.&quot;); return;}
	}
	this.logging = false;
	this.logEarly = false;
	this.displayAll = false;
	this.collectAll = false;
	this.SIntA = 0x2;
	this.SIntB = 0xaf;
	this.SIntC = 0xfe;
	this.SIntD = 0x10;
	this.EIntA = 0xffffff;
	// Load OXPConfigs settings first.
	if(missionVariables.OXPConfig_Self){
		var confSelf = missionVariables.OXPConfig_Self.split(&#39;,&#39;),temp,what = [&quot;logging&quot;,&quot;logEarly&quot;,&quot;displayAll&quot;,&quot;collectAll&quot;];
		for(var i=0;i&lt;4;i++){temp = what[i]; if(confSelf[i]===&#39;true&#39;) this[temp] = true; else this[temp] = false;}
	}
	if(this.collectAll) this.displayAll = true;
	this.prepare();
	this.changed = [];
	this.loadDone = [];
	this.excludeGUI = [&#39;GUI_SCREEN_OPTIONS&#39;,&#39;GUI_SCREEN_SAVE&#39;,&#39;GUI_SCREEN_LOAD&#39;,&#39;GUI_SCREEN_INTRO1&#39;,&#39;GUI_SCREEN_INTRO2&#39;];
	this.oxpCTimer = new Timer(this,this.doOxpCTimer,1);
	this.init = true;
	// Cleanup stuff from older versions.
	missionVariables.oxpConfig_defaults = null;
	missionVariables.oxpConfig_selectiveLoad = null;
	missionVariables.oxpConfig_settings = null;
	missionVariables.oxpConfig_storedOxps = null;
	// New mV - floats are not allowed in missionVariables!!!
	this.myVersion = this.version.replace(/\./gi,&quot;_&quot;);
	if(!missionVariables.OXPConfig_Change) missionVariables.OXPConfig_Change = this.myVersion;
	// Check oxps and apply stored settings (first cycle)
	this.getAvailable();
	this.loadSettings(1);
	delete this.killSelf;
	var diff = (new Date()).getTime() - start;
	if(this.logEarly) log(this.name,this.name+&quot;: OXPConfig startUp done in: &quot;+diff+&quot; ms.&quot;);
};
this.killSelf = function(desc)
{
	player.consoleMessage(this.name+&quot; - Check your Latest.log.&quot;,10);
	log(this.name,this.name+&quot; - Shutting down.&quot;+desc);
	for(var prop in this){if(prop!==&#39;name&#39; &amp;&amp; prop!==&#39;version&#39; &amp;&amp; prop!==&#39;genericUserColors&#39;) delete this[prop];}
	this.deactivated = true;
	return;
};
this.prepare = function()
{
	// Collect data from oxps and build binary search trees. Call startUp if EarlyCall is set.
	// The list is sorted by ID, but will be resorted by .Display when completed/expanded.
	this.supported = [
		{Name:&quot;OXPConfig&quot;,ID:0x0,Display:&quot;OXPConfig&quot;},
		{Name:&quot;hyperradio&quot;,ID:0x1,Display:&quot;Hyperradio&quot;},
		{Name:&quot;BGS-M&quot;,ID:0x2,Display:&quot;BGS&quot;},
		{Name:&quot;vector&quot;,ID:0x3,Display:&quot;Vector&quot;},
		{Name:&quot;snoopers&quot;,ID:0x4,Display:&quot;Snoopers&quot;},
		{Name:&quot;SE-main-script&quot;,ID:0x5,Display:&quot;BlOomberg&quot;},
		{Name:&quot;buoyRepair&quot;,ID:0x6,Display:&quot;BuoyRepair&quot;},
		{Name:&quot;Famous Planets Launch Script&quot;,ID:0x7,Display:&quot;FamousPlanets1.x&quot;},
		{Name:&quot;FuelStation-Setup&quot;,ID:0x8,Display:&quot;FuelStation&quot;},
		{Name:&quot;LaveAcademy&quot;,ID:0x9,Display:&quot;LaveAcademy&quot;},
		{Name:&quot;localhero&quot;,ID:0xa,Display:&quot;Localhero&quot;},
		{Name:&quot;OXPShipRegulator&quot;,ID:0xb,Display:&quot;OXPShipRegulator&quot;},
		{Name:&quot;ScriptTimer&quot;,ID:0xc,Display:&quot;ScriptTimer&quot;},
		{Name:&quot;Welcome Information Script&quot;,ID:0xd,Display:&quot;WelcomeMat&quot;},
		{Name:&quot;Shield Cycler&quot;,ID:0xe,Display:&quot;Shield Cycler&quot;},
		{Name:&quot;Famous Planets&quot;,ID:0xf,Display:&quot;FamousPlanets&quot;},
		{Name:&quot;System Redux&quot;,ID:0x10,Display:&quot;SystemRedux&quot;},
		{Name:&quot;explorer_club.js&quot;,ID:0x11,Display:&quot;Explorer Club&quot;},
		{Name:&quot;Furball&quot;,ID:0x12,Display:&quot;Furball&quot;},
		{Name:&quot;murphy-thargoid-drive.js&quot;,ID:0x13,Display:&quot;Thargoid Witchspace Drive&quot;},
		{Name:&quot;illegal_goods_tweak&quot;,ID:0x14,Display:&quot;Illegal Goods Tweak&quot;},
		{Name:&quot;Safe_Docking&quot;,ID:0x15,Display:&quot;Safe Docking&quot;},
		{Name:&quot;Jaguar Company&quot;,ID:0x16,Display:&quot;Jaguar Company&quot;},
		{Name:&quot;Friend or Foe&quot;,ID:0x17,Display:&quot;Friend or Foe&quot;},
		{Name:&quot;Skilled NPCs&quot;,ID:0x18,Display:&quot;Skilled NPCs&quot;},
		{Name:&quot;Deep_Horizon_Adv_Nav_Comp&quot;,ID:0x19,Display:&quot;Deep Horizon - Adv. Nav. Computer&quot;},
		{Name:&quot;HyperspaceHangar&quot;,ID:0x1a,Display:&quot;Hyperspace Hangar&quot;}
	];
	this.fullSupported = this.supported; // Holds the internal list of OXPs (Name, ID and Display). Used for loading defaults.
	this.idSearch = new worldScripts.Cabal_Common_Functions.Cabal_Common_BinSearch(); // Quick search for ID or Name of internal OXPs.
	var il = this.supported.length;
	for(var i=0;i&lt;il;i++) this.idSearch.add(this.supported[i].Name,this.supported[i].ID);
	for(var i=0;i&lt;il;i++) this.idSearch.add(String(this.supported[i].ID),this.supported[i].Name);
	this.infoSearch = new worldScripts.Cabal_Common_Functions.Cabal_Common_BinSearch(); // Holds the infos about OXPs. Rebuild by changeOXPData(obj).
	var w = {},o,fflag,oxpb,prop,temp;
	if(!this.displayAll &amp;&amp; !this.collectAll){
		for(var sup in this.supported){
			if(typeof(sup)!==&#39;string&#39; || isNaN(parseInt(sup,null))) continue;
			var a = this.supported[sup].Name;
			w[a] = this.supported[sup];
		}
	} else w = worldScripts;
	for(var temp in w){
		if(!this.displayAll &amp;&amp; !this.collectAll &amp;&amp; typeof(worldScripts[temp])===&#39;undefined&#39;) continue;
		if(worldScripts[temp]===null || typeof(worldScripts[temp])!==&#39;object&#39; || typeof(temp)!==&#39;string&#39;) continue;
		if(typeof(worldScripts[temp].name)!==&#39;undefined&#39;){
			if(typeof(worldScripts[temp].oxpcLookup)!==&#39;undefined&#39;) worldScripts[temp].oxpcLookup();
			if(typeof(worldScripts[temp].oxpcSettings)!==&#39;undefined&#39; &amp;&amp; typeof(worldScripts[temp].oxpcSettings)===&#39;object&#39;){
				o = worldScripts[temp].oxpcSettings;
				if(!Object.isExtensible(o) || Object.isSealed(o) || Object.isFrozen(o)){
					log(this.name,&quot;OXPConfig rejected non extensible, sealed or frozen object in: &quot;+temp);
					this.collectWorld(temp,-4);
					continue;
				}
				if(typeof(o.Info.EarlyCall)!==&#39;boolean&#39;) o.EarlyCall = false;
				else o.EarlyCall = o.Info.EarlyCall;
				if(o.EarlyCall){
					if(worldScripts[temp].startUp){
						worldScripts[temp].startUp();
						if(this.logEarly) log(this.name,&quot;Early call for: &quot;+temp);
					}
				}
				if(typeof(o.Info)===&#39;object&#39;){
					if(typeof(o.Info.Name)===&#39;string&#39; &amp;&amp; o.Info.Name===worldScripts[temp].name){
						if(typeof(o.Info.LeaveData)!==&#39;boolean&#39; || o.Info.LeaveData!==true){delete worldScripts[temp].oxpcSettings;}
						o.Name = o.Info.Name;
						o.Error = 0;
						if(typeof(o.Info.Display)!==&#39;string&#39;) o.Display = o.Name;
						else o.Display = o.Info.Display.substr(0,30);
						if(typeof(o.Info.MinVersion)!==&#39;string&#39;) o.MinVersion = &#39;0.0&#39;;
						else o.MinVersion = o.Info.MinVersion;
						if(typeof(o.Info.EarlySet)!==&#39;boolean&#39;) o.EarlySet = false;
						else o.EarlySet = o.Info.EarlySet;
						if(typeof(o.Info.Notify)!==&#39;boolean&#39;) o.Notify = false;
						else o.Notify = o.Info.Notify;
						if(typeof(o.Info.DynamicNotify)!==&#39;boolean&#39;) o.DynamicNotify = false;
						else o.DynamicNotify = o.Info.DynamicNotify;
						fflag = this.idSearch.contains(o.Name);
						if(typeof(fflag)===&#39;number&#39;){
							o.ID = fflag;
							o.Support = 1;
							this.supported[fflag].Support = 1;
						} else {
							if(!this.displayAll) continue;
							o.ID = -1;
							o.Support = -5;
							var r = {Name:o.Name,ID:-1,Display:o.Display,Support:-5};
							this.supported.push(r);
						}
						oxpb = 0; prop = [&quot;Bool0&quot;,&quot;Bool1&quot;,&quot;Bool2&quot;,&quot;Bool3&quot;]
						for(var i=0;i&lt;4;i++){
							temp = prop[i]
							if(typeof(o[temp])===&#39;object&#39;){
								if(typeof(o[temp].Name)!==&#39;string&#39; || typeof(o[temp].Def)!==&#39;boolean&#39; || typeof(o[temp].Desc)!==&#39;string&#39;){
									o[temp] = -1;
									o.Error |= 1;
								} else {
									oxpb |= Math.pow(2,i);
									o[temp].Desc = o[temp].Desc;
								}
							} else o[temp] = -1;
						}
						if(oxpb){
							o.BOptions = oxpb;
							if(typeof(o.Info.InfoB)===&#39;string&#39;) o.InfosB = o.Info.InfoB;
							else o.InfoB = &quot;not available&quot;;
						} else {
							o.BOptions = -1;
							o.InfoB = &quot;not available&quot;;
						}
						oxpb = 0; prop = [&quot;SInt0&quot;,&quot;SInt1&quot;,&quot;SInt2&quot;,&quot;SInt3&quot;]
						for(var i=0;i&lt;4;i++){
							temp = prop[i]
							if(typeof(o[temp])===&#39;object&#39;){
								if(typeof(o[temp].Name)!==&#39;string&#39; || typeof(o[temp].Def)!==&#39;number&#39; || typeof(o[temp].Max)!==&#39;number&#39; || typeof(o[temp].Desc)!==&#39;string&#39;){
									o[temp] = -1;
									o.Error |= 2;
								} else {
									oxpb |= Math.pow(2,i);
									o[temp].Desc = o[temp].Desc;
								}
							} else o[temp] = -1;
						}
						if(oxpb){
							o.SOptions = oxpb;
							if(typeof(o.Info.InfoS)===&#39;string&#39;) o.InfosS = o.Info.InfoS;
							else o.InfoS = &quot;not available&quot;;
						} else {
							o.SOptions = -1;
							o.InfoS = &quot;not available&quot;;
						}
						oxpb = 0; prop = [&quot;EInt0&quot;]
						for(var i=0;i&lt;1;i++){
							temp = prop[i]
							if(typeof(o[temp])===&#39;object&#39;){
								if(typeof(o[temp].Name)!==&#39;string&#39; || typeof(o[temp].Def)!==&#39;number&#39; || typeof(o[temp].Max)!==&#39;number&#39; || typeof(o[temp].Desc)!==&#39;object&#39;){
									o[temp] = -1;
									o.Error |= 4;
								} else {
									oxpb |= Math.pow(2,i);
									var m = this.helper.msbPos(o[temp].Max);
									if(m!==o[temp].Desc.length) o.Error |= 8;
								}
							} else o[temp] = -1;
						}
						if(oxpb){
							o.EOptions = oxpb;
							if(typeof(o.Info.InfoE)===&#39;string&#39;) o.InfosE = o.Info.InfoE;
							else o.InfoE = &quot;not available&quot;;
						} else {
							o.EOptions = -1;
							o.InfoE = &quot;not available&quot;;
						}
						if(this.logging) for(var prop in o){log(this.name,prop+&quot; : &quot;+o[prop]);}
						// All checks passed, put in tree
						this.infoSearch.add(o.Name,o);
					} else this.collectWorld(temp,-4);
				} else this.collectWorld(temp,-6);
			} else this.collectWorld(temp,-7);
		} else log(this.name,&quot;Error: Shouldn&#39;t be in worldScripts list: &quot;+temp);
	}
	if(!this.displayAll){
		// Remove from this.supported.
		var n = this.supported.length;
		while(n--) if(typeof(this.supported[n].Support)===&#39;undefined&#39; || this.supported[n].Support&lt;1) this.supported.splice(n,1);
	}
	this.oxps = this.supported.length;
	if(this.logging || this.logEarly) log(&quot;OXPs in list:&quot;+this.oxps);
	for(var prop in this.supported){
		if(typeof(this.supported[prop])===&#39;object&#39;){
			if(typeof(this.supported[prop].Support)===&#39;undefined&#39;) this.supported[prop].Support = 0;
			if(this.logging) log(this.name,this.supported[prop].Name+&quot; &quot;+prop+&quot; Support:&quot;+this.supported[prop].Support+&quot; ID:&quot;+this.supported[prop].ID);
		}
	}
	// Sort by Display for screens. One time job, sorting is slow.
	var first = false;
	if(this.supported[0].Name===&#39;OXPConfig&#39;){this.supported.shift(); first = true;}
	this.supported = this.helper.arrSortByProperty(this.supported,&quot;Display&quot;);
	if(first) this.supported.unshift({Name:&#39;OXPConfig&#39;,ID:0x0,Display:&#39;OXPConfig&#39;,Support:1});
	delete this.prepare;
	delete this.collectWorld;
	return;
};
this.collectWorld = function(what,mode)
{
	// mode -7=no settings, -6=no Info, -4=wrong Name
	if(typeof(what)===&#39;undefined&#39;) log(&quot;Undefined:&quot;+what);
	var fflag = this.idSearch.contains(what),o = {};
	if(typeof(fflag)===&#39;number&#39;){
		if(!this.displayAll) return;
		o.Name = this.supported[fflag].Name;
		o.Display = this.supported[fflag].Display;
		o.ID = fflag;
		o.Support = mode;
		this.supported[fflag].Support = -4;
	} else {
		if(!this.collectAll) return;
		o.Name = what;
		o.Display = what;
		o.ID = -1;
		o.Support = mode;
		this.supported.push(o);
	}
	o.Info = -1;
	o.InfoB = -1;
	o.InfoS = -1;
	o.InfoE = -1;
	o.BOptions = -1;
	o.SOptions = -1;
	o.EOptions = -1;
	o.MinVersion = &#39;0.0&#39;;
	o.EarlyCall = false;
	o.EarlySet = false;
	o.Notify = false;
	this.infoSearch.add(what,o);
	return;
};
this.getAvailable = function()
{
	this.available = []; // Status for entries in this.supported (installed, disabled, etc.). Rebuild on every start/activation.
	var temp,avail,minv;
	for(var w=0;w&lt;this.oxps;w++){
		if(typeof(this.supported[w].Name)===&#39;undefined&#39;){
			if(this.logging) for(var prop in this.supported[w]) log(this.name,prop+&quot; : &quot;+this.supported[w][prop]);
			this.available[w] = -9;
			continue;
		} else {
			if(typeof(this.supported[w].Support)!==&#39;undefined&#39; &amp;&amp; (this.supported[w].Support&lt;0 &amp;&amp; this.supported[w].Support!==-5)){
				this.available[w] = this.supported[w].Support;
				continue;
			}
			avail = this.supported[w].Name
			temp = this.infoSearch.contains(avail);
			minv = temp.MinVersion;
			if(worldScripts[avail]){
				if(worldScripts[avail].deactivated) this.available[w] = -1;
				else {
					if(typeof(minv)===&#39;undefined&#39;) this.available[w] = -3;
					else {
						if(worldScripts[avail].version &amp;&amp; !this.helper.strCompareVersion(worldScripts[avail].version,minv)) this.available[w] = -2;
						else this.available[w] = 1;
					}
				}
			} else this.available[w] = 0;
		}
	}
	if(this.logging || this.logEarly) log(this.name,this.name+&quot;: available:&quot;+this.available);
	return;
};
this.doInit = function()
{
	this.cleanTimer();
	delete this.init;
	delete this.doInit;
	// Check oxps and apply stored settings (second cycle)
	this.getAvailable();
	this.loadSettings();
	this.loadDone = [];
	return;
};
this.doOxpCTimer = function()
{
	if(this.init) this.doInit();
	if(!player.ship.isValid || !player.ship.docked || this.excludeGUI.indexOf(guiScreen)!==-1) return;
	if(guiScreen===&#39;GUI_SCREEN_GAMEOPTIONS&#39;){
		this.cleanTimer();
		player.consoleMessage(&quot;OXPConfig prepared.\nStep to SYSTEM_DATA_SCREEN (F7) to activate.&quot;,6);
		this.activate = true;
		var oxpcSound = new SoundSource(); oxpcSound.loop = false; oxpcSound.sound = &#39;cabal_common_key.ogg&#39;; oxpcSound.play();
	}
};
this.cleanTimer = function()
{
	if(this.oxpCTimer){this.oxpCTimer.stop(); delete this.oxpCTimer;}
	return;
};
this.alertConditionChanged = function()
{
	if(this.init) this.doInit();
	delete this.alertConditionChanged;
};
this.guiScreenChanged = function(to)
{
	if(this.init){this.doInit(); return;}
	if(!player.ship || !player.ship.isValid || !player.ship.docked) return;
	if(this.activate){
		if(to===&#39;GUI_SCREEN_SYSTEM_DATA&#39;){
			this.oxpc = new Object({page:0,activeID:0,activeOXP:-1,activeSlider:-1,activeEntity:0,notify:0});
			this.showStartScreen();
			this.getAvailable();
			return;
		} else {
			var includeGUI = [&#39;GUI_SCREEN_OPTIONS&#39;,&#39;GUI_SCREEN_MISSION&#39;,&#39;GUI_SCREEN_STATUS&#39;];
			var ch = includeGUI.indexOf(to);
			this.activate = false;
			if(ch===-1) player.consoleMessage(&quot;OXPConfig de-activated.&quot;,3);
			if(!ch){
				if(!this.oxpCTimer) this.oxpCTimer = new Timer(this,this.doOxpCTimer,0,3);
			} else this.cleanTimer();
		}
	} else if(to===&#39;GUI_SCREEN_OPTIONS&#39;){
		if(!this.oxpCTimer) this.oxpCTimer = new Timer(this,this.doOxpCTimer,0,3);
		else this.oxpCTimer.start();
	} else this.cleanTimer();
};
this.showScreen = function(message,chc,pic,mod)
{
	var ti = &quot;OXPConfig&quot;,img = {name:&#39;OXPConfig_colors.png&#39;,width:1024,height:512};
	switch(pic){
		case 1: img = &#39;OXPConfig_logo.png&#39;; break;
		case 3: if(this.oxp) ti = this.oxp.Display; break;
		case 4: ti = &quot;User Definable Colors&quot;; break;
	}
	if(message){
		var temp = expandMissionText(message);
		if(temp) message = temp;
	}
	if(!mod) mission.runScreen({title:ti,message:message,choicesKey:chc,background:img,allowInterrupt:false},this.choiceEval);
	else mission.runScreen({title:ti,message:message,choicesKey:chc,background:img,model:mod,spinModel:false,allowInterrupt:false},this.choiceEval);
	player.ship.hud = &quot;hud_oxpconfig.plist&quot;;
	return;
};
this.showStartScreen = function(work)
{
	if(player.ship.hud!==&quot;hud_oxpconfig.plist&quot;) this.oxpHUD = player.ship.hud; // store for resetting
	this.aspect = this.helper.screenChecks();
	this.showScreen(&#39;OXPCONFIG_FIRST&#39;,&#39;OXPCONFIG_TOPLEVEL&#39;,1);
	mission.addMessageTextKey(&#39;OXPCONFIG_WELCOMEA&#39;);
	mission.addMessageTextKey(&#39;OXPCONFIG_QUEST&#39;);
	if(work){
		switch(work){
			case 1: player.ship.awardEquipment(&quot;EQ_OXPCONFIG_M0&quot;); break;
			case 2: player.ship.awardEquipment(&quot;EQ_OXPCONFIG_M1&quot;); break;
			case 3: player.ship.awardEquipment(&quot;EQ_OXPCONFIG_M2&quot;); break;
			case 4: player.ship.awardEquipment(&quot;EQ_OXPCONFIG_M3&quot;); break;
			case 5: player.ship.awardEquipment(&quot;EQ_OXPCONFIG_M4&quot;); break;
			case 6: player.ship.awardEquipment(&quot;EQ_OXPCONFIG_M5&quot;); break;
		}
	}
};
this.choiceEval = function(choice)
{
	for(var i=0;i&lt;6;i++) if(player.ship.equipmentStatus(&quot;EQ_OXPCONFIG_M&quot;+i)===&quot;EQUIPMENT_OK&quot;) player.ship.removeEquipment(&quot;EQ_OXPCONFIG_M&quot;+i);
	player.ship.removeEquipment(&quot;EQ_OXPCONFIG_W0&quot;);
	switch(choice){
		case &quot;OXPCONFIG_BROWSE&quot;:
			this.keyboardBrowse = true;
			worldScripts.Cabal_Common_Keyboard.start(this.name,1,1);
			break;
		case &quot;OXPCONFIG_CHANGE&quot;:
			this.oxpc.page = 0;
			this.showOXPSelection();
			break;
		case &quot;OXPCONFIG_DEFAULTS&quot;:
			this.loadDefaults();
			this.showStartScreen(1);
			break;
		case &quot;OXPCONFIG_RELOAD&quot;:
			var l = this.loadSettings();
			if(l) this.showStartScreen(2);
			else this.showStartScreen(4);
			break;
		case &quot;OXPCONFIG_SAVE&quot;:
			var s = this.storeSettings();
			if(s) this.showStartScreen(3);
			else this.showStartScreen(5);
			break;
		case &quot;OXPCONFIG_PAGEA0&quot;:
			this.showOXPConfig(0);
			break;
		case &quot;OXPCONFIG_PAGEA1&quot;:
			this.showOXPConfig(1);
			break;
		case &quot;OXPCONFIG_PAGEA2&quot;:
			this.showOXPConfig(2);
			break;
		case &quot;OXPCONFIG_PAGEA3&quot;:
			this.showOXPConfig(3);
			break;
		case &quot;OXPCONFIG_PAGEX&quot;:
			this.oxpc.page++;
			this.showOXPSelection();
			break;
		case &quot;OXPCONFIG_PAGEY&quot;:
			this.oxpc.page--;
			this.showOXPSelection();
			break;
		case &quot;OXPCONFIG_PAGEZ&quot;:
			if(player.ship.equipmentStatus(&quot;EQ_OXPCONFIG_COLORS&quot;)===&quot;EQUIPMENT_OK&quot;) player.ship.removeEquipment(&quot;EQ_OXPCONFIG_COLORS&quot;);
			missionVariables.genericUserColors = JSON.stringify(this.genericUserColors);
			this.showStartScreen();
			break;
		case &quot;OXPCONFIG_CHANGEA&quot;:
			this.oxpc.notify |= 1;
			var temp = this.oxp[&quot;Bool0&quot;].Name;
			this.changeBool(temp);
			this.showOXPConfig(this.oxpc.activeOXP);
			break;
		case &quot;OXPCONFIG_CHANGEB&quot;:
			this.oxpc.notify |= 1;
			var temp = this.oxp[&quot;Bool1&quot;].Name;
			this.changeBool(temp);
			this.showOXPConfig(this.oxpc.activeOXP);
			break;
		case &quot;OXPCONFIG_CHANGEC&quot;:
			this.oxpc.notify |= 1;
			var temp = this.oxp[&quot;Bool2&quot;].Name;
			this.changeBool(temp);
			this.showOXPConfig(this.oxpc.activeOXP);
			break;
		case &quot;OXPCONFIG_CHANGED&quot;:
			this.oxpc.notify |= 1;
			var temp = this.oxp[&quot;Bool3&quot;].Name;
			this.changeBool(temp);
			this.showOXPConfig(this.oxpc.activeOXP);
			break;
		case &quot;OXPCONFIG_CHANGEE&quot;:
			if(this.oxp.SOptions&gt;0) this.showSliderPage(this.oxpc.activeOXP,0);
			else if(this.oxp.EOptions&gt;0) this.showEntityPage(this.oxpc.activeOXP,0);
			else this.showOXPSelection();
			break;
		case &quot;OXPCONFIG_SLIDERNEXT&quot;:
			this.oxpc.activeSlider++;
			if(this.oxpc.activeSlider&gt;3) this.oxpc.activeSlider = 0;
			var avail = &quot;SInt&quot;+this.oxpc.activeSlider;
			if(this.oxp[avail]===-1 || this.oxp[avail].Hide){
				while(this.oxp[avail]===-1 || this.oxp[avail].Hide){
					this.oxpc.activeSlider++;
					if(this.oxpc.activeSlider&gt;3) this.oxpc.activeSlider = 0;
					avail = &quot;SInt&quot;+this.oxpc.activeSlider;
				}
			}
			this.showSliderPage(this.oxpc.activeOXP,this.oxpc.activeSlider);
			break;
		case &quot;OXPCONFIG_SLIDERDEC&quot;:
			var decCheck,temp;
			this.oxpc.notify |= 2;
			temp = this.oxp[&quot;SInt&quot;+this.oxpc.activeSlider].Name;
			decCheck = worldScripts[this.oxp.Name][temp]-1;
			if(decCheck&gt;=0){
				worldScripts[this.oxp.Name][temp] = decCheck;
				this.oxp[temp] = decCheck;
				if(this.oxp.DynamicNotify) this.sendNotification(2);
			}
			this.showSliderPage(this.oxpc.activeOXP,this.oxpc.activeSlider);
			break;
		case &quot;OXPCONFIG_SLIDERINC&quot;:
			var incCheck,temp;
			this.oxpc.notify |= 2;
			temp = this.oxp[&quot;SInt&quot;+this.oxpc.activeSlider];
			incCheck = (worldScripts[this.oxp.Name][temp.Name]+1);
			if(incCheck&lt;=temp.Max){
				worldScripts[this.oxp.Name][temp.Name] = incCheck;
				this.oxp[temp.Name] = incCheck;
				if(this.oxp.DynamicNotify) this.sendNotification(2);
			}
			this.showSliderPage(this.oxpc.activeOXP,this.oxpc.activeSlider);
			break;
		case &quot;OXPCONFIG_SLIDERJINC&quot;:
			var full,temp;
			this.oxpc.notify |= 2;
			temp = this.oxp[&quot;SInt&quot;+this.oxpc.activeSlider];
			full = temp.Max;
			worldScripts[this.oxp.Name][temp.Name] = full;
			this.oxp[temp.Name] = full;
			if(this.oxp.DynamicNotify) this.sendNotification(2);
			this.showSliderPage(this.oxpc.activeOXP,this.oxpc.activeSlider);
			break;
		case &quot;OXPCONFIG_SLIDERSET&quot;:
			this.keyboardSlider = true;
			worldScripts.Cabal_Common_Keyboard.start(this.name,1,3);
			break;
		case &quot;OXPCONFIG_ENTITYNEXT&quot;:
			this.oxpc.activeEntity++;
			if(this.oxpc.activeEntity&gt;24 || this.oxpc.activeEntity&gt;this.oxp[&quot;EInt0&quot;].Desc.length-1) this.oxpc.activeEntity = 0;
			this.showEntityPage(this.oxpc.activeOXP,this.oxpc.activeEntity);
			break;
		case &quot;OXPCONFIG_ENTITYOSET&quot;:
			this.oxpc.notify |= 4;
			var bit = Math.pow(2,this.oxpc.activeEntity),current = this.oxp.EInt0.Name;
			if((this.oxp[current]&amp;bit)) this.oxp[current] &amp;= ((Math.pow(2,24)-1)-bit);
			else this.oxp[current] |= bit;
			worldScripts[this.oxp.Name][current] = this.oxp[current];
			if(this.oxp.DynamicNotify) this.sendNotification(4);
			this.showEntityPage(this.oxpc.activeOXP,this.oxpc.activeEntity);
			break;
		case &quot;OXPCONFIG_ENTITYSET&quot;:
			this.keyboardEntity = true;
			worldScripts.Cabal_Common_Keyboard.start(this.name,1,3);
			break;
		case &quot;OXPCONFIG_XA&quot;:
			if(this.oxp.Support===1 || this.oxp.Support===-5){
				var current = this.oxp.EInt0.Name;
				worldScripts[this.oxp.Name][current] = this.oxp[current];
			}
			this.showOXPConfig(this.oxpc.activeOXP);
			break;
		case &quot;OXPCONFIG_XB&quot;:
			if(this.oxp.Support===1 || this.oxp.Support===-5){
				var current = this.oxp.EInt0.Name;
				worldScripts[this.oxp.Name][current] = this.oxp[current];
			}
			this.showSliderPage(this.oxpc.activeOXP,0);
			break;
		case &quot;OXPCONFIG_YA&quot;:
			this.showOXPConfig(this.oxpc.activeOXP);
			break;
		case &quot;OXPCONFIG_YB&quot;:
			this.showEntityPage(this.oxpc.activeOXP,0);
			break;
		case &quot;OXPCONFIG_YSPECIALS&quot;:
			this.showScreen(&#39;OXPCONFIG_FIRST&#39;,&#39;OXPCONFIG_SPECIALS&#39;,1);
			mission.addMessageTextKey(&#39;OXPCONFIG_WELCOMEB&#39;);
			break;
		case &quot;OXPCONFIG_COLORS&quot;:
			player.ship.awardEquipment(&quot;EQ_OXPCONFIG_COLORS&quot;);
			this.showSpecialColors();
			break;
		case &quot;OXPCONFIG_COLORS_A&quot;:
			this.colorWheel++;
			if(this.colorWheel&gt;=20) this.colorWheel = 0;
			this.showSpecialColors();
			break;
		case &quot;OXPCONFIG_COLORS_B&quot;:
			this.colorToggle = 0;
			this.showSpecialColors(1);
			break;
		case &quot;OXPCONFIG_COLORS_C&quot;:
			if(!this.genericUserColors[this.colorWheel][1]) this.genericUserColors[this.colorWheel][1] = [0,0,0,1];
			this.colorToggle = 1;
			this.showSpecialColors(1);
			break;
		case &quot;OXPCONFIG_COLORS_D&quot;:
			if(this.genericUserColors[this.colorWheel][1]) this.genericUserColors[this.colorWheel][1] = null;
			this.colorToggle = 0;
			this.showSpecialColors();
			break;
		case &quot;OXPCONFIG_COLORS_BA&quot;:
			this.genColorsAdd(0);
			this.showSpecialColors(1);
			break;
		case &quot;OXPCONFIG_COLORS_BB&quot;:
			this.genColorsAdd(1);
			this.showSpecialColors(1);
			break;
		case &quot;OXPCONFIG_COLORS_BC&quot;:
			this.genColorsAdd(2);
			this.showSpecialColors(1);
			break;
		case &quot;OXPCONFIG_COLORS_BD&quot;:
			this.genColorsAdd(3);
			this.showSpecialColors(1);
			break;
		case &quot;OXPCONFIG_COLORS_BF&quot;:
			this.showSpecialColors();
			break;
		case &quot;OXPCONFIG_DUMPWS&quot;:
			this.showWSList();
			break;
		case &quot;OXPCONFIG_WSNEXT&quot;:
			this.wsActive++;
			if(this.wsActive&gt;19 || this.wsList.length&lt;=(this.wsIndex*20+this.wsActive)) this.wsActive = 0;
			this.showWSList();
			break;
		case &quot;OXPCONFIG_WSNEXTPAGE&quot;:
			this.wsIndex++;
			if(this.wsIndex &amp;&amp; this.wsIndex&gt;(this.wsList.length-1)/20) this.wsIndex = 0;
			this.showWSList();
			break;
		case &quot;OXPCONFIG_WSZDUMP&quot;:
			this.dumpWSProps();
			break;
		case &quot;OXPCONFIG_DUMPMVS&quot;:
			this.dumpMVs();
			break;
		case &quot;OXPCONFIG_DUMPCS&quot;:
			this.dumpSounds();
			break;
		case &quot;OXPCONFIG_ZA&quot;:
			if(this.oxp.Support===1 || this.oxp.Support===-5){
				if(this.oxp.Notify &amp;&amp; this.oxpc.notify) this.sendNotification(this.oxpc.notify);
				this.checkChanged();
			}
			this.oxpc.notify = 0;
			this.oxpc.activeOXP = -1;
			delete this.oxp;
			this.showOXPSelection();
			break;
		case &quot;OXPCONFIG_ZB&quot;:
			if(this.oxp.Support===1 || this.oxp.Support===-5){
				var current = this.oxp.EInt0.Name;
				worldScripts[this.oxp.Name][current] = this.oxp[current];
				if(this.oxp.Notify &amp;&amp; this.oxpc.notify) this.sendNotification(this.oxpc.notify);
				this.checkChanged();
			}
			this.oxpc.notify = 0;
			this.oxpc.activeOXP = -1;
			delete this.oxp;
			this.showOXPSelection();
			break;
		case &quot;OXPCONFIG_ZQUIT&quot;:
			this.cleanProps();
			if(this.oxpHUD &amp;&amp; player.ship.hud===&quot;hud_oxpconfig.plist&quot;){
				player.ship.hud = this.oxpHUD;
				delete this.oxpHUD;
			}
			break;
	}
	return;
};
this.genColorsAdd = function(i)
{
	var guc = this.genericUserColors[this.colorWheel][this.colorToggle][i];
	guc = this.helper.num2Prec(guc+0.1,2);
	if(guc&gt;1) guc = 0;
	this.genericUserColors[this.colorWheel][this.colorToggle][i] = guc;
	return;
};
this.changeBool = function(temp)
{
	if(this.logging) log(&quot;Change:&quot;+temp)
	if(!worldScripts[this.oxp.Name][temp]){
		worldScripts[this.oxp.Name][temp] = true;
		this.oxp[temp] = true;
	} else {
		worldScripts[this.oxp.Name][temp] = false;
		this.oxp[temp] = false;
	}
	if(this.oxp.DynamicNotify) this.sendNotification(1);
	return;
};
this.showOXPSelection = function()
{
	var t = this.oxpc.page*4,s = 1,supper,temp,data=[],txt;
	for(var i=0;i&lt;4;i++){
		if(this.oxps&gt;t+i){
			txt = null;
			supper = this.supported[t+i];
			temp = this.infoSearch.contains(supper.Name);
			if(typeof(temp)!==&#39;boolean&#39;) data.push(temp.Support);
			else data.push(0);
			switch(supper.Support){
				case 1: txt = &quot;Configure&quot;; break;
				case 0: txt = &quot;Virtual&quot;; break;
				case -1:
				case -2:
				case -3:
				case -4: txt = &quot;View only&quot;; break;
				case -5: txt = &quot;Change only&quot;; break;
				case -6:
				case -7:
				case -8: txt = &quot;View only&quot;; break;
				case -9: txt = &quot;Virtual&quot;; break;
			}
			if(txt) missionVariables[&quot;oxpc_display&quot;+i] = txt+&quot; - &quot;+supper.Display;
		} else missionVariables[&quot;oxpc_display&quot;+i] = &quot;---&quot;;
	}
	if((t-4)&lt;0) s = 0;
	else if((t+4)&gt;=this.oxps) s = 2;
	switch(s){
		case 0: this.showScreen(null,&#39;OXPCONFIG_PAGEA&#39;,2); break;
		case 1: this.showScreen(null,&#39;OXPCONFIG_PAGEB&#39;,2); break;
		case 2: this.showScreen(null,&#39;OXPCONFIG_PAGEC&#39;,2); break;
	}
	mission.addMessageText(&quot;Short overview:\n--------------------------------------------------&quot;);
	for(var ov=0;ov&lt;4;ov++){
		txt = null;
		switch(this.available[t+ov]){
			case -9: txt = &quot;installed, but not supported.\n Name not available.&quot;; break;
			case -8: txt = &quot;installed, but not supported.\n No Lookup.&quot;; break;
			case -7: txt = &quot;installed, but not supported.\n No oxpcSettings.&quot;; break;
			case -6: txt = &quot;installed, but not supported.\n No Info.&quot;; break;
			case -5: txt = &quot;installed and settings available, but no ID.\n  Load/Save disabled.&quot;; break;
			case -4: txt = &quot;installed, but failure in settings.\n No settings available.&quot;; break;
			case -3: txt = &quot;installed, but not supported.\n No MinVersion.&quot;; break;
			case -2: txt = &quot;installed, but not supported.\n MinVersion to low.&quot;; break;
			case -1: txt = &quot;installed, but deactivated.&quot;; break;
			case 0: txt = &quot;not installed.&quot;; break;
			case 1: txt = &quot;installed and active.&quot;; if(data[ov]===-5) txt += &quot;\n Load/Save disabled.&quot;; break;
		}
		if(txt) mission.addMessageText(this.supported[t+ov].Display+&quot;: &quot;+txt+&quot;\n&quot;);
	}
};
this.showNot = function(m)
{
	this.showScreen(&#39;OXPCONFIG_FIRST&#39;,&#39;OXPCONFIG_CHANGE0&#39;,2);
	mission.addMessageText(&quot;\n&quot;+this.oxp.Display+&quot; version:&quot;+this.oxp.version+&quot; &quot;+m);
	return;
};
this.showOXPConfig = function(which)
{
	var t = this.oxpc.page*4+(which&amp;3),temp,text,countOff=0;
	if(t!==this.oxpc.activeOXP || typeof(this.oxp)===&#39;undefined&#39;) this.oxp = this.getOXPInfo(t);
	if(typeof(this.oxp.Error)!==&#39;undefined&#39; &amp;&amp; this.oxp.Error&gt;0) log(this.name,&quot;Error in &quot;+this.oxp.Name+&quot; declaration:&quot;+this.oxp.Error);
	if(this.oxp.Support&lt;1 &amp;&amp; this.oxp.Support!==-5){
		if(this.oxp.Support===0) this.showNot(&quot;is not installed.&quot;);
		else if(this.oxp.Support===-1) this.showNot(&quot;is deactivated - Check Latest.log for details.\n&quot;);
		else if(this.oxp.Support&lt;-1) this.showNot(&quot;is not supported.\n&quot;);
		return;
	}
	if((this.oxp.BOverride===15 &amp;&amp; (this.oxp.Support===1 || this.oxp.Support===-5))){
		if(this.oxp.BOptions&lt;1){
			if(this.oxp.SOptions&gt;0) this.showSliderPage(t,0);
			else if(this.oxp.EOptions&gt;0 &amp;&amp; !this.oxp.EInt0.Hide) this.showEntityPage(t,0);
			else this.showNot(&quot;- nothing to configure yet.&quot;);
		} else this.showNot(&quot;is not compatible.&quot;);
		return;
	}
	if(this.oxp.Support===-1){this.showNot(&quot;is deactivated - Check Latest.log for details.\n&quot;); return;}
	var a = this.oxp.BOptions-(this.oxp.BOverride&amp;this.oxp.BOptions), chc = &#39;OXPCONFIG_CHANGE&#39;, mv=0;
	if(this.oxp.SOptions&gt;0 || this.oxp.EOptions&gt;0) a += 16;
	for(var i=0;i&lt;4;i++){
		mv = Math.pow(2,i);
		if((this.oxp.BOptions&amp;mv) &amp;&amp; !(this.oxp.BOverride&amp;mv)){
			temp = this.oxp[&quot;Bool&quot;+i];
			if(!temp.Hide) missionVariables[&quot;oxpc_bool&quot;+i] = &quot;Change &quot;+this.oxp[&quot;Bool&quot;+i].Name;
			else {
				a -= mv;
				countOff += mv;
			}
		}
	}
	chc += a;
	this.showScreen(null,chc,3);
	if(this.oxp.Support===1) text = &quot;Current: &quot;+this.oxp.Name+&quot;\fv: &quot;+this.oxp.version+&quot;\f\f#&quot;+this.oxp.ID;
	else {
		text = &quot;Current: &quot;+this.oxp.Name+&quot;\fv: &quot;+this.oxp.version;
		player.ship.awardEquipment(&quot;EQ_OXPCONFIG_W0&quot;);
	}
	text = text.substr(0,70); mission.addMessageText(text);
	mission.addMessageText(&quot;Author(s): &quot;+this.oxp.Author);
	mission.addMessageText(&quot;Copyright: &quot;+this.oxp.Copyright);
	mission.addMessageText(&quot;Desc: &quot;+this.oxp.Description);
	mission.addMessageTextKey(&#39;OXPCONFIG_DIVIDE&#39;);
	if(countOff===this.oxp.BOptions) mission.addMessageText(&quot;\nNothing to configure yet.&quot;);
	else {
		for(var i=0;i&lt;4;i++){
			a = Math.pow(2,i);
			if((this.oxp.BOptions&amp;a) &amp;&amp; !(this.oxp.BOverride&amp;a)){
				temp = this.oxp[&quot;Bool&quot;+i];
				if(temp &amp;&amp; !temp.Hide){
					text = temp.Name+&quot;:&quot;;
					text = this.helper.strToWidth(text,9);
					text += worldScripts[this.oxp.Name][temp.Name];
					text = this.helper.strToWidth(text,13);
					text += temp.Desc;
					text = this.helper.strToWidth(text,31);
					mission.addMessageText(text);
				} else mission.addMessageText(&quot;-&quot;);
			} else mission.addMessageText(&quot;-&quot;);
		}
		mission.addMessageText(&quot;--------------------------------------------------\nInfo:&quot;);
		if(this.oxp.Info &amp;&amp; typeof(this.oxp.Info.InfoB)===&#39;string&#39;) mission.addMessageText(this.oxp.Info.InfoB.substr(0,240));
		else mission.addMessageText(&quot;Not available.&quot;);
	}
	return;
};
this.showSliderPage = function(which,ini)
{
	var t = this.oxpc.page*4+(which&amp;3),text;
	if(t!==this.oxpc.activeOXP || typeof(this.oxp)===&#39;undefined&#39;) this.oxp = this.getOXPInfo(t);
	if(this.oxp.SOptions&lt;1 || this.oxp.SOverride===15){this.showNot(&quot;is not compatible.&quot;); return;}
	var chc = &#39;OXPCONFIG_CHANGESLIDER&#39;;
	if(this.oxp.BOptions&lt;1 &amp;&amp; this.oxp.EOptions&lt;1) chc += &#39;A&#39;;
	else if(this.oxp.BOptions&gt;0 &amp;&amp; this.oxp.EOptions&lt;1) chc += &#39;B&#39;;
	else chc += &#39;C&#39;;
	if(typeof(ini)!==&#39;undefined&#39;) this.oxpc.activeSlider = ini;
	var avail = &quot;SInt&quot;+this.oxpc.activeSlider,loop=0,countOff=0;
	if(typeof(this.oxp[avail])===&#39;undefined&#39; || this.oxp[avail].Hide){
		while(typeof(this.oxp[avail])===&#39;undefined&#39; || this.oxp[avail].Hide){
			this.oxpc.activeSlider++;
			if(this.oxpc.activeSlider&gt;3) this.oxpc.activeSlider = 0;
			avail = &quot;SInt&quot;+this.oxpc.activeSlider;
			countOff |= Math.pow(2,loop);
			loop++;
			if(this.logging) log(this.name,&quot;Slider loop:&quot;+avail+&quot; &quot;+typeof(this.oxp[avail]));
			if(loop&gt;5) break;
		}
	}
	if(countOff===this.oxp.SOptions) chc += &#39;B&#39;;
	this.showScreen(null,chc,3);
	if(this.oxp.Support===1) text = &quot;Current: &quot;+this.oxp.Name+&quot;\fv: &quot;+this.oxp.version+&quot;\f\f#&quot;+this.oxp.ID;
	else {
		text = &quot;Current: &quot;+this.oxp.Name+&quot;\fv: &quot;+this.oxp.version;
		player.ship.awardEquipment(&quot;EQ_OXPCONFIG_W0&quot;);
	}
	text = text.substr(0,70); mission.addMessageText(text);
	mission.addMessageTextKey(&#39;OXPCONFIG_DIVIDE&#39;);
	if(countOff===this.oxp.SOptions) mission.addMessageText(&quot;\nNothing to configure yet.&quot;);
	else {
		var current,show,value = 0,valueD,percent = 0,def = 0,max = 0,pow = 0;
		for(var sc=0;sc&lt;4;sc++){
			text = &quot;&quot;;
			pow = Math.pow(2,sc);
			if(sc===this.oxpc.activeSlider) text += &quot;-&gt;\f&quot;;
			else text += &quot;\f\f&quot;;
			avail = &quot;SInt&quot;+sc;
			if(typeof(this.oxp[avail])===&#39;object&#39; &amp;&amp; (this.oxp.SOptions&amp;pow) &amp;&amp; !(this.oxp.SOverride&amp;pow)){
				current = this.oxp[avail];
				if(!current.Hide){
					value = worldScripts[this.oxp.Name][current.Name]&amp;0xFF;
					valueD = this.helper.baseChange(value,16);
					if(valueD.length&lt;2) valueD = &quot;0x0&quot;+valueD;
					else valueD = &quot;0x&quot;+valueD;
					def = current.Def
					def = this.helper.baseChange(def,16);
					if(def.length&lt;2) def = &quot;0x0&quot;+def;
					else def = &quot;0x&quot;+def;
					percent = Math.ceil((value/Math.max(current.Max,1))*100);
					for(var s=0;s&lt;Math.ceil(percent*0.4);s++){text += &quot;|&quot;;}
					text = this.helper.strToWidth(text,10,&quot;.&quot;);
					text = this.helper.strToWidth(text,11);
					max = current.Max;
					if(max&lt;16) max = &quot;0x0&quot;+this.helper.baseChange(max,16);
					else max = &quot;0x&quot;+this.helper.baseChange(max,16);
					text += &quot;(&quot;+valueD+&quot;-&quot;+this.helper.strLZZ(percent)+&quot;% - D:&quot;+def+&quot;-M:&quot;+max+&quot;)&quot;;
					text = this.helper.strToWidth(text,22);
					show = current.Desc;
					text += &quot; &quot;+show;
				} else text = &quot;-&quot;;
			} else text = &quot;-&quot;;
			text = this.helper.strToWidth(text,31);
			mission.addMessageText(text);
		}
		mission.addMessageText(&quot;--------------------------------------------------\nInfo:&quot;);
		if(this.oxp.Info &amp;&amp; typeof(this.oxp.Info.InfoS)===&#39;string&#39;) mission.addMessageText(this.oxp.Info.InfoS.substr(0,240));
		else mission.addMessageText(&quot;Not available.&quot;);
	}
	return;
};
this.showEntityPage = function(which,ini)
{
	var t = this.oxpc.page*4+(which&amp;3),text;
	if(t!==this.oxpc.activeOXP || typeof(this.oxp)===&#39;undefined&#39;) this.oxp = this.getOXPInfo(t);
	if(this.oxp.EOptions&lt;1 || this.oxp.EOverride===1){this.showNot(&quot;is not compatible.&quot;); return;}
	var chc = &#39;OXPCONFIG_CHANGEENTITY&#39;;
	if(this.oxp.BOptions&lt;1 &amp;&amp; this.oxp.SOptions&lt;1) chc += &#39;A&#39;;
	else if(this.oxp.BOptions&gt;0 &amp;&amp; this.oxp.SOptions&lt;1) chc += &#39;B&#39;;
	else chc += &#39;C&#39;;
	if(this.oxp.EInt0.Hide) chc += &#39;B&#39;;
	this.showScreen(null,chc,3);
	if(this.oxp.Support===1) text = &quot;Current: &quot;+this.oxp.Name+&quot;\fv: &quot;+this.oxp.version+&quot;\f\f#&quot;+this.oxp.ID;
	else {
		text = &quot;Current: &quot;+this.oxp.Name+&quot;\fv: &quot;+this.oxp.version;
		player.ship.awardEquipment(&quot;EQ_OXPCONFIG_W0&quot;);
	}
	text = text.substr(0,70); mission.addMessageText(text);
	mission.addMessageTextKey(&#39;OXPCONFIG_DIVIDE&#39;);
	if(this.oxp.EInt0.Hide) mission.addMessageText(&quot;\nNothing to configure yet.&quot;);
	else {
		if(typeof(ini)!==&#39;undefined&#39;) this.oxpc.activeEntity = ini;
		var current,loop,def = 0,max = 0,pow = 0,value = 0,row = 0,endOut = &quot;&quot;,sign = &quot;&quot;;
		current = this.oxp.EInt0;
		loop = current.Desc.length;
		for(var s=0;s&lt;loop;s++){
			if(this.oxpc.activeEntity===s) sign = &quot;-&gt;\f&quot;;
			else sign = &quot;\f\f&quot;;
			var pow = Math.pow(2,s);
			if((this.oxp[current.Name]&amp;pow)) value = 1;
			else value = 0;
			text = value+&quot; &quot;+current.Desc[s];
			text = this.helper.strToWidth(text,8);
			if((row&amp;2)){
				row = 0;
				if(s===loop-1) endOut += sign+text;
				else endOut += sign+text+&quot;\n&quot;;
				text = &quot;&quot;;
			} else {
				endOut += sign+text;
				row++;
			}
		}
		var displayDec = this.oxp[current.Name];
		var displayHex = this.helper.baseChange(displayDec,16);
		var def = current.Def;
		var max = current.Max;
		def = &quot;0x&quot;+this.helper.baseChange(def,16);
		max = &quot;0x&quot;+this.helper.baseChange(max,16);
		mission.addMessageText(endOut);
		mission.addMessageText(&quot;---------- Status: (#&quot;+displayDec+&quot; $0x&quot;+displayHex+&quot; - Def:&quot;+def+&quot; Max:&quot;+max+&quot;) ----------&quot;);
		mission.addMessageText(&quot;Info:&quot;);
		if(this.oxp.Info &amp;&amp; typeof(this.oxp.Info.InfoE)===&#39;string&#39;) mission.addMessageText(this.oxp.Info.InfoE.substr(0,240));
		else mission.addMessageText(&quot;Not available.&quot;);
	}
	return;
};
this.getOXPInfo = function(n)
{
	if(n&gt;this.oxps-1){grab = new Object({Name:&quot; &quot;,Display:&quot; &quot;,Support:0,version:&quot; &quot;}); return(grab);}
	this.oxpc.activeOXP = n;
	var supper = this.supported[n];
	if(!this.available[n] || typeof(supper.Support)===&#39;undefined&#39; || typeof(supper.ID)===&#39;undefined&#39;){
		grab = new Object({Name:supper.Name,Display:supper.Name,Support:0,version:&quot; &quot;}); return(grab);
	}
	var grab = this.infoSearch.contains(supper.Name);
	if(!worldScripts[grab.Name]){
		grab.Support = 0; grab.version = &quot; &quot;;
		if(this.logging){for(var prop in grab){log(this.name,&quot;0 - prop:&quot;+prop+&quot; : &quot;+grab[prop]);}}
		return(grab);
	} else {
		if(this.logging) log(this.name,&quot;OXP:&quot;+grab.Name+&quot; ID:&quot;+grab.ID+&quot; Support:&quot;+grab.Support+&quot; Avail:&quot;+this.available[n]);
		if(typeof(worldScripts[grab.Name].version)!==&#39;string&#39;) grab.version = &quot;0.0&quot;;
		else grab.version = worldScripts[grab.Name].version;
		if(typeof(worldScripts[grab.Name].deactivated)!==&#39;undefined&#39; &amp;&amp; worldScripts[grab.Name].deactivated){grab.Support = -1; return(grab);}
		if(worldScripts[grab.Name].version &amp;&amp; !this.helper.strCompareVersion(worldScripts[grab.Name].version,grab.MinVersion)){
			grab.Support = -2; return(grab);}
		if(typeof(worldScripts[grab.Name].author)!==&#39;string&#39;) grab.Author = &quot;missing data&quot;;
		else grab.Author = worldScripts[grab.Name].author.substr(0,70);
		if(typeof(worldScripts[grab.Name].copyright)!==&#39;string&#39;) grab.Copyright = &quot;missing data&quot;;
		else grab.Copyright = worldScripts[grab.Name].copyright.substr(0,70);
		if(typeof(worldScripts[grab.Name].description)!==&#39;string&#39;) grab.Description = &quot;missing data&quot;;
		else grab.Description = worldScripts[grab.Name].description.substr(0,70);
		if(grab.Support!==1 &amp;&amp; grab.Support!==-5){
			if(this.logging) for(var prop in grab) log(this.name,&quot;1 - prop:&quot;+prop+&quot; : &quot;+grab[prop]);
			return(grab);
		} else {
			if(grab.Support!==-5) grab.Support = 1;
			var temp = &quot;&quot;;
			// Check booleans
			grab.BOverride = 0;
			for(var b=0;b&lt;4;b++){
				temp = grab[&quot;Bool&quot;+b].Name;
				if(typeof(worldScripts[grab.Name][temp])!==&#39;boolean&#39;){
					grab.BOverride |= Math.pow(2,b);
					grab[temp] = -1;
				} else grab[temp] = worldScripts[grab.Name][temp];
			}
			if(grab.BOptions!==-1 &amp;&amp; (grab.BOverride&amp;grab.BOptions)) grab.Error |= 1;
			// Check sliders
			grab.SOverride = 0;
			for(var b=0;b&lt;4;b++){
				temp = grab[&quot;SInt&quot;+b].Name;
				if(typeof(worldScripts[grab.Name][temp])!==&#39;number&#39;){
					grab.SOverride |= Math.pow(2,b);
					grab[temp] = -1;
				} else grab[temp] = worldScripts[grab.Name][temp];
			}
			if(grab.SOptions!==-1 &amp;&amp; (grab.SOverride&amp;grab.SOptions)) grab.Error |= 2;
			// Check entities
			grab.EOverride = 0;
			for(var b=0;b&lt;1;b++){
				temp = grab[&quot;EInt&quot;+b].Name;
				if(typeof(worldScripts[grab.Name][temp])!==&#39;number&#39;){
					grab.EOverride |= Math.pow(2,b);
					grab[temp] = -1;
				} else grab[temp] = worldScripts[grab.Name][temp];
			}
			if(grab.EOptions!==-1 &amp;&amp; (grab.EOverride&amp;grab.EOptions)) grab.Error |= 4;
			// Check array of descriptions
			if(typeof(grab.EInt0.Desc)===&#39;object&#39;){
				var a = grab.EInt0.Desc;
				var l = grab.EInt0.Desc.length;
				for(var i=0;i&lt;l;i++) a[i] = a[i].replace(/[\t\r\f\n\v]/g,&quot;&quot;);
				grab.EInt0.Desc = a;
			}
			if(this.logging) for(var prop in grab) log(this.name,&quot;2 - prop:&quot;+prop+&quot; : &quot;+grab[prop]);
			if(grab.Error){
				log(this.name,&quot;Type mismatch detected in &quot;+grab.Name+&quot; with Error #&quot;+grab.Error);
				log(this.name,&quot;Error #: 1 = Boolean, 2 = SInt, 4 = EInt.&quot;);
			}
			return(grab);
		}
	}
	return(grab);
};
this.checkChanged = function()
{
	var flag = false, c = 0, pow = 0, prop = &quot;&quot;;
	if(this.oxp.Support===1){
		var supper = this.supported[this.oxpc.activeOXP];
		var def = this.infoSearch.contains(supper.Name);
		if(def.BOptions&gt;0){
			for(var i=0;i&lt;4;i++){
				pow = Math.pow(2,i);
				if(!(def.BOptions&amp;pow)) continue;
				prop = &quot;Bool&quot;+i;
				c = this.oxp[prop].Name;
				if(this.logging) log(this.name,&quot;BOptions:&quot;+def.BOptions+&quot; Current:&quot;+this.oxp[c]+&quot; Def:&quot;+def[prop].Def);
				if(this.oxp[c]!=def[prop].Def) flag = true;
			}
		}
		if(def.SOptions&gt;0){
			for(var i=0;i&lt;4;i++){
				pow = Math.pow(2,i);
				if(!(def.SOptions&amp;pow)) continue;
				prop = &quot;SInt&quot;+i;
				c = this.oxp[prop].Name;
				if(this.logging) log(this.name,&quot;SOptions:&quot;+def.SOptions+&quot; Current:&quot;+this.oxp[c]+&quot; Def:&quot;+def[prop].Def);
				if(this.oxp[c]!=def[prop].Def) flag = true;
			}
		}
		if(def.EOptions&gt;0){
			for(var i=0;i&lt;1;i++){
				pow = Math.pow(2,i);
				if(!(def.EOptions&amp;pow)) continue;
				prop = &quot;EInt&quot;+i;
				c = this.oxp[prop].Name;
				if(this.logging) log(this.name,&quot;EOptions:&quot;+def.EOptions+&quot; Current:&quot;+this.oxp[c]+&quot; Def:&quot;+def[prop].Def);
				if(this.oxp[c]!=def[prop].Def) flag = true;
			}
		}
		if(flag) this.changed.push(def.ID);
		else {
			this.helper.arrRemoveByValue(this.changed,def.ID);
			var id = &quot;#&quot;+this.helper.baseChange(def.ID,16)+&quot;|&quot;;
			this.ripOff(id);
			if(this.logging) log(this.name,&quot;mV:&quot;+missionVariables.OXPConfig_Change);
			if(def.ID===0) missionVariables.OXPConfig_Self = null;
		}
		this.changed = this.helper.arrUnique(this.changed);
		if(this.logging) log(this.name,this.name+&quot; New changed array:&quot;+this.changed);
	}
	return;
};
this.loadSettings = function(mode)
{
	if(missionVariables.OXPConfig_Change.length!==this.myVersion.length){
		var settings = missionVariables.OXPConfig_Change.split(&quot;#&quot;)
		var subset = [],temp,loop = settings.length,n,what;
		goA:for(var i=1;i&lt;loop;i++){
			subset = settings[i].split(&quot;|&quot;);
			subset[0] = parseInt(&quot;0x&quot;+subset[0],null);
			if(this.loadDone.length &amp;&amp; this.loadDone.indexOf(subset[0])!==-1) continue goA;
			for(var sub=1;sub&lt;10;sub++){
				if(sub&lt;5 || subset[sub]==&quot;-1&quot;) subset[sub] = parseInt(subset[sub],null);
				else subset[sub] = parseInt(&quot;0x&quot;+subset[sub],null);
			}
			if(this.logging) log(this.name,&quot;Subset:&quot;+subset);
			n = String(subset[0]);
			what = this.idSearch.contains(n);
			this.oxp = this.infoSearch.contains(what);
			if(what===false || this.oxp===false) continue goA;
			if(mode){
				if(!this.oxp.EarlySet || this.oxp.Support!==1) continue goA;
				if(worldScripts[this.oxp.Name].deactivated) continue goA;
			}
			this.changed.push(subset[0]);
			for(var b=0;b&lt;4;b++){
				temp = this.oxp[&quot;Bool&quot;+b];
				if((mode &amp;&amp; subset[b+1]!==-1) || (!mode &amp;&amp; this.oxp[&quot;Bool&quot;+b]!==-1)){
					if(subset[b+1]) worldScripts[this.oxp.Name][temp.Name] = true;
					else worldScripts[this.oxp.Name][temp.Name] = false;
				}
			}
			for(var s=0;s&lt;4;s++){
				temp = this.oxp[&quot;SInt&quot;+s];
				if((mode &amp;&amp; subset[s+5]!==-1) || (!mode &amp;&amp; this.oxp[&quot;SInt&quot;+s]!==-1)){
					worldScripts[this.oxp.Name][temp.Name] = parseInt(subset[s+5],null);
				}
			}
			temp = this.oxp[&quot;EInt0&quot;];
			if((mode &amp;&amp; subset[9]!==-1) || (!mode &amp;&amp; this.oxp[&quot;EInt0&quot;]!==-1)) worldScripts[this.oxp.Name][temp.Name] = subset[9];
			if(mode) this.loadDone.push(this.oxp.ID);
			if(this.oxp.Notify) this.sendNotification(7);
			if(this.logging) log(this.name,this.name+&quot;: Values set for:&quot;+this.oxp.Name+&quot; with ID:&quot;+this.oxp.ID);
			continue goA;
		}
	} else return(false);
	if(this.logging) log(this.name,this.name+&quot;Loading done. loadDone:&quot;+this.loadDone+&quot; changed:&quot;+this.changed);
	delete this.oxp;
	return(true);
};
this.loadDefaults = function()
{
	var temp,loop=this.fullSupported.length,what;
	for(var o=0;o&lt;loop;o++){
		what = this.fullSupported[o].Name
		this.oxp = this.infoSearch.contains(what);
		if(this.oxp===false || typeof(this.oxp.Support)===&#39;undefined&#39;) continue;
		if(this.oxp.Support!==1) continue;
		for(var b=0;b&lt;4;b++){
			temp = this.oxp[&quot;Bool&quot;+b];
			if(this.oxp[&quot;Bool&quot;+b]!==-1) worldScripts[this.oxp.Name][temp.Name] = temp.Def;
		}
		for(var s=0;s&lt;4;s++){
			temp = this.oxp[&quot;SInt&quot;+s];
			if(this.oxp[&quot;SInt&quot;+s]!==-1) worldScripts[this.oxp.Name][temp.Name] = temp.Def;
		}
		temp = this.oxp[&quot;EInt0&quot;];
		if(this.oxp[&quot;EInt0&quot;]!==-1) worldScripts[this.oxp.Name][temp.Name] = temp.Def;
		if(this.oxp.Notify) this.sendNotification(7);
	}
	missionVariables.OXPConfig_Change = this.myVersion;
	missionVariables.OXPConfig_Self = null;
	this.changed = [];
	delete this.oxp;
	return;
};
this.storeSettings = function()
{
	if(this.changed.length){
		var comp,temp,early = [],notEarly = [],confSelf = [];
		var loop = this.changed.length,n,what;
		for(var o=0;o&lt;loop;o++){
			n = String(this.changed[o]);
			what = this.idSearch.contains(n);
			this.oxp = this.infoSearch.contains(what);
			comp = this.buildString();
			if(this.oxp.EarlySet) early.push(comp);
			else notEarly.push(comp);
			if(this.oxp.ID===0){
				for(var s=0;s&lt;4;s++){
					temp = this.oxp[&quot;Bool&quot;+s].Name;
					comp = this.oxp[temp];
					confSelf.push(comp);
				}
				missionVariables.OXPConfig_Self = confSelf.join(&#39;,&#39;);
				if(this.logging) log(this.name,&quot;mV.OXPConfig_Self:&quot;+missionVariables.OXPConfig_Self);
			}
			continue;
		}
		if(early.length) missionVariables.OXPConfig_Change += early.join(&quot;&quot;);
		if(notEarly.length) missionVariables.OXPConfig_Change += notEarly.join(&quot;&quot;);
		if(this.logging) log(this.name,&quot;mV.OXPConfig_Change:&quot;+missionVariables.OXPConfig_Change);
	} else return(false);
	delete this.oxp;
	return(true);
};
this.buildString = function()
{
	var str,id = 0,std = &quot;&quot;,sli = &quot;&quot;,ent,temp;
	id = &quot;#&quot;+this.helper.baseChange(this.oxp.ID,16)+&quot;|&quot;;
	this.ripOff(id);
	for(var i=0;i&lt;4;i++){
		temp = this.oxp[&quot;Bool&quot;+i].Name;
		if(typeof(worldScripts[this.oxp.Name][temp])===&#39;undefined&#39;) std += &quot;-1|&quot;;
		else if(worldScripts[this.oxp.Name][temp]) std += &quot;1|&quot;;
		else std += &quot;0|&quot;;
	}
	for(var i=0;i&lt;4;i++){
		temp = this.oxp[&quot;SInt&quot;+i].Name;
		if(typeof(worldScripts[this.oxp.Name][temp])===&#39;undefined&#39;) sli += &quot;-1|&quot;;
		else sli += this.helper.baseChange(worldScripts[this.oxp.Name][temp],16)+&quot;|&quot;;
	}
	temp = this.oxp[&quot;EInt0&quot;].Name;
	if(typeof(worldScripts[this.oxp.Name][temp])===&#39;undefined&#39;) ent = &quot;-1&quot;;
	else ent = this.helper.baseChange(worldScripts[this.oxp.Name][temp],16)
	str = id+std+sli+ent+&quot;|&quot;;
	return(str);
};
this.ripOff = function(what)
{
	if(missionVariables.OXPConfig_Change &amp;&amp; missionVariables.OXPConfig_Change.length&gt;=what.length){
		var temp = missionVariables.OXPConfig_Change;
		var pos = temp.indexOf(what);
		if(pos!==-1){
			var posB = temp.length;
			for(var z=pos+1;z&lt;posB;z++){
				if(temp[z]===&quot;#&quot;){
					posB = z;
					break;
				}
			}
			var cut = temp.slice(pos,posB);
			temp = temp.replace(cut,&quot;&quot;);
			missionVariables.OXPConfig_Change = temp;
		}
	}
	return;
};
this.sendNotification = function(what)
{
	if(worldScripts[this.oxp.Name].oxpcNotifyOnChange) worldScripts[this.oxp.Name].oxpcNotifyOnChange(what);
	if(this.logging) log(this.name,this.name+&quot;: Notification sent to &quot;+this.oxp.Name);
	return;
};
this.Cabal_Common_Keyboard_Output = function(str)
{
	if(this.keyboardSlider){
		if(str!==&quot;&quot;){
			var incCheck = parseInt(&quot;0x&quot;+str,null),temp;
			if(!isNaN(incCheck)){
				temp = this.oxp[&quot;SInt&quot;+this.oxpc.activeSlider];
				if(incCheck&gt;temp.Max) incCheck = temp.Max;
				worldScripts[this.oxp.Name][temp.Name] = incCheck;
				this.oxp[temp.Name] = incCheck;
				this.oxpc.notify |= 2;
			}
			if(this.oxp.DynamicNotify) this.sendNotification(2);
			this.showSliderPage(this.oxpc.activeOXP,this.oxpc.activeSlider);
		}
		this.showSliderPage(this.oxpc.activeOXP,this.oxpc.activeSlider);
		delete this.keyboardSlider;
	} else if(this.keyboardEntity){
		if(str!==&quot;&quot;){
			var incCheck = parseInt(&quot;0x&quot;+str,null),current = this.oxp.EInt0.Name;
			if(!isNaN(incCheck)){
				this.oxp[current] = Math.min(incCheck,this.oxp.EInt0.Max);
				this.oxpc.notify |= 4;
			}
		}
		worldScripts[this.oxp.Name][current] = this.oxp[current];
		if(this.oxp.DynamicNotify) this.sendNotification(4);
		this.showEntityPage(this.oxpc.activeOXP,this.oxpc.activeEntity);
		delete this.keyboardEntity;
	} else if(this.keyboardBrowse){
		this.oxpc.page = 0;
		var list =[],temp,pos,flag=false;
		for(var i=1;i&lt;this.oxps;i++) list.push(this.supported[i].Display.substr(0,str.length).toUpperCase());
		while(!flag){
			pos = list.indexOf(str)+1;
			if(!pos){
				for(var b=0;b&lt;this.oxps-1;b++){
					if(str[0]===list[b].substr(0,1)){
						pos = b+1;
						flag = true;
						break;
					}
				}
				temp = str.charCodeAt(0);
				temp--;
				if(temp&gt;64) str = String.fromCharCode(temp);
				else {
					pos = 0;
					break;
				}
			} else break;
		}
		this.oxpc.page = Math.floor(pos*0.25);
		this.showOXPSelection();
		delete this.keyboardBrowse;
	}
};
this.cleanProps = function()
{
	var a = [&quot;activate&quot;,&quot;oxp&quot;,&quot;oxpc&quot;,&quot;aspect&quot;,&quot;wsList&quot;,&quot;wsIndex&quot;,&quot;wsActive&quot;];
	for(var i=0;i&lt;a.length;i++) delete this[a[i]];
	for(var i=0;i&lt;4;i++){
		missionVariables[&quot;oxpc_display&quot;+i] = null;
		missionVariables[&quot;oxpc_bool&quot;+i] = null;
	}
	return;
};
this.shipWillLaunchFromStation = function()
{
	if(this.oxp &amp;&amp; this.oxpc){
		if(this.oxp.Notify &amp;&amp; this.oxpc.notify) this.sendNotification(this.oxpc.notify);
	}
	this.cleanTimer();
	this.cleanProps();
	if(this.oxpHUD &amp;&amp; player.ship.hud===&quot;hud_oxpconfig.plist&quot;){
		player.ship.hud = this.oxpHUD;
		delete this.oxpHUD;
	}
};
// Rebuild the searchtree and apply changes for specified OXP - no real checks for validity!!
// Tip: Use LeaveData flag, apply your changes to oxpcSettings and pass it to OXPConfig.
this.changeOXPData = function(obj)
{
	if(this.logging) log(this.name,&quot;Change requested by: &quot;+obj.Info.Name);
	var data = this.infoSearch.toArray();
	var where = data.indexOf(obj.Info.Name);
	if(where===-1) return(false);
	var fflag = this.idSearch.contains(obj.Info.Name);
	if(typeof(fflag)===&#39;number&#39;){
		var iN = [&quot;InfoB&quot;,&quot;InfoS&quot;,&quot;InfoE&quot;,&quot;InfosB&quot;,&quot;InfosS&quot;,&quot;InfosE&quot;],iNI = -1;
		var cB = [&quot;Bool0&quot;,&quot;Bool1&quot;,&quot;Bool2&quot;,&quot;Bool3&quot;],cBI = -1;
		var cS = [&quot;SInt0&quot;,&quot;SInt1&quot;,&quot;SInt2&quot;,&quot;SInt3&quot;],cSI = -1;
		var cE = [&quot;EInt0&quot;],cEI = -1;
		for(var prop in obj){
			if(typeof(obj[prop])!==&#39;object&#39;) continue;
			for(var drop in obj[prop]){
				if(!isNaN(drop)) break; // Enum?
				iNI = iN.indexOf(drop);
				if(iNI!==-1){
					data[where+1][iN[iNI+3]] = obj[prop][drop];
					data[where+1][prop][drop] = obj[prop][drop];
					continue;
				}
				cBI = cB.indexOf(prop);
				if(cBI!==-1){
					data[where+1].BOptions |= Math.pow(2,cBI);
					data[where+1][prop][drop] = obj[prop][drop];
					continue;
				}
				cSI = cS.indexOf(prop);
				if(cSI!==-1){
					data[where+1].SOptions |= Math.pow(2,cSI);
					data[where+1][prop][drop] = obj[prop][drop];
					continue;
				}
				cEI = cE.indexOf(prop);
				if(cEI!==-1){
					data[where+1].EOptions |= Math.pow(2,cEI);
					data[where+1][prop][drop] = obj[prop][drop];
					continue;
				}
			}
		}
		delete this.infoSearch;
		this.infoSearch = new worldScripts.Cabal_Common_Functions.Cabal_Common_BinSearch();
		for(var i=0;i&lt;data.length;i++) this.infoSearch.add(data[i],data[i+1]);
	}
	return(true);
};
this.showSpecialColors = function(rgb)
{
	var colorWheelPos = [[-361,-192,-24,148,320],[330,220,110,0]];
	var chc = &quot;OXPCONFIG_COLORSA&quot;;
	if(rgb) chc = &quot;OXPCONFIG_COLORSB&quot;;
	this.showScreen(null,chc,4,&quot;oxpconfig_modelview&quot;);
	mission.displayModel.position=[0,0,900*this.aspect[3]];
	var c,posx,posy,txt=&quot;&quot;,act;
	for(var i=0;i&lt;20;i++){
		c=i%5;
		switch(c){
			case 0: posx = colorWheelPos[0][0]; txt += &quot;         &quot;+this.helper.strToWidth(&quot;c&quot;+i,6.2); break;
			case 1: posx = colorWheelPos[0][1]; txt += this.helper.strToWidth(&quot;c&quot;+i,6.2); break;
			case 2: posx = colorWheelPos[0][2]; txt += this.helper.strToWidth(&quot;c&quot;+i,6.2); break;
			case 3: posx = colorWheelPos[0][3]; txt += this.helper.strToWidth(&quot;c&quot;+i,6.2); break;
			case 4: posx = colorWheelPos[0][4];
				if(i&lt;19) mission.addMessageText(txt+&quot;c&quot;+i+&quot;\n\n\n&quot;);
				else mission.addMessageText(txt+&quot;c&quot;+i);
				txt = &quot;&quot;;
				break;
		}
		if(i&lt;5) posy = colorWheelPos[1][0];
		else if(i&lt;10) posy = colorWheelPos[1][1];
		else if(i&lt;15) posy = colorWheelPos[1][2];
		else if(i&lt;20) posy = colorWheelPos[1][3];
		mission.displayModel.subEntities[i+1].position=[posx,0,posy];
		var m1 = this.genericUserColors[i][0][3];
		var e1 = [this.genericUserColors[i][0][0]*m1,this.genericUserColors[i][0][1]*m1,this.genericUserColors[i][0][2]*m1,m1];
		if(this.genericUserColors[i][1]){
			var m2 = this.genericUserColors[i][1][3];
			var e2 = [this.genericUserColors[i][1][0]*m2,this.genericUserColors[i][1][1]*m2,this.genericUserColors[i][1][2]*m2,m2];
			mission.displayModel.subEntities[i+1].setMaterials({&quot;oxpconfig_modelview.png&quot;:{ambient_color:e1,diffuse_color:e1},&quot;oxpconfig_modelviewB.png&quot;:{ambient_color:e2,diffuse_color:e2}},{});
		} else mission.displayModel.subEntities[i+1].setMaterials({&quot;oxpconfig_modelview.png&quot;:{ambient_color:e1,diffuse_color:e1},&quot;oxpconfig_modelviewB.png&quot;:{ambient_color:e1,diffuse_color:e1}},{});
	}
	if(!this.colorWheel) this.colorWheel = 0;
	if(!this.colorToggle) this.colorToggle = 0;
	act = [colorWheelPos[0][this.colorWheel%5]-5,-2,colorWheelPos[1][Math.floor(this.colorWheel/5)]+5];
	mission.displayModel.subEntities[0].position=act;
	if(this.genericUserColors[this.colorWheel][1]) mission.addMessageText(&quot;\nCurrent: &quot;+this.genericUserColors[this.colorWheel][0]+&quot; : &quot;+this.genericUserColors[this.colorWheel][1]);
	else mission.addMessageText(&quot;\nCurrent: &quot;+this.genericUserColors[this.colorWheel][0]);
	return;
};
this.dumpMVs = function()
{
	log(this.name,&quot;-------------------------------&quot;);
	log(this.name,&quot;Dump missionvariables in current system:&quot;+system.ID+&quot; in galaxy:&quot;+galaxyNumber);
	var list = Object.keys(missionVariables).sort();
	for(var l=0;l&lt;list.length;l++){
		var t = list[l];
		var a = missionVariables[t],b;
		if(typeof(a)!==&quot;string&quot;) log(this.name,list[l]+&quot; : &quot;+a);
		else if(a[0]===&quot;{&quot;){
			b = JSON.parse(a);
			log(this.name,list[l]+&quot;: Object&quot;);
			for(var prop in b) log(this.name,&quot;  &quot;+prop+&quot; : &quot;+b[prop]);
		} else if(a[0]===&quot;[&quot;){
			b = JSON.parse(a);
			log(this.name,list[l]+&quot;: Array&quot;);
			for(var i=0;i&lt;b.length;i++) log(this.name,&quot;  &quot;+b[i]);
		} else {
			if(a.search(/\|/g)!==-1){
				b = a.split(&quot;|&quot;);
				log(this.name,list[l]+&quot;: Serialized&quot;);
				for(var i=0;i&lt;b.length;i++) log(this.name,&quot;  &quot;+b[i]);
			} else log(this.name,list[l]+&quot; : &quot;+a);
		}
	}
	log(this.name,&quot;-------------------------------&quot;);
	this.showScreen(&#39;OXPCONFIG_FIRST&#39;,&#39;OXPCONFIG_SPECIALS&#39;,1);
	mission.addMessageTextKey(&#39;OXPCONFIG_WELCOMEB&#39;);
	player.ship.awardEquipment(&quot;EQ_OXPCONFIG_M5&quot;);
	return;
};
this.showWSList = function()
{
	if(!this.wsList){
		this.wsList = worldScriptNames.sort();
		this.wsIndex = 0;
		this.wsActive = 0;
	}
	this.showScreen(&#39;OXPCONFIG_FIRST&#39;,&#39;OXPCONFIG_WSLIST&#39;,2);
	var min = this.wsIndex*20;
	var max = Math.min(this.wsList.length,min+20);
	var cur = this.wsActive+min;
	var temp;
	for(var i=min;i&lt;max;i+=2){
		if(cur===i) temp = this.helper.strToWidth(&quot;-&gt;&quot;+this.wsList[i],15);
		else temp = this.helper.strToWidth(this.wsList[i],15);
		if(i&lt;max-1){
			if(cur===i+1) temp += this.helper.strToWidth(&quot;-&gt;&quot;+this.wsList[i+1],14);
			else temp += this.helper.strToWidth(this.wsList[i+1],14);
		}
		mission.addMessageText(temp);
	}
	return;
};
this.dumpWSProps = function()
{
	log(this.name,&quot;-------------------------------&quot;);
	var test = this.wsList[this.wsActive+this.wsIndex*20],f=[],o=[],a=[],b=[],n=[],s=[],ss=[],ve=[],qu=[],ti=[];
	log(this.name,&quot;Dump script properties for &quot;+test+&quot; in current system:&quot;+system.ID+&quot; in galaxy:&quot;+galaxyNumber);
	for(var prop in worldScripts[test]){
		switch(typeof(worldScripts[test][prop])){
			case &quot;undefined&quot;: log(this.name,&quot;-- Undefined: &quot;+test+&quot;.&quot;+prop); break;
			case &quot;boolean&quot;: b.push(prop); break;
			case &quot;number&quot;: n.push(prop); break;
			case &quot;string&quot;: s.push(prop); break;
			default:
				if(typeof(worldScripts[test][prop])===&quot;object&quot; &amp;&amp; !worldScripts[test][prop]) log(this.name,&quot;-- Null: &quot;+test+&quot;.&quot;+prop);
				else {
					switch(worldScripts[test][prop].constructor.name){
						case &quot;Timer&quot;: ti.push(prop); break;
						case &quot;Array&quot;: a.push(prop); break;
						case &quot;Object&quot;: o.push(prop); break;
						case &quot;SoundSource&quot;: ss.push(prop); break;
						case &quot;Vector3D&quot;: ve.push(prop); break;
						case &quot;Quaternion&quot;: qu.push(prop); break;
						case &quot;Function&quot;: f.push(prop); break;
					}
				}
		}
	}
	if(b.length){
		log(this.name,&quot;Boolean:&quot;);
		for(var i=0;i&lt;b.length;i++) log(this.name,&quot;  &quot;+b[i]+&quot; : &quot;+worldScripts[test][b[i]]);
	}
	if(n.length){
		log(this.name,&quot;Number:&quot;);
		for(var i=0;i&lt;n.length;i++) log(this.name,&quot;  &quot;+n[i]+&quot; : &quot;+worldScripts[test][n[i]]);
	}
	if(s.length){
		log(this.name,&quot;String:&quot;);
		for(var i=0;i&lt;s.length;i++) log(this.name,&quot;  &quot;+s[i]+&quot; : &quot;+worldScripts[test][s[i]]);
	}
	if(a.length){
		log(this.name,&quot;Array:&quot;);
		for(var i=0;i&lt;a.length;i++){
			log(this.name,&quot;  &quot;+a[i]);
			if(typeof(worldScripts[test][a[i]])===&quot;object&quot;){
				for(var prop in worldScripts[test][a[i]]){
					log(this.name,&quot;    &quot;+a[i]+&quot;.&quot;+prop+&quot; : &quot;+worldScripts[test][a[i]][prop]);
				}
			} else log(this.name,&quot;    &quot;+a[i]+&quot; : &quot;+worldScripts[test][a[i]]);
		}
	}
	if(o.length){
		log(this.name,&quot;Object:&quot;);
		for(var i=0;i&lt;o.length;i++){
			log(this.name,&quot;  &quot;+o[i]);
			for(var prop in worldScripts[test][o[i]]){
				if(typeof(worldScripts[test][o[i]][prop])===&quot;object&quot;){
					for(var drop in worldScripts[test][o[i]][prop])
					log(this.name,&quot;    &quot;+prop+&quot;.&quot;+drop+&quot; : &quot;+worldScripts[test][o[i]][prop][drop]);
				} else log(this.name,&quot;    &quot;+prop+&quot; : &quot;+JSON.stringify(worldScripts[test][o[i]][prop]));
			}
		}
	}
	if(f.length) log(this.name,&quot;Function: &quot;+f);
	if(ss.length) log(this.name,&quot;SoundSource: &quot;+ss);
	if(ve.length) log(this.name,&quot;Vector3D: &quot;+ve);
	if(qu.length) log(this.name,&quot;Quaternion: &quot;+qu);
	if(ti.length) log(this.name,&quot;Timer:&quot; +ti);
	log(this.name,&quot;-------------------------------&quot;);
	this.showWSList();
	player.ship.awardEquipment(&quot;EQ_OXPCONFIG_M5&quot;);
	return;
};
this.dumpSounds = function()
{
	var check,list = [
		&quot;[@beep]&quot;,&quot;[@boop]&quot;,&quot;[@breakpattern]&quot;,&quot;[@click]&quot;,&quot;[@switch-off]&quot;,&quot;[@switch-on]&quot;,&quot;[@warning]&quot;,&quot;[@witchabort]&quot;,
		&quot;[aegis-planet]&quot;,&quot;[aegis-station]&quot;,&quot;[alert-condition-red]&quot;,&quot;[autopilot-cannot-dock-with-target]&quot;,&quot;[autopilot-denied]&quot;,
		&quot;[autopilot-off]&quot;,&quot;[autopilot-on]&quot;,&quot;[autopilot-out-of-range]&quot;,&quot;[buy-commodity]&quot;,&quot;[buy-ship]&quot;,&quot;[cargo-jettisoned]&quot;,
		&quot;[changed-option]&quot;,&quot;[cloaking-device-insufficent-energy]&quot;,&quot;[cloaking-device-off]&quot;,&quot;[cloaking-device-on]&quot;,
		&quot;[contract-accepted]&quot;,&quot;[contract-rejected]&quot;,&quot;[could-not-buy-commodity]&quot;,&quot;[could-not-buy-ship]&quot;,&quot;[could-not-sell-commodity]&quot;,
		&quot;[dismissed-mission-screen]&quot;,&quot;[dismissed-report-screen]&quot;,&quot;[energy-bomb-fired]&quot;,&quot;[energy-low]&quot;,&quot;[escape-pod-scooped]&quot;,
		&quot;[fuel-leak]&quot;,&quot;[galactic-hyperspace-countdown-begun]&quot;,&quot;[game-over]&quot;,&quot;[hold-full]&quot;,&quot;[hostile-warning]&quot;,
		&quot;[hyperspace-countdown-aborted]&quot;,&quot;[hyperspace-countdown-begun]&quot;,&quot;[ident-locked-on]&quot;,&quot;[ident-off]&quot;,&quot;[ident-on]&quot;,
		&quot;[incoming-missile]&quot;,&quot;[jump-mass-locked]&quot;,&quot;[menu-navigation-down]&quot;,&quot;[menu-navigation-not]&quot;,&quot;[menu-navigation-up]&quot;,
		&quot;[menu-next-page]&quot;,&quot;[menu-previous-page]&quot;,&quot;[mine-armed]&quot;,&quot;[mine-launched]&quot;,&quot;[missile-armed]&quot;,&quot;[missile-launched]&quot;,
		&quot;[missile-locked-on]&quot;,&quot;[missile-safe]&quot;,&quot;[next-missile-selected]&quot;,&quot;[no-target-in-memory]&quot;,&quot;[player-direct-hit]&quot;,
		&quot;[player-dock-with-station]&quot;,&quot;[player-exit-witchspace]&quot;,&quot;[player-fired-ecm]&quot;,&quot;[player-hit-by-ecm]&quot;,&quot;[player-hit-by-weapon]&quot;,
		&quot;[player-laser-hit]&quot;,&quot;[player-laser-miss]&quot;,&quot;[player-launch-from-station]&quot;,&quot;[player-scrape-damage]&quot;,&quot;[save-overwrite-no]&quot;,
		&quot;[save-overwrite-yes]&quot;,&quot;[scoop]&quot;,&quot;[sell-commodity]&quot;,&quot;[target-lost]&quot;,&quot;[target-switched]&quot;,&quot;[trumble-idle]&quot;,&quot;[trumble-squeal]&quot;,
		&quot;[weapon-overheat]&quot;,&quot;[witch-blocked-by-@]&quot;,&quot;[witch-no-fuel]&quot;,&quot;[witch-no-target]&quot;,&quot;[witch-too-far]&quot;,&quot;[witchdrive-failure]&quot;,
		&quot;[witchdrive-malfunction]&quot;,&quot;[wormhole-created]&quot;
	];
	var a = list.length,snames = [];
	for(var i=0;i&lt;a;i++){
		check = Sound.load(list[i]);
		if(check) snames.push(list[i]+&quot;:&quot;+check.name);
		else snames.push(list[i]+&quot;:&quot;+&quot;-&quot;);
	}
	log(this.name,&quot;-------------------------------&quot;);
	log(this.name,&quot;Dump sound declarations&quot;);
	log(this.name,snames);
	log(this.name,&quot;-------------------------------&quot;);
	this.showScreen(&#39;OXPCONFIG_FIRST&#39;,&#39;OXPCONFIG_SPECIALS&#39;,1);
	mission.addMessageTextKey(&#39;OXPCONFIG_WELCOMEB&#39;);
	player.ship.awardEquipment(&quot;EQ_OXPCONFIG_M5&quot;);
	return;
};
this.doOXPCleanUp = function(who)
{
	var inf = worldScripts.OXPConfig.infoSearch.contains(who);
	if(inf){
		var mvs = inf.cleanUp.mv,data=[];
		for(var i=0;i&lt;mvs.length;i++){
			if(missionVariables[mvs[i]]){
				data.push(mvs[i]);
				missionVariables[mvs[i]] = null;
			}
		}
		if(data.length) log(this.name,&quot;Found and cleaned:&quot;+data);
		return(true);
	}
	return(false);
};
</pre></td>
                </tr>
            </table>
        </a>
    </body>
</html>
