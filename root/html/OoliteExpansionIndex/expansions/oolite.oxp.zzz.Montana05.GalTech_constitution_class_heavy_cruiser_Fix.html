<html>
    <head>
        <title>Expansion Constitution Class Heavy Cruiser Fix</title>
        <link rel="stylesheet" href="../style.css">
    </head>
    <body>
        <table border="0" width="100%">
            <tr>
                <td>Back to <a href='../index.html'>Index</a></td>
                <td align="right"><small>Page generated: Oct 11, 2023, 3:16:49 PM</small></td>
            </tr>
        </table>

        <h1>Expansion Constitution Class Heavy Cruiser Fix</h1>

        <h2>Content</h2>
        <ul>
          <li><a href="#warnings">Warnings</a></li>
          <li><a href="#manifest">Manifest</a></li>
          <li><a href="#documentation">Documentation</a></li>
          <li><a href="#equipment">0 Equipment</a></li>
          <li><a href="#ships">3 Ships</a></li>
          <li><a href="#models">0 Models</a></li>
          <li><a href="#scripts">1 Scripts</a></li>
        </ul>

          <a name="warnings">
            <h2>Warnings</h2>
            <ol>
                <li>Unknown key &#39;requires_oxp&#39; at https://wiki.alioth.net/img_auth.php/9/9c/Oolite.oxp.zzz.Montana05.GalTech_constitution_class_heavy_cruiser_Fix_V051.OXZ!manifest.plist</li>
            </ol>
          </a>

        <a name="manifest">
        <h2>Manifest</h2>
            <table border="1">
                <tr>
                    <th></th>
                    <th>from Expansion Manager's OXP list</th>
                    <th>from Expansion Manifest</th>
                </tr>
                <tr>
                    <td>Description</td>
                    <td>Update of Constitution Class Heavy Cruiser: Fixes problems and adjusts to later Oolite versions</td>
                    <td>Update of Constitution Class Heavy Cruiser: Fixes problems and adjusts to later Oolite versions</td>
                </tr>
                <tr>
                    <td>Identifier</td>
                    <td>oolite.oxp.zzz.Montana05.GalTech_constitution_class_heavy_cruiser_Fix</td>
                    <td>oolite.oxp.zzz.Montana05.GalTech_constitution_class_heavy_cruiser_Fix</td>
                </tr>
                <tr>
                    <td>Title</td>
                    <td>Constitution Class Heavy Cruiser Fix</td>
                    <td>Constitution Class Heavy Cruiser Fix</td>
                </tr>
                <tr>
                    <td>Category</td>
                    <td>Ships</td>
                    <td>Ships</td>
                </tr>
                <tr>
                    <td>Author</td>
                    <td>Montana05</td>
                    <td>Montana05</td>
                </tr>
                <tr>
                    <td>Version</td>
                    <td>0.51</td>
                    <td>0.51</td>
                </tr>
                <tr>
                    <td>Tags</td>
                    <td></td>
                    <td></td>
                </tr>
                <tr>
                    <td>Required Oolite Version</td>
                    <td></td>
                    <td></td>
                </tr>
                <tr>
                    <td>Maximum Oolite Version</td>
                    <td></td>
                    <td></td>
                </tr>
                <tr>
                    <td>Required Expansions</td>
                    <td>
                    </td>
                    <td>
                    </td>
                </tr>
                <tr>
                    <td>Optional Expansions</td>
                    <td>
                    </td>
                    <td>
                    </td>
                </tr>
                <tr>
                    <td>Conflict Expansions</td>
                    <td>
                    </td>
                    <td>
                    </td>
                </tr>
                <tr>
                    <td>Information URL</td>
                    <td><a target="_blank" href="http://aegidian.org/bb/viewtopic.php?f=2&amp;p=271897#p271897">http://aegidian.org/bb/viewtopic.php?f=2&amp;p=271897#p271897</a></td>
                    <td><a target="_blank" href="">n/a</a></td>
                </tr>
                <tr>
                    <td>Download URL</td>
                    <td><a target="_blank" href="https://wiki.alioth.net/img_auth.php/9/9c/Oolite.oxp.zzz.Montana05.GalTech_constitution_class_heavy_cruiser_Fix_V051.OXZ">https://wiki.alioth.net/img_auth.php/9/9c/Oolite.oxp.zzz.Montana05.GalTech_constitution_class_heavy_cruiser_Fix_V051.OXZ</a></td>
                    <td><a target="_blank" href="">n/a</a></td>
                </tr>
                <tr>
                    <td>License</td>
                    <td>CC BY-NC-SA 4.0</td>
                    <td>CC BY-NC-SA 4.0</td>
                </tr>
                <tr>
                    <td>File Size</td>
                    <td>n/a</td>
                </tr>
                <tr>
                    <td>Upload date</td>
                    <td>1610873391</td>
                </tr>
            </table>
                </a>

        <a name="documentation">
        <h2>Documentation</h2>
        <p>Also read <a href='http://wiki.alioth.net/index.php/Constitution%20Class%20Heavy%20Cruiser%20Fix'>http://wiki.alioth.net/index.php/Constitution%20Class%20Heavy%20Cruiser%20Fix</a></p>
        <h3>read_me.txt</h3>
        <pre>
Overview
========

Shipbuilders Constitution Class Heavy Cruiser is based on the Constitution-class Refit of Star Trek.
Further information&#39;s of the original ship could be found at https://memory-alpha.fandom.com/wiki/Constitution_class

This package is fixing some bugs, upgrades to features from later versions of Oolite and, inspired by Shipbuilders original
message &quot;Whilst you are free (and encouraged) to re-use any of the scripting, models or texturing in this OXP&quot;, includes some
new features, all of them to be removed if Shipbuilder disagrees.

Fixes
=====

changed &quot;rear_weapon_type&quot; to &quot;aft_weapon_type&quot; (shipdata.plist)

included the missing &quot;exhaust&quot;, following the Star Trek design (shipdata.plist)

included &quot;explosive_shrapnel&quot; which is used in &quot;death_actions&quot; but not part of the OXP (shipdata.plist)

relocated some flashers and used &quot;colors = &quot; instead of &quot;color = &quot;  (shipdata.plist)

added shiplibrary.pist to replace the obsolete demoships.plist

some small modifications at the model

Upgrades
========

changed fore lasers to &quot;multiply&quot; to be similar to the Star Trek concept (shipdata.plist)

changed &quot;death_actions&quot; to a ship-script:
The scrip is handling messages, death actions (including escape pods), and some new features

included a normal map and modified the diffuse map slightly to work better with the normal map (and to fix some problems)

included &quot;gloss&quot;

New Features
============

As mentioned above this are not part of the original OXP and will be removed if Shipbuilder disagrees:

added 2x port and 2x starboard weapons (same as in the Star Trek movies NPC&#39;s hardly use them)

based on Star Trek individual names for the ships (script)

based on Star Trek ranks for rescued crew members (script)

assigned GalTech escape pods to the ships (a bit redesigned to fit Starfleet)

included Class-G Shuttlecrafts to be spawned if the ship is destroyed 
The shuttles are based on the Diamond Shuttles from liners.OXP and act as the next generation of Class F Shuttlecrafts
(Star Trek). More information&#39;s could be found here: https://memory-alpha.fandom.com/wiki/Class_F_shuttlecraft

Credits
=======

original work and escape pods: Shipbuilder
Class-G Shuttlecraft: Thargoid and P.A.Groove (Diamond Shuttle, liners.OXP): 
cargo container: amah (concept) and Griff (model &amp; original diffuse map)

License
=======

This work is licensed under Creative Commons Attribution Non-Commercial Share Alike 4.0 International (CC BY-NC-SA 4.0).
To view a copy of this license visit https://creativecommons.org/licenses/by-nc-sa/4.0

Version History
===============

V 0.51:
included &quot;burning quirium fuel&quot; to the ship explosions, part of Montanas Resource Pack 01 OXP (new feature)
outsourced &quot;explosive_shrapnel&quot; to Montanas Resource Pack 01 OXP
added another version of cargo container (new feature)
changed the assignment of cargo containers (new feature)</pre>
        </a>

        <a name="equipment">          
        <h2>Equipment</h2>
            This expansion declares no equipment. This may be related to warnings.
        </a>

        <a name="ships">    
        <h2>Ships</h2>
            <table>
                <tr>
                    <th>Name</th>
                </tr>
                <tr>
                    <td><a href="../ships/GalTech_shuttlecraft_class_G.html">Class-G Shuttlecraft</a></td>
                </tr>
                <tr>
                    <td><a href="../ships/GalTech_ufp_container_computers.html">GalTech_ufp_container_computers</a></td>
                </tr>
                <tr>
                    <td><a href="../ships/GalTech_ufp_escape_pod.html">UFP escape pod</a></td>
                </tr>
            </table>
        </a>

        <a name="models">    
        <h2>Models</h2>
            This expansion declares no models. This may be related to warnings.
        </a>

        <a name="scripts">    
        <h2>Scripts</h2>
            <table>
                <tr>
                    <th>Path</th>
                </tr>
                <tr>
                    <td valign="top">Scripts/GalTech_constitution_class.js</td>
                    <td><pre>this.name			= &quot;GalTech_constitution_class&quot;;
this.author			= &quot;Montana05&quot;;
this.description	= &quot;event handler for constitution class heavy cruiser OXP&quot;;
this.version		= &quot;0.51&quot;;
this.copyright		= &quot;2020 Montana05&quot;;
this.licence   		= &quot;CC BY-NC-SA 4.0&quot;;
&quot;use strict&quot;;

this.shipSpawned = function(ship)
{
	this.$GalTech_shipType = this.ship.dataKey;
	this.$GalTech_msgCount = 0;
	var $GalTech_shipID = &quot; &quot;;
	
	// individual names based on constitution class ships from Star Trek (new feature, will be removed if Shipbuilder disagrees)
	if(this.$GalTech_shipType === &quot;constitutionclassheavycruiser&quot;)
	{
		this.$GalTech_constitution_class_name_Array = 
		[&quot;Exeter&quot;, &quot;Essex&quot;, &quot;Excalibur&quot;, &quot;Lexington&quot;, &quot;Yorktown&quot;, &quot;Endeavor&quot;, &quot;El Dorado&quot;, &quot;Excelsior&quot;, &quot;Saratoga&quot;, &quot;Constellation&quot;, &quot;Hornet&quot;, &quot;Wasp&quot;, &quot;Hood&quot;, &quot;Lafayette&quot;, &quot;Defiant&quot;, &quot;Republic&quot;, &quot;Kongo&quot;, &quot;Enterprise&quot;, &quot;Valiant&quot;, &quot;Intrepid&quot;];
		var $GalTech_constitution_class_name = $GalTech_constitution_class_name_Array[Math.floor(Math.random() * $GalTech_constitution_class_name_Array.length)];

		this.$GalTech_constitution_class_number_Array = 
		[&quot;I&quot;, &quot;II&quot;, &quot;III&quot;, &quot;IV&quot;, &quot;V&quot;, &quot;VI&quot;, &quot;VII&quot;, &quot;VIII&quot;, &quot;IX&quot;, &quot;X&quot;];
		var $GalTech_constitution_class_number = $GalTech_constitution_class_number_Array[Math.floor(Math.random() * $GalTech_constitution_class_number_Array.length)];

		$GalTech_shipID = &quot; &quot; + $GalTech_constitution_class_name + &quot; &quot; + $GalTech_constitution_class_number;

		// if the ship got no cargo some containers are added (new feature, will be removed if Shipbuilder disagrees)
		if(this.ship.cargoSpaceUsed === 0)
		{	
			// likely_cargo = 6, cargo_carried = computers
			var dice = this.$getRndInteger(4, 8);
			this.ship.adjustCargo(&quot;computers&quot;, dice);	
		};
	};	
	
	// individual number prefixes for shuttles based on the registration system from Star Trek (new feature, will be removed if Shipbuilder disagrees)
	if(this.$GalTech_shipType === &quot;GalTech_shuttlecraft_class_G&quot;)
	{
		$GalTech_shipID = &quot; NCC-&quot; + this.$getRndInteger(1000, 9999) + &quot;/G-SC&quot;;
	};
	
	if(this.$GalTech_shipType === &quot;GalTech_ufp_escape_pod&quot;)
	{ 
		var dice = this.$getRndInteger(1, 100);
		var $GalTech_fleetRank = &quot; &quot;;
		
		// adds ranks to the crew and identifies them as starfleet members (new feature, will be removed if Shipbuilder disagrees)
		if(dice &gt;= 95)
		{
			this.$GalTech_constitution_class_ranks01_Array = [&quot;Lt. Commander&quot;, &quot;Commander&quot;, &quot;Space Captain&quot;];
			$GalTech_fleetRank = $GalTech_constitution_class_ranks01_Array[Math.floor(Math.random() * $GalTech_constitution_class_ranks01_Array.length)];
		};

		if(dice &gt;= 85 &amp;&amp; dice &lt; 95)
		{
			this.$GalTech_constitution_class_ranks02_Array = [&quot;Ensign&quot;, &quot;Space Junior Lieutenant&quot;, &quot;Space Lieutenant&quot;];
			$GalTech_fleetRank = $GalTech_constitution_class_ranks02_Array[Math.floor(Math.random() * $GalTech_constitution_class_ranks02_Array.length)];
		};

		if(dice &gt;= 70 &amp;&amp; dice &lt; 85)
		{
			this.$GalTech_constitution_class_ranks03_Array = [&quot;Petty Officer 1st Class&quot;, &quot;Chief Petty Officer&quot;, &quot;Snr. Chief Petty Officer&quot;, &quot;Master Chief Petty Officer&quot;];
			$GalTech_fleetRank = $GalTech_constitution_class_ranks03_Array[Math.floor(Math.random() * $GalTech_constitution_class_ranks03_Array.length)];
		};

		if(dice &lt; 70)
		{
			this.$GalTech_constitution_class_ranks04_Array = [&quot;Crewman 3rd Class&quot;, &quot;Crewman 2nd Class&quot;, &quot;Crewman 1st Class&quot;, &quot;Petty Officer 3rd Class&quot;, &quot;Petty Officer 2nd Class&quot;];
			$GalTech_fleetRank = $GalTech_constitution_class_ranks04_Array[Math.floor(Math.random() * $GalTech_constitution_class_ranks04_Array.length)];
		};

		var $GalTech_crewName = ($GalTech_fleetRank + &quot; &quot; + expandDescription(&quot;[nom]&quot;));

		this.ship.setCrew
		(
			{
				name: $GalTech_crewName,
				short_description: &quot;a crew member of a UFP starfleet ship&quot;,
				role: &quot;police&quot;
			}
		);
				
		// individual number prefixes for pods based on the registration system from Star Trek (new feature, will be removed if Shipbuilder disagrees)
		$GalTech_shipID = &quot; NCC-&quot; + this.$getRndInteger(10000, 99999) + &quot;/EP-01&quot;;
	};

	this.ship.displayName = this.ship.name + $GalTech_shipID;
};


this.shipBeingAttacked = function(whom)
{
	// death messages adjusted to max 2 messages when being attacked 
	if(this.$GalTech_shipType === &quot;constitutionclassheavycruiser&quot; &amp;&amp; this.$GalTech_msgCount &lt; 2)
	{
		this.ship.commsMessage(expandDescription(&quot;[constitutionclassheavycruiser-plea]&quot;), player.ship);
		this.$GalTech_msgCount += 1;
	}
	else return;	
};

this.shipDied = function(whom, why)
{
	var debrisCount = 0;
	
	if(this.$GalTech_shipType === &quot;constitutionclassheavycruiser&quot;)
	{
		// added death message to synchronize with original OXP
		this.ship.commsMessage(&quot;This is the Captain, matter/antimatter reactor unrepairable damaged, all crew abandon ship&quot;), player.ship;
		
		// added explosive shrapnels to support death actions
		debrisCount = this.$getRndInteger(4, 8);
		system.addShips(&quot;GalTech_effects_explosive_shrapnel&quot;, debrisCount, this.ship.position);

		// added burning fuel (new feature, will be removed if Shipbuilder disagrees)
		debrisCount = (this.ship.fuel.toFixed(0)) * 2;	
		system.addShips(&quot;GalTech_effects_burningFuel&quot;, debrisCount, this.ship.position);

		// ejects cargopods (new feature, will be removed if Shipbuilder disagrees)
		debrisCount = this.ship.cargoSpaceUsed;
		while(debrisCount &gt; 0)
		{
			this.ship.ejectSpecificItem(&quot;GalTech_ufp_container_computers&quot;);
			debrisCount = debrisCount - 1;
		};

		// launches 2 - 4 shuttlecrafts (new feature, will be removed if Shipbuilder disagrees)
		debrisCount = this.$getRndInteger(2, 4);
		system.addShips(&quot;GalTech_shuttlecraft_class_G&quot;, debrisCount, this.ship.position);

		// launches 4 - 6 escape pods (synchronize with original OXP)
		debrisCount = this.$getRndInteger(4, 6);
		system.addShips(&quot;GalTech_ufp_escape_pod&quot;, debrisCount, this.ship.position);
	}

	if(this.$GalTech_shipType === &quot;GalTech_shuttlecraft_class_G&quot;)
	{
		// added explosive shrapnels
		debrisCount = this.$getRndInteger(2, 4);
		system.addShips(&quot;GalTech_effects_explosive_shrapnel&quot;, debrisCount, this.ship.position);
	}
	else return;
};	

this.$getRndInteger = function(min, max)
{
	return Math.floor(Math.random() * (max - min + 1) ) + min;
};
	
	
</pre></td>
                </tr>
            </table>
        </a>
    </body>
</html>
