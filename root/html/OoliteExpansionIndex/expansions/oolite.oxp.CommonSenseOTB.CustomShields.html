<html>
    <head>
        <title>Expansion CustomShields</title>
        <link rel="stylesheet" href="../style.css">
    </head>
    <body>
        <table border="0" width="100%">
            <tr>
                <td>Back to <a href='../index.html'>Index</a></td>
                <td align="right"><small>Page generated: Oct 11, 2023, 3:16:48 PM</small></td>
            </tr>
        </table>

        <h1>Expansion CustomShields</h1>

        <h2>Content</h2>
        <ul>
          
          <li><a href="#manifest">Manifest</a></li>
          <li><a href="#documentation">Documentation</a></li>
          <li><a href="#equipment">0 Equipment</a></li>
          <li><a href="#ships">310 Ships</a></li>
          <li><a href="#models">0 Models</a></li>
          <li><a href="#scripts">21 Scripts</a></li>
        </ul>


        <a name="manifest">
        <h2>Manifest</h2>
            <table border="1">
                <tr>
                    <th></th>
                    <th>from Expansion Manager's OXP list</th>
                    <th>from Expansion Manifest</th>
                </tr>
                <tr>
                    <td>Description</td>
                    <td>Shield flasher and damage effects, forward/aft shield simulation for the NPCs.</td>
                    <td>Shield flasher and damage effects, forward/aft shield simulation for the NPCs.</td>
                </tr>
                <tr>
                    <td>Identifier</td>
                    <td>oolite.oxp.CommonSenseOTB.CustomShields</td>
                    <td>oolite.oxp.CommonSenseOTB.CustomShields</td>
                </tr>
                <tr>
                    <td>Title</td>
                    <td>CustomShields</td>
                    <td>CustomShields</td>
                </tr>
                <tr>
                    <td>Category</td>
                    <td>Ambience</td>
                    <td>Ambience</td>
                </tr>
                <tr>
                    <td>Author</td>
                    <td>CommonSenseOTB</td>
                    <td>CommonSenseOTB</td>
                </tr>
                <tr>
                    <td>Version</td>
                    <td>0.83</td>
                    <td>0.83</td>
                </tr>
                <tr>
                    <td>Tags</td>
                    <td></td>
                    <td></td>
                </tr>
                <tr>
                    <td>Required Oolite Version</td>
                    <td></td>
                    <td></td>
                </tr>
                <tr>
                    <td>Maximum Oolite Version</td>
                    <td></td>
                    <td></td>
                </tr>
                <tr>
                    <td>Required Expansions</td>
                    <td>
                    </td>
                    <td>
                    </td>
                </tr>
                <tr>
                    <td>Optional Expansions</td>
                    <td>
                    </td>
                    <td>
                    </td>
                </tr>
                <tr>
                    <td>Conflict Expansions</td>
                    <td>
                    </td>
                    <td>
                    </td>
                </tr>
                <tr>
                    <td>Information URL</td>
                    <td><a target="_blank" href="http://wiki.alioth.net/index.php/CustomShields">http://wiki.alioth.net/index.php/CustomShields</a></td>
                    <td><a target="_blank" href="">n/a</a></td>
                </tr>
                <tr>
                    <td>Download URL</td>
                    <td><a target="_blank" href="https://wiki.alioth.net/img_auth.php/e/e0/CustomShields_0.83.oxz">https://wiki.alioth.net/img_auth.php/e/e0/CustomShields_0.83.oxz</a></td>
                    <td><a target="_blank" href="">n/a</a></td>
                </tr>
                <tr>
                    <td>License</td>
                    <td>CC BY-NC-SA 3 with clauses, see in the readme.txt</td>
                    <td>CC BY-NC-SA 3 with clauses, see in the readme.txt</td>
                </tr>
                <tr>
                    <td>File Size</td>
                    <td>n/a</td>
                </tr>
                <tr>
                    <td>Upload date</td>
                    <td>1610873489</td>
                </tr>
            </table>
                </a>

        <a name="documentation">
        <h2>Documentation</h2>
        <p>Also read <a href='http://wiki.alioth.net/index.php/CustomShields'>http://wiki.alioth.net/index.php/CustomShields</a></p>
        <h3>CustomShieldsv0.83 Readme.txt</h3>
        <pre>
CommonSense &#39;Outside-the-Box&#39; Design Studios Ltd. is happy to bring you the long awaited 
realization of shield flasher and damage effects to Oolite. As well, in this oxp is the 
first realistic forward/aft shield simulation for the npcs that works nearly identical 
to that found on the players own ship and which offers a new mix of balance and strategy 
to player ship combat, dogfighting in particular. The oxp is customizable for both game 
effects and mechanics. Compatibility and balance with other oxps is therefore insured. 
Have it your way and enjoy.

THIS OXP IS A PRODUCTION OF COMMONSENSE&#39;OUTSIDE-THE-BOX&#39;DESIGN STUDIOS LTD.
Author: CommonSenseOTB



USER CUSTOMIZABILITY:

You have the option of going to the startUp function of the customshields script
and setting the defaults to fit with your type of game.

this.customshieldsshieldtype = &quot;advanced&quot;;//choices: &quot;basic&quot; , &quot;advanced&quot; , &quot;off&quot;

   -referring to npcs, the current default is advanced which is a simulation of the player&#39;s 
    forward/aft shield setup. While a touch more difficult to destroy basic ships, it is 
	actually easier to destroy the tough ships when you fly smart and concentrate your fire 
	on one of the two shields. Overall a very balanced simulation that even lets npcs use 
	shield equalizers and capacitors and shield cyclers if those oxps are installed as well.
	
   -basic is just the effects and no game mechanic changes. The npc&#39;s energy level is used to 
    determine the shield effects and if a damage effect is displayed. This is provided just 
	for mission compatibility reasons if you find advanced is too difficult and it may be 
	too difficult if you are not able to target a ships weakest shield consistantly.
	
   -off is just that, off. No shield effects or damage effects for most npcs. The effects 
    from inside the player ship of having your shields or unshielded hull hit will still be 
	in effect.
	
this.customshieldsshieldtypethargoid = &quot;basic&quot;;//choices: &quot;basic&quot; , &quot;off&quot;

   -referring to thargoids, the current default is basic, which is just the effects and 
    no game mechanic changes. The thargoid&#39;s energy level is used to determine the shield 
	effects displayed. Thargoids are already quite tough and while they don&#39;t have the 
	same technology as other vessels, it seems reasonable that some kind of shielding 
	energy is involved. In addition, it would be difficult sometimes to determine which 
	side of a warship is forward or aft so for now only a basic effects mode is available. 
	The shields color changes all the way down the color scale until destruction 
	with no damage effects, for now at least.
	
   -off is just that, off. No shield effects for thargoids.
   
this.customshieldsshieldcolor = &quot;multicolor&quot;;//choices: &quot;multicolor&quot; , &quot;blue&quot; , &quot;pink&quot;(haha!)

   -referring to the color or style of shields for the player and most npcs, the current 
    default is multicolor. The color of shield and shield penetration effects goes down the 
	scale from blue to green to yellow to orange to red just before shield collapse.
	
   -blue uses bright blues for full shields to barely visible blue when the shields are near 
    collapse. Shield penetration colors are still the same as in multicolor, from blue to 
	red.
	
   -pink uses bright pink for full shields to barely visible pink when the shields are near 
    collapse. Shield penetration colors go from yellow to orange. Together it reminds me of 
	bubblegum or strawberries, bananas and oranges whipped up into some kind of shield 
	smoothee. I was just messing around but girlies or kids or those young at heart with a 
	fun attitude might like it, hehe!
	
this.customshieldsshieldcolorthargoid = &quot;green&quot;;//choices: &quot;green&quot;

   -referring to the color or style of shields for thargoids, the current default is 
    green. The color of shield is green and uses bright green for full shields to barely 
	visible green when the shields are near collapse and shield penetration effects go 
	down the scale from green to yellow to orange to red just before the shield collapses 
	and the ship is destroyed. This is currently the only option for thargoid shield color.

this.customshieldsdamageeffects = &quot;damage&quot;;//choices: &quot;damage&quot; , &quot;blownpanels&quot; , &quot;sparks&quot; , &quot;off&quot;

   -referring to the type of damage effects allowed, the current default is damage which is 
    a small chance that an unshielded hit will cause a hull breach with some type of specific 
	damage to equipment or ship and is quite serious, perhaps even more so than random damage 
	to cargo and equipment occasionally caused by an unshielded hit, and this applies 
	equally to players and npcs alike. There is currently only one type of damage caused by a 
	hull breach, a fuel leak with a visual effect of the fuel leaking that is scoopable by 
	player and npc alike. There will be more types of damage in a future version. This 
	selection also includes the cosmetic damage effects sparks and blownpanels to be in 
	effect also.
	
   -blownpanels will on the occasional unshielded hit cause a scarred alloy panel to be blown off 
    of the attacked vessel amidst a shower of sparks. These may be scooped the same as any 
	alloy panel. As they are debris and smoldering at the corner, they will disintegrate after 
	a period of time. It is cosmetic damage only. This selection also includes the cosmetic 
	damage effect sparks to be in effect also.
	
   -sparks will on the majority of unshielded hits cause an eruption of sparks from the 
    hit location on the attacked vessel. It is cosmetic damage only.

   -off is just that, off. No real or cosmetic damage will be added as a result of unshielded 
    hits to either the player or the npc.

this.customshieldsmissilemineexplosioneffects = &quot;on&quot;;//choices: &quot;on&quot; , &quot;off&quot; 

   -referring to explosion effects for missiles or mines, the current default is on which 
    causes an enhanced explosion effect to appear when a missile or mine explodes.

   -off is just that, off. Additional explosion effects will not appear when a missile or 
    mine explodes.   
	
These are currently the only available options but should allow most players to tweek both 
eye candy and game mechanics to suit individual needs and playstyles.



COMPATIBILITY:
Oolite version 1.76+
Future versions for 1.77 will take advantage of many new features.
Advanced shield mode can utilize shieldequalizer+capacitors.oxp and shieldcycler.oxp for npcs.
Not compatible with NPC shields.oxp as they will probably conflict.
Uses the existing scriptinfo npcshields = &quot;no&quot; for compatibility with oxps that use it.
SHADERS CAPABLE COMPUTER NOT NEEDED--&gt;works with ALL computers, uses flashers, NOT shaders.
No dependancies.

					   
Changelog:
version 0.81-removed zero poly marker and replaced with a regular poly model
            -script tweaks related to the regular model compatibility
			-selectability for damage effects added
			-selectability for missile and mine explosion effects added
			-attempts to squash the whom is null error, mostly resolved, still a few errors

version 0.82-one poly model now in use for the markers with a small black texture
            -a few script tweaks to try to ensure most markers aren&#39;t destroyed prematurely
			-changes on shipTakingDamage routines to eliminate whom is null and also the--&gt;
			-variable speedcollisionradiusadjustment added to prevent shield 
			 flashers from colliding with ship while under injector power
			-transferred velocity to missile/mine explosion effects and adjusted effect size
			-made standard one poly model really small to eliminate core game white explosion
             flare to restore sparks to just like it was before and added larger models for 
			 a white flare effect for blown panels and damage
            -added velocity for blown panels and the accompanying sparks as they are blown off 
			 the hull in the direction of the impact

version 0.83-blown panels redone as a separate scripted cargo entity to resolve many issues
            -shield effects now work for the victim of any cloaked attacker, including the player
			 
Author: CommonSenseOTB(thinking outside-the-box for your playing enjoyment and the improvement of oolite)
Completed: Sept. 10, 2012 first release of version 0.8
CustomShieldsv083.oxp is the current version released Sept. 24, 2012.



Shield flasher effects at last!!!

A brainstorm happened to me in the first week of august and after taking a modified NPCshields.oxp 
and attaching some code as a test I realized that it would be possible to use flashers as 
shield effects without modifying any ships and would be 100% compatible with most oxps. The 
real challenge was using vectors, as I used to suck at them, but now I have a little understanding.
The other thing I realized only 2 weeks ago was how to give a more 3-D feel to the effect by 
adding flashers to represent the tunneling of lasers through the shield. It adds a lot to the 
effect and feel of it. Currently I use vectors to plot the impact point of the attackers laser 
with the shield and this will improve in 1.77 for accuracy and speed with all the new JS commands.
The direction from the player&#39;s ship to the impact on the player&#39;s ship is used to position 
a shield flash effect so one can see the flash of impact as well as the normal tunneling effect.
When the shields are down, hits on the hull produce sparks and even blown panels occasionally.
Rarely, an unprotected hit can produce a visible ship damage effect to both player and npc. 
This part is still a work-in-progress with 5 or 6 effects still to be completed. Still, one is 
included that works reasonably well. This is a fuel leak caused by a hull breach with a visible 
venting of a dull blue gas from the ship of which some can be scooped by player or npcs. This was 
created with flashers as well. Anyway, this is something to play with until all the other 
damage effects are finished.

I know a lot of people have been wanting this for a long time and I was tired of waiting so 
here you go, enjoy, and have fun!



THANX AND RECOGNITION: Commander McLane for the NPCshields.oxp to use as an experimental template.
                       cim for providing a link to a one-poly model.
					   spara, JazHaz, Shipbuilder and Commander McLane for playtesting, comments 
					   and posting results on potential bugs and other issues, many thanks.
					   Thargoid for suggesting to use the shipAttackedByCloaked event.
					   Eric Walch for a good scripted cargo example in Cargo Wrecks and teasers.
                       All the viewtopics and people that talked about this and gave me ideas.
                       Everyone that said it could not be done, which made me go ahead and do it.
                       
					                                           -Sincerely, CommonSenseOTB.
															   

															   
															   
ABOUT THIS PRODUCT: This oxp provides eye candy as well as some game mechanic changes. It is 
                    up to you, the player, to customize your experience	by taking an 
                    appropriate oxp-safe text editor like Notepad++ and changing the 
                    defaults, only if you so desire, which are in the startUp function of the 
                    script labelled &quot;customshields&quot;. After making changes to the defaults, 
					be sure to hold down the Shift key until you see the spinning cobra 
					when you restart your game in order for the changes to take effect. 
					Your playing enjoyment is totally up to you, which is why options are 
					provided for customization. Enjoy this product and help make it better
					by posting your thoughts at the appropriate viewtopic.					

TO USE THIS OXP: Unzip and drag or move the CustomShieldsv083.oxp folder into your addons folder.



License:

This OXP is released under the Creative Commons Attribution - Non-Commercial -
Share Alike 3.0 license with the following clauses:

* Attribution to the author CommonSenseOTB
* Whilst you are free (and encouraged) to re-use any of the scripting in this OXP, the 
  usage must be distinct from that within this OXP. Unique identifiers such as 
  (but not limited to) unique shipdata.plist entity keys, mission variables, script names 
  (this.name), equipment identity strings (EQ_), description list arrays and entity roles 
  must not be re-used without prior agreement. Basically if it&#39;s unique or would identify or 
  overwrite anything in the original OXP, then you may not re-use it (for obvious compatibility
  reasons).
* rebundling of this OXP within another distribution is permitted as long as it is unchanged.
  The following derivates however are permitted and except from the above:
  * the conversion of files between XML and openStep.
  * the merging of files with other files of the same type from other OXPs.
* The license information (either as this file or merged into a larger one) must be included 
  in the OXP.
* Even though it is not compulsory, if you are re-using any sizable or recognisable piece of 
  this OXP, please let me know :)</pre>
        </a>

        <a name="equipment">          
        <h2>Equipment</h2>
            This expansion declares no equipment. 
        </a>

        <a name="ships">    
        <h2>Ships</h2>
            <table>
                <tr>
                    <th>Name</th>
                </tr>
                <tr>
                    <td><a href="../ships/customshieldsblownpanels1.html">Hull plating</a></td>
                </tr>
                <tr>
                    <td><a href="../ships/customshieldsblownpanels2.html">Hull plating</a></td>
                </tr>
                <tr>
                    <td><a href="../ships/customshieldsdamage.html">customshieldsdamage</a></td>
                </tr>
                <tr>
                    <td><a href="../ships/customshieldsfuelleakshigh.html">customshieldsfuelvapor</a></td>
                </tr>
                <tr>
                    <td><a href="../ships/customshieldsfuelleakslow.html">customshieldsfuelvapor</a></td>
                </tr>
                <tr>
                    <td><a href="../ships/customshieldsfuelleaksmedium.html">customshieldsfuelvapor</a></td>
                </tr>
                <tr>
                    <td><a href="../ships/customshieldsfuelleaksscoopoverride.html">customshieldsfuelleaksscoopoverride</a></td>
                </tr>
                <tr>
                    <td><a href="../ships/customshieldsmissilemineflareupA.html">customshieldsexplosion</a></td>
                </tr>
                <tr>
                    <td><a href="../ships/customshieldsmissilemineflareupB.html">customshieldsexplosion</a></td>
                </tr>
                <tr>
                    <td><a href="../ships/customshieldsmissilemineflareupC.html">customshieldsexplosion</a></td>
                </tr>
                <tr>
                    <td><a href="../ships/customshieldsmissilemineflareupD.html">customshieldsexplosion</a></td>
                </tr>
                <tr>
                    <td><a href="../ships/customshieldsmissilemineflareupE.html">customshieldsexplosion</a></td>
                </tr>
                <tr>
                    <td><a href="../ships/customshieldsmissilemineflareupF.html">customshieldsexplosion</a></td>
                </tr>
                <tr>
                    <td><a href="../ships/customshieldsmissilemineflareupG.html">customshieldsexplosion</a></td>
                </tr>
                <tr>
                    <td><a href="../ships/customshieldsmissilemineflareupH.html">customshieldsexplosion</a></td>
                </tr>
                <tr>
                    <td><a href="../ships/customshieldsmissilemineflareupI.html">customshieldsexplosion</a></td>
                </tr>
                <tr>
                    <td><a href="../ships/customshieldsmissilemineflareupJ.html">customshieldsexplosion</a></td>
                </tr>
                <tr>
                    <td><a href="../ships/customshieldsshieldflasherblueA1.html">customshieldsshieldflasherblueA1</a></td>
                </tr>
                <tr>
                    <td><a href="../ships/customshieldsshieldflasherblueA2.html">customshieldsshieldflasherblueA2</a></td>
                </tr>
                <tr>
                    <td><a href="../ships/customshieldsshieldflasherblueA3.html">customshieldsshieldflasherblueA3</a></td>
                </tr>
                <tr>
                    <td><a href="../ships/customshieldsshieldflasherblueA4.html">customshieldsshieldflasherblueA4</a></td>
                </tr>
                <tr>
                    <td><a href="../ships/customshieldsshieldflasherblueA5.html">customshieldsshieldflasherblueA5</a></td>
                </tr>
                <tr>
                    <td><a href="../ships/customshieldsshieldflasherblueAplayer.html">customshieldsshieldflasherblueAplayer</a></td>
                </tr>
                <tr>
                    <td><a href="../ships/customshieldsshieldflasherblueB1.html">customshieldsshieldflasherblueB1</a></td>
                </tr>
                <tr>
                    <td><a href="../ships/customshieldsshieldflasherblueB2.html">customshieldsshieldflasherblueB2</a></td>
                </tr>
                <tr>
                    <td><a href="../ships/customshieldsshieldflasherblueB3.html">customshieldsshieldflasherblueB3</a></td>
                </tr>
                <tr>
                    <td><a href="../ships/customshieldsshieldflasherblueB4.html">customshieldsshieldflasherblueB4</a></td>
                </tr>
                <tr>
                    <td><a href="../ships/customshieldsshieldflasherblueB5.html">customshieldsshieldflasherblueB5</a></td>
                </tr>
                <tr>
                    <td><a href="../ships/customshieldsshieldflasherblueBplayer.html">customshieldsshieldflasherblueBplayer</a></td>
                </tr>
                <tr>
                    <td><a href="../ships/customshieldsshieldflasherblueC1.html">customshieldsshieldflasherblueC1</a></td>
                </tr>
                <tr>
                    <td><a href="../ships/customshieldsshieldflasherblueC2.html">customshieldsshieldflasherblueC2</a></td>
                </tr>
                <tr>
                    <td><a href="../ships/customshieldsshieldflasherblueC3.html">customshieldsshieldflasherblueC3</a></td>
                </tr>
                <tr>
                    <td><a href="../ships/customshieldsshieldflasherblueC4.html">customshieldsshieldflasherblueC4</a></td>
                </tr>
                <tr>
                    <td><a href="../ships/customshieldsshieldflasherblueC5.html">customshieldsshieldflasherblueC5</a></td>
                </tr>
                <tr>
                    <td><a href="../ships/customshieldsshieldflasherblueCplayer.html">customshieldsshieldflasherblueCplayer</a></td>
                </tr>
                <tr>
                    <td><a href="../ships/customshieldsshieldflasherblueD1.html">customshieldsshieldflasherblueD1</a></td>
                </tr>
                <tr>
                    <td><a href="../ships/customshieldsshieldflasherblueD2.html">customshieldsshieldflasherblueD2</a></td>
                </tr>
                <tr>
                    <td><a href="../ships/customshieldsshieldflasherblueD3.html">customshieldsshieldflasherblueD3</a></td>
                </tr>
                <tr>
                    <td><a href="../ships/customshieldsshieldflasherblueD4.html">customshieldsshieldflasherblueD4</a></td>
                </tr>
                <tr>
                    <td><a href="../ships/customshieldsshieldflasherblueD5.html">customshieldsshieldflasherblueD5</a></td>
                </tr>
                <tr>
                    <td><a href="../ships/customshieldsshieldflasherblueDplayer.html">customshieldsshieldflasherblueDplayer</a></td>
                </tr>
                <tr>
                    <td><a href="../ships/customshieldsshieldflasherblueE1.html">customshieldsshieldflasherblueE1</a></td>
                </tr>
                <tr>
                    <td><a href="../ships/customshieldsshieldflasherblueE2.html">customshieldsshieldflasherblueE2</a></td>
                </tr>
                <tr>
                    <td><a href="../ships/customshieldsshieldflasherblueE3.html">customshieldsshieldflasherblueE3</a></td>
                </tr>
                <tr>
                    <td><a href="../ships/customshieldsshieldflasherblueE4.html">customshieldsshieldflasherblueE4</a></td>
                </tr>
                <tr>
                    <td><a href="../ships/customshieldsshieldflasherblueE5.html">customshieldsshieldflasherblueE5</a></td>
                </tr>
                <tr>
                    <td><a href="../ships/customshieldsshieldflasherblueEplayer.html">customshieldsshieldflasherblueEplayer</a></td>
                </tr>
                <tr>
                    <td><a href="../ships/customshieldsshieldflasherblueF1.html">customshieldsshieldflasherblueF1</a></td>
                </tr>
                <tr>
                    <td><a href="../ships/customshieldsshieldflasherblueF2.html">customshieldsshieldflasherblueF2</a></td>
                </tr>
                <tr>
                    <td><a href="../ships/customshieldsshieldflasherblueF3.html">customshieldsshieldflasherblueF3</a></td>
                </tr>
                <tr>
                    <td><a href="../ships/customshieldsshieldflasherblueF4.html">customshieldsshieldflasherblueF4</a></td>
                </tr>
                <tr>
                    <td><a href="../ships/customshieldsshieldflasherblueF5.html">customshieldsshieldflasherblueF5</a></td>
                </tr>
                <tr>
                    <td><a href="../ships/customshieldsshieldflasherblueFplayer.html">customshieldsshieldflasherblueFplayer</a></td>
                </tr>
                <tr>
                    <td><a href="../ships/customshieldsshieldflasherblueG1.html">customshieldsshieldflasherblueG1</a></td>
                </tr>
                <tr>
                    <td><a href="../ships/customshieldsshieldflasherblueG2.html">customshieldsshieldflasherblueG2</a></td>
                </tr>
                <tr>
                    <td><a href="../ships/customshieldsshieldflasherblueG3.html">customshieldsshieldflasherblueG3</a></td>
                </tr>
                <tr>
                    <td><a href="../ships/customshieldsshieldflasherblueG4.html">customshieldsshieldflasherblueG4</a></td>
                </tr>
                <tr>
                    <td><a href="../ships/customshieldsshieldflasherblueG5.html">customshieldsshieldflasherblueG5</a></td>
                </tr>
                <tr>
                    <td><a href="../ships/customshieldsshieldflasherblueGplayer.html">customshieldsshieldflasherblueGplayer</a></td>
                </tr>
                <tr>
                    <td><a href="../ships/customshieldsshieldflasherblueH1.html">customshieldsshieldflasherblueH1</a></td>
                </tr>
                <tr>
                    <td><a href="../ships/customshieldsshieldflasherblueH2.html">customshieldsshieldflasherblueH2</a></td>
                </tr>
                <tr>
                    <td><a href="../ships/customshieldsshieldflasherblueH3.html">customshieldsshieldflasherblueH3</a></td>
                </tr>
                <tr>
                    <td><a href="../ships/customshieldsshieldflasherblueH4.html">customshieldsshieldflasherblueH4</a></td>
                </tr>
                <tr>
                    <td><a href="../ships/customshieldsshieldflasherblueH5.html">customshieldsshieldflasherblueH5</a></td>
                </tr>
                <tr>
                    <td><a href="../ships/customshieldsshieldflasherblueHplayer.html">customshieldsshieldflasherblueHplayer</a></td>
                </tr>
                <tr>
                    <td><a href="../ships/customshieldsshieldflasherblueI1.html">customshieldsshieldflasherblueI1</a></td>
                </tr>
                <tr>
                    <td><a href="../ships/customshieldsshieldflasherblueI2.html">customshieldsshieldflasherblueI2</a></td>
                </tr>
                <tr>
                    <td><a href="../ships/customshieldsshieldflasherblueI3.html">customshieldsshieldflasherblueI3</a></td>
                </tr>
                <tr>
                    <td><a href="../ships/customshieldsshieldflasherblueI4.html">customshieldsshieldflasherblueI4</a></td>
                </tr>
                <tr>
                    <td><a href="../ships/customshieldsshieldflasherblueI5.html">customshieldsshieldflasherblueI5</a></td>
                </tr>
                <tr>
                    <td><a href="../ships/customshieldsshieldflasherblueIplayer.html">customshieldsshieldflasherblueIplayer</a></td>
                </tr>
                <tr>
                    <td><a href="../ships/customshieldsshieldflasherblueJ1.html">customshieldsshieldflasherblueJ1</a></td>
                </tr>
                <tr>
                    <td><a href="../ships/customshieldsshieldflasherblueJ2.html">customshieldsshieldflasherblueJ2</a></td>
                </tr>
                <tr>
                    <td><a href="../ships/customshieldsshieldflasherblueJ3.html">customshieldsshieldflasherblueJ3</a></td>
                </tr>
                <tr>
                    <td><a href="../ships/customshieldsshieldflasherblueJ4.html">customshieldsshieldflasherblueJ4</a></td>
                </tr>
                <tr>
                    <td><a href="../ships/customshieldsshieldflasherblueJ5.html">customshieldsshieldflasherblueJ5</a></td>
                </tr>
                <tr>
                    <td><a href="../ships/customshieldsshieldflasherblueJplayer.html">customshieldsshieldflasherblueJplayer</a></td>
                </tr>
                <tr>
                    <td><a href="../ships/customshieldsshieldflasherflareupA1.html">customshieldsshieldflasherflareupA1</a></td>
                </tr>
                <tr>
                    <td><a href="../ships/customshieldsshieldflasherflareupA2.html">customshieldsshieldflasherflareupA2</a></td>
                </tr>
                <tr>
                    <td><a href="../ships/customshieldsshieldflasherflareupA3.html">customshieldsshieldflasherflareupA3</a></td>
                </tr>
                <tr>
                    <td><a href="../ships/customshieldsshieldflasherflareupA4.html">customshieldsshieldflasherflareupA4</a></td>
                </tr>
                <tr>
                    <td><a href="../ships/customshieldsshieldflasherflareupA5.html">customshieldsshieldflasherflareupA5</a></td>
                </tr>
                <tr>
                    <td><a href="../ships/customshieldsshieldflasherflareupAplayer.html">customshieldsshieldflasherflareupAplayer</a></td>
                </tr>
                <tr>
                    <td><a href="../ships/customshieldsshieldflasherflareupB1.html">customshieldsshieldflasherflareupB1</a></td>
                </tr>
                <tr>
                    <td><a href="../ships/customshieldsshieldflasherflareupB2.html">customshieldsshieldflasherflareupB2</a></td>
                </tr>
                <tr>
                    <td><a href="../ships/customshieldsshieldflasherflareupB3.html">customshieldsshieldflasherflareupB3</a></td>
                </tr>
                <tr>
                    <td><a href="../ships/customshieldsshieldflasherflareupB4.html">customshieldsshieldflasherflareupB4</a></td>
                </tr>
                <tr>
                    <td><a href="../ships/customshieldsshieldflasherflareupB5.html">customshieldsshieldflasherflareupB5</a></td>
                </tr>
                <tr>
                    <td><a href="../ships/customshieldsshieldflasherflareupBplayer.html">customshieldsshieldflasherflareupBplayer</a></td>
                </tr>
                <tr>
                    <td><a href="../ships/customshieldsshieldflasherflareupC1.html">customshieldsshieldflasherflareupC1</a></td>
                </tr>
                <tr>
                    <td><a href="../ships/customshieldsshieldflasherflareupC2.html">customshieldsshieldflasherflareupC2</a></td>
                </tr>
                <tr>
                    <td><a href="../ships/customshieldsshieldflasherflareupC3.html">customshieldsshieldflasherflareupC3</a></td>
                </tr>
                <tr>
                    <td><a href="../ships/customshieldsshieldflasherflareupC4.html">customshieldsshieldflasherflareupC4</a></td>
                </tr>
                <tr>
                    <td><a href="../ships/customshieldsshieldflasherflareupC5.html">customshieldsshieldflasherflareupC5</a></td>
                </tr>
                <tr>
                    <td><a href="../ships/customshieldsshieldflasherflareupCplayer.html">customshieldsshieldflasherflareupCplayer</a></td>
                </tr>
                <tr>
                    <td><a href="../ships/customshieldsshieldflasherflareupD1.html">customshieldsshieldflasherflareupD1</a></td>
                </tr>
                <tr>
                    <td><a href="../ships/customshieldsshieldflasherflareupD2.html">customshieldsshieldflasherflareupD2</a></td>
                </tr>
                <tr>
                    <td><a href="../ships/customshieldsshieldflasherflareupD3.html">customshieldsshieldflasherflareupD3</a></td>
                </tr>
                <tr>
                    <td><a href="../ships/customshieldsshieldflasherflareupD4.html">customshieldsshieldflasherflareupD4</a></td>
                </tr>
                <tr>
                    <td><a href="../ships/customshieldsshieldflasherflareupD5.html">customshieldsshieldflasherflareupD5</a></td>
                </tr>
                <tr>
                    <td><a href="../ships/customshieldsshieldflasherflareupDplayer.html">customshieldsshieldflasherflareupDplayer</a></td>
                </tr>
                <tr>
                    <td><a href="../ships/customshieldsshieldflasherflareupE1.html">customshieldsshieldflasherflareupE1</a></td>
                </tr>
                <tr>
                    <td><a href="../ships/customshieldsshieldflasherflareupE2.html">customshieldsshieldflasherflareupE2</a></td>
                </tr>
                <tr>
                    <td><a href="../ships/customshieldsshieldflasherflareupE3.html">customshieldsshieldflasherflareupE3</a></td>
                </tr>
                <tr>
                    <td><a href="../ships/customshieldsshieldflasherflareupE4.html">customshieldsshieldflasherflareupE4</a></td>
                </tr>
                <tr>
                    <td><a href="../ships/customshieldsshieldflasherflareupE5.html">customshieldsshieldflasherflareupE5</a></td>
                </tr>
                <tr>
                    <td><a href="../ships/customshieldsshieldflasherflareupEplayer.html">customshieldsshieldflasherflareupEplayer</a></td>
                </tr>
                <tr>
                    <td><a href="../ships/customshieldsshieldflasherflareupF1.html">customshieldsshieldflasherflareupF1</a></td>
                </tr>
                <tr>
                    <td><a href="../ships/customshieldsshieldflasherflareupF2.html">customshieldsshieldflasherflareupF2</a></td>
                </tr>
                <tr>
                    <td><a href="../ships/customshieldsshieldflasherflareupF3.html">customshieldsshieldflasherflareupF3</a></td>
                </tr>
                <tr>
                    <td><a href="../ships/customshieldsshieldflasherflareupF4.html">customshieldsshieldflasherflareupF4</a></td>
                </tr>
                <tr>
                    <td><a href="../ships/customshieldsshieldflasherflareupF5.html">customshieldsshieldflasherflareupF5</a></td>
                </tr>
                <tr>
                    <td><a href="../ships/customshieldsshieldflasherflareupFplayer.html">customshieldsshieldflasherflareupFplayer</a></td>
                </tr>
                <tr>
                    <td><a href="../ships/customshieldsshieldflasherflareupG1.html">customshieldsshieldflasherflareupG1</a></td>
                </tr>
                <tr>
                    <td><a href="../ships/customshieldsshieldflasherflareupG2.html">customshieldsshieldflasherflareupG2</a></td>
                </tr>
                <tr>
                    <td><a href="../ships/customshieldsshieldflasherflareupG3.html">customshieldsshieldflasherflareupG3</a></td>
                </tr>
                <tr>
                    <td><a href="../ships/customshieldsshieldflasherflareupG4.html">customshieldsshieldflasherflareupG4</a></td>
                </tr>
                <tr>
                    <td><a href="../ships/customshieldsshieldflasherflareupG5.html">customshieldsshieldflasherflareupG5</a></td>
                </tr>
                <tr>
                    <td><a href="../ships/customshieldsshieldflasherflareupGplayer.html">customshieldsshieldflasherflareupGplayer</a></td>
                </tr>
                <tr>
                    <td><a href="../ships/customshieldsshieldflasherflareupH1.html">customshieldsshieldflasherflareupH1</a></td>
                </tr>
                <tr>
                    <td><a href="../ships/customshieldsshieldflasherflareupH2.html">customshieldsshieldflasherflareupH2</a></td>
                </tr>
                <tr>
                    <td><a href="../ships/customshieldsshieldflasherflareupH3.html">customshieldsshieldflasherflareupH3</a></td>
                </tr>
                <tr>
                    <td><a href="../ships/customshieldsshieldflasherflareupH4.html">customshieldsshieldflasherflareupH4</a></td>
                </tr>
                <tr>
                    <td><a href="../ships/customshieldsshieldflasherflareupH5.html">customshieldsshieldflasherflareupH5</a></td>
                </tr>
                <tr>
                    <td><a href="../ships/customshieldsshieldflasherflareupHplayer.html">customshieldsshieldflasherflareupHplayer</a></td>
                </tr>
                <tr>
                    <td><a href="../ships/customshieldsshieldflasherflareupI1.html">customshieldsshieldflasherflareupI1</a></td>
                </tr>
                <tr>
                    <td><a href="../ships/customshieldsshieldflasherflareupI2.html">customshieldsshieldflasherflareupI2</a></td>
                </tr>
                <tr>
                    <td><a href="../ships/customshieldsshieldflasherflareupI3.html">customshieldsshieldflasherflareupI3</a></td>
                </tr>
                <tr>
                    <td><a href="../ships/customshieldsshieldflasherflareupI4.html">customshieldsshieldflasherflareupI4</a></td>
                </tr>
                <tr>
                    <td><a href="../ships/customshieldsshieldflasherflareupI5.html">customshieldsshieldflasherflareupI5</a></td>
                </tr>
                <tr>
                    <td><a href="../ships/customshieldsshieldflasherflareupIplayer.html">customshieldsshieldflasherflareupIplayer</a></td>
                </tr>
                <tr>
                    <td><a href="../ships/customshieldsshieldflasherflareupJ1.html">customshieldsshieldflasherflareupJ1</a></td>
                </tr>
                <tr>
                    <td><a href="../ships/customshieldsshieldflasherflareupJ2.html">customshieldsshieldflasherflareupJ2</a></td>
                </tr>
                <tr>
                    <td><a href="../ships/customshieldsshieldflasherflareupJ3.html">customshieldsshieldflasherflareupJ3</a></td>
                </tr>
                <tr>
                    <td><a href="../ships/customshieldsshieldflasherflareupJ4.html">customshieldsshieldflasherflareupJ4</a></td>
                </tr>
                <tr>
                    <td><a href="../ships/customshieldsshieldflasherflareupJ5.html">customshieldsshieldflasherflareupJ5</a></td>
                </tr>
                <tr>
                    <td><a href="../ships/customshieldsshieldflasherflareupJplayer.html">customshieldsshieldflasherflareupJplayer</a></td>
                </tr>
                <tr>
                    <td><a href="../ships/customshieldsshieldflashermulticolorA1.html">customshieldsshieldflashermulticolorA1</a></td>
                </tr>
                <tr>
                    <td><a href="../ships/customshieldsshieldflashermulticolorA2.html">customshieldsshieldflashermulticolorA2</a></td>
                </tr>
                <tr>
                    <td><a href="../ships/customshieldsshieldflashermulticolorA3.html">customshieldsshieldflashermulticolorA3</a></td>
                </tr>
                <tr>
                    <td><a href="../ships/customshieldsshieldflashermulticolorA4.html">customshieldsshieldflashermulticolorA4</a></td>
                </tr>
                <tr>
                    <td><a href="../ships/customshieldsshieldflashermulticolorA5.html">customshieldsshieldflashermulticolorA5</a></td>
                </tr>
                <tr>
                    <td><a href="../ships/customshieldsshieldflashermulticolorAplayer.html">customshieldsshieldflashermulticolorAplayer</a></td>
                </tr>
                <tr>
                    <td><a href="../ships/customshieldsshieldflashermulticolorB1.html">customshieldsshieldflashermulticolorB1</a></td>
                </tr>
                <tr>
                    <td><a href="../ships/customshieldsshieldflashermulticolorB2.html">customshieldsshieldflashermulticolorB2</a></td>
                </tr>
                <tr>
                    <td><a href="../ships/customshieldsshieldflashermulticolorB3.html">customshieldsshieldflashermulticolorB3</a></td>
                </tr>
                <tr>
                    <td><a href="../ships/customshieldsshieldflashermulticolorB4.html">customshieldsshieldflashermulticolorB4</a></td>
                </tr>
                <tr>
                    <td><a href="../ships/customshieldsshieldflashermulticolorB5.html">customshieldsshieldflashermulticolorB5</a></td>
                </tr>
                <tr>
                    <td><a href="../ships/customshieldsshieldflashermulticolorBplayer.html">customshieldsshieldflashermulticolorBplayer</a></td>
                </tr>
                <tr>
                    <td><a href="../ships/customshieldsshieldflashermulticolorC1.html">customshieldsshieldflashermulticolorC1</a></td>
                </tr>
                <tr>
                    <td><a href="../ships/customshieldsshieldflashermulticolorC2.html">customshieldsshieldflashermulticolorC2</a></td>
                </tr>
                <tr>
                    <td><a href="../ships/customshieldsshieldflashermulticolorC3.html">customshieldsshieldflashermulticolorC3</a></td>
                </tr>
                <tr>
                    <td><a href="../ships/customshieldsshieldflashermulticolorC4.html">customshieldsshieldflashermulticolorC4</a></td>
                </tr>
                <tr>
                    <td><a href="../ships/customshieldsshieldflashermulticolorC5.html">customshieldsshieldflashermulticolorC5</a></td>
                </tr>
                <tr>
                    <td><a href="../ships/customshieldsshieldflashermulticolorCplayer.html">customshieldsshieldflashermulticolorCplayer</a></td>
                </tr>
                <tr>
                    <td><a href="../ships/customshieldsshieldflashermulticolorD1.html">customshieldsshieldflashermulticolorD1</a></td>
                </tr>
                <tr>
                    <td><a href="../ships/customshieldsshieldflashermulticolorD2.html">customshieldsshieldflashermulticolorD2</a></td>
                </tr>
                <tr>
                    <td><a href="../ships/customshieldsshieldflashermulticolorD3.html">customshieldsshieldflashermulticolorD3</a></td>
                </tr>
                <tr>
                    <td><a href="../ships/customshieldsshieldflashermulticolorD4.html">customshieldsshieldflashermulticolorD4</a></td>
                </tr>
                <tr>
                    <td><a href="../ships/customshieldsshieldflashermulticolorD5.html">customshieldsshieldflashermulticolorD5</a></td>
                </tr>
                <tr>
                    <td><a href="../ships/customshieldsshieldflashermulticolorDplayer.html">customshieldsshieldflashermulticolorDplayer</a></td>
                </tr>
                <tr>
                    <td><a href="../ships/customshieldsshieldflashermulticolorE1.html">customshieldsshieldflashermulticolorE1</a></td>
                </tr>
                <tr>
                    <td><a href="../ships/customshieldsshieldflashermulticolorE2.html">customshieldsshieldflashermulticolorE2</a></td>
                </tr>
                <tr>
                    <td><a href="../ships/customshieldsshieldflashermulticolorE3.html">customshieldsshieldflashermulticolorE3</a></td>
                </tr>
                <tr>
                    <td><a href="../ships/customshieldsshieldflashermulticolorE4.html">customshieldsshieldflashermulticolorE4</a></td>
                </tr>
                <tr>
                    <td><a href="../ships/customshieldsshieldflashermulticolorE5.html">customshieldsshieldflashermulticolorE5</a></td>
                </tr>
                <tr>
                    <td><a href="../ships/customshieldsshieldflashermulticolorEplayer.html">customshieldsshieldflashermulticolorEplayer</a></td>
                </tr>
                <tr>
                    <td><a href="../ships/customshieldsshieldflashermulticolorF1.html">customshieldsshieldflashermulticolorF1</a></td>
                </tr>
                <tr>
                    <td><a href="../ships/customshieldsshieldflashermulticolorF2.html">customshieldsshieldflashermulticolorF2</a></td>
                </tr>
                <tr>
                    <td><a href="../ships/customshieldsshieldflashermulticolorF3.html">customshieldsshieldflashermulticolorF3</a></td>
                </tr>
                <tr>
                    <td><a href="../ships/customshieldsshieldflashermulticolorF4.html">customshieldsshieldflashermulticolorF4</a></td>
                </tr>
                <tr>
                    <td><a href="../ships/customshieldsshieldflashermulticolorF5.html">customshieldsshieldflashermulticolorF5</a></td>
                </tr>
                <tr>
                    <td><a href="../ships/customshieldsshieldflashermulticolorFplayer.html">customshieldsshieldflashermulticolorFplayer</a></td>
                </tr>
                <tr>
                    <td><a href="../ships/customshieldsshieldflashermulticolorG1.html">customshieldsshieldflashermulticolorG1</a></td>
                </tr>
                <tr>
                    <td><a href="../ships/customshieldsshieldflashermulticolorG2.html">customshieldsshieldflashermulticolorG2</a></td>
                </tr>
                <tr>
                    <td><a href="../ships/customshieldsshieldflashermulticolorG3.html">customshieldsshieldflashermulticolorG3</a></td>
                </tr>
                <tr>
                    <td><a href="../ships/customshieldsshieldflashermulticolorG4.html">customshieldsshieldflashermulticolorG4</a></td>
                </tr>
                <tr>
                    <td><a href="../ships/customshieldsshieldflashermulticolorG5.html">customshieldsshieldflashermulticolorG5</a></td>
                </tr>
                <tr>
                    <td><a href="../ships/customshieldsshieldflashermulticolorGplayer.html">customshieldsshieldflashermulticolorGplayer</a></td>
                </tr>
                <tr>
                    <td><a href="../ships/customshieldsshieldflashermulticolorH1.html">customshieldsshieldflashermulticolorH1</a></td>
                </tr>
                <tr>
                    <td><a href="../ships/customshieldsshieldflashermulticolorH2.html">customshieldsshieldflashermulticolorH2</a></td>
                </tr>
                <tr>
                    <td><a href="../ships/customshieldsshieldflashermulticolorH3.html">customshieldsshieldflashermulticolorH3</a></td>
                </tr>
                <tr>
                    <td><a href="../ships/customshieldsshieldflashermulticolorH4.html">customshieldsshieldflashermulticolorH4</a></td>
                </tr>
                <tr>
                    <td><a href="../ships/customshieldsshieldflashermulticolorH5.html">customshieldsshieldflashermulticolorH5</a></td>
                </tr>
                <tr>
                    <td><a href="../ships/customshieldsshieldflashermulticolorHplayer.html">customshieldsshieldflashermulticolorHplayer</a></td>
                </tr>
                <tr>
                    <td><a href="../ships/customshieldsshieldflashermulticolorI1.html">customshieldsshieldflashermulticolorI1</a></td>
                </tr>
                <tr>
                    <td><a href="../ships/customshieldsshieldflashermulticolorI2.html">customshieldsshieldflashermulticolorI2</a></td>
                </tr>
                <tr>
                    <td><a href="../ships/customshieldsshieldflashermulticolorI3.html">customshieldsshieldflashermulticolorI3</a></td>
                </tr>
                <tr>
                    <td><a href="../ships/customshieldsshieldflashermulticolorI4.html">customshieldsshieldflashermulticolorI4</a></td>
                </tr>
                <tr>
                    <td><a href="../ships/customshieldsshieldflashermulticolorI5.html">customshieldsshieldflashermulticolorI5</a></td>
                </tr>
                <tr>
                    <td><a href="../ships/customshieldsshieldflashermulticolorIplayer.html">customshieldsshieldflashermulticolorIplayer</a></td>
                </tr>
                <tr>
                    <td><a href="../ships/customshieldsshieldflashermulticolorJ1.html">customshieldsshieldflashermulticolorJ1</a></td>
                </tr>
                <tr>
                    <td><a href="../ships/customshieldsshieldflashermulticolorJ2.html">customshieldsshieldflashermulticolorJ2</a></td>
                </tr>
                <tr>
                    <td><a href="../ships/customshieldsshieldflashermulticolorJ3.html">customshieldsshieldflashermulticolorJ3</a></td>
                </tr>
                <tr>
                    <td><a href="../ships/customshieldsshieldflashermulticolorJ4.html">customshieldsshieldflashermulticolorJ4</a></td>
                </tr>
                <tr>
                    <td><a href="../ships/customshieldsshieldflashermulticolorJ5.html">customshieldsshieldflashermulticolorJ5</a></td>
                </tr>
                <tr>
                    <td><a href="../ships/customshieldsshieldflashermulticolorJplayer.html">customshieldsshieldflashermulticolorJplayer</a></td>
                </tr>
                <tr>
                    <td><a href="../ships/customshieldsshieldflasherpinkA1.html">customshieldsshieldflasherpinkA1</a></td>
                </tr>
                <tr>
                    <td><a href="../ships/customshieldsshieldflasherpinkA2.html">customshieldsshieldflasherpinkA2</a></td>
                </tr>
                <tr>
                    <td><a href="../ships/customshieldsshieldflasherpinkA3.html">customshieldsshieldflasherpinkA3</a></td>
                </tr>
                <tr>
                    <td><a href="../ships/customshieldsshieldflasherpinkA4.html">customshieldsshieldflasherpinkA4</a></td>
                </tr>
                <tr>
                    <td><a href="../ships/customshieldsshieldflasherpinkA5.html">customshieldsshieldflasherpinkA5</a></td>
                </tr>
                <tr>
                    <td><a href="../ships/customshieldsshieldflasherpinkAplayer.html">customshieldsshieldflasherpinkAplayer</a></td>
                </tr>
                <tr>
                    <td><a href="../ships/customshieldsshieldflasherpinkB1.html">customshieldsshieldflasherpinkB1</a></td>
                </tr>
                <tr>
                    <td><a href="../ships/customshieldsshieldflasherpinkB2.html">customshieldsshieldflasherpinkB2</a></td>
                </tr>
                <tr>
                    <td><a href="../ships/customshieldsshieldflasherpinkB3.html">customshieldsshieldflasherpinkB3</a></td>
                </tr>
                <tr>
                    <td><a href="../ships/customshieldsshieldflasherpinkB4.html">customshieldsshieldflasherpinkB4</a></td>
                </tr>
                <tr>
                    <td><a href="../ships/customshieldsshieldflasherpinkB5.html">customshieldsshieldflasherpinkB5</a></td>
                </tr>
                <tr>
                    <td><a href="../ships/customshieldsshieldflasherpinkBplayer.html">customshieldsshieldflasherpinkBplayer</a></td>
                </tr>
                <tr>
                    <td><a href="../ships/customshieldsshieldflasherpinkC1.html">customshieldsshieldflasherpinkC1</a></td>
                </tr>
                <tr>
                    <td><a href="../ships/customshieldsshieldflasherpinkC2.html">customshieldsshieldflasherpinkC2</a></td>
                </tr>
                <tr>
                    <td><a href="../ships/customshieldsshieldflasherpinkC3.html">customshieldsshieldflasherpinkC3</a></td>
                </tr>
                <tr>
                    <td><a href="../ships/customshieldsshieldflasherpinkC4.html">customshieldsshieldflasherpinkC4</a></td>
                </tr>
                <tr>
                    <td><a href="../ships/customshieldsshieldflasherpinkC5.html">customshieldsshieldflasherpinkC5</a></td>
                </tr>
                <tr>
                    <td><a href="../ships/customshieldsshieldflasherpinkCplayer.html">customshieldsshieldflasherpinkCplayer</a></td>
                </tr>
                <tr>
                    <td><a href="../ships/customshieldsshieldflasherpinkD1.html">customshieldsshieldflasherpinkD1</a></td>
                </tr>
                <tr>
                    <td><a href="../ships/customshieldsshieldflasherpinkD2.html">customshieldsshieldflasherpinkD2</a></td>
                </tr>
                <tr>
                    <td><a href="../ships/customshieldsshieldflasherpinkD3.html">customshieldsshieldflasherpinkD3</a></td>
                </tr>
                <tr>
                    <td><a href="../ships/customshieldsshieldflasherpinkD4.html">customshieldsshieldflasherpinkD4</a></td>
                </tr>
                <tr>
                    <td><a href="../ships/customshieldsshieldflasherpinkD5.html">customshieldsshieldflasherpinkD5</a></td>
                </tr>
                <tr>
                    <td><a href="../ships/customshieldsshieldflasherpinkDplayer.html">customshieldsshieldflasherpinkDplayer</a></td>
                </tr>
                <tr>
                    <td><a href="../ships/customshieldsshieldflasherpinkE1.html">customshieldsshieldflasherpinkE1</a></td>
                </tr>
                <tr>
                    <td><a href="../ships/customshieldsshieldflasherpinkE2.html">customshieldsshieldflasherpinkE2</a></td>
                </tr>
                <tr>
                    <td><a href="../ships/customshieldsshieldflasherpinkE3.html">customshieldsshieldflasherpinkE3</a></td>
                </tr>
                <tr>
                    <td><a href="../ships/customshieldsshieldflasherpinkE4.html">customshieldsshieldflasherpinkE4</a></td>
                </tr>
                <tr>
                    <td><a href="../ships/customshieldsshieldflasherpinkE5.html">customshieldsshieldflasherpinkE5</a></td>
                </tr>
                <tr>
                    <td><a href="../ships/customshieldsshieldflasherpinkEplayer.html">customshieldsshieldflasherpinkEplayer</a></td>
                </tr>
                <tr>
                    <td><a href="../ships/customshieldsshieldflasherpinkF1.html">customshieldsshieldflasherpinkF1</a></td>
                </tr>
                <tr>
                    <td><a href="../ships/customshieldsshieldflasherpinkF2.html">customshieldsshieldflasherpinkF2</a></td>
                </tr>
                <tr>
                    <td><a href="../ships/customshieldsshieldflasherpinkF3.html">customshieldsshieldflasherpinkF3</a></td>
                </tr>
                <tr>
                    <td><a href="../ships/customshieldsshieldflasherpinkF4.html">customshieldsshieldflasherpinkF4</a></td>
                </tr>
                <tr>
                    <td><a href="../ships/customshieldsshieldflasherpinkF5.html">customshieldsshieldflasherpinkF5</a></td>
                </tr>
                <tr>
                    <td><a href="../ships/customshieldsshieldflasherpinkFplayer.html">customshieldsshieldflasherpinkFplayer</a></td>
                </tr>
                <tr>
                    <td><a href="../ships/customshieldsshieldflasherpinkG1.html">customshieldsshieldflasherpinkG1</a></td>
                </tr>
                <tr>
                    <td><a href="../ships/customshieldsshieldflasherpinkG2.html">customshieldsshieldflasherpinkG2</a></td>
                </tr>
                <tr>
                    <td><a href="../ships/customshieldsshieldflasherpinkG3.html">customshieldsshieldflasherpinkG3</a></td>
                </tr>
                <tr>
                    <td><a href="../ships/customshieldsshieldflasherpinkG4.html">customshieldsshieldflasherpinkG4</a></td>
                </tr>
                <tr>
                    <td><a href="../ships/customshieldsshieldflasherpinkG5.html">customshieldsshieldflasherpinkG5</a></td>
                </tr>
                <tr>
                    <td><a href="../ships/customshieldsshieldflasherpinkGplayer.html">customshieldsshieldflasherpinkGplayer</a></td>
                </tr>
                <tr>
                    <td><a href="../ships/customshieldsshieldflasherpinkH1.html">customshieldsshieldflasherpinkH1</a></td>
                </tr>
                <tr>
                    <td><a href="../ships/customshieldsshieldflasherpinkH2.html">customshieldsshieldflasherpinkH2</a></td>
                </tr>
                <tr>
                    <td><a href="../ships/customshieldsshieldflasherpinkH3.html">customshieldsshieldflasherpinkH3</a></td>
                </tr>
                <tr>
                    <td><a href="../ships/customshieldsshieldflasherpinkH4.html">customshieldsshieldflasherpinkH4</a></td>
                </tr>
                <tr>
                    <td><a href="../ships/customshieldsshieldflasherpinkH5.html">customshieldsshieldflasherpinkH5</a></td>
                </tr>
                <tr>
                    <td><a href="../ships/customshieldsshieldflasherpinkHplayer.html">customshieldsshieldflasherpinkHplayer</a></td>
                </tr>
                <tr>
                    <td><a href="../ships/customshieldsshieldflasherpinkI1.html">customshieldsshieldflasherpinkI1</a></td>
                </tr>
                <tr>
                    <td><a href="../ships/customshieldsshieldflasherpinkI2.html">customshieldsshieldflasherpinkI2</a></td>
                </tr>
                <tr>
                    <td><a href="../ships/customshieldsshieldflasherpinkI3.html">customshieldsshieldflasherpinkI3</a></td>
                </tr>
                <tr>
                    <td><a href="../ships/customshieldsshieldflasherpinkI4.html">customshieldsshieldflasherpinkI4</a></td>
                </tr>
                <tr>
                    <td><a href="../ships/customshieldsshieldflasherpinkI5.html">customshieldsshieldflasherpinkI5</a></td>
                </tr>
                <tr>
                    <td><a href="../ships/customshieldsshieldflasherpinkIplayer.html">customshieldsshieldflasherpinkIplayer</a></td>
                </tr>
                <tr>
                    <td><a href="../ships/customshieldsshieldflasherpinkJ1.html">customshieldsshieldflasherpinkJ1</a></td>
                </tr>
                <tr>
                    <td><a href="../ships/customshieldsshieldflasherpinkJ2.html">customshieldsshieldflasherpinkJ2</a></td>
                </tr>
                <tr>
                    <td><a href="../ships/customshieldsshieldflasherpinkJ3.html">customshieldsshieldflasherpinkJ3</a></td>
                </tr>
                <tr>
                    <td><a href="../ships/customshieldsshieldflasherpinkJ4.html">customshieldsshieldflasherpinkJ4</a></td>
                </tr>
                <tr>
                    <td><a href="../ships/customshieldsshieldflasherpinkJ5.html">customshieldsshieldflasherpinkJ5</a></td>
                </tr>
                <tr>
                    <td><a href="../ships/customshieldsshieldflasherpinkJplayer.html">customshieldsshieldflasherpinkJplayer</a></td>
                </tr>
                <tr>
                    <td><a href="../ships/customshieldsshieldflasherthargoidgreenA1.html">customshieldsshieldflasherthargoidgreenA1</a></td>
                </tr>
                <tr>
                    <td><a href="../ships/customshieldsshieldflasherthargoidgreenA2.html">customshieldsshieldflasherthargoidgreenA2</a></td>
                </tr>
                <tr>
                    <td><a href="../ships/customshieldsshieldflasherthargoidgreenA3.html">customshieldsshieldflasherthargoidgreenA3</a></td>
                </tr>
                <tr>
                    <td><a href="../ships/customshieldsshieldflasherthargoidgreenA4.html">customshieldsshieldflasherthargoidgreenA4</a></td>
                </tr>
                <tr>
                    <td><a href="../ships/customshieldsshieldflasherthargoidgreenA5.html">customshieldsshieldflasherthargoidgreenA5</a></td>
                </tr>
                <tr>
                    <td><a href="../ships/customshieldsshieldflasherthargoidgreenB1.html">customshieldsshieldflasherthargoidgreenB1</a></td>
                </tr>
                <tr>
                    <td><a href="../ships/customshieldsshieldflasherthargoidgreenB2.html">customshieldsshieldflasherthargoidgreenB2</a></td>
                </tr>
                <tr>
                    <td><a href="../ships/customshieldsshieldflasherthargoidgreenB3.html">customshieldsshieldflasherthargoidgreenB3</a></td>
                </tr>
                <tr>
                    <td><a href="../ships/customshieldsshieldflasherthargoidgreenB4.html">customshieldsshieldflasherthargoidgreenB4</a></td>
                </tr>
                <tr>
                    <td><a href="../ships/customshieldsshieldflasherthargoidgreenB5.html">customshieldsshieldflasherthargoidgreenB5</a></td>
                </tr>
                <tr>
                    <td><a href="../ships/customshieldsshieldflasherthargoidgreenC1.html">customshieldsshieldflasherthargoidgreenC1</a></td>
                </tr>
                <tr>
                    <td><a href="../ships/customshieldsshieldflasherthargoidgreenC2.html">customshieldsshieldflasherthargoidgreenC2</a></td>
                </tr>
                <tr>
                    <td><a href="../ships/customshieldsshieldflasherthargoidgreenC3.html">customshieldsshieldflasherthargoidgreenC3</a></td>
                </tr>
                <tr>
                    <td><a href="../ships/customshieldsshieldflasherthargoidgreenC4.html">customshieldsshieldflasherthargoidgreenC4</a></td>
                </tr>
                <tr>
                    <td><a href="../ships/customshieldsshieldflasherthargoidgreenC5.html">customshieldsshieldflasherthargoidgreenC5</a></td>
                </tr>
                <tr>
                    <td><a href="../ships/customshieldsshieldflasherthargoidgreenD1.html">customshieldsshieldflasherthargoidgreenD1</a></td>
                </tr>
                <tr>
                    <td><a href="../ships/customshieldsshieldflasherthargoidgreenD2.html">customshieldsshieldflasherthargoidgreenD2</a></td>
                </tr>
                <tr>
                    <td><a href="../ships/customshieldsshieldflasherthargoidgreenD3.html">customshieldsshieldflasherthargoidgreenD3</a></td>
                </tr>
                <tr>
                    <td><a href="../ships/customshieldsshieldflasherthargoidgreenD4.html">customshieldsshieldflasherthargoidgreenD4</a></td>
                </tr>
                <tr>
                    <td><a href="../ships/customshieldsshieldflasherthargoidgreenD5.html">customshieldsshieldflasherthargoidgreenD5</a></td>
                </tr>
                <tr>
                    <td><a href="../ships/customshieldsshieldflasherthargoidgreenE1.html">customshieldsshieldflasherthargoidgreenE1</a></td>
                </tr>
                <tr>
                    <td><a href="../ships/customshieldsshieldflasherthargoidgreenE2.html">customshieldsshieldflasherthargoidgreenE2</a></td>
                </tr>
                <tr>
                    <td><a href="../ships/customshieldsshieldflasherthargoidgreenE3.html">customshieldsshieldflasherthargoidgreenE3</a></td>
                </tr>
                <tr>
                    <td><a href="../ships/customshieldsshieldflasherthargoidgreenE4.html">customshieldsshieldflasherthargoidgreenE4</a></td>
                </tr>
                <tr>
                    <td><a href="../ships/customshieldsshieldflasherthargoidgreenE5.html">customshieldsshieldflasherthargoidgreenE5</a></td>
                </tr>
                <tr>
                    <td><a href="../ships/customshieldsshieldflasherthargoidgreenF1.html">customshieldsshieldflasherthargoidgreenF1</a></td>
                </tr>
                <tr>
                    <td><a href="../ships/customshieldsshieldflasherthargoidgreenF2.html">customshieldsshieldflasherthargoidgreenF2</a></td>
                </tr>
                <tr>
                    <td><a href="../ships/customshieldsshieldflasherthargoidgreenF3.html">customshieldsshieldflasherthargoidgreenF3</a></td>
                </tr>
                <tr>
                    <td><a href="../ships/customshieldsshieldflasherthargoidgreenF4.html">customshieldsshieldflasherthargoidgreenF4</a></td>
                </tr>
                <tr>
                    <td><a href="../ships/customshieldsshieldflasherthargoidgreenF5.html">customshieldsshieldflasherthargoidgreenF5</a></td>
                </tr>
                <tr>
                    <td><a href="../ships/customshieldsshieldflasherthargoidgreenG1.html">customshieldsshieldflasherthargoidgreenG1</a></td>
                </tr>
                <tr>
                    <td><a href="../ships/customshieldsshieldflasherthargoidgreenG2.html">customshieldsshieldflasherthargoidgreenG2</a></td>
                </tr>
                <tr>
                    <td><a href="../ships/customshieldsshieldflasherthargoidgreenG3.html">customshieldsshieldflasherthargoidgreenG3</a></td>
                </tr>
                <tr>
                    <td><a href="../ships/customshieldsshieldflasherthargoidgreenG4.html">customshieldsshieldflasherthargoidgreenG4</a></td>
                </tr>
                <tr>
                    <td><a href="../ships/customshieldsshieldflasherthargoidgreenG5.html">customshieldsshieldflasherthargoidgreenG5</a></td>
                </tr>
                <tr>
                    <td><a href="../ships/customshieldsshieldflasherthargoidgreenH1.html">customshieldsshieldflasherthargoidgreenH1</a></td>
                </tr>
                <tr>
                    <td><a href="../ships/customshieldsshieldflasherthargoidgreenH2.html">customshieldsshieldflasherthargoidgreenH2</a></td>
                </tr>
                <tr>
                    <td><a href="../ships/customshieldsshieldflasherthargoidgreenH3.html">customshieldsshieldflasherthargoidgreenH3</a></td>
                </tr>
                <tr>
                    <td><a href="../ships/customshieldsshieldflasherthargoidgreenH4.html">customshieldsshieldflasherthargoidgreenH4</a></td>
                </tr>
                <tr>
                    <td><a href="../ships/customshieldsshieldflasherthargoidgreenH5.html">customshieldsshieldflasherthargoidgreenH5</a></td>
                </tr>
                <tr>
                    <td><a href="../ships/customshieldsshieldflasherthargoidgreenI1.html">customshieldsshieldflasherthargoidgreenI1</a></td>
                </tr>
                <tr>
                    <td><a href="../ships/customshieldsshieldflasherthargoidgreenI2.html">customshieldsshieldflasherthargoidgreenI2</a></td>
                </tr>
                <tr>
                    <td><a href="../ships/customshieldsshieldflasherthargoidgreenI3.html">customshieldsshieldflasherthargoidgreenI3</a></td>
                </tr>
                <tr>
                    <td><a href="../ships/customshieldsshieldflasherthargoidgreenI4.html">customshieldsshieldflasherthargoidgreenI4</a></td>
                </tr>
                <tr>
                    <td><a href="../ships/customshieldsshieldflasherthargoidgreenI5.html">customshieldsshieldflasherthargoidgreenI5</a></td>
                </tr>
                <tr>
                    <td><a href="../ships/customshieldsshieldflasherthargoidgreenJ1.html">customshieldsshieldflasherthargoidgreenJ1</a></td>
                </tr>
                <tr>
                    <td><a href="../ships/customshieldsshieldflasherthargoidgreenJ2.html">customshieldsshieldflasherthargoidgreenJ2</a></td>
                </tr>
                <tr>
                    <td><a href="../ships/customshieldsshieldflasherthargoidgreenJ3.html">customshieldsshieldflasherthargoidgreenJ3</a></td>
                </tr>
                <tr>
                    <td><a href="../ships/customshieldsshieldflasherthargoidgreenJ4.html">customshieldsshieldflasherthargoidgreenJ4</a></td>
                </tr>
                <tr>
                    <td><a href="../ships/customshieldsshieldflasherthargoidgreenJ5.html">customshieldsshieldflasherthargoidgreenJ5</a></td>
                </tr>
                <tr>
                    <td><a href="../ships/customshieldssparks.html">customshieldssparks</a></td>
                </tr>
                <tr>
                    <td><a href="../ships/customshieldssparksblownpanels.html">customshieldssparksblownpanels</a></td>
                </tr>
                <tr>
                    <td><a href="../ships/customshieldssparksfuelleaks.html">customshieldssparksfuelleaks</a></td>
                </tr>
            </table>
        </a>

        <a name="models">    
        <h2>Models</h2>
            This expansion declares no models. 
        </a>

        <a name="scripts">    
        <h2>Scripts</h2>
            <table>
                <tr>
                    <th>Path</th>
                </tr>
                <tr>
                    <td valign="top">Scripts/customshields.js</td>
                    <td><pre>
&quot;use strict&quot;;

this.name           = &quot;customshields&quot;;
this.author         = &quot;CommonSenseOTB&quot;;
this.copyright		= &quot;Copyright Sept. 24, 2012 by CommonSenseOTB, licensed under Creative Commons: attribution, non-commercial, sharealike with clauses - see readme.txt&quot;;
this.description    = &quot;Simulated shields, shields effects, damage effects&quot;;
this.version        = &quot;0.83&quot;;

this.startUp = this.playerBoughtNewShip = function()
   {
   //
   //------------------YOU MAY CHANGE THESE DEFAULTS--------------
   //
   //----------------------------------------------------------------------------------------------------
   this.customshieldsshieldtype = &quot;advanced&quot;;     //choices: &quot;advanced&quot; , &quot;basic&quot; , &quot;off&quot;
   //----------------------------------------------------------------------------------------------------
   this.customshieldsshieldtypethargoid = &quot;basic&quot;;     //choices: &quot;basic&quot; , &quot;off&quot;
   //----------------------------------------------------------------------------------------------------
   this.customshieldsshieldcolor = &quot;multicolor&quot;;     //choices: &quot;multicolor&quot; , &quot;blue&quot; , &quot;pink&quot;
   //----------------------------------------------------------------------------------------------------
   this.customshieldsshieldcolorthargoid = &quot;green&quot;;     //choices: &quot;green&quot;
   //----------------------------------------------------------------------------------------------------
   this.customshieldsdamageeffects = &quot;sparks&quot;;     //choices: &quot;damage&quot; , &quot;blownpanels&quot; , &quot;sparks&quot; , &quot;off&quot;
   //----------------------------------------------------------------------------------------------------
   this.customshieldsmissilemineexplosioneffects = &quot;on&quot;;     //choices: &quot;on&quot; , &quot;off&quot; 
   //----------------------------------------------------------------------------------------------------
   //
   //-------------DO NOT CHANGE ANYTHING BELOW THIS POINT---------
   //
   //
   //
   //----------------------------------------------------------------
   //Note:draw distance maximum for effects is currently set at 51200
   //----------------------------------------------------------------
   //
   if(player.ship.mass &gt; 0 &amp;&amp; player.ship.mass &lt;= 5000)
      {
      this.customshieldsplayershieldflashersize = 1;
      }
   if(player.ship.mass &gt; 5000 &amp;&amp; player.ship.mass &lt;= 50000)
      {
      this.customshieldsplayershieldflashersize = 2;
      }    
   if(player.ship.mass &gt; 50000 &amp;&amp; player.ship.mass &lt;= 150000)
      {
      this.customshieldsplayershieldflashersize = 3;
      }  
   if(player.ship.mass &gt; 150000 &amp;&amp; player.ship.mass &lt;= 500000)
      {
      this.customshieldsplayershieldflashersize = 4;
      }
   if(player.ship.mass &gt; 500000)
      {
      this.customshieldsplayershieldflashersize = 5;
      }
   this.customshieldshitrange = 50;//default if string different from below
   if(this.customshieldsdamageeffects === &quot;damage&quot;)
      {
	  this.customshieldshitrange = 50;
	  }
   if(this.customshieldsdamageeffects === &quot;blownpanels&quot;)
      {
	  this.customshieldshitrange = 45;
	  }
   if(this.customshieldsdamageeffects === &quot;sparks&quot;)
      {
	  this.customshieldshitrange = 35;
	  }
   if(this.customshieldsdamageeffects === &quot;off&quot;)
      {
	  this.customshieldshitrange = 1;
	  }
   this.customshieldsspeedcollisionradiusadjustment = (player.ship.maxSpeed / 350) * 8;     
   }
this.shipTakingDamage = function(amount, whom, type)
   {
   if(whom &amp;&amp; whom.position !== undefined)//added for whom is null issue
      {
      if(player.ship.speed &gt; player.ship.maxSpeed)//added for shield collision issue caused by using solid models which are needed to work correctly in 1.76, applies to advanced and basic npcs also
         {
         var speedcollisionradiusadjustment = (player.ship.speed / player.ship.maxSpeed) * this.customshieldsspeedcollisionradiusadjustment;
	     }
      else
         {
	     var speedcollisionradiusadjustment = 0;
	     }
      var impactradiusfactor = ((3 * (1500 / (player.ship.position.distanceTo(whom.position)))) + 16);	 
      var impactlocation = whom.position.add(whom.vectorForward.multiply((whom.position.distanceTo(player.ship.position)) - (player.ship.collisionRadius + 1 + speedcollisionradiusadjustment)));//determine possible forward weapon hit location
      if((player.ship.position.distanceTo(impactlocation)) &gt; (player.ship.collisionRadius + speedcollisionradiusadjustment + impactradiusfactor))//too far from ship because of delay to hit from plasma weapon or off vector angle because of thargoid laser
         {
         impactlocation = whom.position.add(whom.vectorForward.multiply(-((whom.position.distanceTo(player.ship.position)) - (player.ship.collisionRadius + 1 + speedcollisionradiusadjustment))));//determine possible aft weapon hit location
         if((player.ship.position.distanceTo(impactlocation)) &gt; (player.ship.collisionRadius + speedcollisionradiusadjustment + impactradiusfactor))//too far from ship because of delay to hit from plasma weapon or off vector angle because of thargoid laser
            {
            impactlocation = whom.position.add(whom.vectorRight.multiply((whom.position.distanceTo(player.ship.position)) - (player.ship.collisionRadius + 1 + speedcollisionradiusadjustment)));//determine possible starboard weapon hit location
            if((player.ship.position.distanceTo(impactlocation)) &gt; (player.ship.collisionRadius + speedcollisionradiusadjustment + impactradiusfactor))//too far from ship because of delay to hit from plasma weapon or off vector angle because of thargoid laser
               {
               impactlocation = whom.position.add(whom.vectorRight.multiply(-((whom.position.distanceTo(player.ship.position)) - (player.ship.collisionRadius + 1 + speedcollisionradiusadjustment))));//determine possible port weapon hit location
               if((player.ship.position.distanceTo(impactlocation)) &gt; (player.ship.collisionRadius + speedcollisionradiusadjustment + impactradiusfactor))//too far from ship because of delay to hit from plasma weapon or off vector angle because of thargoid laser
                  {			   
                  var impactinterpolation = ((player.ship.collisionRadius + 1 + speedcollisionradiusadjustment) / (player.ship.position.distanceTo(whom.position)));  
                  impactlocation = Vector3D.interpolate(player.ship.position, whom.position, impactinterpolation);//interpolate weapon hit directly between ship and attacker as a fallback position
                  }
               }
            }
         }
      var attackerdirection = whom.position.subtract(impactlocation).direction();
      var playerdirection = player.ship.position.subtract(impactlocation).direction();
      var impactdirection = impactlocation.subtract(player.ship.position).direction();
      var impactrelativeposition = impactlocation.subtract(player.ship.position);
      var impactangle = player.ship.heading.angleTo(impactdirection);
      this.customshieldsattackerdirection = attackerdirection;
      this.customshieldsplayerdirection = playerdirection;
      this.customshieldsimpactdirection = impactdirection;
      this.customshieldsimpactrelativeposition = impactrelativeposition;
      this.customshieldsimpactlocation = impactlocation;
      if(impactangle &lt;= 1.57)
         {
	     if(player.ship.forwardShield === 0)
            {
		    this.$customshieldsplayerunshieldedhits();	
		    }
         else
	        {
		    this.customshieldsplayershieldflashers = (player.ship.forwardShield / player.ship.maxForwardShield);
            if((type === &quot;scrape damage&quot;) &amp;&amp; (whom.mass &gt; 10000 || whom.velocity.magnitude &gt; 500))//might take closing speed into account in the future
		       {
			   if(player.ship.viewDirection === &quot;VIEW_CUSTOM&quot;)
			      {
			      this.$customshieldsplayershieldflareupcustom();
			      }
               else
			      {
			      this.$customshieldsplayershieldflareup();
			      }
			   }
            else
		       {
			   if(player.ship.viewDirection === &quot;VIEW_CUSTOM&quot;)
			      {
		          this.$customshieldsplayershieldflasherscustom();
			      }
               else
			      {
			      this.$customshieldsplayershieldflashers();
			      }
			   }
		    }
         }
      else
         {
	     if(player.ship.aftShield === 0)
            {
            this.$customshieldsplayerunshieldedhits();		 
		    }
         else
	        {
		    this.customshieldsplayershieldflashers = (player.ship.aftShield / player.ship.maxAftShield);
		    if((type === &quot;scrape damage&quot;) &amp;&amp; (whom.mass &gt; 10000 || whom.velocity.magnitude &gt; 500))
		       {
			   if(player.ship.viewDirection === &quot;VIEW_CUSTOM&quot;)
			      {
			      this.$customshieldsplayershieldflareupcustom();
			      }
               else
			      {
			      this.$customshieldsplayershieldflareup();
			      }
			   }
            else
		       {
			   if(player.ship.viewDirection === &quot;VIEW_CUSTOM&quot;)
			      {
		          this.$customshieldsplayershieldflasherscustom();
			      }
               else
			      {
			      this.$customshieldsplayershieldflashers();
			      }
			   }
		    }
         }
      }
   }
this.$customshieldsplayerunshieldedhits = function()
   {
   var hitrange = this.customshieldshitrange;
   var hitchance = Math.ceil(Math.random() * hitrange);
   switch(hitchance)
      {   
      case 1://10% nothing
	  case 2:
	  case 3:
	  case 4:
	  case 5:
	     {
		 break;
		 }
	  case 6://60% sparks
	  case 7:
	  case 8:
	  case 9:
	  case 10:
	  case 11:
	  case 12:
	  case 13:
	  case 14:
	  case 15:
	  case 16:
	  case 17:
	  case 18:
	  case 19:
	  case 20:
	  case 21:
	  case 22:
	  case 23:
	  case 24:
	  case 25:
	  case 26:
	  case 27:
	  case 28:
	  case 29:
	  case 30:
	  case 31:
	  case 32:
	  case 33:
	  case 34:
	  case 35:
         {
         var sparks = system.addShips(&quot;customshieldssparks&quot;, 1, this.customshieldsimpactlocation, 0);
         break;
         }
      case 36://20% blown panels
      case 37:
	  case 38:
	  case 39:
	  case 40:
	  case 41:
	  case 42:
	  case 43:
	  case 44:
	  case 45:
         {
		 var il = this.customshieldsimpactlocation;
         var id = this.customshieldsimpactdirection;
		 var sparksblownpanels = player.ship.spawnOne(&quot;customshieldssparksblownpanels&quot;);
         sparksblownpanels.position = il;
		 sparksblownpanels.orientation = id.rotationTo([0, 0, 1]);
		 sparksblownpanels.velocity = player.ship.velocity.add(sparksblownpanels.vectorForward.multiply((Math.ceil(Math.random() * 150)) + 50));
         break;
         }
      case 46://currently nothing, future expansion
	  case 47:
	  case 48:
	  case 49:
	     {
		 break;
		 }
      case 50://fuel leak caused by hull rupture
         {
		 if(this.customshieldsfuelleakflag === 1.0)
            {
            break;
            }
         this.customshieldsfuelleakflag = 1.0;
		 this.customshieldsfuelleakrepairTimer = new Timer(this, this.$customshieldsfuelleakrepair, 60, -1);	
		 var il = this.customshieldsimpactlocation;
         var id = this.customshieldsimpactdirection;
		 var sparksfuelleaks = player.ship.spawnOne(&quot;customshieldssparksfuelleaks&quot;);
         sparksfuelleaks.position = il;
		 sparksfuelleaks.orientation = id.rotationTo([0, 0, 1]);
         sparksfuelleaks.target = player.ship;
         break;
         }
      }
   }
this.$customshieldsfuelleakrepair = function()
   {
   this.customshieldsfuelleakflag = 0.0;
   player.consoleMessage(&quot;Fuel leak sealed&quot;, 4);
   if(this.customshieldsfuelleakrepairTimer &amp;&amp; this.customshieldsfuelleakrepairTimer.isRunning)
      {
      this.customshieldsfuelleakrepairTimer.stop();
	  delete this.customshieldsfuelleakrepairTimer;
      }
   }
this.shipDied = function()
   {
   if(this.customshieldsfuelleakrepairTimer &amp;&amp; this.customshieldsfuelleakrepairTimer.isRunning)
      {
      this.customshieldsfuelleakrepairTimer.stop();
	  delete this.customshieldsfuelleakrepairTimer;
      }
   }   
this.$customshieldsplayershieldflareupcustom = function()
   {
   var psf = this.customshieldsplayershieldflashers;
   var psfs = this.customshieldsplayershieldflashersize;
   var il = this.customshieldsimpactlocation;
   psf = Math.floor(psf * 10);
   psf = (psf / 10);
   switch(psf)
      {   
      case 0.9:
         {
		 var playershieldflareupcustom = player.ship.spawnOne(&quot;customshieldsshieldflasherflareupA&quot; + psfs);
         playershieldflareupcustom.position = il;
         playershieldflareupcustom.target = player.ship;
         break;
         }
      case 0.8:
         {
		 var playershieldflareupcustom = player.ship.spawnOne(&quot;customshieldsshieldflasherflareupB&quot; + psfs);
         playershieldflareupcustom.position = il;
         playershieldflareupcustom.target = player.ship;
         break;
         }
      case 0.7:
         {
		 var playershieldflareupcustom = player.ship.spawnOne(&quot;customshieldsshieldflasherflareupC&quot; + psfs);
         playershieldflareupcustom.position = il;
         playershieldflareupcustom.target = player.ship;
         break;
         }
      case 0.6:
         {
		 var playershieldflareupcustom = player.ship.spawnOne(&quot;customshieldsshieldflasherflareupD&quot; + psfs);
         playershieldflareupcustom.position = il;
         playershieldflareupcustom.target = player.ship;
         break;
         }
      case 0.5:
         {
		 var playershieldflareupcustom = player.ship.spawnOne(&quot;customshieldsshieldflasherflareupE&quot; + psfs);
         playershieldflareupcustom.position = il;
         playershieldflareupcustom.target = player.ship;
         break;
         }
      case 0.4:
         {
		 var playershieldflareupcustom = player.ship.spawnOne(&quot;customshieldsshieldflasherflareupF&quot; + psfs);
         playershieldflareupcustom.position = il;
         playershieldflareupcustom.target = player.ship;
         break;
         }
      case 0.3:
         {
		 var playershieldflareupcustom = player.ship.spawnOne(&quot;customshieldsshieldflasherflareupG&quot; + psfs);
         playershieldflareupcustom.position = il;
         playershieldflareupcustom.target = player.ship;
         break;
         }
      case 0.2:
         {
		 var playershieldflareupcustom = player.ship.spawnOne(&quot;customshieldsshieldflasherflareupH&quot; + psfs);
         playershieldflareupcustom.position = il;
         playershieldflareupcustom.target = player.ship;
         break;
         }
      case 0.1:
         {
		 var playershieldflareupcustom = player.ship.spawnOne(&quot;customshieldsshieldflasherflareupI&quot; + psfs);
         playershieldflareupcustom.position = il;
         playershieldflareupcustom.target = player.ship;
         break;
         }
      case 0.0:
         {
		 var playershieldflareupcustom = player.ship.spawnOne(&quot;customshieldsshieldflasherflareupJ&quot; + psfs);
         playershieldflareupcustom.position = il;
         playershieldflareupcustom.target = player.ship;
         break;
         }
      }
   }            
this.$customshieldsplayershieldflareup = function()
   {
   var psf = this.customshieldsplayershieldflashers;
   var il = this.customshieldsimpactlocation;
   var pd = this.customshieldsplayerdirection;
   psf = Math.floor(psf * 10);
   psf = (psf / 10);
   switch(psf)
      {   
      case 0.9:
         {
		 var playershieldflareup = player.ship.spawnOne(&quot;customshieldsshieldflasherflareupAplayer&quot;);
         playershieldflareup.position = il;
		 playershieldflareup.orientation = pd.rotationTo([0, 0, 1]);
         playershieldflareup.target = player.ship;
         break;
         }
      case 0.8:
         {
		 var playershieldflareup = player.ship.spawnOne(&quot;customshieldsshieldflasherflareupBplayer&quot;);
         playershieldflareup.position = il;
		 playershieldflareup.orientation = pd.rotationTo([0, 0, 1]);
         playershieldflareup.target = player.ship;
         break;
         }
      case 0.7:
         {
		 var playershieldflareup = player.ship.spawnOne(&quot;customshieldsshieldflasherflareupCplayer&quot;);
         playershieldflareup.position = il;
		 playershieldflareup.orientation = pd.rotationTo([0, 0, 1]);
         playershieldflareup.target = player.ship;
         break;
         }
      case 0.6:
         {
		 var playershieldflareup = player.ship.spawnOne(&quot;customshieldsshieldflasherflareupDplayer&quot;);
         playershieldflareup.position = il;
		 playershieldflareup.orientation = pd.rotationTo([0, 0, 1]);
         playershieldflareup.target = player.ship;
         break;
         }
      case 0.5:
         {
		 var playershieldflareup = player.ship.spawnOne(&quot;customshieldsshieldflasherflareupEplayer&quot;);
         playershieldflareup.position = il;
		 playershieldflareup.orientation = pd.rotationTo([0, 0, 1]);
         playershieldflareup.target = player.ship;
         break;
         }
      case 0.4:
         {
		 var playershieldflareup = player.ship.spawnOne(&quot;customshieldsshieldflasherflareupFplayer&quot;);
         playershieldflareup.position = il;
		 playershieldflareup.orientation = pd.rotationTo([0, 0, 1]);
         playershieldflareup.target = player.ship;
         break;
         }
      case 0.3:
         {
		 var playershieldflareup = player.ship.spawnOne(&quot;customshieldsshieldflasherflareupGplayer&quot;);
         playershieldflareup.position = il;
		 playershieldflareup.orientation = pd.rotationTo([0, 0, 1]);
         playershieldflareup.target = player.ship;
         break;
         }
      case 0.2:
         {
		 var playershieldflareup = player.ship.spawnOne(&quot;customshieldsshieldflasherflareupHplayer&quot;);
         playershieldflareup.position = il;
		 playershieldflareup.orientation = pd.rotationTo([0, 0, 1]);
         playershieldflareup.target = player.ship;
         break;
         }
      case 0.1:
         {
		 var playershieldflareup = player.ship.spawnOne(&quot;customshieldsshieldflasherflareupIplayer&quot;);
         playershieldflareup.position = il;
		 playershieldflareup.orientation = pd.rotationTo([0, 0, 1]);
         playershieldflareup.target = player.ship;
         break;
         }
      case 0.0:
         {
		 var playershieldflareup = player.ship.spawnOne(&quot;customshieldsshieldflasherflareupJplayer&quot;);
         playershieldflareup.position = il;
		 playershieldflareup.orientation = pd.rotationTo([0, 0, 1]);
         playershieldflareup.target = player.ship;
         break;
         }
      }
   }      
this.$customshieldsplayershieldflasherscustom = function()
   {
   var customshieldsshieldcolor = this.customshieldsshieldcolor;
   var psf = this.customshieldsplayershieldflashers;
   var psfs = this.customshieldsplayershieldflashersize;
   var il = this.customshieldsimpactlocation;
   var ad = this.customshieldsattackerdirection;
   psf = Math.floor(psf * 10);
   psf = (psf / 10);
   switch(psf)
      {   
      case 0.9:
         {
         var playershieldflasherscustom = player.ship.spawnOne(&quot;customshieldsshieldflasher&quot; + customshieldsshieldcolor + &quot;A&quot; + psfs);
         playershieldflasherscustom.position = il;
		 playershieldflasherscustom.orientation = ad.rotationTo([0, 0, 1]);
         playershieldflasherscustom.target = player.ship;
         break;
         }
      case 0.8:
         {
         var playershieldflasherscustom = player.ship.spawnOne(&quot;customshieldsshieldflasher&quot; + customshieldsshieldcolor + &quot;B&quot; + psfs);
         playershieldflasherscustom.position = il;
		 playershieldflasherscustom.orientation = ad.rotationTo([0, 0, 1]);
         playershieldflasherscustom.target = player.ship;
         break;
         }
      case 0.7:
         {
         var playershieldflasherscustom = player.ship.spawnOne(&quot;customshieldsshieldflasher&quot; + customshieldsshieldcolor + &quot;C&quot; + psfs);
         playershieldflasherscustom.position = il;
		 playershieldflasherscustom.orientation = ad.rotationTo([0, 0, 1]);
         playershieldflasherscustom.target = player.ship;
         break;
         }
      case 0.6:
         {
         var playershieldflasherscustom = player.ship.spawnOne(&quot;customshieldsshieldflasher&quot; + customshieldsshieldcolor + &quot;D&quot; + psfs);
         playershieldflasherscustom.position = il;
		 playershieldflasherscustom.orientation = ad.rotationTo([0, 0, 1]);
         playershieldflasherscustom.target = player.ship;
         break;
         }
      case 0.5:
         {
         var playershieldflasherscustom = player.ship.spawnOne(&quot;customshieldsshieldflasher&quot; + customshieldsshieldcolor + &quot;E&quot; + psfs);
         playershieldflasherscustom.position = il;
		 playershieldflasherscustom.orientation = ad.rotationTo([0, 0, 1]);
         playershieldflasherscustom.target = player.ship;
         break;
         }
      case 0.4:
         {
         var playershieldflasherscustom = player.ship.spawnOne(&quot;customshieldsshieldflasher&quot; + customshieldsshieldcolor + &quot;F&quot; + psfs);
         playershieldflasherscustom.position = il;
		 playershieldflasherscustom.orientation = ad.rotationTo([0, 0, 1]);
         playershieldflasherscustom.target = player.ship;
         break;
         }
      case 0.3:
         {
         var playershieldflasherscustom = player.ship.spawnOne(&quot;customshieldsshieldflasher&quot; + customshieldsshieldcolor + &quot;G&quot; + psfs);
         playershieldflasherscustom.position = il;
		 playershieldflasherscustom.orientation = ad.rotationTo([0, 0, 1]);
         playershieldflasherscustom.target = player.ship;
         break;
         }
      case 0.2:
         {
         var playershieldflasherscustom = player.ship.spawnOne(&quot;customshieldsshieldflasher&quot; + customshieldsshieldcolor + &quot;H&quot; + psfs);
         playershieldflasherscustom.position = il;
		 playershieldflasherscustom.orientation = ad.rotationTo([0, 0, 1]);
         playershieldflasherscustom.target = player.ship;
         break;
         }
      case 0.1:
         {
         var playershieldflasherscustom = player.ship.spawnOne(&quot;customshieldsshieldflasher&quot; + customshieldsshieldcolor + &quot;I&quot; + psfs);
         playershieldflasherscustom.position = il;
		 playershieldflasherscustom.orientation = ad.rotationTo([0, 0, 1]);
         playershieldflasherscustom.target = player.ship;
         break;
         }
      case 0.0:
         {
         var playershieldflasherscustom = player.ship.spawnOne(&quot;customshieldsshieldflasher&quot; + customshieldsshieldcolor + &quot;J&quot; + psfs);
         playershieldflasherscustom.position = il;
		 playershieldflasherscustom.orientation = ad.rotationTo([0, 0, 1]);
         playershieldflasherscustom.target = player.ship;
         break;
         }
      }
   }      
this.$customshieldsplayershieldflashers = function()//v0.81correction made to use a normal entity instead of a zero poly entity, spawn flash slightly farther out rather than at the same position as the tunneling effect
   {
   var customshieldsshieldcolor = this.customshieldsshieldcolor;
   var psf = this.customshieldsplayershieldflashers;
   var psfs = this.customshieldsplayershieldflashersize;
   var il = this.customshieldsimpactlocation;
   var ad = this.customshieldsattackerdirection;
   var pd = this.customshieldsplayerdirection;
   var interpolation = ((player.ship.collisionRadius + 2) / (player.ship.collisionRadius + 1));
   var ilinterpolation = Vector3D.interpolate(player.ship.position, il, interpolation);
   this.customshieldsimpactrelativepositioninterpolation = ilinterpolation.subtract(player.ship.position);
   psf = Math.floor(psf * 10);
   psf = (psf / 10);
   switch(psf)
      {   
      case 0.9:
         {
         var playershieldflashersmain = player.ship.spawnOne(&quot;customshieldsshieldflasher&quot; + customshieldsshieldcolor + &quot;A&quot; + psfs);
         playershieldflashersmain.position = il;
		 playershieldflashersmain.orientation = ad.rotationTo([0, 0, 1]);
         playershieldflashersmain.target = player.ship;
		 var playershieldflashersflash = player.ship.spawnOne(&quot;customshieldsshieldflasher&quot; + customshieldsshieldcolor + &quot;Aplayer&quot;);
         playershieldflashersflash.position = ilinterpolation;
		 playershieldflashersflash.orientation = pd.rotationTo([0, 0, 1]);
         playershieldflashersflash.target = player.ship;
         break;
         }
      case 0.8:
         {
         var playershieldflashersmain = player.ship.spawnOne(&quot;customshieldsshieldflasher&quot; + customshieldsshieldcolor + &quot;B&quot; + psfs);
         playershieldflashersmain.position = il;
		 playershieldflashersmain.orientation = ad.rotationTo([0, 0, 1]);
         playershieldflashersmain.target = player.ship;
		 var playershieldflashersflash = player.ship.spawnOne(&quot;customshieldsshieldflasher&quot; + customshieldsshieldcolor + &quot;Bplayer&quot;);
         playershieldflashersflash.position = ilinterpolation;
		 playershieldflashersflash.orientation = pd.rotationTo([0, 0, 1]);
         playershieldflashersflash.target = player.ship;
         break;
         }
      case 0.7:
         {
         var playershieldflashersmain = player.ship.spawnOne(&quot;customshieldsshieldflasher&quot; + customshieldsshieldcolor + &quot;C&quot; + psfs);
         playershieldflashersmain.position = il;
		 playershieldflashersmain.orientation = ad.rotationTo([0, 0, 1]);
         playershieldflashersmain.target = player.ship;
		 var playershieldflashersflash = player.ship.spawnOne(&quot;customshieldsshieldflasher&quot; + customshieldsshieldcolor + &quot;Cplayer&quot;);
         playershieldflashersflash.position = ilinterpolation;
		 playershieldflashersflash.orientation = pd.rotationTo([0, 0, 1]);
         playershieldflashersflash.target = player.ship;
         break;
         }
      case 0.6:
         {
         var playershieldflashersmain = player.ship.spawnOne(&quot;customshieldsshieldflasher&quot; + customshieldsshieldcolor + &quot;D&quot; + psfs);
         playershieldflashersmain.position = il;
		 playershieldflashersmain.orientation = ad.rotationTo([0, 0, 1]);
         playershieldflashersmain.target = player.ship;
		 var playershieldflashersflash = player.ship.spawnOne(&quot;customshieldsshieldflasher&quot; + customshieldsshieldcolor + &quot;Dplayer&quot;);
         playershieldflashersflash.position = ilinterpolation;
		 playershieldflashersflash.orientation = pd.rotationTo([0, 0, 1]);
         playershieldflashersflash.target = player.ship;
         break;
         }
      case 0.5:
         {
         var playershieldflashersmain = player.ship.spawnOne(&quot;customshieldsshieldflasher&quot; + customshieldsshieldcolor + &quot;E&quot; + psfs);
         playershieldflashersmain.position = il;
		 playershieldflashersmain.orientation = ad.rotationTo([0, 0, 1]);
         playershieldflashersmain.target = player.ship;
		 var playershieldflashersflash = player.ship.spawnOne(&quot;customshieldsshieldflasher&quot; + customshieldsshieldcolor + &quot;Eplayer&quot;);
         playershieldflashersflash.position = ilinterpolation;
		 playershieldflashersflash.orientation = pd.rotationTo([0, 0, 1]);
         playershieldflashersflash.target = player.ship;
         break;
         }
      case 0.4:
         {
         var playershieldflashersmain = player.ship.spawnOne(&quot;customshieldsshieldflasher&quot; + customshieldsshieldcolor + &quot;F&quot; + psfs);
         playershieldflashersmain.position = il;
		 playershieldflashersmain.orientation = ad.rotationTo([0, 0, 1]);
         playershieldflashersmain.target = player.ship;
		 var playershieldflashersflash = player.ship.spawnOne(&quot;customshieldsshieldflasher&quot; + customshieldsshieldcolor + &quot;Fplayer&quot;);
         playershieldflashersflash.position = ilinterpolation;
		 playershieldflashersflash.orientation = pd.rotationTo([0, 0, 1]);
         playershieldflashersflash.target = player.ship;
         break;
         }
      case 0.3:
         {
         var playershieldflashersmain = player.ship.spawnOne(&quot;customshieldsshieldflasher&quot; + customshieldsshieldcolor + &quot;G&quot; + psfs);
         playershieldflashersmain.position = il;
		 playershieldflashersmain.orientation = ad.rotationTo([0, 0, 1]);
         playershieldflashersmain.target = player.ship;
		 var playershieldflashersflash = player.ship.spawnOne(&quot;customshieldsshieldflasher&quot; + customshieldsshieldcolor + &quot;Gplayer&quot;);
         playershieldflashersflash.position = ilinterpolation;
		 playershieldflashersflash.orientation = pd.rotationTo([0, 0, 1]);
         playershieldflashersflash.target = player.ship;
         break;
         }
      case 0.2:
         {
         var playershieldflashersmain = player.ship.spawnOne(&quot;customshieldsshieldflasher&quot; + customshieldsshieldcolor + &quot;H&quot; + psfs);
         playershieldflashersmain.position = il;
		 playershieldflashersmain.orientation = ad.rotationTo([0, 0, 1]);
         playershieldflashersmain.target = player.ship;
		 var playershieldflashersflash = player.ship.spawnOne(&quot;customshieldsshieldflasher&quot; + customshieldsshieldcolor + &quot;Hplayer&quot;);
         playershieldflashersflash.position = ilinterpolation;
		 playershieldflashersflash.orientation = pd.rotationTo([0, 0, 1]);
         playershieldflashersflash.target = player.ship;
         break;
         }
      case 0.1:
         {
         var playershieldflashersmain = player.ship.spawnOne(&quot;customshieldsshieldflasher&quot; + customshieldsshieldcolor + &quot;I&quot; + psfs);
         playershieldflashersmain.position = il;
		 playershieldflashersmain.orientation = ad.rotationTo([0, 0, 1]);
         playershieldflashersmain.target = player.ship;
		 var playershieldflashersflash = player.ship.spawnOne(&quot;customshieldsshieldflasher&quot; + customshieldsshieldcolor + &quot;Iplayer&quot;);
         playershieldflashersflash.position = ilinterpolation;
		 playershieldflashersflash.orientation = pd.rotationTo([0, 0, 1]);
         playershieldflashersflash.target = player.ship;
         break;
         }
      case 0.0:
         {
         var playershieldflashersmain = player.ship.spawnOne(&quot;customshieldsshieldflasher&quot; + customshieldsshieldcolor + &quot;J&quot; + psfs);
         playershieldflashersmain.position = il;
		 playershieldflashersmain.orientation = ad.rotationTo([0, 0, 1]);
         playershieldflashersmain.target = player.ship;
		 var playershieldflashersflash = player.ship.spawnOne(&quot;customshieldsshieldflasher&quot; + customshieldsshieldcolor + &quot;Jplayer&quot;);
         playershieldflashersflash.position = ilinterpolation;
		 playershieldflashersflash.orientation = pd.rotationTo([0, 0, 1]);
         playershieldflashersflash.target = player.ship;
         break;
         }
      }
   }   
this.shipSpawned = function(ship)
   {
   if((ship.isMissile || ship.isMine) &amp;&amp; (this.customshieldsmissilemineexplosioneffects === &quot;on&quot;))
      {
	  if(ship.scriptInfo.npc_shields &amp;&amp; ship.scriptInfo.npc_shields === &quot;no&quot;)
         {
		 return;
		 }
      else
	     {
	     ship.script.$customshieldsmissilemineshipdied = ship.script.shipDied;
         ship.script.shipDied = function(whom, why)
            {
            if(why !== &quot;removed&quot; &amp;&amp; why !== &quot;hit a planet&quot; &amp;&amp; (player.ship.isValid &amp;&amp; player.ship.position.distanceTo(ship.position) &lt; 51200))//determine if effect should be drawn, use &quot;isVisible&quot; in 1.77
               {
               ship.script.customshieldsmissilemineexplosion = ship.spawnOne(&quot;customshieldsmissilemineflareupA&quot;);
			   ship.script.customshieldsmissilemineexplosion.position = ship.position;
		       ship.script.customshieldsmissilemineexplosion.orientation = ship.orientation;
			   ship.script.customshieldsmissilemineexplosion.velocity = ship.velocity;
               }
            if(ship.script.$customshieldsmissilemineshipdied)
	           {
               ship.script.$customshieldsmissilemineshipdied.apply(this, arguments);
		       }
            }
	     }
      }
   if((ship.isThargoid) &amp;&amp; (this.customshieldsshieldtypethargoid === &quot;basic&quot;))//main thargoid shield effects routines using only energy level to control the shield and damage effects
      {
	  if(ship.scriptInfo.npc_shields &amp;&amp; ship.scriptInfo.npc_shields === &quot;no&quot;)
         {
		 return;
		 }
      else
	     {
         if(ship.mass &gt; 0 &amp;&amp; ship.mass &lt;= 5000)
            {
            ship.script.customshieldsshieldflashersize = 1;
            }
         if(ship.mass &gt; 5000 &amp;&amp; ship.mass &lt;= 50000)
            {
            ship.script.customshieldsshieldflashersize = 2;
            }    
         if(ship.mass &gt; 50000 &amp;&amp; ship.mass &lt;= 150000)
            {
            ship.script.customshieldsshieldflashersize = 3;
            }  
         if(ship.mass &gt; 150000 &amp;&amp; ship.mass &lt;= 500000)
            {
            ship.script.customshieldsshieldflashersize = 4;
            }
         if(ship.mass &gt; 500000)
            {
            ship.script.customshieldsshieldflashersize = 5;
            }
         ship.script.customshieldsshieldcolorthargoid = worldScripts[&quot;customshields&quot;].customshieldsshieldcolorthargoid;
	     //----------------------------------------------------begin cloaked attacker code
	     ship.script.$customshieldsthargoidsshipbeingattackedbycloaked = ship.script.shipBeingAttackedByCloaked;
	     ship.script.shipBeingAttackedByCloaked = function()
            {
	        if(player.ship.isCloaked === true)//if the player ship is cloaked it is likely to be the attacker
		       {
		       ship.script.customshieldscloakedattacker = player.ship;//tell the target who attacked
			   }
            if(ship.script.$customshieldsthargoidsshipbeingattackedbycloaked)
		       {
               ship.script.$customshieldsthargoidsshipbeingattackedbycloaked.apply(this, arguments);
               }
            }
	     ship.script.$customshieldsthargoidsshipattackedother = ship.script.shipAttackedOther;
	     ship.script.shipAttackedOther = function(other)
            {
	        if(ship.isCloaked === true)//a cloaked thargoid(is there such a thing?) attacking another npc will override the player as the cloaked attacker when the player is also cloaked
		       {
		       other.script.customshieldscloakedattacker = ship;//tell the target who attacked
			   }
            if(ship.script.$customshieldsthargoidsshipattackedother)
		       {
               ship.script.$customshieldsthargoidsshipattackedother.apply(this, arguments);
               }
           }
         ship.script.$customshieldsthargoidsshiptakingdamage = ship.script.shipTakingDamage;
         ship.script.shipTakingDamage = function(amount, whom, type)
            {
		    if(ship.script.customshieldscloakedattacker)//if this key exists the attacker is cloaked
               {
	           whom = ship.script.customshieldscloakedattacker;//whom must be the cloaked attacker, make it so
	           delete ship.script.customshieldscloakedattacker;//reset this key
	           }//---------------------------------------------end cloaked attacker code
			if(whom &amp;&amp; whom.position !== undefined)
               {
	           var impactradiusfactor = ((3 * (1500 / (ship.position.distanceTo(whom.position)))) + 16);	 
               var impactlocation = whom.position.add(whom.vectorForward.multiply((whom.position.distanceTo(ship.position)) - (ship.collisionRadius + 1)));//determine possible forward weapon hit location
               if((ship.position.distanceTo(impactlocation)) &gt; (ship.collisionRadius + impactradiusfactor))//too far from ship because of delay to hit from plasma weapon or off vector angle because of thargoid laser
                  {
                  impactlocation = whom.position.add(whom.vectorForward.multiply(-((whom.position.distanceTo(ship.position)) - (ship.collisionRadius + 1))));//determine possible aft weapon hit location
                  if((ship.position.distanceTo(impactlocation)) &gt; (ship.collisionRadius + impactradiusfactor))//too far from ship because of delay to hit from plasma weapon or off vector angle because of thargoid laser
                     {
                     impactlocation = whom.position.add(whom.vectorRight.multiply((whom.position.distanceTo(ship.position)) - (ship.collisionRadius + 1)));//determine possible starboard weapon hit location
                     if((ship.position.distanceTo(impactlocation)) &gt; (ship.collisionRadius + impactradiusfactor))//too far from ship because of delay to hit from plasma weapon or off vector angle because of thargoid laser
                        {
                        impactlocation = whom.position.add(whom.vectorRight.multiply(-((whom.position.distanceTo(ship.position)) - (ship.collisionRadius + 1))));//determine possible port weapon hit location
                        if((ship.position.distanceTo(impactlocation)) &gt; (ship.collisionRadius + impactradiusfactor))//too far from ship because of delay to hit from plasma weapon or off vector angle because of thargoid laser
                           {			   
                           var impactinterpolation = ((ship.collisionRadius + 1) / (ship.position.distanceTo(whom.position)));  
                           impactlocation = Vector3D.interpolate(ship.position, whom.position, impactinterpolation);//interpolate weapon hit directly between ship and attacker as a fallback position
                           }
                        }
                     }
                  }
               var attackerdirection = whom.position.subtract(impactlocation).direction();
               var impactdirection = impactlocation.subtract(ship.position).direction();
               var impactrelativeposition = impactlocation.subtract(ship.position);
               var impactangle = ship.heading.angleTo(impactdirection);
	           ship.script.customshieldsattackerdirection = attackerdirection;
	           ship.script.customshieldsimpactdirection = impactdirection;
               ship.script.customshieldsimpactrelativeposition = impactrelativeposition;
               ship.script.customshieldsimpactlocation = impactlocation;			
               if(player.ship.isValid &amp;&amp; player.ship.position.distanceTo(ship.position) &lt; 51200)//determine if effect should be drawn, use &quot;isVisible&quot; in 1.77
                  {
			      ship.script.customshieldsdrawthargoidshieldflashers = (ship.energy / ship.maxEnergy);
		          if((type === &quot;scrape damage&quot;) &amp;&amp; (whom.mass &gt; 10000 || whom.velocity.magnitude &gt; 500))
		             {
			         ship.script.$customshieldsdrawthargoidshieldflareup();
			         }
                  else
			         {
			         ship.script.$customshieldsdrawthargoidshieldflashers();
			         }
			      }
               if(ship.script.$customshieldsthargoidsshiptakingdamage)
		          {
                  ship.script.$customshieldsthargoidsshiptakingdamage.apply(this, arguments);
                  }
               }
			}
         ship.script.$customshieldsdrawthargoidshieldflareup = function()
            {
            var dsf = ship.script.customshieldsdrawthargoidshieldflashers;
	        var sfs = ship.script.customshieldsshieldflashersize;
            var il = ship.script.customshieldsimpactlocation;
            dsf = Math.floor(dsf * 10);
            dsf = (dsf / 10);
            switch(dsf)
               {   
               case 0.9:
                  {
		          var thargoidshieldflareup = ship.spawnOne(&quot;customshieldsshieldflasherflareupA&quot; + sfs);
                  thargoidshieldflareup.position = il;
                  thargoidshieldflareup.target = ship;
                  break;
                  }
               case 0.8:
                  {
		          var thargoidshieldflareup = ship.spawnOne(&quot;customshieldsshieldflasherflareupB&quot; + sfs);
                  thargoidshieldflareup.position = il;
                  thargoidshieldflareup.target = ship;
                  break;
                  }
               case 0.7:
                  {
		          var thargoidshieldflareup = ship.spawnOne(&quot;customshieldsshieldflasherflareupC&quot; + sfs);
                  thargoidshieldflareup.position = il;
                  thargoidshieldflareup.target = ship;
                  break;
                  }
               case 0.6:
                  {
		          var thargoidshieldflareup = ship.spawnOne(&quot;customshieldsshieldflasherflareupD&quot; + sfs);
                  thargoidshieldflareup.position = il;
                  thargoidshieldflareup.target = ship;
                  break;
                  }
               case 0.5:
                  {
		          var thargoidshieldflareup = ship.spawnOne(&quot;customshieldsshieldflasherflareupE&quot; + sfs);
                  thargoidshieldflareup.position = il;
                  thargoidshieldflareup.target = ship;
                  break;
                  }
               case 0.4:
                  {
		          var thargoidshieldflareup = ship.spawnOne(&quot;customshieldsshieldflasherflareupF&quot; + sfs);
                  thargoidshieldflareup.position = il;
                  thargoidshieldflareup.target = ship;
                  break;
                  }
               case 0.3:
                  {
		          var thargoidshieldflareup = ship.spawnOne(&quot;customshieldsshieldflasherflareupG&quot; + sfs);
                  thargoidshieldflareup.position = il;
                  thargoidshieldflareup.target = ship;
                  break;
                  }
               case 0.2:
                  {
		          var thargoidshieldflareup = ship.spawnOne(&quot;customshieldsshieldflasherflareupH&quot; + sfs);
                  thargoidshieldflareup.position = il;
                  thargoidshieldflareup.target = ship;
                  break;
                  }
               case 0.1:
                  {
		          var thargoidshieldflareup = ship.spawnOne(&quot;customshieldsshieldflasherflareupI&quot; + sfs);
                  thargoidshieldflareup.position = il;
                  thargoidshieldflareup.target = ship;
                  break;
                  }
               case 0.0:
                  {
		          var thargoidshieldflareup = ship.spawnOne(&quot;customshieldsshieldflasherflareupJ&quot; + sfs);
                  thargoidshieldflareup.position = il;
                  thargoidshieldflareup.target = ship;
                  break;
                  }
               }
            }        
         ship.script.$customshieldsdrawthargoidshieldflashers = function()
            {
	        var customshieldsshieldcolorthargoid = ship.script.customshieldsshieldcolorthargoid;
	        var dsf = ship.script.customshieldsdrawthargoidshieldflashers;
	        var sfs = ship.script.customshieldsshieldflashersize;
	        var il = ship.script.customshieldsimpactlocation;
	        var ad = ship.script.customshieldsattackerdirection;
	        dsf = Math.floor(dsf * 10);
            dsf = (dsf / 10);
	        switch(dsf)
               {   
               case 0.9:
                  {
			      var thargoidshieldflashers = ship.spawnOne(&quot;customshieldsshieldflasherthargoid&quot; + customshieldsshieldcolorthargoid + &quot;A&quot; + sfs);
			      thargoidshieldflashers.position = il;
			      thargoidshieldflashers.orientation = ad.rotationTo([0, 0, 1]);
			      thargoidshieldflashers.target = ship;
			      break;
			      }
               case 0.8:
                  {
			      var thargoidshieldflashers = ship.spawnOne(&quot;customshieldsshieldflasherthargoid&quot; + customshieldsshieldcolorthargoid + &quot;B&quot; + sfs);
			      thargoidshieldflashers.position = il;
			      thargoidshieldflashers.orientation = ad.rotationTo([0, 0, 1]);
			      thargoidshieldflashers.target = ship;
			      break;
			      }
               case 0.7:
                  {
			      var thargoidshieldflashers = ship.spawnOne(&quot;customshieldsshieldflasherthargoid&quot; + customshieldsshieldcolorthargoid + &quot;C&quot; + sfs);
			      thargoidshieldflashers.position = il;
			      thargoidshieldflashers.orientation = ad.rotationTo([0, 0, 1]);
			      thargoidshieldflashers.target = ship;
			      break;
			      }
               case 0.6:
                  {
			      var thargoidshieldflashers = ship.spawnOne(&quot;customshieldsshieldflasherthargoid&quot; + customshieldsshieldcolorthargoid + &quot;D&quot; + sfs);
			      thargoidshieldflashers.position = il;
			      thargoidshieldflashers.orientation = ad.rotationTo([0, 0, 1]);
			      thargoidshieldflashers.target = ship;
			      break;
			      }
               case 0.5:
                  {
		          var thargoidshieldflashers = ship.spawnOne(&quot;customshieldsshieldflasherthargoid&quot; + customshieldsshieldcolorthargoid + &quot;E&quot; + sfs);
			      thargoidshieldflashers.position = il;
			      thargoidshieldflashers.orientation = ad.rotationTo([0, 0, 1]);
			      thargoidshieldflashers.target = ship;
			      break;
			      }
               case 0.4:
                  {
			      var thargoidshieldflashers = ship.spawnOne(&quot;customshieldsshieldflasherthargoid&quot; + customshieldsshieldcolorthargoid + &quot;F&quot; + sfs);
			      thargoidshieldflashers.position = il;
			      thargoidshieldflashers.orientation = ad.rotationTo([0, 0, 1]);
			      thargoidshieldflashers.target = ship;
			      break;
			      }
               case 0.3:
                  {
			      var thargoidshieldflashers = ship.spawnOne(&quot;customshieldsshieldflasherthargoid&quot; + customshieldsshieldcolorthargoid + &quot;G&quot; + sfs);
			      thargoidshieldflashers.position = il;
			      thargoidshieldflashers.orientation = ad.rotationTo([0, 0, 1]);
			      thargoidshieldflashers.target = ship;
			      break;
			      }
               case 0.2:
                  {
			      var thargoidshieldflashers = ship.spawnOne(&quot;customshieldsshieldflasherthargoid&quot; + customshieldsshieldcolorthargoid + &quot;H&quot; + sfs);
			      thargoidshieldflashers.position = il;
			      thargoidshieldflashers.orientation = ad.rotationTo([0, 0, 1]);
			      thargoidshieldflashers.target = ship;
			      break;
			      }
               case 0.1:
                  {
			      var thargoidshieldflashers = ship.spawnOne(&quot;customshieldsshieldflasherthargoid&quot; + customshieldsshieldcolorthargoid + &quot;I&quot; + sfs);
			      thargoidshieldflashers.position = il;
			      thargoidshieldflashers.orientation = ad.rotationTo([0, 0, 1]);
			      thargoidshieldflashers.target = ship;
			      break;
			      }
               case 0.0:
                  {
			      var thargoidshieldflashers = ship.spawnOne(&quot;customshieldsshieldflasherthargoid&quot; + customshieldsshieldcolorthargoid + &quot;J&quot; + sfs);
			      thargoidshieldflashers.position = il;
			      thargoidshieldflashers.orientation = ad.rotationTo([0, 0, 1]);
			      thargoidshieldflashers.target = ship;
			      break;
			      }
               }
            }
		 }
      }
   if(ship.isPlayer || ship.isSubEntity || ship.isStation || ship.isThargoid || ship.isRock || ship.isCargo || ship.isWeapon || ship.isDerelict || ship.primaryRole === &quot;wreckage&quot; || ship.scanClass === &quot;CLASS_BUOY&quot; || (ship.scriptInfo.npc_shields &amp;&amp; ship.scriptInfo.npc_shields === &quot;no&quot;))
      {
      return;
	  }	  
   if(this.customshieldsshieldtype === &quot;basic&quot;)//main npc shielding routines using only energy level to control the shield and damage effects
      {
      if(ship.mass &gt; 0 &amp;&amp; ship.mass &lt;= 5000)
         {
         ship.script.customshieldsshieldflashersize = 1;
         }
      if(ship.mass &gt; 5000 &amp;&amp; ship.mass &lt;= 50000)
         {
         ship.script.customshieldsshieldflashersize = 2;
         }    
      if(ship.mass &gt; 50000 &amp;&amp; ship.mass &lt;= 150000)
         {
         ship.script.customshieldsshieldflashersize = 3;
         }  
      if(ship.mass &gt; 150000 &amp;&amp; ship.mass &lt;= 500000)
         {
         ship.script.customshieldsshieldflashersize = 4;
         }
      if(ship.mass &gt; 500000)
         {
         ship.script.customshieldsshieldflashersize = 5;
         }
      ship.script.customshieldsspeedcollisionradiusadjustment = (ship.maxSpeed / 350) * 8;	
      ship.script.customshieldsshieldcolor = worldScripts[&quot;customshields&quot;].customshieldsshieldcolor;
	  ship.script.customshieldshitrange = worldScripts[&quot;customshields&quot;].customshieldshitrange;
	  //----------------------------------------------------begin cloaked attacker code
	  ship.script.$customshieldsshipbeingattackedbycloaked = ship.script.shipBeingAttackedByCloaked;
	  ship.script.shipBeingAttackedByCloaked = function()
         {
	     if(player.ship.isCloaked === true)//if the player ship is cloaked it is likely to be the attacker
		    {
		    ship.script.customshieldscloakedattacker = player.ship;//tell the target who attacked
			}
         if(ship.script.$customshieldsshipbeingattackedbycloaked)
		    {
            ship.script.$customshieldsshipbeingattackedbycloaked.apply(this, arguments);
            }
         }
	  ship.script.$customshieldsshipattackedother = ship.script.shipAttackedOther;
	  ship.script.shipAttackedOther = function(other)
         {
	     if(ship.isCloaked === true)//a cloaked npc attacking another npc will override the player as the cloaked attacker when the player is also cloaked
		    {
		    other.script.customshieldscloakedattacker = ship;//tell the target who attacked
			}
         if(ship.script.$customshieldsshipattackedother)
		    {
            ship.script.$customshieldsshipattackedother.apply(this, arguments);
            }
        }
      ship.script.$customshieldsshiptakingdamage = ship.script.shipTakingDamage;
      ship.script.shipTakingDamage = function(amount, whom, type)
         {
		 if(ship.script.customshieldscloakedattacker)//if this key exists the attacker is cloaked
            {
	        whom = ship.script.customshieldscloakedattacker;//whom must be the cloaked attacker, make it so
	        delete ship.script.customshieldscloakedattacker;//reset this key
	        }//---------------------------------------------end cloaked attacker code
		 if(whom &amp;&amp; whom.position !== undefined)
            {
			if(ship.speed &gt; ship.maxSpeed)//added for shield collision issue
               {
               var speedcollisionradiusadjustment = (ship.speed / ship.maxSpeed) * ship.script.customshieldsspeedcollisionradiusadjustment;
	           }
            else
               {
	           var speedcollisionradiusadjustment = 0;
	           }
	        var impactradiusfactor = ((3 * (1500 / (ship.position.distanceTo(whom.position)))) + 16);	 
            var impactlocation = whom.position.add(whom.vectorForward.multiply((whom.position.distanceTo(ship.position)) - (ship.collisionRadius + 1 + speedcollisionradiusadjustment)));//determine possible forward weapon hit location
            if((ship.position.distanceTo(impactlocation)) &gt; (ship.collisionRadius + speedcollisionradiusadjustment + impactradiusfactor))//too far from ship because of delay to hit from plasma weapon or off vector angle because of thargoid laser
               {
               impactlocation = whom.position.add(whom.vectorForward.multiply(-((whom.position.distanceTo(ship.position)) - (ship.collisionRadius + 1 + speedcollisionradiusadjustment))));//determine possible aft weapon hit location
               if((ship.position.distanceTo(impactlocation)) &gt; (ship.collisionRadius + speedcollisionradiusadjustment + impactradiusfactor))//too far from ship because of delay to hit from plasma weapon or off vector angle because of thargoid laser
                  {
                  impactlocation = whom.position.add(whom.vectorRight.multiply((whom.position.distanceTo(ship.position)) - (ship.collisionRadius + 1 + speedcollisionradiusadjustment)));//determine possible starboard weapon hit location
                  if((ship.position.distanceTo(impactlocation)) &gt; (ship.collisionRadius + speedcollisionradiusadjustment + impactradiusfactor))//too far from ship because of delay to hit from plasma weapon or off vector angle because of thargoid laser
                     {
                     impactlocation = whom.position.add(whom.vectorRight.multiply(-((whom.position.distanceTo(ship.position)) - (ship.collisionRadius + 1 + speedcollisionradiusadjustment))));//determine possible port weapon hit location
                     if((ship.position.distanceTo(impactlocation)) &gt; (ship.collisionRadius + speedcollisionradiusadjustment + impactradiusfactor))//too far from ship because of delay to hit from plasma weapon or off vector angle because of thargoid laser
                        {			   
                        var impactinterpolation = ((ship.collisionRadius + 1 + speedcollisionradiusadjustment) / (ship.position.distanceTo(whom.position)));  
                        impactlocation = Vector3D.interpolate(ship.position, whom.position, impactinterpolation);//interpolate weapon hit directly between ship and attacker as a fallback position
                        }
                     }
                  }
               }
            var attackerdirection = whom.position.subtract(impactlocation).direction();
            var impactdirection = impactlocation.subtract(ship.position).direction();
            var impactrelativeposition = impactlocation.subtract(ship.position);
            var impactangle = ship.heading.angleTo(impactdirection);
	        ship.script.customshieldsattackerdirection = attackerdirection;
	        ship.script.customshieldsimpactdirection = impactdirection;
            ship.script.customshieldsimpactrelativeposition = impactrelativeposition;
            ship.script.customshieldsimpactlocation = impactlocation;
            if((ship.energy &gt; (ship.maxEnergy * 0.2)) &amp;&amp; (player.ship.isValid &amp;&amp; player.ship.position.distanceTo(ship.position) &lt; 51200))//determine if effect should be drawn, use &quot;isVisible&quot; in 1.77
               {
			   ship.script.customshieldsdrawshieldflashers = ((((ship.energy / ship.maxEnergy) - 0.2) / 4) * 5);
		       if((type === &quot;scrape damage&quot;) &amp;&amp; (whom.mass &gt; 10000 || whom.velocity.magnitude &gt; 500))
		          {
			      ship.script.$customshieldsdrawshieldflareup();
			      }
               else
			      {
			      ship.script.$customshieldsdrawshieldflashers();
			      }
			   }
            if((ship.energy &lt;= (ship.maxEnergy * 0.2)) &amp;&amp; (player.ship.isValid &amp;&amp; player.ship.position.distanceTo(ship.position) &lt; 51200))//determine if effect should be drawn, use &quot;isVisible&quot; in 1.77
               {
		       ship.script.$customshieldsdrawunshieldedhits();
		       }
            if(ship.script.$customshieldsshiptakingdamage)
		       {
               ship.script.$customshieldsshiptakingdamage.apply(this, arguments);
               }
            }
		 }
      ship.script.$customshieldsdrawunshieldedhits = function()
         {
		 var hitrange = ship.script.customshieldshitrange;
         var hitchance = Math.ceil(Math.random() * hitrange);
         switch(hitchance)
            {   
            case 1://10% nothing
	        case 2:
	        case 3:
	        case 4:
	        case 5:
	           {
		       break;
		       }
	        case 6://60% sparks
	        case 7:
	        case 8:
	        case 9:
	        case 10:
	        case 11:
	        case 12:
	        case 13:
	        case 14:
	        case 15:
	        case 16:
	        case 17:
	        case 18:
	        case 19:
	        case 20:
	        case 21:
	        case 22:
	        case 23:
	        case 24:
	        case 25:
	        case 26:
	        case 27:
	        case 28:
	        case 29:
	        case 30:
	        case 31:
	        case 32:
	        case 33:
	        case 34:
	        case 35:
               {
               var sparks = system.addShips(&quot;customshieldssparks&quot;, 1, ship.script.customshieldsimpactlocation, 0);
               break;
               }
            case 36://20% blown panels
            case 37:
	        case 38:
	        case 39:
	        case 40:
	        case 41:
	        case 42:
	        case 43:
	        case 44:
	        case 45:
               {
               var il = ship.script.customshieldsimpactlocation;
               var id = ship.script.customshieldsimpactdirection;
		       var sparksblownpanels = ship.spawnOne(&quot;customshieldssparksblownpanels&quot;);
               sparksblownpanels.position = il;
		       sparksblownpanels.orientation = id.rotationTo([0, 0, 1]);
		       sparksblownpanels.velocity = ship.velocity.add(sparksblownpanels.vectorForward.multiply((Math.ceil(Math.random() * 150)) + 50));
               break;
               }
            case 46://currently nothing, future expansion
            case 47:
	        case 48:
	        case 49:
	           {
		       break;
		       }
            case 50://fuel leak caused by hull rupture
               {
			   if(ship.script.customshieldsfuelleakflag === 1.0)
			      {
			      break;
			      }
               this.customshieldsfuelleakflag = 1.0;
			   var il = ship.script.customshieldsimpactlocation;
               var id = ship.script.customshieldsimpactdirection;
		       var sparksfuelleaks = ship.spawnOne(&quot;customshieldssparksfuelleaks&quot;);
               sparksfuelleaks.position = il;
		       sparksfuelleaks.orientation = id.rotationTo([0, 0, 1]);
               sparksfuelleaks.target = ship;
               break;
               }
            }
         }  
      ship.script.$customshieldsdrawshieldflareup = function()
         {
         var dsf = ship.script.customshieldsdrawshieldflashers;
	     var sfs = ship.script.customshieldsshieldflashersize;
         var il = ship.script.customshieldsimpactlocation;
         dsf = Math.floor(dsf * 10);
         dsf = (dsf / 10);
         switch(dsf)
            {   
            case 0.9:
               {
		       var shieldflareup = ship.spawnOne(&quot;customshieldsshieldflasherflareupA&quot; + sfs);
               shieldflareup.position = il;
               shieldflareup.target = ship;
               break;
               }
            case 0.8:
               {
		       var shieldflareup = ship.spawnOne(&quot;customshieldsshieldflasherflareupB&quot; + sfs);
               shieldflareup.position = il;
               shieldflareup.target = ship;
               break;
               }
            case 0.7:
               {
		       var shieldflareup = ship.spawnOne(&quot;customshieldsshieldflasherflareupC&quot; + sfs);
               shieldflareup.position = il;
               shieldflareup.target = ship;
               break;
               }
            case 0.6:
               {
		       var shieldflareup = ship.spawnOne(&quot;customshieldsshieldflasherflareupD&quot; + sfs);
               shieldflareup.position = il;
               shieldflareup.target = ship;
               break;
               }
            case 0.5:
               {
		       var shieldflareup = ship.spawnOne(&quot;customshieldsshieldflasherflareupE&quot; + sfs);
               shieldflareup.position = il;
               shieldflareup.target = ship;
               break;
               }
            case 0.4:
               {
		       var shieldflareup = ship.spawnOne(&quot;customshieldsshieldflasherflareupF&quot; + sfs);
               shieldflareup.position = il;
               shieldflareup.target = ship;
               break;
               }
            case 0.3:
               {
		       var shieldflareup = ship.spawnOne(&quot;customshieldsshieldflasherflareupG&quot; + sfs);
               shieldflareup.position = il;
               shieldflareup.target = ship;
               break;
               }
            case 0.2:
               {
		       var shieldflareup = ship.spawnOne(&quot;customshieldsshieldflasherflareupH&quot; + sfs);
               shieldflareup.position = il;
               shieldflareup.target = ship;
               break;
               }
            case 0.1:
               {
		       var shieldflareup = ship.spawnOne(&quot;customshieldsshieldflasherflareupI&quot; + sfs);
               shieldflareup.position = il;
               shieldflareup.target = ship;
               break;
               }
            case 0.0:
               {
		       var shieldflareup = ship.spawnOne(&quot;customshieldsshieldflasherflareupJ&quot; + sfs);
               shieldflareup.position = il;
               shieldflareup.target = ship;
               break;
               }
            }
         }        
      ship.script.$customshieldsdrawshieldflashers = function()
         {
	     var customshieldsshieldcolor = ship.script.customshieldsshieldcolor;
	     var dsf = ship.script.customshieldsdrawshieldflashers;
	     var sfs = ship.script.customshieldsshieldflashersize;
	     var il = ship.script.customshieldsimpactlocation;
	     var ad = ship.script.customshieldsattackerdirection;
	     dsf = Math.floor(dsf * 10);
         dsf = (dsf / 10);
	     switch(dsf)
            {   
            case 0.9:
               {
			   var shieldflashers = ship.spawnOne(&quot;customshieldsshieldflasher&quot; + customshieldsshieldcolor + &quot;A&quot; + sfs);
			   shieldflashers.position = il;
			   shieldflashers.orientation = ad.rotationTo([0, 0, 1]);
			   shieldflashers.target = ship;
			   break;
			   }
            case 0.8:
               {
			   var shieldflashers = ship.spawnOne(&quot;customshieldsshieldflasher&quot; + customshieldsshieldcolor + &quot;B&quot; + sfs);
			   shieldflashers.position = il;
			   shieldflashers.orientation = ad.rotationTo([0, 0, 1]);
			   shieldflashers.target = ship;
			   break;
			   }
            case 0.7:
               {
			   var shieldflashers = ship.spawnOne(&quot;customshieldsshieldflasher&quot; + customshieldsshieldcolor + &quot;C&quot; + sfs);
			   shieldflashers.position = il;
			   shieldflashers.orientation = ad.rotationTo([0, 0, 1]);
			   shieldflashers.target = ship;
			   break;
			   }
            case 0.6:
               {
			   var shieldflashers = ship.spawnOne(&quot;customshieldsshieldflasher&quot; + customshieldsshieldcolor + &quot;D&quot; + sfs);
			   shieldflashers.position = il;
			   shieldflashers.orientation = ad.rotationTo([0, 0, 1]);
			   shieldflashers.target = ship;
			   break;
			   }
            case 0.5:
               {
		       var shieldflashers = ship.spawnOne(&quot;customshieldsshieldflasher&quot; + customshieldsshieldcolor + &quot;E&quot; + sfs);
			   shieldflashers.position = il;
			   shieldflashers.orientation = ad.rotationTo([0, 0, 1]);
			   shieldflashers.target = ship;
			   break;
			   }
            case 0.4:
               {
			   var shieldflashers = ship.spawnOne(&quot;customshieldsshieldflasher&quot; + customshieldsshieldcolor + &quot;F&quot; + sfs);
			   shieldflashers.position = il;
			   shieldflashers.orientation = ad.rotationTo([0, 0, 1]);
			   shieldflashers.target = ship;
			   break;
			   }
            case 0.3:
               {
			   var shieldflashers = ship.spawnOne(&quot;customshieldsshieldflasher&quot; + customshieldsshieldcolor + &quot;G&quot; + sfs);
			   shieldflashers.position = il;
			   shieldflashers.orientation = ad.rotationTo([0, 0, 1]);
			   shieldflashers.target = ship;
			   break;
			   }
            case 0.2:
               {
			   var shieldflashers = ship.spawnOne(&quot;customshieldsshieldflasher&quot; + customshieldsshieldcolor + &quot;H&quot; + sfs);
			   shieldflashers.position = il;
			   shieldflashers.orientation = ad.rotationTo([0, 0, 1]);
			   shieldflashers.target = ship;
			   break;
			   }
            case 0.1:
               {
			   var shieldflashers = ship.spawnOne(&quot;customshieldsshieldflasher&quot; + customshieldsshieldcolor + &quot;I&quot; + sfs);
			   shieldflashers.position = il;
			   shieldflashers.orientation = ad.rotationTo([0, 0, 1]);
			   shieldflashers.target = ship;
			   break;
			   }
            case 0.0:
               {
			   var shieldflashers = ship.spawnOne(&quot;customshieldsshieldflasher&quot; + customshieldsshieldcolor + &quot;J&quot; + sfs);
			   shieldflashers.position = il;
			   shieldflashers.orientation = ad.rotationTo([0, 0, 1]);
			   shieldflashers.target = ship;
			   break;
			   }
            }
         }
      }
   if(this.customshieldsshieldtype === &quot;advanced&quot;)//main npc shielding routines using realistic forward and aft virtual shields to control the shield and damage effects and equipment
      {   	  
      ship.script.customshieldsmaxforwardshieldlevel = 128;
      ship.script.customshieldsmaxaftshieldlevel = 128;
      ship.script.customshieldsshieldrechargingrate = 1.0;
      ship.script.customshieldsshieldrechargingratemultiplier = 0.0;
      ship.script.customshieldslastenergylevel = ship.energy;
      if(ship.equipmentStatus(&quot;EQ_SHIELD_BOOSTER&quot;) === &quot;EQUIPMENT_OK&quot;)
         {
	     ship.removeEquipment(&quot;EQ_SHIELD_BOOSTER&quot;);
         ship.script.customshieldsmaxforwardshieldlevel += 128;
         ship.script.customshieldsmaxaftshieldlevel += 128;
         }
      if(ship.equipmentStatus(&quot;EQ_SHIELD_ENHANCER&quot;) === &quot;EQUIPMENT_OK&quot;)
         {
	     ship.removeEquipment(&quot;EQ_SHIELD_ENHANCER&quot;);
         ship.script.customshieldsmaxforwardshieldlevel += 128;
         ship.script.customshieldsmaxaftshieldlevel += 128;
	     ship.script.customshieldsshieldrechargingrate = 1.5;
	     ship.script.customshieldsshieldrechargingratemultiplier = 0.5;
         }
      if(worldScripts[&quot;shieldequalizercapacitors&quot;])
         {
	     if(Math.random() &lt;= 0.10)
	        {
		    if(Math.random() &lt;= 0.50)
		       {
			   ship.awardEquipment(&quot;EQ_SHIELD_EQUALIZER&quot;);
			   }
            if(Math.random() &lt;= 0.50)
		       {
			   ship.awardEquipment(&quot;EQ_FORWARD_SHIELD_CAPACITOR&quot;);
			   ship.script.customshieldsmaxforwardshieldlevel += 64;
			   }
            if(Math.random() &lt;= 0.50)
		       {
			   ship.awardEquipment(&quot;EQ_AFT_SHIELD_CAPACITOR&quot;);
			   ship.script.customshieldsmaxaftshieldlevel += 64;
			   }
		    }
	     }
      if(worldScripts[&quot;Shield Cycler&quot;])
         {
	     if(Math.random() &lt;= 0.10)
	        {
		    if((Math.random() &lt;= 0.50) &amp;&amp; (ship.equipmentStatus(&quot;EQ_SHIELD_EQUALIZER&quot;) !== &quot;EQUIPMENT_OK&quot;))
		       {
			   ship.awardEquipment(&quot;EQ_SC_SHIELD_CYCLER_INTERNAL&quot;);
			   }
            }
         }
      if(ship.mass &gt; 0 &amp;&amp; ship.mass &lt;= 5000)
         {
         ship.script.customshieldsshieldflashersize = 1;
         }
      if(ship.mass &gt; 5000 &amp;&amp; ship.mass &lt;= 50000)
         {
         ship.script.customshieldsshieldflashersize = 2;
         }    
      if(ship.mass &gt; 50000 &amp;&amp; ship.mass &lt;= 150000)
         {
         ship.script.customshieldsshieldflashersize = 3;
         }  
      if(ship.mass &gt; 150000 &amp;&amp; ship.mass &lt;= 500000)
         {
         ship.script.customshieldsshieldflashersize = 4;
         }
      if(ship.mass &gt; 500000)
         {
         ship.script.customshieldsshieldflashersize = 5;
         }
      ship.script.customshieldsspeedcollisionradiusadjustment = (ship.maxSpeed / 350) * 8;
      ship.script.customshieldsshieldcolor = worldScripts[&quot;customshields&quot;].customshieldsshieldcolor;
	  ship.script.customshieldshitrange = worldScripts[&quot;customshields&quot;].customshieldshitrange;
      ship.script.customshieldsforwardshieldlevel = ship.script.customshieldsmaxforwardshieldlevel;
      ship.script.customshieldsaftshieldlevel = ship.script.customshieldsmaxaftshieldlevel;
	  //----------------------------------------------------begin cloaked attacker code
	  ship.script.$customshieldsshipbeingattackedbycloaked = ship.script.shipBeingAttackedByCloaked;
	  ship.script.shipBeingAttackedByCloaked = function()
         {
	     if(player.ship.isCloaked === true)//if the player ship is cloaked it is likely to be the attacker
		    {
		    ship.script.customshieldscloakedattacker = player.ship;//tell the target who attacked
			}
         if(ship.script.$customshieldsshipbeingattackedbycloaked)
		    {
            ship.script.$customshieldsshipbeingattackedbycloaked.apply(this, arguments);
            }
         }
	  ship.script.$customshieldsshipattackedother = ship.script.shipAttackedOther;
	  ship.script.shipAttackedOther = function(other)
         {
	     if(ship.isCloaked === true)//a cloaked npc attacking another npc will override the player as the cloaked attacker when the player is also cloaked
		    {
		    other.script.customshieldscloakedattacker = ship;//tell the target who attacked
			}
         if(ship.script.$customshieldsshipattackedother)
		    {
            ship.script.$customshieldsshipattackedother.apply(this, arguments);
            }
        }
      ship.script.$customshieldsshiptakingdamage = ship.script.shipTakingDamage;
      ship.script.shipTakingDamage = function(amount, whom, type)
         {
		 if(ship.script.customshieldscloakedattacker)//if this key exists the attacker is cloaked
            {
	        whom = ship.script.customshieldscloakedattacker;//whom must be the cloaked attacker, make it so
	        delete ship.script.customshieldscloakedattacker;//reset this key
	        }//---------------------------------------------end cloaked attacker code
		 if(whom &amp;&amp; whom.position !== undefined)
            {
			if(ship.speed &gt; ship.maxSpeed)//added for shield collision issue
               {
               var speedcollisionradiusadjustment = (ship.speed / ship.maxSpeed) * ship.script.customshieldsspeedcollisionradiusadjustment;
	           }
            else
               {
	           var speedcollisionradiusadjustment = 0;
	           }
	        var impactradiusfactor = ((3 * (1500 / (ship.position.distanceTo(whom.position)))) + 16);	 
            var impactlocation = whom.position.add(whom.vectorForward.multiply((whom.position.distanceTo(ship.position)) - (ship.collisionRadius + 1 + speedcollisionradiusadjustment)));//determine possible forward weapon hit location
            if((ship.position.distanceTo(impactlocation)) &gt; (ship.collisionRadius + speedcollisionradiusadjustment + impactradiusfactor))//too far from ship because of delay to hit from plasma weapon or off vector angle because of thargoid laser
               {
               impactlocation = whom.position.add(whom.vectorForward.multiply(-((whom.position.distanceTo(ship.position)) - (ship.collisionRadius + 1 + speedcollisionradiusadjustment))));//determine possible aft weapon hit location
               if((ship.position.distanceTo(impactlocation)) &gt; (ship.collisionRadius + speedcollisionradiusadjustment + impactradiusfactor))//too far from ship because of delay to hit from plasma weapon or off vector angle because of thargoid laser
                  {
                  impactlocation = whom.position.add(whom.vectorRight.multiply((whom.position.distanceTo(ship.position)) - (ship.collisionRadius + 1 + speedcollisionradiusadjustment)));//determine possible starboard weapon hit location
                  if((ship.position.distanceTo(impactlocation)) &gt; (ship.collisionRadius + speedcollisionradiusadjustment + impactradiusfactor))//too far from ship because of delay to hit from plasma weapon or off vector angle because of thargoid laser
                     {
                     impactlocation = whom.position.add(whom.vectorRight.multiply(-((whom.position.distanceTo(ship.position)) - (ship.collisionRadius + 1 + speedcollisionradiusadjustment))));//determine possible port weapon hit location
                     if((ship.position.distanceTo(impactlocation)) &gt; (ship.collisionRadius + speedcollisionradiusadjustment + impactradiusfactor))//too far from ship because of delay to hit from plasma weapon or off vector angle because of thargoid laser
                        {			   
                        var impactinterpolation = ((ship.collisionRadius + 1 + speedcollisionradiusadjustment) / (ship.position.distanceTo(whom.position)));  
                        impactlocation = Vector3D.interpolate(ship.position, whom.position, impactinterpolation);//interpolate weapon hit directly between ship and attacker as a fallback position
                        }
                     }
                  }
               }
            var attackerdirection = whom.position.subtract(impactlocation).direction();
            var impactdirection = impactlocation.subtract(ship.position).direction();
            var impactrelativeposition = impactlocation.subtract(ship.position);
            var impactangle = ship.heading.angleTo(impactdirection);
	        ship.script.customshieldsattackerdirection = attackerdirection;
	        ship.script.customshieldsimpactdirection = impactdirection;
            ship.script.customshieldsimpactrelativeposition = impactrelativeposition;
            ship.script.customshieldsimpactlocation = impactlocation;
            if((ship.script.customshieldsforwardshieldlevel &gt; 0) &amp;&amp; (impactangle &lt;= 1.57))//choose the shield that was hit
               {
               ship.script.customshieldsforwardshieldlevel -= amount;//subtract from shield
               var forwardshieldrecovery = amount;
               if(ship.script.customshieldsforwardshieldlevel &lt; 0)//shield minimum is 0, give overflow damage to energy
                  {
                  forwardshieldrecovery += ship.script.customshieldsforwardshieldlevel;
			      var transferredamount = (ship.script.customshieldsforwardshieldlevel * -1);
                  ship.script.customshieldsforwardshieldlevel = 0;
			      if(((ship.equipmentStatus(&quot;EQ_SHIELD_EQUALIZER&quot;) === &quot;EQUIPMENT_OK&quot;) || (ship.equipmentStatus(&quot;EQ_SC_SHIELD_CYCLER_INTERNAL&quot;) === &quot;EQUIPMENT_OK&quot;)) &amp;&amp; (ship.script.customshieldsaftshieldlevel &gt; 0))//take from the opposite shield before energy adjustment
                     {
			         ship.script.customshieldsaftshieldlevel -= transferredamount;
                     var aftshieldrecovery = transferredamount;
                     if(ship.script.customshieldsaftshieldlevel &lt; 0)//shield minimum is 0, give overflow damage to energy
                        {
                        aftshieldrecovery += ship.script.customshieldsaftshieldlevel;
                        ship.script.customshieldsaftshieldlevel = 0;
				        forwardshieldrecovery = aftshieldrecovery;
                        }
			         }
                  }
               if((ship.equipmentStatus(&quot;EQ_SHIELD_EQUALIZER&quot;) === &quot;EQUIPMENT_OK&quot;) || (ship.equipmentStatus(&quot;EQ_SC_SHIELD_CYCLER_INTERNAL&quot;) === &quot;EQUIPMENT_OK&quot;))//final division of shield energy between shields
                  {
			      if((ship.equipmentStatus(&quot;EQ_SC_SHIELD_CYCLER_INTERNAL&quot;) === &quot;EQUIPMENT_OK&quot;) &amp;&amp; (ship.energy &gt; 5))
			         {
			         ship.energy -= 4.0;//shield cycler transfer energy loss(minimum)
			         }
                  var shieldtransfer = ((ship.script.customshieldsforwardshieldlevel + ship.script.customshieldsaftshieldlevel) / 2);
                  ship.script.customshieldsforwardshieldlevel = shieldtransfer;
                  ship.script.customshieldsaftshieldlevel = shieldtransfer;
			      }
               ship.energy += forwardshieldrecovery;//restore energy	 
               if(player.ship.isValid &amp;&amp; player.ship.position.distanceTo(ship.position) &lt; 51200)//determine if effect should be drawn, use &quot;isVisible&quot; in 1.77
                  {
			      ship.script.customshieldsdrawshieldflashers = (ship.script.customshieldsforwardshieldlevel / ship.script.customshieldsmaxforwardshieldlevel);
		          if((type === &quot;scrape damage&quot;) &amp;&amp; (whom.mass &gt; 10000 || whom.velocity.magnitude &gt; 500))
		             {
			         ship.script.$customshieldsdrawshieldflareup();
			         }
                  else
			         {
			         ship.script.$customshieldsdrawshieldflashers();
			         }
			      }
               }
            if((ship.script.customshieldsforwardshieldlevel === 0) &amp;&amp; (impactangle &lt;= 1.57) &amp;&amp; (player.ship.isValid &amp;&amp; player.ship.position.distanceTo(ship.position) &lt; 51200))//determine if effect should be drawn, use &quot;isVisible&quot; in 1.77
               {
		       ship.script.$customshieldsdrawunshieldedhits();
		       }
            if((ship.script.customshieldsaftshieldlevel &gt; 0) &amp;&amp; (impactangle &gt; 1.57))//choose the shield that was hit
               {// the shield is depleted
               ship.script.customshieldsaftshieldlevel -= amount;//subtract from shield
               var aftshieldrecovery = amount;
               if(ship.script.customshieldsaftshieldlevel &lt; 0)//shield minimum is 0, give overflow damage to energy
                  {
                  aftshieldrecovery += ship.script.customshieldsaftshieldlevel;
			      var transferredamount = (ship.script.customshieldsaftshieldlevel * -1);
                  ship.script.customshieldsaftshieldlevel = 0;
			      if(((ship.equipmentStatus(&quot;EQ_SHIELD_EQUALIZER&quot;) === &quot;EQUIPMENT_OK&quot;) || (ship.equipmentStatus(&quot;EQ_SC_SHIELD_CYCLER_INTERNAL&quot;) === &quot;EQUIPMENT_OK&quot;)) &amp;&amp; (ship.script.customshieldsforwardshieldlevel &gt; 0))//take from the opposite shield before energy adjustment
                     {
			         ship.script.customshieldsforwardshieldlevel -= transferredamount;
                     var forwardshieldrecovery = transferredamount;
                     if(ship.script.customshieldsforwardshieldlevel &lt; 0)//shield minimum is 0, give overflow damage to energy
                        {
                        forwardshieldrecovery += ship.script.customshieldsforwardshieldlevel;
                        ship.script.customshieldsforwardshieldlevel = 0;
				        aftshieldrecovery = forwardshieldrecovery;
                        }
			         }
                  }
               if((ship.equipmentStatus(&quot;EQ_SHIELD_EQUALIZER&quot;) === &quot;EQUIPMENT_OK&quot;) || (ship.equipmentStatus(&quot;EQ_SC_SHIELD_CYCLER_INTERNAL&quot;) === &quot;EQUIPMENT_OK&quot;))//final division of shield energy between shields
                  {
			      if((ship.equipmentStatus(&quot;EQ_SC_SHIELD_CYCLER_INTERNAL&quot;) === &quot;EQUIPMENT_OK&quot;) &amp;&amp; (ship.energy &gt; 5))
			         {
			         ship.energy -= 4.0;//shield cycler transfer energy loss(minimum)
			         }
                  var shieldtransfer = ((ship.script.customshieldsforwardshieldlevel + ship.script.customshieldsaftshieldlevel) / 2);
                  ship.script.customshieldsforwardshieldlevel = shieldtransfer;
                  ship.script.customshieldsaftshieldlevel = shieldtransfer;
			      }
               ship.energy += aftshieldrecovery;//restore energy	 		 
               if(player.ship.isValid &amp;&amp; player.ship.position.distanceTo(ship.position) &lt; 51200)//determine if effect should be drawn, use &quot;isVisible&quot; in 1.77
		          {
			      ship.script.customshieldsdrawshieldflashers = (ship.script.customshieldsaftshieldlevel / ship.script.customshieldsmaxaftshieldlevel);
			      if((type === &quot;scrape damage&quot;) &amp;&amp; (whom.mass &gt; 10000 || whom.velocity.magnitude &gt; 500))
		             {
			         ship.script.$customshieldsdrawshieldflareup();
			         }
                  else
			         {
			         ship.script.$customshieldsdrawshieldflashers();
			         }
			      }
               }
            if((ship.script.customshieldsaftshieldlevel === 0) &amp;&amp; (impactangle &gt; 1.57) &amp;&amp; (player.ship.isValid &amp;&amp; player.ship.position.distanceTo(ship.position) &lt; 51200))//determine if effect should be drawn, use &quot;isVisible&quot; in 1.77
               {
		       ship.script.$customshieldsdrawunshieldedhits();
		       }		 
            if(ship.script.customshieldsshieldrechargeTimer)//start shield recharge
		       {
		       ship.script.customshieldsshieldrechargeTimer.start();
               }
            else
		       {
		       ship.script.customshieldsshieldrechargeTimer = new Timer(ship.script, ship.script.$customshieldsshieldrecharge, 0.5, 0.5);
               }		 
            if(ship.script.$customshieldsshiptakingdamage)
		       {
               ship.script.$customshieldsshiptakingdamage.apply(this, arguments);
               }
            }
		 }
      ship.script.$customshieldsdrawunshieldedhits = function()
         {
		 var hitrange = ship.script.customshieldshitrange;
         var hitchance = Math.ceil(Math.random() * hitrange);
         switch(hitchance)
            {   
            case 1://10% nothing
	        case 2:
	        case 3:
	        case 4:
	        case 5:
	           {
		       break;
		       }
	        case 6://60% sparks
	        case 7:
	        case 8:
	        case 9:
	        case 10:
	        case 11:
	        case 12:
	        case 13:
	        case 14:
	        case 15:
	        case 16:
	        case 17:
	        case 18:
	        case 19:
	        case 20:
	        case 21:
	        case 22:
	        case 23:
	        case 24:
	        case 25:
	        case 26:
	        case 27:
	        case 28:
	        case 29:
	        case 30:
	        case 31:
	        case 32:
	        case 33:
	        case 34:
	        case 35:
               {
               var sparks = system.addShips(&quot;customshieldssparks&quot;, 1, ship.script.customshieldsimpactlocation, 0);
               break;
               }
            case 36://20% blown panels
            case 37:
	        case 38:
	        case 39:
	        case 40:
	        case 41:
	        case 42:
	        case 43:
	        case 44:
	        case 45:
               {
               var il = ship.script.customshieldsimpactlocation;
               var id = ship.script.customshieldsimpactdirection;
		       var sparksblownpanels = ship.spawnOne(&quot;customshieldssparksblownpanels&quot;);
               sparksblownpanels.position = il;
		       sparksblownpanels.orientation = id.rotationTo([0, 0, 1]);
		       sparksblownpanels.velocity = ship.velocity.add(sparksblownpanels.vectorForward.multiply((Math.ceil(Math.random() * 150)) + 50));
               break;
               }
            case 46://currently nothing, future expansion
            case 47:
	        case 48:
	        case 49:
	           {
		       break;
		       }
            case 50://fuel leak caused by hull rupture
               {
			   if(ship.script.customshieldsfuelleakflag === 1.0)
			      {
			      break;
			      }
               this.customshieldsfuelleakflag = 1.0;
			   var il = ship.script.customshieldsimpactlocation;
               var id = ship.script.customshieldsimpactdirection;
		       var sparksfuelleaks = ship.spawnOne(&quot;customshieldssparksfuelleaks&quot;);
               sparksfuelleaks.position = il;
		       sparksfuelleaks.orientation = id.rotationTo([0, 0, 1]);
               sparksfuelleaks.target = ship;
               break;
               }
            }
         }  	  
      ship.script.$customshieldsdrawshieldflareup = function()
         {
         var dsf = ship.script.customshieldsdrawshieldflashers;
	     var sfs = ship.script.customshieldsshieldflashersize;
         var il = ship.script.customshieldsimpactlocation;
         dsf = Math.floor(dsf * 10);
         dsf = (dsf / 10);
         switch(dsf)
            {   
            case 0.9:
               {
		       var shieldflareup = ship.spawnOne(&quot;customshieldsshieldflasherflareupA&quot; + sfs);
               shieldflareup.position = il;
               shieldflareup.target = ship;
               break;
               }
            case 0.8:
               {
		       var shieldflareup = ship.spawnOne(&quot;customshieldsshieldflasherflareupB&quot; + sfs);
               shieldflareup.position = il;
               shieldflareup.target = ship;
               break;
               }
            case 0.7:
               {
		       var shieldflareup = ship.spawnOne(&quot;customshieldsshieldflasherflareupC&quot; + sfs);
               shieldflareup.position = il;
               shieldflareup.target = ship;
               break;
               }
            case 0.6:
               {
		       var shieldflareup = ship.spawnOne(&quot;customshieldsshieldflasherflareupD&quot; + sfs);
               shieldflareup.position = il;
               shieldflareup.target = ship;
               break;
               }
            case 0.5:
               {
		       var shieldflareup = ship.spawnOne(&quot;customshieldsshieldflasherflareupE&quot; + sfs);
               shieldflareup.position = il;
               shieldflareup.target = ship;
               break;
               }
            case 0.4:
               {
		       var shieldflareup = ship.spawnOne(&quot;customshieldsshieldflasherflareupF&quot; + sfs);
               shieldflareup.position = il;
               shieldflareup.target = ship;
               break;
               }
            case 0.3:
               {
		       var shieldflareup = ship.spawnOne(&quot;customshieldsshieldflasherflareupG&quot; + sfs);
               shieldflareup.position = il;
               shieldflareup.target = ship;
               break;
               }
            case 0.2:
               {
		       var shieldflareup = ship.spawnOne(&quot;customshieldsshieldflasherflareupH&quot; + sfs);
               shieldflareup.position = il;
               shieldflareup.target = ship;
               break;
               }
            case 0.1:
               {
		       var shieldflareup = ship.spawnOne(&quot;customshieldsshieldflasherflareupI&quot; + sfs);
               shieldflareup.position = il;
               shieldflareup.target = ship;
               break;
               }
            case 0.0:
               {
		       var shieldflareup = ship.spawnOne(&quot;customshieldsshieldflasherflareupJ&quot; + sfs);
               shieldflareup.position = il;
               shieldflareup.target = ship;
               break;
               }
            }
         }   
      ship.script.$customshieldsdrawshieldflashers = function()
         {
	     var customshieldsshieldcolor = ship.script.customshieldsshieldcolor;
	     var dsf = ship.script.customshieldsdrawshieldflashers;
	     var sfs = ship.script.customshieldsshieldflashersize;
	     var il = ship.script.customshieldsimpactlocation;
	     var ad = ship.script.customshieldsattackerdirection;
	     dsf = Math.floor(dsf * 10);
         dsf = (dsf / 10);
	     switch(dsf)
            {   
            case 0.9:
               {
			   var shieldflashers = ship.spawnOne(&quot;customshieldsshieldflasher&quot; + customshieldsshieldcolor + &quot;A&quot; + sfs);
			   shieldflashers.position = il;
			   shieldflashers.orientation = ad.rotationTo([0, 0, 1]);
			   shieldflashers.target = ship;
			   break;
			   }
            case 0.8:
               {
			   var shieldflashers = ship.spawnOne(&quot;customshieldsshieldflasher&quot; + customshieldsshieldcolor + &quot;B&quot; + sfs);
			   shieldflashers.position = il;
			   shieldflashers.orientation = ad.rotationTo([0, 0, 1]);
			   shieldflashers.target = ship;
			   break;
			   }
            case 0.7:
               {
			   var shieldflashers = ship.spawnOne(&quot;customshieldsshieldflasher&quot; + customshieldsshieldcolor + &quot;C&quot; + sfs);
			   shieldflashers.position = il;
			   shieldflashers.orientation = ad.rotationTo([0, 0, 1]);
			   shieldflashers.target = ship;
			   break;
			   }
            case 0.6:
               {
			   var shieldflashers = ship.spawnOne(&quot;customshieldsshieldflasher&quot; + customshieldsshieldcolor + &quot;D&quot; + sfs);
			   shieldflashers.position = il;
			   shieldflashers.orientation = ad.rotationTo([0, 0, 1]);
			   shieldflashers.target = ship;
			   break;
			   }
            case 0.5:
               {
		       var shieldflashers = ship.spawnOne(&quot;customshieldsshieldflasher&quot; + customshieldsshieldcolor + &quot;E&quot; + sfs);
			   shieldflashers.position = il;
			   shieldflashers.orientation = ad.rotationTo([0, 0, 1]);
			   shieldflashers.target = ship;
			   break;
			   }
            case 0.4:
               {
			   var shieldflashers = ship.spawnOne(&quot;customshieldsshieldflasher&quot; + customshieldsshieldcolor + &quot;F&quot; + sfs);
			   shieldflashers.position = il;
			   shieldflashers.orientation = ad.rotationTo([0, 0, 1]);
			   shieldflashers.target = ship;
			   break;
			   }
            case 0.3:
               {
			   var shieldflashers = ship.spawnOne(&quot;customshieldsshieldflasher&quot; + customshieldsshieldcolor + &quot;G&quot; + sfs);
			   shieldflashers.position = il;
			   shieldflashers.orientation = ad.rotationTo([0, 0, 1]);
			   shieldflashers.target = ship;
			   break;
			   }
            case 0.2:
               {
			   var shieldflashers = ship.spawnOne(&quot;customshieldsshieldflasher&quot; + customshieldsshieldcolor + &quot;H&quot; + sfs);
			   shieldflashers.position = il;
			   shieldflashers.orientation = ad.rotationTo([0, 0, 1]);
			   shieldflashers.target = ship;
			   break;
			   }
            case 0.1:
               {
			   var shieldflashers = ship.spawnOne(&quot;customshieldsshieldflasher&quot; + customshieldsshieldcolor + &quot;I&quot; + sfs);
			   shieldflashers.position = il;
			   shieldflashers.orientation = ad.rotationTo([0, 0, 1]);
			   shieldflashers.target = ship;
			   break;
			   }
            case 0.0:
               {
			   var shieldflashers = ship.spawnOne(&quot;customshieldsshieldflasher&quot; + customshieldsshieldcolor + &quot;J&quot; + sfs);
			   shieldflashers.position = il;
			   shieldflashers.orientation = ad.rotationTo([0, 0, 1]);
			   shieldflashers.target = ship;
			   break;
			   }
            }
         }
      ship.script.$customshieldsshieldrecharge = function()
         {
         if(ship.energy &lt; ship.maxEnergy || ship.isDerelict)// recharge shields after energy has been recharged and derelicts have no shields to recharge
            {
		    if((ship.energy &gt; ship.script.customshieldslastenergylevel) &amp;&amp; ((ship.energy - ship.script.customshieldslastenergylevel) &lt;= 10.0))//level went up but not much indicates charging rather than a one shot oxp energy replacement
		       {
			   ship.script.customshieldsenergyrecharged = ((ship.energy - ship.script.customshieldslastenergylevel) * ship.script.customshieldsshieldrechargingratemultiplier);
			   ship.energy += ship.script.customshieldsenergyrecharged;//add any multiplier of the ships built-in energy recharge rate to the ship&#39;s energy
			   ship.script.customshieldslastenergylevel = ship.energy;
			   }
            return;
            }
         ship.script.customshieldsforwardshieldlevel += ship.script.customshieldsshieldrechargingrate;
	     ship.script.customshieldsaftshieldlevel += ship.script.customshieldsshieldrechargingrate;
         if(ship.script.customshieldsforwardshieldlevel &gt;= ship.script.customshieldsmaxforwardshieldlevel)
            {
            ship.script.customshieldsforwardshieldlevel = ship.script.customshieldsmaxforwardshieldlevel;//forward shield fully charged
            if(ship.script.customshieldsaftshieldlevel &gt;= ship.script.customshieldsmaxaftshieldlevel)
               {
               ship.script.customshieldsaftshieldlevel = ship.script.customshieldsmaxaftshieldlevel;//aft shield fully charged
               ship.script.customshieldsshieldrechargeTimer.stop();//stop timer when both shields fully charged
			   return;
               }
            return;
            }
         if(ship.script.customshieldsaftshieldlevel &gt;= ship.script.customshieldsmaxaftshieldlevel)
            {
            ship.script.customshieldsaftshieldlevel = ship.script.customshieldsmaxaftshieldlevel;//aft shield fully charged
            return;
		    }     
         }	  
      ship.script.$customshieldsshipdied = ship.script.shipDied;
      ship.script.shipDied = function(whom, why)
         {
         if(ship.script.customshieldsshieldrechargeTimer)// recharge timer is stopped and removed if the ship dies
            {
            ship.script.customshieldsshieldrechargeTimer.stop();
            delete ship.script.customshieldsshieldrechargeTimer;
            }
         if(ship.script.$customshieldsshipdied)
	        {
            ship.script.$customshieldsshipdied.apply(this, arguments);
		    }
         }
      }
   }</pre></td>
                </tr>
                <tr>
                    <td valign="top">Scripts/customshieldsblownpanels.js</td>
                    <td><pre>this.name        = &quot;customshieldsblownpanels&quot;; 
this.author      = &quot;CommonSenseOTB&quot;; 
this.copyright   = &quot;Copyright Sept.24, 2012 by CommonSenseOTB, licensed under Creative Commons: attribution, non-commercial, sharealike with clauses - see readme.txt&quot;;
this.description = &quot;Blown Panels&quot;; 
this.version     = &quot;0.83&quot;;

this.shipSpawned = function()
   {
   if(this.ship &amp;&amp; this.ship.isValid)
      {
      this.customshieldsblownpaneldestruction = Math.ceil(Math.random() * 30);   
      this.customshieldsblownpanelTimer = new Timer(this, this.customshieldsblownpanel, this.customshieldsblownpaneldestruction, -1);
	  }
   else
      {
	  this.ship.remove();
	  return;
	  }
   }

this.customshieldsblownpanel = function()
   {
   this.ship.explode();
   return;
   }

this.shipRemoved = this.entityDestroyed = function()//remove timers that are not needed
   {
   if(this.customshieldsblownpanelTimer &amp;&amp; this.customshieldsblownpanelTimer.isRunning)
      {
      this.customshieldsblownpanelTimer.stop();
	  delete this.customshieldsblownpanelTimer;
      }
   }
   
this.shipWasScooped = function(scooper)
   {
   this.cargotype = &quot;Alloys&quot;;
   this.quantity = parseInt(1);
   this.ship.setCargo(this.cargotype, this.quantity);
   this.message = this.quantity + &quot; ton Alloys&quot;;
   if(scooper.isPlayer)
      {
      player.consoleMessage(this.message);
      }
   }</pre></td>
                </tr>
                <tr>
                    <td valign="top">Scripts/customshieldsdamage.js</td>
                    <td><pre>this.name        = &quot;customshieldsdamage&quot;; 
this.author      = &quot;CommonSenseOTB&quot;; 
this.copyright   = &quot;Copyright Sept. 24, 2012 by CommonSenseOTB, licensed under Creative Commons: attribution, non-commercial, sharealike with clauses - see readme.txt&quot;;
this.description = &quot;Damage&quot;; 
this.version     = &quot;0.83&quot;;

this.shipSpawned = function()
   {
   if(this.ship &amp;&amp; this.ship.isValid)
      {
      this.ship.explode();
	  }
   else
      {
	  this.ship.remove();
	  return;
	  }
   } </pre></td>
                </tr>
                <tr>
                    <td valign="top">Scripts/customshieldsfuelleaks.js</td>
                    <td><pre>this.name        = &quot;customshieldsfuelleaks&quot;; 
this.author      = &quot;CommonSenseOTB&quot;; 
this.copyright   = &quot;Copyright Sept. 24, 2012 by CommonSenseOTB, licensed under Creative Commons: attribution, non-commercial, sharealike with clauses - see readme.txt&quot;;
this.description = &quot;Script For Fuel Leaks&quot;; 
this.version     = &quot;0.83&quot;;

this.shipSpawned = function()
   {
   if(this.ship &amp;&amp; this.ship.isValid &amp;&amp; this.ship.target &amp;&amp; this.ship.target.isValid)
      {
	  this.customshieldsframetime = 0.0;
	  this.customshieldsframetimelimit = this.ship.target.fuel;
	  this.ship.velocity = this.ship.velocity.add(this.ship.vectorForward.multiply(10 + (this.customshieldsframetimelimit * 3)));
	  this.csfl = addFrameCallback(this.customshieldsfuelleaks.bind(this));//----------
      return;
	  }
   else
      {
	  this.ship.remove();
	  return;
	  }
   }

this.shipTakingDamage = function()
   {
   this.ship.energy = this.ship.maxEnergy;//restore energy
   if(this.customshieldsframetimelimit &gt; (this.customshieldsframetime + 1.0))
      {
	  this.customshieldsframetimelimit = (this.customshieldsframetime + 1.0);//1 second left to exist, collision dissipates vapor cloud
	  }
   }   
   
this.customshieldsfuelleaks = function(delta)
   {
   if(this.ship &amp;&amp; this.ship.isValid &amp;&amp; this.ship.target &amp;&amp; this.ship.target.isValid)
      {
	  this.customshieldsframetime += delta;
	  this.customshieldsfuelscooperpossibilities = system.filteredEntities(this, function (entity){return ((entity.fuel &lt; 7.0) &amp;&amp; (entity.equipmentStatus(&quot;EQ_FUEL_SCOOPS&quot;) === &quot;EQUIPMENT_OK&quot;) &amp;&amp; (entity !== this.ship.target))}, this.ship, 25);//must have space for fuel, working fuel scoops, and not be the one leaking the fuel to begin with 
      if(this.customshieldsfuelscooperpossibilities.length &gt; 0)
	     {
		 if(this.customshieldsfuelscooperpossibilities[0].isPlayer)
		    {
			player.consoleMessage(&quot;Fuel vapor detected, scooping...&quot;, 4);
			if(player.ship.scoopOverride === false)//if effect is not currently active
			   {
			   player.ship.scoopOverride = true;//activate the effect
			   this.ship.spawnOne(&quot;customshieldsfuelleaksscoopoverride&quot;);//spawn marker timer for effect control
			   }
			}
		 var fuelchance = Math.ceil(Math.random() * 10);
		 if(fuelchance === 1)//1 in 10 clouds scooped results in 0.1 ly of fuel and 3 clouds spawned for every 0.1 ly of fuel a ship has results in an average max recovery of 30% of the fuel if you scoop every cloud
		    {
		    this.customshieldsfuelscooperpossibilities[0].fuel += 0.1;//contains 0.1ly fuel
			}
         removeFrameCallback(this.csfl);//----------
		 this.ship.remove();//each vapor cloud piece can be scooped only once so remove it		 
         return;
		 }	  
	  if(this.customshieldsframetime &gt;= this.customshieldsframetimelimit)//length of time fuel vapor exists
	     {
		 removeFrameCallback(this.csfl);//----------
		 this.ship.remove();		 
         return;
		 }
      return;
      }
   else
      {
	  removeFrameCallback(this.csfl);//----------
      this.ship.remove();   
      return;
	  }
   }</pre></td>
                </tr>
                <tr>
                    <td valign="top">Scripts/customshieldsfuelleaksscoopoverride.js</td>
                    <td><pre>this.name        = &quot;customshieldsfuelleaksscoopoverride&quot;; 
this.author      = &quot;CommonSenseOTB&quot;; 
this.copyright   = &quot;Copyright Sept. 24, 2012 by CommonSenseOTB, licensed under Creative Commons: attribution, non-commercial, sharealike with clauses - see readme.txt&quot;;
this.description = &quot;Script For Fuel Leaks Scoop Override&quot;; 
this.version     = &quot;0.83&quot;;

this.shipSpawned = function()
   {
   if(this.ship &amp;&amp; this.ship.isValid)
      {
      this.customshieldsframetime = 0.0;
      this.csflso = addFrameCallback(this.customshieldsfuelleaksscoopoverride.bind(this));//----------
      return;
	  }
   else
      {
	  player.ship.scoopOverride = false;
	  this.ship.remove();
	  return;
	  }
   }

this.shipTakingDamage = function()
   {
   this.ship.energy = this.ship.maxEnergy;//restore energy
   }     
   
this.customshieldsfuelleaksscoopoverride = function(delta)
   {
   if(this.ship &amp;&amp; this.ship.isValid)
      {
	  this.customshieldsframetime += delta;
	  if(this.customshieldsframetime &gt;= 2.0)//length of time scoop override effect lasts
	     {
		 player.ship.scoopOverride = false;
		 removeFrameCallback(this.csflso);//----------
		 this.ship.remove();		 
         return;
		 }
      }
   else
      {
	  player.ship.scoopOverride = false;
	  removeFrameCallback(this.csflso);//----------
      this.ship.remove();   
      return;
	  }
   }
</pre></td>
                </tr>
                <tr>
                    <td valign="top">Scripts/customshieldsmissilemineflareupA.js</td>
                    <td><pre>this.name        = &quot;customshieldsmissilemineflareupA&quot;; 
this.author      = &quot;CommonSenseOTB&quot;; 
this.copyright   = &quot;Copyright Sept. 24, 2012 by CommonSenseOTB, licensed under Creative Commons: attribution, non-commercial, sharealike with clauses - see readme.txt&quot;;
this.description = &quot;Script For Missile Mine Explosions&quot;; 
this.version     = &quot;0.83&quot;;

this.shipSpawned = function()
   {
   if(this.ship &amp;&amp; this.ship.isValid)
      {
      this.customshieldsframetime = 0.0;
      this.csmmfu = addFrameCallback(this.customshieldsmissilemineflareup.bind(this));//----------
      return;
	  }
   else
      {
	  this.ship.remove();
	  return;
	  }
   }
 
this.customshieldsmissilemineflareup = function(delta)
   {
   if(this.ship &amp;&amp; this.ship.isValid)
      {
	  this.customshieldsframetime += delta;
	  if(this.customshieldsframetime &gt;= 0.1)//interval between to the next animation frame
	     {
		 this.customshieldsmissilemineexplosion = this.ship.spawnOne(&quot;customshieldsmissilemineflareupB&quot;);
         this.customshieldsmissilemineexplosion.position = this.ship.position;
		 this.customshieldsmissilemineexplosion.orientation = this.ship.orientation;
		 this.customshieldsmissilemineexplosion.velocity = this.ship.velocity;
		 removeFrameCallback(this.csmmfu);//----------
         this.ship.explode();		
         return;
		 }
      }
   else
      {
	  removeFrameCallback(this.csmmfu);//----------
      this.ship.remove();   
      return;
	  }
   }
</pre></td>
                </tr>
                <tr>
                    <td valign="top">Scripts/customshieldsmissilemineflareupB.js</td>
                    <td><pre>this.name        = &quot;customshieldsmissilemineflareupB&quot;; 
this.author      = &quot;CommonSenseOTB&quot;; 
this.copyright   = &quot;Copyright Sept. 24, 2012 by CommonSenseOTB, licensed under Creative Commons: attribution, non-commercial, sharealike with clauses - see readme.txt&quot;;
this.description = &quot;Script For Missile Mine Explosions&quot;; 
this.version     = &quot;0.83&quot;;

this.shipSpawned = function()
   {
   if(this.ship &amp;&amp; this.ship.isValid)
      {
      this.customshieldsframetime = 0.0;
      this.csmmfu = addFrameCallback(this.customshieldsmissilemineflareup.bind(this));//----------
      return;
	  }
   else
      {
	  this.ship.remove();
	  return;
	  }
   }
 
this.customshieldsmissilemineflareup = function(delta)
   {
   if(this.ship &amp;&amp; this.ship.isValid)
      {
	  this.customshieldsframetime += delta;
	  if(this.customshieldsframetime &gt;= 0.1)//interval between to the next animation frame
	     {
		 this.customshieldsmissilemineexplosion = this.ship.spawnOne(&quot;customshieldsmissilemineflareupC&quot;);
         this.customshieldsmissilemineexplosion.position = this.ship.position;
		 this.customshieldsmissilemineexplosion.orientation = this.ship.orientation;
		 this.customshieldsmissilemineexplosion.velocity = this.ship.velocity;
		 removeFrameCallback(this.csmmfu);//----------
         this.ship.explode();			 
         return;
		 }
      }
   else
      {
	  removeFrameCallback(this.csmmfu);//----------
      this.ship.remove();   
      return;
	  }
   }
</pre></td>
                </tr>
                <tr>
                    <td valign="top">Scripts/customshieldsmissilemineflareupC.js</td>
                    <td><pre>this.name        = &quot;customshieldsmissilemineflareupC&quot;; 
this.author      = &quot;CommonSenseOTB&quot;; 
this.copyright   = &quot;Copyright Sept. 24, 2012 by CommonSenseOTB, licensed under Creative Commons: attribution, non-commercial, sharealike with clauses - see readme.txt&quot;;
this.description = &quot;Script For Missile Mine Explosions&quot;; 
this.version     = &quot;0.83&quot;;

this.shipSpawned = function()
   {
   if(this.ship &amp;&amp; this.ship.isValid)
      {
      this.customshieldsframetime = 0.0;
      this.csmmfu = addFrameCallback(this.customshieldsmissilemineflareup.bind(this));//----------
      return;
	  }
   else
      {
	  this.ship.remove();
	  return;
	  }
   }

this.customshieldsmissilemineflareup = function(delta)
   {
   if(this.ship &amp;&amp; this.ship.isValid)
      {
	  this.customshieldsframetime += delta;
	  if(this.customshieldsframetime &gt;= 0.1)//interval between to the next animation frame
	     {
		 this.customshieldsmissilemineexplosion = this.ship.spawnOne(&quot;customshieldsmissilemineflareupD&quot;);
         this.customshieldsmissilemineexplosion.position = this.ship.position;
		 this.customshieldsmissilemineexplosion.orientation = this.ship.orientation;
		 this.customshieldsmissilemineexplosion.velocity = this.ship.velocity;
		 removeFrameCallback(this.csmmfu);//----------
         this.ship.explode();			 
         return;
		 }
      }
   else
      {
	  removeFrameCallback(this.csmmfu);//----------
      this.ship.remove();   
      return;
	  }
   }
</pre></td>
                </tr>
                <tr>
                    <td valign="top">Scripts/customshieldsmissilemineflareupD.js</td>
                    <td><pre>this.name        = &quot;customshieldsmissilemineflareupD&quot;; 
this.author      = &quot;CommonSenseOTB&quot;; 
this.copyright   = &quot;Copyright Sept. 24, 2012 by CommonSenseOTB, licensed under Creative Commons: attribution, non-commercial, sharealike with clauses - see readme.txt&quot;;
this.description = &quot;Script For Missile Mine Explosions&quot;; 
this.version     = &quot;0.83&quot;;

this.shipSpawned = function()
   {
   if(this.ship &amp;&amp; this.ship.isValid)
      {
      this.customshieldsframetime = 0.0;
      this.csmmfu = addFrameCallback(this.customshieldsmissilemineflareup.bind(this));//----------
      return;
	  }
   else
      {
	  this.ship.remove();
	  return;
	  }
   }

this.customshieldsmissilemineflareup = function(delta)
   {
   if(this.ship &amp;&amp; this.ship.isValid)
      {
	  this.customshieldsframetime += delta;
	  if(this.customshieldsframetime &gt;= 0.1)//interval between to the next animation frame
	     {
		 this.customshieldsmissilemineexplosion = this.ship.spawnOne(&quot;customshieldsmissilemineflareupE&quot;);
         this.customshieldsmissilemineexplosion.position = this.ship.position;
		 this.customshieldsmissilemineexplosion.orientation = this.ship.orientation;
		 removeFrameCallback(this.csmmfu);//----------
		 this.ship.explode();		 
         return;
		 }
      }
   else
      {
	  removeFrameCallback(this.csmmfu);//----------
      this.ship.remove();   
      return;
	  }
   }
</pre></td>
                </tr>
                <tr>
                    <td valign="top">Scripts/customshieldsmissilemineflareupE.js</td>
                    <td><pre>this.name        = &quot;customshieldsmissilemineflareupE&quot;; 
this.author      = &quot;CommonSenseOTB&quot;; 
this.copyright   = &quot;Copyright Sept. 24, 2012 by CommonSenseOTB, licensed under Creative Commons: attribution, non-commercial, sharealike with clauses - see readme.txt&quot;;
this.description = &quot;Script For Missile Mine Explosions&quot;; 
this.version     = &quot;0.83&quot;;

this.shipSpawned = function()
   {
   if(this.ship &amp;&amp; this.ship.isValid)
      {
      this.customshieldsframetime = 0.0;
      this.csmmfu = addFrameCallback(this.customshieldsmissilemineflareup.bind(this));//----------
      return;
	  }
   else
      {
	  this.ship.remove();
	  return;
	  }
   }

this.shipTakingDamage = function()
   {
   this.ship.energy = this.ship.maxEnergy;//restore energy
   }    
   
this.customshieldsmissilemineflareup = function(delta)
   {
   if(this.ship &amp;&amp; this.ship.isValid)
      {
	  this.customshieldsframetime += delta;
	  if(this.customshieldsframetime &gt;= 0.1)//interval between to the next animation frame
	     {
		 this.customshieldsmissilemineexplosion = this.ship.spawnOne(&quot;customshieldsmissilemineflareupF&quot;);
         this.customshieldsmissilemineexplosion.position = this.ship.position;
		 this.customshieldsmissilemineexplosion.orientation = this.ship.orientation;
		 removeFrameCallback(this.csmmfu);//----------
		 this.ship.remove();		 
         return;
		 }
      }
   else
      {
	  removeFrameCallback(this.csmmfu);//----------
      this.ship.remove();   
      return;
	  }
   }
</pre></td>
                </tr>
                <tr>
                    <td valign="top">Scripts/customshieldsmissilemineflareupF.js</td>
                    <td><pre>this.name        = &quot;customshieldsmissilemineflareupF&quot;; 
this.author      = &quot;CommonSenseOTB&quot;; 
this.copyright   = &quot;Copyright Sept. 24, 2012 by CommonSenseOTB, licensed under Creative Commons: attribution, non-commercial, sharealike with clauses - see readme.txt&quot;;
this.description = &quot;Script For Missile Mine Explosions&quot;; 
this.version     = &quot;0.83&quot;;

this.shipSpawned = function()
   {
   if(this.ship &amp;&amp; this.ship.isValid)
      {
      this.customshieldsframetime = 0.0;
      this.csmmfu = addFrameCallback(this.customshieldsmissilemineflareup.bind(this));//----------
      return;
	  }
   else
      {
	  this.ship.remove();
	  return;
	  }
   }

this.shipTakingDamage = function()
   {
   this.ship.energy = this.ship.maxEnergy;//restore energy
   }     
   
this.customshieldsmissilemineflareup = function(delta)
   {
   if(this.ship &amp;&amp; this.ship.isValid)
      {
	  this.customshieldsframetime += delta;
	  if(this.customshieldsframetime &gt;= 0.1)//interval between to the next animation frame
	     {
		 this.customshieldsmissilemineexplosion = this.ship.spawnOne(&quot;customshieldsmissilemineflareupG&quot;);
         this.customshieldsmissilemineexplosion.position = this.ship.position;
		 this.customshieldsmissilemineexplosion.orientation = this.ship.orientation;
		 removeFrameCallback(this.csmmfu);//----------
		 this.ship.remove();		 
         return;
		 }
      }
   else
      {
	  removeFrameCallback(this.csmmfu);//----------
      this.ship.remove();   
      return;
	  }
   }
</pre></td>
                </tr>
                <tr>
                    <td valign="top">Scripts/customshieldsmissilemineflareupG.js</td>
                    <td><pre>this.name        = &quot;customshieldsmissilemineflareupG&quot;; 
this.author      = &quot;CommonSenseOTB&quot;; 
this.copyright   = &quot;Copyright Sept. 24, 2012 by CommonSenseOTB, licensed under Creative Commons: attribution, non-commercial, sharealike with clauses - see readme.txt&quot;;
this.description = &quot;Script For Missile Mine Explosions&quot;; 
this.version     = &quot;0.83&quot;;

this.shipSpawned = function()
   {
   if(this.ship &amp;&amp; this.ship.isValid)
      {
      this.customshieldsframetime = 0.0;
      this.csmmfu = addFrameCallback(this.customshieldsmissilemineflareup.bind(this));//----------
      return;
	  }
   else
      {
	  this.ship.remove();
	  return;
	  }
   }

this.shipTakingDamage = function()
   {
   this.ship.energy = this.ship.maxEnergy;//restore energy
   }     
   
this.customshieldsmissilemineflareup = function(delta)
   {
   if(this.ship &amp;&amp; this.ship.isValid)
      {
	  this.customshieldsframetime += delta;
	  if(this.customshieldsframetime &gt;= 0.1)//interval between to the next animation frame
	     {
		 this.customshieldsmissilemineexplosion = this.ship.spawnOne(&quot;customshieldsmissilemineflareupH&quot;);
         this.customshieldsmissilemineexplosion.position = this.ship.position;
		 this.customshieldsmissilemineexplosion.orientation = this.ship.orientation;
		 removeFrameCallback(this.csmmfu);//----------
		 this.ship.remove();		 
         return;
		 }
      }
   else
      {
	  removeFrameCallback(this.csmmfu);//----------
      this.ship.remove();   
      return;
	  }
   }
</pre></td>
                </tr>
                <tr>
                    <td valign="top">Scripts/customshieldsmissilemineflareupH.js</td>
                    <td><pre>this.name        = &quot;customshieldsmissilemineflareupH&quot;; 
this.author      = &quot;CommonSenseOTB&quot;; 
this.copyright   = &quot;Copyright Sept. 24, 2012 by CommonSenseOTB, licensed under Creative Commons: attribution, non-commercial, sharealike with clauses - see readme.txt&quot;;
this.description = &quot;Script For Missile Mine Explosions&quot;; 
this.version     = &quot;0.83&quot;;

this.shipSpawned = function()
   {
   if(this.ship &amp;&amp; this.ship.isValid)
      {
      this.customshieldsframetime = 0.0;
      this.csmmfu = addFrameCallback(this.customshieldsmissilemineflareup.bind(this));//----------
      return;
	  }
   else
      {
	  this.ship.remove();
	  return;
	  }
   }

this.shipTakingDamage = function()
   {
   this.ship.energy = this.ship.maxEnergy;//restore energy
   }     
   
this.customshieldsmissilemineflareup = function(delta)
   {
   if(this.ship &amp;&amp; this.ship.isValid)
      {
	  this.customshieldsframetime += delta;
	  if(this.customshieldsframetime &gt;= 0.1)//interval between to the next animation frame
	     {
		 this.customshieldsmissilemineexplosion = this.ship.spawnOne(&quot;customshieldsmissilemineflareupI&quot;);
         this.customshieldsmissilemineexplosion.position = this.ship.position;
		 this.customshieldsmissilemineexplosion.orientation = this.ship.orientation;
		 removeFrameCallback(this.csmmfu);//----------
		 this.ship.remove();		 
         return;
		 }
      }
   else
      {
	  removeFrameCallback(this.csmmfu);//----------
      this.ship.remove();   
      return;
	  }
   }
</pre></td>
                </tr>
                <tr>
                    <td valign="top">Scripts/customshieldsmissilemineflareupI.js</td>
                    <td><pre>this.name        = &quot;customshieldsmissilemineflareupI&quot;; 
this.author      = &quot;CommonSenseOTB&quot;; 
this.copyright   = &quot;Copyright Sept. 24, 2012 by CommonSenseOTB, licensed under Creative Commons: attribution, non-commercial, sharealike with clauses - see readme.txt&quot;;
this.description = &quot;Script For Missile Mine Explosions&quot;; 
this.version     = &quot;0.83&quot;;

this.shipSpawned = function()
   {
   if(this.ship &amp;&amp; this.ship.isValid)
      {
      this.customshieldsframetime = 0.0;
      this.csmmfu = addFrameCallback(this.customshieldsmissilemineflareup.bind(this));//----------
      return;
	  }
   else
      {
	  this.ship.remove();
	  return;
	  }
   }

this.shipTakingDamage = function()
   {
   this.ship.energy = this.ship.maxEnergy;//restore energy
   }     
   
this.customshieldsmissilemineflareup = function(delta)
   {
   if(this.ship &amp;&amp; this.ship.isValid)
      {
	  this.customshieldsframetime += delta;
	  if(this.customshieldsframetime &gt;= 0.1)//interval between to the next animation frame
	     {
		 this.customshieldsmissilemineexplosion = this.ship.spawnOne(&quot;customshieldsmissilemineflareupJ&quot;);
         this.customshieldsmissilemineexplosion.position = this.ship.position;
		 this.customshieldsmissilemineexplosion.orientation = this.ship.orientation;
		 removeFrameCallback(this.csmmfu);//----------
		 this.ship.remove();		 
         return;
		 }
      }
   else
      {
	  removeFrameCallback(this.csmmfu);//----------
      this.ship.remove();   
      return;
	  }
   }
</pre></td>
                </tr>
                <tr>
                    <td valign="top">Scripts/customshieldsmissilemineflareupJ.js</td>
                    <td><pre>this.name        = &quot;customshieldsmissilemineflareupJ&quot;; 
this.author      = &quot;CommonSenseOTB&quot;; 
this.copyright   = &quot;Copyright Sept. 24, 2012 by CommonSenseOTB, licensed under Creative Commons: attribution, non-commercial, sharealike with clauses - see readme.txt&quot;;
this.description = &quot;Script For Missile Mine Explosions&quot;; 
this.version     = &quot;0.83&quot;;

this.shipSpawned = function()
   {
   if(this.ship &amp;&amp; this.ship.isValid)
      {
      this.customshieldsframetime = 0.0;
      this.csmmfu = addFrameCallback(this.customshieldsmissilemineflareup.bind(this));//----------
      return;
	  }
   else
      {
	  this.ship.remove();
	  return;
	  }
   }

this.shipTakingDamage = function()
   {
   this.ship.energy = this.ship.maxEnergy;//restore energy
   }     
   
this.customshieldsmissilemineflareup = function(delta)
   {
   if(this.ship &amp;&amp; this.ship.isValid)
      {
	  this.customshieldsframetime += delta;
	  if(this.customshieldsframetime &gt;= 0.1)//interval between to the next animation frame
	     {
		 removeFrameCallback(this.csmmfu);//----------
		 this.ship.remove();		 
         return;
		 }
      }
   else
      {
	  removeFrameCallback(this.csmmfu);//----------
      this.ship.remove();   
      return;
	  }
   }
</pre></td>
                </tr>
                <tr>
                    <td valign="top">Scripts/customshieldsplayershieldflash.js</td>
                    <td><pre>this.name        = &quot;customshieldsplayershieldflash&quot;; 
this.author      = &quot;CommonSenseOTB&quot;; 
this.copyright   = &quot;Copyright Sept. 24, 2012 by CommonSenseOTB, licensed under Creative Commons: attribution, non-commercial, sharealike with clauses - see readme.txt&quot;;
this.description = &quot;Script For Player Shield Flash&quot;; 
this.version     = &quot;0.83&quot;;

this.shipSpawned = function()
   {
   if(this.ship &amp;&amp; this.ship.isValid &amp;&amp; this.ship.target &amp;&amp; this.ship.target.isValid)
      {
      this.customshieldsimpactrelativepositioninterpolation = worldScripts[&quot;customshields&quot;].customshieldsimpactrelativepositioninterpolation;
	  this.ship.position = this.ship.target.position.add(this.customshieldsimpactrelativepositioninterpolation);
	  this.customshieldsframetime = 0.0;
	  this.cspsf = addFrameCallback(this.customshieldsplayershieldflash.bind(this));//----------
      return;
	  }
   else
      {
	  this.ship.remove();
	  return;
	  }
   }

this.shipTakingDamage = function()
   {
   this.ship.energy = this.ship.maxEnergy;//restore energy
   }  
   
this.customshieldsplayershieldflash = function(delta)
   {
   if(this.ship &amp;&amp; this.ship.isValid &amp;&amp; this.ship.target &amp;&amp; this.ship.target.isValid)
      {
	  this.ship.position = this.ship.target.position.add(this.customshieldsimpactrelativepositioninterpolation); 
	  this.customshieldsframetime += delta;
	  if(this.customshieldsframetime &gt;= 0.15)//length of time shield effect lasts
	     {
		 removeFrameCallback(this.cspsf);//----------
		 this.ship.remove();		 
         return;
		 }
      }
   else
      {
	  removeFrameCallback(this.cspsf);//----------
      this.ship.remove();   
      return;
	  }
   }
</pre></td>
                </tr>
                <tr>
                    <td valign="top">Scripts/customshieldsshieldflasher.js</td>
                    <td><pre>this.name        = &quot;customshieldsshieldflasher&quot;; 
this.author      = &quot;CommonSenseOTB&quot;; 
this.copyright   = &quot;Copyright Sept. 24, 2012 by CommonSenseOTB, licensed under Creative Commons: attribution, non-commercial, sharealike with clauses - see readme.txt&quot;;
this.description = &quot;Script For Shield Flashers&quot;; 
this.version     = &quot;0.83&quot;;

this.shipSpawned = function()
   {
   if(this.ship &amp;&amp; this.ship.isValid &amp;&amp; this.ship.target &amp;&amp; this.ship.target.isValid)
      {
	  if(this.ship.target.isPlayer)
	     {
		 this.customshieldsimpactrelativeposition = worldScripts[&quot;customshields&quot;].customshieldsimpactrelativeposition;
		 }
      else
	     {
	     this.customshieldsimpactrelativeposition = this.ship.target.script.customshieldsimpactrelativeposition;
		 }
	  this.ship.position = this.ship.target.position.add(this.customshieldsimpactrelativeposition);
	  this.customshieldsframetime = 0.0;
	  this.cssf = addFrameCallback(this.customshieldsshieldflasher.bind(this));//----------
      return;
	  }
   else
      {
	  this.ship.remove();
	  return;
	  }
   }

this.shipTakingDamage = function()
   {
   this.ship.energy = this.ship.maxEnergy;//restore energy
   }     
   
this.customshieldsshieldflasher = function(delta)
   {
   if(this.ship &amp;&amp; this.ship.isValid &amp;&amp; this.ship.target &amp;&amp; this.ship.target.isValid)
      {
	  this.ship.position = this.ship.target.position.add(this.customshieldsimpactrelativeposition); 
	  this.customshieldsframetime += delta;
	  if(this.customshieldsframetime &gt;= 0.15)//length of time shield effect lasts
	     {
		 removeFrameCallback(this.cssf);//----------
		 this.ship.remove();		 
         return;
		 }
      }
   else
      {
	  removeFrameCallback(this.cssf);//----------
      this.ship.remove();   
      return;
	  }
   }
</pre></td>
                </tr>
                <tr>
                    <td valign="top">Scripts/customshieldsshieldflasherflareup.js</td>
                    <td><pre>this.name        = &quot;customshieldsshieldflasherflareup&quot;; 
this.author      = &quot;CommonSenseOTB&quot;; 
this.copyright   = &quot;Copyright Sept. 24, 2012 by CommonSenseOTB, licensed under Creative Commons: attribution, non-commercial, sharealike with clauses - see readme.txt&quot;;
this.description = &quot;Script For Shield Flasher Flare Ups&quot;; 
this.version     = &quot;0.83&quot;;

this.shipSpawned = function()
   {
   if(this.ship &amp;&amp; this.ship.isValid &amp;&amp; this.ship.target &amp;&amp; this.ship.target.isValid)
      {
	  if(this.ship.target.isPlayer)
	     {
		 this.customshieldsimpactrelativeposition = worldScripts[&quot;customshields&quot;].customshieldsimpactrelativeposition;
		 }
      else
	     {
	     this.customshieldsimpactrelativeposition = this.ship.target.script.customshieldsimpactrelativeposition;
		 }
	  this.ship.position = this.ship.target.position.add(this.customshieldsimpactrelativeposition);
	  this.customshieldsframetime = 0.0;
	  this.cssffu = addFrameCallback(this.customshieldsshieldflasherflareup.bind(this));//----------
      return;
	  }
   else
      {
	  this.ship.remove();
	  return;
	  }
   }

this.shipTakingDamage = function()
   {
   this.ship.energy = this.ship.maxEnergy;//restore energy
   }  
   
this.customshieldsshieldflasherflareup = function(delta)
   {
   if(this.ship &amp;&amp; this.ship.isValid &amp;&amp; this.ship.target &amp;&amp; this.ship.target.isValid)
      {
	  this.ship.position = this.ship.target.position.add(this.customshieldsimpactrelativeposition); 
	  this.customshieldsframetime += delta;
	  if(this.customshieldsframetime &gt;= 0.45)//length of time shield effect lasts
	     {
		 removeFrameCallback(this.cssffu);//----------
		 this.ship.remove();		 
         return;
		 }
      }
   else
      {
	  removeFrameCallback(this.cssffu);//----------
      this.ship.remove();   
      return;
	  }
   }
</pre></td>
                </tr>
                <tr>
                    <td valign="top">Scripts/customshieldssparks.js</td>
                    <td><pre>this.name        = &quot;customshieldssparks&quot;; 
this.author      = &quot;CommonSenseOTB&quot;; 
this.copyright   = &quot;Copyright Sept. 24, 2012 by CommonSenseOTB, licensed under Creative Commons: attribution, non-commercial, sharealike with clauses - see readme.txt&quot;;
this.description = &quot;Sparks&quot;; 
this.version     = &quot;0.83&quot;;

this.shipSpawned = function()
   {
   if(this.ship &amp;&amp; this.ship.isValid)
      {
      this.ship.explode();
	  }
   else
      {
	  this.ship.remove();
	  return;
	  }
   } </pre></td>
                </tr>
                <tr>
                    <td valign="top">Scripts/customshieldssparksblownpanels.js</td>
                    <td><pre>this.name        = &quot;customshieldssparksblownpanels&quot;; 
this.author      = &quot;CommonSenseOTB&quot;; 
this.copyright   = &quot;Copyright Sept. 24, 2012 by CommonSenseOTB, licensed under Creative Commons: attribution, non-commercial, sharealike with clauses - see readme.txt&quot;;
this.description = &quot;Sparks and Blown Panels&quot;; 
this.version     = &quot;0.83&quot;;

this.shipSpawned = function()
   {
   if(this.ship &amp;&amp; this.ship.isValid)
      {
      var blownpanels = this.ship.spawnOne(&quot;customshieldsblownpanels&quot;);
      blownpanels.orientation = this.ship.orientation;
      blownpanels.velocity = this.ship.velocity;
      var sparks1 = this.ship.spawnOne(&quot;customshieldssparks&quot;);
	  sparks1.orientation = this.ship.orientation;
      sparks1.velocity = this.ship.velocity.add(sparks1.vectorForward.multiply(-25));
	  var sparks2 = this.ship.spawnOne(&quot;customshieldssparks&quot;);
	  sparks2.orientation = this.ship.orientation;
      sparks2.velocity = this.ship.velocity.add(sparks2.vectorForward.multiply(-25));
	  var sparks3 = this.ship.spawnOne(&quot;customshieldssparks&quot;);
	  sparks3.orientation = this.ship.orientation;
      sparks3.velocity = this.ship.velocity.add(sparks3.vectorForward.multiply(-25));
      this.ship.explode();
	  }
   else
      {
	  this.ship.remove();
	  return;
	  }	  
   }</pre></td>
                </tr>
                <tr>
                    <td valign="top">Scripts/customshieldssparksfuelleaks.js</td>
                    <td><pre>this.name        = &quot;customshieldssparksfuelleaks&quot;; 
this.author      = &quot;CommonSenseOTB&quot;; 
this.copyright   = &quot;Copyright Sept. 24, 2012 by CommonSenseOTB, licensed under Creative Commons: attribution, non-commercial, sharealike with clauses - see readme.txt&quot;;
this.description = &quot;Script For Spawning Fuel Leaks&quot;; 
this.version     = &quot;0.83&quot;;

this.shipSpawned = function()
   {
   if(this.ship &amp;&amp; this.ship.isValid &amp;&amp; this.ship.target &amp;&amp; this.ship.target.isValid)
      {
	  if(this.ship.target.isPlayer)
	     {
		 //message fuel leak here for player
		 //might have to use the player fuel leak command here instead to activate the built in warnings
		 player.consoleMessage(&quot;HULL BREACH! Fuel leak detected&quot;, 4);
		 this.customshieldsimpactrelativeposition = worldScripts[&quot;customshields&quot;].customshieldsimpactrelativeposition;
		 }
      else
	     {
	     this.customshieldsimpactrelativeposition = this.ship.target.script.customshieldsimpactrelativeposition;
		 }
	  this.ship.position = this.ship.target.position.add(this.customshieldsimpactrelativeposition);	  
      this.customshieldsdirectionfuelleak = this.ship.position.subtract(this.ship.target.position).direction();
	  this.ship.orientation = this.customshieldsdirectionfuelleak.rotationTo([0, 0, 1]);
	  this.customshieldsframetime = 0.0;
	  this.customshieldsframetimefuelcounter = 1.0;
	  this.ship.spawnOne(&quot;customshieldsdamage&quot;);
	  this.ship.spawnOne(&quot;customshieldssparks&quot;);
      this.ship.spawnOne(&quot;customshieldssparks&quot;);
      this.ship.spawnOne(&quot;customshieldsblownpanels&quot;);
      this.ship.spawnOne(&quot;customshieldssparks&quot;);
      this.ship.spawnOne(&quot;customshieldssparks&quot;);
      this.ship.spawnOne(&quot;customshieldsblownpanels&quot;);
	  this.cssfl = addFrameCallback(this.customshieldssparksfuelleaks.bind(this));//----------
      return;
	  }
   else
      {
	  this.ship.remove();
	  return;
	  }
   }

this.shipTakingDamage = function()
   {
   this.ship.energy = this.ship.maxEnergy;//restore energy
   }     
   
this.customshieldssparksfuelleaks = function(delta)
   {
   if(this.ship &amp;&amp; this.ship.isValid &amp;&amp; this.ship.target &amp;&amp; this.ship.target.isValid)
      {
	  this.ship.position = this.ship.target.position.add(this.customshieldsimpactrelativeposition);
	  this.customshieldsdirectionfuelleak = this.ship.position.subtract(this.ship.target.position).direction();
	  this.ship.orientation = this.customshieldsdirectionfuelleak.rotationTo([0, 0, 1]);
	  this.customshieldsframetime += delta;
	  if(this.ship.target.fuel &lt; 0.1)//when out of fuel stop spawning it
	     {
		 removeFrameCallback(this.cssfl);//----------
		 this.ship.remove();		 
         return;
		 }
	  if(this.customshieldsframetime &gt;= 0.1)//length of time between spawning fuel
	     {
		 this.customshieldsframetime = 0.0;//reset for next spawning
		 this.customshieldsframetimefuelcounter += 1.0;
		 if(this.customshieldsframetimefuelcounter &gt;= 4.0)//3 clouds for every 0.1 ly of fuel
		    {
			this.customshieldsframetimefuelcounter = 1.0;
			this.ship.target.fuel -= 0.1;//remove fuel from leaking ship
			}
		 if(this.ship.target.fuel &gt; 5.0)
		    {
			this.customshieldshighfuel = this.ship.spawnOne(&quot;customshieldsfuelleakshigh&quot;);
			this.customshieldshighfuel.orientation = this.ship.orientation;
            this.customshieldshighfuel.target = this.ship.target;
			return;
			}
         if(this.ship.target.fuel &gt; 2.0)
		    {
			this.customshieldsmediumfuel = this.ship.spawnOne(&quot;customshieldsfuelleaksmedium&quot;);
			this.customshieldsmediumfuel.orientation = this.ship.orientation;
            this.customshieldsmediumfuel.target = this.ship.target;
			return;
			}
         if(this.ship.target.fuel &gt; 0.1)
		    {
			this.customshieldslowfuel = this.ship.spawnOne(&quot;customshieldsfuelleakslow&quot;);
			this.customshieldslowfuel.orientation = this.ship.orientation;
            this.customshieldslowfuel.target = this.ship.target;
			return;
			}
         return;
		 }
      return;
      }
   else
      {
	  removeFrameCallback(this.cssfl);//----------
      this.ship.remove();   
      return;
	  }
   }
</pre></td>
                </tr>
            </table>
        </a>
    </body>
</html>
