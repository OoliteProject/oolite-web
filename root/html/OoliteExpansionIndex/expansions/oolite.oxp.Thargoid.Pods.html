<html>
    <head>
        <title>Expansion Pods</title>
        <link rel="stylesheet" href="../style.css">
    </head>
    <body>
        <table border="0" width="100%">
            <tr>
                <td>Back to <a href='../index.html'>Index</a></td>
                <td align="right"><small>Page generated: Oct 11, 2023, 3:16:49 PM</small></td>
            </tr>
        </table>

        <h1>Expansion Pods</h1>

        <h2>Content</h2>
        <ul>
          <li><a href="#warnings">Warnings</a></li>
          <li><a href="#manifest">Manifest</a></li>
          <li><a href="#documentation">Documentation</a></li>
          <li><a href="#equipment">0 Equipment</a></li>
          <li><a href="#ships">79 Ships</a></li>
          <li><a href="#models">0 Models</a></li>
          <li><a href="#scripts">16 Scripts</a></li>
        </ul>

          <a name="warnings">
            <h2>Warnings</h2>
            <ol>
                <li>Category mismatch between OXP Manifest and Expansion Manager string length at character position 0</li>
                <li>Tags mismatch between OXP Manifest and Expansion Manager at character position 0002 (RIGHT SQUARE BRACKET vs LATIN SMALL LETTER M)(&#39;[]&#39; vs &#39;[mechanics, cargopods]&#39;)</li>
                <li>Unknown key &#39;upload_date&#39; at https://wiki.alioth.net/img_auth.php/4/4f/Oolite.oxp.Thargoid.Pods.1.48.oxz!manifest.plist</li>
            </ol>
          </a>

        <a name="manifest">
        <h2>Manifest</h2>
            <table border="1">
                <tr>
                    <th></th>
                    <th>from Expansion Manager's OXP list</th>
                    <th>from Expansion Manifest</th>
                </tr>
                <tr>
                    <td>Description</td>
                    <td>New cargo pods and pod features.</td>
                    <td>New cargo pods and pod features.</td>
                </tr>
                <tr>
                    <td>Identifier</td>
                    <td>oolite.oxp.Thargoid.Pods</td>
                    <td>oolite.oxp.Thargoid.Pods</td>
                </tr>
                <tr>
                    <td>Title</td>
                    <td>Pods</td>
                    <td>Pods</td>
                </tr>
                <tr>
                    <td>Category</td>
                    <td></td>
                    <td></td>
                </tr>
                <tr>
                    <td>Author</td>
                    <td>Thargoid, Rustem, Milo</td>
                    <td>Thargoid, Rustem, Milo</td>
                </tr>
                <tr>
                    <td>Version</td>
                    <td>1.48</td>
                    <td>1.48</td>
                </tr>
                <tr>
                    <td>Tags</td>
                    <td></td>
                    <td>mechanics, cargopods</td>
                </tr>
                <tr>
                    <td>Required Oolite Version</td>
                    <td></td>
                    <td></td>
                </tr>
                <tr>
                    <td>Maximum Oolite Version</td>
                    <td></td>
                    <td></td>
                </tr>
                <tr>
                    <td>Required Expansions</td>
                    <td>
                    </td>
                    <td>
                    </td>
                </tr>
                <tr>
                    <td>Optional Expansions</td>
                    <td>
                    </td>
                    <td>
                    </td>
                </tr>
                <tr>
                    <td>Conflict Expansions</td>
                    <td>
                    </td>
                    <td>
                    </td>
                </tr>
                <tr>
                    <td>Information URL</td>
                    <td><a target="_blank" href="http://wiki.alioth.net/index.php/Pods_OXP">http://wiki.alioth.net/index.php/Pods_OXP</a></td>
                    <td><a target="_blank" href="">n/a</a></td>
                </tr>
                <tr>
                    <td>Download URL</td>
                    <td><a target="_blank" href="https://wiki.alioth.net/img_auth.php/4/4f/Oolite.oxp.Thargoid.Pods.1.48.oxz">https://wiki.alioth.net/img_auth.php/4/4f/Oolite.oxp.Thargoid.Pods.1.48.oxz</a></td>
                    <td><a target="_blank" href="http://wiki.alioth.net/img_auth.php/d/d3/Pods.oxz">http://wiki.alioth.net/img_auth.php/d/d3/Pods.oxz</a></td>
                </tr>
                <tr>
                    <td>License</td>
                    <td>CC-BY-NC-SA 3.0</td>
                    <td>CC-BY-NC-SA 3.0</td>
                </tr>
                <tr>
                    <td>File Size</td>
                    <td>n/a</td>
                </tr>
                <tr>
                    <td>Upload date</td>
                    <td>1610873299</td>
                </tr>
            </table>
                </a>

        <a name="documentation">
        <h2>Documentation</h2>
        <p>Also read <a href='http://wiki.alioth.net/index.php/Pods'>http://wiki.alioth.net/index.php/Pods</a></p>
        <h3>ReadMe &amp; License.txt</h3>
        <pre>Pods OXP by Thargoid.

A small OXP to widen the range of native cargo pods available in the game. I&#39;ve tried to be balanced with the additions, some are player-positive, some player-negative. All are low probability, but any standard pod appearing in the game could be one of these.

--------------------------------------------------------------

License:

This OXP is released under the Creative Commons Attribution - Non-Commercial - Share Alike 3.0 license with the following clauses:

* Whilst you are free (and encouraged) to re-use any of the scripting, models or texturing in this OXP, the usage must be distinct from that within this OXP. Unique identifiers such as (but not limited to) unique shipdata.plist entity keys, mission variables, script names (this.name), equipment identity strings (EQ_), description list arrays and entity roles must not be re-used without prior agreement. Basically if it&#39;s unique or would identify or overwrite anything in the original OXP, then you may not re-use it (for obvious compatibility reasons).
* rebundling of this OXP within another distribution is permitted as long as it is unchanged. The following derivates however are permitted and except from the above:
	* the conversion of files between XML and openStep.
	* the merging of files with other files of the same type from other OXPs.
* The license information (either as this file or merged into a larger one) must be included in the OXP.
* Even though it is not compulsory, if you are re-using any sizable or recognisable piece of this OXP, please let me know :)

--------------------------------------------------------------
Pods:

Nice:

* Bulk container - larger capacity pod, featuring up to 10 tons of cargo, 100 kilos of metals (gold/platinum) or 200 grammes of gem-stones.
* Missile pod - again exactly what it says, a missile that can be scooped and added to your arsenal (if you have a free pylon). Usually standard missiles, but sometimes ECM hardened ones for the lucky commander.
* Missile pod - if you not have a free pylon. Then a missile pod will scooped as firearms. If you have a free pylon and it has been scooped missile pod to the cargohold. If you like, so you can dumping a firearms and scooped for mount to pylon.
* Fuel pod - similar in nature to the external fuel tank, a pod which can carry up to 3.0 ly of witchspace fuel for your thirsty tanks. Occasionally the fuel has been known to be contaminated, requiring a tank purge.
* Piggybank pod - some poor soul&#39;s personal effects, including their life savings of up to 1000 credits.


Less so:

* Empty pod - exactly what it says, either an empty pod or one full of worthless content.
* Trumble pod - pod containing everyone&#39;s favourite burger ingredient.
* Retry pod - a little annoyance, a pod that doesn&#39;t quite scoop right. If all else fails, try try again...
* Jam pod - no, not a pod full of jam, but when a pod tries to go through a fuel scoop sideways. Pod jams in the scoop, rendering it inoperable until a friendly tech can apply a pry-bar to it in dry-dock.
* Exploding pod - pod explodes within the ship&#39;s shields during scooping. Energy damage done to the ship, and fuel scoops destroyed.
* Breach pod - pod explodes in hold, causing hull breach. Some cargo may be vented before breach can be repaired.

--------------------------------------------------------------

Instructions:

Place the OXZ file in the AddOns directory of your Oolite installation.

--------------------------------------------------------------

Version history:

 19/08/2008 - Version 0.20, Beta-test release version.
 22/08/2008 - version 1.00, Full release, now with Trumble, piggybank, breach and exploding pods added.
 31/08/2008 - version 1.01, minor bug fix for the fuel pods fuel leak.
 04/11/2008 - Version 1.02, scripting update for compatability with v1.72.
 09/04/2009 - Version 1.03, script tidy-up to prevent error for awarding cargo when hold full. Also tweaked trumblepod.
 01/11/2009 - Version 1.10, update to add scanclass and some new roles to the pods.
 18/03/2010 - Version 1.20, update for v1.74 (not compatible with lower versions).
 13/02/2011 - Version 1.21, removal of upper limit, to allow running with 1.75
 19/02/2011 - Version 1.22, correction of Manifest / manifest script glitch
 10/07/2012 - Version 1.30, merged pods and pods_UPS into one, and updated breachpod script (thanks to Eric W). Also added new variants for the standard 1t pods.
 10/12/2012 - Version 1.31, fixed a few case sensitivity issues for non-Windows OS&#39;s.
 12/12/2012 - Version 1.32, and a few more I missed before.
 22/12/2012 - Version 1.33, sorted out some [%I] references in description.plist (again thanks Eric!).
 20/01/2013 - Version 1.34, fixed a couple more references I missed last time (yet again thanks to Eric).
 07/02/2013 - Version 1.35, added a rogue &quot;s&quot; back into the big kg script (thanks to Plisken for that one!).

 12/09/2017 - Version 1.36 : update for oolite v1.79 - cag and rustem.
 - Added logging for error cargo type in pods_standardPod.js.
 - Edited name of the cargo type in description.plist and script for pods_standardPod.
 - Edited the scripts: correct name decsriptions, sometimes increased time for display consoleMessage.
 - Edited the shipdata: for pods_emptyBarrel (and pods_UPS_emptyBarrel) decreased value role of the cargopod from 0.1(0.12) to 0.005.
 - Edited the shipdata: for pods_missileBarrel decreased value role of the cargopod from 0.05 to 0.005.
 - Edited the shipdata: for all standart pods decreased value role of the cargopod from 0.5 to 0.05.
 - Added damage sounds to Jam, Exploding and Breach pods.

 14/09/2017 - Version 1.37, updated by Rustem
 - Added &quot;use strict&quot; in the scripts.
 - Improvement of damage sound effect for the correspond pods (thanks cag!).
 - Add time interval for display consoleMessage of Jam pod (again thanks cag!).

 19/09/2017 - Version 1.38, updated by Rustem
 - Fixed: replaced hasScoopMessages on the has_scoop_message in the shipdata.
 - Added no has_scoop_message to: fuelPod, emptyPod, retryPod, jamPod, missilePod, explodingPod, trumblePod (and UPS version also).

 23/10/2017 - Version 1.39, updated by Rustem
 - Added worldScript for storing all the resources. Added timer for exploding and breach pods (thanks cag!).
 - Added group roles as brokenpod, bigpod, dampod for application in the other OXPs. Added group role names from UPS Courier OXP.
 - Rebalanced role weights.
 - New calculation of the credits for piggybank pod.

 27/10/2017 - Version 1.40, updated by Rustem
 - Resorting and optimization by template pods in the shipdata.plist.
 - Added cargopod(hexapod) from CargoWreck OXP like external dependency as broken pods.
 - Edited group role names for standart pods.

 30/10/2017 - Version 1.41, updated by Rustem
 - Added big pod(ccl_crateA) and broken pods(ccl_crateB) for cargopod from Svengali CCL OXP like external dependency.
 - Added model scale factor to big pods.
 - Fixed shipdata bug for external pods.

 18/11/2017 - Version 1.42, updated by Rustem
 - Added a routine for checking a setCargo by other OXPs and etc.
 - Added logging condition in the pod ship.script.

 21/11/2017 - Version 1.43, updated by Rustem
 - Code refactoring: released an one script for Bulk container with NPC-scooping feature.
 - Added a routine for checking a shipUniqueName for renew of the pod name (for cargo scanner).
 - Modified the missilePod script for player-rescooping.
 - Upgraded all scripts for NPC-scooping.

 01/12/2017 - Version 1.44, updated by Rustem
 - Added description for communicate.
 - Fixed bug in the addition cargo to NPC.
 - Code refactoring.

 16/12/2018 - Version 1.45, updated by Rustem
 - Logging is off.
 - Formatted the JS code: scripts.
 - Fixed ship script for trumble pod (a TypeError for player.awardEquipment in pods_standardPod-1t, pods_trumblePod).
 - Tweaks in shipdata.plist, adds a materials for missilePod, adds a standartpod role.
 - Upgraded a scripts for trumblePod.

 20/12/2018 - Version 1.46, updated by Rustem
 - Adds cargopods from the Griff Cargopods OXP as standart pod and piggybank pod.
 - Reduce chance to award a trumble in the trumble pod.
 - Code refactoring of the trumblepod-scooping.

 10/07/2020 - Version 1.47, updated by Milo
 - Fixed errors in the scripts for the breach pod, jam pod, and exploding pod.

 12/07/2020 - Version 1.48, updated by Milo
 - Fixed another error in the script for the exploding pod.
 
// TODO: Add jamming Bulk container.
</pre>
        </a>

        <a name="equipment">          
        <h2>Equipment</h2>
            This expansion declares no equipment. This may be related to warnings.
        </a>

        <a name="ships">    
        <h2>Ships</h2>
            <table>
                <tr>
                    <th>Name</th>
                </tr>
                <tr>
                    <td><a href="../ships/barrel_pods_template.html">barrel_pods_template</a></td>
                </tr>
                <tr>
                    <td><a href="../ships/pods_CCL_1tBarrel.html">pods_CCL_1tBarrel</a></td>
                </tr>
                <tr>
                    <td><a href="../ships/pods_CCL_bigBarrel_t.html">Bulk Container</a></td>
                </tr>
                <tr>
                    <td><a href="../ships/pods_CCL_breachBarrel.html">pods_CCL_breachBarrel</a></td>
                </tr>
                <tr>
                    <td><a href="../ships/pods_CCL_emptyBarrel.html">pods_CCL_emptyBarrel</a></td>
                </tr>
                <tr>
                    <td><a href="../ships/pods_CCL_explodingBarrel.html">pods_CCL_explodingBarrel</a></td>
                </tr>
                <tr>
                    <td><a href="../ships/pods_CCL_jamBarrel.html">pods_CCL_jamBarrel</a></td>
                </tr>
                <tr>
                    <td><a href="../ships/pods_CCL_piggybankBarrel.html">pods_CCL_piggybankBarrel</a></td>
                </tr>
                <tr>
                    <td><a href="../ships/pods_CCL_retryBarrel.html">pods_CCL_retryBarrel</a></td>
                </tr>
                <tr>
                    <td><a href="../ships/pods_CCL_templateBarrel.html">pods_CCL_templateBarrel</a></td>
                </tr>
                <tr>
                    <td><a href="../ships/pods_CCL_trumbleBarrel.html">pods_CCL_trumbleBarrel</a></td>
                </tr>
                <tr>
                    <td><a href="../ships/pods_CWT_breachBarrel.html">pods_CWT_breachBarrel</a></td>
                </tr>
                <tr>
                    <td><a href="../ships/pods_CWT_emptyBarrel.html">pods_CWT_emptyBarrel</a></td>
                </tr>
                <tr>
                    <td><a href="../ships/pods_CWT_explodingBarrel.html">pods_CWT_explodingBarrel</a></td>
                </tr>
                <tr>
                    <td><a href="../ships/pods_CWT_jamBarrel.html">pods_CWT_jamBarrel</a></td>
                </tr>
                <tr>
                    <td><a href="../ships/pods_CWT_piggybankBarrel.html">pods_CWT_piggybankBarrel</a></td>
                </tr>
                <tr>
                    <td><a href="../ships/pods_CWT_retryBarrel.html">pods_CWT_retryBarrel</a></td>
                </tr>
                <tr>
                    <td><a href="../ships/pods_CWT_trumbleBarrel.html">pods_CWT_trumbleBarrel</a></td>
                </tr>
                <tr>
                    <td><a href="../ships/pods_CWTa_1tBarrel.html">pods_CWTa_1tBarrel</a></td>
                </tr>
                <tr>
                    <td><a href="../ships/pods_CWTa_templateBarrel.html">pods_CWTa_templateBarrel</a></td>
                </tr>
                <tr>
                    <td><a href="../ships/pods_CWTb_1tBarrel.html">pods_CWTb_1tBarrel</a></td>
                </tr>
                <tr>
                    <td><a href="../ships/pods_CWTb_templateBarrel.html">pods_CWTb_templateBarrel</a></td>
                </tr>
                <tr>
                    <td><a href="../ships/pods_CWTc_1tBarrel.html">pods_CWTc_1tBarrel</a></td>
                </tr>
                <tr>
                    <td><a href="../ships/pods_CWTc_templateBarrel.html">pods_CWTc_templateBarrel</a></td>
                </tr>
                <tr>
                    <td><a href="../ships/pods_GCP_A.html">pods_GCP_A</a></td>
                </tr>
                <tr>
                    <td><a href="../ships/pods_GCP_AW.html">pods_GCP_AW</a></td>
                </tr>
                <tr>
                    <td><a href="../ships/pods_GCP_B.html">pods_GCP_B</a></td>
                </tr>
                <tr>
                    <td><a href="../ships/pods_GCP_BW.html">pods_GCP_BW</a></td>
                </tr>
                <tr>
                    <td><a href="../ships/pods_GCP_C.html">pods_GCP_C</a></td>
                </tr>
                <tr>
                    <td><a href="../ships/pods_GCP_CW.html">pods_GCP_CW</a></td>
                </tr>
                <tr>
                    <td><a href="../ships/pods_GCP_D.html">pods_GCP_D</a></td>
                </tr>
                <tr>
                    <td><a href="../ships/pods_GCP_DW.html">pods_GCP_DW</a></td>
                </tr>
                <tr>
                    <td><a href="../ships/pods_GCP_E.html">pods_GCP_E</a></td>
                </tr>
                <tr>
                    <td><a href="../ships/pods_GCP_EW.html">pods_GCP_EW</a></td>
                </tr>
                <tr>
                    <td><a href="../ships/pods_GCP_F.html">pods_GCP_F</a></td>
                </tr>
                <tr>
                    <td><a href="../ships/pods_GCP_FW.html">pods_GCP_FW</a></td>
                </tr>
                <tr>
                    <td><a href="../ships/pods_GCP_G.html">pods_GCP_G</a></td>
                </tr>
                <tr>
                    <td><a href="../ships/pods_GCP_GW.html">pods_GCP_GW</a></td>
                </tr>
                <tr>
                    <td><a href="../ships/pods_GCP_H.html">pods_GCP_H</a></td>
                </tr>
                <tr>
                    <td><a href="../ships/pods_GCP_HW.html">pods_GCP_HW</a></td>
                </tr>
                <tr>
                    <td><a href="../ships/pods_GCP_alt_piggybankBarrel.html">pods_GCP_alt_piggybankBarrel</a></td>
                </tr>
                <tr>
                    <td><a href="../ships/pods_GCP_alt_templateBarrel.html">pods_GCP_alt_templateBarrel</a></td>
                </tr>
                <tr>
                    <td><a href="../ships/pods_GCP_piggybankBarrel.html">pods_GCP_piggybankBarrel</a></td>
                </tr>
                <tr>
                    <td><a href="../ships/pods_GCP_templateBarrel.html">pods_GCP_templateBarrel</a></td>
                </tr>
                <tr>
                    <td><a href="../ships/pods_UPS_1tBarrel_1.html">pods_UPS_1tBarrel_1</a></td>
                </tr>
                <tr>
                    <td><a href="../ships/pods_UPS_1tBarrel_2.html">pods_UPS_1tBarrel_2</a></td>
                </tr>
                <tr>
                    <td><a href="../ships/pods_UPS_barrel_template.html">pods_UPS_barrel_template</a></td>
                </tr>
                <tr>
                    <td><a href="../ships/pods_UPS_breachBarrel.html">pods_UPS_breachBarrel</a></td>
                </tr>
                <tr>
                    <td><a href="../ships/pods_UPS_emptyBarrel.html">pods_UPS_emptyBarrel</a></td>
                </tr>
                <tr>
                    <td><a href="../ships/pods_UPS_explodingBarrel.html">pods_UPS_explodingBarrel</a></td>
                </tr>
                <tr>
                    <td><a href="../ships/pods_UPS_jamBarrel.html">pods_UPS_jamBarrel</a></td>
                </tr>
                <tr>
                    <td><a href="../ships/pods_UPS_piggybankBarrel.html">pods_UPS_piggybankBarrel</a></td>
                </tr>
                <tr>
                    <td><a href="../ships/pods_UPS_retryBarrel.html">pods_UPS_retryBarrel</a></td>
                </tr>
                <tr>
                    <td><a href="../ships/pods_UPS_trumbleBarrel.html">pods_UPS_trumbleBarrel</a></td>
                </tr>
                <tr>
                    <td><a href="../ships/pods_alloysBarrel.html">pods_alloysBarrel</a></td>
                </tr>
                <tr>
                    <td><a href="../ships/pods_bigBarrel_gems.html">pods_bigBarrel_gems</a></td>
                </tr>
                <tr>
                    <td><a href="../ships/pods_bigBarrel_kg.html">pods_bigBarrel_kg</a></td>
                </tr>
                <tr>
                    <td><a href="../ships/pods_bigBarrel_t.html">Bulk Container</a></td>
                </tr>
                <tr>
                    <td><a href="../ships/pods_breachBarrel.html">pods_breachBarrel</a></td>
                </tr>
                <tr>
                    <td><a href="../ships/pods_computersBarrel.html">pods_computersBarrel</a></td>
                </tr>
                <tr>
                    <td><a href="../ships/pods_emptyBarrel.html">pods_emptyBarrel</a></td>
                </tr>
                <tr>
                    <td><a href="../ships/pods_explodingBarrel.html">pods_explodingBarrel</a></td>
                </tr>
                <tr>
                    <td><a href="../ships/pods_firearmsBarrel.html">pods_firearmsBarrel</a></td>
                </tr>
                <tr>
                    <td><a href="../ships/pods_foodBarrel.html">pods_foodBarrel</a></td>
                </tr>
                <tr>
                    <td><a href="../ships/pods_fuelBarrel.html">Fuel Tank</a></td>
                </tr>
                <tr>
                    <td><a href="../ships/pods_fursBarrel.html">pods_fursBarrel</a></td>
                </tr>
                <tr>
                    <td><a href="../ships/pods_jamBarrel.html">pods_jamBarrel</a></td>
                </tr>
                <tr>
                    <td><a href="../ships/pods_liquorWinesBarrel.html">pods_liquorWinesBarrel</a></td>
                </tr>
                <tr>
                    <td><a href="../ships/pods_luxuriesBarrel.html">pods_luxuriesBarrel</a></td>
                </tr>
                <tr>
                    <td><a href="../ships/pods_machineryBarrel.html">pods_machineryBarrel</a></td>
                </tr>
                <tr>
                    <td><a href="../ships/pods_mineralsBarrel.html">pods_mineralsBarrel</a></td>
                </tr>
                <tr>
                    <td><a href="../ships/pods_missileBarrel.html">Unarmed Missile</a></td>
                </tr>
                <tr>
                    <td><a href="../ships/pods_narcoticsBarrel.html">pods_narcoticsBarrel</a></td>
                </tr>
                <tr>
                    <td><a href="../ships/pods_piggyBankBarrel.html">pods_piggyBankBarrel</a></td>
                </tr>
                <tr>
                    <td><a href="../ships/pods_radioactivesBarrel.html">pods_radioactivesBarrel</a></td>
                </tr>
                <tr>
                    <td><a href="../ships/pods_retryBarrel.html">pods_retryBarrel</a></td>
                </tr>
                <tr>
                    <td><a href="../ships/pods_slavesBarrel.html">pods_slavesBarrel</a></td>
                </tr>
                <tr>
                    <td><a href="../ships/pods_textileBarrel.html">pods_textileBarrel</a></td>
                </tr>
                <tr>
                    <td><a href="../ships/pods_trumbleBarrel.html">pods_trumbleBarrel</a></td>
                </tr>
            </table>
        </a>

        <a name="models">    
        <h2>Models</h2>
            This expansion declares no models. This may be related to warnings.
        </a>

        <a name="scripts">    
        <h2>Scripts</h2>
            <table>
                <tr>
                    <th>Path</th>
                </tr>
                <tr>
                    <td valign="top">Scripts/pods.js</td>
                    <td><pre>this.name 			= &quot;pods&quot;;
this.author 		= &quot;rustem, cag, Thargoid&quot;;
this.copyright 		= &quot;2020 Creative Commons: attribution, non-commercial, sharealike.&quot;;
this.description 	= &quot;Central script for storing all the resources (timers &amp; sounds) and functions and all the pod scripts refer to it using a direct reference.&quot;;

this.logging = false; // false for release

this.npc_message = true; // for switch npc-message

(function () {
	&quot;use strict&quot;;

	this.$direct_hit_sound = null; // store object ref for sound effects
	this.$warning_sound = null;

	this.$msgTimer = this.$msgTimerJam = this.$msgTimerExp = this.$msgTimerBrh = null; // store timer ref
	this.$hullBreachTimer = this.$removeCargoTimer = null;
	this.$eqpTimer = null;

	this.$message = this.$scooper = []; //&quot;&quot; / []; // WAIT: optimal work for worldScripts.pods?
	this.$msgJam = this.$msgExp = this.$msgBrh = [];
	this.$scrJam = this.$scrExp = this.$scrBrh = [];
	this.$equip = &quot;&quot;;
	this.$drship = this.$drcargo = &quot;&quot;;
	this.$deqlog = this.$drlog = null;

	// these declarations are not really necessary, unless you rely on their initial value
	// but it&#39;s a good way to document your code

	this.startUp = function () {
		var wp = worldScripts.pods;

		// initialize sound effects
		wp.$direct_hit_sound = new SoundSource();
		wp.$direct_hit_sound.loop = false;
		wp.$direct_hit_sound.sound = &quot;[player-direct-hit]&quot;;

		wp.$warning_sound = new SoundSource();
		wp.$warning_sound.loop = false;
		wp.$warning_sound.sound = &quot;[@warning]&quot;;

		//wp.$initialiseTimer();
		//wp.$hullBreachTimer = new Timer(wp, wp.$hullBreach,14,14) // default + delay / 10 + 4
		//wp.$hullBreachTimer.stop();
		//if (wp.logging) log(this.name, &quot;setup hullBreach timer for worldScripts&quot;);
	}

	this.shipWillDockWithStation = this.shipEnteredWitchspace = function () {
		// stop timers
		var wp = worldScripts.pods;
		if (wp.$msgTimer &amp;&amp; wp.$msgTimer.isRunning)
			wp.$msgTimer.stop();
		if (wp.$msgTimerJam &amp;&amp; wp.$msgTimerJam.isRunning)
			wp.$msgTimerJam.stop();
		if (wp.$msgTimerExp &amp;&amp; wp.$msgTimerExp.isRunning)
			wp.$msgTimerExp.stop();
		if (wp.$msgTimerBrh &amp;&amp; wp.$msgTimerBrh.isRunning)
			wp.$msgTimerBrh.stop();
		if (wp.$hullBreachTimer &amp;&amp; wp.$hullBreachTimer.isRunning)
			wp.$hullBreachTimer.stop();
		if (wp.$removeCargoTimer &amp;&amp; wp.$removeCargoTimer.isRunning)
			wp.$removeCargoTimer.stop();
		if (wp.$eqpTimer &amp;&amp; wp.$eqpTimer.isRunning)
			wp.$eqpTimer.stop();
		
		// used by player only
		if (wp.$direct_hit_sound.isPlaying)
			wp.$direct_hit_sound.stop();
		if (wp.$warning_sound.isPlaying)
			wp.$warning_sound.stop();

		// used by NPC-ship
		// var sc = this.ship.script; // scr ~ scooper
		// WAIT: clean up timers and etc.
		// delete sc.$msgTimerBrh;
		// delete sc.$hullBreachTimer;
		// sc.$msgBrh = sc.$scrBrh = [];
		// if (sc._delayedMsg_breachPod) { delete sc._delayedMsg_breachPod; }
	}

	//this.shipExitedWitchspace = function () {
	// WAIT: clearing message and scooper arrays

	//this.$message = this.$scooper = [];
	//this.$msgJam = this.$msgExp = this.$msgBrh = [];
	//this.$scrJam = this.$scrExp = this.$scrBrh = [];
	//this.$equip = &quot;&quot;;	
	//this.$drship = this.$drcargo = &quot;&quot;;
	//this.$deqlog = this.$drlog = null;
	//}

	this._delayedMsg = function (msg, t) {
		var wp = worldScripts.pods;
		if (msg) { // there is a message to output
			wp.$message.push(msg);	// WAIT: handle more than one message at a time //wp.$message = msg; // save msg for use in callback
			if (!wp.$msgTimer) { // 1st message ever, set-up timer
				// new Timer(this : Object, function : Function, delay : Number [, interval : Number]) : Timer
				wp.$msgTimer = new Timer(wp, wp._delayedMsg, t, t);
				if (wp.logging) log(this.name, &quot;setup generic timer&quot;);
			} else {
				wp.$msgTimer.start();
				if (wp.logging) log(this.name, &quot;start timer : generic&quot;);
			}
		} else { // timer calls itself, we have to write the message
			if (wp.logging) log(this.name, &quot;stop timer : generic&quot;);
			player.consoleMessage(wp.$message.shift(), 6);
			if (wp.$message.length === 0) wp.$msgTimer.stop();
		}
	}

	this._delayedMsg_jamPod = function (msg, t) {
		var s = player.ship;
		//var s = this.ship; if (s.isPlayer) { n = &quot;player&quot; } else { n = &quot;npc&quot; }
		var wp = worldScripts.pods;
		if (msg) { // there is a message to output (only for player)
			wp.$scrJam.push(s); // save scr for use in callback
			wp.$msgJam.push(msg); // handle more than one message at a time //wp.$msgJam = msg; // save msg for use in callback
			if (!wp.$msgTimerJam) { // 1st message ever, set-up timer
				wp.$msgTimerJam = new Timer(wp, wp._delayedMsg_jamPod, t, t);
				if (wp.logging) log(this.name, &quot;setup jamPod timer&quot;);
			} else {
				wp.$msgTimerJam.start();
				if (wp.logging) log(this.name, &quot;start timer : jamPod&quot;);
			}
		} else { // timer calls itself, we have to write the message
			if (wp.logging) log(this.name, &quot;stop timer : jamPod&quot;);
			// for pods_jamPod
			s = wp.$scrJam.shift(); // retrieve first ship (should be associated with first timer if multiple timers scheduled)
			s.setEquipmentStatus(&quot;EQ_FUEL_SCOOPS&quot;, &quot;EQUIPMENT_DAMAGED&quot;);
			if (s.isPlayer) {
				wp.$warning_sound.play();
				player.consoleMessage(wp.$msgJam.shift(), 8);
			} else {
				s.commsMessage(wp.$msgJam.shift());
			}
			if (wp.$scrJam.length === 0) wp.$msgTimerJam.stop();
		}
	}

	this._delayedMsg_expPod = function (msg, t) {
		var s = player.ship;
		var wp = worldScripts.pods;
		if (msg) { // there is a message to output (only for player)
			wp.$scrExp.push(s);
			wp.$msgExp.push(msg);
			if (!wp.$msgTimerExp) {
				wp.$msgTimerExp = new Timer(wp, wp._delayedMsg_expPod, t, t);
				if (wp.logging) log(this.name, &quot;setup expPod timer&quot;);
			} else {
				wp.$msgTimerExp.start();
				if (wp.logging) log(this.name, &quot;start timer : expPod&quot;);
			}
		} else {
			if (wp.logging) log(this.name, &quot;stop timer : expPod&quot;);
			// for pods_explodingPod
			s = wp.$scrExp.shift(); // retrieve first ship (should be associated with first timer if multiple timers scheduled)
			let damage = (Math.ceil(Math.random() * 100));
			s.energy -= damage;
			s.removeEquipment(&quot;EQ_FUEL_SCOOPS&quot;);
			if (s.isPlayer) {
				wp.$direct_hit_sound.play();
				player.consoleMessage(wp.$msgExp.shift(), 8);
			} else {
				s.commsMessage(wp.$msgExp.shift());
			}
			if (wp.$scrExp.length === 0) wp.$msgTimerExp.stop();
		}
	}

	this._delayedMsg_breachPod = function (msg, t) {
		var s = player.ship,
			n = &quot;player&quot;;
		var wp = worldScripts.pods;
		if (msg) { // there is a message to output (only for player)
			wp.$scrBrh.push(s);
			wp.$msgBrh.push(msg); // push : addition required a parsing cut/splice/pop message ?
			if (!wp.$msgTimerBrh) {
				wp.$msgTimerBrh = new Timer(wp, wp._delayedMsg_breachPod, t, t);
				if (wp.logging) log(this.name, &quot;setup &quot; + n + &quot;-timer : breachPod&quot;);
			} else {
				wp.$msgTimerBrh.start();
				if (logging) log(this.name, &quot;start &quot; + n + &quot;-timer : breachPod&quot;);
			}
		} else {
			if (logging) log(this.name, &quot;stop &quot; + n + &quot;-timer : breachPod&quot;);
			// for pods_breachPod
			s = wp.$scrBrh.shift(); // retrieve first ship (should be associated with first timer if multiple timers scheduled)
			if (!wp._addHullBreachRoutines(s)) return false;
			if (s.isPlayer) {
				wp.$direct_hit_sound.play();
				player.consoleMessage(&quot;ALERT - explosion in the cargo hold! Hull breach, hold content venting!&quot;, 8);
				player.consoleMessage(wp.$msgBrh.shift(), 10);
			} else {
				s.commsMessage(wp.$msgBrh.shift());
			}
			if (wp.$scrBrh.length === 0) wp.$msgTimerBrh.stop();
		}
		return true;
	}

	this._msgCargo = function (type, quantity) {
		var msg = quantity;
		if (type &amp;&amp; quantity) {
			if (type === &quot;gold&quot; || type === &quot;platinum&quot;) { // platinum / Platinum / other roles: platinumpod
				msg += &quot; kilogram &quot;; // gold / Gold / other roles: goldpod
			} else if (type === &quot;gem_stones&quot;) { // gem_stones / Gem-Stones / other roles: gemstonespod
				msg += &quot; gram &quot;;
			} else msg += &quot; ton &quot;;
			if (quantity &gt; 1) {
				msg = msg.replace(&quot;gram &quot;, &quot;grams &quot;); // msg = msg.replace(&quot;ton &quot;, &quot;tons &quot;); // TEST: tons
			}
			msg += displayNameForCommodity(type);
		} else {
			log(this.name, &quot;ERROR: no var in the function this._msgCargo(type, quantity)&quot;);
		}
		return msg;
	}

	this._delayedAwrd = function (item, t, debug) { // only for player
		var wp = worldScripts.pods;
		var dg = debug;
		if (!dg) dg = wp.logging;

		if (item) { // there is an equipment to output
			wp.$equip = item;
			wp.$deqlog = dg;
			if (!wp.$eqpTimer) { // 1st item ever, set-up timer
				// new Timer(this : Object, function : Function, delay : Number [, interval : Number]) : Timer
				wp.$eqpTimer = new Timer(wp, wp._delayedAwrd, t, t);
				if (wp.logging) log(this.name, &quot;setup generic timer&quot;);
			} else {
				wp.$eqpTimer.start();
				if (wp.logging) log(this.name, &quot;start timer : generic&quot;);
			}
		} else { // timer calls itself, we have to write the item
			wp.$eqpTimer.stop();
			if (wp.logging) log(this.name, &quot;stop timer : generic&quot;);
			player.ship.awardEquipment(wp.$equip); // ? wp.$warning_sound.play();
			if (wp.$deqlog) log(this.name, &quot;awarded equipment: &quot;+ wp.$equip);
			wp.$equip = &quot;&quot;;
			wp.$deqlog = null;
		}
	}

	this._delayedRemoveCargo = function (ship, item, t, debug) {
		var s = ship;
		var wp = worldScripts.pods;
		var dg = debug;
		if (!dg) dg = wp.logging;

		if (item) {
			//if (dg) log(this.name, &quot;will remove &quot;+item.commodity+&quot;, type: &quot;+item.$missileType+&quot; missile, dataKey: [&quot;+item.dataKey+&quot;]&quot;);
			// TEST: logging for pods_missilePod

			if (dg) log(this.name, &quot;will remove &quot;+ item.name +&quot;, dataKey: [&quot;+ item.dataKey +&quot;]&quot;);

			wp.$drship = s;
			wp.$drcargo = item;
			wp.$drlog = dg;
			if (!wp.$removeCargoTimer) {
				wp.$removeCargoTimer = new Timer(wp, wp._delayedRemoveCargo, t, t);
				if (wp.logging) log(this.name, &quot;setup removeCargo timer&quot;);
			} else {
				wp.$removeCargoTimer.start();
				if (wp.logging) log(this.name, &quot;start timer : removeCargo&quot;);
			}
		} else {
			wp.$removeCargoTimer.stop();
			if (wp.logging) log(this.name, &quot;stop timer : removeCargo&quot;); // if (wp.$drship.length &gt; 1 || wp.$drcargo.length &gt; 1) log(this.name, &quot;Error: length &gt; 1&quot;);
			wp._removeCargo(wp.$drship, wp.$drcargo, wp.$drlog);
			wp.$drship = wp.$drcargo = &quot;&quot;;
			wp.$drlog = null;
		}
	}

	this._removeCargo = function (scooper, item, debug) {
		var dg = debug;
		if (!dg) dg = this.logging;

		if (scooper &amp;&amp; item) {
			var s;
			if (scooper.isPlayer) {
				s = &quot;player&quot;;
			} else {
				s = &quot;npc&quot;;
			}
			if (dg) log(this.name, &quot;removed &quot;+ item.name +&quot; on the &quot; + s + &quot;-ship: &quot; + scooper.name);
			
			//item.remove(true);

			var si = scooper.dumpCargo(1, item.commodity);
			if (si) {
				if (dg) log(this.name, &quot;removed &quot; + displayNameForCommodity(item.commodity) + &quot;(&quot; + item.name + &quot;) on the &quot; + s + &quot;-ship: &quot; + scooper.name);
				si.remove(true);
			} else log(this.name, &quot;Error: not removed: &quot; + item.name); // may be by scooper $hullBreach and etc.
		}
	}

	this._addTrumbleRoutines = function (scooper, item, type, debug) { // only for player
		var wp = worldScripts.pods;
		var scr = scooper;
		var dg = debug;
		var t = type;
		if (!dg) dg = wp.logging;
		if (!scr.isPlayer || !item || !t) return;

		var msg, an, cn, pn; // orig: msg = &quot;Pod contains a few scraps of food, and ... Oh no! A trumble!&quot;
		if (t === &quot;trumble&quot;) {
			var choice = (Math.ceil(Math.random() * 4));
			if (choice == 4) { // trumble(food)
				pn = &quot;scraps&quot;;
				cn = expandDescription(&#39;[pods_food]&#39;);
				an = &quot;A cute alien pet.&quot;;
				if (player.trumbleCount &gt; 0) {
					msg = &quot;1 ton &quot; + cn + &quot;, and ...&quot; // food for trumble
				}
			} else if (choice == 3) { // trumble(furs)
				pn = &quot;piece&quot;;
				cn = expandDescription(&#39;[pods_furs]&#39;);
				an = &quot;A cute, fluffy pet.&quot;;
			} else { // trumble
				pn = &quot;few scraps&quot;;
				cn = &#39;food&#39;;
				an = &quot;A trumble!&quot;;
			}
		} else {
			if (t === &quot;food&quot;) pn = &quot;few scraps&quot;
			else if (t === &quot;furs&quot;) pn = &quot;few piece&quot;
			else pn = &quot;little part&quot;;

			an = &quot;A trumble!&quot;;
			cn = displayNameForCommodity(t).toLowerCase();

			// delete a barrel
			wp._delayedRemoveCargo(scr, item, 0.75, dg);
		}
		if (!msg) {
			msg = &quot;Pod contains a &quot; + pn + &quot; of &quot; + cn + &quot;, and ... Oh no! &quot; + an;
			wp._delayedAwrd(&quot;EQ_TRUMBLE&quot;, 10, dg);
		}
		wp._delayedMsg(msg, 6);
	}

	// addition function for communicate. // not active used

	this._messageTime = clock.absoluteSeconds // for use of spacing NPC messages by ship scripts.

	this.$communicate = function (source, msgcode) // ~ this._sendMessage
	{
		if (this._messageAllowed() &amp;&amp; source.target &amp;&amp; source.target.isPlayer)
			source.commsMessage(expandDescription(&quot;[&quot; + msgcode + &quot;]&quot;), player.ship)
		// no messages within 5 secs to avoid screen clutter.
	}

	this._messageAllowed = function () {
		if ((clock.absoluteSeconds - this._messageTime) &gt; 5) {
			this._messageTime = clock.absoluteSeconds;
			return true;
		} else return false;
	}

	// next code is used by ship script

	this._addHullBreachRoutines = function (ship) {
		var s = ship;
		var wp = worldScripts.pods;
		var n, sc, logging = wp.logging;
		// initialise ship
		if (s &amp;&amp; s.isPlayer) {
			n = &quot;player&quot;;
			sc = worldScripts.pods;
		} else {
			n = &quot;npc&quot;;
			sc = s.script;
		}
		// damage
		let damage = (Math.ceil(Math.random() * 100));
		s.energy -= damage;
		// initialise timer
		if (typeof(sc) === undefined) {
			log(this.name, &quot;_addHullBreachRoutines encountered an undefined ship script on ship &quot; + s);
			return false;
		} else if (!sc.$hullBreachTimer) {
			sc.$initialiseTimer = wp.$initialiseTimer;
			sc.$initialiseTimer();
		} else {
			sc.$hullBreachTimer.start();
			if (logging) log(sc.name, &quot;start &quot; + n + &quot;-timer : hullBreach&quot;);
		}
		return true;
	}

	this.$initialiseTimer = function () {
		var wp = worldScripts.pods;
		var n, s, sc, logging = wp.logging;
		// initialise ship
		if (this === wp) {
			n = &quot;player&quot;;
			s = player.ship;
			sc = worldScripts.pods;
		} else {
			n = &quot;npc&quot;;
			s = this.ship;
			sc = s.script;
			sc.$hullBreach = wp.$hullBreach;
		}
		// initialise hullBreach timer
		sc.$hullBreachTimer = new Timer(this, sc.$hullBreach, 14, 14) // default + delay / 10 + 4
		//sc.$hullBreachTimer.stop();
		if (logging) log(sc.name, &quot;setup &quot; + n + &quot;-timer : hullBreach&quot;);

	}

	this.$hullBreach = function $hullBreach() {
		var wp = worldScripts.pods;
		var n, s, logging = wp.logging;
		// initialise ship
		s = this.ship;
		if (!s) {
			n = &quot;player&quot;;
			s = player.ship;
		} else {
			n = &quot;npc&quot;;
		}
		var actionChance = Math.ceil(Math.random() * 5);
		switch (actionChance) {
			case 1:
				//do nothing, breach still there, but no pod lost this time.
				break;
			case 2:
				this.$hullBreachTimer.stop();
				if (logging) log(this.name, &quot;stop &quot; + n + &quot;-timer : hullBreach&quot;);
				if (s.isPlayer) {
					player.consoleMessage(&quot;Hull breach repaired, alert ended.&quot;, 6)
				} else {
					s.commsMessage(&quot;Oh, repaired! Stop eject!&quot;); // expandDescription
				}
				// end of the emergency, now just got to go hoover up the spilt pods!
				break;
			case 3:
			case 4:
			case 5:
				if (s.dumpCargo()) {
					//bye-bye pod into space! no message about loss as you&#39;d get a screenful.
					break;
				} else { // cargo hold is empty
					this.$hullBreachTimer.stop();
					if (logging) log(this.name, &quot;stop &quot; + n + &quot;-timer : hullBreach&quot;);
					if (s.isPlayer) {
						player.consoleMessage(&quot;Hull breach repaired, alert ended.&quot;, 6)
					} else {
						s.commsMessage(&quot;... no more dump!&quot;); // expandDescription
					}
					//delete this.$hullBreachTimer;	//delete this.$hullBreach; // TEST: break cycling
					//may as well seal the breach, the hold&#39;s empty!
					break;
				}
			default:
				;
		}
	}

	this.$addMessageRoutines = function (ship, message) // NPC // not used
	{
		var wp = worldScripts.pods;
		var sc = ship.script;
		sc.$initialiseMsgTimer = wp.$initialiseMsgTimer;
		sc.$initialiseMsgTimer();
		//this.ship.script.$initialiseMsgTimer();
	}

	this._sendMessage = function (msgcode) // next code is linked to ship scripts. // ~ this.$communicate
	{
		if (worldScripts[&quot;pods&quot;]._messageAllowed() &amp;&amp; this.ship.target &amp;&amp; this.ship.target.isPlayer)
			this.ship.commsMessage(expandDescription(&quot;[&quot; + msgcode + &quot;]&quot;))
	}

	this._initialiseItem = function (scooper, item) // not used
	{
		if (scooper &amp;&amp; item) {
			var s;
			if (scooper.isPlayer) {
				s = &quot;player&quot;;
			} else {
				s = &quot;npc&quot;;
			}
			// for pods_missilePod
			if (this.logging) log(this.name, displayNameForCommodity(item.commodity) + &quot;(&quot; + item.name + &quot;) [&quot; + item.$missileType + &quot;] scooped by &quot; + s + &quot;-ship: &quot; + scooper.name);
		} else log(this.name, &quot;ERROR: no var in the function this._initialiseItem(scooper,item)&quot;);
	}

}).call(this);
</pre></td>
                </tr>
                <tr>
                    <td valign="top">Scripts/pods_bigPod-gems.js</td>
                    <td><pre>this.name			= &quot;pods_bigPod-gems&quot;;
this.author			= &quot;Thargoid&quot;;
this.copyright		= &quot;Creative Commons: attribution, non-commercial, sharealike with clauses - see readme.txt&quot;;
this.description	= &quot;Generates a pod of 1-200 g capacity of gemstones&quot;;

this.logging = false; // false for release

this.shipWasScooped = function (scooper) {
	&quot;use strict&quot;;
	var wp = worldScripts.pods;
	let type = this.ship.commodity; // setCargoType
	let quantity = parseInt(this.ship.commodityAmount);
	// content cargopod role
	if (this.logging &amp;&amp; type) log(&quot;pods&quot;, this.name + &quot; : input setCargo : &quot; + type + &quot;[&quot; + quantity + &quot;] for &quot; + scooper.name);

	if (wp &amp;&amp; scooper.isPlayer) {
		if (!type) {
			var msg;
			let award = (Math.ceil(Math.random() * 200));

			if (player.ship.cargoSpaceAvailable &gt; 0) {
				manifest[&quot;gem_stones&quot;] += award; // this.ship.setCargo(cargo, award);
				//player.consoleMessage(award + &quot; grams Gem-Stones&quot;, 6);
				msg = award + &quot; grams Gem-Stones&quot;;
			} else {
				//player.consoleMessage(&quot;Not enough space in your cargo hold for the pod!&quot;, 6);
				msg = &quot;Not enough space in your cargo hold for the pod!&quot;;
			}
			wp._delayedMsg(msg, 3);
		} else {
			wp._msgCargo(type, quantity);
			if (this.logging) log(this.name, &quot;player scooped pre-setCargo&quot;);
		}
	}
}
</pre></td>
                </tr>
                <tr>
                    <td valign="top">Scripts/pods_bigPod-kg.js</td>
                    <td><pre>this.name			= &quot;pods_bigPod-kg&quot;;
this.author			= &quot;Thargoid&quot;;
this.copyright		= &quot;Creative Commons: attribution, non-commercial, sharealike with clauses - see readme.txt&quot;;
this.description	= &quot;Generates a pod of 1-100 kg capacity&quot;;

this.logging = false; // false for release

this.shipWasScooped = function (scooper) {
	&quot;use strict&quot;;
	var wp = worldScripts.pods;
	let type = this.ship.commodity; // setCargoType
	let quantity = parseInt(this.ship.commodityAmount);
	// content cargopod role
	if (this.logging &amp;&amp; type) log(&quot;pods&quot;, this.name + &quot; : input setCargo : &quot; + type + &quot;[&quot; + quantity + &quot;] for &quot; + scooper.name);

	if (wp &amp;&amp; scooper.isPlayer) {
		if (!type) {
			var msg;
			let award = (Math.ceil(Math.random() * 100));
			let cargo = expandDescription(&#39;[pods_contentKilos]&#39;);

			if (player.ship.cargoSpaceAvailable &gt; 0) {
				manifest[cargo] += award;
				msg = award + &quot; kilograms &quot; + displayNameForCommodity(cargo);
			} else {
				msg = &quot;Not enough space in your cargo hold for the pod!&quot;;
			}
			wp._delayedMsg(msg, 3);
		} else {
			wp._msgCargo(type, quantity);
			if (this.logging) log(this.name, &quot;player scooped pre-setCargo&quot;);
		}
	}
}
</pre></td>
                </tr>
                <tr>
                    <td valign="top">Scripts/pods_bigPod-t.js</td>
                    <td><pre>this.name			= &quot;pods_bigPod-t&quot;;
this.author			= &quot;Thargoid&quot;;
this.copyright		= &quot;Creative Commons: attribution, non-commercial, sharealike with clauses - see readme.txt&quot;;
this.description	= &quot;Generates a pod of 1-10 (2-20 for pods_CCL_bigPod) ton capacity&quot;;

this.logging = false; // false for release

this.shipWasScooped = function (scooper) {
	&quot;use strict&quot;;
	var wp = worldScripts.pods;
	let type = this.ship.commodity; // setCargoType
	let quantity = parseInt(this.ship.commodityAmount);
	// content cargopod role
	if (this.logging &amp;&amp; type) log(&quot;pods&quot;, this.name + &quot; : input setCargo : &quot; + type + &quot;[&quot; + quantity + &quot;] for &quot; + scooper.name);

	if (wp &amp;&amp; scooper.isPlayer &amp;&amp; player.ship.cargoSpaceAvailable &gt; 0) {
		if (!type) {
			var msg;
			let award = (Math.ceil(Math.random() * 10));
			let cargo = expandDescription(&#39;[pods_contentTons]&#39;);

			if (this.ship &amp;&amp; this.ship.hasRole(&quot;pods_CCL_bigPod-t&quot;)) {
				award *= 2;
			};

			if (player.ship.cargoSpaceAvailable &gt; award) {
				manifest[cargo] += award; // this.ship.setCargo(cargo, award);
				msg = award + &quot; tons &quot; + displayNameForCommodity(cargo);
			} else {
				manifest[cargo] += player.ship.cargoSpaceAvailable; // this.ship.setCargo(cargo, player.ship.cargoSpaceAvailable);
				msg = player.ship.cargoSpaceAvailable + &quot; tons &quot; + displayNameForCommodity(cargo) + &quot; - hold full&quot;;
			}
			wp._delayedMsg(msg, 3);
		} else {
			wp._msgCargo(type, quantity);
			if (this.logging) log(this.name, &quot;player scooped pre-setCargo&quot;);
		}
	}
}
</pre></td>
                </tr>
                <tr>
                    <td valign="top">Scripts/pods_bigPod.js</td>
                    <td><pre>this.name 			= &quot;pods_bigPod&quot;;
this.author 		= &quot;Thargoid&quot;;
this.copyright 		= &quot;Creative Commons: attribution, non-commercial, sharealike with clauses - see readme.txt&quot;;
this.description 	= &quot;Generates a bigpods: pod of 1-10 (2-20 for pods_CCL_bigPod) ton capacity, pod of 1-100 kg capacity, pod of 1-200 g capacity of gemstones&quot;;

this.logging = false; // false for release

this.shipWasScooped = function (scooper) {
	&quot;use strict&quot;;
	// initialise scooper
	var n, scr = scooper;
	if (scr.isPlayer) {
		n = &quot;player&quot;;
	} else {
		n = &quot;npc&quot;;
	}
	// initialise item
	var itm = this.ship;
	var dk = itm.dataKey;
	var pr = itm.primaryRole;

	var wp = worldScripts.pods;
	if (wp) {
		var cargo, msg, tc, setNewBarrel; //  &quot;1t-cargopod&quot;
		let type = itm.commodity;
		let quantity = parseInt(itm.commodityAmount);

		tc = pr + &quot;(bigpod)&quot;;
		if (!type) { // initialise RFID-broken bigpod: check roles and set content (type, quantity)
			// initialise bigBarrels
			if (itm &amp;&amp; itm.hasRole(&quot;bigpod&quot;)) {
				if (dk === &quot;pods_bigBarrel_t&quot; || dk === &quot;pods_CCL_bigBarrel_t&quot;) {
					setNewBarrel = true;
					cargo = expandDescription(&#39;[pods_contentTons]&#39;);
					quantity = (Math.ceil(Math.random() * 10));
					if (dk === &quot;pods_CCL_bigBarrel_t&quot;) {
						quantity *= 2;
					}
				} else if (dk === &quot;pods_bigBarrel_kg&quot;) {
					cargo = expandDescription(&#39;[pods_contentKilos]&#39;);
					quantity = (Math.ceil(Math.random() * 100));
				} else { // if (dk === &quot;pods_bigBarrel_gems&quot;) {
					cargo = &quot;gem_stones&quot;;
					quantity = (Math.ceil(Math.random() * 200));
				}
				type = cargo;
			} else {
				log(this.name, &quot;Error: no &quot; + tc + &quot; role in the [&quot; + dk + &quot;]&quot;);
				return;
			}
			if (this.logging) log(this.name, &quot;initialised a &quot; + tc + &quot;: &quot; + type + &quot;[&quot; + quantity + &quot;] for &quot; + n + &quot;-scooping&quot;);

			// set a new barrels or save a barrel:
			if (setNewBarrel &amp;&amp; scr.isPlayer) {
				scr.manifest[type] += quantity;
			} else {
				this.ship.setCargo(type, quantity);
			}
			// operation : scr.manifest[type] += quantity - not worked for NPC

			// events and messages
			if (scr.isPlayer) {
				msg = wp._msgCargo(type, quantity); // standart named cargo
				wp._delayedMsg(msg, 3);
				// reset / broken RFID for scooped pods (kg/gram)
				if (worldScripts[&quot;Cargo Scanner&quot;] &amp;&amp; itm.shipUniqueName) itm.shipUniqueName = displayNameForCommodity(type);
			}
		} else { // pre-set bigpod
			if (this.logging) log(this.name, &quot;identified a pre-set &quot; + tc + &quot;: &quot; + type + &quot;[&quot; + quantity + &quot;] for &quot; + n + &quot;-scooping&quot;);

			// reset a barrel var: for NPC not replaced bulk barrels --&gt; operation : scr.manifest[type] += quantity - not worked for NPC

			// events and messages
			if (scr.isPlayer) {
				if (setNewBarrel) { // not used this version
					scr.manifest[type] += quantity;
					wp._delayedRemoveCargo(scr, itm, 0.75);
				}
				msg = wp._msgCargo(type, quantity); // has_scoop_message = no
				wp._delayedMsg(msg, 1); // player.consoleMessage(msg, 6);
			}
		}
		if (this.logging) log(this.name, n + &quot; scooped: &quot; + type);
	}
}
</pre></td>
                </tr>
                <tr>
                    <td valign="top">Scripts/pods_breachPod.js</td>
                    <td><pre>this.name 			= &quot;pods_breachPod&quot;;
this.author 		= &quot;Thargoid&quot;;
this.copyright 		= &quot;Creative Commons: attribution, non-commercial, sharealike with clauses - see readme.txt&quot;;
this.description 	= &quot;Script for an exploding pod, causing damage plus a hull breach and cargo loss&quot;;

this.logging = false; // false for release

this.shipWasScooped = function (scooper) {
	&quot;use strict&quot;;
	// initialise scooper
	var n, scr = scooper;
	if (scr.isPlayer) {
		n = &quot;player&quot;;
	} else {
		n = &quot;npc&quot;;
	}
	// initialise item
	var itm = this.ship;
	var dk = itm.dataKey;
	var pr = itm.primaryRole;

	var wp = worldScripts.pods;
	if (wp) {
		var cargo, msg, tc; //  &quot;1t-cargopod&quot;
		let type = itm.commodity;
		let quantity = parseInt(itm.commodityAmount);

		tc = pr + &quot;(breach)&quot;;
		if (!type) { // initialise RFID-broken breach pod: set content (type, 1)
			// initialise breach / set 1 firearms in the breach pod for NPC : quantity = 1; // radioactives / alien_items / firearms
			if (scr.isPlayer) {
				type = &quot;radioactives&quot;;
			} else {
				type = &quot;firearms&quot;;
			} // used --&gt; displayNameForCommodity
			// set a barrel
			itm.setCargo(type, quantity);
			if (this.logging) log(this.name, &quot;initialised a &quot; + tc + &quot;: &quot; + type + &quot;[&quot; + quantity + &quot;] for &quot; + n + &quot;-scooping&quot;);
		} else { // pre-set cargopod
			if (this.logging) log(this.name, &quot;identified a pre-set &quot; + tc + &quot;: &quot; + type + &quot;[&quot; + quantity + &quot;] for &quot; + n + &quot;-scooping&quot;);
		}

		wp._delayedRemoveCargo(scr, itm, 0.75);
		//msg = wp._msgCargo(type, quantity); // breach pod / has_scoop_message = yes //player.consoleMessage(msg, 6); // wp._delayedMsg(msg, 1);

		// events and messages : damage in both events
		if (scr.isPlayer) {
			msg = &quot;ALERT - Emergency repair systems activated.&quot;;
			if(!wp._delayedMsg_breachPod(msg, 4)) { // damage + hullBreach + msg
				log(this.name, &quot;shipWasScooped encountered error calling wp._delayedMsg_breachPod(msg, 4) with scr = &quot; + scr + &quot;, itm = &quot; + itm + &quot;, pr = &quot; + pr + &quot;, type = &quot; + type + &quot;, quantity = &quot; + quantity);
				return;
			}
		} else {
			if(!wp._addHullBreachRoutines(scr)) { // setup : damage + hullBreach
				log(this.name, &quot;shipWasScooped encountered error calling wp._addHullBreachRoutines(scr) with scr = &quot; + scr + &quot;, itm = &quot; + itm + &quot;, pr = &quot; + pr + &quot;, type = &quot; + type + &quot;, quantity = &quot; + quantity);
				return;
			}
			if (wp.npc_message) {
				if (Math.random() &gt; 0.5) {
					msg = &quot;Who transported it is bad &quot; + expandDescription(&#39;[pods_radioactives]&#39;) + &quot; as &quot; + displayNameForCommodity(type) + &quot;?&quot;;
				} else {
					msg = &quot;Help, it is deadly &quot; + displayNameForCommodity(type) + &quot;! Hull breach...&quot;;
				}
				scr.commsMessage(msg);
			}
		}
		if (this.logging) log(this.name, n + &quot; scooped a breach pod: &quot; + type);
	}
}
</pre></td>
                </tr>
                <tr>
                    <td valign="top">Scripts/pods_emptyPod.js</td>
                    <td><pre>this.name 			= &quot;pods_emptyPod&quot;;
this.author 		= &quot;Thargoid&quot;;
this.copyright 		= &quot;Creative Commons: attribution, non-commercial, sharealike with clauses - see readme.txt&quot;;
this.description 	= &quot;Generates an empty or otherwise worthless cargo pod&quot;;

this.logging = false; // false for release

this.shipWasScooped = function (scooper) {
	&quot;use strict&quot;;
	// initialise scooper
	var n, scr = scooper;
	if (scr.isPlayer) {
		n = &quot;player&quot;;
	} else {
		n = &quot;npc&quot;;
	}
	// initialise item
	var itm = this.ship;
	var dk = itm.dataKey;
	var pr = itm.primaryRole;

	var wp = worldScripts.pods;
	if (wp) {
		var cargo, msg, tc; //  &quot;1t-cargopod&quot;
		let type = itm.commodity;
		let quantity = parseInt(itm.commodityAmount);

		tc = pr + &quot;(empty)&quot;;
		if (!type) { // initialise RFID-broken empty pod: set content (&quot;empty&quot;, 1)
			// initialise empty cargo : type = &quot;null&quot;; quantity = 0;
			if (this.logging) log(this.name, &quot;initialised a &quot; + tc + &quot;: &quot; + type + &quot;[&quot; + quantity + &quot;] for &quot; + n + &quot;-scooping&quot;);

			// events and messages
			if (scr.isPlayer) {
				wp._delayedMsg(expandDescription(&#39;[pods_emptyPodMessage]&#39;), 2);
			}
		} else { // pre-set cargopod
			if (this.logging) log(this.name, &quot;identified a pre-set &quot; + tc + &quot;: &quot; + type + &quot;[&quot; + quantity + &quot;] for &quot; + n + &quot;-scooping&quot;);

			// events and messages
			if (scr.isPlayer) {
				msg = wp._msgCargo(type, quantity); // has_scoop_message = no
				player.consoleMessage(msg, 6); // wp._delayedMsg(msg, 1);
			}
		}
		if (this.logging) log(this.name, n + &quot; scooped: &quot; + type);
	}
}
</pre></td>
                </tr>
                <tr>
                    <td valign="top">Scripts/pods_explodingPod.js</td>
                    <td><pre>this.name 			= &quot;pods_explodingPod&quot;;
this.author 		= &quot;Thargoid&quot;;
this.copyright 		= &quot;Creative Commons: attribution, non-commercial, sharealike with clauses - see readme.txt&quot;;
this.description 	= &quot;Script for an exploding pod. No cargo loss, just damage to ship and scoops destroyed&quot;;

this.logging = false; // false for release

this.shipWasScooped = function (scooper) {
	&quot;use strict&quot;;
	// initialise scooper
	var n, scr = scooper;
	if (scr.isPlayer) {
		n = &quot;player&quot;;
	} else {
		n = &quot;npc&quot;;
	}
	// initialise item
	var itm = this.ship;
	var dk = itm.dataKey;
	var pr = itm.primaryRole;

	var wp = worldScripts.pods;
	if (wp) {
		var cargo, msg, tc; //  &quot;1t-cargopod&quot;
		let type = itm.commodity;
		let quantity = parseInt(itm.commodityAmount);

		tc = pr + &quot;(exploding)&quot;;
		if (!type) { // initialise RFID-broken exploding pod: set content (null, 1)
			// initialise an exploding cargo : type = &quot;null&quot;; quantity = 0; // set a barrel : null set
			if (this.logging) log(this.name, &quot;initialised a &quot; + tc + &quot;: &quot; + type + &quot;[&quot; + quantity + &quot;] for &quot; + n + &quot;-scooping&quot;);
		} else { // pre-set cargopod
			if (this.logging) log(this.name, &quot;identified a pre-set &quot; + tc + &quot;: &quot; + type + &quot;[&quot; + quantity + &quot;] for &quot; + n + &quot;-scooping&quot;);
			// delete a barrel
			wp._delayedRemoveCargo(scr, itm, 0.75);
		}

		// events and messages : exploded in both events
		if (scr.isPlayer) {
			msg = &quot;ALERT - Pod cracked and exploded during scooping. Scoops destroyed!&quot;;
			wp._delayedMsg_expPod(msg, 2);
		} else {
			scr.removeEquipment(&quot;EQ_FUEL_SCOOPS&quot;);
			if (wp.npc_message) {
				if (Math.random() &gt; 0.5) {
					msg = expandDescription(&#39;[msg_exploding]&#39;);
				} else {
					msg = &quot;It is bad cannister for &quot; + expandDescription(&#39;[pods_firearms]&#39;) + &quot;!&quot;;
				}
				scr.commsMessage(msg);
			}
		}
		if (this.logging) log(this.name, n + &quot; scooped a exploded pod: &quot; + type);
	}
}
</pre></td>
                </tr>
                <tr>
                    <td valign="top">Scripts/pods_fuelPod.js</td>
                    <td><pre>this.name 			= &quot;pods_fuelPod&quot;;
this.author 		= &quot;Thargoid&quot;;
this.copyright 		= &quot;Creative Commons: attribution, non-commercial, sharealike with clauses - see readme.txt&quot;;
this.description 	= &quot;A cargo pod containing up to 3 ly of fuel, or sometimes non-fuel which contaminates everything&quot;;
this.version 		= &quot;2.5.5&quot;;

this.logging = false; // false for release

this.shipWasScooped = function (scooper) {
	&quot;use strict&quot;;
	// initialise scooper
	var n, scr = scooper;
	if (scr.isPlayer) {
		n = &quot;player&quot;;
	} else {
		n = &quot;npc&quot;;
	}
	// initialise item
	var itm = this.ship;
	var dk = itm.dataKey;
	var pr = itm.primaryRole;

	var wp = worldScripts.pods;
	if (wp) {
		var cargo, msg, tc; //  &quot;1t-cargopod&quot;
		let type = itm.commodity;
		let quantity = parseInt(itm.commodityAmount);

		tc = &quot;fuel-tank&quot;;
		if (!type) { // set content (&quot;fuel&quot;, quantity)
			type = &quot;quirium fuel&quot;;
			// initialise a fuel pod, events and messages
			let newfuel = ((Math.ceil(Math.random() * 32)) / 10);
			if (newfuel &lt; 3.1) {
				scr.fuel += newfuel;
				if (scr.isPlayer) player.consoleMessage(&quot;Fuel Tank - &quot; + newfuel + &quot; ly transferred!&quot;, 6);
			} else {
				scr.fuelLeakRate = 10;
				if (scr.isPlayer) {
					wp.$warning_sound.play();
					wp._delayedMsg(&quot;ALERT - Transferred substance is not witchspace fuel! Tanks contaminated, venting...&quot;, 2);
				}
			}
		} else { // pre-set fuel pod
			if (this.logging) log(this.name, &quot;identified a pre-set &quot; + tc + &quot;: &quot; + type + &quot;[&quot; + quantity + &quot;] for &quot; + n + &quot;-scooping&quot;);

			// events and messages
			if (scr.isPlayer) {
				player.consoleMessage(&quot;Fuel Tank - No fuel for transfer!&quot;, 6);
				msg = wp._msgCargo(type, quantity); // has_scoop_message = no
				player.consoleMessage(msg, 6); // wp._delayedMsg(msg, 1);
			}
		}
		if (this.logging) log(this.name, n + &quot; scooped: &quot; + type);
	}
}
</pre></td>
                </tr>
                <tr>
                    <td valign="top">Scripts/pods_jamPod.js</td>
                    <td><pre>this.name 			= &quot;pods_jamPod&quot;;
this.author 		= &quot;Thargoid&quot;;
this.copyright 		= &quot;Creative Commons: attribution, non-commercial, sharealike with clauses - see readme.txt&quot;;
this.description 	= &quot;Script to jam a pod in the fuel scoops, disabling them&quot;;

this.logging = false; // false for release

this.shipWasScooped = function (scooper) {
	&quot;use strict&quot;;
	// initialise scooper
	var n, scr = scooper;
	if (scr.isPlayer) {
		n = &quot;player&quot;;
	} else {
		n = &quot;npc&quot;;
	}
	// initialise item
	var itm = this.ship;
	var dk = itm.dataKey;
	var pr = itm.primaryRole;

	var wp = worldScripts.pods;
	if (wp) {
		var cargo, msg, tc; //  &quot;1t-cargopod&quot;
		let type = itm.commodity;
		let quantity = parseInt(itm.commodityAmount);

		tc = pr + &quot;(jam)&quot;;
		if (!type) { // initialise RFID-broken jammed pod: set content (null, 1)
			// jammed cargo : type = &quot;null&quot;; quantity = 0; // set a barrel : null set
			if (this.logging) log(this.name, &quot;initialised a &quot; + tc + &quot;: &quot; + type + &quot;[&quot; + quantity + &quot;] for &quot; + n + &quot;-scooping&quot;);
		} else { // pre-set cargopod
			if (this.logging) log(this.name, &quot;identified a pre-set &quot; + tc + &quot;: &quot; + type + &quot;[&quot; + quantity + &quot;] for &quot; + n + &quot;-scooping&quot;);
			// delete a barrel
			wp._delayedRemoveCargo(scr, itm, 0.75);
		}

		// events and messages : jammed in both events
		if (scr.isPlayer) {
			msg = &quot;ALERT - Cargo pod jammed in fuel scoops. Scoops disabled.&quot;;
			wp._delayedMsg_jamPod(msg, 2);
		} else {
			scr.setEquipmentStatus(&quot;EQ_FUEL_SCOOPS&quot;, &quot;EQUIPMENT_DAMAGED&quot;);
			if (wp.npc_message) {
				msg = expandDescription(&#39;[msg_jamming]&#39;);
				scr.commsMessage(msg);
			}
		}
		if (this.logging) log(this.name, n + &quot; scooped a jammed pod: &quot; + type);
	}
}
</pre></td>
                </tr>
                <tr>
                    <td valign="top">Scripts/pods_missilePod.js</td>
                    <td><pre>this.name 			= &quot;pods_missilePod&quot;;
this.author 		= &quot;Thargoid &amp; Arexack Heretic &amp; Rustem&quot;;
this.copyright 		= &quot;Creative Commons: attribution, non-commercial, sharealike with clauses - see readme.txt&quot;;
this.description 	= &quot;A cargo pod containing either a standard or hardened missile&quot;;

&quot;use strict&quot;;

this.logging = false; // false for release

this.ship.$missileType = null;

this.shipSpawned = function () {
	if (!this.ship) return;
	this.ship.$missileType = (Math.random() &gt; 0.25 ? &quot;standard&quot; : &quot;hardened&quot;);
	//var si = this.ship.scriptInfo;	//var pr = this.ship.primaryRole;
	//if (si &amp;&amp; si.missileType == &quot;hardened&quot;) this.ship.$missileType = &quot;hardened&quot;
	//else if (si &amp;&amp; si.missileType == &quot;standard&quot;) this.ship.$missileType = &quot;standard&quot;;
	delete this.shipSpawned;
}

this.shipWasScooped = function (scooper) {
	// initialise scooper
	var n, scr = scooper;
	if (scr.isPlayer) {
		n = &quot;player&quot;;
	} else {
		n = &quot;npc&quot;;
	}
	// initialise item
	var itm = this.ship;
	var dk = itm.dataKey;
	var pr = itm.primaryRole;

	var wp = worldScripts.pods;
	if (wp) {
		var cargo, msg, tc; //  &quot;1t-cargopod&quot;
		let type = itm.commodity;
		let quantity = parseInt(itm.commodityAmount);

		tc = &quot;missile&quot;;
		if (!type) { // initialise RFID-broken missile: check missiles, pylon and set content (type, 1)
			// check content cargopod role

			// initialise a missile, events and messages
			if (scr.missiles.length &lt; scr.missileCapacity) {
				itm.$missileType = this.$awardMissile(scr, itm);
				tc = itm.$missileType + &quot; missile&quot;;
				if (this.logging) log(this.name, n + &quot; scooped a &quot; + tc + &quot;, mounted to pylon&quot;);
			} else // cargo hold
			{
				if (!itm.missileType) itm.$missileType = (Math.random() &gt; 0.25 ? &quot;standard&quot; : &quot;hardened&quot;); // reserv. string
				if (itm.setCargo(&quot;firearms&quot;)) tc = itm.$missileType + &quot; missile&quot;;
				if (scr.isPlayer) {
					wp._delayedMsg(&quot;1 &quot; + tc + &quot; (Firearms)&quot;, 2);
					if (worldScripts[&quot;Cargo Scanner&quot;] &amp;&amp; itm.shipUniqueName) itm.shipUniqueName = itm.$missileType; // TODO: telescope indentifed, moved to _delayedMsg / _msgCargo
				}
			}
			if (this.logging) log(this.name, n + &quot; scooped: &quot; + tc);
		} else { // pre-set missile pod
			if (this.logging) log(this.name, &quot;identified a pre-set &quot; + tc + &quot;: &quot; + type + &quot;[&quot; + quantity + &quot;] for &quot; + n + &quot;-scooping&quot;);

			// re-initialise a missile, events and messages
			if (type != &quot;firearms&quot;) {
				itm.$missileType = null;
				delete this.shipDied;
			}
			if (itm.$missileType &amp;&amp; scr.missiles.length &lt; scr.missileCapacity) {
				itm.$missileType = this.$awardMissile(scr, itm); // adjustCargo/delete/remove for empty of the barrel?
				tc = itm.$missileType + &quot; missile&quot;;
				wp._delayedRemoveCargo(scr, itm, 0.75);
				if (this.logging) log(this.name, n + &quot; scooped a &quot; + tc + &quot;, mounted to pylon&quot;);
			} else // cargo hold
			{
				if (scr.isPlayer) {
					msg = wp._msgCargo(type, quantity); // has_scoop_message = no
					wp._delayedMsg(msg, 1); // player.consoleMessage(msg, 6);
					if (itm.$missileType &amp;&amp; worldScripts[&quot;Cargo Scanner&quot;] &amp;&amp; itm.shipUniqueName) itm.shipUniqueName = itm.$missileType;
				}
				if (this.logging) log(this.name, n + &quot; scooped a pre-set &quot; + tc + &quot;: &quot; + type);
			}
		}
	}
	//delete this.shipWasScooped; // one scoop attempt
}

this.$awardMissile = function (scooper, item) {
	var wp = worldScripts.pods;
	var scr = scooper;
	var eq, mt = item.$missileType;
	if (!mt) {
		let choice = (Math.ceil(Math.random() * 4));
		if (choice == 4) {
			mt = &quot;hardened&quot;;
		} else {
			mt = &quot;standard&quot;;
		}
	}
	eq = (mt === &quot;standard&quot; ? &quot;EQ_MISSILE&quot; : &quot;EQ_HARDENED_MISSILE&quot;);
	if (scr.awardEquipment(eq)) {
		if (scr.isPlayer) {
			if (wp) wp.$warning_sound.play();
			player.consoleMessage(&quot;Pylon mount: Missile class - &quot; + mt, 6);
		}
		return mt;
	} else return &quot;unarmed&quot;;
}

this.shipDied = function () {
	delete this.shipDied; // prefent recursion
	// TODO: Upgraded a method and tuned a value of the energy detonate in missileBarrel shipdata
	this.ship.switchAI(&quot;missileAI.plist&quot;);
	this.ship.AIState = &quot;DETONATE&quot;;
}
</pre></td>
                </tr>
                <tr>
                    <td valign="top">Scripts/pods_piggybankPod.js</td>
                    <td><pre>this.name 			= &quot;pods_piggyBankPod&quot;;
this.author 		= &quot;Thargoid&quot;;
this.copyright 		= &quot;Creative Commons: attribution, non-commercial, sharealike with clauses - see readme.txt&quot;;
this.description 	= &quot;Generates a pod with someone&#39;s personal effects, including 1-2000 credits&quot;;

this.logging = false; // false for release

this.shipWasScooped = function (scooper) {
	&quot;use strict&quot;;
	// initialise scooper
	var n, scr = scooper;
	if (scr.isPlayer) {
		n = &quot;player&quot;;
	} else {
		n = &quot;npc&quot;;
	}
	// initialise item
	var itm = this.ship;
	var dk = itm.dataKey;
	var pr = itm.primaryRole;

	var wp = worldScripts.pods;
	if (wp) {
		var cargo, msg, tc; //  &quot;1t-cargopod&quot;
		let type = itm.commodity;
		let quantity = parseInt(itm.commodityAmount);

		tc = pr + &quot;(piggybank)&quot;;
		if (!type) { // initialise RFID-broken piggybank pod
			// piggybank pod : type = &quot;null&quot;; quantity = 0;
			if (this.logging) log(this.name, &quot;initialised a &quot; + tc + &quot;: &quot; + type + &quot;[&quot; + quantity + &quot;] for &quot; + n + &quot;-scooping&quot;);

			// set a barrel : null set : empty pod, only credits
		} else { // pre-set 1t-cargopod
			if (this.logging) log(this.name, &quot;identified a pre-set &quot; + tc + &quot;: &quot; + type + &quot;[&quot; + quantity + &quot;] for &quot; + n + &quot;-scooping&quot;);

			// events and messages
			//if (scr.isPlayer) {
			//msg = wp._msgCargo(type,quantity); // has_scoop_message = yes
			//player.consoleMessage(msg, 6); // wp._delayedMsg(msg, 1);
			//}
		}
		// events and messages : added credits in both events for player only
		if (scr.isPlayer) {
			let podloot = (5 + Math.ceil(Math.pow(Math.random(), 3) * 2000));
			player.credits += podloot;
			wp._delayedMsg(&quot;Pod contains someone&#39;s personal effects, including &quot; + podloot + &quot; credits!&quot;, 5);
			if (this.logging) log(this.name, &quot;+&quot; + podloot + &quot; credits&quot;);
		}
		if (this.logging) log(this.name, n + &quot; scooped: &quot; + type);
	}
}
</pre></td>
                </tr>
                <tr>
                    <td valign="top">Scripts/pods_retryPod.js</td>
                    <td><pre>this.name 			= &quot;pods_retryPod&quot;;
this.author 		= &quot;Thargoid&quot;;
this.copyright 		= &quot;Creative Commons: attribution, non-commercial, sharealike with clauses - see readme.txt&quot;;
this.description 	= &quot;Script to cause pod scooping frustration&quot;;

this.logging = false; // false for release

this.shipWasScooped = function (scooper) {
	&quot;use strict&quot;;
	// initialise scooper
	var n, scr = scooper;
	if (scr.isPlayer) {
		n = &quot;player&quot;;
	} else {
		n = &quot;npc&quot;;
	}
	// initialise item
	var itm = this.ship;
	var dk = itm.dataKey;
	var pr = itm.primaryRole;

	var wp = worldScripts.pods;
	if (wp) {
		var cargo, msg, tc; //  &quot;1t-cargopod&quot;
		let type = itm.commodity;
		let quantity = parseInt(itm.commodityAmount);

		tc = pr + &quot;(retry)&quot;;
		if (!type) { // initialise RFID-broken 1t-cargopod: set content (null, 0)
			// retry pod : type = &quot;null&quot;; quantity = 0;
			if (this.logging) log(this.name, &quot;initialised a &quot; + tc + &quot;: &quot; + type + &quot;[&quot; + quantity + &quot;] for &quot; + n + &quot;-scooping&quot;);

			// all types of retrypod spawned random standart 1t-cargopod
			var p;
			if (itm &amp;&amp; itm.hasRole(&quot;pods_UPS_retryPod&quot;)) {
				p = scr.spawn(&quot;[ups-barrel]&quot;, 1);
			} else if (itm &amp;&amp; itm.hasRole(&quot;pods_CCL_retryPod&quot;)) {
				p = scr.spawn(&quot;[ccl_crateB]&quot;, 1);
			} else if (itm &amp;&amp; itm.hasRole(&quot;pods_CWT_retryPod&quot;)) {
				p = scr.spawn(&quot;[hexapod_c]&quot;, 1);
			} else {
				p = scr.spawn(&quot;[barrel]&quot;, 1);
			}
			if (p &amp;&amp; type &amp;&amp; quantity) p[0].setCargo(type, quantity); // else error
			if (scr.isPlayer) wp._delayedMsg(&quot;ALERT - Cargo pod misaligned in scoops. Ejecting - please retry.&quot;, 2);
		} else { // pre-set cargopod
			if (this.logging) log(this.name, &quot;identified a pre-set &quot; + tc + &quot;: &quot; + type + &quot;[&quot; + quantity + &quot;] for &quot; + n + &quot;-scooping&quot;);

			// events and messages
			if (scr.isPlayer) {
				msg = wp._msgCargo(type, quantity); // has_scoop_message = no
				player.consoleMessage(msg, 6);
			}
		}
		if (this.logging) log(this.name, n + &quot; scooped: &quot; + type);
	}
}
</pre></td>
                </tr>
                <tr>
                    <td valign="top">Scripts/pods_standardPod-t.js</td>
                    <td><pre>this.name 			= &quot;pods_standardPod-1t&quot;;
this.author 		= &quot;Thargoid &amp; Rustem&quot;;
this.copyright		= &quot;Creative Commons: attribution, non-commercial, sharealike with clauses - see readme.txt&quot;;
this.description 	= &quot;A smaller script for alternative standard 1t pods, random content, perhaps with trumble. Used for external dependency barrels.&quot;;

this.logging = false; // false for release

this.shipWasScooped = function (scooper) {
	&quot;use strict&quot;;
	// initialise scooper
	var n, scr = scooper;
	if (scr.isPlayer) {
		n = &quot;player&quot;;
	} else {
		n = &quot;npc&quot;;
	}
	// initialise item
	var itm = this.ship;
	var dk = itm.dataKey;
	var pr = itm.primaryRole;

	var wp = worldScripts.pods;
	if (wp) {
		var cargo, msg, tc; //  &quot;1t-cargopod&quot;
		let type = itm.commodity;
		let quantity = parseInt(itm.commodityAmount);

		tc = pr + &quot;(1t-random)&quot;;
		if (!type) { // initialise RFID-broken 1t-cargopod: check scriptInfo and set content (type, quantity)
			// initialise cargo type // TODO: need edit/delete trumble part. //quantity = 1;
			if (scr.isPlayer &amp;&amp; missionVariables.novacount &amp;&amp; player.ship.equipmentStatus(&quot;EQ_TRUMBLE&quot;) === &quot;EQUIPMENT_UNAVAILABLE&quot;) {
				type = &quot;trumble&quot;;
			} else // set random cargo in the 1t-cargopod
			{
				type = expandDescription(&#39;[pods_contentTons]&#39;);
			}
			if (this.logging) log(this.name, &quot;initialised a &quot; + tc + &quot;: &quot; + type + &quot;[&quot; + quantity + &quot;] for &quot; + n + &quot;-scooping&quot;);

			// set a barrel
			itm.setCargo(type, quantity);

			// events and messages
			if (scr.isPlayer) {
				if (type !== &quot;trumble&quot;) {
					msg = wp._msgCargo(type, quantity); // standart named cargo
					wp._delayedMsg(msg, 2);
					// reset / broken RFID for 1t-cargopod role
					if (worldScripts[&quot;Cargo Scanner&quot;] &amp;&amp; itm.shipUniqueName) itm.shipUniqueName = displayNameForCommodity(type);
				} else {
					wp._scoopTrumbleRoutines(scr, itm, type, this.logging);
				}
			}
		} else { // pre-set 1t-cargopod
			if (this.logging) log(this.name, &quot;identified a pre-set &quot; + tc + &quot;: &quot; + type + &quot;[&quot; + quantity + &quot;] for &quot; + n + &quot;-scooping&quot;);

			// events and messages
			if (scr.isPlayer) {
				msg = wp._msgCargo(type, quantity); // has_scoop_message = no
				player.consoleMessage(msg, 6); // wp._delayedMsg(msg, 1);

				// perhaps for trumbles
				if (((type === &quot;food&quot; || type === &quot;furs&quot;) &amp;&amp; Math.random() &lt; 0.1) ||
					(missionVariables.novacount &amp;&amp; player.ship.equipmentStatus(&quot;EQ_TRUMBLE&quot;) === &quot;EQUIPMENT_UNAVAILABLE&quot;)) {

					wp._scoopTrumbleRoutines(scr, itm, type, this.logging);
				}
			}
		}
		if (this.logging) log(this.name, n + &quot; scooped a random pod: &quot; + type);
	}
}
</pre></td>
                </tr>
                <tr>
                    <td valign="top">Scripts/pods_standardPod.js</td>
                    <td><pre>this.name 			= &quot;pods_standardPod&quot;;
this.author 		= &quot;Thargoid&quot;;
this.copyright 		= &quot;Creative Commons: attribution, non-commercial, sharealike with clauses - see readme.txt&quot;;
this.description 	= &quot;Generates message and award for alternative standard 1t pods&quot;;

this.logging = false; // false for release

this.shipWasScooped = function (scooper) {
	&quot;use strict&quot;;
	// initialise scooper
	var n, scr = scooper;
	if (scr.isPlayer) {
		n = &quot;player&quot;;
	} else {
		n = &quot;npc&quot;;
	}
	// initialise item
	var itm = this.ship;
	var dk = itm.dataKey;
	var pr = itm.primaryRole;

	var wp = worldScripts.pods;
	if (wp) {
		var cargo, msg, tc; //  &quot;1t-cargopod&quot;
		let type = itm.commodity;
		let quantity = parseInt(itm.commodityAmount);

		tc = pr + &quot;(standard)&quot;;
		if (!type) { // initialise RFID-broken 1t-cargopod: check scriptInfo and set content (type, quantity)
			// initialise cargo type
			type = itm.scriptInfo.podType; //quantity = 1;
			switch (type) {
				case &quot;food&quot;:
					{
						cargo = expandDescription(&#39;[pods_food]&#39;);
						break;
					}
				case &quot;textiles&quot;:
					{
						cargo = expandDescription(&#39;[pods_textiles]&#39;);
						break;
					}
				case &quot;radioactives&quot;:
					{
						cargo = expandDescription(&#39;[pods_radioactives]&#39;);
						break;
					}
				case &quot;slaves&quot;:
					{
						cargo = expandDescription(&#39;[pods_slaves]&#39;);
						break;
					}
				case &quot;liquor_wines&quot;:
					{
						cargo = expandDescription(&#39;[pods_liquorWines]&#39;);
						break;
					}
				case &quot;luxuries&quot;:
					{
						cargo = expandDescription(&#39;[pods_luxuries]&#39;);
						break;
					}
				case &quot;narcotics&quot;:
					{
						cargo = expandDescription(&#39;[pods_narcotics]&#39;);
						break;
					}
				case &quot;computers&quot;:
					{
						cargo = expandDescription(&#39;[pods_computers]&#39;);
						break;
					}
				case &quot;machinery&quot;:
					{
						cargo = expandDescription(&#39;[pods_machinery]&#39;);
						break;
					}
				case &quot;alloys&quot;:
					{
						cargo = expandDescription(&#39;[pods_alloys]&#39;);
						break;
					}
				case &quot;firearms&quot;:
					{
						cargo = expandDescription(&#39;[pods_firearms]&#39;);
						break;
					}
				case &quot;furs&quot;:
					{
						cargo = expandDescription(&#39;[pods_furs]&#39;);
						break;
					}
				case &quot;minerals&quot;:
					{
						cargo = expandDescription(&#39;[pods_minerals]&#39;);
						break;
					}
			}
			if (!cargo || cargo === &quot;&quot; || !type || type === &quot;&quot;) {
				log(this.name, &quot;ERROR: Unable to set correct a cargo type by standard routine in the [&quot; + dk + &quot;]&quot;);
				return;
			}
			if (this.logging) log(this.name, &quot;initialised a &quot; + tc + &quot;: &quot; + type + &quot;[&quot; + quantity + &quot;] for &quot; + n + &quot;-scooping&quot;);

			// set a barrel
			itm.setCargo(type, quantity); // : save a barrel // scr.manifest[type] += quantity;  // : set a new barrel for player

			// events and messages
			if (scr.isPlayer) {
				msg = &quot;1 ton &quot; + cargo + &quot; (&quot; + displayNameForCommodity(type) + &quot;)&quot;; // description named cargo / msg = wp._msgCargo(type,quantity); // standart named cargo
				wp._delayedMsg(msg, 2);
				// reset / broken RFID for 1t-cargopod role
				if (worldScripts[&quot;Cargo Scanner&quot;] &amp;&amp; itm.shipUniqueName) itm.shipUniqueName = displayNameForCommodity(type);
			}
		} else { // for pre-set 1t-cargopod
			if (this.logging) log(this.name, &quot;identified a pre-set &quot; + tc + &quot;: &quot; + type + &quot;[&quot; + quantity + &quot;] for &quot; + n + &quot;-scooping&quot;);

			// events and messages
			if (scr.isPlayer) {
				msg = wp._msgCargo(type, quantity); // has_scoop_message = no
				player.consoleMessage(msg, 6); // wp._delayedMsg(msg, 1);
			}
		}
		if (this.logging) log(this.name, n + &quot; scooped a standard pod: &quot; + type);
	}
}
</pre></td>
                </tr>
                <tr>
                    <td valign="top">Scripts/pods_trumblePod.js</td>
                    <td><pre>this.name 			= &quot;pods_trumblePod&quot;;
this.author 		= &quot;Thargoid&quot;;
this.copyright 		= &quot;Creative Commons: attribution, non-commercial, sharealike with clauses - see readme.txt&quot;;
this.description 	= &quot;Script for a pod with a trumble in it. OK so I succumbed ;)&quot;;

this.logging = false; // false for release

this.shipWasScooped = function (scooper) {
	&quot;use strict&quot;;
	// initialise scooper
	var n, scr = scooper;
	if (scr.isPlayer) {
		n = &quot;player&quot;;
	} else {
		n = &quot;npc&quot;;
	}
	// initialise item
	var itm = this.ship;
	var dk = itm.dataKey;
	var pr = itm.primaryRole;

	var wp = worldScripts.pods;
	if (wp) {
		var cargo, msg, tc; //  &quot;1t-cargopod&quot;
		let type = itm.commodity;
		let quantity = parseInt(itm.commodityAmount);

		tc = pr + &quot;(trumble)&quot;;
		if (!type) { // initialise RFID-broken 1t-cargopod: check scriptInfo and set content (type, quantity)
			// set 1 food or furs in the trumble pod for NPC //quantity = 1;
			if (scr.isPlayer) {
				if (this._checkTrumble()) {
					type = &quot;trumble&quot;;
				} else type = expandDescription(&#39;[pods_contentTons]&#39;); // set random cargo in the cargopod for player
			} else type = (Math.random() &gt; 0.75 ? &quot;food&quot; : &quot;furs&quot;);
			if (this.logging) log(this.name, &quot;initialised a &quot; + tc + &quot;: &quot; + type + &quot;[&quot; + quantity + &quot;] for &quot; + n + &quot;-scooping&quot;);

			// set a barrel
			itm.setCargo(type, quantity);

			// events and messages
			if (scr.isPlayer) {
				if (!this.$isTrumble) {
					msg = wp._msgCargo(type, quantity); // standart named cargo
					wp._delayedMsg(msg, 2);
					// reset / broken RFID for 1t-cargopod role
					if (worldScripts[&quot;Cargo Scanner&quot;] &amp;&amp; itm.shipUniqueName) itm.shipUniqueName = displayNameForCommodity(type);
				} else {
					wp._addTrumbleRoutines(scr, itm, type, this.logging);
				}
			}
		} else { // pre-set 1t-cargopod
			if (this.logging) log(this.name, &quot;identified a pre-set &quot; + tc + &quot;: &quot; + type + &quot;[&quot; + quantity + &quot;] for &quot; + n + &quot;-scooping&quot;);

			// events and messages
			if (scr.isPlayer) {
				//msg = wp._msgCargo(type, quantity); // has_scoop_message = yes
				//player.consoleMessage(msg, 6);

				// perhaps for trumbles
				if (this._checkTrumble()) {
					wp._addTrumbleRoutines(scr, itm, type, this.logging);
				}
			}
		}
		if (this.logging) log(this.name, n + &quot; scooped a trumble pod: &quot; + type);
	}
}

this.$isTrumble = false;

this._checkTrumble = function () {
	if (player.trumbleCount &gt; 0 ||
		missionVariables.trumbles === &quot;TRUMBLE_BOUGHT&quot; &amp;&amp; Math.random() &lt; 0.1 ||
		missionVariables.novacount &amp;&amp; player.ship.equipmentStatus(&quot;EQ_TRUMBLE&quot;) === &quot;EQUIPMENT_UNAVAILABLE&quot;) {
		this.$isTrumble = true
	}
	return this.$isTrumble
}
</pre></td>
                </tr>
            </table>
        </a>
    </body>
</html>
