<html>
    <head>
        <title>Expansion Neo-Docklights</title>
        <link rel="stylesheet" href="../style.css">
    </head>
    <body>
        <table border="0" width="100%">
            <tr>
                <td>Back to <a href='../index.html'>Index</a></td>
                <td align="right"><small>Page generated: Oct 11, 2023, 3:16:49 PM</small></td>
            </tr>
        </table>

        <h1>Expansion Neo-Docklights</h1>

        <h2>Content</h2>
        <ul>
          <li><a href="#warnings">Warnings</a></li>
          <li><a href="#manifest">Manifest</a></li>
          <li><a href="#documentation">Documentation</a></li>
          <li><a href="#equipment">0 Equipment</a></li>
          <li><a href="#ships">0 Ships</a></li>
          <li><a href="#models">0 Models</a></li>
          <li><a href="#scripts">1 Scripts</a></li>
        </ul>

          <a name="warnings">
            <h2>Warnings</h2>
            <ol>
                <li>Tags mismatch between OXP Manifest and Expansion Manager at character position 0002 (RIGHT SQUARE BRACKET vs LATIN SMALL LETTER S)(&#39;[]&#39; vs &#39;[station, equipment]&#39;)</li>
            </ol>
          </a>

        <a name="manifest">
        <h2>Manifest</h2>
            <table border="1">
                <tr>
                    <th></th>
                    <th>from Expansion Manager's OXP list</th>
                    <th>from Expansion Manifest</th>
                </tr>
                <tr>
                    <td>Description</td>
                    <td>Adds a row of lights to the system main station to aid approach and docking. These change colour depending whether the approach is clear or not.</td>
                    <td>Adds a row of lights to the system main station to aid approach and docking. These change colour depending whether the approach is clear or not.</td>
                </tr>
                <tr>
                    <td>Identifier</td>
                    <td>oolite.oxp.Thargoid.Neo-Docklights</td>
                    <td>oolite.oxp.Thargoid.Neo-Docklights</td>
                </tr>
                <tr>
                    <td>Title</td>
                    <td>Neo-Docklights</td>
                    <td>Neo-Docklights</td>
                </tr>
                <tr>
                    <td>Category</td>
                    <td>Equipment</td>
                    <td>Equipment</td>
                </tr>
                <tr>
                    <td>Author</td>
                    <td>Thargoid</td>
                    <td>Thargoid</td>
                </tr>
                <tr>
                    <td>Version</td>
                    <td>1.00</td>
                    <td>1.00</td>
                </tr>
                <tr>
                    <td>Tags</td>
                    <td></td>
                    <td>station, equipment</td>
                </tr>
                <tr>
                    <td>Required Oolite Version</td>
                    <td></td>
                    <td></td>
                </tr>
                <tr>
                    <td>Maximum Oolite Version</td>
                    <td></td>
                    <td></td>
                </tr>
                <tr>
                    <td>Required Expansions</td>
                    <td>
                    </td>
                    <td>
                    </td>
                </tr>
                <tr>
                    <td>Optional Expansions</td>
                    <td>
                    </td>
                    <td>
                    </td>
                </tr>
                <tr>
                    <td>Conflict Expansions</td>
                    <td>
                    </td>
                    <td>
                    </td>
                </tr>
                <tr>
                    <td>Information URL</td>
                    <td><a target="_blank" href="http://wiki.alioth.net/index.php/Neo-Docklights_OXP">http://wiki.alioth.net/index.php/Neo-Docklights_OXP</a></td>
                    <td><a target="_blank" href="">n/a</a></td>
                </tr>
                <tr>
                    <td>Download URL</td>
                    <td><a target="_blank" href="https://wiki.alioth.net/img_auth.php/0/00/Neo-DockLights_1.00.oxz">https://wiki.alioth.net/img_auth.php/0/00/Neo-DockLights_1.00.oxz</a></td>
                    <td><a target="_blank" href="">n/a</a></td>
                </tr>
                <tr>
                    <td>License</td>
                    <td>Creative Commons Attribution - Non-Commercial - Share Alike 3.0 license with clauses - see readme file</td>
                    <td>Creative Commons Attribution - Non-Commercial - Share Alike 3.0 license with clauses - see readme file</td>
                </tr>
                <tr>
                    <td>File Size</td>
                    <td>n/a</td>
                </tr>
                <tr>
                    <td>Upload date</td>
                    <td>1610873209</td>
                </tr>
            </table>
                </a>

        <a name="documentation">
        <h2>Documentation</h2>
        <p>Also read <a href='http://wiki.alioth.net/index.php/Neo-Docklights'>http://wiki.alioth.net/index.php/Neo-Docklights</a></p>
        <h3>Neo-DockLights v1.00 Readme &amp; License.txt</h3>
        <pre>Neo-Docklights OXP by Thargoid.

A little OXP, inspired by a suggestion by Disembodied. It adds a trail of docking lights in front of the system main station in systems of tech level 3 and over. These are usually green, but turn red if the ship is about to launch or dock (basically if a ship will launch or is in the launch corridor, they will be red).

Designed as an aid for new players to help with docking - just line up on the lights and follow them in whilst matching the station rotation. You can fly through them without any risk.

It should also be noted that for most ships (trunk and OXP) the players view position is not along the central line of the ship (in the up/down direction). Hence you may need to allow for this when lining up for docking. Try to aim the centre-line of your ship through the trail, rather than the centre of your forward view for best effect.

This OXP is an evolution of the old DockLights OXP, and uses Cim&#39;s new visual effects class. Thus it requires Oolite version 1.77 or above to work.

--------------------------------------------------------------
License:

This OXP is released under the Creative Commons Attribution - Non-Commercial - Share Alike 3.0 license with the following clauses:

* Whilst you are free (and encouraged) to re-use any of the scripting, models or texturing in this OXP, the usage must be distinct from that within this OXP. Unique identifiers such as (but not limited to) unique shipdata.plist entity keys, mission variables, script names (this.name), equipment identity strings (EQ_), description list arrays and entity roles must not be re-used without prior agreement.
* rebundling of this OXP within another distribution is permitted as long as it is unchanged. The following derivates however are permitted and except from the above:
	* the conversion of files between XML and openStep.
	* the merging of files with other files of the same type from other OXPs.
* Even though it is not compulsory, if you are re-using any sizable or recognisable piece of this OXP, please let me know :)

--------------------------------------------------------------
Instructions:

Unzip the file, and then move the folder &quot;Neo-Docklights 1.00.oxp&quot; to the AddOns directory of your Oolite installation. 

--------------------------------------------------------------
Version history:

08/01/2013 - First release, version 1.00

--------------------------------------------------------------

Acknowledgements:

With thanks to Disembodied for the suggestion, and various forum members for work and ideas on the issues that this OXP seems to be exposing.

And for the revision of to Neo Docklights, to Cim for his work on the visual effects new code in Oolite 1.77, and for being so patient with my suggestions and requests for features etc.</pre>
        </a>

        <a name="equipment">          
        <h2>Equipment</h2>
            This expansion declares no equipment. This may be related to warnings.
        </a>

        <a name="ships">    
        <h2>Ships</h2>
            This expansion declares no ships. This may be related to warnings.
        </a>

        <a name="models">    
        <h2>Models</h2>
            This expansion declares no models. This may be related to warnings.
        </a>

        <a name="scripts">    
        <h2>Scripts</h2>
            <table>
                <tr>
                    <th>Path</th>
                </tr>
                <tr>
                    <td valign="top">Config/script.js</td>
                    <td><pre>this.name           = &quot;neoDockLights_worldScript.js&quot;;
this.author         = &quot;Thargoid&quot;;
this.copyright      = &quot;Creative Commons: attribution, non-commercial, sharealike with clauses - see readme.txt&quot;;
this.description    = &quot;World script for the new dock lights OXP&quot;;
this.version        = &quot;0.10&quot;;
&quot;use strict&quot;;

this.shipWillLaunchFromStation = function(station)
	{ if(station.isMainStation) { this.shipEnteredStationAegis(); } }	
	
this.shipWillDockWithStation = function(station)
	{ if(station.isMainStation) { this.shipDied(); } }	

this.shipEnteredStationAegis = function()
	{
	if(system.isInterstellarSpace || !system.mainStation || !system.mainStation.isValid || system.techLevel &lt; 2)
		{ return; }
	
	this.lightsPosition = system.mainStation.position.add(system.mainStation.vectorForward.multiply(10000));
	this.lights = system.addVisualEffect(&quot;dockLights_green&quot;, this.lightsPosition);
	this.lights.orientation = system.mainStation.orientation;
	this.lightsStatus = &quot;GREEN&quot;;
	
	this.lightsTimer = new Timer(this, this.setLights, 0, 0.25);
	}

this.setLights = function()
	{
	if(!system.mainStation) 
		{
		this.shipDied();
		return; 
		}
	
	function dockingShips(entity) {return entity.isShip &amp;&amp; !entity.hasRole(&quot;buoy&quot;) &amp;&amp; ((entity.position.distanceTo(system.mainStation.position) + entity.position.distanceTo(this.lights.position)) &lt; 10100)}
	var incomingArray = system.filteredEntities(this, dockingShips, system.mainStation, 10000);

	this.lightsPosition = system.mainStation.position.add(system.mainStation.vectorForward.multiply(10000));
	
	if(incomingArray.length &gt; 0 &amp;&amp; this.lightsStatus === &quot;GREEN&quot;)
		{ 
		this.removeLights();
		this.lights = system.addVisualEffect(&quot;dockLights_red&quot;, this.lightsPosition);	
		this.lights.orientation = system.mainStation.orientation;
		this.lightsStatus = &quot;RED&quot;;		
		return;
		}
		
	if(incomingArray.length === 0 &amp;&amp; this.lightsStatus === &quot;RED&quot;)
		{ 
		this.removeLights();
		this.lights = system.addVisualEffect(&quot;dockLights_green&quot;, this.lightsPosition);
		this.lights.orientation = system.mainStation.orientation;
		this.lightsStatus = &quot;GREEN&quot;;
		return;
		}
	}
	
this.shipDied = this.shipWillEnterWitchspace =  this.shipExitedStationAegis = function()
	{
	this.removeLights();
	if(this.lightsTimer) 
		{
		this.lightsTimer.stop();
		delete this.lightsTimer;
		}
	}	
	
this.removeLights = function()
	{
	var count = system.allVisualEffects.length;
	if(count === 0) { return; }
	for (var i=count-1; i&gt;=0; i--)
		{
		if(system.allVisualEffects[i].dataKey === &quot;dockLights_green&quot; || system.allVisualEffects[i].dataKey === &quot;dockLights_red&quot;)
			{ system.allVisualEffects[i].remove(); }
		}
	}
	</pre></td>
                </tr>
            </table>
        </a>
    </body>
</html>
