<html>
    <head>
        <title>Expansion telescope_StationOptions</title>
        <link rel="stylesheet" href="../style.css">
    </head>
    <body>
        <table border="0" width="100%">
            <tr>
                <td>Back to <a href='../index.html'>Index</a></td>
                <td align="right"><small>Page generated: Oct 11, 2023, 3:16:49 PM</small></td>
            </tr>
        </table>

        <h1>Expansion telescope_StationOptions</h1>

        <h2>Content</h2>
        <ul>
          <li><a href="#warnings">Warnings</a></li>
          <li><a href="#manifest">Manifest</a></li>
          <li><a href="#documentation">Documentation</a></li>
          <li><a href="#equipment">0 Equipment</a></li>
          <li><a href="#ships">0 Ships</a></li>
          <li><a href="#models">0 Models</a></li>
          <li><a href="#scripts">1 Scripts</a></li>
        </ul>

          <a name="warnings">
            <h2>Warnings</h2>
            <ol>
                <li>http://wiki.alioth.net/index.php/telescope_StationOptions -&gt; 404 Not Found</li>
                <li>Required Expansions mismatch between OXP Manifest and Expansion Manager at character position 0060 (DIGIT ZERO vs LATIN SMALL LETTER N)</li>
                <li>Conflict Expansions mismatch between OXP Manifest and Expansion Manager at character position 0064 (DIGIT ZERO vs LATIN SMALL LETTER N)</li>
                <li>Information URL mismatch between OXP Manifest and Expansion Manager string length at character position 0</li>
            </ol>
          </a>

        <a name="manifest">
        <h2>Manifest</h2>
            <table border="1">
                <tr>
                    <th></th>
                    <th>from Expansion Manager's OXP list</th>
                    <th>from Expansion Manifest</th>
                </tr>
                <tr>
                    <td>Description</td>
                    <td>Adds Station Options to access Telescope 1.15 options/readme using F4.</td>
                    <td>Adds Station Options to access Telescope 1.15 options/readme using F4.</td>
                </tr>
                <tr>
                    <td>Identifier</td>
                    <td>oolite.oxp.cag.telescope_StationOptions.oxp</td>
                    <td>oolite.oxp.cag.telescope_StationOptions.oxp</td>
                </tr>
                <tr>
                    <td>Title</td>
                    <td>telescope_StationOptions</td>
                    <td>telescope_StationOptions</td>
                </tr>
                <tr>
                    <td>Category</td>
                    <td>Equipment</td>
                    <td>Equipment</td>
                </tr>
                <tr>
                    <td>Author</td>
                    <td>cag</td>
                    <td>cag</td>
                </tr>
                <tr>
                    <td>Version</td>
                    <td>1.0</td>
                    <td>1.0</td>
                </tr>
                <tr>
                    <td>Tags</td>
                    <td></td>
                    <td></td>
                </tr>
                <tr>
                    <td>Required Oolite Version</td>
                    <td></td>
                    <td></td>
                </tr>
                <tr>
                    <td>Maximum Oolite Version</td>
                    <td></td>
                    <td></td>
                </tr>
                <tr>
                    <td>Required Expansions</td>
                    <td>
                            <li>oolite.oxp.Norby.Telescope:0</li>
                            <li>oolite.oxp.cag.station_options:1.0</li>
                    </td>
                    <td>
                            <li>oolite.oxp.Norby.Telescope:</li>
                            <li>oolite.oxp.cag.station_options:1.0</li>
                    </td>
                </tr>
                <tr>
                    <td>Optional Expansions</td>
                    <td>
                    </td>
                    <td>
                    </td>
                </tr>
                <tr>
                    <td>Conflict Expansions</td>
                    <td>
                            <li>oolite.oxp.Norby.cag.Telescope:0</li>
                    </td>
                    <td>
                            <li>oolite.oxp.Norby.cag.Telescope:</li>
                    </td>
                </tr>
                <tr>
                    <td>Information URL</td>
                    <td><a target="_blank" href=""></a></td>
                    <td><a target="_blank" href="">n/a</a></td>
                </tr>
                <tr>
                    <td>Download URL</td>
                    <td><a target="_blank" href="https://wiki.alioth.net/img_auth.php/6/63/Telescope_StationOptions.oxz">https://wiki.alioth.net/img_auth.php/6/63/Telescope_StationOptions.oxz</a></td>
                    <td><a target="_blank" href="">n/a</a></td>
                </tr>
                <tr>
                    <td>License</td>
                    <td>CC-BY-NC-SA 4.0</td>
                    <td>CC-BY-NC-SA 4.0</td>
                </tr>
                <tr>
                    <td>File Size</td>
                    <td>n/a</td>
                </tr>
                <tr>
                    <td>Upload date</td>
                    <td>1645499173</td>
                </tr>
            </table>
                </a>

        <a name="documentation">
        <h2>Documentation</h2>
        
        <h3>readme.txt</h3>
        <pre>A cut/paste quick &amp; dirty retrofit to demo StationOptions.oxp.

When docked, hit F4 and look for &quot;Telescope Options&quot;</pre>
        </a>

        <a name="equipment">          
        <h2>Equipment</h2>
            This expansion declares no equipment. This may be related to warnings.
        </a>

        <a name="ships">    
        <h2>Ships</h2>
            This expansion declares no ships. This may be related to warnings.
        </a>

        <a name="models">    
        <h2>Models</h2>
            This expansion declares no models. This may be related to warnings.
        </a>

        <a name="scripts">    
        <h2>Scripts</h2>
            <table>
                <tr>
                    <th>Path</th>
                </tr>
                <tr>
                    <td valign="top">Config/script.js</td>
                    <td><pre>this.name		 = &quot;telescope_StationOptions&quot;;
this.author		 = &quot;cag, Cholmondely&quot;;
this.copyright	 = &quot;2021 cag, Cholmondely&quot;;
this.license	 = &quot;CC BY-NC-SA 4.0&quot;;
this.description = &quot;Access Telescope while docked at Station&quot;;
this.version	 = &quot;1.0&quot;;

/* jshint elision: true, shadow: true, esnext: true, curly: false, maxerr: 1000, asi: true,
		  laxbreak: true, undef: true, unused: true, evil: true,  forin: true, eqnull: true,
		  noarg: true, eqeqeq: true, boss: true, loopfunc: true, strict: true, nonew: true, noempty: false
*/

/*jslint indent: 4, white: true, debug: true, continue: true, sub: true, css: false, todo: true,
		 on: false, fragment: false, vars: true, nomen: true, plusplus: true, bitwise: true,
		 regexp: true, newcap: true, unparam: true, sloppy: true, eqeq: true, stupid: true
*/

/* global log, player, worldScripts
*/


this.startUp = function startUp() {
	var tso = worldScripts.telescope_StationOptions;
	var ws = worldScripts.telescope;
	var so = worldScripts.station_options;

	if( !so ) {
		log( &quot;telescope_StationOptions&quot;, &#39;\nstartUp, station_options oxp is missing!\n&#39; );
		return;
	}	
	if( !ws ) {
		log( &quot;telescope_StationOptions&quot;, &#39;\nstartUp, telescope oxp is missing!\n&#39; );
		return;
	}
	var version = parseFloat(ws.version);
	if( version &gt;= 2.0 ) {
		log( &quot;telescope_StationOptions&quot;, &#39;\nstartUp, telescope version is &#39; + ws.version 
				+ &#39;, aborting.  This oxp is only for earlier versions of telescope.\n&#39; );
		return;
	}
	if( version &lt; 1.13 ) {		// introduced in 1.13
		ws.$TelescopeBrightMassLockBorders = false;
	}
	tso._loadSavedOptions();
	ws.playerWillSaveGame = tso.playerWillSaveGame;
	try {
		// initialize station options and pass callback functions
		so.$O_initStationOptions( ws, 					// reference to oxp script
								&#39;telescope_&#39;, 			// string that begins all keys in missiontext.plist
								tso._stnOptionsAllowed, // reference to script function
								true, 					// call playerWillSaveGame? (telescope oxp has none)
								tso._reloadFromStn );	// reference to script function
		if( tso._stnOptionsAllowed() ) {
			// ensure a loaded game will have so&#39;s interface set
			so.equipmentAdded();
		}
	} catch( err ) {
		log( &quot;telescope_StationOptions&quot;, &#39;\nstartUp, &#39; + err + &#39;\n&#39;);
		throw err;
	}
}

this._stnOptionsAllowed = function _stnOptionsAllowed() {
	var ws = worldScripts.telescope;
	var ps = player &amp;&amp; player.ship;
/* 
	log(&quot;telescope_StationOptions&quot;, &#39;_stnOptionsAllowed, equipmentStatus = &#39; + ps.equipmentStatus( &#39;EQ_TELESCOPE&#39; ) 
		+ &#39;, TelescopeFixedTel = &#39; + ws.$TelescopeFixedTel );
 */		
	return ps &amp;&amp; ps.equipmentStatus( &#39;EQ_TELESCOPE&#39; ) === &#39;EQUIPMENT_OK&#39;
			  &amp;&amp; ws.$TelescopeFixedTel !== 1;
}

this._reloadFromStn = function _reloadFromStn( names, pages ) {
	log(&quot;telescope_StationOptions&quot;, &#39;_reloadFromStn, pages = &#39; + pages + &#39;\n\t names = &#39; + names );
}

this._loadSavedOptions = function _loadSavedOptions() {
	var item, ws = worldScripts.telescope;
	
	if( !ws ) 
		return;
	item = missionVariables.$TelescopeAutoScan;
	if( item === null ) 
		return;		// none were saved
	ws.$TelescopeAutoScan = item;
	item = missionVariables.$TelescopeAutoScanMaxRange;
	if( item !== null ) 
		ws.$TelescopeAutoScanMaxRange = item;
	item = missionVariables.$TelescopeAutoLock;
	if( item !== null ) 
		ws.$TelescopeAutoLock = item;
	item = missionVariables.$TelescopeFarStatus;
	if( item !== null ) 
		ws.$TelescopeFarStatus = item;
	item = missionVariables.$TelescopeGravLock;
	if( item !== null ) 
		ws.$TelescopeGravLock = item;
	item = missionVariables.$TelescopeIdentLock;
	if( item !== null ) 
		ws.$TelescopeIdentLock = item;
	item = missionVariables.$TelescopeLargeLightBalls;
	if( item !== null ) 
		ws.$TelescopeLargeLightBalls = item;
	item = missionVariables.$TelescopeLightBalls;
	if( item !== null ) 
		ws.$TelescopeLightBalls = item;
	item = missionVariables.$TelescopeMassLockBorders;
	if( item !== null ) 
		ws.$TelescopeMassLockBorders = item;
	item = missionVariables.$TelescopeBrightMassLockBorders;
	if( item !== null ) 
		ws.$TelescopeBrightMassLockBorders = item;
	item = missionVariables.$TelescopeRedAlertDist;
	if( item !== null ) 
		ws.$TelescopeRedAlertDist = item;
	item = missionVariables.$TelescopeRedAlertLimiter;
	if( item !== null ) 
		ws.$TelescopeRedAlertLimiter = item;
	item = missionVariables.$TelescopeRing;
	if( item !== null ) 
		ws.$TelescopeRing = item;
	item = missionVariables.$TelescopeShipLightBalls;
	if( item !== null ) 
		ws.$TelescopeShipLightBalls = item;
	item = missionVariables.$TelescopeShowVisualQuestionMark;
	if( item !== null ) 
		ws.$TelescopeShowVisualQuestionMark = item;
	item = missionVariables.$TelescopeShowVisualStation;
	if( item !== null ) 
		ws.$TelescopeShowVisualStation = item;
	item = missionVariables.$TelescopeShowVisualTarget;
	if( item !== null ) 
		ws.$TelescopeShowVisualTarget = item;
	item = missionVariables.$TelescopeSniperMinRange;
	if( item !== null ) 
		ws.$TelescopeSniperMinRange = item;
	item = missionVariables.$TelescopeSniperRange;
	if( item !== null ) 
		ws.$TelescopeSniperRange = item;
	item = missionVariables.$TelescopeSniperRingSize;
	if( item !== null ) 
		ws.$TelescopeSniperRingSize = item;
	item = missionVariables.$TelescopeSteering;
	if( item !== null ) 
		ws.$TelescopeSteering = item;
	item = missionVariables.$TelescopeTargets;
	if( item !== null ) 
		ws.$TelescopeTargets = item;
	
	// this was only meant for testing, remove it!
	item = missionVariables.$TelescopeThargoids;
	if( item !== null ) {
		delete missionVariables.$TelescopeThargoids;
		ws.$TelescopeThargoids = false;
		// ws.$TelescopeThargoids = item;
	}
	
	item = missionVariables.$TelescopeVMarkMinDist;
	if( item !== null ) 
		ws.$TelescopeVMarkMinDist = item;
	item = missionVariables.$TelescopeVMarkShipMinDist;
	if( item !== null ) 
		ws.$TelescopeVMarkShipMinDist = item;
	
	item = missionVariables.$TelescopeVPosHUD;
	if( item !== null ) 
		ws.$TelescopeVPosHUD = JSON.parse( item );
	
	item = missionVariables.$TelescopeVSize;
	if( item !== null ) 
		ws.$TelescopeVSize = item;
	item = missionVariables.$TelescopeVZoomSize;
	if( item !== null ) 
		ws.$TelescopeVZoomSize = item;
}

this.playerWillSaveGame = function playerWillSaveGame() {
	var ws = worldScripts.telescope;
	
	if( !ws ) 
		return;

	missionVariables.$TelescopeAutoScan = ws.$TelescopeAutoScan;
	missionVariables.$TelescopeAutoScanMaxRange = ws.$TelescopeAutoScanMaxRange;
	missionVariables.$TelescopeAutoLock = ws.$TelescopeAutoLock;
	missionVariables.$TelescopeFarStatus = ws.$TelescopeFarStatus;
	missionVariables.$TelescopeGravLock = ws.$TelescopeGravLock;
	missionVariables.$TelescopeIdentLock = ws.$TelescopeIdentLock;
	missionVariables.$TelescopeLargeLightBalls = ws.$TelescopeLargeLightBalls;
	missionVariables.$TelescopeLightBalls = ws.$TelescopeLightBalls;
	missionVariables.$TelescopeMassLockBorders = ws.$TelescopeMassLockBorders;
	missionVariables.$TelescopeBrightMassLockBorders = ws.$TelescopeBrightMassLockBorders;
	missionVariables.$TelescopeRedAlertDist = ws.$TelescopeRedAlertDist;
	missionVariables.$TelescopeRedAlertLimiter = ws.$TelescopeRedAlertLimiter;
	missionVariables.$TelescopeRing = ws.$TelescopeRing;
	missionVariables.$TelescopeShipLightBalls = ws.$TelescopeShipLightBalls;
	missionVariables.$TelescopeShowVisualQuestionMark = ws.$TelescopeShowVisualQuestionMark;
	missionVariables.$TelescopeShowVisualStation = ws.$TelescopeShowVisualStation;
	missionVariables.$TelescopeShowVisualTarget = ws.$TelescopeShowVisualTarget;
	missionVariables.$TelescopeSniperMinRange = ws.$TelescopeSniperMinRange;
	missionVariables.$TelescopeSniperRange = ws.$TelescopeSniperRange;
	missionVariables.$TelescopeSniperRingSize = ws.$TelescopeSniperRingSize;
	missionVariables.$TelescopeSteering = ws.$TelescopeSteering;
	missionVariables.$TelescopeTargets = ws.$TelescopeTargets;
	// missionVariables.$TelescopeThargoids = ws.$TelescopeThargoids;
	missionVariables.$TelescopeVMarkMinDist = ws.$TelescopeVMarkMinDist;
	missionVariables.$TelescopeVMarkShipMinDist = ws.$TelescopeVMarkShipMinDist;
	
	missionVariables.$TelescopeVPosHUD = JSON.stringify( ws.$TelescopeVPosHUD );
	
	missionVariables.$TelescopeVSize = ws.$TelescopeVSize;
	missionVariables.$TelescopeVZoomSize = ws.$TelescopeVZoomSize;
}
</pre></td>
                </tr>
            </table>
        </a>
    </body>
</html>
