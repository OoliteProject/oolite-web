<html>
    <head>
        <title>Expansion Armoury</title>
        <link rel="stylesheet" href="../style.css">
    </head>
    <body>
        <table border="0" width="100%">
            <tr>
                <td>Back to <a href='../index.html'>Index</a></td>
                <td align="right"><small>Page generated: Oct 11, 2023, 3:16:49 PM</small></td>
            </tr>
        </table>

        <h1>Expansion Armoury</h1>

        <h2>Content</h2>
        <ul>
          <li><a href="#warnings">Warnings</a></li>
          <li><a href="#manifest">Manifest</a></li>
          <li><a href="#documentation">Documentation</a></li>
          <li><a href="#equipment">46 Equipment</a></li>
          <li><a href="#ships">55 Ships</a></li>
          <li><a href="#models">0 Models</a></li>
          <li><a href="#scripts">27 Scripts</a></li>
        </ul>

          <a name="warnings">
            <h2>Warnings</h2>
            <ol>
                <li>Tags mismatch between OXP Manifest and Expansion Manager at character position 0002 (RIGHT SQUARE BRACKET vs LATIN SMALL LETTER E)(&#39;[]&#39; vs &#39;[equipment, weapons]&#39;)</li>
            </ol>
          </a>

        <a name="manifest">
        <h2>Manifest</h2>
            <table border="1">
                <tr>
                    <th></th>
                    <th>from Expansion Manager's OXP list</th>
                    <th>from Expansion Manifest</th>
                </tr>
                <tr>
                    <td>Description</td>
                    <td>A meta-OXP featuring Anti-Missile System, Captured Thargons, Drones, Missile Rack and Probe OXPs plus some new mines, missiles, bombs and the Missile Machine.</td>
                    <td>A meta-OXP featuring Anti-Missile System, Captured Thargons, Drones, Missile Rack and Probe OXPs plus some new mines, missiles, bombs and the Missile Machine.</td>
                </tr>
                <tr>
                    <td>Identifier</td>
                    <td>oolite.oxp.Thargoid.Armoury</td>
                    <td>oolite.oxp.Thargoid.Armoury</td>
                </tr>
                <tr>
                    <td>Title</td>
                    <td>Armoury</td>
                    <td>Armoury</td>
                </tr>
                <tr>
                    <td>Category</td>
                    <td>Weapons</td>
                    <td>Weapons</td>
                </tr>
                <tr>
                    <td>Author</td>
                    <td>Thargoid</td>
                    <td>Thargoid</td>
                </tr>
                <tr>
                    <td>Version</td>
                    <td>1.21</td>
                    <td>1.21</td>
                </tr>
                <tr>
                    <td>Tags</td>
                    <td></td>
                    <td>equipment, weapons</td>
                </tr>
                <tr>
                    <td>Required Oolite Version</td>
                    <td></td>
                    <td></td>
                </tr>
                <tr>
                    <td>Maximum Oolite Version</td>
                    <td></td>
                    <td></td>
                </tr>
                <tr>
                    <td>Required Expansions</td>
                    <td>
                    </td>
                    <td>
                    </td>
                </tr>
                <tr>
                    <td>Optional Expansions</td>
                    <td>
                    </td>
                    <td>
                    </td>
                </tr>
                <tr>
                    <td>Conflict Expansions</td>
                    <td>
                    </td>
                    <td>
                    </td>
                </tr>
                <tr>
                    <td>Information URL</td>
                    <td><a target="_blank" href="http://wiki.alioth.net/index.php/Armoury_OXP">http://wiki.alioth.net/index.php/Armoury_OXP</a></td>
                    <td><a target="_blank" href="">n/a</a></td>
                </tr>
                <tr>
                    <td>Download URL</td>
                    <td><a target="_blank" href="https://wiki.alioth.net/img_auth.php/9/95/Oolite.oxp.Thargoid.Armoury.oxz">https://wiki.alioth.net/img_auth.php/9/95/Oolite.oxp.Thargoid.Armoury.oxz</a></td>
                    <td><a target="_blank" href="http://wiki.alioth.net/img_auth.php/1/14/Armoury_1.21.oxz">http://wiki.alioth.net/img_auth.php/1/14/Armoury_1.21.oxz</a></td>
                </tr>
                <tr>
                    <td>License</td>
                    <td>Creative Commons Attribution - Non-Commercial - Share Alike 3.0 license with clauses - see readme file</td>
                    <td>Creative Commons Attribution - Non-Commercial - Share Alike 3.0 license with clauses - see readme file</td>
                </tr>
                <tr>
                    <td>File Size</td>
                    <td>n/a</td>
                </tr>
                <tr>
                    <td>Upload date</td>
                    <td>1610873375</td>
                </tr>
            </table>
                </a>

        <a name="documentation">
        <h2>Documentation</h2>
        <p>Also read <a href='http://wiki.alioth.net/index.php/Armoury'>http://wiki.alioth.net/index.php/Armoury</a></p>
        <h3>Readme &amp; License.txt</h3>
        <pre>Armoury OXP by Thargoid.

This is a meta-OXP combining a few of my previous weapons and defense equipment OXPS. It supersedes and replaces the following:

AMS.oxp
Captured Thargons.oxp
Drones.oxp
Missile Rack.oxp
Probe.oxp

Any existing installations of these should be removed, as they are completely incorporated in this OXP and may clash with updates.

This OXP requires Oolite v1.82 or higher, and will not run correctly on previous versions.

-------------------------------------------------------------------------------------------------------------------------------------
Anti-Missile System (AMS):

The Weapons Department of the Aquarian Shipbuilding Corporation would like to present an extension to the recently introduced Missile Analyser. This adds a rack of six anti-missile darts, which when the analyser detects a non-standard missile targeted at the ship, automatically launches to intercept and attempt to destroy them. This is designed to supplement standard ECM systems, which are not always effective on such exotic weaponry.

Once the rack of darts is exhausted, the system will notify the ships pilot before automatically shutting down. The darts can be purchased from any suitable tech level planet, and are sold bundled to replenish the launcher to full capacity.For safety the system automatically goes offline when the ship docks, and comes back online at launch, when it notifies the pilot of its remaining dart count. It can also be deactivated (and reactivated) using the equipment priming keys (n and shift-N by default) whilst in-flight. Launching from a station automatically reactivates the equipment.

Note that the Missile Analyser (by Eric Walch) must be installed on your system and the analyser fitted to the ship for the AMS to operate. Also as the dart must physically intercept the missile, the system is not 100% effective (especially at point-blank range), and even occasionally when interception does occur the missile can survive intact enough to still pose a threat. In this latter case the system will warn the pilot.

-------------------------------------------------------------------------------------------------------------------------------------
Captured Thargons:

Following some recent advances in drone technology and analysis of alien artifacts, the Aquarian Shipbuilding Corporation are proud to be able to offer their latest equipment in the fight against the Thargoid threat. Having taken some captured Thargon robot fighters and reprogrammed them, these can now be slaved to any ship and used in combat in much the same way that the aliens do.

Control is achieved via a special controller, which mounts onto an available missile pylon on the ship. When this is triggered (as with a normal missile or mine), the Thargon fighters are released. They search for alien or hostile craft in the vicinity, and ruthlessly attack any that they find. After combat, the fighters will attempt to return to the vicinity of the ship, where they can be scooped using the crafts fuel scoops for repair and reuse. 

Note that this modification should only be fitted once per craft, and requires fuel scoops to be present. It also only works with the specially reprogrammed Thargon fighters. Any other hostile alien ones cannot be manipulated by this technology, and if scooped will class as &quot;alien items&quot; in the normal way.

The system is available from any tech level 12+ planet, for 5500 credits. Lost or destroyed Thargons can also be replaced new at a cost of 1000 credits each or if you have Thargons scooped during your travels, these can also be reprogrammed for 500 credits each at tech 12+ stations.

-------------------------------------------------------------------------------------------------------------------------------------
Drones:

The Weapons Department of the Aquarian Shipbuilding Corporation would like to present to you their latest range of products. After a recent encounter near to Aqualine with a Thargoid battle-fleet, a small number of Tharglet robot fighters were captured intact and sent for analysis. This has resulted in the production of three types of fighting drone which are now available for to the market to aid commanders in their daily life. 

All versions are &quot;fire and forget&quot; in that they are self-targeting from the ships scanning computers, although if they are not destroyed in action they can be reclaimed via fuel scooping and sometimes re-used, so don&#39;t forget them too much!

* Combat drone - A specialised defensive drone. It carries a beam laser as standard, and links in with the targeting scanner to attack ships which are registered as hostile to the launcher.
* Kamikaze drone - A slightly more aggressive variant on the combat drone, these feature a light yield warhead which the onboard battle computer can elect to use against its target. This of course does destroy the drone in the process.
* Anti-Thargoid drone - Especially commissioned by Galcop, these drones have special military technology built into them, giving them a harder punch (by a military-grade laser) and faster and more maneuverable flight through upgraded engines. Their  are battle computers are specifically tuned and set-up to target Thargoid vessels only. 

-------------------------------------------------------------------------------------------------------------------------------------
Missile Racks:

The Ships Weapons Department of the Aquarian Shipbuilding Corporation would like to present their latest item, the missile rack. With the increase in frequency of combat with the Thargoids and the rise of pirate activity, many commanders are finding their old trusty ships less capable due to the limited amount of missiles that can be carried.

To help with this shortcoming, each rack mounts on a weapons pylon in place of a standard missile, and contains three miniature missiles which can be targeted and fires like normal ones. Due to their size constraints however these miniaturised missiles are slightly slower and of lower yield than conventional missiles, and have a reduced range due to carrying less fuel. They are still however capable of dealing a sizable kick to hostile craft. 

The racks come in four varieties, with standard missiles, more advanced ECM hardened ones and anti-missile interceptor missiles. The racks themselves cannot be refilled and are automatically ejected after they are empty, and for safety they self-destruct at a safe range from the ship.

* Missile Rack (Std) - Pylon mounted rack containing three standard miniaturised missiles.
* Missile Rack (Hard) - Pylon mounted rack containing three ECM hardened miniaturised missiles.
* Interceptor Missile Rack - Pylon mounted rack containing three FdL interceptor anti-missile missiles.
* Stun Missile Rack - Pylon mounted rack containing three stun anti-ship missiles.

Racks are indicated by a special icon on the ship&#39;s HUD, which changes as the rack empties to signify the number of missiles left on it.

-------------------------------------------------------------------------------------------------------------------------------------
Probe Missile:

The Weapons Department of the Aquarian Shipbuilding Corporation would like to present to you their latest product, the Probe Missile. This is a modification on a standard ships missile, with the warhead removed and replaced by a long-range fuel tank and communications system. This allows it to fly to a range of 100km, performing a scan at half-way and on arrival, before returning to the ship for fuel-scoop pick-up. 

The missile has no offensive capabilities, but is also unaffected by ECM. It is however completely defenseless, as it is now essentially just a utility transportation vehicle for the scanner.

-------------------------------------------------------------------------------------------------------------------------------------
Missiles

*Tracker Missile:

A special interceptor missile which does no damage, but instead deploys a cloud of nanoscale tracking beacons. These can be detected via an advanced space compass (which must be fitted for the missile to be available for purchase) anywhere in the system.

Available from tech level 6 at a cost of 500cr each.

*Displacer Missile:

A new experimental piece of equipment which uses synchronised quirium resonance to induce a short-range witchspace jump in the target vessel, moving it a random distance away from its current location (but leaving it otherwise undamaged unless it hits something on arrival). Is only effective against ships which are powered and have witchspace fuel.

Available from tech level 4 at a cost of 400cr each.

*Kicker Missile:

A non-lethal missile which is designed to give a high-velocity kick to any ship which it detonates against. Depending on the mass and thrust of the target, this can be enough to send it out of scanner range.

Available from tech level 8 at a cost of 800cr each.

*Cutpurse Missile:

An illegal hack based on a standard missile which carries no explosive warhead. Instead it has a small limpet mine transmitter, which attaches onto the target ship and attempts to interface with the ships system (which can take a few seconds). If successful it triggers the ships emergency cargo dumping routine.

This missile is illegal to sell or purchase in any Galcop station and its use is seen as an act of piracy by police vessels. 

Available from tech level 8 at a cost of 800cr each.

*Field Missile:

An ECM-hardened missile which scatters several mini-mines upon detonation. These proximity weapons will detonate on close contact, causing additional damage to any craft in the vicinity as well as any survivors of the original missile strike. 

Available from tech level 6 at a cost of 1000cr each.


-------------------------------------------------------------------------------------------------------------------------------------
Missile Machine:

A special system mounted in the ships cargo hold, with an auto-mount feed system to one of the ships weapon pylons. When fed 1 ton of radioactives and 1 ton of alloys from your cargo hold plus a little ships fuel, in a short time the machine can produce up to three standard-grade missiles. The optional addition of 1 ton of computers (if they are available the machine will use them) allows better and more complex control circuitry making the missiles hardened against ECM.

Production can go on as long as there is suitable cargo in the ships hold and pylons available to accept the missiles (if there are less than three available less missiles will be produced). The only time production is not possible is when docked for maintenance crew safety.

-------------------------------------------------------------------------------------------------------------------------------------
Bombs and Mines:

After the discussions concerning the trunk energy bomb (and it&#39;s impending removal), I thought it may be worth playing around with a few new bombs which could be used as replacements. All are pylon mounted due to the current limitations on keyboard triggering of OXP equipment, and all can also be carried by NPCs (currently with low probability and Uni bomb set not to be an instant-killer for the player ship).

*Buzz bomb - the base version of the weaponry. Consists of a special energy emitter mounted on the pylon and linked to the ships energy banks. On triggering it sets off an EMP (electromagnetic pulse) through the ships shield emitters. The energy drained from the ships energy banks is amplified and transmitted, causing damage to any powered ship in scanner range (cargo pods and asteroids are unaffected). Damage inflicted depends on proximity to the bomb and the energy supplied to the emitter (which is destroyed in the process of firing). Fail-safes are included to prevent the bomb causing damage to the carrier ship itself, and also to ensure that at least one full energy bank is left after detonation (the bomb has a small built-in energy reserve of its own which is added to the energy drawn from the ship if available). Due to technological differences these bombs have been reported to be less effective against alien technology.

*Bug bomb - a variant on the buzz bomb, tuned especially to be damaging to alien technology, at the expense of some potency against normal targets.

*Stun bomb - another variant, tuned to affect ships systems, especially flight control and pilot interfacing. In practice tends to leave the target ship helplessly spinning in space for a short period of time. When used against a player craft it causes the ship to tumble into a new random orientation.

*Uni bomb - the final variant, tuned to resonance with the active Quirium in the targets engines and energy systems. In practice this tends to overload them and cause catastrophic and explosive failure. To prevent a negative impact to the gaming experience, when used against the player this bomb just causes severe energy loss.

*Interdictor Mine - classified Galcop munition for pirate and large-scale fleet pacification. It is an offense for non-Galcop ships to utilise such weaponry.

*Screamer Mine - special anti-Thargoid weapon which induces disorientation and nausea in them at a range of up to 25km. This infuriates and distracts them so much that they usually target the mine, useful in drawing alien fire and causing a diversion.

*Void Bomb - a small singularity kept in stasis until the bomb detonates, at which point it is released and grows in size. This is a high-density entity which attracts all things within scanner range, and damages them on contact. It lasts for a short period of time until it has consumed all local matter, at which point it collapses.

*Decoy Mine - a modified cargo pod containing several warship-class Thargoid fake mylar balloons produced by Ganelon Inc. These expand on launch and simulate alien vessels, causing a distraction and allowing the launcher to slip away or press the attack.

-------------------------------------------------------------------------------------------------------------------------------------
License:

This OXP is released under the Creative Commons Attribution - Non-Commercial - Share Alike 3.0 license with the following clauses:

* Whilst you are free (and encouraged) to re-use any of the scripting, models or texturing in this OXP, the usage must be distinct from that within this OXP. Unique identifiers such as (but not limited to) unique shipdata.plist entity keys, mission variables, script names (this.name), equipment identity strings (EQ_), description list arrays and entity roles must not be re-used without prior agreement.
* rebundling of this OXP within another distribution is permitted as long as it is unchanged. The following derivates however are permitted and except from the above:
	* the conversion of files between XML and openStep.
	* the merging of files with other files of the same type from other OXPs.
* Even though it is not compulsory, if you are re-using any sizable or recognisable piece of this OXP, please let me know :)

-------------------------------------------------------------------------------------------------------------------------------------
Instructions:

Use the in-game expansions manager to install Armoury, or if you downloaded it manually, place the OXZ in the Oolite AddOns folder.

-------------------------------------------------------------------------------------------------------------------------------------

Version history:

10/02/2010 - WIP version for feedback
31/05/2010 - Added missile machine and icon gluing for missile rack (thanks Kaks!)
18/06/2010 - Version 1.01, minor bugfix to include player as stun bomb victim.
22/06/2010 - Version 1.02, corrected problem with probe missile, added reload noise to missile machine and added displacer missile
07/07/2010 - Version 1.03, made unibomb not a suicide weapon, plus amended CT and Drones for Constrictor mission compatibility.
				Also added some new weaponry...
13/02/2011 - Version 1.04, removal of upper limit, to allow running with 1.75
19/02/2011 - Version 1.05, update of scripting to fix Manifest glitch
23/03/2011 - Version 1.06, removal of a problem in the AMS script (depreciation of this.reset) plus change to its cost.With thanks to Lohwengk for the heads-up on that one.
03/04/2011 - Version 1.07, further tweaking of AMS script to remove reload glitches.
17/07/2011 - Version 1.08, some new weapons again
16/09/2011 - Version 1.09, three small script tweaks for compatibility with 1.76 trunk (shipDied double-call).
16/03/2012 - Version 1.10, added the tracker missile.
02/01/2013 - Version 1.11, added a few scan classes into the shipdata to deal with 1.77 trunk warnings.
22/03/2013 - Version 1.12, add primable deactivation and activation to the AMS, and also adjusted prices.
02/04/2013 - Version 1.13, fix for small bug in interdictor mine script which awards a target autolock for free.

13/12/2018 - Version 1.14, --update by rustem for oolite 1.80--
 - Required oolite version up to 1.80.
 - Added &quot;use strict&quot; in the scripts.
 - Updated a subentities format.
 - Fixed for small bug in drone script.
 - Adds unpiloted status for bombs, drones and etc.
 - Adds more time interval for activate a void bomb.
 - Adds missile role(0.01) for kamikaze drone.

14/12/2018 - Version 1.15
 - Fixed for small bug in drone subentity.
 - Formatted the JS code: AIs, plist and scripts.

16/06/2020 - Version 1.21, --update by Milo for Oolite 1.82--
 - Required Oolite version up to 1.82.
 - Fixed Captured Thargons script for 1.82 (alienItems no longer works, must use alien_items).
 - Revised description of Anti-Missile System to clarify that it only targets non-standard missiles.
 - Removed Anti-Missile System from primeable equipment list: it just provided an on/off switch, and why turn it off?

With thanks to Ganelon for the thoughts on the decoy mine idea (WTF!), Okti for the kicker missile, Commander CommonSenseOTB for the cutpurse missile and Ramirez for the &quot;virtual entity&quot; trick used in the tracker missile.

Also thanks to UK_Eliter for reporting the 1.76 shipDied double-call issue, and Eric Walch for the suggestion of the elegant fix. Also to Spara for the interdictor mine script bug report.</pre>
        </a>

        <a name="equipment">          
        <h2>Equipment</h2>
            <table>
                <tr>
                    <th>Name</th>
                    <th>Visible</th>
                    <th>Cost [deci-credits]</th>
                    <th>Tech-Level</th>
                </tr>
                <tr>
                    <td><a href="../equipment/EQ_AMS.html">Anti-Missile System</a></td>
                    <td>yes</td>
                    <td align="right">80000</td>
                    <td align="center">10+</td>
                </tr>
                <tr>
                    <td><a href="../equipment/EQ_AMS_1.html">Single AMS Dart</a></td>
                    <td>yes</td>
                    <td align="right">5000</td>
                    <td align="center">10+</td>
                </tr>
                <tr>
                    <td><a href="../equipment/EQ_AMS_2.html">Two AMS Darts</a></td>
                    <td>yes</td>
                    <td align="right">10000</td>
                    <td align="center">10+</td>
                </tr>
                <tr>
                    <td><a href="../equipment/EQ_AMS_3.html">Three AMS Darts</a></td>
                    <td>yes</td>
                    <td align="right">15000</td>
                    <td align="center">10+</td>
                </tr>
                <tr>
                    <td><a href="../equipment/EQ_AMS_4.html">Four AMS Darts</a></td>
                    <td>yes</td>
                    <td align="right">20000</td>
                    <td align="center">10+</td>
                </tr>
                <tr>
                    <td><a href="../equipment/EQ_AMS_5.html">Five AMS Darts</a></td>
                    <td>yes</td>
                    <td align="right">25000</td>
                    <td align="center">10+</td>
                </tr>
                <tr>
                    <td><a href="../equipment/EQ_AMS_6.html">Six AMS Darts</a></td>
                    <td>yes</td>
                    <td align="right">30000</td>
                    <td align="center">10+</td>
                </tr>
                <tr>
                    <td><a href="../equipment/EQ_AMS_REMOVAL.html">Remove AMS System</a></td>
                    <td>yes</td>
                    <td align="right">5000</td>
                    <td align="center">7+</td>
                </tr>
                <tr>
                    <td><a href="../equipment/EQ_ARMOURY_BUGBOMB_MINE.html">Bug Bomb</a></td>
                    <td>yes</td>
                    <td align="right">10000</td>
                    <td align="center">8+</td>
                </tr>
                <tr>
                    <td><a href="../equipment/EQ_ARMOURY_BUZZBOMB_MINE.html">Buzz Bomb</a></td>
                    <td>yes</td>
                    <td align="right">10000</td>
                    <td align="center">8+</td>
                </tr>
                <tr>
                    <td><a href="../equipment/EQ_ARMOURY_CUTPURSE_MISSILE.html">Cutpurse Missile</a></td>
                    <td>yes</td>
                    <td align="right">6000</td>
                    <td align="center">9+</td>
                </tr>
                <tr>
                    <td><a href="../equipment/EQ_ARMOURY_DECOY_MINE.html">Decoy Mine</a></td>
                    <td>yes</td>
                    <td align="right">8000</td>
                    <td align="center">6+</td>
                </tr>
                <tr>
                    <td><a href="../equipment/EQ_ARMOURY_DISPLACER_MISSILE.html">Displacer Missile</a></td>
                    <td>yes</td>
                    <td align="right">4000</td>
                    <td align="center">8+</td>
                </tr>
                <tr>
                    <td><a href="../equipment/EQ_ARMOURY_FIELD_MISSILE.html">Field Missile</a></td>
                    <td>yes</td>
                    <td align="right">10000</td>
                    <td align="center">6+</td>
                </tr>
                <tr>
                    <td><a href="../equipment/EQ_ARMOURY_HARD_MISSILE.html">ECM Hardened Missile</a></td>
                    <td>yes</td>
                    <td align="right">1000</td>
                    <td align="center">99+</td>
                </tr>
                <tr>
                    <td><a href="../equipment/EQ_ARMOURY_INTERDICTOR_MINE.html">Black Market Interdictor Mine</a></td>
                    <td>yes</td>
                    <td align="right">25000</td>
                    <td align="center">6+</td>
                </tr>
                <tr>
                    <td><a href="../equipment/EQ_ARMOURY_KICKER_MISSILE.html">Kicker Missile</a></td>
                    <td>yes</td>
                    <td align="right">8000</td>
                    <td align="center">8+</td>
                </tr>
                <tr>
                    <td><a href="../equipment/EQ_ARMOURY_MISSILEMACHINE_MINE.html">Missile Machine</a></td>
                    <td>yes</td>
                    <td align="right">50000</td>
                    <td align="center">10+</td>
                </tr>
                <tr>
                    <td><a href="../equipment/EQ_ARMOURY_SCREAMER_MINE.html">Screamer Mine</a></td>
                    <td>yes</td>
                    <td align="right">10000</td>
                    <td align="center">9+</td>
                </tr>
                <tr>
                    <td><a href="../equipment/EQ_ARMOURY_STANDARD_MISSILE.html">Missile</a></td>
                    <td>yes</td>
                    <td align="right">200</td>
                    <td align="center">99+</td>
                </tr>
                <tr>
                    <td><a href="../equipment/EQ_ARMOURY_STUNBOMB_MINE.html">Stun Bomb</a></td>
                    <td>yes</td>
                    <td align="right">10000</td>
                    <td align="center">8+</td>
                </tr>
                <tr>
                    <td><a href="../equipment/EQ_ARMOURY_TRACKER_MISSILE.html">Tracker Missile</a></td>
                    <td>yes</td>
                    <td align="right">5000</td>
                    <td align="center">6+</td>
                </tr>
                <tr>
                    <td><a href="../equipment/EQ_ARMOURY_UNIBOMB_MINE.html">Uni Bomb</a></td>
                    <td>yes</td>
                    <td align="right">15000</td>
                    <td align="center">10+</td>
                </tr>
                <tr>
                    <td><a href="../equipment/EQ_ARMOURY_VOID_MINE.html">Void Bomb</a></td>
                    <td>yes</td>
                    <td align="right">30000</td>
                    <td align="center">10+</td>
                </tr>
                <tr>
                    <td><a href="../equipment/EQ_ATDRONE_LAUNCHER_MINE.html">Anti-Thargoid Drone</a></td>
                    <td>yes</td>
                    <td align="right">4500</td>
                    <td align="center">9+</td>
                </tr>
                <tr>
                    <td><a href="../equipment/EQ_CDRONE_LAUNCHER_MINE.html">Combat Drone</a></td>
                    <td>yes</td>
                    <td align="right">4500</td>
                    <td align="center">9+</td>
                </tr>
                <tr>
                    <td><a href="../equipment/EQ_CT_CONVERT.html">Reprogram Thargon Fighter</a></td>
                    <td>yes</td>
                    <td align="right">5000</td>
                    <td align="center">12+</td>
                </tr>
                <tr>
                    <td><a href="../equipment/EQ_CT_DRONE_1.html">Replacement Thargon Fighter</a></td>
                    <td>yes</td>
                    <td align="right">10000</td>
                    <td align="center">12+</td>
                </tr>
                <tr>
                    <td><a href="../equipment/EQ_CT_DRONE_2.html">Replacement Thargon Fighters x2</a></td>
                    <td>yes</td>
                    <td align="right">20000</td>
                    <td align="center">12+</td>
                </tr>
                <tr>
                    <td><a href="../equipment/EQ_CT_DRONE_3.html">Replacement Thargon Fighters x3</a></td>
                    <td>yes</td>
                    <td align="right">30000</td>
                    <td align="center">12+</td>
                </tr>
                <tr>
                    <td><a href="../equipment/EQ_CT_DRONE_4.html">Replacement Thargon Fighters x4</a></td>
                    <td>yes</td>
                    <td align="right">40000</td>
                    <td align="center">12+</td>
                </tr>
                <tr>
                    <td><a href="../equipment/EQ_CT_MINE.html">Captured Thargon Ship Defense System</a></td>
                    <td>yes</td>
                    <td align="right">55000</td>
                    <td align="center">12+</td>
                </tr>
                <tr>
                    <td><a href="../equipment/EQ_HRACK_1_MISSILE.html">Missile Rack (Hard)</a></td>
                    <td>yes</td>
                    <td align="right">10000</td>
                    <td align="center">100+</td>
                </tr>
                <tr>
                    <td><a href="../equipment/EQ_HRACK_2_MISSILE.html">Missile Rack (Hard)</a></td>
                    <td>yes</td>
                    <td align="right">10000</td>
                    <td align="center">100+</td>
                </tr>
                <tr>
                    <td><a href="../equipment/EQ_HRACK_3_MISSILE.html">Missile Rack (Hard)</a></td>
                    <td>yes</td>
                    <td align="right">10000</td>
                    <td align="center">5+</td>
                </tr>
                <tr>
                    <td><a href="../equipment/EQ_IRACK_1_MISSILE.html">Interception Missile Rack</a></td>
                    <td>yes</td>
                    <td align="right">1200</td>
                    <td align="center">100+</td>
                </tr>
                <tr>
                    <td><a href="../equipment/EQ_IRACK_2_MISSILE.html">Interception Missile Rack</a></td>
                    <td>yes</td>
                    <td align="right">1200</td>
                    <td align="center">100+</td>
                </tr>
                <tr>
                    <td><a href="../equipment/EQ_IRACK_3_MISSILE.html">Interception Missile Rack</a></td>
                    <td>yes</td>
                    <td align="right">1200</td>
                    <td align="center">5+</td>
                </tr>
                <tr>
                    <td><a href="../equipment/EQ_KDRONE_LAUNCHER_MINE.html">Kamikaze Drone</a></td>
                    <td>yes</td>
                    <td align="right">5000</td>
                    <td align="center">10+</td>
                </tr>
                <tr>
                    <td><a href="../equipment/EQ_NRACK_1_MISSILE.html">Missile Rack (Std)</a></td>
                    <td>yes</td>
                    <td align="right">1000</td>
                    <td align="center">100+</td>
                </tr>
                <tr>
                    <td><a href="../equipment/EQ_NRACK_2_MISSILE.html">Missile Rack (Std)</a></td>
                    <td>yes</td>
                    <td align="right">1000</td>
                    <td align="center">100+</td>
                </tr>
                <tr>
                    <td><a href="../equipment/EQ_NRACK_3_MISSILE.html">Missile Rack (Std)</a></td>
                    <td>yes</td>
                    <td align="right">1000</td>
                    <td align="center">5+</td>
                </tr>
                <tr>
                    <td><a href="../equipment/EQ_PROBE_LAUNCHER_MINE.html">Probe Missile</a></td>
                    <td>yes</td>
                    <td align="right">4500</td>
                    <td align="center">7+</td>
                </tr>
                <tr>
                    <td><a href="../equipment/EQ_SRACK_1_MISSILE.html">Missile Rack (Stun)</a></td>
                    <td>yes</td>
                    <td align="right">10000</td>
                    <td align="center">100+</td>
                </tr>
                <tr>
                    <td><a href="../equipment/EQ_SRACK_2_MISSILE.html">Missile Rack (Stun)</a></td>
                    <td>yes</td>
                    <td align="right">10000</td>
                    <td align="center">100+</td>
                </tr>
                <tr>
                    <td><a href="../equipment/EQ_SRACK_3_MISSILE.html">Missile Rack (Stun)</a></td>
                    <td>yes</td>
                    <td align="right">10000</td>
                    <td align="center">5+</td>
                </tr>
            </table>
        </a>

        <a name="ships">    
        <h2>Ships</h2>
            <table>
                <tr>
                    <th>Name</th>
                </tr>
                <tr>
                    <td><a href="../ships/CT_launcher.html">Thargon launch system</a></td>
                </tr>
                <tr>
                    <td><a href="../ships/CT_thargon.html">Reprogrammed Fighter</a></td>
                </tr>
                <tr>
                    <td><a href="../ships/ams_dart.html">Anti-missile dart</a></td>
                </tr>
                <tr>
                    <td><a href="../ships/armoury_bombTemplate.html">Bomb</a></td>
                </tr>
                <tr>
                    <td><a href="../ships/armoury_bugBomb.html">armoury_bugBomb</a></td>
                </tr>
                <tr>
                    <td><a href="../ships/armoury_buzzBomb.html">armoury_buzzBomb</a></td>
                </tr>
                <tr>
                    <td><a href="../ships/armoury_cutpurseMissile.html">Cutpurse Missile</a></td>
                </tr>
                <tr>
                    <td><a href="../ships/armoury_decoyMine.html">Decoy Mine</a></td>
                </tr>
                <tr>
                    <td><a href="../ships/armoury_displacerMissile.html">Displacer Missile</a></td>
                </tr>
                <tr>
                    <td><a href="../ships/armoury_fieldMine.html">Field Mine</a></td>
                </tr>
                <tr>
                    <td><a href="../ships/armoury_fieldMissile.html">Field Missile</a></td>
                </tr>
                <tr>
                    <td><a href="../ships/armoury_interdictor.html">Interdictor Mine</a></td>
                </tr>
                <tr>
                    <td><a href="../ships/armoury_interdictorShield1.html">Interdictor Mine</a></td>
                </tr>
                <tr>
                    <td><a href="../ships/armoury_interdictorShield2.html">Interdictor Mine</a></td>
                </tr>
                <tr>
                    <td><a href="../ships/armoury_interdictorShield3.html">Interdictor Mine</a></td>
                </tr>
                <tr>
                    <td><a href="../ships/armoury_interdictorShield4.html">Interdictor Mine</a></td>
                </tr>
                <tr>
                    <td><a href="../ships/armoury_kickerMissile.html">Kicker Missile</a></td>
                </tr>
                <tr>
                    <td><a href="../ships/armoury_machineHardMissile.html">MM Hardened Missile</a></td>
                </tr>
                <tr>
                    <td><a href="../ships/armoury_machineStdMissile.html">MM Standard Missile</a></td>
                </tr>
                <tr>
                    <td><a href="../ships/armoury_missileMachine.html">Missile Machine</a></td>
                </tr>
                <tr>
                    <td><a href="../ships/armoury_screamer.html">Screamer Mine</a></td>
                </tr>
                <tr>
                    <td><a href="../ships/armoury_screamerShield1.html">Screamer Mine</a></td>
                </tr>
                <tr>
                    <td><a href="../ships/armoury_screamerShield2.html">Screamer Mine</a></td>
                </tr>
                <tr>
                    <td><a href="../ships/armoury_screamerShield3.html">Screamer Mine</a></td>
                </tr>
                <tr>
                    <td><a href="../ships/armoury_screamerShield4.html">Screamer Mine</a></td>
                </tr>
                <tr>
                    <td><a href="../ships/armoury_stunBomb.html">armoury_stunBomb</a></td>
                </tr>
                <tr>
                    <td><a href="../ships/armoury_trackerBeacon.html">Tracker Beacon</a></td>
                </tr>
                <tr>
                    <td><a href="../ships/armoury_trackerMissile.html">Tracker Missile</a></td>
                </tr>
                <tr>
                    <td><a href="../ships/armoury_uniBomb.html">armoury_uniBomb</a></td>
                </tr>
                <tr>
                    <td><a href="../ships/armoury_voidBomb.html">Void Bomb</a></td>
                </tr>
                <tr>
                    <td><a href="../ships/armoury_voidShield.html">Void Bomb</a></td>
                </tr>
                <tr>
                    <td><a href="../ships/armoury_wtfDecoy.html">armoury_wtfDecoy</a></td>
                </tr>
                <tr>
                    <td><a href="../ships/drones_ATDroneLauncher.html">Anti-Thargoid Drone launcher</a></td>
                </tr>
                <tr>
                    <td><a href="../ships/drones_CDroneLauncher.html">Combat Drone launcher</a></td>
                </tr>
                <tr>
                    <td><a href="../ships/drones_KDroneLauncher.html">Kamikaze Drone launcher</a></td>
                </tr>
                <tr>
                    <td><a href="../ships/drones_antiThargoidDrone.html">Anti-Thargoid Drone</a></td>
                </tr>
                <tr>
                    <td><a href="../ships/drones_combatDrone.html">Combat Drone</a></td>
                </tr>
                <tr>
                    <td><a href="../ships/drones_kamikazeDrone.html">Kamikaze Drone</a></td>
                </tr>
                <tr>
                    <td><a href="../ships/drones_kamikazeLaser.html">Kamikaze Drone Laser Sub-entity</a></td>
                </tr>
                <tr>
                    <td><a href="../ships/missileRack_baseMissile.html">Mini-missile</a></td>
                </tr>
                <tr>
                    <td><a href="../ships/missileRack_hMissile1.html">missileRack_hMissile1</a></td>
                </tr>
                <tr>
                    <td><a href="../ships/missileRack_hMissile2.html">missileRack_hMissile2</a></td>
                </tr>
                <tr>
                    <td><a href="../ships/missileRack_hMissile3.html">missileRack_hMissile3</a></td>
                </tr>
                <tr>
                    <td><a href="../ships/missileRack_iMissile1.html">missileRack_iMissile1</a></td>
                </tr>
                <tr>
                    <td><a href="../ships/missileRack_iMissile2.html">missileRack_iMissile2</a></td>
                </tr>
                <tr>
                    <td><a href="../ships/missileRack_iMissile3.html">missileRack_iMissile3</a></td>
                </tr>
                <tr>
                    <td><a href="../ships/missileRack_nMissile1.html">missileRack_nMissile1</a></td>
                </tr>
                <tr>
                    <td><a href="../ships/missileRack_nMissile2.html">missileRack_nMissile2</a></td>
                </tr>
                <tr>
                    <td><a href="../ships/missileRack_nMissile3.html">missileRack_nMissile3</a></td>
                </tr>
                <tr>
                    <td><a href="../ships/missileRack_sMissile1.html">missileRack_sMissile1</a></td>
                </tr>
                <tr>
                    <td><a href="../ships/missileRack_sMissile2.html">missileRack_sMissile2</a></td>
                </tr>
                <tr>
                    <td><a href="../ships/missileRack_sMissile3.html">missileRack_sMissile3</a></td>
                </tr>
                <tr>
                    <td><a href="../ships/missileRack_spentRack.html">Empty missile rack</a></td>
                </tr>
                <tr>
                    <td><a href="../ships/probe_probeLauncher.html">Probe Missile launcher</a></td>
                </tr>
                <tr>
                    <td><a href="../ships/probe_probeMissile.html">Probe Missile</a></td>
                </tr>
            </table>
        </a>

        <a name="models">    
        <h2>Models</h2>
            This expansion declares no models. This may be related to warnings.
        </a>

        <a name="scripts">    
        <h2>Scripts</h2>
            <table>
                <tr>
                    <th>Path</th>
                </tr>
                <tr>
                    <td valign="top">Scripts/CT_launcher.js</td>
                    <td><pre>&quot;use strict&quot;;
this.name = &quot;CT_Launcher&quot;;
this.author = &quot;Thargoid&quot;;
this.copyright = &quot;Creative Commons: attribution, non-commercial, sharealike with clauses - see readme.txt&quot;;
this.description = &quot;Spawn Captured Thargons&quot;;
this.version = &quot;1.00&quot;;

this.shipDied = function () {
	if (missionVariables.CT_thargonCount &gt; 0) {
		player.consoleMessage(&quot;Robot fighters activated&quot;, 5);
		this.ship.spawn(&quot;CT_thargon&quot;, missionVariables.CT_thargonCount);
	}
	delete this.shipDied;
}</pre></td>
                </tr>
                <tr>
                    <td valign="top">Scripts/CT_masterScript.js</td>
                    <td><pre>&quot;use strict&quot;;
this.name = &quot;CT_Script&quot;;
this.author = &quot;Thargoid&quot;;
this.copyright = &quot;Creative Commons: attribution, non-commercial, sharealike with clauses - see readme.txt&quot;;
this.description = &quot;Captured Thargons - for 1.74+&quot;;
this.version = &quot;2.01&quot;;

this.startUp = function () {
	if (missionVariables.CT_thargonCount == null) {
		missionVariables.CT_thargonCount = 0;
	}

	if (missionVariables.CT_thargonCargo == null) {
		missionVariables.CT_thargonCargo = manifest.alien_items;
	}
}

this.guiScreenChanged = function (to, from) {
	if (to == &quot;GUI_SCREEN_EQUIP_SHIP&quot;) {
		missionVariables.CT_thargonCargo = manifest.alien_items;
	}
}

this.playerBoughtEquipment = function (equipment) {
	switch (equipment) {
		case &quot;EQ_CT_MINE&quot;:
			{
				missionVariables.CT_thargonCount = 5;
				mission.runScreen({
					title: &quot;Captured Thargon Purchase&quot;,
					messageKey: &quot;CT_instructions&quot;,
					model: &quot;CT_thargon&quot;
				});
				break;
			}

		case &quot;EQ_MISSILE_REMOVAL&quot;:
			{
				if (missionVariables.CT_thargonCount &gt; 0) { // Player gets 5000 back for the removal, but if &lt;5 drones left deduct 1000 per drone
					player.credits -= (1000 * (5 - missionVariables.CT_thargonCount));
					missionVariables.CT_thargonCount = 0;
				}
				break;
			}

		case &quot;EQ_CT_DRONE_1&quot;:
			{
				missionVariables.CT_thargonCount += 1;
				player.ship.removeEquipment(&quot;EQ_CT_DRONE_1&quot;);
				break;
			}

		case &quot;EQ_CT_DRONE_2&quot;:
			{
				missionVariables.CT_thargonCount += 2;
				player.ship.removeEquipment(&quot;EQ_CT_DRONE_2&quot;);
				break;
			}

		case &quot;EQ_CT_DRONE_3&quot;:
			{
				missionVariables.CT_thargonCount += 3;
				player.ship.removeEquipment(&quot;EQ_CT_DRONE_3&quot;);
				break;
			}

		case &quot;EQ_CT_DRONE_4&quot;:
			{
				missionVariables.CT_thargonCount += 4;
				player.ship.removeEquipment(&quot;EQ_CT_DRONE_4&quot;);
				break;
			}
		case &quot;EQ_CT_CONVERT&quot;:
			{
				if (manifest.alien_items &gt; 0) {
					manifest.alien_items--;
					missionVariables.CT_thargonCount++;
					missionVariables.CT_thargonCargo = manifest.alien_items;
					player.ship.removeEquipment(&quot;EQ_CT_CONVERT&quot;);
				}
				break;
			}
	}

	if (missionVariables.CT_thargonCount &gt; 5) {
		missionVariables.CT_thargonCount = 5;
	}
}</pre></td>
                </tr>
                <tr>
                    <td valign="top">Scripts/CT_thargon.js</td>
                    <td><pre>&quot;use strict&quot;;
this.name = &quot;CT_thargon&quot;;
this.author = &quot;Thargoid&quot;;
this.copyright = &quot;Creative Commons: attribution, non-commercial, sharealike with clauses - see readme.txt&quot;;
this.description = &quot;AI-actions script for the captured thargon&quot;;
this.version = &quot;2.0&quot;;

this.shipSpawned = function () {
	missionVariables.CT_thargonCount -= 1;
}

this.shipWasScooped = function (scooper) {
	if (scooper.isPlayer) {
		missionVariables.CT_thargonCount += 1;
		if (missionVariables.CT_thargonCount == 1) {
			player.ship.awardEquipment(&quot;EQ_CT_MINE&quot;);
		}
	}
}

this.locatePlayer = function () {
	this.playerArray = system.shipsWithPrimaryRole(&quot;player&quot;);
	if (this.playerArray.length == 0) // where&#39;d they go?
	{
		this.ship.remove(); // If no player, then we can remove the thargon.
	} else {
		this.ship.target = this.playerArray[0];
		this.ship.reactToAIMessage(&quot;PLAYER_FOUND&quot;);
	}
}

this.findPlayerHostiles = function () {
	function isHostileToPlayer(entity) {
		return (entity.isThargoid || (entity.isShip &amp;&amp; entity.target &amp;&amp; entity.target == player.ship &amp;&amp; entity.hasHostileTarget));
	}

	if (this.ship.target == player.ship &amp;&amp; player.ship.target &amp;&amp; player.ship.target.bounty &gt; 10) {
		this.ship.target = player.ship.target;
		this.ship.reactToAIMessage(&quot;HOSTILE_FOUND&quot;);
	} else {
		var targets = system.filteredEntities(this, isHostileToPlayer, this.ship, this.ship.scannerRange);
		if (targets.length &gt; 0) {
			this.ship.target = targets[0];
			this.ship.reactToAIMessage(&quot;HOSTILE_FOUND&quot;);
		} else {
			this.ship.reactToAIMessage(&quot;NO_HOSTILE_FOUND&quot;);
		}
	}
}

this.fireCheck = function () {
	if ((this.ship.target.hasRole(&quot;CT_thargon&quot;)) || (player.ship.target == this.ship &amp;&amp; this.ship.target.isPlayer)) {
		this.ship.reactToAIMessage(&quot;FRIENDLY_FIRE&quot;);
	} else {
		this.ship.reactToAIMessage(&quot;ENEMY_FIRE&quot;);
	}
}

this.shipTargetDestroyed = function (target) {
	player.score += 1;
	player.credits += target.bounty;
	player.consoleMessage(&quot;Thargon kill - &quot; + target.name + &quot; : &quot; + target.bounty + &quot;₢ awarded.&quot;, 5);
	log(&quot;Thargon kill - &quot; + target.name + &quot; : &quot; + target.bounty);

	if (target.primaryRole == &quot;constrictor&quot; &amp;&amp; missionVariables.conhunt &amp;&amp; missionVariables.conhunt == &quot;STAGE_1&quot;) { // just in case a thargon kills the constrictor, let&#39;s not break the mission for the player...
		missionVariables.conhunt = &quot;CONSTRICTOR_DESTROYED&quot;;
	}
}

this.shipDied = function (whom, why) {
	if (whom &amp;&amp; whom.isValid) {
		player.consoleMessage(&quot;Contact lost with Thargon fighter&quot;, 5);
	}
}</pre></td>
                </tr>
                <tr>
                    <td valign="top">Scripts/ams_activate.js</td>
                    <td><pre>&quot;use strict&quot;;
this.name = &quot;ams_activate.js&quot;;
this.author = &quot;Thargoid&quot;;
this.copyright = &quot;Creative Commons: attribution, non-commercial, sharealike with clauses - see readme.txt&quot;;
this.description = &quot;Script for manual activation of the anti-missile system&quot;;
this.version = &quot;1.00&quot;;

this.activated = function () {
	if (player.ship.equipmentStatus(&quot;EQ_AMS&quot;) !== &quot;EQUIPMENT_OK&quot;) {
		missionVariables.amActive = &quot;INACTIVE&quot;;
		return;
	}

	if (!worldScripts[&quot;ams_system&quot;]) {
		player.consoleMessage(&quot;AMS script error.&quot;);
		log(this.name, &quot;AMS script activation failed.&quot;);
		return;
	}

	if (missionVariables.amActive &amp;&amp; missionVariables.amActive === &quot;ACTIVE&quot;) {
		missionVariables.amActive = &quot;INACTIVE&quot;;
		player.consoleMessage(&quot;Anti-Missile System deactivated.&quot;);
	} else {
		missionVariables.amActive = &quot;ACTIVE&quot;;
		player.consoleMessage(&quot;Anti-Missile System activated.&quot;);
		worldScripts[&quot;ams_system&quot;].$scanForMissiles();
	}
}</pre></td>
                </tr>
                <tr>
                    <td valign="top">Scripts/ams_dart.js</td>
                    <td><pre>&quot;use strict&quot;;
this.name = &quot;ams_dart&quot;;
this.author = &quot;Thargoid&quot;;
this.copyright = &quot;Creative Commons: attribution, non-commercial, sharealike with clauses - see readme.txt&quot;;
this.description = &quot;Needle-dart interception script.&quot;;
this.version = &quot;1.01&quot;;

this.shipIntercept = function () {
	let chance = Math.random();
	if (chance &gt; 0.9) {
		player.consoleMessage(&quot;AMS - Interception failed.&quot;, 6);
	} else {
		if (this.ship &amp;&amp; this.ship.target) {
			this.ship.target.explode();
		}
	}
}</pre></td>
                </tr>
                <tr>
                    <td valign="top">Scripts/ams_system.js</td>
                    <td><pre>&quot;use strict&quot;;
this.name = &quot;ams_system&quot;;
this.author = &quot;Thargoid&quot;;
this.copyright = &quot;Creative Commons: attribution, non-commercial, sharealike with clauses - see readme.txt&quot;;
this.description = &quot;Needle-dart anti-missile system extension of the Missile Analyser, good for 6 uses before replacement.&quot;;
this.version = &quot;2.02&quot;;

this.startUp = function () {
	if (missionVariables.amCount === undefined || missionVariables.amCount === null) {
		this.amCount = 6;
	} else {
		this.amCount = missionVariables.amCount;
	}
	if (missionVariables.amActive === undefined || missionVariables.amActive === null) {
		missionVariables.amActive = &quot;INACTIVE&quot;;
	}
}

this.shipLaunchedFromStation = function () {
	if (player.ship.equipmentStatus(&quot;EQ_AMS&quot;) === &quot;EQUIPMENT_OK&quot; &amp;&amp; player.ship.equipmentStatus(&quot;EQ_MISSILE_ANALYSER&quot;) === &quot;EQUIPMENT_OK&quot;) {
		missionVariables.amActive = &quot;ACTIVE&quot;;
		switch (this.amCount) {
			case 0:
				{
					player.consoleMessage(&quot;AMS - System offline, no darts loaded.&quot;, 5);
					break;
				}
			case 1:
				{
					player.consoleMessage(&quot;AMS - System online, 1 dart loaded.&quot;, 5);
					break;
				}
			default:
				{
					player.consoleMessage(&quot;AMS - System online, &quot; + this.amCount + &quot; darts loaded.&quot;, 5);
					break;
				}
		}
	}

}

this.$scanForMissiles = function () {
	function missileArray(entity) {
		return entity.isShip &amp;&amp; entity.isMissile &amp;&amp; entity.target &amp;&amp; entity.target === player.ship;
	};
	let incomingMissiles = system.filteredEntities(this, missileArray, player.ship, 25600);
	if (incomingMissiles.length &gt; 0) {
		this.shipAttackedWithMissile(incomingMissiles[0], null);
	}
}

this.shipAttackedWithMissile = function (missile, whom) {
	if (player.ship.equipmentStatus(&quot;EQ_AMS&quot;) === &quot;EQUIPMENT_OK&quot; &amp;&amp; player.ship.equipmentStatus(&quot;EQ_MISSILE_ANALYSER&quot;) === &quot;EQUIPMENT_OK&quot; &amp;&amp; missionVariables.amActive === &quot;ACTIVE&quot; &amp;&amp; missile.name !== &quot;Missile&quot; &amp;&amp; this.amCount &gt; 0) {
		player.consoleMessage(&quot;AMS - Dart &quot; + (7 - this.amCount) + &quot; launched.&quot;, 6);
		let antiMissile = player.ship.spawnOne(&quot;ams_dart&quot;);
		antiMissile.target = missile;
		let amOrientation = player.ship.orientation;
		let offsetVector = amOrientation.vectorUp(); // vector at right angles to the player, downwards
		let spawnOffset = offsetVector.multiply(20); // set the offset to 20m downwards (for larger ships, increase 20).
		antiMissile.orientation = amOrientation; // point the dart in the same direction as the player
		antiMissile.position = player.ship.position.subtract(spawnOffset); // move the dart to it&#39;s correct start point.

		if (--this.amCount &lt; 1) {
			player.consoleMessage(&quot;AMS - system exhausted, shutting down&quot;, 8);
		}
		missionVariables.amCount = this.amCount;
	}
}

this.playerBoughtEquipment = function (equipment) {
	switch (equipment) {
		case &quot;EQ_AMS&quot;:
			{
				missionVariables.amActive = &quot;ACTIVE&quot;;
				this.amCount = 6;
				break;
			}
		case &quot;EQ_AMS_1&quot;:
			{
				this.amCount += 1;
				player.ship.removeEquipment(&quot;EQ_AMS_1&quot;);
				break;
			}
		case &quot;EQ_AMS_2&quot;:
			{
				this.amCount += 2;
				player.ship.removeEquipment(&quot;EQ_AMS_2&quot;);
				break;
			}
		case &quot;EQ_AMS_3&quot;:
			{
				this.amCount += 3;
				player.ship.removeEquipment(&quot;EQ_AMS_3&quot;);
				break;
			}
		case &quot;EQ_AMS_4&quot;:
			{
				this.amCount += 4;
				player.ship.removeEquipment(&quot;EQ_AMS_4&quot;);
				break;
			}
		case &quot;EQ_AMS_5&quot;:
			{
				this.amCount += 5;
				player.ship.removeEquipment(&quot;EQ_AMS_5&quot;);
				break;
			}
		case &quot;EQ_AMS_6&quot;:
			{
				this.amCount += 6;
				player.ship.removeEquipment(&quot;EQ_AMS_6&quot;);
				break;
			}
		case &quot;EQ_AMS_REMOVAL&quot;:
			{
				player.ship.removeEquipment(&quot;EQ_AMS&quot;);
				player.ship.removeEquipment(&quot;EQ_AMS_REMOVAL&quot;);
				player.credits += (5000 + (this.amCount * 400));
				this.amCount = 0;
				delete missionVariables.amCount;
				delete missionVariables.amActive;
				break;
			}
	}
	missionVariables.amCount = this.amCount;
}</pre></td>
                </tr>
                <tr>
                    <td valign="top">Scripts/armoury_cutpurseMissile.js</td>
                    <td><pre>&quot;use strict&quot;;
this.name = &quot;armoury_cutpurseMissile.js&quot;;
this.author = &quot;Thargoid&quot;;
this.copyright = &quot;Creative Commons: attribution, non-commercial, sharealike with clauses - see readme.txt&quot;;
this.description = &quot;Ship script for the cutpurse missile&quot;;
this.version = &quot;1.00&quot;;

this.performSteal = function () {
	if (!this.ship.target || !this.ship.target.isValid || this.ship.target.isCargo || this.ship.target.isWeapon || this.ship.target.isRock || this.ship.target.isThargoid) {
		return;
	}
	this.ship.target.script.$armoury_cpTimer = this.$armoury_cpTimer;
	this.ship.target.script.$armoury_cpAction = this.$armoury_cpAction;
	if (this.ship.target.isPlayer) {
		this.ship.target.script.$armoury_cpPlayerDump = this.$armoury_cpPlayerDump;
	}
	this.ship.target.script.$armoury_cpTimer();
}

this.$armoury_cpTimer = function () {
	if (this.$armoury_dumpTimer) {
		return;
	}
	this.$timerDelay = Math.random() * 10;
	this.$armoury_dumpTimer = new Timer(this, this.$armoury_cpAction, this.$timerDelay);
}

this.$armoury_cpAction = function () {
	if (this.ship.isPlayer) {
		player.consoleMessage(&quot;Emergency cargo dump triggered&quot;, 4);
		this.$armoury_playerTimer = new Timer(this, this.$armoury_cpPlayerDump, 0, 0.51);
	} else {
		this.ship.setAI(&quot;armoury_ejectCargoAI.plist&quot;);
	}
}

this.$armoury_cpPlayerDump = function () {
	if (player.ship.cargoSpaceUsed === 0 || Math.random() &lt; 0.1) {
		this.$armoury_playerTimer.stop();
		delete this.$armoury_dumpTimer;
		delete this.$armoury_playerTimer;
		delete this.$armoury_cpTimer;
		delete this.$armoury_cpAction;
		return;
	} else {
		player.ship.dumpCargo();
	}
}</pre></td>
                </tr>
                <tr>
                    <td valign="top">Scripts/armoury_decoyMine.js</td>
                    <td><pre>&quot;use strict&quot;;
this.name = &quot;armoury_decoyMine.js&quot;;
this.author = &quot;Thargoid&quot;;
this.copyright = &quot;Creative Commons: attribution, non-commercial, sharealike with clauses - see readme.txt&quot;;
this.description = &quot;Ship script for the decoy mine&quot;;
this.version = &quot;1.00&quot;;

this.deployDecoys = function () {
	this.decoyCount = Math.ceil((0.00001 + Math.random()) * 4);
	this.decoyList = system.addShips(&quot;armoury_wftDecoy&quot;, this.decoyCount, this.ship.position, 500);
}</pre></td>
                </tr>
                <tr>
                    <td valign="top">Scripts/armoury_displacerMissile.js</td>
                    <td><pre>&quot;use strict&quot;;
this.name = &quot;armoury_displacerMissile.js&quot;;
this.author = &quot;Thargoid&quot;;
this.copyright = &quot;Creative Commons: attribution, non-commercial, sharealike with clauses - see readme.txt&quot;;
this.description = &quot;Ship script for the displacer missile&quot;;
this.version = &quot;1.00&quot;;

this.removeSelf = function () {
	this.ship.remove();
}

this.performDisplace = function () {
	if (!this.ship.target || !this.ship.target.isShip || !this.ship.target.isValid || this.ship.target.isCargo || this.ship.target.fuel == 0) { // displacement only for ships with fuel
		this.ship.remove();
		return;
	}

	this.ship.target.fuel *= Math.random(); // drain off some fuel to simulate the jump	

	if (this.ship.target.target) { // remove the displaced ship&#39;s target, if it has one
		this.ship.target.target = null;
	}

	this.xDistance = ((Math.random() * 2) - 1) * 1024000;
	this.yDistance = ((Math.random() * 2) - 1) * 1024000;
	this.zDistance = ((Math.random() * 2) - 1) * 1024000;

	this.ship.target.position = this.ship.target.position.add([this.xDistance, this.yDistance, this.zDistance]);

	if (this.ship.target.isPlayer) {
		player.consoleMessage(&quot;EMERGENCY - position changed by displacement weapon - compensating&quot;, 6);
	}

	this.ship.remove();
}</pre></td>
                </tr>
                <tr>
                    <td valign="top">Scripts/armoury_fieldMine.js</td>
                    <td><pre>&quot;use strict&quot;;
this.name = &quot;armoury_fieldMine.js&quot;;
this.author = &quot;Thargoid&quot;;
this.copyright = &quot;Creative Commons Attribution - Non-Commercial - Share Alike 3.0 license with clauses - see readme.txt.&quot;;
this.description = &quot;Ship script for field missile&#39;s mine.&quot;;
this.version = &quot;1.0&quot;;

this.shipSpawned = function () {
	// create an array with all possible target ships (&quot;isShip&quot; includes barrels and rock etc.) 
	this.fieldTimer = new Timer(this, this.findPrey, 0, 1);
}

this.findPrey = function () {
	function targetShips(entity) {
		return (entity.isShip &amp;&amp; !entity.hasRole(&quot;armoury_fieldMissile&quot;) &amp;&amp; !entity.hasRole(&quot;armoury_fieldMine&quot;))
	};
	let prey = system.filteredEntities(this, targetShips, this.ship, 500);
	if (prey.length &gt; 0) {
		this.stopTimer();
		this.ship.AIState = &quot;BANG&quot;;
	}
}

this.stopTimer = function () {
	if (this.fieldTimer &amp;&amp; this.fieldTimer.isRunning) {
		this.fieldTimer.stop();
		delete this.fieldTimer;
	}
}</pre></td>
                </tr>
                <tr>
                    <td valign="top">Scripts/armoury_fieldMissile.js</td>
                    <td><pre>&quot;use strict&quot;;
this.name = &quot;armoury_fieldMissile.js&quot;;
this.author = &quot;Thargoid&quot;;
this.copyright = &quot;Creative Commons: attribution, non-commercial, sharealike with clauses - see readme.txt&quot;;
this.description = &quot;Ship script for the field missile&quot;;
this.version = &quot;1.00&quot;;

this.dropMines = function () {
	if (!this.ship.target || !this.ship.target.isValid) // if the missile doesn&#39;t have a proper target to spawn mines around
	{
		this.scatterMines();
		return;
	}

	this.mineCount = Math.ceil(Math.random() * 11) + 19; // 20-30 mines to be thrown around target position (250m radius).
	system.legacy_addShipsWithinRadius(&quot;armoury_fieldMine&quot;, this.mineCount, &quot;abs&quot;, this.ship.target.position, 250);
}

this.scatterMines = function () {
	this.mineCount = Math.ceil(Math.random() * 11) + 19; // 20-30 mines to be thrown around missile position (250m radius).
	system.legacy_addShipsWithinRadius(&quot;armoury_fieldMine&quot;, this.mineCount, &quot;abs&quot;, this.ship.position, 250);
}</pre></td>
                </tr>
                <tr>
                    <td valign="top">Scripts/armoury_generalScript.js</td>
                    <td><pre>&quot;use strict&quot;;
this.name = &quot;armoury_generalScript.js&quot;;
this.author = &quot;Thargoid&quot;;
this.copyright = &quot;Creative Commons: attribution, non-commercial, sharealike with clauses - see readme.txt&quot;;
this.description = &quot;Ship script for Armoury OXP&quot;;
this.version = &quot;1.11&quot;;

// functions for various bombs supplied in the OXP

this.detonate = function () {
	if (!this.ship.owner.isValid) {
		this.ship.explode();
		return;
	}
	this.bomber = this.ship.owner;
	this.totalBounty = 0;
	this.energyAvailable = 64; // bombs own single energy bank.
	this.bomberEnergy = this.bomber.energy - 64; // max energy possible to put into EMP broadcast (leave bomber at least 1 energy bank)
	if (this.bomberEnergy &gt; 0) {
		this.energyTransfer = 0.25 + (Math.random() * 0.75); // between 25% and 100% transfer of available energy
		this.energyDeduction = (this.bomberEnergy * this.energyTransfer); // how much energy we&#39;re going to transfer to the blast.
		this.bomber.energy -= this.energyDeduction; // drain the bomber&#39;s energy banks accordingly
		this.energyAvailable += this.energyDeduction; // add the bomber energy to the bomb&#39;s own energy bank
	}

	switch (this.ship.scriptInfo.bombType) // check which type of bomb has just gone off.
	{
		case &quot;Bug bomb&quot;:
		case &quot;Buzz bomb&quot;:
			{
				this.generalBomb();
				break;
			}
		case &quot;Uni bomb&quot;:
		case &quot;Stun bomb&quot;:
			{
				this.effectBomb();
				break;
			}
	}
}

this.tidyUp = function () {
	if (this.totalBounty &gt; 0 &amp;&amp; this.bomber.isPlayer) {
		player.consoleMessage(&quot;Total bomb bounty : &quot; + this.totalBounty + &quot; ₢.&quot;, 6);
		player.credits += this.totalBounty;
	}

	if (!this.bomber.isPlayer &amp;&amp; player.ship &amp;&amp; this.bomber &amp;&amp; this.bomber.position.distanceTo(player.ship.position) &lt; 25600) {
		player.consoleMessage(this.ship.scriptInfo.bombType + &quot; detonation detected&quot;, 6);
	}
	this.ship.explode(); // get rid of the bomb entity
}

this.effectBomb = function () {
	function isPowered(entity) {
		return (entity.isShip &amp;&amp; (this.ship.owner &amp;&amp; entity != this.ship.owner) &amp;&amp; (entity.isPlayer || (!entity.isMainStation &amp;&amp; entity != this.bomber &amp;&amp; entity.scanClass != &quot;CLASS_CARGO&quot; &amp;&amp; entity.scanClass != &quot;CLASS_ROCK&quot;))); // ships who aren&#39;t cargo or rock.
	}

	var targetArray = system.filteredEntities(this, isPowered, this.ship, 25600);
	if (targetArray.length &gt; 0) {
		var targetCounter = 0; // reset the counter
		for (targetCounter = 0; targetCounter &lt; targetArray.length; targetCounter++) {
			this.distanceChance = 1 - ((this.ship.position.distanceTo(targetArray[targetCounter].position)) / 25600); // distance dependence
			this.energyChance = this.energyAvailable / targetArray[targetCounter].energy; // energy dependence
			if (Math.random() &lt; (this.distanceChance * this.energyChance)) {
				switch (this.ship.scriptInfo.bombType) // check which type of bomb has just gone off.
				{
					case &quot;Uni bomb&quot;:
						{
							if (this.bomber.isPlayer) {
								player.score += 1;
								this.totalBounty += targetArray[targetCounter].bounty;
								targetArray[targetCounter].explode();
							} else {
								if (targetArray[targetCounter].isPlayer) {
									this.newEnergy = 32 + (Math.random() * 32);
									if (player.ship.energy &gt; this.newEnergy) {
										player.ship.energy = this.newEnergy; // rather than nuking the player, set their energy very low
									}
								} else {
									targetArray[targetCounter].explode();
								}
							}
							break;
						}

					case &quot;Stun bomb&quot;:
						{
							if (targetArray[targetCounter].isPlayer) {
								player.ship.target = null;
								this.newOrient = new Quaternion;
								this.newOrient.w = (Math.random() * 2) - 1;
								this.newOrient.x = (Math.random() * 2) - 1;
								this.newOrient.y = (Math.random() * 2) - 1;
								this.newOrient.z = (Math.random() * 2) - 1;
								player.ship.orientation = this.newOrient; // as we can&#39;t stun the player, let&#39;s spin him about.
								player.consoleMessage(&quot;Flight control restored.&quot;, 6);
							} else {
								targetArray[targetCounter].setAI(&quot;armoury_stunnedAI.plist&quot;);
							}
							break;
						}
				}

			}
		}
	}
	this.tidyUp();
}


this.generalBomb = function () {
	function isPowered(entity) {
		return (entity.isShip &amp;&amp; entity != this.bomber &amp;&amp; entity.scanClass != &quot;CLASS_CARGO&quot; &amp;&amp; entity.scanClass != &quot;CLASS_ROCK&quot;);
	}

	this.damageWeight = 0.5; // damage weighting reduction adjustable for gameplay

	var targetArray = system.filteredEntities(this, isPowered, this.ship, 25600);

	if (targetArray.length &gt; 0) {
		var targetCounter = 0; // reset the counter
		for (targetCounter = 0; targetCounter &lt; targetArray.length; targetCounter++) {
			this.damageMultiplier = 1 - ((this.ship.position.distanceTo(targetArray[targetCounter].position)) / 25600); // distance dependence
			this.damage = (this.energyAvailable * this.damageMultiplier);
			if ((this.ship.scriptInfo.bombType) == &quot;Bug bomb&quot; &amp;&amp; !targetArray[targetCounter].isThargoid) {
				this.damage *= this.damageWeight;
			}
			if ((this.ship.scriptInfo.bombType) == &quot;Buzz bomb&quot; &amp;&amp; targetArray[targetCounter].isThargoid) {
				this.damage *= this.damageWeight;
			}

			if (this.damage &gt; targetArray[targetCounter].energy) {
				if (this.bomber.isPlayer) {
					player.score += 1;
					this.totalBounty += targetArray[targetCounter].bounty;
				}
				targetArray[targetCounter].explode();
			} else {
				targetArray[targetCounter].energy -= this.damage;
			}
		}
	}
	this.tidyUp();
}</pre></td>
                </tr>
                <tr>
                    <td valign="top">Scripts/armoury_interdictorMine.js</td>
                    <td><pre>&quot;use strict&quot;;
this.name = &quot;armoury_interdictorMine.js&quot;;
this.author = &quot;Thargoid&quot;;
this.copyright = &quot;Creative Commons: attribution, non-commercial, sharealike with clauses - see readme.txt&quot;;
this.description = &quot;Ship script for the interdictor mine&quot;;
this.version = &quot;1.13&quot;;

this.shipSpawned = function () {
	this.ship.desiredSpeed = 0;
	this.destructChance = -1;
	this.messageFlag = &quot;OFF&quot;;
	this.autolockFlag = &quot;NULL&quot;;

	if (worldScripts[&quot;targetAutolock&quot;] &amp;&amp; missionVariables.targetAutolock === &quot;TRUE&quot;) {
		this.autolockFlag = &quot;STOPPED&quot;;
		missionVariables.targetAutolock = null;
	}

	this.policeArray = system.entitiesWithScanClass(&quot;CLASS_POLICE&quot;, this.ship, 25600)
	if (this.policeArray.length &gt; 0 &amp;&amp; this.ship.owner &amp;&amp; !this.ship.owner.isPolice) {
		this.ship.owner.bounty += 20;
		this.policeArray[0].reactToAIMessage(&quot;OFFENCE_COMMITTED&quot;);
	}

	this.interdictTimer = new Timer(this, this.performInterdict, 0, 0.5);
}

this.playerWillEnterWitchspace = this.shipDied = function () {
	if (this.interdictTimer &amp;&amp; this.interdictTimer.isRunning) {
		this.interdictTimer.stop();
	}

	if (this.autolockFlag == &quot;STOPPED&quot;) {
		this.autolockFlag = &quot;NULL&quot;;
		missionVariables.targetAutolock = &quot;TRUE&quot;;
	}
}

this.performInterdict = function () {
	if (!this.ship.isValid || !player.ship.isValid) {
		this.shipDied();
		return;
	}

	if (Math.random() &lt; this.destructChance) // increasing chance that the mine&#39;s energy has run out and it self-destructs
	{
		this.ship.explode();
		this.shipDied();
		return;
	} else {
		this.destructChance += 0.01;
	}

	if (this.ship.position.distanceTo(player.ship.position) &lt; 25600) {
		if (this.messageFlag == &quot;OFF&quot;) {
			player.consoleMessage(&quot;Targetting system is being jammed by interdictor mine&quot;);
			this.messageFlag = &quot;ON&quot;;
		}
	} else {
		this.messageFlag = &quot;OFF&quot;;
		if (this.autolockFlag == &quot;STOPPED&quot;) {
			this.autolockFlag = &quot;NULL&quot;;
			missionVariables.targetAutolock = &quot;TRUE&quot;;
		}
	}

	function isInterdictorTarget(entity) {
		return (entity.isShip &amp;&amp; entity.target &amp;&amp; !entity.isThargoid &amp;&amp; !entity.isPolice);
	}

	var targetArray = system.filteredEntities(this, isInterdictorTarget, this.ship, 25600)
	if (targetArray.length &gt; 0) {
		var targetCounter = 0;
		for (targetCounter = 0; targetCounter &lt; targetArray.length; targetCounter++) {
			if (!targetArray[targetCounter].isPlayer) {
				targetArray[targetCounter].target = null;
			} else {
				player.ship.target = null;
				this.messageFlag = &quot;ON&quot;;
			}
		}
	}
}</pre></td>
                </tr>
                <tr>
                    <td valign="top">Scripts/armoury_kickerMissile.js</td>
                    <td><pre>&quot;use strict&quot;;
this.name = &quot;armoury_kickerMissile.js&quot;;
this.author = &quot;Thargoid&quot;;
this.copyright = &quot;Creative Commons: attribution, non-commercial, sharealike with clauses - see readme.txt&quot;;
this.description = &quot;Ship script for the kicker missile&quot;;
this.version = &quot;1.00&quot;;

this.performKick = function () {
	if (!this.ship.target || !this.ship.target.isValid) {
		return;
	}
	this.ship.target.velocity = this.ship.target.velocity.add(this.ship.velocity.multiply(25 * (this.ship.mass / this.ship.target.mass)));
}</pre></td>
                </tr>
                <tr>
                    <td valign="top">Scripts/armoury_machineScript.js</td>
                    <td><pre>&quot;use strict&quot;;
this.name = &quot;armoury_machineScript.js&quot;;
this.author = &quot;Thargoid&quot;;
this.copyright = &quot;Creative Commons: attribution, non-commercial, sharealike with clauses - see readme.txt&quot;;
this.description = &quot;World script for Armoury OXP missile machine&quot;;
this.version = &quot;1.00&quot;;

this.missileMachine = function () {
	this.mountSound1 = new SoundSource;
	this.mountSound1.sound = &quot;armoury_missileMount1.ogg&quot;;
	this.mountSound1.loop = false;
	this.mountSound2 = new SoundSource;
	this.mountSound2.sound = &quot;armoury_missileMount2.ogg&quot;;
	this.mountSound2.loop = false;
	this.mountSound3 = new SoundSource;
	this.mountSound3.sound = &quot;armoury_missileMount3.ogg&quot;;
	this.mountSound3.loop = false;

	if (this.mmTimer &amp;&amp; this.mmTimer.isRunning) {
		player.consoleMessage(&quot;Missile machine already running - please wait&quot;, 6);
		return;
	}

	if (player.ship.missiles.length == player.ship.missileCapacity) {
		player.consoleMessage(&quot;No free missile pylons available - aborting&quot;, 6);
		return;
	}

	if (player.ship.manifest[&quot;radioactives&quot;] == 0 || player.ship.manifest[&quot;alloys&quot;] == 0 || player.ship.fuel &lt; 0.2) {
		player.consoleMessage(&quot;Insufficient raw materials for manufacture - aborting&quot;, 6);
		return;
	}

	player.ship.manifest[&quot;radioactives&quot;] -= 1;
	player.ship.manifest[&quot;alloys&quot;] -= 1;
	player.ship.fuel -= 0.1;

	if (player.ship.manifest[&quot;computers&quot;] &gt; 0) {
		missionVariables.armoury_MM = &quot;EQ_ARMOURY_HARD_MISSILE&quot;;
		player.ship.manifest[&quot;computers&quot;] -= 1;
	} else {
		missionVariables.armoury_MM = &quot;EQ_ARMOURY_STANDARD_MISSILE&quot;;
	}

	player.consoleMessage(&quot;Missile machine working - please wait&quot;, 6);
	this.mmTimer = new Timer(this, this.awardWeapons, 60);
}

this.awardWeapons = function () {
	this.mountCount = 0;
	player.consoleMessage(&quot;Missile manufacture completed - mounting to pylons&quot;, 6);
	this.canMount = player.ship.awardEquipment(missionVariables.armoury_MM);
	if (this.canMount) {
		this.mountCount++;
	}
	this.canMount = player.ship.awardEquipment(missionVariables.armoury_MM);
	if (this.canMount) {
		this.mountCount++;
	}
	this.canMount = player.ship.awardEquipment(missionVariables.armoury_MM);
	if (this.canMount) {
		this.mountCount++;
	}
	switch (this.mountCount) {
		case 1:
			{
				this.mountSound1.play();
				break;
			}
		case 2:
			{
				this.mountSound2.play();
				break;
			}
		case 3:
			{
				this.mountSound3.play();
				break;
			}
	}
}

this.shipWillDockWithStation = function () {
	if (this.mmTimer &amp;&amp; this.mmTimer.isRunning) {
		this.mmTimer.stop();
		this.awardWeapons();
	}
}

this.shipDied = function () {
	if (this.mmTimer &amp;&amp; this.mmTimer.isRunning) {
		this.mmTimer.stop();
	}
}</pre></td>
                </tr>
                <tr>
                    <td valign="top">Scripts/armoury_missileMachine.js</td>
                    <td><pre>&quot;use strict&quot;;
this.name = &quot;armoury_missileMachine.js&quot;;
this.author = &quot;Thargoid&quot;;
this.copyright = &quot;Creative Commons: attribution, non-commercial, sharealike with clauses - see readme.txt&quot;;
this.description = &quot;Ship script for missile machine&quot;;
this.version = &quot;1.00&quot;;

this.startMachine = function () {
	player.ship.awardEquipmentToCurrentPylon(&quot;EQ_ARMOURY_MISSILEMACHINE_MINE&quot;); // put the HUD icon back
	worldScripts[&quot;armoury_machineScript.js&quot;].missileMachine();
	this.ship.remove(); // get rid of the spawned evidence
}</pre></td>
                </tr>
                <tr>
                    <td valign="top">Scripts/armoury_screamerMine.js</td>
                    <td><pre>&quot;use strict&quot;;
this.name = &quot;armoury_screamerMine.js&quot;;
this.author = &quot;Thargoid&quot;;
this.copyright = &quot;Creative Commons: attribution, non-commercial, sharealike with clauses - see readme.txt&quot;;
this.description = &quot;Ship script for the screamer mine&quot;;
this.version = &quot;1.00&quot;;

this.shipSpawned = function () {
	this.ship.desiredSpeed = 0;
	this.destructChance = -0.5;
	this.screamerTimer = new Timer(this, this.scream, 0, 2);
}

this.playerWillEnterWitchspace = this.shipDied = function () {
	if (this.screamerTimer &amp;&amp; this.screamerTimer.isRunning) {
		this.screamerTimer.stop();
	}
}

this.scream = function () {
	if (!this.ship) {
		this.shipDied();
		return;
	}

	if (Math.random() &lt; this.destructChance) // increasing chance that the mine&#39;s energy has run out and it self-destructs
	{
		this.ship.explode();
		this.shipDied();
		return;
	} else {
		this.destructChance += 0.01;
	}

	function isAlien(entity) {
		return (entity.isShip &amp;&amp; entity.target &amp;&amp; entity.target != this.ship &amp;&amp; (entity.isThargoid || entity.hasRole(&quot;thargoid&quot;) || entity.hasRole(&quot;thargon&quot;) || entity.hasRole(&quot;tharglet&quot;)));
	}

	var targetArray = system.filteredEntities(this, isAlien, this.ship, 25600)
	if (targetArray.length &gt; 0) {
		var targetCounter = 0;
		for (targetCounter = 0; targetCounter &lt; targetArray.length; targetCounter++) {
			if (Math.random() &lt; 0.25) {
				targetArray[targetCounter].reactToAIMessage(&quot;TARGET_LOST&quot;);
				targetArray[targetCounter].target = this.ship;
				targetArray[targetCounter].AIState = &quot;ATTACK_SHIP&quot;;
			}
		}
	}
}</pre></td>
                </tr>
                <tr>
                    <td valign="top">Scripts/armoury_trackerBeacon.js</td>
                    <td><pre>&quot;use strict&quot;;
this.name = &quot;armoury_trackerBeacon.js&quot;;
this.author = &quot;Thargoid&quot;;
this.copyright = &quot;Creative Commons: attribution, non-commercial, sharealike with clauses - see readme.txt&quot;;
this.description = &quot;Beacon script for tracker missile.&quot;;
this.version = &quot;1.00&quot;;

this.shipSpawned = function () {
	if (!this.ship || !this.ship.target) {
		return;
	}
	this.callbackID = addFrameCallback(this.positionTag.bind(this));
}

this.positionTag = function () {
	if (!this.ship || !this.ship.isValid || !this.ship.target || !this.ship.target.isValid) {
		if (this.callbackID) {
			removeFrameCallback(this.callbackID);
		}
		delete this.callbackID;
		this.ship.remove();
		return;
	}

	this.ship.position = this.ship.target.position
};

this.shipDied = function (whom, why) { // in cases where the tag does manage to collide with the tracked entity, respawn the tag.
	if (why &amp;&amp; why === &quot;scrape damage&quot; &amp;&amp; whom &amp;&amp; this.ship &amp;&amp; this.ship.target &amp;&amp; whom === this.ship.target) {
		var Tag = this.ship.spawnOne(&quot;armoury_trackerBeacon&quot;);
		Tag.target = this.ship.target;
	}
}</pre></td>
                </tr>
                <tr>
                    <td valign="top">Scripts/armoury_trackerMissile.js</td>
                    <td><pre>&quot;use strict&quot;;
this.name = &quot;armoury_trackerMissile.js&quot;;
this.author = &quot;Thargoid&quot;;
this.copyright = &quot;Creative Commons: attribution, non-commercial, sharealike with clauses - see readme.txt&quot;;
this.description = &quot;Ship script for the tag missile&quot;;
this.version = &quot;1.00&quot;;

this.tagShip = function () {
	var Tag = this.ship.spawnOne(&quot;armoury_trackerBeacon&quot;);
	if (this.ship &amp;&amp; this.ship.target &amp;&amp; this.ship.target.isValid) {
		Tag.target = this.ship.target;
	}
	player.consoleMessage(&quot;Tracker deployed&quot;);
	this.ship.remove();
}</pre></td>
                </tr>
                <tr>
                    <td valign="top">Scripts/armoury_trackerWorldScript.js</td>
                    <td><pre>&quot;use strict&quot;;
this.name = &quot;armoury_trackerWorldScript.js&quot;;
this.author = &quot;Thargoid&quot;;
this.copyright = &quot;Creative Commons: attribution, non-commercial, sharealike with clauses - see readme.txt&quot;;
this.description = &quot;World script for the tracker beacon&quot;;
this.version = &quot;1.00&quot;;

this.compassTargetChanged = function (whom, mode) {
	if (mode &amp;&amp; mode === &quot;COMPASS_MODE_BEACONS&quot; &amp;&amp; whom &amp;&amp; whom.name === &quot;Tracker Beacon&quot;) {
		if (whom.target) {
			player.consoleMessage(&quot;Tagged subject - &quot; + whom.target.name);
		}
	}
}</pre></td>
                </tr>
                <tr>
                    <td valign="top">Scripts/armoury_voidBomb.js</td>
                    <td><pre>&quot;use strict&quot;;
this.name = &quot;armoury_voidBomb.js&quot;;
this.author = &quot;Thargoid&quot;;
this.copyright = &quot;Creative Commons: attribution, non-commercial, sharealike with clauses - see readme.txt&quot;;
this.description = &quot;Ship script for the void bomb&quot;;
this.version = &quot;1.00&quot;;

this.detonate = function () {
	if (this.ship.subEntities.length &gt; 0) {
		this.ship.subEntities[0].explode();
	}
	this.ship.displayName = &quot;Void Bomb Singularity&quot;;
	this.voidTimer = new Timer(this, this.beginAttract, 0, 0.25);
}

this.playerWillEnterWitchspace = this.shipDied = this.stopTimer = function () {
	if (this.voidTimer &amp;&amp; this.voidTimer.isRunning) {
		this.voidTimer.stop();
	}
}

this.beginAttract = function () {
	if (!this.ship) {
		this.stopTimer();
		return;
	}

	this.ship.velocity = [0, 0, 0];

	function isTarget(entity) {
		return (entity.isShip &amp;&amp; entity.isValid);
	}

	var targetArray = system.filteredEntities(this, isTarget, this.ship, 25600)
	if (targetArray.length &gt; 0) {
		var targetCounter = 0;
		for (targetCounter = 0; targetCounter &lt; targetArray.length; targetCounter++) {
			this.targetRange = targetArray[targetCounter].position.distanceTo(this.ship.position);
			this.targetVector = this.ship.position.subtract(targetArray[targetCounter].position).direction();
			this.rangeFactor = (this.targetRange / 25600) * 0.8;
			targetArray[targetCounter].velocity = targetArray[targetCounter].velocity.multiply(this.rangeFactor + 0.1).add(this.targetVector.multiply(25 * (1 - this.rangeFactor)));
		}
	}
}

this.shipTakingDamage = function (amount, fromEntity, damageType) {
	this.ship.energy = this.ship.maxEnergy;
}

this.shipCollided = function (otherShip) {
	if (this.ship.AIState === &quot;VOID&quot;) {
		otherShip.energy -= 64;
		this.ship.energy = this.ship.maxEnergy;
	}
}

/* Need to add dependence on mass perhaps? Also perhaps adjust the 10* multiplier for the applied velocity */</pre></td>
                </tr>
                <tr>
                    <td valign="top">Scripts/armoury_wtfDecoy.js</td>
                    <td><pre>&quot;use strict&quot;;
this.name = &quot;armoury_wtfDecoy.js&quot;;
this.author = &quot;Thargoid&quot;;
this.copyright = &quot;Creative Commons: attribution, non-commercial, sharealike with clauses - see readme.txt&quot;;
this.description = &quot;Ship script for the decoy&quot;;
this.version = &quot;1.00&quot;;

this.shipSpawned = function () {
	function allShips(entity) {
		return entity.isShip &amp;&amp; !entity.isRock &amp;&amp; !entity.isCargo
	};
	let shipList = system.filteredEntities(this, allShips, this.ship, 25600);

	if (shipList.length === 0) {
		return;
	}

	var shipCounter = 0; // reset the counter
	for (shipCounter = 0; shipCounter &lt; shipList.length; shipCounter++) {

		if (shipList[shipCounter].isPlayer) {
			continue;
		};

		if (shipList[shipCounter].isPolice) {
			shipList[shipCounter].target = this.ship;
			shipList[shipCounter].reactToAIMessage(&quot;ATTACKED&quot;);
			continue;
		}

		if (shipList[shipCounter].isTrader) {
			shipList[shipCounter].target = this.ship;
			shipList[shipCounter].reactToAIMessage(&quot;FLEE&quot;);
			continue;
		}

		if (shipList[shipCounter].isPirate &amp;&amp; Math.random() &gt; 0.5) {
			shipList[shipCounter].target = this.ship;
			shipList[shipCounter].reactToAIMessage(&quot;ATTACKED&quot;);
			continue;
		}
	}
}</pre></td>
                </tr>
                <tr>
                    <td valign="top">Scripts/drones_Launcher.js</td>
                    <td><pre>&quot;use strict&quot;;
this.name = &quot;drones_Launcher&quot;;
this.author = &quot;Thargoid &amp; Eric Walch&quot;;
this.copyright = &quot;Creative Commons Attribution - Non-Commercial - Share Alike 3.0 license with clauses - see readme.txt.&quot;;
this.description = &quot;Spawn ship with target mother&quot;;
this.version = &quot;2.0&quot;;

this.shipDied = function () {
    let drone = this.ship.spawnOne(this.ship.scriptInfo.launch_name)
    drone.master = this.ship.owner
    if (this.ship.target) {
        drone.target = this.ship.target
        drone.position = this.ship.position
    }
    delete this.shipDied;
}</pre></td>
                </tr>
                <tr>
                    <td valign="top">Scripts/drones_Pickup.js</td>
                    <td><pre>&quot;use strict&quot;;
this.name = &quot;drones_Pickup&quot;;
this.author = &quot;Thargoid &amp; Eric Walsh&quot;;
this.copyright = &quot;Creative Commons Attribution - Non-Commercial - Share Alike 3.0 license with clauses - see readme.txt.&quot;;
this.description = &quot;Pickup of a drone after combat, and check if it&#39;s reusable (T). New JS Scanning routine (EW). Updated for 1.74&quot;;
this.version = &quot;2.01&quot;;

this.shipWasScooped = function (scooper) {
	if (scooper.isPlayer) {
		let choice = (Math.ceil(Math.random() * 3));
		if (choice == 3) {
			player.consoleMessage(this.ship.name + &quot; circuits blown - only good for scrap machinery.&quot;, 6);
			manifest[&quot;machinery&quot;] += 1;
		} else {
			player.consoleMessage(this.ship.name + &quot; recovered, recharged and ready for use.&quot;, 6);
			player.ship.awardEquipment(this.ship.scriptInfo.DroneEquipment)
		}
	}
}

this.findMastersHostiles = function () {
	function isHostileToMaster(entity) {
		return (entity.isShip &amp;&amp; (entity.isThargoid || (entity.target &amp;&amp; entity.target == this.ship.master &amp;&amp; entity.hasHostileTarget)));
	}
	let targets = system.filteredEntities(this, isHostileToMaster, this.ship, 25600)
	if (targets.length &gt; 0) {
		this.ship.target = targets[0];
		this.ship.reactToAIMessage(&quot;NEW_DRONE_TARGET&quot;);
		if (this.ship.master &amp;&amp; this.ship.master.isPlayer) player.commsMessage(this.ship.name + &quot;: Attacking &quot; + targets[0].displayName)
	} else this.ship.reactToAIMessage(&quot;NOTHING_FOUND&quot;);
}

this.shipTargetDestroyed = function (target) {
	if (this.ship.master &amp;&amp; this.ship.master.isPlayer) {
		player.score += 1;
		player.credits += target.bounty;
		player.consoleMessage(&quot;Drone kill - &quot; + target.name + &quot; : &quot; + target.bounty + &quot;? awarded.&quot;, 5);
	}
	log(&quot;Drone kill - &quot; + target.name + &quot; : &quot; + target.bounty);

	if (target.primaryRole == &quot;constrictor&quot; &amp;&amp; missionVariables.conhunt &amp;&amp; missionVariables.conhunt == &quot;STAGE_1&quot;) { // just in case the drone kills the constrictor, let&#39;s not break the mission for the player...
		missionVariables.conhunt = &quot;CONSTRICTOR_DESTROYED&quot;;
	}
}</pre></td>
                </tr>
                <tr>
                    <td valign="top">Scripts/missileRack_launcher.js</td>
                    <td><pre>&quot;use strict&quot;;
this.name = &quot;missileRack&quot;;
this.author = &quot;Thargoid, with optimisation by Eric Walsh&quot;;
this.copyright = &quot;Creative Commons Attribution - Non-Commercial - Share Alike 3.0 license with clauses - see readme.txt.&quot;;
this.description = &quot;Script for missile rack&quot;;
this.version = &quot;1.0&quot;;

this.rackRefresh = function () {
	this.launchRack = this.ship.scriptInfo.launchingRack;
	switch (this.launchRack) {
		case &quot;EQ_IRACK_0_MISSILE&quot;:
		case &quot;EQ_NRACK_0_MISSILE&quot;:
		case &quot;EQ_HRACK_0_MISSILE&quot;:
		case &quot;EQ_SRACK_0_MISSILE&quot;:
			{
				player.consoleMessage(&quot;Missile rack empty - ejecting.&quot;, 6);
				player.ship.spawnOne(&quot;missileRack_spentRack&quot;);
				break;
			}
		default:
			{
				player.ship.awardEquipmentToCurrentPylon(this.launchRack);
				break;
			}
	}
}

// functionality for stun missiles	

this.performStun = function () {
	if (!this.ship.target ||
		!this.ship.target.isValid ||
		!this.ship.target.isShip ||
		this.ship.target.isPlayer ||
		this.ship.target.isStation ||
		this.ship.target.isRock ||
		this.ship.target.isCargo) {
		return;
	} else {
		this.ship.target.setAI(&quot;armoury_stunnedAI.plist&quot;);
	}
}</pre></td>
                </tr>
                <tr>
                    <td valign="top">Scripts/probe_launcher.js</td>
                    <td><pre>&quot;use strict&quot;;
this.name = &quot;probeLaunch&quot;;
this.author = &quot;Thargoid&quot;;
this.copyright = &quot;Creative Commons Attribution - Non-Commercial - Share Alike 3.0 license with clauses - see readme.txt.&quot;;
this.description = &quot;Spawn probe with correct heading and AI&quot;;
this.version = &quot;2.00&quot;;

this.shipDied = function () {
	let probe = this.ship.spawnOne(&#39;probe_probeMissile&#39;);
	let probeOrientation = this.ship.owner.orientation;
	let offsetVector = probeOrientation.vectorUp(); // vector at right angles to the ship/probe, downwards
	let spawnOffset = offsetVector.multiply(50); // set the offset to 50m downwards (for larger ships, increase 50).
	probe.orientation = probeOrientation; // point the probe in the same direction as the player
	probe.position = this.ship.position.subtract(spawnOffset); // move the probe to it&#39;s correct start point.
	probe.switchAI(&#39;probe_probeMissileAI.plist&#39;); // confirm it&#39;s using the correct AI after spawn (no autoAI).
	delete this.shipDied;
}</pre></td>
                </tr>
                <tr>
                    <td valign="top">Scripts/probe_operation.js</td>
                    <td><pre>&quot;use strict&quot;;
this.name = &quot;probeMissile&quot;;
this.author = &quot;Thargoid &amp; Eric Walch&quot;;
this.copyright = &quot;Creative Commons Attribution - Non-Commercial - Share Alike 3.0 license with clauses - see readme.txt.&quot;;
this.description = &quot;Operation and pick-up of probe missile.&quot;;
this.version = &quot;2.0&quot;;

this.shipWasScooped = function (scooper) {
	if (scooper.isPlayer) {
		player.consoleMessage(&quot;Probe missile recovered, refuelled and ready for re-use.&quot;, 6);
		player.ship.awardEquipment(&quot;EQ_PROBE_LAUNCHER_MINE&quot;)
	}
}

this.doScan = function () {
	// create an array with all ships (&quot;isShip&quot; includes barrels and rock etc.) 
	function allShips(entity) {
		return entity.isShip
	};
	let anyShips = system.filteredEntities(this, allShips, this.ship, 25600);

	// do neutral ships 
	function neutralShips(entity) {
		return entity.scanClass == &quot;CLASS_NEUTRAL&quot;
	};
	this.neutralCount = anyShips.filter(neutralShips).length;

	// do police/military ships 
	function policeShips(entity) {
		return (entity.scanClass == &quot;CLASS_POLICE&quot; || entity.scanClass == &quot;CLASS_MILITARY&quot;)
	};
	this.policeCount = anyShips.filter(policeShips).length;

	// do thargoid ships 
	function thargoidShips(entity) {
		return entity.scanClass == &quot;CLASS_THARGOID&quot;
	};
	this.thargoidCount = anyShips.filter(thargoidShips).length;

	// do rocks 
	function rockShips(entity) {
		return entity.scanClass == &quot;CLASS_ROCK&quot; &amp;&amp; !entity.isStation
	};
	this.rockCount = anyShips.filter(rockShips).length;

	// do stations 
	function stationShips(entity) {
		return (entity.scanClass == &quot;CLASS_STATION&quot; || entity.isStation)
	};
	this.stationCount = anyShips.filter(stationShips).length;

	// do cargo 
	function cargoShips(entity) {
		return entity.scanClass == &quot;CLASS_CARGO&quot;
	};
	this.cargoCount = anyShips.filter(cargoShips).length;

	// do trader ships 
	function isPirateVictim(entity) {
		return entity.isPirateVictim
	};
	this.traderCount = anyShips.filter(isPirateVictim).length;

	// do trader escorts 
	function isTraderEscort(entity) {
		return entity.primaryRole == &quot;escort&quot; &amp;&amp; entity.owner &amp;&amp; entity.owner.isPirateVictim
	};
	this.traderEscortCount = anyShips.filter(isTraderEscort).length;

	// do pirate ships 
	function isPirate(entity) {
		return entity.isPirate
	};
	this.pirateCount = anyShips.filter(isPirate).length;

	// do pirate escorts 
	function isPirateEscort(entity) {
		return entity.primaryRole == &quot;escort&quot; &amp;&amp; entity.owner &amp;&amp; entity.owner.isPirate
	};
	this.pirateEscortCount = anyShips.filter(isPirateEscort).length;

	this.totalCount = this.neutralCount + this.policeCount + this.thargoidCount + this.rockCount + this.stationCount + this.cargoCount;
	if (this.totalCount == 0) {
		player.commsMessage(&quot;Probe Missile - Nothing within scanner range.&quot;, 6);
	} else {
		player.commsMessage(&quot;Scan readout :&quot;, 6);
		if (this.traderCount + this.traderEscortCount &gt; 0) player.commsMessage(&quot;Traders - &quot; + this.traderCount + &quot; (with &quot; + this.traderEscortCount + &quot; escorts)&quot;, 6);

		if (this.policeCount &gt; 0) player.commsMessage(&quot;System vessels - &quot; + this.policeCount, 6);
		if (this.pirateCount + this.pirateEscortCount &gt; 0) player.commsMessage(&quot;Pirates - &quot; + this.pirateCount + &quot; (with &quot; + this.pirateEscortCount + &quot; escorts)&quot;, 6);
		if (this.thargoidCount &gt; 0) player.commsMessage(&quot;Aliens - &quot; + this.thargoidCount, 6);
		if (this.rockCount &gt; 0) player.commsMessage(&quot;Asteroids - &quot; + this.rockCount, 6);
		if (this.cargoCount &gt; 0) player.commsMessage(&quot;Loose Cargo - &quot; + this.cargoCount, 6);
		if (this.stationCount &gt; 0) player.commsMessage(&quot;Stations - &quot; + this.stationCount, 6);
		let otherShipsCount = this.neutralCount - this.pirateCount - this.pirateEscortCount - this.traderCount - this.traderEscortCount;
		if (otherShipsCount &gt; 0) player.commsMessage(&quot;Other ships - &quot; + otherShipsCount, 6);
	}
}

this.shipDied = function () {
	player.consoleMessage(&quot;Contact lost with probe missile.&quot;, 6);
}

this.probeLaunched = function () {
	player.consoleMessage(&quot;Probe missile launch successful.&quot;, 6);
}

this.setCoords = function () {
	let dest = this.ship.orientation.vectorForward().multiply(50000);
	this.ship.savedCoordinates = this.ship.position.add(dest);
}

this.probeReturning = function () {
	player.commsMessage(&quot;Probe Missile - Returning, please slow for rendezvous.&quot;, 6);
}

this.probeLost = function () {
	player.commsMessage(&quot;Probe Missile - Unable to reach ship for rendezvous, shutting down.&quot;, 6);
}

this.getPlayer = function () {
	this.ship.target = player.ship;
}</pre></td>
                </tr>
            </table>
        </a>
    </body>
</html>
