<html>
    <head>
        <title>Expansion Weapon Laws</title>
        <link rel="stylesheet" href="../style.css">
    </head>
    <body>
        <table border="0" width="100%">
            <tr>
                <td>Back to <a href='../index.html'>Index</a></td>
                <td align="right"><small>Page generated: Oct 11, 2023, 3:16:49 PM</small></td>
            </tr>
        </table>

        <h1>Expansion Weapon Laws</h1>

        <h2>Content</h2>
        <ul>
          <li><a href="#warnings">Warnings</a></li>
          <li><a href="#manifest">Manifest</a></li>
          <li><a href="#documentation">Documentation</a></li>
          <li><a href="#equipment">0 Equipment</a></li>
          <li><a href="#ships">0 Ships</a></li>
          <li><a href="#models">0 Models</a></li>
          <li><a href="#scripts">1 Scripts</a></li>
        </ul>

          <a name="warnings">
            <h2>Warnings</h2>
            <ol>
                <li>Information URL mismatch between OXP Manifest and Expansion Manager string length at character position 0</li>
                <li>Unknown key &#39;upload_date&#39; at https://wiki.alioth.net/img_auth.php/f/fd/Oolite.oxp.redspear.weapon_laws.oxz!manifest.plist</li>
            </ol>
          </a>

        <a name="manifest">
        <h2>Manifest</h2>
            <table border="1">
                <tr>
                    <th></th>
                    <th>from Expansion Manager's OXP list</th>
                    <th>from Expansion Manifest</th>
                </tr>
                <tr>
                    <td>Description</td>
                    <td>Restricts the sale of more dangerous weapons to the more lawless systems. Press &#39;i&#39; for more information.
- - - - - - - - - -

Military Lasers for sale in a Democracy?
Quirium Cascade Mines available in a Corporate State?
No wonder the galaxy has a piracy problem...
This expansion makes the more high end military equipment available only in the more dangerous systems. Tech level still applies but generally speaking the more dangerous the equipment, the more dangerous the system where you are likely to find it for sale.</td>
                    <td>Restricts the sale of more dangerous weapons to the more lawless systems. Press &#39;i&#39; for more information.
- - - - - - - - - -

Military Lasers for sale in a Democracy?
Quirium Cascade Mines available in a Corporate State?
No wonder the galaxy has a piracy problem...
This expansion makes the more high end military equipment available only in the more dangerous systems. Tech level still applies but generally speaking the more dangerous the equipment, the more dangerous the system where you are likely to find it for sale.</td>
                </tr>
                <tr>
                    <td>Identifier</td>
                    <td>oolite.oxp.redspear.weapon_laws</td>
                    <td>oolite.oxp.redspear.weapon_laws</td>
                </tr>
                <tr>
                    <td>Title</td>
                    <td>Weapon Laws</td>
                    <td>Weapon Laws</td>
                </tr>
                <tr>
                    <td>Category</td>
                    <td>Equipment</td>
                    <td>Equipment</td>
                </tr>
                <tr>
                    <td>Author</td>
                    <td>Redspear</td>
                    <td>Redspear</td>
                </tr>
                <tr>
                    <td>Version</td>
                    <td>1.6</td>
                    <td>1.6</td>
                </tr>
                <tr>
                    <td>Tags</td>
                    <td></td>
                    <td></td>
                </tr>
                <tr>
                    <td>Required Oolite Version</td>
                    <td></td>
                    <td></td>
                </tr>
                <tr>
                    <td>Maximum Oolite Version</td>
                    <td></td>
                    <td></td>
                </tr>
                <tr>
                    <td>Required Expansions</td>
                    <td>
                    </td>
                    <td>
                    </td>
                </tr>
                <tr>
                    <td>Optional Expansions</td>
                    <td>
                    </td>
                    <td>
                    </td>
                </tr>
                <tr>
                    <td>Conflict Expansions</td>
                    <td>
                    </td>
                    <td>
                    </td>
                </tr>
                <tr>
                    <td>Information URL</td>
                    <td><a target="_blank" href=""></a></td>
                    <td><a target="_blank" href="">n/a</a></td>
                </tr>
                <tr>
                    <td>Download URL</td>
                    <td><a target="_blank" href="https://wiki.alioth.net/img_auth.php/f/fd/Oolite.oxp.redspear.weapon_laws.oxz">https://wiki.alioth.net/img_auth.php/f/fd/Oolite.oxp.redspear.weapon_laws.oxz</a></td>
                    <td><a target="_blank" href="">n/a</a></td>
                </tr>
                <tr>
                    <td>License</td>
                    <td>CC-BY-NC-SA 4.0</td>
                    <td>CC-BY-NC-SA 4.0</td>
                </tr>
                <tr>
                    <td>File Size</td>
                    <td>n/a</td>
                </tr>
                <tr>
                    <td>Upload date</td>
                    <td>1669239366</td>
                </tr>
            </table>
                </a>

        <a name="documentation">
        <h2>Documentation</h2>
        <p>Also read <a href='http://wiki.alioth.net/index.php/Weapon%20Laws'>http://wiki.alioth.net/index.php/Weapon%20Laws</a></p>
        </a>

        <a name="equipment">          
        <h2>Equipment</h2>
            This expansion declares no equipment. This may be related to warnings.
        </a>

        <a name="ships">    
        <h2>Ships</h2>
            This expansion declares no ships. This may be related to warnings.
        </a>

        <a name="models">    
        <h2>Models</h2>
            This expansion declares no models. This may be related to warnings.
        </a>

        <a name="scripts">    
        <h2>Scripts</h2>
            <table>
                <tr>
                    <th>Path</th>
                </tr>
                <tr>
                    <td valign="top">Scripts/weapon_laws.js</td>
                    <td><pre>this.name        = &quot;weapon_laws&quot;; 
this.author      = &quot;Redspear&quot;; 
this.copyright   = &quot;2020 Redspear&quot;;
this.licence     = &quot;CC BY-NC-SA 4.0&quot;; 
this.description = &quot;Script to restrict sale of military grade equipment at the safer systems.&quot;; 
this.version     = &quot;1.6&quot;;

&quot;use strict&quot;;

//	disallow free sale of military hardware at every station

this.allowAwardEquipment = function(eqKey, ship, context)
{	
	if (context == &quot;scripted&quot;)
		{return true;	// thanks phkb!
		}
		else {
	//	democracies
	if ((eqKey == &quot;EQ_WEAPON_PULSE_LASER&quot; || eqKey == &quot;EQ_WEAPON_DUAL_LASER&quot; || eqKey == &quot;EQ_WEAPON_IPULSE_LASER&quot; || eqKey == &quot;EQ_DEFENCE_MISSILE&quot; || eqKey == &quot;EQ_SHIELD_BOOSTER&quot;) &amp;&amp; context == &quot;purchase&quot; &amp;&amp; system.government &gt; 6) {
		return false;
		}
		else {
	//	confederacies
	if ((eqKey == &quot;EQ_MISSILE&quot; || eqKey == &quot;EQ_NAVAL_SHIELD_BOOSTER&quot;) &amp;&amp; context == &quot;purchase&quot; &amp;&amp; system.government &gt; 5) {
		return false;
		}
		else {
	//	communist states
	if ((eqKey == &quot;EQ_WEAPON_BEAM_LASER&quot; || eqKey == &quot;EQ_WEAPON_IBEAM_LASER&quot; || eqKey == &quot;EQ_WEAPON_BURST_LASER&quot; || eqKey == &quot;EQ_SCANNER_SHOW_MISSILE_TARGET&quot;) &amp;&amp; context == &quot;purchase&quot; &amp;&amp; system.government &gt; 4) {
		return false;}
		else {
	//	dictatorships
	if ((eqKey == &quot;EQ_HARDENED_MISSILE&quot; || eqKey == &quot;EQ_TORPEDO_MISSILE&quot; || eqKey == &quot;EQ_MULTI_TARGET&quot; || eqKey == &quot;EQ_TARGET_MEMORY&quot;) &amp;&amp; context == &quot;purchase&quot; &amp;&amp; system.government &gt; 3) {
		return false;
		}
		else {
	//	multi-governments
	if ((eqKey == &quot;EQ_WEAPON_MILITARY_LASER&quot; || eqKey == &quot;EQ_WEAPON_ASSAULT_LASER&quot; || eqKey == &quot;EQ_WEAPON_EMILITARY_LASER&quot; || eqKey == &quot;EQ_INTEGRATED_TARGETING_SYSTEM&quot;) &amp;&amp; context == &quot;purchase&quot; &amp;&amp; system.government &gt; 2) {
		return false;
		}
		else {	
	//	feudal states
	if ((eqKey == &quot;EQ_QC_MINE&quot;) &amp;&amp; context == &quot;purchase&quot; &amp;&amp; system.government &gt; 1) {
		return false;
		}
		else {
	//	anarchies
	if (eqKey == &quot;EQ_ENERGY_BOMB&quot; &amp;&amp; context == &quot;purchase&quot; &amp;&amp; system.government &gt; 0) {	//	Moo Hoo Ha Ha Haaaaa! :-P (requires relevant oxp)
		return false;
		}
		else {
		
	// remainder from oolite-conditions.js
	
		// OXP hook to allow stations to forbid specific equipment
	if (context == &quot;purchase&quot; &amp;&amp; player.ship.dockedStation &amp;&amp; player.ship.dockedStation.scriptInfo[&quot;oolite-barred-equipment&quot;])
	{
		if (player.ship.dockedStation.scriptInfo[&quot;oolite-barred-equipment&quot;].indexOf(equipment) != -1)
		{
			return false;
		}
	}

	// OXP hook to allow ships to forbid specific &quot;available to all&quot; equipment
	if (ship.scriptInfo &amp;&amp; ship.scriptInfo[&quot;oolite-barred-equipment&quot;] &amp;&amp; ship.scriptInfo[&quot;oolite-barred-equipment&quot;].indexOf(equipment) != -1)
	{
		return false;
	}

	// otherwise allowed
	return true;
	}
}
}
}
}
}
}
}
}
</pre></td>
                </tr>
            </table>
        </a>
    </body>
</html>
