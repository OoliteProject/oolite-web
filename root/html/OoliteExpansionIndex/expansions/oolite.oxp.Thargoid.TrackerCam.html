<html>
    <head>
        <title>Expansion Tracker Cam</title>
        <link rel="stylesheet" href="../style.css">
    </head>
    <body>
        <table border="0" width="100%">
            <tr>
                <td>Back to <a href='../index.html'>Index</a></td>
                <td align="right"><small>Page generated: Oct 11, 2023, 3:16:49 PM</small></td>
            </tr>
        </table>

        <h1>Expansion Tracker Cam</h1>

        <h2>Content</h2>
        <ul>
          <li><a href="#warnings">Warnings</a></li>
          <li><a href="#manifest">Manifest</a></li>
          <li><a href="#documentation">Documentation</a></li>
          <li><a href="#equipment">2 Equipment</a></li>
          <li><a href="#ships">1 Ships</a></li>
          <li><a href="#models">0 Models</a></li>
          <li><a href="#scripts">2 Scripts</a></li>
        </ul>

          <a name="warnings">
            <h2>Warnings</h2>
            <ol>
                <li>Tags mismatch between OXP Manifest and Expansion Manager at character position 0002 (RIGHT SQUARE BRACKET vs LATIN SMALL LETTER E)(&#39;[]&#39; vs &#39;[equipment]&#39;)</li>
            </ol>
          </a>

        <a name="manifest">
        <h2>Manifest</h2>
            <table border="1">
                <tr>
                    <th></th>
                    <th>from Expansion Manager's OXP list</th>
                    <th>from Expansion Manifest</th>
                </tr>
                <tr>
                    <td>Description</td>
                    <td>A deployable camera which links to your ships external view monitor and trackers the ships movements.</td>
                    <td>A deployable camera which links to your ships external view monitor and trackers the ships movements.</td>
                </tr>
                <tr>
                    <td>Identifier</td>
                    <td>oolite.oxp.Thargoid.TrackerCam</td>
                    <td>oolite.oxp.Thargoid.TrackerCam</td>
                </tr>
                <tr>
                    <td>Title</td>
                    <td>Tracker Cam</td>
                    <td>Tracker Cam</td>
                </tr>
                <tr>
                    <td>Category</td>
                    <td>Equipment</td>
                    <td>Equipment</td>
                </tr>
                <tr>
                    <td>Author</td>
                    <td>Thargoid</td>
                    <td>Thargoid</td>
                </tr>
                <tr>
                    <td>Version</td>
                    <td>1.02</td>
                    <td>1.02</td>
                </tr>
                <tr>
                    <td>Tags</td>
                    <td></td>
                    <td>equipment</td>
                </tr>
                <tr>
                    <td>Required Oolite Version</td>
                    <td></td>
                    <td></td>
                </tr>
                <tr>
                    <td>Maximum Oolite Version</td>
                    <td></td>
                    <td></td>
                </tr>
                <tr>
                    <td>Required Expansions</td>
                    <td>
                    </td>
                    <td>
                    </td>
                </tr>
                <tr>
                    <td>Optional Expansions</td>
                    <td>
                    </td>
                    <td>
                    </td>
                </tr>
                <tr>
                    <td>Conflict Expansions</td>
                    <td>
                    </td>
                    <td>
                    </td>
                </tr>
                <tr>
                    <td>Information URL</td>
                    <td><a target="_blank" href="http://wiki.alioth.net/index.php/TrackerCam_OXP">http://wiki.alioth.net/index.php/TrackerCam_OXP</a></td>
                    <td><a target="_blank" href="">n/a</a></td>
                </tr>
                <tr>
                    <td>Download URL</td>
                    <td><a target="_blank" href="https://wiki.alioth.net/img_auth.php/7/70/TrackerCam_1.02.oxz">https://wiki.alioth.net/img_auth.php/7/70/TrackerCam_1.02.oxz</a></td>
                    <td><a target="_blank" href="">n/a</a></td>
                </tr>
                <tr>
                    <td>License</td>
                    <td>Creative Commons Attribution - Non-Commercial - Share Alike 3.0 license with clauses - see readme file</td>
                    <td>Creative Commons Attribution - Non-Commercial - Share Alike 3.0 license with clauses - see readme file</td>
                </tr>
                <tr>
                    <td>File Size</td>
                    <td>n/a</td>
                </tr>
                <tr>
                    <td>Upload date</td>
                    <td>1610873333</td>
                </tr>
            </table>
                </a>

        <a name="documentation">
        <h2>Documentation</h2>
        <p>Also read <a href='http://wiki.alioth.net/index.php/Tracker%20Cam'>http://wiki.alioth.net/index.php/Tracker%20Cam</a></p>
        <h3>TrackerCam v1.02 ReadMe &amp; License.txt</h3>
        <pre>TrackerCam OXP by Thargoid (with bits from Cim).

A little OXP which provides tracking camera satellites and a ship-to-satellite communications link. Both are available from tech 3+ equipment centres for the princely sum of 50 credits each.

The satellite cameras themselves are pylon mounted and deployed in the usual fashion (like a mine).

To use them, with a satellite within scanner range select the visual link on your primable equipment list (&quot;shift-N&quot; on normal key-configs) and then activate using the activation key (normally &quot;n&quot;). You can then access the camera view using the ships external custom view screen (normally &quot;v&quot;).

The satellite will maintain focus on the player ship,and continue to transmit whilst in range. If you go beyond this range then the camera will automatically self-destruct to prevent space-lane pollution. The cameras are designed to be disposable, and cannot be scooped or reused as they are too fragile. If you need to use normal external views whilst one is in range, simply deactivate the link again via &quot;shift-N / n&quot;.

Not really designed for a serious in-game usage as general equipment, but more for making nice video clips for ooTube.

With great thanks to Cim for both adding the modifiable external views code to trunk and for writing the missile camera/camera drones OXPs which inspired this one.

This OXP requires a minimum of Oolite v1.77 to run, and will not work with 1.76.1 or lower.

--------------------------------------------------------------

License:

This OXP is released under the Creative Commons Attribution - Non-Commercial - Share Alike 3.0 license with the following clauses:

* Whilst you are free (and encouraged) to re-use any of the scripting, models or texturing in this OXP, the usage must be distinct from that within this OXP. Unique identifiers such as (but not limited to) unique shipdata.plist entity keys, mission variables, script names (this.name), equipment identity strings (EQ_), description list arrays and entity roles must not be re-used without prior agreement. Basically if it&#39;s unique or would identify or overwrite anything in the original OXP, then you may not re-use it (for obvious compatibility reasons).
* rebundling of this OXP within another distribution is permitted as long as it is unchanged. The following derivates however are permitted and except from the above:
	* the conversion of files between XML and openStep.
	* the merging of files with other files of the same type from other OXPs.
* The license information (either as this file or merged into a larger one) must be included in the OXP.
* Even though it is not compulsory, if you are re-using any sizable or recognisable piece of this OXP, please let me know :)

--------------------------------------------------------------
Instructions:

Unzip the file, and then move the folder &quot;TrackerCam 1.02.oxp&quot; to the AddOns directory of your Oolite installation.  

--------------------------------------------------------------

Version history:

16/11/2012 - Version 1.00, Initial release.
23/11/2012 - Version 1.01, New positioning/orientation scripting to remove barrel-roll effect
25/11/2012 - Version 1.02, Script optimisation to use Cim&#39;s new quaternion conjugate trunk command. Needs trunk 5529 or above.

--------------------------------------------------------------

Acknowledgements:

With thanks to Cim for the customisable external views trunk code and for the camera OXPs which inspired this one.</pre>
        </a>

        <a name="equipment">          
        <h2>Equipment</h2>
            <table>
                <tr>
                    <th>Name</th>
                    <th>Visible</th>
                    <th>Cost [deci-credits]</th>
                    <th>Tech-Level</th>
                </tr>
                <tr>
                    <td><a href="../equipment/EQ_TRACKERCAM_LINK.html">Tracker Camera Link</a></td>
                    <td>yes</td>
                    <td align="right">500</td>
                    <td align="center">3+</td>
                </tr>
                <tr>
                    <td><a href="../equipment/EQ_TRACKERCAM_MINE.html">Tracker Camera</a></td>
                    <td>yes</td>
                    <td align="right">500</td>
                    <td align="center">3+</td>
                </tr>
            </table>
        </a>

        <a name="ships">    
        <h2>Ships</h2>
            <table>
                <tr>
                    <th>Name</th>
                </tr>
                <tr>
                    <td><a href="../ships/trackerCam_mine.html">Tracker Camera</a></td>
                </tr>
            </table>
        </a>

        <a name="models">    
        <h2>Models</h2>
            This expansion declares no models. This may be related to warnings.
        </a>

        <a name="scripts">    
        <h2>Scripts</h2>
            <table>
                <tr>
                    <th>Path</th>
                </tr>
                <tr>
                    <td valign="top">Scripts/trackerCam_cameraScript.js</td>
                    <td><pre>this.name					= &quot;trackerCam_cameraScript&quot;;
this.author					= &quot;Thargoid, with inspiration from code by Cim&quot;;
this.copyright				= &quot;Creative Commons: attribution, non-commercial, sharealike with clauses - see readme.txt&quot;;
this.description			= &quot;Ship script for tracking camera&quot;;
this.version				= &quot;1.02&quot;;

this.shipSpawned = function()
	{
	if(player.ship &amp;&amp; player.ship.isValid)	{ this.ship.orientation = player.ship.orientation; }
	}
	
this.shipDied = function()
	{ 
	if(this.$callback) { removeFrameCallback(this.$callback); }
	}

this.$toggleCamera = function()
	{
	if(this.$camActive === undefined || this.$camActive === &quot;no&quot;)
		{ this.$activateCamera(); }
	else
		{ this.$deactivateCamera(); }
	}
	
this.$deactivateCamera = function() 
	{
	this.$camActive = &quot;no&quot;;
	this.$resetView();
	removeFrameCallback(this.$callback);
	delete this.$callback;
	player.consoleMessage(&quot;Tracking camera link deactivated&quot;);
	}

this.$activateCamera = function() 
	{
	this.$callback = addFrameCallback(this.$rotateCamera.bind(this));
	this.$camActive = &quot;yes&quot;;
	player.consoleMessage(&quot;Tracking camera linked to custom view screen&quot;);
	}	
	
this.$resetView = function() 
	{ 
	if(player.ship.viewDirection === &quot;VIEW_CUSTOM&quot;)
		{ player.ship.resetCustomView(); }	
	}
	
this.$rotateCamera = function() 
	{
	if(!this.ship || !this.ship.isValid || !player.ship || !player.ship.isValid) 
		{ 
		this.$resetView();
		return; 
		}

	if(this.ship.position.distanceTo(player.ship.position) &gt; 25600)
		{ 
		this.ship.remove();
		this.$resetView();
		return; 
		}
	
	// re-orient the camera entity to always point at the player ship (for visual reasons)
	var targetVector = player.ship.position.subtract(this.ship.position).direction();
	var angle = this.ship.heading.angleTo(targetVector);
	var cross = this.ship.heading.cross(targetVector).direction();
	this.ship.orientation = this.ship.orientation.rotate(cross,-angle);	

	var transpose = player.ship.orientation.conjugate();
	
	var pos = this.ship.position.add(this.ship.vectorForward.multiply(15));
	pos = pos.subtract(player.ship.position); 
	// vector from the player ship to the viewpoint, 15m in front of the camera
	
	var posipcc = pos.rotateBy(transpose);
	var quat = this.ship.orientation.multiply(transpose);
	
	if(player.ship.viewDirection === &quot;VIEW_CUSTOM&quot;)
		{ player.ship.setCustomView(posipcc, quat, &quot;FORWARD&quot;); }
	}	</pre></td>
                </tr>
                <tr>
                    <td valign="top">Scripts/trackerCam_trigger.js</td>
                    <td><pre>this.name					= &quot;trackerCam_trigger&quot;;
this.author					= &quot;Thargoid&quot;;
this.copyright				= &quot;Creative Commons: attribution, non-commercial, sharealike with clauses - see readme.txt&quot;;
this.description			= &quot;Equipment script for tracking camera&quot;;
this.version				= &quot;1.00&quot;;

this.activated = function() 
	{
	function allCameras(entity) {return entity.isShip &amp;&amp; entity.hasRole(&quot;EQ_TRACKERCAM_MINE&quot;)}; 
	var localCameras = system.filteredEntities(this, allCameras, player.ship, 25600);
	
	if(localCameras &amp;&amp; localCameras.length &gt; 0)
		{ localCameras[0].script.$toggleCamera(); }
	else
		{ player.consoleMessage(&quot;No tracker camera in range&quot;); }
	}

this.equipmentDamaged = function(equip) 
	{
	if (equip == &quot;EQ_TRACKERCAM_LINK&quot;) 
		{ player.ship.setEquipmentStatus(&quot;EQ_TRACKERCAM_LINK&quot;,&quot;EQUIPMENT_OK&quot;); }
	}
</pre></td>
                </tr>
            </table>
        </a>
    </body>
</html>
