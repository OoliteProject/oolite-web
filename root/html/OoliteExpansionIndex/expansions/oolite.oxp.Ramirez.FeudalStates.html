<html>
    <head>
        <title>Expansion Feudal States</title>
        <link rel="stylesheet" href="../style.css">
    </head>
    <body>
        <table border="0" width="100%">
            <tr>
                <td>Back to <a href='../index.html'>Index</a></td>
                <td align="right"><small>Page generated: Oct 11, 2023, 3:16:49 PM</small></td>
            </tr>
        </table>

        <h1>Expansion Feudal States</h1>

        <h2>Content</h2>
        <ul>
          <li><a href="#warnings">Warnings</a></li>
          <li><a href="#manifest">Manifest</a></li>
          <li><a href="#documentation">Documentation</a></li>
          <li><a href="#equipment">4 Equipment</a></li>
          <li><a href="#ships">204 Ships</a></li>
          <li><a href="#models">0 Models</a></li>
          <li><a href="#scripts">13 Scripts</a></li>
        </ul>

          <a name="warnings">
            <h2>Warnings</h2>
            <ol>
                <li>Found XML equipment list</li>
                <li>XML script list found</li>
            </ol>
          </a>

        <a name="manifest">
        <h2>Manifest</h2>
            <table border="1">
                <tr>
                    <th></th>
                    <th>from Expansion Manager's OXP list</th>
                    <th>from Expansion Manifest</th>
                </tr>
                <tr>
                    <td>Description</td>
                    <td>Adds challenges, missions, promotions, tournaments, ships and stations to the leading feudal systems.</td>
                    <td>Adds challenges, missions, promotions, tournaments, ships and stations to the leading feudal systems.</td>
                </tr>
                <tr>
                    <td>Identifier</td>
                    <td>oolite.oxp.Ramirez.FeudalStates</td>
                    <td>oolite.oxp.Ramirez.FeudalStates</td>
                </tr>
                <tr>
                    <td>Title</td>
                    <td>Feudal States</td>
                    <td>Feudal States</td>
                </tr>
                <tr>
                    <td>Category</td>
                    <td>Systems</td>
                    <td>Systems</td>
                </tr>
                <tr>
                    <td>Author</td>
                    <td>Ramirez</td>
                    <td>Ramirez</td>
                </tr>
                <tr>
                    <td>Version</td>
                    <td>1.16.3</td>
                    <td>1.16.3</td>
                </tr>
                <tr>
                    <td>Tags</td>
                    <td></td>
                    <td></td>
                </tr>
                <tr>
                    <td>Required Oolite Version</td>
                    <td></td>
                    <td></td>
                </tr>
                <tr>
                    <td>Maximum Oolite Version</td>
                    <td></td>
                    <td></td>
                </tr>
                <tr>
                    <td>Required Expansions</td>
                    <td>
                            <li>oolite.oxp.Thargoid.Planetfall:1.51</li>
                    </td>
                    <td>
                            <li>oolite.oxp.Thargoid.Planetfall:1.51</li>
                    </td>
                </tr>
                <tr>
                    <td>Optional Expansions</td>
                    <td>
                    </td>
                    <td>
                    </td>
                </tr>
                <tr>
                    <td>Conflict Expansions</td>
                    <td>
                    </td>
                    <td>
                    </td>
                </tr>
                <tr>
                    <td>Information URL</td>
                    <td><a target="_blank" href="http://wiki.alioth.net/index.php/Feudal_States">http://wiki.alioth.net/index.php/Feudal_States</a></td>
                    <td><a target="_blank" href="">n/a</a></td>
                </tr>
                <tr>
                    <td>Download URL</td>
                    <td><a target="_blank" href="https://wiki.alioth.net/img_auth.php/4/4c/Feudal_States_1.16.3.oxz">https://wiki.alioth.net/img_auth.php/4/4c/Feudal_States_1.16.3.oxz</a></td>
                    <td><a target="_blank" href="">n/a</a></td>
                </tr>
                <tr>
                    <td>License</td>
                    <td>CC BY-NC-SA 3</td>
                    <td>CC BY-NC-SA 3</td>
                </tr>
                <tr>
                    <td>File Size</td>
                    <td>n/a</td>
                </tr>
                <tr>
                    <td>Upload date</td>
                    <td>1610873298</td>
                </tr>
            </table>
                </a>

        <a name="documentation">
        <h2>Documentation</h2>
        <p>Also read <a href='http://wiki.alioth.net/index.php/Feudal%20States'>http://wiki.alioth.net/index.php/Feudal%20States</a></p>
        </a>

        <a name="equipment">          
        <h2>Equipment</h2>
            <table>
                <tr>
                    <th>Name</th>
                    <th>Visible</th>
                    <th>Cost [deci-credits]</th>
                    <th>Tech-Level</th>
                </tr>
                <tr>
                    <td><a href="../equipment/EQ_FEUDAL_FLARE_MINE.html">Flare Mine</a></td>
                    <td>yes</td>
                    <td align="right">0</td>
                    <td align="center">100+</td>
                </tr>
                <tr>
                    <td><a href="../equipment/EQ_FS_BOMB_PLACEHOLDER.html">Energy Bomb (disabled)</a></td>
                    <td>yes</td>
                    <td align="right">0</td>
                    <td align="center">100+</td>
                </tr>
                <tr>
                    <td><a href="../equipment/EQ_FS_CLOAK_PLACEHOLDER.html">Cloaking Device (disabled)</a></td>
                    <td>yes</td>
                    <td align="right">0</td>
                    <td align="center">100+</td>
                </tr>
                <tr>
                    <td><a href="../equipment/EQ_FS_INJECTION_PLACEHOLDER.html">Witchdrive Fuel Injectors (disabled)</a></td>
                    <td>yes</td>
                    <td align="right">0</td>
                    <td align="center">100+</td>
                </tr>
            </table>
        </a>

        <a name="ships">    
        <h2>Ships</h2>
            <table>
                <tr>
                    <th>Name</th>
                </tr>
                <tr>
                    <td><a href="../ships/aniseres-knight.html">Ritter-Class Jaeger (Aniseres)</a></td>
                </tr>
                <tr>
                    <td><a href="../ships/aniseres-lord.html">Freiherr-Class Korvette (Aniseres)</a></td>
                </tr>
                <tr>
                    <td><a href="../ships/aniseres-prince.html">Prinz-Class Zerstoerer (Aniseres)</a></td>
                </tr>
                <tr>
                    <td><a href="../ships/ansois-knight.html">Ritter-Class Jaeger (Ansois)</a></td>
                </tr>
                <tr>
                    <td><a href="../ships/ansois-lord.html">Freiherr-Class Korvette (Ansois)</a></td>
                </tr>
                <tr>
                    <td><a href="../ships/ansois-prince.html">Prinz-Class Zerstoerer (Ansois)</a></td>
                </tr>
                <tr>
                    <td><a href="../ships/aronar-knight.html">Ritter-Class Jaeger (Aronar)</a></td>
                </tr>
                <tr>
                    <td><a href="../ships/aronar-lord.html">Freiherr-Class Korvette (Aronar)</a></td>
                </tr>
                <tr>
                    <td><a href="../ships/aronar-prince.html">Prinz-Class Zerstoerer (Aronar)</a></td>
                </tr>
                <tr>
                    <td><a href="../ships/arries-knight.html">Ritter-Class Jaeger (Arries)</a></td>
                </tr>
                <tr>
                    <td><a href="../ships/arries-lord.html">Freiherr-Class Korvette (Arries)</a></td>
                </tr>
                <tr>
                    <td><a href="../ships/arries-prince.html">Prinz-Class Zerstoerer (Arries)</a></td>
                </tr>
                <tr>
                    <td><a href="../ships/atbiarxe-knight.html">Ritter-Class Jaeger (Atbiarxe)</a></td>
                </tr>
                <tr>
                    <td><a href="../ships/atbiarxe-lord.html">Freiherr-Class Korvette (Atbiarxe)</a></td>
                </tr>
                <tr>
                    <td><a href="../ships/atbiarxe-prince.html">Prinz-Class Zerstoerer (Atbiarxe)</a></td>
                </tr>
                <tr>
                    <td><a href="../ships/atlaar-knight.html">Ritter-Class Jaeger (Atlaar)</a></td>
                </tr>
                <tr>
                    <td><a href="../ships/atlaar-lord.html">Freiherr-Class Korvette (Atlaar)</a></td>
                </tr>
                <tr>
                    <td><a href="../ships/atlaar-prince.html">Prinz-Class Zerstoerer (Atlaar)</a></td>
                </tr>
                <tr>
                    <td><a href="../ships/bedierat-knight.html">Ritter-Class Jaeger (Bedierat)</a></td>
                </tr>
                <tr>
                    <td><a href="../ships/bedierat-lord.html">Freiherr-Class Korvette (Bedierat)</a></td>
                </tr>
                <tr>
                    <td><a href="../ships/bedierat-prince.html">Prinz-Class Zerstoerer (Bedierat)</a></td>
                </tr>
                <tr>
                    <td><a href="../ships/biarandi-knight.html">Ritter-Class Jaeger (Biarandi)</a></td>
                </tr>
                <tr>
                    <td><a href="../ships/biarandi-lord.html">Freiherr-Class Korvette (Biarandi)</a></td>
                </tr>
                <tr>
                    <td><a href="../ships/biarandi-prince.html">Prinz-Class Zerstoerer (Biarandi)</a></td>
                </tr>
                <tr>
                    <td><a href="../ships/ceorat-knight.html">Ritter-Class Jaeger (Ceorat)</a></td>
                </tr>
                <tr>
                    <td><a href="../ships/ceorat-lord.html">Freiherr-Class Korvette (Ceorat)</a></td>
                </tr>
                <tr>
                    <td><a href="../ships/ceorat-prince.html">Prinz-Class Zerstoerer (Ceorat)</a></td>
                </tr>
                <tr>
                    <td><a href="../ships/dierlabe-knight.html">Ritter-Class Jaeger (Dierlabe)</a></td>
                </tr>
                <tr>
                    <td><a href="../ships/dierlabe-lord.html">Freiherr-Class Korvette (Dierlabe)</a></td>
                </tr>
                <tr>
                    <td><a href="../ships/dierlabe-prince.html">Prinz-Class Zerstoerer (Dierlabe)</a></td>
                </tr>
                <tr>
                    <td><a href="../ships/digebiti-knight.html">Ritter-Class Jaeger (Digebiti)</a></td>
                </tr>
                <tr>
                    <td><a href="../ships/digebiti-lord.html">Freiherr-Class Korvette (Digebiti)</a></td>
                </tr>
                <tr>
                    <td><a href="../ships/digebiti-prince.html">Prinz-Class Zerstoerer (Digebiti)</a></td>
                </tr>
                <tr>
                    <td><a href="../ships/diqudi-knight.html">Ritter-Class Jaeger (Diqudi)</a></td>
                </tr>
                <tr>
                    <td><a href="../ships/diqudi-lord.html">Freiherr-Class Korvette (Diqudi)</a></td>
                </tr>
                <tr>
                    <td><a href="../ships/diqudi-prince.html">Prinz-Class Zerstoerer (Diqudi)</a></td>
                </tr>
                <tr>
                    <td><a href="../ships/ededleen-knight.html">Ritter-Class Jaeger (Ededleen)</a></td>
                </tr>
                <tr>
                    <td><a href="../ships/ededleen-lord.html">Freiherr-Class Korvette (Ededleen)</a></td>
                </tr>
                <tr>
                    <td><a href="../ships/ededleen-prince.html">Prinz-Class Zerstoerer (Ededleen)</a></td>
                </tr>
                <tr>
                    <td><a href="../ships/edzaon-knight.html">Ritter-Class Jaeger (Edzaon)</a></td>
                </tr>
                <tr>
                    <td><a href="../ships/edzaon-lord.html">Freiherr-Class Korvette (Edzaon)</a></td>
                </tr>
                <tr>
                    <td><a href="../ships/edzaon-prince.html">Prinz-Class Zerstoerer (Edzaon)</a></td>
                </tr>
                <tr>
                    <td><a href="../ships/enbirare-knight.html">Ritter-Class Jaeger (Enbirare)</a></td>
                </tr>
                <tr>
                    <td><a href="../ships/enbirare-lord.html">Freiherr-Class Korvette (Enbirare)</a></td>
                </tr>
                <tr>
                    <td><a href="../ships/enbirare-prince.html">Prinz-Class Zerstoerer (Enbirare)</a></td>
                </tr>
                <tr>
                    <td><a href="../ships/enlaonus-knight.html">Ritter-Class Jaeger (Enlaonus)</a></td>
                </tr>
                <tr>
                    <td><a href="../ships/enlaonus-lord.html">Freiherr-Class Korvette (Enlaonus)</a></td>
                </tr>
                <tr>
                    <td><a href="../ships/enlaonus-prince.html">Prinz-Class Zerstoerer (Enlaonus)</a></td>
                </tr>
                <tr>
                    <td><a href="../ships/erinain-knight.html">Ritter-Class Jaeger (Erinain)</a></td>
                </tr>
                <tr>
                    <td><a href="../ships/erinain-lord.html">Freiherr-Class Korvette (Erinain)</a></td>
                </tr>
                <tr>
                    <td><a href="../ships/erinain-prince.html">Prinz-Class Zerstoerer (Erinain)</a></td>
                </tr>
                <tr>
                    <td><a href="../ships/erlaened-knight.html">Ritter-Class Jaeger (Erlaened)</a></td>
                </tr>
                <tr>
                    <td><a href="../ships/erlaened-lord.html">Freiherr-Class Korvette (Erlaened)</a></td>
                </tr>
                <tr>
                    <td><a href="../ships/erlaened-prince.html">Prinz-Class Zerstoerer (Erlaened)</a></td>
                </tr>
                <tr>
                    <td><a href="../ships/erxearis-knight.html">Ritter-Class Jaeger (Erxearis)</a></td>
                </tr>
                <tr>
                    <td><a href="../ships/erxearis-lord.html">Freiherr-Class Korvette (Erxearis)</a></td>
                </tr>
                <tr>
                    <td><a href="../ships/erxearis-prince.html">Prinz-Class Zerstoerer (Erxearis)</a></td>
                </tr>
                <tr>
                    <td><a href="../ships/esceso-knight.html">Ritter-Class Jaeger (Esceso)</a></td>
                </tr>
                <tr>
                    <td><a href="../ships/esceso-lord.html">Freiherr-Class Korvette (Esceso)</a></td>
                </tr>
                <tr>
                    <td><a href="../ships/esceso-prince.html">Prinz-Class Zerstoerer (Esceso)</a></td>
                </tr>
                <tr>
                    <td><a href="../ships/esredice-knight.html">Ritter-Class Jaeger (Esredice)</a></td>
                </tr>
                <tr>
                    <td><a href="../ships/esredice-lord.html">Freiherr-Class Korvette (Esredice)</a></td>
                </tr>
                <tr>
                    <td><a href="../ships/esredice-prince.html">Prinz-Class Zerstoerer (Esredice)</a></td>
                </tr>
                <tr>
                    <td><a href="../ships/essoza-knight.html">Ritter-Class Jaeger (Essoza)</a></td>
                </tr>
                <tr>
                    <td><a href="../ships/essoza-lord.html">Freiherr-Class Korvette (Essoza)</a></td>
                </tr>
                <tr>
                    <td><a href="../ships/essoza-prince.html">Prinz-Class Zerstoerer (Mainon)</a></td>
                </tr>
                <tr>
                    <td><a href="../ships/feudal-adder.html">Feudal Freighter</a></td>
                </tr>
                <tr>
                    <td><a href="../ships/feudal-anaconda.html">Feudal Freighter</a></td>
                </tr>
                <tr>
                    <td><a href="../ships/feudal-asp.html">Asp MkII</a></td>
                </tr>
                <tr>
                    <td><a href="../ships/feudal-boa.html">Feudal Freighter</a></td>
                </tr>
                <tr>
                    <td><a href="../ships/feudal-boa2.html">Feudal Freighter</a></td>
                </tr>
                <tr>
                    <td><a href="../ships/feudal-buoy.html">Tournament Buoy</a></td>
                </tr>
                <tr>
                    <td><a href="../ships/feudal-cargo.html">feudal-cargo</a></td>
                </tr>
                <tr>
                    <td><a href="../ships/feudal-drone.html">Target Drone</a></td>
                </tr>
                <tr>
                    <td><a href="../ships/feudal-drone-1.html">Target Drone</a></td>
                </tr>
                <tr>
                    <td><a href="../ships/feudal-drone-2.html">feudal-drone-2</a></td>
                </tr>
                <tr>
                    <td><a href="../ships/feudal-drone-3.html">feudal-drone-3</a></td>
                </tr>
                <tr>
                    <td><a href="../ships/feudal-drone-4.html">feudal-drone-4</a></td>
                </tr>
                <tr>
                    <td><a href="../ships/feudal-drone-5.html">feudal-drone-5</a></td>
                </tr>
                <tr>
                    <td><a href="../ships/feudal-escape-pod.html">Escape capsule</a></td>
                </tr>
                <tr>
                    <td><a href="../ships/feudal-extra-asteroid1.html">feudal-extra-asteroid1</a></td>
                </tr>
                <tr>
                    <td><a href="../ships/feudal-extra-asteroid2.html">feudal-extra-asteroid2</a></td>
                </tr>
                <tr>
                    <td><a href="../ships/feudal-extra-asteroid3.html">feudal-extra-asteroid3</a></td>
                </tr>
                <tr>
                    <td><a href="../ships/feudal-extra-asteroid4.html">feudal-extra-asteroid4</a></td>
                </tr>
                <tr>
                    <td><a href="../ships/feudal-extra-asteroid5.html">feudal-extra-asteroid5</a></td>
                </tr>
                <tr>
                    <td><a href="../ships/feudal-extra-asteroid6.html">feudal-extra-asteroid6</a></td>
                </tr>
                <tr>
                    <td><a href="../ships/feudal-ferdelance.html">Fer de Lance</a></td>
                </tr>
                <tr>
                    <td><a href="../ships/feudal-flare.html">Signal Flare</a></td>
                </tr>
                <tr>
                    <td><a href="../ships/feudal-flare-mine.html">Signal Flare</a></td>
                </tr>
                <tr>
                    <td><a href="../ships/feudal-gate-away.html">Jumpgate</a></td>
                </tr>
                <tr>
                    <td><a href="../ships/feudal-gate-home.html">Jumpgate</a></td>
                </tr>
                <tr>
                    <td><a href="../ships/feudal-hunting-lodge.html">Royal Hunting Lodge</a></td>
                </tr>
                <tr>
                    <td><a href="../ships/feudal-hunting-lodge-asteroid.html">feudal-hunting-lodge-dock</a></td>
                </tr>
                <tr>
                    <td><a href="../ships/feudal-hunting-lodge-dock.html">feudal-hunting-lodge-dock</a></td>
                </tr>
                <tr>
                    <td><a href="../ships/feudal-hunting-lodge-tower.html">feudal-hunting-tower-turret</a></td>
                </tr>
                <tr>
                    <td><a href="../ships/feudal-hunting-lodge-turret.html">Ball Turret</a></td>
                </tr>
                <tr>
                    <td><a href="../ships/feudal-knight.html">Ritter-Klasse Jaeger</a></td>
                </tr>
                <tr>
                    <td><a href="../ships/feudal-lord.html">Freiherr-Klasse Korvette</a></td>
                </tr>
                <tr>
                    <td><a href="../ships/feudal-mine.html">feudal-mine</a></td>
                </tr>
                <tr>
                    <td><a href="../ships/feudal-moray.html">Feudal Freighter</a></td>
                </tr>
                <tr>
                    <td><a href="../ships/feudal-planetFall_mainSurface_FSRoyalCourt.html">Royal Court</a></td>
                </tr>
                <tr>
                    <td><a href="../ships/feudal-prince.html">Prinz Klasse Zerstoerer</a></td>
                </tr>
                <tr>
                    <td><a href="../ships/feudal-prince-gun.html">Prinz-Class Zerstoerer Gun</a></td>
                </tr>
                <tr>
                    <td><a href="../ships/feudal-prince-gun-blue.html">feudal-prince-gun-blue</a></td>
                </tr>
                <tr>
                    <td><a href="../ships/feudal-prince-gun-green.html">feudal-prince-gun-green</a></td>
                </tr>
                <tr>
                    <td><a href="../ships/feudal-prince-gun-magenta.html">feudal-prince-gun-magenta</a></td>
                </tr>
                <tr>
                    <td><a href="../ships/feudal-prince-gun-orange.html">feudal-prince-gun-orange</a></td>
                </tr>
                <tr>
                    <td><a href="../ships/feudal-prince-gun-red.html">feudal-prince-gun-red</a></td>
                </tr>
                <tr>
                    <td><a href="../ships/feudal-prince-gun-white.html">feudal-prince-gun-white</a></td>
                </tr>
                <tr>
                    <td><a href="../ships/feudal-prince-gun-yellow.html">feudal-prince-gun-yellow</a></td>
                </tr>
                <tr>
                    <td><a href="../ships/feudal-python.html">Feudal Freighter</a></td>
                </tr>
                <tr>
                    <td><a href="../ships/feudal-shield.html">Target Shield</a></td>
                </tr>
                <tr>
                    <td><a href="../ships/feudal-shield-pod.html">Shield Pod</a></td>
                </tr>
                <tr>
                    <td><a href="../ships/feudal-small-shield.html">Tournament Shield</a></td>
                </tr>
                <tr>
                    <td><a href="../ships/feudal-splinter.html">feudal-splinter</a></td>
                </tr>
                <tr>
                    <td><a href="../ships/geinona-knight.html">Ritter-Class Jaeger (Geinona)</a></td>
                </tr>
                <tr>
                    <td><a href="../ships/geinona-lord.html">Freiherr-Class Korvette (Geinona)</a></td>
                </tr>
                <tr>
                    <td><a href="../ships/geinona-prince.html">Prinz-Class Zerstoerer (Geinona)</a></td>
                </tr>
                <tr>
                    <td><a href="../ships/gelaed-knight.html">Ritter-Class Jaeger (Gelaed)</a></td>
                </tr>
                <tr>
                    <td><a href="../ships/gelaed-lord.html">Freiherr-Class Korvette (Gelaed)</a></td>
                </tr>
                <tr>
                    <td><a href="../ships/gelaed-prince.html">Prinz-Class Zerstoerer (Gelaed)</a></td>
                </tr>
                <tr>
                    <td><a href="../ships/inrearbi-knight.html">Ritter-Class Jaeger (Inrearbi)</a></td>
                </tr>
                <tr>
                    <td><a href="../ships/inrearbi-lord.html">Freiherr-Class Korvette (Inrearbi)</a></td>
                </tr>
                <tr>
                    <td><a href="../ships/inrearbi-prince.html">Prinz-Class Zerstoerer (Inrearbi)</a></td>
                </tr>
                <tr>
                    <td><a href="../ships/israra-knight.html">Ritter-Class Jaeger (Israra)</a></td>
                </tr>
                <tr>
                    <td><a href="../ships/israra-lord.html">Freiherr-Class Korvette (Israra)</a></td>
                </tr>
                <tr>
                    <td><a href="../ships/israra-prince.html">Prinz-Class Zerstoerer (Israra)</a></td>
                </tr>
                <tr>
                    <td><a href="../ships/issoinen-knight.html">Ritter-Class Jaeger (Issoinen)</a></td>
                </tr>
                <tr>
                    <td><a href="../ships/issoinen-lord.html">Freiherr-Class Korvette (Issoinen)</a></td>
                </tr>
                <tr>
                    <td><a href="../ships/issoinen-prince.html">Prinz-Class Zerstoerer (Issoinen)</a></td>
                </tr>
                <tr>
                    <td><a href="../ships/mainon-knight.html">Ritter-Class Jaeger (Mainon)</a></td>
                </tr>
                <tr>
                    <td><a href="../ships/mainon-lord.html">Freiherr-Class Korvette (Mainon)</a></td>
                </tr>
                <tr>
                    <td><a href="../ships/mainon-prince.html">Prinz-Class Zerstoerer (Mainon)</a></td>
                </tr>
                <tr>
                    <td><a href="../ships/mazare-knight.html">Ritter-Class Jaeger (Mazare)</a></td>
                </tr>
                <tr>
                    <td><a href="../ships/mazare-lord.html">Freiherr-Class Korvette (Mazare)</a></td>
                </tr>
                <tr>
                    <td><a href="../ships/mazare-prince.html">Prinz-Class Zerstoerer (Mazare)</a></td>
                </tr>
                <tr>
                    <td><a href="../ships/oneded-knight.html">Ritter-Class Jaeger (Oneded)</a></td>
                </tr>
                <tr>
                    <td><a href="../ships/oneded-lord.html">Freiherr-Class Korvette (Oneded)</a></td>
                </tr>
                <tr>
                    <td><a href="../ships/oneded-prince.html">Prinz-Class Zerstoerer (Oneded)</a></td>
                </tr>
                <tr>
                    <td><a href="../ships/onente-knight.html">Ritter-Class Jaeger (Onente)</a></td>
                </tr>
                <tr>
                    <td><a href="../ships/onente-lord.html">Freiherr-Class Korvette (Onente)</a></td>
                </tr>
                <tr>
                    <td><a href="../ships/onente-prince.html">Prinz-Class Zerstoerer (Onente)</a></td>
                </tr>
                <tr>
                    <td><a href="../ships/onertius-knight.html">Ritter-Class Jaeger (Onertius)</a></td>
                </tr>
                <tr>
                    <td><a href="../ships/onertius-lord.html">Freiherr-Class Korvette (Onertius)</a></td>
                </tr>
                <tr>
                    <td><a href="../ships/onertius-prince.html">Prinz-Class Zerstoerer (Onertius)</a></td>
                </tr>
                <tr>
                    <td><a href="../ships/onusorle-knight.html">Ritter-Class Jaeger (Onusorle)</a></td>
                </tr>
                <tr>
                    <td><a href="../ships/onusorle-lord.html">Freiherr-Class Korvette (Onusorle)</a></td>
                </tr>
                <tr>
                    <td><a href="../ships/onusorle-prince.html">Prinz-Class Zerstoerer (Onusorle)</a></td>
                </tr>
                <tr>
                    <td><a href="../ships/oreseren-knight.html">Ritter-Class Jaeger (Oreseren)</a></td>
                </tr>
                <tr>
                    <td><a href="../ships/oreseren-lord.html">Freiherr-Class Korvette (Oreseren)</a></td>
                </tr>
                <tr>
                    <td><a href="../ships/oreseren-prince.html">Prinz-Class Zerstoerer (Oreseren)</a></td>
                </tr>
                <tr>
                    <td><a href="../ships/orverace-knight.html">Ritter-Class Jaeger (Orverace)</a></td>
                </tr>
                <tr>
                    <td><a href="../ships/orverace-lord.html">Freiherr-Class Korvette (Orverace)</a></td>
                </tr>
                <tr>
                    <td><a href="../ships/orverace-prince.html">Prinz-Class Zerstoerer (Orverace)</a></td>
                </tr>
                <tr>
                    <td><a href="../ships/qurexein-knight.html">Ritter-Class Jaeger (Qurexein)</a></td>
                </tr>
                <tr>
                    <td><a href="../ships/qurexein-lord.html">Freiherr-Class Korvette (Qurexein)</a></td>
                </tr>
                <tr>
                    <td><a href="../ships/qurexein-prince.html">Prinz-Class Zerstoerer (Qurexein)</a></td>
                </tr>
                <tr>
                    <td><a href="../ships/qutecete-knight.html">Ritter-Class Jaeger (Qutecete)</a></td>
                </tr>
                <tr>
                    <td><a href="../ships/qutecete-lord.html">Freiherr-Class Korvette (Qutecete)</a></td>
                </tr>
                <tr>
                    <td><a href="../ships/qutecete-prince.html">Prinz-Class Zerstoerer (Qutecete)</a></td>
                </tr>
                <tr>
                    <td><a href="../ships/rabiarce-knight.html">Ritter-Class Jaeger (Rabiarce)</a></td>
                </tr>
                <tr>
                    <td><a href="../ships/rabiarce-lord.html">Freiherr-Class Korvette (Rabiarce)</a></td>
                </tr>
                <tr>
                    <td><a href="../ships/rabiarce-prince.html">Prinz-Class Zerstoerer (Rabiarce)</a></td>
                </tr>
                <tr>
                    <td><a href="../ships/reenus-knight.html">Ritter-Class Jaeger (Reenus)</a></td>
                </tr>
                <tr>
                    <td><a href="../ships/reenus-lord.html">Freiherr-Class Korvette (Reenus)</a></td>
                </tr>
                <tr>
                    <td><a href="../ships/reenus-prince.html">Prinz-Class Zerstoerer (Reenus)</a></td>
                </tr>
                <tr>
                    <td><a href="../ships/resoisbe-knight.html">Ritter-Class Jaeger (Resoisbe)</a></td>
                </tr>
                <tr>
                    <td><a href="../ships/resoisbe-lord.html">Freiherr-Class Korvette (Resoisbe)</a></td>
                </tr>
                <tr>
                    <td><a href="../ships/resoisbe-prince.html">Prinz-Class Zerstoerer (Resoisbe)</a></td>
                </tr>
                <tr>
                    <td><a href="../ships/ridivexe-knight.html">Ritter-Class Jaeger (Ridivexe)</a></td>
                </tr>
                <tr>
                    <td><a href="../ships/ridivexe-lord.html">Freiherr-Class Korvette (Ridivexe)</a></td>
                </tr>
                <tr>
                    <td><a href="../ships/ridivexe-prince.html">Prinz-Class Zerstoerer (Ridivexe)</a></td>
                </tr>
                <tr>
                    <td><a href="../ships/rigged-asteroid-1.html">rigged-asteroid-1</a></td>
                </tr>
                <tr>
                    <td><a href="../ships/rigged-asteroid-2.html">rigged-asteroid-2</a></td>
                </tr>
                <tr>
                    <td><a href="../ships/rileaa-knight.html">Ritter-Class Jaeger (Rileaa)</a></td>
                </tr>
                <tr>
                    <td><a href="../ships/rileaa-lord.html">Freiherr-Class Korvette (Rileaa)</a></td>
                </tr>
                <tr>
                    <td><a href="../ships/rileaa-prince.html">Prinz-Class Zerstoerer (Rileaa)</a></td>
                </tr>
                <tr>
                    <td><a href="../ships/rizace-knight.html">Ritter-Class Jaeger (Rizace)</a></td>
                </tr>
                <tr>
                    <td><a href="../ships/rizace-lord.html">Freiherr-Class Korvette (Rizace)</a></td>
                </tr>
                <tr>
                    <td><a href="../ships/rizace-prince.html">Prinz-Class Zerstoerer (Rizace)</a></td>
                </tr>
                <tr>
                    <td><a href="../ships/sogeve-knight.html">Ritter-Class Jaeger (Sogeve)</a></td>
                </tr>
                <tr>
                    <td><a href="../ships/sogeve-lord.html">Freiherr-Class Korvette (Sogeve)</a></td>
                </tr>
                <tr>
                    <td><a href="../ships/sogeve-prince.html">Prinz-Class Zerstoerer (Sogeve)</a></td>
                </tr>
                <tr>
                    <td><a href="../ships/teususdi-knight.html">Ritter-Class Jaeger (Teususdi)</a></td>
                </tr>
                <tr>
                    <td><a href="../ships/teususdi-lord.html">Freiherr-Class Korvette (Teususdi)</a></td>
                </tr>
                <tr>
                    <td><a href="../ships/teususdi-prince.html">Prinz-Class Zerstoerer (Teususdi)</a></td>
                </tr>
                <tr>
                    <td><a href="../ships/tibecea-knight.html">Ritter-Class Jaeger (Tibecea)</a></td>
                </tr>
                <tr>
                    <td><a href="../ships/tibecea-lord.html">Freiherr-Class Korvette (Tibecea)</a></td>
                </tr>
                <tr>
                    <td><a href="../ships/tibecea-prince.html">Prinz-Class Zerstoerer (Tibecea)</a></td>
                </tr>
                <tr>
                    <td><a href="../ships/tibedied-knight.html">Ritter-Class Jaeger (Tibedied)</a></td>
                </tr>
                <tr>
                    <td><a href="../ships/tibedied-lord.html">Freiherr-Class Korvette (Tibedied)</a></td>
                </tr>
                <tr>
                    <td><a href="../ships/tibedied-prince.html">Prinz-Class Zerstoerer (Tibedied)</a></td>
                </tr>
                <tr>
                    <td><a href="../ships/tiuson-knight.html">Ritter-Class Jaeger (Tiuson)</a></td>
                </tr>
                <tr>
                    <td><a href="../ships/tiuson-lord.html">Freiherr-Class Korvette (Tiuson)</a></td>
                </tr>
                <tr>
                    <td><a href="../ships/tiuson-prince.html">Prinz-Class Zerstoerer (Tiuson)</a></td>
                </tr>
                <tr>
                    <td><a href="../ships/usedge-knight.html">Ritter-Class Jaeger (Usedge)</a></td>
                </tr>
                <tr>
                    <td><a href="../ships/usedge-lord.html">Freiherr-Class Korvette (Usedge)</a></td>
                </tr>
                <tr>
                    <td><a href="../ships/usedge-prince.html">Prinz-Class Zerstoerer (Usedge)</a></td>
                </tr>
                <tr>
                    <td><a href="../ships/usteer-knight.html">Ritter-Class Jaeger (Usteer)</a></td>
                </tr>
                <tr>
                    <td><a href="../ships/usteer-lord.html">Freiherr-Class Korvette (Usteer)</a></td>
                </tr>
                <tr>
                    <td><a href="../ships/usteer-prince.html">Prinz-Class Zerstoerer (Usteer)</a></td>
                </tr>
                <tr>
                    <td><a href="../ships/zagearbe-knight.html">Ritter-Class Jaeger (Zagearbe)</a></td>
                </tr>
                <tr>
                    <td><a href="../ships/zagearbe-lord.html">Freiherr-Class Korvette (Zagearbe)</a></td>
                </tr>
                <tr>
                    <td><a href="../ships/zagearbe-prince.html">Prinz-Class Zerstoerer (Zagearbe)</a></td>
                </tr>
            </table>
        </a>

        <a name="models">    
        <h2>Models</h2>
            This expansion declares no models. This may be related to warnings.
        </a>

        <a name="scripts">    
        <h2>Scripts</h2>
            <table>
                <tr>
                    <th>Path</th>
                </tr>
                <tr>
                    <td valign="top">Scripts/feudal-buoy.js</td>
                    <td><pre>this.name = &quot;feudal-buoy.js&quot;;
this.author = &quot;Ramirez&quot;;
this.copyright = &quot;January 2013&quot;;
this.description = &quot;Script used by feudal Tournament Buoys to monitor and send instructions to ships&quot;;
this.version = &quot;3.0&quot;;

this.shipSpawned = function()
{if(missionVariables.feudal_tournament == &quot;EVENT5_RUNNING&quot;)
this.ship.switchAI(&quot;nullAI.plist&quot;)}

this.logDetails = function()

{
//log(&#39;running scan...&#39;)
var list = system.allShips
for (var i=0; i&lt;list.length; i++)
    
    {
    var list2 = list[i].roles  
    var housearray = new Array()
    housearray[0] = &quot;Aronar&quot;
    housearray[1] = &quot;Geinona&quot;
    housearray[2] = &quot;Tibedied&quot;
    housearray[3] = &quot;Tibecea&quot;
    housearray[4] = &quot;Esredice&quot;
    housearray[5] = &quot;Edzaon&quot;
    housearray[6] = &quot;Onusorle&quot;
    housearray[7] = &quot;Oreseren&quot;
    housearray[8] = &quot;Digebiti&quot;
    housearray[9] = &quot;Gelaed&quot;
    housearray[10] = &quot;Ededleen&quot;
    
    housearray[11] = &quot;Ridivexe&quot;
    housearray[12] = &quot;Bedierat&quot;
    housearray[13] = &quot;Esceso&quot;
    housearray[14] = &quot;Erlaened&quot;
    housearray[15] = &quot;Usedge&quot;
    housearray[16] = &quot;Rabiarce&quot;
    housearray[17] = &quot;Orverace&quot;
    housearray[18] = &quot;Reenus&quot;
    housearray[19] = &quot;Israra&quot;
    housearray[20] = &quot;Issoinen&quot;
    housearray[21] = &quot;Arries&quot;
    housearray[22] = &quot;Oneded&quot;
    
    housearray[23] = &quot;Biarandi&quot;
    housearray[24] = &quot;Usteer&quot;
    housearray[25] = &quot;Qurexein&quot;
    housearray[26] = &quot;Erinain&quot;
    housearray[27] = &quot;Ansois&quot;
    housearray[28] = &quot;Ceorat&quot;
    housearray[29] = &quot;Teususdi&quot;
    housearray[30] = &quot;Diqudi&quot;
    housearray[31] = &quot;Sogeve&quot;
    housearray[32] = &quot;Resoisbe&quot;
    housearray[33] = &quot;Atlaar&quot;
    housearray[34] = &quot;Enbirare&quot;

    housearray[35] = &quot;Zagearbe&quot;
    housearray[36] = &quot;Rizace&quot;
    housearray[37] = &quot;Atbiarxe&quot;
    housearray[38] = &quot;Enlaonus&quot;
    housearray[39] = &quot;Tiuson&quot;
    housearray[40] = &quot;Erxearis&quot;

    housearray[41] = &quot;Essoza&quot;
    housearray[42] = &quot;Mainon&quot;
    housearray[43] = &quot;Qutecete&quot;
    housearray[44] = &quot;Aniseres&quot;
    housearray[45] = &quot;Onertius&quot;
    housearray[46] = &quot;Dierlabe&quot;
    housearray[47] = &quot;Rileaa&quot;
    housearray[48] = &quot;Onente&quot;
    housearray[49] = &quot;Mazare&quot;
    housearray[49] = &quot;Inrearbi&quot;

    //log(&#39;house array established&#39;)
    
   for (var j=0; j&lt;housearray.length; j++)
   {
      
      if(list[i].AI == &quot;feudal-meleeAI.plist&quot;)
      
      {
       if (list2.indexOf(housearray[j]+&quot;-knight&quot;)!=-1)
       {
         
         
        missionVariables.feudal_tournament_opponent_role = housearray[j]+&quot;-knight&quot;
        missionVariables.feudal_tournament_opponent_house = housearray[j]
        missionVariables.feudal_tournament_opponent_rank_no = 1  
        log([missionVariables.feudal_tournament_opponent_role])
        list[i].switchAI(&quot;feudal-challengerhomeAI.plist&quot;) 
        }
    
    if (list2.indexOf(housearray[j]+&quot;-lord&quot;)!=-1)
    {   missionVariables.feudal_tournament_opponent_role = housearray[j]+&quot;-lord&quot;
        missionVariables.feudal_tournament_opponent_house = housearray[j]
        missionVariables.feudal_tournament_opponent_rank_no = 2
        list[i].switchAI(&quot;feudal-challengerhomeAI.plist&quot;)
        //log([missionVariables.feudal_tournament_opponent_role])
    }
    if (list2.indexOf(housearray[j]+&quot;-prince&quot;)!=-1)
    {   missionVariables.feudal_tournament_opponent_role = housearray[j]+&quot;-prince&quot;
        missionVariables.feudal_tournament_opponent_house = housearray[j]
        missionVariables.feudal_tournament_opponent_rank_no = 3
        list[i].switchAI(&quot;feudal-challengerhomeAI.plist&quot;)
        //log([missionVariables.feudal_tournament_opponent_role])
    }
      }
    
    }}
}







this.checkDistanceToPlayer = function()
{if(player.ship.position.distanceTo(this.ship) &lt; 5000)
    {   ++missionVariables.feudal_tournament_kills
        player.commsMessage(&quot;Great shot! Score: &quot;+[missionVariables.feudal_tournament_kills]+&quot; out of 10.&quot;)}            
                
   else
        player.commsMessage(&quot;Foul shot. Score: &quot;+[missionVariables.feudal_tournament_kills]+&quot; out of 10&quot;)
   }

</pre></td>
                </tr>
                <tr>
                    <td valign="top">Scripts/feudal-cargo.js</td>
                    <td><pre>this.name = &quot;feudal-cargo.js&quot;;
this.author = &quot;Ramirez&quot;;
this.copyright = &quot;November 2010&quot;;
this.description = &quot;Ship script cargo in fuedal missions&quot;;
this.version = &quot;2.0&quot;;

this.shipSpawned = function ()

{if(this.ship.displayName == this.ship.name)
        this.ship.displayName = expandDescription(&quot;[mission_feudal_mission_house] [mission_feudal_mission_commodity] shipment&quot;) // Show the ID of the cargo container
}

this.shipWasScooped = function (whom)

    {   if(missionVariables.feudal_mission == &quot;RAID_SUCCESS&quot;)
    
        {   if(whom == player.ship)
				{
                missionVariables.feudal_mission_cargocount = (++ missionVariables.feudal_mission_cargocount)
                }

            else return
        }
            
            
        if(missionVariables.feudal_mission == &quot;ESCORT_FAIL&quot;)
    
        {   if(whom == player.ship)
		
                missionVariables.feudal_mission_cargocount = (++ missionVariables.feudal_mission_cargocount)
                
            else return
        }
        
       
    }</pre></td>
                </tr>
                <tr>
                    <td valign="top">Scripts/feudal-challenge.js</td>
                    <td><pre>this.name = &quot;feudal-challenge.js&quot;;
this.author = &quot;Ramirez&quot;;
this.copyright = &quot;October 2012&quot;;
this.description = &quot;World script for setting up feudal challenges&quot;;
this.version = &quot;9.0&quot;;

// Event handlers

this.startUp = function()
{if(!missionVariables.feudal_planetinfo)
	 {missionVariables.feudal_planetinfo = &quot;SET&quot;
	 this.setPlanetOverrides()}
	 
if(missionVariables.feudal_planetinfo.indexOf(galaxyNumber) == -1)
	{this.setPlanetOverrides()}
}

this.shipDockedWithStation = function()
{this.missionScreens()}

this.guiScreenChanged = function()
{if(guiScreen == &quot;GUI_SCREEN_MARKET&quot;)
this.missionScreens()}


//defining possible ships

this.defineChallengerShips = function()

	{ 	if(missionVariables.feudal_challenger_ship == &quot;Ritter-Class Jaeger&quot;)
		missionVariables.feudal_challenger_role = [missionVariables.feudal_challenger_house]+&quot;-knight&quot;
	
		if(missionVariables.feudal_challenger_ship == &quot;Freiherr-Class Korvette&quot;)
		missionVariables.feudal_challenger_role = [missionVariables.feudal_challenger_house]+&quot;-lord&quot;

		if(missionVariables.feudal_challenger_ship == &quot;Prinz-Class Zerstoerer&quot;)
		missionVariables.feudal_challenger_role = [missionVariables.feudal_challenger_house]+&quot;-prince&quot;
	}
	
this.defineChallengerGender = function() // pick a gender and house

{	
	 for (var i=0; i&lt;5; i++) missionVariables.feudal_challenger_house = expandDescription(&quot;[feudal_house_&quot;+[galaxyNumber]+&quot;]&quot;)
	missionVariables.feudal_challenger_gender = expandDescription(&quot;[feudal_gender]&quot;)
		
		if(missionVariables.feudal_challenger_gender == &quot;he&quot;)
		{	
			missionVariables.feudal_challenger_level1_title = &quot;Sir&quot;
			missionVariables.feudal_challenger_level2_title = &quot;Lord&quot;
		}									       
		
		if(missionVariables.feudal_challenger_gender == &quot;she&quot;)
		{	
			missionVariables.feudal_challenger_level1_title = &quot;Lady&quot;
			missionVariables.feudal_challenger_level2_title = &quot;Lady&quot;	
		}	
}
			
this.defineChallengerDetails = function()		
	{
		this.challengerProb = (Math.random())
		{		
			if(this.challengerProb &lt; 0.65)
			
					{	
					
					missionVariables.feudal_challenger_title = missionVariables.feudal_challenger_level1_title
					missionVariables.feudal_challenger_rank = &quot;knight&quot;
					missionVariables.feudal_challenger_ship = &quot;Ritter-Class Jaeger&quot;
					missionVariables.feudal_challenger_text = &quot;feudal_challenger_text_level1&quot;
					missionVariables.feudal_challenger_rank_no = 1
					missionVariables.feudal_challenger_score = 600 + (Math.floor(Math.random()*300))
					this.feudalChallengerRating = missionVariables.feudal_challenger_score*375*300*2*25/15
					}
					
			if(this.challengerProb &gt;= 0.65 &amp;&amp; this.challengerProb &lt; 0.90)
				
					{
					missionVariables.feudal_challenger_title = missionVariables.feudal_challenger_level2_title
					missionVariables.feudal_challenger_rank = player.rankGenerator_feudal_middle_rank
					missionVariables.feudal_challenger_ship = &quot;Freiherr-Class Korvette&quot;
					missionVariables.feudal_challenger_text = &quot;feudal_challenger_text_level2&quot;
					missionVariables.feudal_challenger_rank_no = 2
					missionVariables.feudal_challenger_score = 900 + (Math.floor(Math.random()*1000))
					this.feudalChallengerRating = missionVariables.feudal_challenger_score*360*750*4*32/25
					}
					
			if(this.challengerProb &gt;= 0.90)
				
					{
					missionVariables.feudal_challenger_title = missionVariables.feudal_challenger_level2_title
					missionVariables.feudal_challenger_rank = player.rankGenerator_feudal_high_rank
					missionVariables.feudal_challenger_ship = &quot;Prinz-Class Zerstoerer&quot;
					missionVariables.feudal_challenger_text = &quot;feudal_challenger_text_level3&quot;
					missionVariables.feudal_challenger_rank_no = 3
					missionVariables.feudal_challenger_score = 1500 + (Math.floor(Math.random()*2000))
					this.feudalChallengerRating = missionVariables.feudal_challenger_score*400*1100*4*50/35
					}			
		}
}							       
		
this.defineChallengerOdds = function()

	{
		missionVariables.feudal_challenger_odds = Math.round(this.feudalChallengerRating*100/(50*player.ship.maxSpeed*player.ship.maxEnergy*player.ship.thrust*player.ship.missileCapacity))/100 
		
		if(missionVariables.feudal_challenger_odds &gt; 10)
		missionVariables.feudal_challenger_odds = 10
		
		missionVariables.feudal_challenger_return = Math.round(missionVariables.feudal_challenger_odds*100)
	}
	
this.defineGeneratorInputs = function()

{
	player.rankGenerator_house = missionVariables.feudal_challenger_house
	player.rankGenerator_gender = missionVariables.feudal_challenger_gender
	
}

this.defineGeneratorOutputs = function()

{	
	missionVariables.feudal_challenger_of = player.rankGenerator_of
	missionVariables.feudal_challenger_firstname = player.rankGenerator_feudal_firstname
	missionVariables.feudal_challenger_lastname = player.rankGenerator_feudal_lastname
	
}

this.feudalChallengeOffer = function()

{	
		this.defineChallengerGender()
		this.defineGeneratorInputs()
		player.feudalRankGenerator()
		this.defineChallengerDetails()
		this.defineGeneratorOutputs()
		this.defineChallengerShips()
		this.defineChallengerOdds()
		missionVariables.feudal_challenger_offer = &quot;CHALLENGE_OFFERED&quot;
		missionVariables.feudal_player_credits = Math.round(player.credits*100)/100 
}

this.resetChallenger = function()
{	missionVariables.feudal_challenger_title = null
	missionVariables.feudal_challenger_gender = null
	missionVariables.feudal_challenger_firstname= null
	missionVariables.feudal_challenger_lastname = null
	missionVariables.feudal_challenger_rank = null
	missionVariables.feudal_challenger_ship = null
	missionVariables.feudal_challenger_text = null
	missionVariables.feudal_challenger_rank_no = null
	missionVariables.feudal_challenger_score = null
	missionVariables.feudal_challenger_odds = null
	missionVariables.feudal_challenger_return = null
	missionVariables.feudal_challenger_stake = null
	missionVariables.feudal_challenger_page = null
	missionVariables.feudal_challenger_house = null
	missionVariables.feudal_challenger_of = null
	missionVariables.feudal_challenger_level1_title = null
	missionVariables.feudal_challenger_level2_title = null
	missionVariables.feudal_challenger_role = null
	player.rankGenerator_house = null
	player.rankGenerator_gender = null
	missionVariables.feudal_challenger_eligible = null
}


this.checkPlayerShip = function()
{
	this.playerSubentities = player.ship.subEntities
	this.playerSubentitiesString = playerSubentities.toString();
	if(playerSubentitiesString.indexOf(&quot;turret&quot;) != -1)
	missionVariables.feudal_challenger_eligible = &quot;FALSE&quot;
}

// Mission screens

this.missionScreens = function()

    {   if(guiScreen == &quot;GUI_SCREEN_MISSION&quot; || !player.ship.docked) return;
    
	if(player.ship.dockedStation.hasRole(&quot;feudal-hunting-lodge&quot;) &amp;&amp; (missionVariables.feudal_tournament_home != system.name))
	
	
	{	if(guiScreen == &quot;GUI_SCREEN_MARKET&quot;)		 
	
		{
			
		this.checkPlayerShip()	
		
			
		if(!missionVariables.feudal_challenger || missionVariables.feudal_challenger == &quot;NONE_SET&quot;)
		{
		  
		  if(missionVariables.feudal_challenger_count &gt; 5)
		  {mission.runScreen({title: &quot;Royal Hunting Lodge&quot;, messageKey: &quot;feudal_challenger_nomore&quot;})} 
		  
		  else
		  
		  {this.resetChallenger()
					missionVariables.feudal_challenger_page = &quot;1&quot;
					this.feudalChallengeOffer()
					mission.runScreen({title: &quot;Royal Hunting Lodge&quot;, messageKey: [missionVariables.feudal_challenger_text], model: [missionVariables.feudal_challenger_role],
                                choicesKey: &quot;feudal_challenger_board_choices&quot;}, this.choiceEvaluation);}}
					
		
		
		if(missionVariables.feudal_challenger_offer == &quot;CHALLENGE_DEFERRED&quot;)
			{
			
			mission.runScreen({title: &quot;Royal Hunting Lodge&quot;, messageKey: &quot;feudal_challenger_accepted_text&quot;, choicesKey: &quot;feudal_challenger_launch_choices&quot;}, this.choiceEvaluation);
			missionVariables.feudal_challenger_offer = &quot;CHALLENGE_LAUNCH&quot;}
		
		}
		
		if(missionVariables.feudal_challenger == &quot;RUNNING&quot;)	   
			{
			mission.runScreen({title: &quot;Royal Hunting Lodge&quot;, messageKey: &quot;feudal_challenger_forfeit&quot;})	
			missionVariables.feudal_challenger = &quot;NONE_SET&quot;
			this.resetChallenger()
			this.restoreSystems()}
			
		if(missionVariables.feudal_challenger == &quot;FORFEIT&quot;)	   
			{
			mission.runScreen({title: &quot;Royal Hunting Lodge&quot;, messageKey: &quot;feudal_challenger_forfeit-alt&quot;})
			missionVariables.feudal_challenger = &quot;NONE_SET&quot;
			this.resetChallenger()
			this.restoreSystems()}


		if(missionVariables.feudal_challenger == &quot;VICTORY&quot;)
			{
			mission.runScreen({title: &quot;Royal Hunting Lodge&quot;, messageKey: &quot;feudal_challenger_victory&quot;, music: &quot;feudal-music.ogg&quot;})
			player.credits += missionVariables.feudal_challenger_stake
			player.credits += missionVariables.feudal_challenger_return
			missionVariables.feudal_challenger = &quot;NONE_SET&quot;
			this.resetChallenger()
			this.restoreSystems()}
		
	}
		
	if(player.ship.dockedStation.isMainStation)
		{if(missionVariables.feudal_challenger == &quot;RUNNING&quot; || missionVariables.feudal_challenger == &quot;FORFEIT&quot;)
		{missionVariables.feudal_challenger = &quot;NONE_SET&quot;
		this.resetChallenger()
		this.restoreSystems()
		player.commsMessage(&quot;Feudal Hunting Lodge: You have forfeited the challenge.&quot;)}}
}	
    
this.choiceEvaluation = function(choice)

	{
		if(missionVariables.feudal_challenger_offer == &quot;CHALLENGE_OFFERED&quot;)
			
				{	
					if(missionVariables.feudal_challenger_page == &quot;1&quot;)
								
						{	if(choice == &quot;accept_challenger&quot;)	
					
							{	
								if(missionVariables.feudal_challenger_odds &gt; 0.2)
								{mission.runScreen({title: &quot;Royal Hunting Lodge&quot;, messageKey: &quot;feudal_challenger_bet_text&quot;, choicesKey: &quot;feudal_challenger_bet_choices&quot;, model: [missionVariables.feudal_challenger_role]}, this.choiceEvaluation);
								missionVariables.feudal_challenger_offer = &quot;CHALLENGE_BET&quot;}
								
								if(missionVariables.feudal_challenger_odds &lt;= 0.5)
								mission.runScreen({title: &quot;Royal Hunting Lodge&quot;, messageKey: &quot;feudal_challenger_low_odds&quot;});
								
								if(missionVariables.feudal_challenger_eligible == &quot;FALSE&quot;)
								mission.runScreen({title: &quot;Royal Hunting Lodge&quot;, messageKey: &quot;feudal_challenger_ineligible&quot;});
							}
					
							if(choice == &quot;decline_challenger&quot;)	
			
							{	
								missionVariables.feudal_challenger_page = &quot;2&quot;
								missionVariables.feudal_challenger_offer = null	
								choice = null
								this.feudalChallengeOffer()
								mission.runScreen({title: &quot;Royal Hunting Lodge&quot;, messageKey: [missionVariables.feudal_challenger_text], choicesKey: &quot;feudal_challenger_board_choices&quot;, model: [missionVariables.feudal_challenger_role]}, this.choiceEvaluation);
							}	
					
							if(choice == &quot;exit_challenger&quot;)		
								{missionVariables.feudal_challenger = &quot;NONE_SET&quot;
								missionVariables.feudal_challenger_offer = null
								this.resetChallenger()
								return}
						}
							
					if(missionVariables.feudal_challenger_page == &quot;2&quot;)
								
						{	if(choice == &quot;accept_challenger&quot;)
					
							{	
								if(missionVariables.feudal_challenger_odds &gt; 0.2)
								{mission.runScreen({title: &quot;Royal Hunting Lodge&quot;, messageKey: &quot;feudal_challenger_bet_text&quot;, choicesKey: &quot;feudal_challenger_bet_choices&quot;, model: [missionVariables.feudal_challenger_role]}, this.choiceEvaluation);
								missionVariables.feudal_challenger_offer = &quot;CHALLENGE_BET&quot;}
								
								if(missionVariables.feudal_challenger_odds &lt;= 0.2)
								mission.runScreen({title: &quot;Royal Hunting Lodge&quot;, messageKey: &quot;feudal_challenger_low_odds&quot;});
								
								if(missionVariables.feudal_challenger_eligible == &quot;FALSE&quot;)
								mission.runScreen({title: &quot;Royal Hunting Lodge&quot;, messageKey: &quot;feudal_challenger_ineligible&quot;});
							}
					
							if(choice == &quot;decline_challenger&quot;)	
			
							{	
								missionVariables.feudal_challenger_page = &quot;3&quot;
								missionVariables.feudal_challenger_offer = null
								choice = null
								this.feudalChallengeOffer()
								mission.runScreen({title: &quot;Royal Hunting Lodge&quot;, messageKey: [missionVariables.feudal_challenger_text], choicesKey: &quot;feudal_challenger_board_choices_alt&quot;, model: [missionVariables.feudal_challenger_role]}, this.choiceEvaluation);
								missionVariables.feudal_challenger_page = &quot;3&quot;
							}	
					
							if(choice == &quot;exit_challenger&quot;)		
								{missionVariables.feudal_challenger = &quot;NONE_SET&quot;
								missionVariables.feudal_challenger_offer = null
								this.resetChallenger()
								return}
						}	
						
					if(missionVariables.feudal_challenger_page == &quot;3&quot;)
								
						{	if(choice == &quot;accept_challenger&quot;)
					
							{	
								if(missionVariables.feudal_challenger_odds &gt; 0.2)
								{mission.runScreen({title: &quot;Royal Hunting Lodge&quot;, messageKey: &quot;feudal_challenger_bet_text&quot;, choicesKey: &quot;feudal_challenger_bet_choices&quot;, model: [missionVariables.feudal_challenger_role]}, this.choiceEvaluation);
								missionVariables.feudal_challenger_offer = &quot;CHALLENGE_BET&quot;}
								
								if(missionVariables.feudal_challenger_odds &lt;= 0.2)
								mission.runScreen({title: &quot;Royal Hunting Lodge&quot;, messageKey: &quot;feudal_challenger_low_odds&quot;});
								
								if(missionVariables.feudal_challenger_eligible == &quot;FALSE&quot;)
								mission.runScreen({title: &quot;Royal Hunting Lodge&quot;, messageKey: &quot;feudal_challenger_ineligible&quot;});
							}
					
							if(choice == &quot;decline_challenger&quot;)	
			
							{
								missionVariables.feudal_challenger_page = &quot;1&quot;			
								missionVariables.feudal_challenger = &quot;NONE_SET&quot;
								missionVariables.feudal_challenger_offer = null
								choice = null
								this.resetChallenger()
							}	
					
							if(choice == &quot;exit_challenger&quot;)		
								{missionVariables.feudal_challenger = &quot;NONE_SET&quot;
								missionVariables.feudal_challenger_offer = null
								this.resetChallenger()
								
								return}
						}			
				}
			
		if(missionVariables.feudal_challenger_offer == &quot;CHALLENGE_BET&quot;)
			
				{	if(choice == &quot;bet100&quot;)
				
					{	if(player.credits &gt;= 100)
					
						{	missionVariables.feudal_challenger_offer = &quot;CHALLENGE_LAUNCH&quot;
							missionVariables.feudal_challenger_stake = 100
							missionVariables.feudal_challenger_return = Math.round([missionVariables.feudal_challenger_stake]*[missionVariables.feudal_challenger_odds])
							mission.runScreen({title: &quot;Royal Hunting Lodge&quot;, messageKey: &quot;feudal_challenger_accepted_text&quot;, choicesKey: &quot;feudal_challenger_launch_choices&quot;}, this.choiceEvaluation);
							player.credits -= 100
							missionVariables.feudal_challenger = &quot;ACCEPTED&quot;

						}
						
						else
							
						mission.runScreen({title: &quot;Royal Hunting Lodge&quot;, messageKey: &quot;feudal_challenger_refused&quot;, choicesKey: &quot;feudal_challenger_bet_choices&quot;}, this.choiceEvaluation);
					}	
						
					if(choice == &quot;bet1000&quot;)
					
					{	if(player.credits &gt;= 1000)
					
						{	missionVariables.feudal_challenger_offer = &quot;CHALLENGE_LAUNCH&quot;
							missionVariables.feudal_challenger_stake = 1000
							missionVariables.feudal_challenger_return = Math.round([missionVariables.feudal_challenger_stake]*[missionVariables.feudal_challenger_odds])
							mission.runScreen({title: &quot;Royal Hunting Lodge&quot;, messageKey: &quot;feudal_challenger_accepted_text&quot;, choicesKey: &quot;feudal_challenger_launch_choices&quot;}, this.choiceEvaluation);
							player.credits -= 1000
							missionVariables.feudal_challenger = &quot;ACCEPTED&quot;
						}
						
						else
						
	
							mission.runScreen({title: &quot;Royal Hunting Lodge&quot;, messageKey: &quot;feudal_challenger_refused&quot;, choicesKey: &quot;feudal_challenger_bet_choices&quot;}, this.choiceEvaluation);
						
					}	
					
					if(choice == &quot;bet10000&quot;)
					
					{	if(player.credits &gt;= 10000)
						
						{	missionVariables.feudal_challenger_offer = &quot;CHALLENGE_LAUNCH&quot;
							missionVariables.feudal_challenger_stake = 10000
							missionVariables.feudal_challenger_return = Math.round([missionVariables.feudal_challenger_stake]*[missionVariables.feudal_challenger_odds])
							mission.runScreen({title: &quot;Royal Hunting Lodge&quot;, messageKey: &quot;feudal_challenger_accepted_text&quot;, choicesKey: &quot;feudal_challenger_launch_choices&quot;}, this.choiceEvaluation);
							player.credits -= 10000
							missionVariables.feudal_challenger = &quot;ACCEPTED&quot;
						}
						
						else
						mission.runScreen({title: &quot;Royal Hunting Lodge&quot;, messageKey: &quot;feudal_challenger_refused&quot;, choicesKey: &quot;feudal_challenger_bet_choices&quot;}, this.choiceEvaluation);
						
					}
					
					if(choice == &quot;betcancel&quot;)
						{missionVariables.feudal_challenger_offer = &quot;CHALLENGE_OFFERED&quot;
						mission.runScreen({title: &quot;Royal Hunting Lodge&quot;, messageKey: [missionVariables.feudal_challenger_text], choicesKey: &quot;feudal_challenger_board_choices&quot;, model: [missionVariables.feudal_challenger_role]}, this.choiceEvaluation);
						}	
				}		
				
		if(missionVariables.feudal_challenger_offer == &quot;CHALLENGE_LAUNCH&quot;)
				
				{	if(choice == &quot;begin_challenge&quot;)
				
						{	missionVariables.feudal_challenger = &quot;RUNNING&quot;
							missionVariables.feudal_challenger_offer = null
							player.ship.launch()
							++missionVariables.feudal_challenger_count
							
						}
						
						
					if(choice == &quot;defer_challenge&quot;)
				
						{
							mission.runScreen({title: &quot;Royal Hunting Lodge&quot;, messageKey: &quot;feudal_challenger_deferred&quot;});
							missionVariables.feudal_challenger_offer = &quot;CHALLENGE_DEFERRED&quot;	
						}	
				}
	}			

	
// ship appearance on launching
	
this.shipWillLaunchFromStation = function()

{	this.setUpSystem()

	if(missionVariables.feudal_challenger == &quot;RUNNING&quot;)
	{	system.legacy_addShipsAtPrecisely([missionVariables.feudal_challenger_role], 1, &quot;wsm&quot;, [0, 120100, 0])
		this.disableSystems()}
		else
	if(missionVariables.feudal_challenger_offer != &quot;CHALLENGE_DEFERRED&quot;)
	missionVariables.feudal_challenger = &quot;NONE_SET&quot;
}
this.shipWillExitWitchspace = function()
{	this.setUpSystem()
	missionVariables.feudal_challenger_count = 0 
	if(missionVariables.feudal_challenger == &quot;RUNNING&quot; || missionVariables.feudal_challenger == &quot;FORFEIT&quot; || missionVariables.feudal_challenger_offer == &quot;DEFERRED&quot;)
		{missionVariables.feudal_challenger = &quot;NONE_SET&quot;
		missionVariables.feudal_challenger_offer = null
		missionVariables.feudal_challenger_stake = null
		player.commsMessage(&quot;Feudal challenge has been forfeit.&quot;)
		this.restoreSystems()}	

	
	if(missionVariables.feudal_challenger == &quot;VICTORY&quot;)
		{missionVariables.feudal_challenger = &quot;NONE_SET&quot;
		missionVariables.feudal_challenger_offer = null
		missionVariables.feudal_challenger_stake = null
		this.restoreSystems()}	
}






this.setPlanetOverrides = function()
{	missionVariables.feudal_planetinfo = missionVariables.feudal_planetinfo+galaxyNumber
	for (var i=0; i&lt;256; i++)
	{if(System.infoForSystem(galaxyNumber,[i]).government == 1)
	
			{if(galaxyNumber = 0 &amp;&amp; System.infoForSystem(galaxyNumber,[i]).techlevel &gt;= 7 || galaxyNumber == 1 &amp;&amp; System.infoForSystem(galaxyNumber,[i]).techlevel &gt;= 5 ||
				galaxyNumber == 2 &amp;&amp; System.infoForSystem(galaxyNumber,[i]).techlevel &gt;= 7 || galaxyNumber == 4 &amp;&amp; System.infoForSystem(galaxyNumber,[i]).techlevel &gt;= 7 ||
				galaxyNumber == 5 &amp;&amp; System.infoForSystem(galaxyNumber,[i]).techlevel &gt;= 8)
				{System.infoForSystem(galaxyNumber,[i]).description = System.infoForSystem(galaxyNumber,[i]).description + &quot; Note that this system is a member of the Feudal States.&quot;}
			}
	}	
}


this.playerEnteredNewGalaxy = function()
{	if(missionVariables.feudal_planetinfo.indexOf(galaxyNumber) == -1)
	this.setPlanetOverrides()}

this.setUpSystem = function()
{
	if(system.government == 1)
	
	{
	
		if(galaxyNumber == 0 &amp;&amp; system.techLevel &gt;=7 || galaxyNumber == 1 &amp;&amp; system.techLevel &gt;= 5 || galaxyNumber == 2 &amp;&amp; system.techLevel &gt;= 7 || galaxyNumber == 4 &amp;&amp; system.techLevel &gt;=7 || galaxyNumber == 5 &amp;&amp; system.techLevel &gt;=8)

		{
		var currentLocationNo = system.ID
		var currentLocationName = System.systemNameForID ([currentLocationNo])
		
		if(system.countShipsWithRole(&quot;feudal-hunting-lodge&quot;) == 0)
		system.legacy_addShipsAtPrecisely(&quot;feudal-hunting-lodge&quot;, 1, &quot;wsm&quot;, [0, 100000, 0])
		
		if(system.countShipsWithRole(&quot;feudal-buoy&quot;) == 0)
		system.legacy_addShipsAtPrecisely(&quot;feudal-buoy&quot;, 1, &quot;wsm&quot;, [0, 122000, 0])
		
		
		if(missionVariables.feudal_tournament_home != system.name &amp;&amp; system.countShipsWithRole(&quot;feudal-knight&quot;) == 0)  
		{system.legacy_addShipsWithinRadius([currentLocationName]+&quot;-knight&quot;, 4, &quot;wsm&quot;, [0, 100000, 0], 10000)
		system.legacy_addSystemShips([currentLocationName]+&quot;-lord&quot;, 2, 0.8)
		system.legacy_addSystemShips(&quot;feudal-knight&quot;, 3, 0.6)}
		}
	}
}



this.disableSystems = function()
{
	if(player.ship.equipmentStatus(&quot;EQ_CLOAKING_DEVICE&quot;) == &quot;EQUIPMENT_OK&quot;)
		{	player.ship.removeEquipment(&quot;EQ_CLOAKING_DEVICE&quot;)
			player.ship.awardEquipment(&quot;EQ_FS_CLOAK_PLACEHOLDER&quot;)
			player.consoleMessage(&quot;Cloaking Device disabled&quot;)
		}
		
	if(player.ship.equipmentStatus(&quot;EQ_ENERGY_BOMB&quot;) == &quot;EQUIPMENT_OK&quot;)
		{	player.ship.removeEquipment(&quot;EQ_ENERGY_BOMB&quot;)
			player.ship.awardEquipment(&quot;EQ_FS_BOMB_PLACEHOLDER&quot;)
			player.consoleMessage(&quot;Energy Bomb disabled&quot;)
		}
		
	this.storeMissileArray = player.ship.missiles;
	player.ship.awardEquipment(&quot;EQ_MISSILE_REMOVAL&quot;)
	player.ship.awardEquipment(&quot;EQ_FEUDAL_FLARE_MINE&quot;)
}

this.restoreSystems = function()

{	if(player.ship.equipmentStatus(&quot;EQ_FS_CLOAK_PLACEHOLDER&quot;) == &quot;EQUIPMENT_OK&quot;)
		{	player.ship.removeEquipment(&quot;EQ_FS_CLOAK_PLACEHOLDER&quot;)
			player.ship.awardEquipment(&quot;EQ_CLOAKING_DEVICE&quot;)
			player.consoleMessage(&quot;Cloaking Device re-enabled&quot;)
		}
		
	if(player.ship.equipmentStatus(&quot;EQ_FS_BOMB_PLACEHOLDER&quot;) == &quot;EQUIPMENT_OK&quot;)
		{	player.ship.removeEquipment(&quot;EQ_FS_BOMB_PLACEHOLDER&quot;)
			player.ship.awardEquipment(&quot;EQ_ENERGY_BOMB&quot;)
			player.consoleMessage(&quot;Energy Bomb re-enabled&quot;)
		}
	
	player.ship.awardEquipment(&quot;EQ_MISSILE_REMOVAL&quot;)
	for(restoreCounter = 0;restoreCounter&lt;this.storeMissileArray.length;restoreCounter++)
        {player.ship.awardEquipment(this.storeMissileArray[restoreCounter].equipmentKey);}
}</pre></td>
                </tr>
                <tr>
                    <td valign="top">Scripts/feudal-escape-pod.js</td>
                    <td><pre>this.name = &quot;feudal-escape-pod.js&quot;;
this.author = &quot;Ramirez&quot;;
this.copyright = &quot;November 2010&quot;;
this.description = &quot;Ship script for feudal escape pods&quot;;
this.version = &quot;2.0&quot;;

this.shipSpawned = function ()
{
	if(missionVariables.feudal_mission == &quot;RANSOM_RUNNING&quot;)
	
		{	if(this.ship.displayName == this.ship.name)
			this.ship.displayName = expandDescription(&quot;[mission_feudal_mission_rank] [mission_feudal_mission_of] [mission_feudal_mission_house]&quot;) // Show the ID of the execution target
		}
	if(missionVariables.feudal_challenger == &quot;RUNNING&quot;)
		{
		if(this.ship.displayName == this.ship.name)	
                        {
                              if(missionVariables.feudal_challenger_rank_no == 1)
                              this.ship.displayName = expandDescription(&quot;[mission_feudal_challenger_title] [mission_feudal_challenger_firstname] [mission_feudal_challenger_lastname]&quot;)
                        
                              else
                              this.ship.displayName = expandDescription(&quot;[mission_feudal_challenger_rank] [mission_feudal_challenger_of] [mission_feudal_challenger_house]&quot;)
                        }
		}
}

this.shipWasScooped = function (whom)
		{ if(whom == player.ship)
		
		{if(missionVariables.feudal_mission == &quot;RANSOM_RUNNING&quot;)
			{missionVariables.feudal_mission = &quot;RANSOM_SUCCESS&quot; 
			mission.unmarkSystem([missionVariables.feudal_mission_location_no], &quot;feudal-mission.js&quot;)}
		}
		}

this.shipDied = function ()
		
		
		{if(missionVariables.feudal_mission == &quot;RANSOM_RUNNING&quot;)
			{missionVariables.feudal_mission = &quot;RANSOM_FAIL&quot; 
			mission.unmarkSystem([missionVariables.feudal_mission_location_no], &quot;feudal-mission.js&quot;)}                
		}	

		</pre></td>
                </tr>
                <tr>
                    <td valign="top">Scripts/feudal-flare.js</td>
                    <td><pre>this.name = &quot;feudal-flare.js&quot;;
this.author = &quot;Ramirez&quot;;
this.copyright = &quot;April 2011&quot;;
this.description = &quot;Script used by a signal flare to yield a feudal challenge to an opponent&quot;;
this.version = &quot;1.1&quot;;

this.yieldToOpponent = function()
{player.commsMessage(&quot;Challenge yielded&quot;, 5)
missionVariables.feudal_challenger = &quot;FORFEIT&quot;}</pre></td>
                </tr>
                <tr>
                    <td valign="top">Scripts/feudal-jumpgate.js</td>
                    <td><pre>this.name = &quot;feudal-jumpgate.js&quot;;
this.author = &quot;Ramirez&quot;;
this.copyright = &quot;November 2012&quot;;
this.description = &quot;Script used by Cascade tournament event to teleport player to asteroid field&quot;;
this.version = &quot;2.0&quot;;



this.checkDistance = function()
{if(player.ship.position.distanceTo(this.ship) &lt; 200)

    {   var homedestination = system.shipsWithRole(&quot;feudal-gate-home&quot;)[0]
        var awaydestination = system.shipsWithRole(&quot;feudal-gate-away&quot;)[0]
        player.commsMessage(&#39;Jump Initiated&#39;)
        
        if(this.ship.primaryRole == &quot;feudal-gate-home&quot;)
        {
            player.ship.position = awaydestination.position.add([0, 0, 500])
            player.ship.orientation = awaydestination.orientation  
        }
        
        if(this.ship.primaryRole == &quot;feudal-gate-away&quot;)
        { 
            player.ship.position = homedestination.position.add([0, 0, 500])
            player.ship.orientation = homedestination.orientation
        }      
    }
}

</pre></td>
                </tr>
                <tr>
                    <td valign="top">Scripts/feudal-mine.js</td>
                    <td><pre>this.name = &quot;feudal-mine.js&quot;;
this.author = &quot;Ramirez&quot;;
this.copyright = &quot;August 2009&quot;;
this.description = &quot;Script used by feudal mines&quot;;
this.version = &quot;1.0&quot;;



this.checkDistanceToPlayer = function()
{if(player.ship.position.distanceTo(this.ship) &lt; 4000)
    {   
        this.ship.commsMessage(&quot;WARNING: Mine activated.&quot;)
        this.ship.reactToAIMessage(&quot;TARGET_FOUND&quot;)}            
                
}

this.shipDied = function()
{this.ship.spawn(&quot;feudal-splinter&quot;, 30)}
</pre></td>
                </tr>
                <tr>
                    <td valign="top">Scripts/feudal-mission.js</td>
                    <td><pre>this.name = &quot;feudal-mission.js&quot;;
this.author = &quot;Ramirez&quot;;
this.copyright = &quot;December 2011&quot;;
this.description = &quot;World script for setting up feudal missions&quot;;
this.version = &quot;9.0&quot;;



this.startUp = function()
{
this.thePlayerShip = player.ship
}

this.missionScreenEnded = function()
{
	if(!player.ship.docked) return;
	
	this.feudalMissionScreens	
}

this.shipDockedWithStation = function()

{
	if(!player.ship.docked) return;
	this.feudalMissionScreens()	
}

this.guiScreenChanged = function()

{	if(guiScreen == &quot;GUI_SCREEN_MARKET&quot;)
	this.feudalMissionScreens()
}

this.resetMissionVariables = function()
{missionVariables.feudal_mission_location_no = null
missionVariables.feudal_mission_location_name = null
missionVariables.feudal_mission_commodity = null
missionVariables.feudal_mission_reward = null
missionVariables.feudal_mission_house = null
missionVariables.feudal_mission_gender = null
missionVariables.feudal_mission_role = null
missionVariables.feudal_mission_ship = null
}

this.defineMissionLocationNo = function() // Define system number for missions if required, based on selected house

	{missionVariables.feudal_mission_location_no = System.systemIDForName([missionVariables.feudal_mission_house])}

this.defineMissionHouse = function() // Randomly select a House related to the mission; reject any where house equals current location
	
	{missionVariables.feudal_mission_house = expandDescription(&quot;[feudal_house_&quot;+[galaxyNumber]+&quot;]&quot;)
		
		if(missionVariables.feudal_mission_house == system.name)
			{this.defineMissionHouse()}
			else return}

this.defineMissionLocation = function() // Define system name for missions if required, based on system number
	{missionVariables.feudal_mission_location = System.systemNameForID([missionVariables.feudal_mission_location_no])}

this.defineMissionCommodity = function() // Define any commodities associated with the mission
	{missionVariables.feudal_mission_commodity = expandDescription(&quot;[feudal_commodity]&quot;)}
		
this.defineMissionHome = function() // Defines the home for any feudal missions and ultimately the player&#39;s feudal rank
	{missionVariables.feudal_mission_home = system.name}


this.defineFeudalDelivery = function() // Defines all variables needed for a feudal delivery mission
{	this.defineMissionHouse()
	this.defineMissionLocationNo()
	this.defineMissionHome()
	this.defineMissionCommodity()
	missionVariables.feudal_mission_reward = 1000 + (Math.floor(Math.random()*10))*101	
}


this.feudalTributeOffer = function()
{	
	this.defineFeudalTribute()
	mission.runScreen({title: &quot;Royal Court&quot;, messageKey: &quot;feudal_mission_tribute&quot;, music: &quot;feudal-music.ogg&quot;, background: &quot;redeagle.png&quot;, choicesKey: &quot;feudal_mission_choices&quot;}, this.choiceEvaluation);
	missionVariables.feudal_mission_offer = &quot;TRIBUTE_OFFER&quot;
}

this.defineFeudalTribute = function()
{	this.defineMissionHome()
	missionVariables.feudal_mission_reward = 300 + (Math.floor(Math.random()*10))*101	
	missionVariables.feudal_mission_location_no = (Math.floor(Math.random()*256));
	
	if(System.infoForSystem(galaxyNumber,[missionVariables.feudal_mission_location_no]).government == 1 &amp;&amp; System.infoForSystem(galaxyNumber,[missionVariables.feudal_mission_location_no]).techlevel &lt; 5)
	{missionVariables.feudal_mission_location_name = System.infoForSystem(galaxyNumber,[missionVariables.feudal_mission_location_no]).name}	
	else
	this.defineFeudalTribute()	
}

this.feudalTributeChoice = function()   

{	mission.runScreen({title: &quot;Royal Court&quot;, messageKey: &quot;feudal_mission_accepted&quot;})
	missionVariables.feudal_mission = &quot;TRIBUTE_RUNNING&quot;
	mission.setInstructionsKey(&quot;feudal_mission_tribute_instructions&quot;)
	mission.markSystem([missionVariables.feudal_mission_location_no])
}

this.defineFeudalRansom = function()
{		
	this.defineMissionGender()
	this.defineMissionHouse()
	this.defineGeneratorInputs()
	player.rankGenerator_level = 3
	player.feudalRankGenerator()
	this.defineGeneratorOutputs()
	missionVariables.feudal_mission_rank = player.rankGenerator_feudal_high_rank
	this.defineMissionLocationNo()
	this.defineMissionHome()
	missionVariables.feudal_mission_reward = (Math.floor(Math.random()*4))*3050 + 5000	
}

this.feudalRansomOffer = function()
{	
	this.defineFeudalRansom()
	mission.runScreen({title: &quot;Royal Court&quot;, messageKey: &quot;feudal_mission_ransom&quot;, music: &quot;feudal-music.ogg&quot;, background: &quot;redeagle.png&quot;, choicesKey: &quot;feudal_mission_choices&quot;}, this.choiceEvaluation);
	missionVariables.feudal_mission_offer = &quot;RANSOM_OFFER&quot;
}
		
this.feudalRansomChoice = function()

{	mission.runScreen({title: &quot;Royal Court&quot;, messageKey: &quot;feudal_mission_accepted&quot;})
	missionVariables.feudal_mission = &quot;RANSOM_RUNNING&quot;
	mission.setInstructionsKey(&quot;feudal_mission_ransom_instructions&quot;)
	mission.markSystem([missionVariables.feudal_mission_location_no])
}

this.feudalDeliveryOffer = function ()
{
	this.defineFeudalDelivery()
	mission.runScreen({title: &quot;Royal Court&quot;, messageKey: &quot;feudal_mission_delivery&quot;, background: &quot;redeagle.png&quot;, music: &quot;feudal-music.ogg&quot;, choicesKey: &quot;feudal_mission_choices&quot;}, this.choiceEvaluation);
	//mission.runMissionScreen(&quot;feudal_mission_delivery&quot;, &quot;redeagle.png&quot;, &quot;feudal_mission_choices&quot;, null, &quot;feudal-music.ogg&quot;)
	missionVariables.feudal_mission_offer = &quot;DELIVERY_OFFER&quot;	
}

this.feudalDeliveryChoice = function ()   

{	mission.runScreen({title: &quot;Royal Court&quot;, messageKey: &quot;feudal_mission_accepted&quot;})
	missionVariables.feudal_mission = &quot;DELIVERY_RUNNING&quot;
	mission.setInstructionsKey(&quot;feudal_mission_delivery_instructions&quot;)
	mission.markSystem([missionVariables.feudal_mission_location_no])
}



this.feudalExecutionOffer = function ()
			
{
	this.defineFeudalExecution()
	mission.runScreen({title: &quot;Royal Court&quot;, messageKey: &quot;feudal_mission_execution&quot;, background: &quot;redeagle.png&quot;, music: &quot;feudal-music.ogg&quot;, choicesKey: &quot;feudal_mission_choices&quot;}, this.choiceEvaluation);
	//mission.runMissionScreen(&quot;feudal_mission_execution&quot;, &quot;redeagle.png&quot;, &quot;feudal_mission_choices&quot;, null, &quot;feudal-music.ogg&quot;)
	missionVariables.feudal_mission_offer = &quot;EXECUTION_OFFER&quot;	
}
	
this.feudalExecutionChoice = function ()	
{	
	mission.runScreen({title: &quot;Royal Court&quot;, messageKey: &quot;feudal_mission_accepted&quot;})
	missionVariables.feudal_mission = &quot;EXECUTION_RUNNING&quot;
	mission.setInstructionsKey(&quot;feudal_mission_execution_instructions&quot;)
	mission.markSystem([missionVariables.feudal_mission_location_no])
}	
	
this.feudalRaidOffer = function ()
{
	this.defineFeudalRaid()
	mission.runScreen({title: &quot;Royal Court&quot;, messageKey: &quot;feudal_mission_raid&quot;, background: &quot;redeagle.png&quot;, music: &quot;feudal-music.ogg&quot;, choicesKey: &quot;feudal_mission_choices&quot;}, this.choiceEvaluation);
	//mission.runMissionScreen(&quot;feudal_mission_raid&quot;, &quot;redeagle.png&quot;, &quot;feudal_mission_choices&quot;, null, &quot;feudal-music.ogg&quot;)
	missionVariables.feudal_mission_offer = &quot;RAID_OFFER&quot;
	
}

this.feudalRaidChoice = function ()
{			
	mission.runScreen({title: &quot;Royal Court&quot;, messageKey: &quot;feudal_mission_accepted&quot;})
	missionVariables.feudal_mission = &quot;RAID_RUNNING&quot;
	mission.setInstructionsKey(&quot;feudal_mission_raid_instructions&quot;)
	mission.markSystem([missionVariables.feudal_mission_location_no])
	missionVariables.feudal_mission_cargocount = 0
}

this.feudalEscortOffer = function()
{ 
	this.defineFeudalEscort()
	mission.runScreen({title: &quot;Royal Court&quot;, messageKey: &quot;feudal_mission_escort&quot;, background: &quot;redeagle.png&quot;, music: &quot;feudal-music.ogg&quot;, choicesKey: &quot;feudal_mission_choices&quot;}, this.choiceEvaluation);
	missionVariables.feudal_mission_offer = &quot;ESCORT_OFFER&quot;
}

this.feudalEscortChoice = function()	
{	
	mission.runScreen({title: &quot;Royal Court&quot;, messageKey: &quot;feudal_mission_accepted&quot;})
	missionVariables.feudal_mission = &quot;ESCORT_RUNNING&quot;
	mission.setInstructionsKey(&quot;feudal_mission_escort_instructions&quot;)
	mission.markSystem([missionVariables.feudal_mission_location_no])
	missionVariables.feudal_mission_cargocount = 0
	missionVariables.feudal_mission_killcount = 0
}

this.defineFeudalRaid = function()

{
	missionVariables.feudal_mission_location_no = (Math.floor(Math.random()*256));
	missionVariables.feudal_mission_ship = expandDescription(&quot;[feudal_freighter]&quot;)
	this.defineMissionHouse()
	this.defineMissionLocation()
	this.defineMissionCommodity()
	this.defineMissionHome()
	this.defineMissionRole()
	missionVariables.feudal_mission_reward = 3000 + (Math.floor(Math.random()*10))*97
}


this.defineFeudalExecution = function()
{	
	missionVariables.feudal_mission_location_no = (Math.floor(Math.random()*256));
	missionVariables.feudal_mission_ship = expandDescription(&quot;[feudal_fighter]&quot;)
	missionVariables.feudal_mission_house = system.name
	this.defineMissionGender()
	this.defineMissionRole()
	player.rankGenerator_level = 2
	this.defineGeneratorInputs()
	player.feudalRankGenerator()
	this.defineGeneratorOutputs()
	this.defineMissionLocation()
	missionVariables.feudal_mission_reward = 8000 + (Math.floor(Math.random()*10))*52
}

this.defineGeneratorInputs = function()
{
	player.rankGenerator_house = missionVariables.feudal_mission_house
	player.rankGenerator_gender = missionVariables.feudal_mission_gender	
}

this.defineGeneratorOutputs = function()
{
	missionVariables.feudal_mission_firstname = player.rankGenerator_feudal_firstname
	missionVariables.feudal_mission_lastname = player.rankGenerator_feudal_lastname
	missionVariables.feudal_mission_of = player.rankGenerator_of
}

this.defineFeudalEscort = function()
{	missionVariables.feudal_mission_location_no = (Math.floor(Math.random()*256));
	missionVariables.feudal_mission_ship = expandDescription(&quot;[feudal_freighter]&quot;)
	this.defineMissionLocation()
	this.defineMissionHouse()
	this.defineMissionRole()
	this.defineMissionCommodity()
	this.defineMissionHome()
	missionVariables.feudal_mission_reward = 8000 + (Math.floor(Math.random()*10))*48
}

this.defineMissionGender = function() // define gender and basic ranks for mission target

	{	missionVariables.feudal_mission_gender = expandDescription(&quot;[feudal_gender]&quot;)
		  
		if(missionVariables.feudal_mission_gender == &quot;he&quot;)
		{	
			missionVariables.feudal_mission_level1_title = &quot;Sir&quot;
			missionVariables.feudal_mission_level2_title = &quot;Lord&quot;
		}									       
		
		if(missionVariables.feudal_mission_gender == &quot;she&quot;)
		
		{	
			missionVariables.feudal_mission_level1_title = &quot;Lady&quot;
			missionVariables.feudal_mission_level2_title = &quot;Lady&quot;	
		}
	}
	
//   define the necessary ship role based on the ship name that has been selected by mission variables

this.defineMissionRole = function()

{	
		if(missionVariables.feudal_mission_ship == &quot;Python Cruiser&quot;)
		missionVariables.feudal_mission_role = &quot;feudal-python&quot;
		
		if(missionVariables.feudal_mission_ship == &quot;Anaconda Freighter&quot;)
		missionVariables.feudal_mission_role = &quot;feudal-anaconda&quot;
		
		if(missionVariables.feudal_mission_ship == &quot;Boa&quot;)
		missionVariables.feudal_mission_role = &quot;feudal-boa&quot;
		
		if(missionVariables.feudal_mission_ship == &quot;Boa Class Cruiser&quot;)
		missionVariables.feudal_mission_role = &quot;feudal-boa2&quot;
		
		if(missionVariables.feudal_mission_ship == &quot;Adder&quot;)
		missionVariables.feudal_mission_role = &quot;feudal-adder&quot;
		
		if(missionVariables.feudal_mission_ship == &quot;Moray&quot;)
		missionVariables.feudal_mission_role = &quot;feudal-moray&quot;
		
		if(missionVariables.feudal_mission_ship == &quot;Fer-de-Lance&quot;)
		missionVariables.feudal_mission_role = &quot;feudal-ferdelance&quot;
		
		if(missionVariables.feudal_mission_ship == &quot;Asp Mark II&quot;)
		missionVariables.feudal_mission_role = &quot;feudal-asp&quot;
}


this.feudalMissionScreens = function()

{  	if(guiScreen == &quot;GUI_SCREEN_MISSION&quot; || !player.ship.docked) return;
	if(missionVariables.feudal_mission_offer) return;
	
	if(this.thePlayerShip.dockedStation.hasRole(&quot;planetFall_feudalStates&quot;))

		{		
			if(guiScreen == &quot;GUI_SCREEN_MARKET&quot;)
			
			{	
				if(!missionVariables.feudal_mission &amp;&amp; !missionVariables.feudal_player_rank_no)		 
			
				{	this.feudalTributeOffer()
					missionVariables.feudal_score = 0
					// for new starters, offer a delivery only and initialise score
				}
				
				
				if(missionVariables.feudal_mission == &quot;NONE_SET&quot;)
			
				{
					this.feudalMissionProb = (Math.random())
				
					if(!missionVariables.feudal_player_rank_no)
						
						if(this.feudalMissionProb &lt;= 0.5)
						this.feudalDeliveryOffer()
						
						else
						
						this.feudalTributeOffer()
							
					if(missionVariables.feudal_player_rank_no == 1 &amp;&amp; missionVariables.feudal_mission_home == system.name) 
							
					{	
						if(this.feudalMissionProb &lt;= 0.4)
						this.feudalRaidOffer()
						
						if(this.feudalMissionProb &gt; 0.4 &amp;&amp; this.feudalMissionProb &lt;= 0.7)
						this.feudalDeliveryOffer()						

						if(this.feudalMissionProb &gt; 0.9)
						this.feudalTributeOffer()
					
						if(this.feudalMissionProb &gt; 0.7 &amp;&amp; this.feudalMissionProb &lt;= 0.9)
						this.feudalEscortOffer()
						
					}
				
			
					if(missionVariables.feudal_player_rank_no == 2 &amp;&amp; missionVariables.feudal_mission_home == system.name)
								
					{
			
					if(this.feudalMissionProb &lt;= 0.65)
					this.feudalRaidOffer()
						
					if(this.feudalMissionProb &gt; 0.65 &amp;&amp; this.feudalMissionProb &lt;= 0.8)
					this.feudalEscortOffer()
						
					if(this.feudalMissionProb &gt;= 0.8)
					this.feudalExecutionOffer()
					}
			
		
					if(missionVariables.feudal_player_rank_no == 3 &amp;&amp; missionVariables.feudal_mission_home == system.name)		
					{	
					
					if(this.feudalMissionProb &lt;= 0.10)
					this.feudalRaidOffer()
						
					if(this.feudalMissionProb &gt;0.10 &amp;&amp; this.feudalMissionProb &lt;= 0.8)
					this.feudalRansomOffer()
						
					if(this.feudalMissionProb &gt;= 0.8)
					this.feudalExecutionOffer()	
					}
			
					if(missionVariables.feudal_player_rank_no &gt;= 4 &amp;&amp; missionVariables.feudal_mission_home == system.name)		
				
					{
					if(this.feudalMissionProb &lt;= 0.10)
					this.feudalRaidOffer()
						
					if(this.feudalMissionProb &gt; 0.10 &amp;&amp; this.feudalMissionProb &lt;= 0.5)
					this.feudalEscortOffer()
					
					if(this.feudalMissionProb &gt;0.5 &amp;&amp; this.feudalMissionProb &lt;= 0.8)
					this.feudalRansomOffer()
						
					if(this.feudalMissionProb &gt;= 0.8 &amp;&amp; this.feudalMissionProb &lt; 0.9)
					this.feudalExecutionOffer()
					
					if(this.feudalMissionProb &gt;= 0.9)
					this.feudalDeliveryOffer()
					}
				
				}
		
				if(missionVariables.feudal_mission == &quot;DELIVERY_DECLINED&quot;)
					{mission.runScreen({title: &quot;Royal Court&quot;, messageKey: &quot;feudal_mission_delivery&quot;, background: &quot;redeagle.png&quot;,
					music: &quot;feudal-music.ogg&quot;, choicesKey: &quot;feudal_mission_choices&quot;}, this.choiceEvaluation);	
					missionVariables.feudal_mission_offer = &quot;DELIVERY_OFFER&quot;}
					
				if(missionVariables.feudal_mission == &quot;TRIBUTE_DECLINED&quot;)
					{mission.runScreen({title: &quot;Royal Court&quot;, messageKey: &quot;feudal_mission_tribute&quot;, background: &quot;redeagle.png&quot;,
					music: &quot;feudal-music.ogg&quot;, choicesKey: &quot;feudal_mission_choices&quot;}, this.choiceEvaluation);	
					missionVariables.feudal_mission_offer = &quot;TRIBUTE_OFFER&quot;}
					
				if(missionVariables.feudal_mission == &quot;RANSOM_DECLINED&quot;)
					{mission.runScreen({title: &quot;Royal Court&quot;, messageKey: &quot;feudal_mission_ransom&quot;, background: &quot;redeagle.png&quot;,
					music: &quot;feudal-music.ogg&quot;, choicesKey: &quot;feudal_mission_choices&quot;}, this.choiceEvaluation);		
					missionVariables.feudal_mission_offer = &quot;RANSOM_OFFER&quot;}
					
				if(missionVariables.feudal_mission == &quot;RAID_DECLINED&quot;)
					{mission.runScreen({title: &quot;Royal Court&quot;, messageKey: &quot;feudal_mission_raid&quot;, background: &quot;redeagle.png&quot;,
					music: &quot;feudal-music.ogg&quot;, choicesKey: &quot;feudal_mission_choices&quot;}, this.choiceEvaluation);
					missionVariables.feudal_mission_offer = &quot;RAID_OFFER&quot;}
					
				if(missionVariables.feudal_mission == &quot;EXECUTION_DECLINED&quot;)
					{mission.runScreen({title: &quot;Royal Court&quot;, messageKey: &quot;feudal_mission_execution&quot;, background: &quot;redeagle.png&quot;,
					music: &quot;feudal-music.ogg&quot;, choicesKey: &quot;feudal_mission_choices&quot;}, this.choiceEvaluation);
					missionVariables.feudal_mission_offer = &quot;EXECUTION_OFFER&quot;}
					
				if(missionVariables.feudal_mission == &quot;ESCORT_DECLINED&quot;)
					{mission.runScreen({title: &quot;Royal Court&quot;, messageKey: &quot;feudal_mission_escort&quot;, background: &quot;redeagle.png&quot;,
					music: &quot;feudal-music.ogg&quot;, choicesKey: &quot;feudal_mission_choices&quot;}, this.choiceEvaluation);
					missionVariables.feudal_mission_offer = &quot;ESCORT_OFFER&quot;}
			
			}
			
		
			
			
			// standard responses for missions returning to the Royal Court without market screen
			
			
		if((missionVariables.feudal_mission == &quot;DELIVERY_RUNNING&quot; &amp;&amp; system.ID == [missionVariables.feudal_mission_location_no]))	  
			
				{	mission.runScreen({messageKey:&quot;feudal_mission_deliverysuccess&quot;})
					mission.unmarkSystem([missionVariables.feudal_mission_location_no])
					missionVariables.feudal_score += 2
					missionVariables.feudal_mission = &quot;NONE_SET&quot;
					mission.setInstructionsKey(null)
					player.credits += missionVariables.feudal_mission_reward}
					
							
		if(missionVariables.feudal_mission == &quot;TRIBUTE_COLLECTED&quot; &amp;&amp; (missionVariables.feudal_mission_home == system.name)) 	  
			
				{	mission.runScreen({messageKey:&quot;feudal_mission_tributesuccess&quot;})
					mission.unmarkSystem([missionVariables.feudal_mission_location_no])
					missionVariables.feudal_score += 1
					missionVariables.feudal_mission = &quot;NONE_SET&quot;
					player.credits += missionVariables.feudal_mission_reward
					mission.setInstructionsKey(null)}
			
		if(missionVariables.feudal_mission == &quot;RAID_SUCCESS&quot; &amp;&amp; (missionVariables.feudal_mission_home == system.name)) 
					
					{	if(missionVariables.feudal_mission_cargocount == 18)
				
						{	player.credits += missionVariables.feudal_mission_reward
							mission.runScreen({messageKey: &quot;feudal_mission_raid_bigsuccess&quot;})
							mission.unmarkSystem([missionVariables.feudal_mission_location_no])
							missionVariables.feudal_mission = &quot;NONE_SET&quot;
							missionVariables.feudal_score += 10
							mission.setInstructionsKey(null)
						}
				
						if(missionVariables.feudal_mission_cargocount &lt; 18 &amp;&amp; missionVariables.feudal_mission_cargocount &gt; 6)
						{	missionVariables.feudal_mission_reward = Math.floor(missionVariables.feudal_mission_reward*0.8)				
							player.credits += (missionVariables.feudal_mission_reward)
							mission.runScreen({messageKey: &quot;feudal_mission_raid_success&quot;})
							mission.unmarkSystem([missionVariables.feudal_mission_location_no])
							missionVariables.feudal_mission = &quot;NONE_SET&quot;
							missionVariables.feudal_score += 5
							mission.setInstructionsKey(null)
						}
				
						if(missionVariables.feudal_mission_cargocount &lt;= 6)
						{	mission.runScreen({messageKey: &quot;feudal_mission_raid_smallsuccess&quot;})
							mission.unmarkSystem([missionVariables.feudal_mission_location_no])
							missionVariables.feudal_mission = &quot;NONE_SET&quot;
							missionVariables.feudal_score += 3
							mission.setInstructionsKey(null)
						}
					
						if(missionVariables.feudal_mission_cargocount == 0)
						{	
							mission.runScreen({messageKey: &quot;feudal_mission_raid_fail&quot;})
							mission.unmarkSystem([missionVariables.feudal_mission_location_no])
							missionVariables.feudal_mission = &quot;NONE_SET&quot;
							mission.setInstructionsKey(null)
						}
					}		
		
		if(missionVariables.feudal_mission == &quot;RANSOM_SUCCESS&quot; &amp;&amp; (missionVariables.feudal_mission_home == system.name)) 
			
				{	player.credits += missionVariables.feudal_mission_reward
					mission.runScreen({messageKey: &quot;feudal_mission_ransom_success&quot;})
					mission.unmarkSystem([missionVariables.feudal_mission_location_no])
					missionVariables.feudal_mission = &quot;NONE_SET&quot;
					missionVariables.feudal_score += 20
					mission.setInstructionsKey(null)
				}
				
		if(missionVariables.feudal_mission == &quot;RANSOM_FAIL&quot; &amp;&amp; (missionVariables.feudal_mission_home == system.name))
			
				{	
					mission.runScreen({messageKey: &quot;feudal_mission_ransom_fail&quot;})
					mission.unmarkSystem([missionVariables.feudal_mission_location_no])
					missionVariables.feudal_mission = &quot;NONE_SET&quot;
					missionVariables.feudal_score -= 15
					mission.setInstructionsKey(null)
				}
			
		}
	
		// Responses that don&#39;t end at the Royal Court
		
		
			if((missionVariables.feudal_mission == &quot;TRIBUTE_RUNNING&quot; &amp;&amp; system.ID == [missionVariables.feudal_mission_location_no]))	  
			
				{	mission.runScreen({messageKey:&quot;feudal_mission_tributecollected&quot;})
					mission.unmarkSystem([missionVariables.feudal_mission_location_no])
					missionVariables.feudal_mission = &quot;TRIBUTE_COLLECTED&quot;}



			if(missionVariables.feudal_mission == &quot;EXECUTION_SUCCESS&quot;)		
			
				{	mission.runScreen({messageKey: &quot;feudal_mission_executionsuccess&quot;})
					mission.unmarkSystem([missionVariables.feudal_mission_location_no])
					missionVariables.feudal_mission = &quot;NONE_SET&quot;
					missionVariables.feudal_score += 20
					mission.setInstructionsKey(null)
					player.credits += missionVariables.feudal_mission_reward
				}
				
			if(missionVariables.feudal_mission == &quot;EXECUTION_PARTIALSUCCESS&quot;)		
			
				{	missionVariables.feudal_mission_reward = Math.floor(missionVariables.feudal_mission_reward*0.4)
					mission.runScreen({messageKey: &quot;feudal_mission_executionpartialsuccess&quot;})
					mission.unmarkSystem([missionVariables.feudal_mission_location_no])
					player.credits += missionVariables.feudal_mission_reward
					missionVariables.feudal_mission = &quot;NONE_SET&quot;
					missionVariables.feudal_score += 10
					mission.setInstructionsKey(null)
				}
			
			if(missionVariables.feudal_mission == &quot;ESCORT_SUCCESS&quot; &amp;&amp; system.ID == [missionVariables.feudal_mission_location_no])
			
				{	player.credits += missionVariables.feudal_mission_reward
					mission.runScreen({messageKey:&quot;feudal_mission_escort_success&quot;})
					mission.unmarkSystem([missionVariables.feudal_mission_location_no])
					missionVariables.feudal_mission = &quot;NONE_SET&quot;
					missionVariables.feudal_score += 20
					mission.setInstructionsKey(null)
				}
				
			if(missionVariables.feudal_mission == &quot;ESCORT_FAIL&quot; &amp;&amp; system.ID == [missionVariables.feudal_mission_location_no])
			
				{	if(missionVariables.feudal_mission_cargocount &gt;=12)
			
					{	missionVariables.feudal_mission_reward = Math.floor(missionVariables.feudal_mission_reward*0.75)
						player.credits += missionVariables.feudal_mission_reward
						mission.runScreen({messageKey:&quot;feudal_mission_escort_partialsuccess&quot;})
						mission.unmarkSystem([missionVariables.feudal_mission_location_no])
						missionVariables.feudal_mission = &quot;NONE_SET&quot;
						missionVariables.feudal_score += 10
						mission.setInstructionsKey(null)	
					}
					
					if(missionVariables.feudal_mission_cargocount &gt;= 6 &amp;&amp; missionVariables.feudal_mission_cargocount &lt; 12) 
			
					{	missionVariables.feudal_mission_reward = Math.floor(missionVariables.feudal_mission_reward*0.5)	
						mission.unmarkSystem([missionVariables.feudal_mission_location_no])
						player.credits += missionVariables.feudal_mission_reward
						mission.runScreen({messageKey:&quot;feudal_mission_escort_partialsuccess&quot;})
						missionVariables.feudal_mission = &quot;NONE_SET&quot;
						missionVariables.feudal_score += 5
						mission.setInstructionsKey(null)
					}
						
					if(missionVariables.feudal_mission_cargocount &lt; 6)
			
					{	mission.runScreen({messageKey:&quot;feudal_mission_escort_fail&quot;})
						mission.unmarkSystem([missionVariables.feudal_mission_location_no])
						missionVariables.feudal_mission = &quot;NONE_SET&quot;
						missionVariables.feudal_score -= 10
						mission.setInstructionsKey(null)
					}
				
		}
	}
		

this.choiceEvaluation = function(choice)

	{
		
			if(missionVariables.feudal_mission_offer == &quot;DELIVERY_OFFER&quot;)
			 
			 
				{	if(choice == &quot;accept_mission&quot;)
					
					{this.feudalDeliveryChoice()
					missionVariables.feudal_mission_offer = null}
			
					if(choice == &quot;decline_mission&quot;)
					{missionVariables.feudal_mission = &quot;DELIVERY_DECLINED&quot;
					missionVariables.feudal_mission_offer = null}
				}
			
			if(missionVariables.feudal_mission_offer == &quot;TRIBUTE_OFFER&quot;)
			 
			 
				{	if(choice == &quot;accept_mission&quot;)
					
					{this.feudalTributeChoice()
					missionVariables.feudal_mission_offer = null}
			
					if(choice == &quot;decline_mission&quot;)
					{missionVariables.feudal_mission = &quot;TRIBUTE_DECLINED&quot;
					missionVariables.feudal_mission_offer = null}
				}
				
			if(missionVariables.feudal_mission_offer == &quot;EXECUTION_OFFER&quot;)	
			
				{ 	if(choice == &quot;accept_mission&quot;)	// acceptance for an execution mission
					{this.feudalExecutionChoice()
					missionVariables.feudal_mission_offer = null}
				
					if(choice == &quot;decline_mission&quot;)
					{missionVariables.feudal_mission = &quot;EXECUTION_DECLINED&quot;
					missionVariables.feudal_mission_offer = null
					}
				}
				
			if(missionVariables.feudal_mission_offer == &quot;RAID_OFFER&quot;)
				{	
				if(choice == &quot;accept_mission&quot;)
				
					{this.feudalRaidChoice()
					missionVariables.feudal_mission_offer = null}
						
				if(choice == &quot;decline_mission&quot;)
					{missionVariables.feudal_mission = &quot;RAID_DECLINED&quot;
					missionVariables.feudal_mission_offer = null}
				}
			
			if(missionVariables.feudal_mission_offer == &quot;ESCORT_OFFER&quot;)	
			
				{ 	if(choice == &quot;accept_mission&quot;)
					{this.feudalEscortChoice()
					missionVariables.feudal_mission_offer = null}
				
					if(choice == &quot;decline_mission&quot;)
					{missionVariables.feudal_mission = &quot;ESCORT_DECLINED&quot;
					missionVariables.feudal_mission_offer = null}
				}
				
			if(missionVariables.feudal_mission_offer == &quot;RANSOM_OFFER&quot;)	
			
				{ 	if(choice == &quot;accept_mission&quot;)
					{this.feudalRansomChoice()
					missionVariables.feudal_mission_offer = null}
				
					if(choice == &quot;decline_mission&quot;)
					{missionVariables.feudal_mission = &quot;RANSOM_DECLINED&quot;
					missionVariables.feudal_mission_offer = null}		
				}
	}

// ship appearance on launching
	
this.shipWillLaunchFromStation = function()

{if(missionVariables.feudal_mission_offer)
missionVariables.feudal_mission_offer = null}

// witchspace exit conditions

this.shipExitedWitchspace = function()
{	
			
	if(missionVariables.feudal_mission == &quot;DELIVERY_RUNNING&quot;)
	
		{	if(Math.random() &lt;= 0.25)
			system.legacy_addSystemShips(&quot;pirate&quot;, 4, 0.1)}
	
	if(missionVariables.feudal_mission == &quot;RAID_RUNNING&quot; &amp;&amp; system.ID == [missionVariables.feudal_mission_location_no])
	
		{	system.legacy_addSystemShips([missionVariables.feudal_mission_role], 3, 0.5) // populate the system with the raid target along with some knights
			system.legacy_addSystemShips([missionVariables.feudal_mission_house]+&quot;-knight&quot;, 12, 0.5)}

	if(missionVariables.feudal_mission == &quot;EXECUTION_RUNNING&quot; &amp;&amp; system.ID == [missionVariables.feudal_mission_location_no])
	
		system.legacy_addSystemShips([missionVariables.feudal_mission_role], 1, 0.8) // populate the system with the execution target
		
		
	if(missionVariables.feudal_mission == &quot;ESCORT_RUNNING&quot; &amp;&amp; system.ID == [missionVariables.feudal_mission_location_no])
		{	system.legacy_addSystemShips([missionVariables.feudal_mission_role], 3, 0.6) // populate the system with the freighter to be escorted
			system.legacy_addSystemShips([missionVariables.feudal_mission_home]+&quot;-knight&quot;, 12, 0.6) // add some knights from the home side to support the freighter
			system.legacy_addSystemShips([missionVariables.feudal_mission_house]+&quot;-knight&quot;, 7, 0.8) // add some knights from enemy side
			system.legacy_addSystemShips([missionVariables.feudal_mission_house]+&quot;-lord&quot;, 1, 0.8) // add some lords from the enemy side
		}
		
	if(missionVariables.feudal_mission == &quot;RANSOM_RUNNING&quot; &amp;&amp; system.ID == [missionVariables.feudal_mission_location_no])

		{system.legacy_addShipsAtPrecisely([missionVariables.feudal_mission_house]+&quot;-prince&quot;, 1, &quot;wsm&quot;, [0, 115000, 0])// add the ransom target
		
		}				
						
	
	if(missionVariables.feudal_mission)
	{if(missionVariables.feudal_mission.indexOf(&quot;DECLINED&quot;) &gt; 1)
	{missionVariables.feudal_mission = &quot;NONE_SET&quot;
	mission.setInstructionsKey(null)
	this.resetMissionVariables()}}
}


this.playerEnteredNewGalaxy = function()
{	missionVariables.feudal_mission = &quot;NONE_SET&quot;
	mission.setInstructionsKey(null)
	this.resetMissionVariables()
	
}

</pre></td>
                </tr>
                <tr>
                    <td valign="top">Scripts/feudal-planetfall.js</td>
                    <td><pre>this.name		= &quot;feudal-planetfall.js&quot;;
this.author		= &quot;Thargoid/Ramirez&quot;;
this.copyright		= &quot;Creative Commons: attribution, non-commercial, sharealike.&quot;;
this.description	= &quot;Locations for Feudal States&quot;;
this.version		= &quot;3.0&quot;;

this.shipWillLaunchFromStation = this.shipWillExitWitchspace = function()
	{
	if(system.government == 1)
	
		{if(galaxyNumber == 0 &amp;&amp; system.techLevel &gt;=7 || galaxyNumber == 1 &amp;&amp; system.techLevel &gt;= 5 || galaxyNumber == 2 &amp;&amp; system.techLevel &gt;= 7 || galaxyNumber == 4 &amp;&amp; system.techLevel &gt;=7 || galaxyNumber == 5 &amp;&amp; system.techLevel &gt;=8)
			{if(worldScripts.PlanetFall)
				worldScripts.PlanetFall.planetFallOverride = true; // set the override, so only external OXP locations appear
			}
		}
	}

this.shipWillEnterWitchspace = function()
	{
	if(system.government == 1)
		{if(galaxyNumber == 0 &amp;&amp; system.techLevel &gt;=7 || galaxyNumber == 1 &amp;&amp; system.techLevel &gt;= 5 || galaxyNumber == 2 &amp;&amp; system.techLevel &gt;= 7 || galaxyNumber == 4 &amp;&amp; system.techLevel &gt;=7 || galaxyNumber == 5 &amp;&amp; system.techLevel &gt;=8)
			{if(worldScripts.PlanetFall) 
				worldScripts.PlanetFall.planetFallOverride = false; // set things back to normal
		}
	}
}
</pre></td>
                </tr>
                <tr>
                    <td valign="top">Scripts/feudal-promotion.js</td>
                    <td><pre>this.name = &quot;feudal-promotion.js&quot;;
this.author = &quot;Ramirez&quot;;
this.copyright = &quot;October 2012&quot;;
this.description = &quot;World script for handling a player&#39;s feudal rank and promotions&quot;;
this.version = &quot;6.0&quot;;


// Event handlers

this.shipDockedWithStation = function()

{	
	this.missionScreens()
}


this.guiScreenChanged = function()

{	if(guiScreen == &quot;GUI_SCREEN_MISSION&quot;)  
	this.missionScreens()
}

// Mission Screens	

this.missionScreens = function()
{

if(guiScreen == &quot;GUI_SCREEN_MISSION&quot; || !player.ship.docked) return;

if(player.ship.dockedStation.hasRole(&quot;planetFall_feudalStates&quot;))
{				
			

if(missionVariables.feudal_promotion_jumpcount == null)

{	if(!missionVariables.feudal_player_rank_no &amp;&amp; missionVariables.feudal_score &gt; 4)		
	{	
		mission.runScreen({messageKey: &quot;feudal_knight_promotion&quot;, background: &quot;redeagle.png&quot;, choicesKey: &quot;feudal_rank_choices&quot;}, this.choiceEvaluation)
		missionVariables.feudal_promotion_offer = &quot;KNIGHT_OFFERED&quot;}
	
	
	if(missionVariables.feudal_mission_home_galaxy !== galaxyNumber &amp;&amp; missionVariables.feudal_player_rank_no &gt;= 1)
	{
		mission.runScreen({messageKey: &quot;feudal_promotion_transfer&quot;, background: &quot;redeagle.png&quot;, choicesKey: &quot;feudal_transfer_choices&quot;}, this.choiceEvaluation)
		missionVariables.feudal_promotion_offer = &quot;TRANSFER_OFFERED&quot;}

}

if(missionVariables.feudal_player_rank_no == 1 &amp;&amp; missionVariables.feudal_score &gt; 39)

		{
		++missionVariables.feudal_player_rank_no
		this.defineGeneratorInputs()
		player.feudalRankGenerator()
		this.defineGeneratorOutputs()
		missionVariables.feudal_promotion_date = clock.clockString
		mission.runScreen({messageKey: &quot;feudal_baron_promotion&quot;, background: &quot;redeagle.png&quot;})
		mission.setInstructionsKey(&quot;feudal_rank_details&quot;)
		missionVariables.feudal_promotion_jumpcount = null
		}
		
if(missionVariables.feudal_player_rank_no == 2 &amp;&amp; missionVariables.feudal_score &gt; 99)

		{
		++missionVariables.feudal_player_rank_no
		this.defineGeneratorInputs()
		player.feudalRankGenerator()
		this.defineGeneratorOutputs()
		missionVariables.feudal_promotion_date = clock.clockString
		mission.runScreen({messageKey: &quot;feudal_further_promotion&quot;, background: &quot;redeagle.png&quot;})
		mission.setInstructionsKey(&quot;feudal_rank_details&quot;)
		missionVariables.feudal_promotion_jumpcount = null
		}
		
if(missionVariables.feudal_player_rank_no == 3 &amp;&amp; missionVariables.feudal_score &gt; 179)

		{
		++missionVariables.feudal_player_rank_no
		this.defineGeneratorInputs()
		player.feudalRankGenerator()
		this.defineGeneratorOutputs()
		missionVariables.feudal_promotion_date = clock.clockString
		mission.runScreen({messageKey: &quot;feudal_further_promotion&quot;, background: &quot;redeagle.png&quot;})
		mission.setInstructionsKey(&quot;feudal_rank_details&quot;)
		missionVariables.feudal_promotion_jumpcount = null
		}
		
if(missionVariables.feudal_player_rank_no == 4 &amp;&amp; missionVariables.feudal_score &gt; 279)
		{
		++missionVariables.feudal_player_rank_no
		this.defineGeneratorInputs()
		player.feudalRankGenerator()
		this.defineGeneratorOutputs()
		missionVariables.feudal_promotion_date = clock.clockString
		mission.runScreen({messageKey: &quot;feudal_further_promotion&quot;, background: &quot;redeagle.png&quot;})
		mission.setInstructionsKey(&quot;feudal_rank_details&quot;)
		missionVariables.feudal_promotion_jumpcount = null
		}	
		
		
if(missionVariables.feudal_player_rank_no == 5 &amp;&amp; missionVariables.feudal_score &gt; 399)
		{
		++missionVariables.feudal_player_rank_no
		this.defineGeneratorInputs()
		player.feudalRankGenerator()
		this.defineGeneratorOutputs()
		missionVariables.feudal_promotion_date = clock.clockString
		mission.runScreen({messageKey: &quot;feudal_duke_promotion&quot;, background: &quot;redeagle.png&quot;})
		mission.setInstructionsKey(&quot;feudal_rank_details&quot;)
		missionVariables.feudal_promotion_jumpcount = null
		}	
}
}
// Choice evaluations

this.choiceEvaluation = function(choice)
	{
		if(missionVariables.feudal_promotion_offer == &quot;KNIGHT_OFFERED&quot;)
			
				
			{	if(choice == &quot;accept_rank_male&quot;)	
						{		
							missionVariables.feudal_promotion_offer = null
							missionVariables.feudal_mission_home = system.name
							missionVariables.feudal_mission_home_galaxy = galaxyNumber
							missionVariables.feudal_player_rank_no = 1
							missionVariables.feudal_player_rank = &quot;Knight&quot;
							missionVariables.feudal_player_title = &quot;Sir&quot;
							missionVariables.feudal_player_title_peer = &quot;Lord&quot;
							missionVariables.feudal_player_of = &quot;of&quot;
							missionVariables.feudal_player_gender = &quot;he&quot;
							mission.runScreen({messageKey: &quot;feudal_promotion_knightaccept&quot;, background: &quot;redeagle.png&quot;})
							mission.setInstructionsKey(&quot;feudal_rank_details&quot;)
							missionVariables.feudal_tournament_jumpcount = 0
							}
				if(choice == &quot;accept_rank_female&quot;)
						{	missionVariables.feudal_promotion_offer = null
							missionVariables.feudal_mission_home = system.name
							missionVariables.feudal_mission_home_galaxy = galaxyNumber
							missionVariables.feudal_player_rank_no = 1
							missionVariables.feudal_player_title = &quot;Lady&quot;
							missionVariables.feudal_player_title_peer = &quot;Lady&quot;
							missionVariables.feudal_player_rank = &quot;Knight&quot;
							missionVariables.feudal_player_of = &quot;of&quot;
							missionVariables.feudal_player_gender = &quot;she&quot;
							mission.runScreen({messageKey: &quot;feudal_promotion_knightaccept&quot;, background: &quot;redeagle.png&quot;})
							mission.setInstructionsKey(&quot;feudal_rank_details&quot;)
							missionVariables.feudal_tournament_jumpcount = 0
						}	
				if(choice == &quot;decline_rank&quot;)
						{	missionVariables.feudal_promotion_offer = null
							mission.runScreen({messageKey: &quot;feudal_promotion_knightdecline&quot;, background: &quot;redeagle.png&quot;})
							}	
			}
		
		if(missionVariables.feudal_promotion_offer == &quot;TRANSFER_OFFERED&quot;)
		
				if(choice == &quot;accept_transfer&quot;)	
						{		
							
							missionVariables.feudal_promotion_offer = null
							missionVariables.feudal_mission_home = system.name
							missionVariables.feudal_mission_home_galaxy = galaxyNumber
							
							if(missionVariables.feudal_player_rank_no == 1)
							{	
								mission.runScreen({messageKey: &quot;feudal_accept_knight_transfer&quot;, background: &quot;redeagle.png&quot;})
								mission.setInstructionsKey(&quot;feudal_rank_details&quot;)	
							}
							
							if(missionVariables.feudal_player_rank_no &gt; 1)
							{
								this.defineGeneratorInputs()
								player.feudalRankGenerator()
								this.defineGeneratorOutputs()
								mission.runScreen({messageKey: &quot;feudal_accept_transfer&quot;, background: &quot;redeagle.png&quot;})
							}
							
							mission.setInstructionsKey(&quot;feudal_rank_details&quot;)
							missionVariables.feudal_tournament_jumpcount = null
						}
				if(choice == &quot;decline_transfer&quot;)	
						{	missionVariables.feudal_promotion_offer = null
							mission.runScreen({messageKey: &quot;feudal_promotion_knightdecline&quot;, background: &quot;redeagle.png&quot;})		
							missionVariables.feudal_promotion_jumpcount = 0}	
		
	}
		
// Supporting functions

this.defineGeneratorInputs = function()
{
	player.rankGenerator_gender = missionVariables.feudal_player_gender
	player.rankGenerator_house = missionVariables.feudal_mission_home
	player.rankGenerator_level = missionVariables.feudal_player_rank_no
}

this.defineGeneratorOutputs = function()
{	
	missionVariables.feudal_player_of = player.rankGenerator_of
	missionVariables.feudal_player_rank = player.rankGenerator_feudal_specific_rank	
}


	
this.shipWillExitWitchspace = function()
{	
	if(missionVariables.feudal_promotion_jumpcount != null)
	missionVariables.feudal_promotion_jumpcount = null
}
</pre></td>
                </tr>
                <tr>
                    <td valign="top">Scripts/feudal-ranks.js</td>
                    <td><pre>this.name = &quot;feudal-ranks.js&quot;;
this.author = &quot;Ramirez&quot;;
this.copyright = &quot;March 2013&quot;;
this.description = &quot;Script used to generate ranks and names for feudal characters&quot;;
this.version = &quot;5.0&quot;;

player.feudalRankGenerator = this.feudalRankGenerator = function()

{
    
    if(player.rankGenerator_house == &quot;Geinona&quot; || player.rankGenerator_house == &quot;Bedierat&quot; || player.rankGenerator_house == &quot;Qurexein&quot; || player.rankGenerator_house == &quot;Sogeve&quot;)
    {var rankGenerator_language = &quot;spanish&quot;
    player.rankGenerator_of = &quot;de&quot;}
    
    if(player.rankGenerator_house == &quot;Oreseren&quot; || player.rankGenerator_house == &quot;Aronar&quot; ||
       player.rankGenerator_house == &quot;Arries&quot; || player.rankGenerator_house == &quot;Orverace&quot; || player.rankGenerator_house == &quot;Ismaan&quot; || player.rankGenerator_house == &quot;Ansois&quot;
       || player.rankGenerator_house == &quot;Atlaar&quot;)
    {var rankGenerator_language = &quot;dutch&quot;
    player.rankGenerator_of = &quot;van&quot;}
    
    if(player.rankGenerator_house == &quot;Digebiti&quot; || player.rankGenerator_house == &quot;Edzaon&quot;
       || player.rankGenerator_house == &quot;Usedge&quot; || player.rankGenerator_house == &quot;Israra&quot; || player.rankGenerator_house == &quot;Esceso&quot; ||
       player.rankGenerator_house == &quot;Dirateri&quot; ||
       player.rankGenerator_house == &quot;Onarmala&quot; || player.rankGenerator_house == &quot;Usteer&quot;)
    {var rankGenerator_language = &quot;english&quot;
    player.rankGenerator_of = &quot;of&quot;}

    if(player.rankGenerator_house == &quot;Esredice&quot; || player.rankGenerator_house == &quot;Ededleen&quot; || player.rankGenerator_house == &quot;Reenus&quot; ||
       player.rankGenerator_house == &quot;Oneded&quot; || player.rankGenerator_house == &quot;Gexean&quot; || player.rankGenerator_house == &quot;Erinain&quot; || player.rankGenerator_house == &quot;Enbirare&quot;)
    {var rankGenerator_language = &quot;german&quot;
    player.rankGenerator_of = &quot;von&quot;}
    
    if(player.rankGenerator_house == &quot;Gelaed&quot; || player.rankGenerator_house == &quot;Ridivexe&quot; || player.rankGenerator_house == &quot;Maedrebe&quot; || player.rankGenerator_house == &quot;Ceorat&quot;
       || player.rankGenerator_house == &quot;Biarandi&quot;)
    {var rankGenerator_language = &quot;french&quot;
    player.rankGenerator_of = &quot;de&quot;}

    if(player.rankGenerator_house == &quot;Onusorle&quot; || player.rankGenerator_house == &quot;Tibedied&quot; || player.rankGenerator_house == &quot;Issoinen&quot; || player.rankGenerator_house == &quot;Erlaened&quot; ||
       player.rankGenerator_house == &quot;Atlaeser&quot; || player.rankGenerator_house == &quot;Onorti&quot; || player.rankGenerator_house == &quot;Resoisbe&quot;)
    {var rankGenerator_language = &quot;swedish&quot;
    player.rankGenerator_of = &quot;af&quot;}
    
    if(player.rankGenerator_house == &quot;Tibecea&quot; || player.rankGenerator_house == &quot;Tiso&quot; || player.rankGenerator_house == &quot;Rabiarce&quot; || player.rankGenerator_house == &quot;Teususdi&quot; || player.rankGenerator_house == &quot;Diqudi&quot;)
    {var rankGenerator_language = &quot;italian&quot;
    player.rankGenerator_of = &quot;di&quot;}
    
    if(galaxyNumber == 4)
    {var rankGenerator_language = &quot;russian&quot;
    player.rankGenerator_of = &quot;of&quot;}
    
  if(galaxyNumber == 5)
    {var rankGenerator_language = &quot;japanese&quot;
    player.rankGenerator_of = &quot;of&quot;}
    
       
    player.rankGenerator_feudal_middle_rank = expandDescription(&quot;[feudal_middle_&quot;+[rankGenerator_language]+&quot;_&quot;+[player.rankGenerator_gender]+&quot;_rank]&quot;); 
    player.rankGenerator_feudal_high_rank = expandDescription(&quot;[feudal_high_&quot;+[rankGenerator_language]+&quot;_&quot;+[player.rankGenerator_gender]+&quot;_rank]&quot;);    
    
    
    if(player.rankGenerator_level)
    {player.rankGenerator_feudal_specific_rank = expandDescription(&quot;[feudal_level&quot;+[player.rankGenerator_level]+&quot;_&quot;+[rankGenerator_language]+&quot;_&quot;+[player.rankGenerator_gender]+&quot;_rank]&quot;);}
     
    player.rankGenerator_feudal_firstname = expandDescription(&quot;[feudal_firstname_&quot;+[rankGenerator_language]+&quot;_&quot;+[player.rankGenerator_gender]+&quot;]&quot;);
    
    if(rankGenerator_language == &quot;russian&quot; &amp;&amp; player.rankGenerator_gender == &quot;she&quot;)
    player.rankGenerator_feudal_lastname = expandDescription(&quot;[feudal_lastname_&quot;+[rankGenerator_language]+&quot;]&quot;)+&quot;a&quot;;
   
    else
    player.rankGenerator_feudal_lastname = expandDescription(&quot;[feudal_lastname_&quot;+[rankGenerator_language]+&quot;]&quot;);
}




</pre></td>
                </tr>
                <tr>
                    <td valign="top">Scripts/feudal-target.js</td>
                    <td><pre>this.name = &quot;feudal-target.js&quot;;
this.author = &quot;Ramirez&quot;;
this.copyright = &quot;March 2013&quot;;
this.description = &quot;Ship script for targets of feudal missions and challenges; checks roles, sets IDs, AIs and death actions as appropriate&quot;;
this.version = &quot;1.6&quot;;


this.zeroEscorts = function()
{ 


if(this.ship.escorts.length &gt; 0)
   {   
	  this.ship.escorts[0].remove();
	  //log(&#39;escort removed&#39;)
   }
   
if(this.ship.escorts.length == 0)
   {this.zETimer.stop()
   //log(&#39;timer stopped&#39;)
}
} 

this.shipSpawned = function ()// set up IDs and AIs for targets
{

	if(missionVariables.feudal_mission == &quot;NONE_SET&quot;)
 		{this.zETimer = new Timer(this,this.zeroEscorts,null,0.2);} 

      if(missionVariables.feudal_mission == &quot;EXECUTION_RUNNING&quot; &amp;&amp; this.ship.primaryRole == [missionVariables.feudal_mission_role])
	
		{	if(this.ship.displayName == this.ship.name)
			this.ship.displayName = expandDescription(&quot;[mission_feudal_mission_level1_title] [mission_feudal_mission_firstname] [mission_feudal_mission_lastname]&quot;) // Show the ID of the execution target
		}
			//also in future set an AI specific to the EXECUTION mission
		
	if(missionVariables.feudal_mission == &quot;RANSOM_RUNNING&quot;)
	
         {	if(this.ship.primaryRole == [missionVariables.feudal_mission_house]+&quot;-prince&quot;)
			{
			   {this.zETimer = new Timer(this,this.zeroEscorts,null,0.2);} 
					
			   if(this.ship.displayName == this.ship.name)
				  {this.ship.displayName = expandDescription(&quot;[mission_feudal_mission_rank] [mission_feudal_mission_of] [mission_feudal_mission_house]&quot;)}
			   }
                                
            if(this.ship.primaryRole == [missionVariables.feudal_mission_house]+&quot;-knight&quot;)
                  { this.ship.switchAI(&quot;feudal-escortAI.plist&quot;) }
               }

	if(missionVariables.feudal_mission == &quot;RAID_RUNNING&quot;)
	
	  {  if(this.ship.primaryRole == missionVariables.feudal_mission_role) 
			{
			   this.zETimer = new Timer(this,this.zeroEscorts,null,0.2)
                
			   if(this.ship.displayName == this.ship.name) 
						{   this.ship.displayName = expandDescription(&quot;[mission_feudal_mission_house] [mission_feudal_mission_commodity] convoy&quot;)} // Show the ID of the raid target 			    
                        }
                  if(this.ship.primaryRole == [missionVariables.feudal_mission_house]+&quot;-knight&quot;)
				  {this.ship.switchAI(&quot;feudal-escortAI.plist&quot;)}
	  }
	
	 if(missionVariables.feudal_mission == &quot;ESCORT_RUNNING&quot;)
	
		{	if(this.ship.primaryRole == missionVariables.feudal_mission_role)
				{
					{this.zETimer=new Timer(this,this.zeroEscorts,null,0.2);} 
					
					if(this.ship.displayName == this.ship.name)
						{	this.ship.displayName = expandDescription(&quot;[mission_feudal_mission_home] [mission_feudal_mission_commodity] convoy&quot;)} // Show the ID of the freighter to be escorted			
				}	
	
		
			if(this.ship.primaryRole == [missionVariables.feudal_mission_home]+&quot;-knight&quot;) // home knights to protect escort
			{     this.ship.switchAI(&quot;feudal-escortAI.plist&quot;)
                     if(this.ship.displayName == this.ship.name)
						{	this.ship.displayName = expandDescription(&quot;[mission_feudal_mission_home] Knight (friendly)&quot;) // Show the ID of the friendly knight	
						}
                        }
                       		
			if(this.ship.primaryRole == [missionVariables.feudal_mission_house]+&quot;-knight&quot;) // enemy knights to find and attack escort
			{     this.ship.switchAI(&quot;feudal-raidAI.plist&quot;)
                        
                     if(this.ship.displayName == this.ship.name)
						{	this.ship.displayName = expandDescription(&quot;[mission_feudal_mission_house] Knight (enemy)&quot;)} // Show the ID of the enemy knight			
            }
					
			
			if(this.ship.primaryRole == [missionVariables.feudal_mission_house]+&quot;-lord&quot;) // enemy lords to attack escort
			{     this.ship.switchAI(&quot;feudal-raidAI.plist&quot;)
                  if(this.ship.displayName == this.ship.name)
						{	this.ship.displayName = expandDescription(&quot;[mission_feudal_mission_house] Lord (enemy)&quot;)} // Show the ID of the enemy lord		
            }
				
		}
         
         if(missionVariables.feudal_challenger == &quot;RUNNING&quot; &amp;&amp; this.ship.primaryRole == [missionVariables.feudal_challenger_role])
	
		 {	if(this.ship.displayName == this.ship.name)
			
            {this.ship.awardEquipment(&quot;EQ_MISSILE_REMOVAL&quot;)
			this.zETimer=new Timer(this,this.zeroEscorts,null,0.2);

            if(missionVariables.feudal_challenger_rank_no == 1)
               {this.ship.switchAI(&quot;feudal-challenger1AI.plist&quot;)
               this.ship.displayName = expandDescription(&quot;[mission_feudal_challenger_title] [mission_feudal_challenger_firstname] [mission_feudal_challenger_lastname]&quot;)}         
               else
               {this.ship.displayName = expandDescription(&quot;[mission_feudal_challenger_rank] [mission_feudal_challenger_of] [mission_feudal_challenger_house]&quot;)
			   this.ship.switchAI(&quot;feudal-challenger2AI.plist&quot;)}
            }     
         }
                
         if(missionVariables.feudal_tournament == &quot;EVENT3_RUNNING&quot;)
         
         {if(this.ship.primaryRole == &quot;feudal-knight&quot; || &quot;feudal-lord&quot; || &quot;feudal-prince&quot;)
             {this.ship.switchAI(&quot;feudal-quartetAI.plist&quot;)
             this.ship.fuel = 0	  
             {this.zETimer = new Timer(this,this.zeroEscorts,null,0.2);}       
             }
           if(this.ship.primaryRole == &quot;feudal-drone&quot;)
             this.ship.switchAI(&quot;pirateAI.plist&quot;)
         }
           if(missionVariables.feudal_tournament == &quot;EVENT5_RUNNING&quot;)
         {   this.ship.switchAI(&quot;feudal-meleeAI.plist&quot;)
		     {this.zETimer=new Timer(this,this.zeroEscorts,null,0.2);}
             }        
         
         if(missionVariables.feudal_tournament == &quot;EVENT6_RUNNING&quot;)
         {  this.ship.switchAI(&quot;feudal-challenger2AI.plist&quot;)
			{this.zETimer=new Timer(this,this.zeroEscorts,null,0.2);}
            this.ship.fuel = 100
            this.ship.displayName = expandDescription(&quot;[mission_feudal_tournament_opponent_text]&quot;)
         }        
}

this.shipDied = function(whom)

{      
         
               if(missionVariables.feudal_tournament == &quot;EVENT1_RUNNING&quot;) 
               {if(this.ship.primaryRole == &quot;feudal-shield&quot;)
               {var buoy = system.shipsWithRole(&quot;feudal-buoy&quot;)[0]
               this.ship.target = buoy
               this.ship.target.switchAI(&quot;feudal-buoy-checkAI.plist&quot;)}
               }         
         
               if(missionVariables.feudal_tournament == &quot;EVENT2_RUNNING&quot;)
               {++missionVariables.feudal_tournament_kills
               player.commsMessage(&quot;Stage &quot;+ [missionVariables.feudal_tournament_kills]+&quot; destroyed.&quot;)
            
               {  if (this.ship.primaryRole == &quot;feudal-drone-1&quot;)
                        this.ship.spawn(&quot;feudal-drone-2&quot;, 1)
               
                  if (this.ship.primaryRole == &quot;feudal-drone-2&quot;)
                        this.ship.spawn(&quot;feudal-drone-3&quot;, 1)

                  if (this.ship.primaryRole == &quot;feudal-drone-3&quot;)
                        this.ship.spawn(&quot;feudal-drone-4&quot;, 1)

                  if (this.ship.primaryRole == &quot;feudal-drone-4&quot;)
                        this.ship.spawn(&quot;feudal-drone-5&quot;, 1)
               }
               }
               
               if(missionVariables.feudal_tournament == &quot;EVENT4_RUNNING&quot;)
                     if(this.ship.primaryRole == &quot;feudal-shield-pod&quot;)
                     this.ship.spawn(&quot;feudal-small-shield&quot;, 1)   
               
               if(missionVariables.feudal_tournament == &quot;EVENT5_RUNNING&quot;)
               {               
                  if(this.ship.AI == &quot;feudal-meleeAI.plist&quot;)
                  {--missionVariables.feudal_tournament_ships
               
                     if(missionVariables.feudal_tournament_ships &gt; 2)
                       player.commsMessage(this.ship.name+&quot; destroyed. &quot;+missionVariables.feudal_tournament_ships+&quot; competitors remaining.&quot;)
               
                     else   
                  
                  {var buoy = system.shipsWithRole(&quot;feudal-buoy&quot;)[0]
                  this.ship.target = buoy
                  this.ship.target.switchAI(&quot;feudal-buoy-logAI.plist&quot;)
                  player.commsMessage(this.ship.name+&quot; destroyed. Two competitors remaining.  Please return to the Hunting Lodge&quot;)
                  }
                  
               } 
               }
               
               if(missionVariables.feudal_tournament == &quot;EVENT6_RUNNING&quot;)
               ++missionVariables.feudal_tournament_kills
              
               if(missionVariables.feudal_mission == &quot;EXECUTION_RUNNING&quot; &amp;&amp; this.ship.primaryRole == [missionVariables.feudal_mission_role])
			   {  if(whom == player.ship)
				  	missionVariables.feudal_mission = &quot;EXECUTION_SUCCESS&quot; // set the mission variable to success
				  	else
				   	missionVariables.feudal_mission = &quot;EXECUTION_PARTIAL&quot; // have a partial success where the player is awarded fewer points
			   }

		 if(missionVariables.feudal_mission == &quot;RAID_RUNNING&quot; || missionVariables.feudal_mission == &quot;RAID_SUCCESS&quot;)
		 
		 {
		if(this.ship.primaryRole == missionVariables.feudal_mission_role)	// if it&#39;s a raid, get the target ship to spawn some of the selected commodity
		{this.ship.spawn(&quot;feudal-cargo&quot;, 6)
		missionVariables.feudal_mission = &quot;RAID_SUCCESS&quot;
		mission.setInstructionsKey(&quot;feudal_mission_raid_return&quot;, &quot;feudal-mission.js&quot;)}
		 }

		if(missionVariables.feudal_mission == &quot;RANSOM_RUNNING&quot; &amp;&amp; this.ship.primaryRole == [missionVariables.feudal_mission_house]+&quot;-prince&quot;)
	
                  {this.ship.spawn(&quot;feudal-escape-pod&quot;, 1)}
		
	       if(missionVariables.feudal_mission == &quot;ESCORT_RUNNING&quot; &amp;&amp; this.ship.primaryRole == missionVariables.feudal_mission_role)	// if it&#39;s an escort mission, get the target ship to spawn some of the selected commodity
		{this.ship.spawn(&quot;feudal-cargo&quot;, 6)
		missionVariables.feudal_mission = &quot;ESCORT_FAIL&quot;
		player.commsMessage(&quot;One of the freighters has been destroyed!&quot;, 6)}
		
	       if(missionVariables.feudal_mission == &quot;ESCORT_RUNNING&quot; &amp;&amp; this.ship.primaryRole == [missionVariables.feudal_mission_house]+&quot;-knight&quot;)
                missionVariables.feudal_mission_killcount += 1
                
               if(missionVariables.feudal_mission == &quot;ESCORT_RUNNING&quot; &amp;&amp; missionVariables.feudal_mission_killcount == 10)
               {missionVariables.feudal_mission = &quot;ESCORT_SUCCESS&quot;
               player.commsMessage(&quot;The enemy knights have been destroyed.  We can take it from here.&quot;)}
               
               if(missionVariables.feudal_challenger == &quot;VICTORY&quot;)
               {this.ship.spawn(&quot;feudal-escape-pod&quot;, 1)
               missionVariables.feudal_challenger = &quot;FORFEIT&quot;}
               
                if(missionVariables.feudal_challenger == &quot;RUNNING&quot;)
               {this.ship.spawn(&quot;feudal-escape-pod&quot;, 1)
               missionVariables.feudal_challenger = &quot;VICTORY&quot;}
		
		//award player points if they shoot enemy ships at any time during a mission
		
	       	if(whom == player.ship)
		
			{	if(this.ship.primaryRole == [missionVariables.feudal_mission_house]+&quot;-knight&quot;)
					{missionVariables.feudal_score += 1}

				if(this.ship.primaryRole == [missionVariables.feudal_mission_house]+&quot;-lord&quot;)
					missionVariables.feudal_score += 5
				
				if(this.ship.primaryRole == [missionVariables.feudal_mission_house]+&quot;-prince&quot;)
					{missionVariables.feudal_score += 20}
			}
               }
                

this.shipBeingAttacked = function()

{  if(missionVariables.feudal_tournament == &quot;EVENT5_RUNNING&quot;)
      {if(this.ship.energy &gt; 1000)
      this.ship.energy = 500}
}

this.shipEnteredStationAegis = function(station)

	{	if(missionVariables.feudal_mission == &quot;ESCORT_RUNNING&quot; &amp;&amp; this.ship.primaryRole == missionVariables.feudal_mission_role)

		{	missionVariables.feudal_mission = &quot;ESCORT_SUCCESS&quot;
			this.ship.commsMessage(&quot;Thanks, Commander.  We&#39;ve made it to the station in one piece.  We can take it from here.&quot;, 6) 
		}
		  if((missionVariables.feudal_mission == &quot;ESCORT_RUNNING&quot; || missionVariables.feudal_mission == &quot;ESCORT_SUCCESS&quot;) &amp;&amp; this.ship.primaryRole == [missionVariables.feudal_mission_house]+&quot;-knight&quot;)  
	       {	this.ship.commsMessage(&quot;Let&#39;s get out of here!&quot;, 6) 
			//log(&#39;knight entering aegis&#39;)
			this.ship.switchAI(&quot;route1traderAI.plist&quot;)
	       }
	}
        
this.shipEnergyIsLow = function()
   {   if(missionVariables.feudal_challenger == &quot;RUNNING&quot; &amp;&amp; this.ship.primaryRole == [missionVariables.feudal_challenger_role])
	{this.ship.spawn(&quot;feudal-flare&quot;, 1);
      this.ship.commsMessage(expandDescription(&quot;[feudal-yield]&quot;))
      this.ship.switchAI(&quot;feudal-challengerhomeAI.plist&quot;)
      missionVariables.feudal_challenger = &quot;VICTORY&quot;}
      
      if(missionVariables.feudal_tournament == &quot;EVENT5_RUNNING&quot;)
         {
            if(this.ship.AI == &quot;feudal-meleeAI.plist&quot;)
            {if(Math.random() &lt; 0.25)
            {this.ship.switchAI(&quot;feudal-challengerhomeAI.plist&quot;)
            --missionVariables.feudal_tournament_ships
            
            if(missionVariables.feudal_tournament_ships &gt; 2)
                  {player.commsMessage(this.ship.name+&quot; surrendered. &quot;+missionVariables.feudal_tournament_ships+&quot; competitors remaining.&quot;)
                  this.ship.displayName = this.ship.name+&quot; (Surrendered)&quot;}
               
               else   
                  
                  {var buoy = system.shipsWithRole(&quot;feudal-buoy&quot;)[0]
                  this.ship.target = buoy
                  this.ship.target.switchAI(&quot;feudal-buoy-logAI.plist&quot;)
                  this.ship.displayName = this.ship.name+&quot; (Surrendered)&quot;
                  player.commsMessage(this.ship.name+&quot; surrended. Two competitors remaining.  Please return to the Hunting Lodge&quot;)
                  }
            }
      }}
   }      
this.shipTargetLost = function()
   {    if(missionVariables.feudal_challenger == &quot;RUNNING&quot;)
         this.ship.switchAI(&quot;feudal-challengerhomeAI.plist&quot;)}

this.checkDistance = function()
{if(player.ship.position.distanceTo(this.ship) &lt; 5000)
   {this.ship.target = player.ship;
   this.ship.reactToAIMessage(&quot;FOUND_PLAYER&quot;)}
   }

this.shipWasScooped = function (whom)
   { if(this.ship.primaryRole == &quot;feudal-drone&quot; &amp;&amp; whom == player.ship )
		
         {  if(missionVariables.feudal_tournament == &quot;EVENT3_RUNNING&quot;)
                {++missionVariables.feudal_tournament_scoops
                player.commsMessage(&quot;Target drone collected.  Return to the Hunting Lodge.&quot;)}                     
         }         
      if(this.ship.primaryRole == &quot;feudal-small-shield&quot; &amp;&amp; whom == player.ship )         
         
         {if(missionVariables.feudal_tournament == &quot;EVENT4_RUNNING&quot;)
                {++missionVariables.feudal_tournament_scoops
                player.commsMessage(&quot;Score: &quot; + [missionVariables.feudal_tournament_scoops] + &quot; out of 10&quot;)}                     
                }         
         }
                
            
   
</pre></td>
                </tr>
                <tr>
                    <td valign="top">Scripts/feudal-tournament.js</td>
                    <td><pre>this.name = &quot;feudal-tournament.js&quot;;
this.author = &quot;Ramirez&quot;;
this.copyright = &quot;October 2012&quot;;
this.description = &quot;World script for setting up feudal tournaments&quot;;
this.version = &quot;10.0&quot;;

// Event handlers

this.shipDockedWithStation = function()

{	
	this.missionScreens()
}

this.missionScreenEnded = function()
{
	if(!player.ship.docked) return;
			
}

this.guiScreenChanged = function()

{	if(guiScreen == &quot;GUI_SCREEN_MARKET&quot;)
	this.missionScreens()
}

this.defineTournamentHome = function()
{missionVariables.feudal_tournament_home = expandDescription(&quot;[feudal_house_&quot;+[galaxyNumber]+&quot;]&quot;)}

this.checkPlayerShip = function()
{
	this.playerSubentities = player.ship.subEntities
	this.playerSubentitiesString = playerSubentities.toString();
	if(playerSubentitiesString.indexOf(&quot;turret&quot;) != -1)
	missionVariables.feudal_tournament_eligible = &quot;FALSE&quot;
}


// Mission screens

this.missionScreens = function()

    {   if(guiScreen == &quot;GUI_SCREEN_MISSION&quot; || !player.ship.docked) return;
	
	if(!missionVariables.feudal_tournament_offer &amp;&amp; !missionVariables.feudal_tournament)
	{
		if(galaxyNumber &lt;= 2 || galaxyNumber == 4 || galaxyNumber == 5)
			{if(missionVariables.feudal_tournament_jumpcount &gt; 50)
		
		
			{	this.defineTournamentHome()
				mission.runScreen({title: &quot;Incoming Message&quot;, messageKey: &quot;feudal_tournament_announcement&quot;, background: &quot;redeagle.png&quot;})
				missionVariables.feudal_tournament_offer = &quot;TOURNAMENT_OPEN&quot;
				mission.setInstructionsKey(&quot;feudal_tournament_location&quot;)
				missionVariables.feudal_tournament_deadline = clock.days + 30}
			}
	}
	
	if(missionVariables.feudal_tournament_offer == &quot;TOURNAMENT_OPEN&quot;)
	{
		if(missionVariables.feudal_tournament_deadline)
		
		{	if(clock.days &gt; missionVariables.feudal_tournament_deadline)
		
			{	this.defineTournamentGender()
				this.defineTournamentOpponentHouse()
				missionVariables.feudal_tournament_opponent_rank_no = Math.floor(Math.random()*2 + 1)
				this.defineTournamentInputs()
				player.feudalRankGenerator()
				this.defineTournamentOutputs()
				mission.runScreen({title: &quot;Incoming Message&quot;, messageKey: &quot;feudal_tournament_winner&quot;, background: &quot;redeagle.png&quot;})
				this.resetTournament()
				mission.setInstructionsKey(null)
				missionVariables.feudal_tournament_deadline = null
			}
	}
	}
	
	if(player.ship.dockedStation.hasRole(&quot;feudal-hunting-lodge&quot;) &amp;&amp; missionVariables.feudal_tournament_home == system.name)
		{	
		if(guiScreen == &quot;GUI_SCREEN_MARKET&quot;)		 
		{
			if(missionVariables.feudal_tournament_offer == &quot;TOURNAMENT_OPEN&quot;)	
				{
				this.checkPlayerShip()
				
				if(missionVariables.feudal_tournament_eligible == &quot;FALSE&quot;)
				{mission.runScreen({title: &quot;Royal Hunting Lodge&quot;, messageKey: &quot;feudal_tournament_ineligible&quot;});}
				
				if(!missionVariables.feudal_tournament_eligible)
				{mission.runScreen({title: &quot;Royal Hunting Lodge&quot;, messageKey: &quot;feudal_tournament_offer&quot;, background: &quot;redeagle.png&quot;, music: &quot;feudal_music.ogg&quot;, choicesKey: &quot;feudal_tournament_choices&quot;}, this.choiceEvaluation)	
				missionVariables.feudal_tournament_offer = &quot;TOURNAMENT_OFFERED&quot;}
				
				}
			
			if(missionVariables.feudal_tournament_offer == &quot;EVENT_BRIEFING&quot;)
				{
				mission.runScreen({title: &quot;Royal Hunting Lodge&quot;, messageKey: &quot;feudal_tournament_&quot;+[missionVariables.feudal_tournament], choicesKey: &quot;feudal_tournament_event_choices&quot;}, this.choiceEvaluation)
				mission.setInstructionsKey(&quot;feudal_tournament_&quot;+[missionVariables.feudal_tournament]+&quot;_briefing&quot;)}		
		
			if(missionVariables.feudal_tournament_offer == &quot;EVENT_DECLINED&quot;)
				{		
				mission.runScreen({title: &quot;Royal Hunting Lodge&quot;, messageKey: &quot;feudal_tournament_&quot;+[missionVariables.feudal_tournament], choicesKey: &quot;feudal_tournament_event_choices&quot;}, this.choiceEvaluation)
				missionVariables.feudal_tournament_offer = &quot;EVENT_BRIEFING&quot;
				mission.setInstructionsKey(&quot;feudal_tournament_&quot;+[missionVariables.feudal_tournament]+&quot;_briefing&quot;)}
		}
		if(missionVariables.feudal_tournament == &quot;EVENT1_RUNNING&quot;)
		{	
			
			if(missionVariables.feudal_tournament_kills &gt;= 8)
				
			{
				mission.runScreen({title: &quot;Royal Hunting Lodge&quot;, messageKey: &quot;feudal_tournament_EVENT1_PASSED&quot;})
				missionVariables.feudal_tournament = &quot;EVENT2&quot;
				missionVariables.feudal_tournament_offer = &quot;EVENT_BRIEFING&quot;
				missionVariables.feudal_tournament_kills = null
				this.restoreMissiles()
			}
			
			else
			{	mission.runScreen({title: &quot;Royal Hunting Lodge&quot;, messageKey: &quot;feudal_tournament_EVENT1_FAILED&quot;})
				this.resetTournament()
				this.restoreMissiles()}
		}
			
		if(missionVariables.feudal_tournament == &quot;EVENT2_RUNNING&quot;)
		{	
			if(player.ship.equipmentStatus(&quot;EQ_FS_BOMB_PLACEHOLDER&quot;) == &quot;EQUIPMENT_OK&quot;)
					{	player.ship.removeEquipment(&quot;EQ_FS_BOMB_PLACEHOLDER&quot;)
						player.ship.awardEquipment(&quot;EQ_ENERGY_BOMB&quot;)
						player.consoleMessage(&quot;Energy Bomb re-enabled&quot;)}

			if(missionVariables.feudal_tournament_kills &gt;= 4)
				
			{	mission.runScreen({title: &quot;Royal Hunting Lodge&quot;, messageKey: &quot;feudal_tournament_EVENT2_PASSED&quot;})
				missionVariables.feudal_tournament = &quot;EVENT3&quot;
				missionVariables.feudal_tournament_offer = &quot;EVENT_BRIEFING&quot;
				missionVariables.feudal_tournament_kills = null
				this.restoreMissiles()
			}
			
			else
			{	mission.runScreen({title: &quot;Royal Hunting Lodge&quot;, messageKey: &quot;feudal_tournament_EVENT2_FAILED&quot;})
				this.resetTournament()
				this.restoreMissiles()
			}
		}
		
		
		if(missionVariables.feudal_tournament == &quot;EVENT3_RUNNING&quot;)
		{
			if(player.ship.equipmentStatus(&quot;EQ_FS_INJECTION_PLACEHOLDER&quot;, &quot;EQUIPMENT_OK&quot;))
			{	player.ship.removeEquipment(&quot;EQ_FS_INJECTION_PLACEHOLDER&quot;)
				player.ship.awardEquipment(&quot;EQ_FUEL_INJECTION&quot;)
				player.consoleMessage(&quot;Fuel Injectors re-enabled&quot;)}
				
		
			if(missionVariables.feudal_tournament_scoops &gt;=1)
			
			{	mission.runScreen({title: &quot;Royal Hunting Lodge&quot;, messageKey: &quot;feudal_tournament_EVENT3_PASSED&quot;})
				missionVariables.feudal_tournament_offer = &quot;EVENT_BRIEFING&quot;
				missionVariables.feudal_tournament = &quot;EVENT4&quot;
				missionVariables.feudal_tournament_scoops = null}
			
			else
			{	mission.runScreen({title: &quot;Royal Hunting Lodge&quot;, messageKey: &quot;feudal_tournament_EVENT3_FAILED&quot;})
				this.resetTournament()}
		}
		
		if(missionVariables.feudal_tournament == &quot;EVENT4_RUNNING&quot;)
		{
			if(missionVariables.feudal_tournament_scoops &gt;=8)
			
			{	mission.runScreen({title: &quot;Royal Hunting Lodge&quot;, messageKey: &quot;feudal_tournament_EVENT4_PASSED&quot;})
				missionVariables.feudal_tournament_offer = &quot;EVENT_BRIEFING&quot;
				missionVariables.feudal_tournament = &quot;EVENT5&quot;
				missionVariables.feudal_tournament_scoops = null
				this.restoreMissiles()}
			
			else
			{	mission.runScreen({title: &quot;Royal Hunting Lodge&quot;, messageKey: &quot;feudal_tournament_EVENT4_FAILED&quot;})
				this.resetTournament()
				this.restoreMissiles()}
		}
		
		if(missionVariables.feudal_tournament == &quot;EVENT5_RUNNING&quot;)
		{
			if(player.ship.equipmentStatus(&quot;EQ_FS_BOMB_PLACEHOLDER&quot;) == &quot;EQUIPMENT_OK&quot;)
					{	player.ship.removeEquipment(&quot;EQ_FS_BOMB_PLACEHOLDER&quot;)
						player.ship.awardEquipment(&quot;EQ_ENERGY_BOMB&quot;)
						player.consoleMessage(&quot;Energy Bomb re-enabled&quot;)}
						
						
			if(missionVariables.feudal_tournament_ships &lt;= 2)
			
			{	this.defineTournamentGender()
				this.defineTournamentInputs()
				player.feudalRankGenerator()
				this.defineTournamentOutputs()
				mission.runScreen({title: &quot;Royal Hunting Lodge&quot;, messageKey: &quot;feudal_tournament_EVENT5_PASSED&quot;})
				missionVariables.feudal_tournament_offer = &quot;EVENT_BRIEFING&quot;
				missionVariables.feudal_tournament = &quot;EVENT6&quot;
				missionVariables.feudal_tournament_ships = null}
			
			else
			{	mission.runScreen({title: &quot;Royal Hunting Lodge&quot;, messageKey: &quot;feudal_tournament_EVENT5_FAILED&quot;})
				this.resetTournament()}	
		}
		
		if(missionVariables.feudal_tournament == &quot;EVENT6_RUNNING&quot;)
		{
			if(player.ship.equipmentStatus(&quot;EQ_FS_BOMB_PLACEHOLDER&quot;) == &quot;EQUIPMENT_OK&quot;)
					{	player.ship.removeEquipment(&quot;EQ_FS_BOMB_PLACEHOLDER&quot;)
						player.ship.awardEquipment(&quot;EQ_ENERGY_BOMB&quot;)
						player.consoleMessage(&quot;Energy Bomb re-enabled&quot;)}
			
			if(missionVariables.feudal_tournament_kills == 1)
			
			{	
				mission.runScreen({title: &quot;Royal Hunting Lodge&quot;, messageKey: &quot;feudal_tournament_EVENT6_PASSED&quot;})
				missionVariables.feudal_tournament_offer = null
				missionVariables.feudal_tournament = null
				missionVariables.feudal_tournament_kills = null
				missionVariables.feudal_score += 100
				player.credits += 100000
				this.resetTournament()
				this.restoreMissiles()}
			
			else
			{	mission.runScreen({title: &quot;Royal Hunting Lodge&quot;, messageKey: &quot;feudal_tournament_EVENT6_FAILED&quot;})
				this.resetTournament()
				this.restoreMissiles()}	
		}
	}	
    }
    
    
this.removeMissiles = function()
{this.storeMissileArray = player.ship.missiles;
player.ship.awardEquipment(&quot;EQ_MISSILE_REMOVAL&quot;)}


this.restoreMissiles = function()
{player.ship.awardEquipment(&quot;EQ_MISSILE_REMOVAL&quot;)
	for(restoreCounter = 0;restoreCounter&lt;this.storeMissileArray.length;restoreCounter++)
        {player.ship.awardEquipment(this.storeMissileArray[restoreCounter].equipmentKey);}
}

this.choiceEvaluation = function(choice)
	{
		if(missionVariables.feudal_tournament_offer == &quot;TOURNAMENT_OFFERED&quot;)
			
				
			{	if(choice == &quot;enter_tournament&quot;)	
					
							{	
								missionVariables.feudal_tournament = &quot;EVENT1&quot;
								missionVariables.feudal_tournament_offer = &quot;EVENT_BRIEFING&quot;
								mission.runScreen({title: &quot;Royal Hunting Lodge&quot;, background: &quot;redeagle.png&quot;, messageKey: &quot;feudal_tournament_&quot;+[missionVariables.feudal_tournament], choicesKey: &quot;feudal_tournament_event_choices&quot;}, this.choiceEvaluation)
								mission.setInstructionsKey(&quot;feudal_tournament_&quot;+[missionVariables.feudal_tournament]+&quot;_briefing&quot;)
								missionVariables.feudal_tournament_deadline = null
							}
					
				if(choice == &quot;decline_tournament&quot;)	
			
							{
								mission.runScreen({title: &quot;Royal Hunting Lodge&quot;, background: &quot;redeagle.png&quot;, messageKey: &quot;feudal_tournament_declined&quot;})
								this.resetTournament()
								return
							}
			}
					
		if(missionVariables.feudal_tournament_offer == &quot;EVENT_BRIEFING&quot;)
			{
				if(choice == &quot;defer_event&quot;)
					{mission.runScreen({title: &quot;Royal Hunting Lodge&quot;, messageKey: &quot;feudal_tournament_deferred&quot;})
					missionVariables.feudal_tournament_offer = &quot;EVENT_DECLINED&quot;
					}
				
				if(missionVariables.feudal_tournament == &quot;EVENT1&quot;)			
				{	if(choice == &quot;begin_event&quot;)
					{missionVariables.feudal_tournament = &quot;EVENT1_RUNNING&quot;
					missionVariables.feudal_tournament_offer = null
					missionVariables.feudal_tournament_kills = 0
					this.removeMissiles()
					player.ship.launch()
					}		
				}
				
				if(missionVariables.feudal_tournament == &quot;EVENT2&quot;)			
				{	if(choice == &quot;begin_event&quot;)
					{missionVariables.feudal_tournament = &quot;EVENT2_RUNNING&quot;
					missionVariables.feudal_tournament_offer = null
					missionVariables.feudal_tournament_kills = 0
					this.removeMissiles()
					if(player.ship.equipmentStatus(&quot;EQ_ENERGY_BOMB&quot;) == &quot;EQUIPMENT_OK&quot;)
					{	player.ship.removeEquipment(&quot;EQ_ENERGY_BOMB&quot;)
						player.ship.awardEquipment(&quot;EQ_FS_BOMB_PLACEHOLDER&quot;)
						player.consoleMessage(&quot;Energy Bomb disabled&quot;)}
					player.ship.launch()
					}		
				}
				
				if(missionVariables.feudal_tournament == &quot;EVENT3&quot;)			
				{	if(choice == &quot;begin_event&quot;)
					{missionVariables.feudal_tournament = &quot;EVENT3_RUNNING&quot;
					missionVariables.feudal_tournament_offer = null
					missionVariables.feudal_tournament_scoops = 0
					player.ship.launch()
					}		
				}
				
				if(missionVariables.feudal_tournament == &quot;EVENT4&quot;)			
				{	if(choice == &quot;begin_event&quot;)
					{missionVariables.feudal_tournament = &quot;EVENT4_RUNNING&quot;
					missionVariables.feudal_tournament_offer = null
					missionVariables.feudal_tournament_scoops = 0
					player.ship.launch()
					}		
				}
				
				if(missionVariables.feudal_tournament == &quot;EVENT5&quot;)			
				{	if(choice == &quot;begin_event&quot;)
					{missionVariables.feudal_tournament = &quot;EVENT5_RUNNING&quot;
					missionVariables.feudal_tournament_offer = null
					missionVariables.feudal_tournament_ships = 100
					if(player.ship.equipmentStatus(&quot;EQ_ENERGY_BOMB&quot;) == &quot;EQUIPMENT_OK&quot;)
					{	player.ship.removeEquipment(&quot;EQ_ENERGY_BOMB&quot;)
						player.ship.awardEquipment(&quot;EQ_FS_BOMB_PLACEHOLDER&quot;)
						player.consoleMessage(&quot;Energy Bomb disabled&quot;)}
					player.ship.launch()
					}		
				}
				
				if(missionVariables.feudal_tournament == &quot;EVENT6&quot;)			
				{	if(choice == &quot;begin_event&quot;)
					{missionVariables.feudal_tournament = &quot;EVENT6_RUNNING&quot;
					missionVariables.feudal_tournament_offer = null
					missionVariables.feudal_tournament_kills = 0
					if(player.ship.equipmentStatus(&quot;EQ_ENERGY_BOMB&quot;) == &quot;EQUIPMENT_OK&quot;)
					{	player.ship.removeEquipment(&quot;EQ_ENERGY_BOMB&quot;)
						player.ship.awardEquipment(&quot;EQ_FS_BOMB_PLACEHOLDER&quot;)
						player.consoleMessage(&quot;Energy Bomb disabled&quot;)}
					this.removeMissiles()
					player.ship.launch()
					}		
				}	
			}	
	}				
// ship appearance on launching	
this.shipWillLaunchFromStation = function()

{	
	
	
	if(missionVariables.feudal_tournament_offer == &quot;TOURNAMENT_OFFERED&quot;)
	missionVariables.feudal_tournament_offer = &quot;TOURNAMENT_OPEN&quot;
	
	
	
	if(missionVariables.feudal_tournament == &quot;EVENT1_RUNNING&quot;)
		
		{system.legacy_addShipsWithinRadius(&quot;feudal-shield&quot;, 10, &quot;wsm&quot;, [0, 122000, 0], 23000)}
	
	if(missionVariables.feudal_tournament == &quot;EVENT2_RUNNING&quot;)
		{system.legacy_addShipsWithinRadius(&quot;feudal-drone-1&quot;, 1, &quot;wsm&quot;, [0, 122000, 0], 5000)}
		
	if(missionVariables.feudal_tournament == &quot;EVENT3_RUNNING&quot;)
		{
			if(player.ship.equipmentStatus(&quot;EQ_FUEL_INJECTION&quot;) == &quot;EQUIPMENT_OK&quot;)
			{	player.ship.removeEquipment(&quot;EQ_FUEL_INJECTION&quot;)
				player.ship.awardEquipment(&quot;EQ_FS_INJECTION_PLACEHOLDER&quot;)
				player.consoleMessage(&quot;Fuel Injectors disabled&quot;)}
		system.legacy_addShipsWithinRadius(&quot;feudal-drone&quot;, 1, &quot;wsm&quot;, [0, 122000, 0], 2000)
		system.addShips(expandDescription(&quot;[feudal_house_&quot;+[galaxyNumber]+&quot;]&quot;)+&quot;-knight&quot;, 1, player.ship.position, 5000)
		system.addShips(expandDescription(&quot;[feudal_house_&quot;+[galaxyNumber]+&quot;]&quot;)+&quot;-prince&quot;, 1, player.ship.position, 5000)
		system.addShips(expandDescription(&quot;[feudal_house_&quot;+[galaxyNumber]+&quot;]&quot;)+&quot;-lord&quot;, 1, player.ship.position, 5000)
		}
	
	
	if(missionVariables.feudal_tournament == &quot;EVENT4_RUNNING&quot;)
		{
		system.legacy_addShipsAtPrecisely(&quot;feudal-gate-away&quot;, 1, &quot;wsu&quot;, [0, 0, -2.05])
		system.legacy_addShipsWithinRadius(&quot;feudal-gate-home&quot;, 1, &quot;wsm&quot;, [0, 122000, 0], 20000)
		system.legacy_addShipsWithinRadius(&quot;new-asteroid&quot;, 64, &quot;wsu&quot;, [0, 0, -2.01], 25000)
		system.legacy_addShipsWithinRadius(&quot;new-asteroid&quot;, 64, &quot;wsu&quot;, [0, 0, -2.01], 12000)
		system.legacy_addShipsWithinRadius(&quot;new-asteroid&quot;, 32, &quot;wsu&quot;, [0, 0, -2.01], 12000)
		system.legacy_addShipsWithinRadius(&quot;feudal-mine&quot;, 16, &quot;wsu&quot;, [0, 0, -2.01], 12000)
		system.legacy_addShipsWithinRadius(&quot;feudal-mine&quot;, 16, &quot;wsu&quot;, [0, 0, -2.01], 25000)
		system.legacy_addShipsWithinRadius(&quot;feudal-mine&quot;, 16, &quot;wsu&quot;, [0, 0, -2.01], 25000)
		system.legacy_addShipsWithinRadius(&quot;new-asteroid&quot;, 32, &quot;wsu&quot;, [0, 0, -2.01], 12000)
		system.legacy_addShipsWithinRadius(&quot;new-asteroid&quot;, 32, &quot;wsu&quot;, [0, 0, -2.01], 12000)
		system.legacy_addShipsWithinRadius(&quot;feudal-shield-pod&quot;, 10, &quot;wsu&quot;, [0, 0, -2.01], 12000)
		}
	
	if(missionVariables.feudal_tournament == &quot;EVENT5_RUNNING&quot;)
	
	{	
		system.legacy_addShipsWithinRadius(expandDescription(&quot;[feudal_house_&quot;+[galaxyNumber]+&quot;]&quot;)+&quot;-knight&quot;, 49, &quot;wsm&quot;, [0, 122000, 0], 10000)
		system.legacy_addShipsWithinRadius(expandDescription(&quot;[feudal_house_&quot;+[galaxyNumber]+&quot;]&quot;)+&quot;-lord&quot;, 30, &quot;wsm&quot;, [0, 122000, 0], 10000)
		system.legacy_addShipsWithinRadius(expandDescription(&quot;[feudal_house_&quot;+[galaxyNumber]+&quot;]&quot;)+&quot;-prince&quot;, 20, &quot;wsm&quot;, [0, 122000, 0], 10000)
	}
	
	if(missionVariables.feudal_tournament == &quot;EVENT6_RUNNING&quot;)
	
	{	
		system.legacy_addShipsWithinRadius([missionVariables.feudal_tournament_opponent_role], 1, &quot;wsm&quot;, [0, 122000, 0], 5000)
	}
		
}
this.shipWillExitWitchspace = function()
{	
	
	if(missionVariables.feudal_tournament_jumpcount != null)
	++missionVariables.feudal_tournament_jumpcount
	
	if(missionVariables.feudal_tournament == &quot;EVENT1_RUNNING&quot; || missionVariables.feudal_tournament == &quot;EVENT2_RUNNING&quot; || missionVariables.feudal_tournament == &quot;EVENT4_RUNNING&quot; || missionVariables.feudal_tournament == &quot;EVENT6_RUNNING&quot;)
	{this.resetTournament()
	player.commsMessage(&quot;Tournament event has been forfeit.&quot;)}

	if(missionVariables.feudal_tournament == &quot;EVENT3_RUNNING&quot;)
	{this.resetTournament()
	player.commsMessage(&quot;Tournament event has been forfeit.&quot;)
	if(player.ship.equipmentStatus(&quot;EQ_FS_INJECTION_PLACEHOLDER&quot;) == &quot;EQUIPMENT_OK&quot;)
		{
			player.ship.removeEquipment(&quot;EQ_FS_INJECTION_PLACEHOLDER&quot;)
			player.ship.awardEquipment(&quot;EQ_FUEL_INJECTION&quot;)
			player.consoleMessage(&quot;Fuel Injectors re-enabled&quot;)}			
		}
		
	if(missionVariables.feudal_tournament == &quot;EVENT5_RUNNING&quot; || missionVariables.feudal_tournament == &quot;EVENT6_RUNNING&quot;)
	{this.resetTournament()
	player.commsMessage(&quot;Tournament event has been forfeit.&quot;)
	if(player.ship.equipmentStatus(&quot;EQ_FS_BOMB_PLACEHOLDER&quot;) == &quot;EQUIPMENT_OK&quot;)
		{
			player.ship.removeEquipment(&quot;EQ_FS_BOMB_PLACEHOLDER&quot;)
			player.ship.awardEquipment(&quot;EQ_ENERGY_BOMB&quot;)
			player.consoleMessage(&quot;Energy Bomb re-enabled&quot;)}			
		}
	
}


this.playerEnteredNewGalaxy = function()
{	
	
	if(missionVariables.feudal_player_rank_no &gt;= 1)
	this.resetTournament()
}

this.resetTournament = function()

{
	missionVariables.feudal_tournament = null
	missionVariables.feudal_tournament_offer = null
	mission.setInstructionsKey(null)
	missionVariables.feudal_tournament_kills = null
	missionVariables.feudal_tournament_home = null
	missionVariables.feudal_tournament_scoops = null
	missionVariables.feudal_tournament_ships = null
	missionVariables.feudal_tournament_opponent_role = null
	missionVariables.feudal_tournament_opponent_gender = null
	missionVariables.feudal_tournament_opponent_house = null		
	missionVariables.feudal_tournament_opponent_title = null
	missionVariables.feudal_tournament_opponent_firstname = null
	missionVariables.feudal_tournament_opponent_lastname = null
	missionVariables.feudal_tournament_opponent_of = null
	missionVariables.feudal_tournament_opponent_rank_no = null
	missionVariables.feudal_tournament_opponent_rank = null
	missionVariables.feudal_tournament_opponent_text = null
	missionVariables.feudal_tournament_jumpcount = 0
	missionVariables.feudal_tournament_deadline = null
}

this.defineTournamentGender = function() // pick a gender and select basic titles
{	missionVariables.feudal_tournament_opponent_gender = expandDescription(&quot;[feudal_gender]&quot;)
		
		if(missionVariables.feudal_tournament_opponent_gender == &quot;he&quot;)
		{	
			if(missionVariables.feudal_tournament_opponent_rank_no == 1)
                        missionVariables.feudal_tournament_opponent_title = &quot;Sir&quot;
                        
			if(missionVariables.feudal_tournament_opponent_rank_no == 2)
                        missionVariables.feudal_tournament_opponent_title = &quot;Lord&quot;
		}									       
		
		if(missionVariables.feudal_tournament_opponent_gender == &quot;she&quot;)	
			missionVariables.feudal_tournament_opponent_title = &quot;Lady&quot;			
}

this.defineTournamentOpponentHouse = function()
{missionVariables.feudal_tournament_opponent_house = expandDescription(&quot;[feudal_house_&quot;+[galaxyNumber]+&quot;]&quot;)
if(missionVariables.feudal_tournament_opponent_house == missionVariables.feudal_tournament_home)
this.defineTournamentOpponentHouse
}

this.defineTournamentInputs = function()
{	
	player.rankGenerator_house = missionVariables.feudal_tournament_opponent_house
	player.rankGenerator_gender = missionVariables.feudal_tournament_opponent_gender		
}

this.defineTournamentOutputs = function()
{	
	missionVariables.feudal_tournament_opponent_firstname = player.rankGenerator_feudal_firstname
	missionVariables.feudal_tournament_opponent_lastname = player.rankGenerator_feudal_lastname
	missionVariables.feudal_tournament_opponent_of = player.rankGenerator_of
	//log(missionVariables.feudal_tournament_opponent_rank_no)
	
	if(missionVariables.feudal_tournament_opponent_rank_no == 1)
	missionVariables.feudal_tournament_opponent_text = missionVariables.feudal_tournament_opponent_title+&quot; &quot;+missionVariables.feudal_tournament_opponent_firstname+&quot; &quot;+missionVariables.feudal_tournament_opponent_lastname+&quot; of the House of &quot;+missionVariables.feudal_tournament_opponent_house
	
	if(missionVariables.feudal_tournament_opponent_rank_no == 2)
	{missionVariables.feudal_tournament_opponent_rank = [player.rankGenerator_feudal_middle_rank]
	missionVariables.feudal_tournament_opponent_text = missionVariables.feudal_tournament_opponent_firstname+&quot; &quot;+missionVariables.feudal_tournament_opponent_lastname+&quot;, &quot;+missionVariables.feudal_tournament_opponent_rank+&quot; &quot;+missionVariables.feudal_tournament_opponent_of+&quot; &quot;+missionVariables.feudal_tournament_opponent_house+&quot;,&quot;}
	
	if(missionVariables.feudal_tournament_opponent_rank_no == 3)
	   {missionVariables.feudal_tournament_opponent_rank = [player.rankGenerator_feudal_high_rank]
	missionVariables.feudal_tournament_opponent_text = missionVariables.feudal_tournament_opponent_firstname+&quot; &quot;+missionVariables.feudal_tournament_opponent_lastname+&quot;, &quot;+missionVariables.feudal_tournament_opponent_rank+&quot; &quot;+missionVariables.feudal_tournament_opponent_of+&quot; &quot;+missionVariables.feudal_tournament_opponent_house+&quot;,&quot;}
}





</pre></td>
                </tr>
            </table>
        </a>
    </body>
</html>
