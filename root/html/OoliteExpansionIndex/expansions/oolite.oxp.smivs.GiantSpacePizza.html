<html>
    <head>
        <title>Expansion Giant Space Pizza</title>
        <link rel="stylesheet" href="../style.css">
    </head>
    <body>
        <table border="0" width="100%">
            <tr>
                <td>Back to <a href='../index.html'>Index</a></td>
                <td align="right"><small>Page generated: Oct 11, 2023, 3:16:49 PM</small></td>
            </tr>
        </table>

        <h1>Expansion Giant Space Pizza</h1>

        <h2>Content</h2>
        <ul>
          
          <li><a href="#manifest">Manifest</a></li>
          <li><a href="#documentation">Documentation</a></li>
          <li><a href="#equipment">0 Equipment</a></li>
          <li><a href="#ships">5 Ships</a></li>
          <li><a href="#models">0 Models</a></li>
          <li><a href="#scripts">3 Scripts</a></li>
        </ul>


        <a name="manifest">
        <h2>Manifest</h2>
            <table border="1">
                <tr>
                    <th></th>
                    <th>from Expansion Manager's OXP list</th>
                    <th>from Expansion Manifest</th>
                </tr>
                <tr>
                    <td>Description</td>
                    <td>A light-hearted expansion which adds Giant Space Pizzas, Visitor Centres and Safety Stewards to selected systems. Visit them all to get a special award.</td>
                    <td>A light-hearted expansion which adds Giant Space Pizzas, Visitor Centres and Safety Stewards to selected systems. Visit them all to get a special award.</td>
                </tr>
                <tr>
                    <td>Identifier</td>
                    <td>oolite.oxp.smivs.GiantSpacePizza</td>
                    <td>oolite.oxp.smivs.GiantSpacePizza</td>
                </tr>
                <tr>
                    <td>Title</td>
                    <td>Giant Space Pizza</td>
                    <td>Giant Space Pizza</td>
                </tr>
                <tr>
                    <td>Category</td>
                    <td>Ambience</td>
                    <td>Ambience</td>
                </tr>
                <tr>
                    <td>Author</td>
                    <td>Smivs</td>
                    <td>Smivs</td>
                </tr>
                <tr>
                    <td>Version</td>
                    <td>3.1</td>
                    <td>3.1</td>
                </tr>
                <tr>
                    <td>Tags</td>
                    <td></td>
                    <td></td>
                </tr>
                <tr>
                    <td>Required Oolite Version</td>
                    <td></td>
                    <td></td>
                </tr>
                <tr>
                    <td>Maximum Oolite Version</td>
                    <td></td>
                    <td></td>
                </tr>
                <tr>
                    <td>Required Expansions</td>
                    <td>
                    </td>
                    <td>
                    </td>
                </tr>
                <tr>
                    <td>Optional Expansions</td>
                    <td>
                    </td>
                    <td>
                    </td>
                </tr>
                <tr>
                    <td>Conflict Expansions</td>
                    <td>
                    </td>
                    <td>
                    </td>
                </tr>
                <tr>
                    <td>Information URL</td>
                    <td><a target="_blank" href="http://wiki.alioth.net/index.php/Giant_Space_Pizza">http://wiki.alioth.net/index.php/Giant_Space_Pizza</a></td>
                    <td><a target="_blank" href="">n/a</a></td>
                </tr>
                <tr>
                    <td>Download URL</td>
                    <td><a target="_blank" href="https://wiki.alioth.net/img_auth.php/3/32/GiantSpacePizza_v3.1.oxz">https://wiki.alioth.net/img_auth.php/3/32/GiantSpacePizza_v3.1.oxz</a></td>
                    <td><a target="_blank" href="http://wiki.alioth.net/img_auth.php/5/5f/GiantSpacePizza_v3.1.oxz">http://wiki.alioth.net/img_auth.php/5/5f/GiantSpacePizza_v3.1.oxz</a></td>
                </tr>
                <tr>
                    <td>License</td>
                    <td>CC-BY-NC-SA 4.0</td>
                    <td>CC-BY-NC-SA 4.0</td>
                </tr>
                <tr>
                    <td>File Size</td>
                    <td>n/a</td>
                </tr>
                <tr>
                    <td>Upload date</td>
                    <td>1610873263</td>
                </tr>
            </table>
                </a>

        <a name="documentation">
        <h2>Documentation</h2>
        <p>Also read <a href='http://wiki.alioth.net/index.php/Giant%20Space%20Pizza'>http://wiki.alioth.net/index.php/Giant%20Space%20Pizza</a></p>
        <h3>readme.rtf</h3>
        <pre>ï»¿Giant Space Pizza v3.1

This Expansion Pack adds Giant Space Pizzas near to the Sun in thirteen systems spread through all eight Galaxies. 
Each Giant Space Pizza has a visitor centre between the planet and the sun, and Safety Stewards patrol the area arond the Pizzas. 
Each time you dock at a Visitor Centre your visit is recorded, and if you visit all thirteen pizzas, you will get a special award. The Visitor Centre also features a &#39;History of the Giant Space Pizza&#39; presentation.
Pizza systems are marked on the short- and long-range charts with a yellow diamond, and the planet descriptions include mention of them. You will be reminded about the Pizza when you first dock at the main station.
You do not need to visit the main station at a Pizza System, and can fly directly to the Visitor Centre if you prefer. These have a &#39;V&#39; space compass legend.
You can start visiting the Pizzas in whichever galaxy you are in, and they do not have to be visited in a set order - just visit them as part of your normal travels around the Eight. 
Of course if you wanted to treat this as a &#39;Tour&#39; mission and deliberately visit them all in a relatively short timescale you can do that as well.

Licence:-
This work is licensed under the Creative Commons Attribution-Noncommercial-Share Alike 4.0 Unported License. To view a copy of this license, visit http://creativecommons.org/licenses/by-nc-sa/4.0/ or send a letter to Creative Commons, 171 Second Street, Suite 300, SanFrancisco, California, 94105, USA.

Author and Credits:-
OXP by Smivs. 
Pizza base by Shipbuilder, topping and garnish by Smivs.
The model for the Visitor Centres is by Dr Nil. Many thanks to cim and Pleb for their assistance and Fatleaf for checking and testing. &#39;Musak&#39; by the Ronnie Smith Band.

Locations of Giant Space Pizzas.
Galaxy, Planet name and Planet number.

G1
Isatre 152
Zaleriza 238
G2
Sosole 192
G3
Atistiso 57
G4
Usgeat 134
Zausmaor 189
G5
Raleor 50
G6
Biteen 193
G7
Ertius 150
Esaqube 205
Xeraso 158
G8
Usmaedin 13
Xetila 168

History of the Pizzas

Many hundreds of years ago the Trumbles had an advanced technological civilisation, but were suffering from acute over-population and food shortages. Due to the remote (and now forgotten) location of their homeworld they had no contact with other races, and were tied to their home-planet. While the Trumbles did have space travel their attempts to explore space were in their infancy, and their ships were crude. 
They tried to solve their food shortages by bio-engineering fast-growing giant foodstuffs but these experiments were largely un-successful, and eventually ended in disaster. An accidental release of some genetically-modified blancmange left the Trumble homeworld un-inhabitable within a year and caused the Trumble Diaspora, a last desperate attempt to save the Trumble race by evacuating the planet and searching for a new home.
However most of the Diaspora ships were lost during the attempt, which marked the end of the Trumble civilisation.
The few surviving Trumbles did eventually find a home in GalCop space where the indigenous species at first thought they were &#39;cute&#39; and kept them as pets. The Trumbles started to re-populate, but having lost their knowledge base and without any functioning society, they were no more than a collection of individuals, and before long their runaway breeding even led to them being considered vermin by many of their adoptive hosts. 
One of the lost Diaspora ships was the &quot;Preewootre&#39;ill&quot;. Against regulations a Trumble food scientist smuggled a small specimen of his work, a megapizza, on board just before she was launched. Unfortunately the pizza grew rapidly on board the ship and eventually caused its destruction while it was in witchspace, leaving hundreds of pieces of the megapizza scattering into interstellar space. Most of these were lost forever, but a few fell into stable orbits around some of the suns in GalCop space. Baked by the heat of the sun, they grew, and grew, and grew. 
Today, they are known to the GalCop races simply as Giant Space Pizzas and at up to 5Km in diameter these inert and harmless entities are quite impressive. They remain there to this day, a curiosity to the spacefarers that come across them, and a testament to the folly of the Trumbles&#39; catastrophic attempts to feed their burgeoning population all those years ago.

</pre>
        </a>

        <a name="equipment">          
        <h2>Equipment</h2>
            This expansion declares no equipment. 
        </a>

        <a name="ships">    
        <h2>Ships</h2>
            <table>
                <tr>
                    <th>Name</th>
                </tr>
                <tr>
                    <td><a href="../ships/Pizza-safety-steward.html">GSP Safety Steward</a></td>
                </tr>
                <tr>
                    <td><a href="../ships/pizzaStewardEngine.html">pizzaStewardEngine</a></td>
                </tr>
                <tr>
                    <td><a href="../ships/smivs_pizza_giftshop.html">Space Pizza Visitor Centre and Giftshop</a></td>
                </tr>
                <tr>
                    <td><a href="../ships/smivs_pizza_giftshop_dock.html">Smivs Pizza Giftshop Dock</a></td>
                </tr>
                <tr>
                    <td><a href="../ships/smivs_space_pizza.html">Giant Space Pizza</a></td>
                </tr>
            </table>
        </a>

        <a name="models">    
        <h2>Models</h2>
            This expansion declares no models. 
        </a>

        <a name="scripts">    
        <h2>Scripts</h2>
            <table>
                <tr>
                    <th>Path</th>
                </tr>
                <tr>
                    <td valign="top">Scripts/Pizza-safety-steward_script.js</td>
                    <td><pre>&quot;use strict&quot;;

// Standard attributes 
this.name           = &quot;Pizza-safety-steward_script&quot;; 
this.author         = &quot;Smivs&quot;; 
this.licence        = &quot;Creative Commons Attribution-Noncommercial-Share Alike 3.0 Unported License&quot;;
this.copyright      = &quot;Smivs&quot;; 
this.version        = &quot;3.1&quot;; 
this.description    = &quot;Script to control Pizza safety stewards.&quot; 

this.$scanForPlayer = function()
{
       this.ship.target = player.ship;
       this.ship.reactToAIMessage(&quot;TARGET_FOUND&quot;);
}
this.$contactPlayer = function()
{
  if(missionVariables.GiantSpacePizza_status === &quot;VISITED_GIFTSHOP&quot;)
    {
       this.ship.commsMessage(expandDescription(&quot;[STEWARD_WELCOME_MESSAGE]&quot;),player.ship);
    }
  else if(missionVariables.GiantSpacePizza_status === &quot;DEFAULT&quot;)
    {
       this.ship.commsMessage(expandDescription(&quot;[STEWARD_WARNING_MESSAGE]&quot;),player.ship);   
    }
}
this.$attackWarning = function()
{
       this.ship.commsMessage(expandDescription(&quot;[STEWARD_ATTACK_WARNING_MESSAGE]&quot;),player.ship);
}
</pre></td>
                </tr>
                <tr>
                    <td valign="top">Scripts/smivs_pizza_neon_timer_script.js</td>
                    <td><pre>&quot;use strict&quot;;

// Standard attributes 
this.name           = &quot;smivs_pizza_neon_timer_script.js&quot;; 
this.author         = &quot;Smivs&quot;; 
this.licence        = &quot;Creative Commons Attribution-Noncommercial-Share Alike 3.0 Unported License&quot;;
this.copyright      = &quot;Smivs&quot;; 
this.version        = &quot;3.1&quot;;  
this.description    = &quot;Script to control neon lights on Pizza visitor centre.&quot; 

this.shipSpawned = function()
{
 this.smivsPizzaVCneon1 ()
}
// &#39;red&#39; phase
this.smivsPizzaVCneon1 = function()
// timer to switch to blue neon after 1 second
{
  this.switchNeonTimer1 = new Timer(this, this.neonTimerLights1,1); 
}
this.neonTimerLights1 = function()
// Set materials to blue emission map
{
   this.ship.setMaterials({&quot;smivs_pizza_giftshop_sign.png&quot;: { emission_map: &quot;smivs_pizza_giftshop_sign-em_map_blue.png&quot; }});
// Switch to &#39;blue&#39; phase
   this.smivsPizzaVCneon2 ();
}
// &#39;blue&#39; phase
this.smivsPizzaVCneon2 = function()
{
// timer to switch to red neon after 1 second
  this.switchNeonTimer2 = new Timer(this, this.neonTimerLights2,1); 
}
this.neonTimerLights2 = function()
// Set materials to red emission map
{
   this.ship.setMaterials({&quot;smivs_pizza_giftshop_sign.png&quot;: { emission_map: &quot;smivs_pizza_giftshop_sign-em_map_red.png&quot; }});
// Switch to &#39;red&#39;phase
   this.smivsPizzaVCneon1 ();
}




</pre></td>
                </tr>
                <tr>
                    <td valign="top">Scripts/smivs_space_pizza_script.js</td>
                    <td><pre>&quot;use strict&quot;;

// Standard attributes 
this.name           = &quot;smivs_space_pizza_script&quot;; 
this.author         = &quot;Smivs&quot;; 
this.licence        = &quot;Creative Commons Attribution-Noncommercial-Share Alike 3.0 Unported License&quot;;
this.copyright      = &quot;Smivs&quot;; 
this.version        = &quot;3.1&quot;; 
this.description    = &quot;Main script to add Giant Space Pizzas and related objects to selected systems, and control the &#39;mission&#39; elements of the OXP&quot; 

this.startUp = function()
{
// This section writes modified planet descriptions to the save file
    System.infoForSystem(0, 152).description = &quot;The world Isatre is a boring planet, but has a Giant Space Pizza in orbit around its Sun&quot;;
    System.infoForSystem(0, 238).description = &quot;This world is a tedious place. There is a Giant Space Pizza in orbit around its Sun&quot;;
    System.infoForSystem(1, 192).description = &quot;The world Sosole is fabled for its weird rock formations and the Sosoleian deadly goat. There is a Giant Space Pizza in orbit around its Sun&quot;;
    System.infoForSystem(2, 56).description = &quot;This planet is notable for the Atistisoian edible poet and Atistisoian evil brandy. It also has a Giant Space Pizza in orbit around its Sun&quot;;
    System.infoForSystem(3, 134).description = &quot;Usgeat is cursed by dreadful civil war and has a Giant Space Pizza in orbit around its Sun&quot;;
    System.infoForSystem(3, 189).description = &quot;This planet is very notable for its inhabitants&#39; ingrained shyness and its fabulous cuisine. A Giant Space Pizza can be found in orbit around its Sun&quot;;
    System.infoForSystem(4, 50).description = &quot;The planet Raleor is scourged by killer edible Leilcearoids. It has a Giant Space Pizza in orbit around its Sun&quot;;
    System.infoForSystem(5, 193).description = &quot;The planet Biteen is reasonably noted for mud tennis and its unusual sit coms. A Giant Space Pizza is in orbit around its Sun&quot;;
    System.infoForSystem(6, 150).description = &quot;This world is reasonably well known for its great dense forests but scourged by frequent civil war. A Giant Space Pizza is in orbit around its Sun&quot;;
    System.infoForSystem(6, 158).description = &quot;This world is very notable for the Xerasoian edible moth. A Giant Space Pizza is in orbit around its Sun&quot;;
    System.infoForSystem(6, 205).description = &quot;This planet is a dull world. It has a Giant Space Pizza in orbit around its Sun&quot;;
    System.infoForSystem(7, 13).description = &quot;This planet is a dull world. It has a Giant Space Pizza in orbit around its Sun&quot;;
    System.infoForSystem(7, 168).description = &quot;The planet Xetila is famous for Xetilaian wolf cutlets but plagued by a lethal disease. It has a Giant Space Pizza in orbit around its Sun&quot;; 
// set status
  if(!missionVariables.GiantSpacePizza_status)
    {
      missionVariables.GiantSpacePizza_status = &quot;DEFAULT&quot;;
    }
// set mission flag
  this.missionFlag = &quot;NO&quot;;
// Mark pizzas on charts at startup
  this.$markPizzas()
//close startUp function
  this.startUpComplete;
  delete this.startUp;
}
this.playerEnteredNewGalaxy = function()
{
// Mark pizzas on charts after gal-jump
  this.$markPizzas()
// Allow for GalJump from Pizza system to or within 3 jumps of a Pizza System
  missionVariables.GiantSpacePizza_jumpCount = &quot;JUMPS_0&quot;;
  missionVariables.GiantSpacePizza_status = &quot;DEFAULT&quot;;
}
// Marks pizzas on charts
this.$markPizzas = function()
{
  if (galaxyNumber == 0)
    {
    mission.markSystem({
      system: 152,
      name: &quot;Giant Space Pizza&quot;,
      markerColor: &quot;yellowColor&quot;,
      markerScale: 1.0,
      markerShape: &quot;MARKER_DIAMOND&quot;
                      },
                      {
      system: 238,
      name: &quot;Giant Space Pizza&quot;,
      markerColor: &quot;yellowColor&quot;,
      markerScale: 1.0,
      markerShape: &quot;MARKER_DIAMOND&quot;
                      });
    }
  else if (galaxyNumber == 1)
    {
    mission.markSystem({
      system: 192,
      name: &quot;Giant Space Pizza&quot;,
      markerColor: &quot;yellowColor&quot;,
      markerScale: 1.0,
      markerShape: &quot;MARKER_DIAMOND&quot;
                      });
    }
  else if (galaxyNumber == 2)
    {
    mission.markSystem({
      system: 56,
      name: &quot;Giant Space Pizza&quot;,
      markerColor: &quot;yellowColor&quot;,
      markerScale: 1.0,
      markerShape: &quot;MARKER_DIAMOND&quot;
                      });
    }
  else if (galaxyNumber == 3)
    {
    mission.markSystem({
      system: 134,
      name: &quot;Giant Space Pizza&quot;,
      markerColor: &quot;yellowColor&quot;,
      markerScale: 1.0,
      markerShape: &quot;MARKER_DIAMOND&quot;
                      },
                      {
      system: 189,
      name: &quot;Giant Space Pizza&quot;,
      markerColor: &quot;yellowColor&quot;,
      markerScale: 1.0,
      markerShape: &quot;MARKER_DIAMOND&quot;
                      });
    }
  else if (galaxyNumber == 4)
    {
    mission.markSystem({
      system: 50,
      name: &quot;Giant Space Pizza&quot;,
      markerColor: &quot;yellowColor&quot;,
      markerScale: 1.0,
      markerShape: &quot;MARKER_DIAMOND&quot;
                      });
    }
  else if (galaxyNumber == 5)
    {
    mission.markSystem({
      system: 193,
      name: &quot;Giant Space Pizza&quot;,
      markerColor: &quot;yellowColor&quot;,
      markerScale: 1.0,
      markerShape: &quot;MARKER_DIAMOND&quot;
                      });
    }
  else if (galaxyNumber == 6)
    {
    mission.markSystem({
      system: 150,
      name: &quot;Giant Space Pizza&quot;,
      markerColor: &quot;yellowColor&quot;,
      markerScale: 1.0,
      markerShape: &quot;MARKER_DIAMOND&quot;
                      },
                      {
      system: 158,
      name: &quot;Giant Space Pizza&quot;,
      markerColor: &quot;yellowColor&quot;,
      markerScale: 1.0,
      markerShape: &quot;MARKER_DIAMOND&quot;
                      },
                      {
      system: 205,
      name: &quot;Giant Space Pizza&quot;,
      markerColor: &quot;yellowColor&quot;,
      markerScale: 1.0,
      markerShape: &quot;MARKER_DIAMOND&quot;
                      });
    }
  else if (galaxyNumber == 7)
    {
    mission.markSystem({
      system: 13,
      name: &quot;Giant Space Pizza&quot;,
      markerColor: &quot;yellowColor&quot;,
      markerScale: 1.0,
      markerShape: &quot;MARKER_DIAMOND&quot;
                      },
                      {
      system: 168,
      name: &quot;Giant Space Pizza&quot;,
      markerColor: &quot;yellowColor&quot;,
      markerScale: 1.0,
      markerShape: &quot;MARKER_DIAMOND&quot;
                      });
    }
}

// Populates Pizzas, Stewards and Visitor centres
this.systemWillPopulate = function() 
{
  if 
  (
  !system.isInterstellarSpace &amp;&amp; galaxyNumber == 0 &amp;&amp; system.ID == 152 ||
  !system.isInterstellarSpace &amp;&amp; galaxyNumber == 0 &amp;&amp; system.ID == 238 ||
  !system.isInterstellarSpace &amp;&amp; galaxyNumber == 1 &amp;&amp; system.ID == 192 ||
  !system.isInterstellarSpace &amp;&amp; galaxyNumber == 2 &amp;&amp; system.ID == 56 ||
  !system.isInterstellarSpace &amp;&amp; galaxyNumber == 3 &amp;&amp; system.ID == 134 ||
  !system.isInterstellarSpace &amp;&amp; galaxyNumber == 3 &amp;&amp; system.ID == 189 ||
  !system.isInterstellarSpace &amp;&amp; galaxyNumber == 4 &amp;&amp; system.ID == 50 ||
  !system.isInterstellarSpace &amp;&amp; galaxyNumber == 5 &amp;&amp; system.ID == 193 ||
  !system.isInterstellarSpace &amp;&amp; galaxyNumber == 6 &amp;&amp; system.ID == 150 ||
  !system.isInterstellarSpace &amp;&amp; galaxyNumber == 6 &amp;&amp; system.ID == 158 ||
  !system.isInterstellarSpace &amp;&amp; galaxyNumber == 6 &amp;&amp; system.ID == 205 ||
  !system.isInterstellarSpace &amp;&amp; galaxyNumber == 7 &amp;&amp; system.ID == 13 ||
  !system.isInterstellarSpace &amp;&amp; galaxyNumber == 7 &amp;&amp; system.ID == 168 
  )
  {
  system.setPopulator(&quot;space_pizza_system&quot;,
          {
            callback: function(pos) 
              {
// Add the pizza
                var GSP = system.addShipsToRoute(&quot;smivs_space_pizza&quot;, 1, 0.96, &quot;ws&quot;)[0];
// Add a safety steward
		var GSPSteward = system.addShips(&quot;Pizza-safety-steward&quot;, 1, GSP.position, 15000)[0];
// Add the visitor centre
                var SPVC = system.addShipsToRoute(&quot;smivs_pizza_giftshop&quot;, 1, 0.5, &quot;ps&quot;)[0];
// next line sets up a vector SPVC --&gt; planet
                var targetVector = system.mainPlanet.position.subtract(SPVC.position).direction();
// next line aligns the station relative to the targetVector by rotating
                SPVC.orientation = targetVector.rotationTo(new Vector3D(1,0,1));
              },
            deterministic: false
          });
  }
}

this.missionScreenOpportunity = function ()
// next section runs missionscreens at relevent main Stations
{
  if (player.ship.docked &amp;&amp; player.ship.dockedStation.isMainStation &amp;&amp; missionVariables.GiantSpacePizza_status == &quot;DEFAULT&quot;  &amp;&amp; this.missionFlag &amp;&amp; this.missionFlag === &quot;NO&quot;) 
    {
      if 
        (
        galaxyNumber == 0 &amp;&amp; system.ID == 152 ||
        galaxyNumber == 0 &amp;&amp; system.ID == 238 ||
        galaxyNumber == 1 &amp;&amp; system.ID == 192 ||
        galaxyNumber == 2 &amp;&amp; system.ID == 56 ||
        galaxyNumber == 3 &amp;&amp; system.ID == 134 ||
        galaxyNumber == 3 &amp;&amp; system.ID == 189 ||
        galaxyNumber == 4 &amp;&amp; system.ID == 50 ||
        galaxyNumber == 5 &amp;&amp; system.ID == 193 ||
        galaxyNumber == 6 &amp;&amp; system.ID == 150 ||
        galaxyNumber == 6 &amp;&amp; system.ID == 158 ||
        galaxyNumber == 6 &amp;&amp; system.ID == 205 ||
        galaxyNumber == 7 &amp;&amp; system.ID == 13 ||
        galaxyNumber == 7 &amp;&amp; system.ID == 168 
        )
    mission.runScreen({title: &quot;!!! Major Visitor Attraction !!!&quot;, messageKey: &quot;SPMainStnGreeting1&quot;, model:&quot;smivs_pizza_giftshop&quot;});
    this.missionFlag = &quot;DONE&quot;;
    }
//  next section runs mission screens at visitor centres
  else if(player.ship.docked &amp;&amp; player.ship.dockedStation.hasRole(&quot;smivs_pizza_giftshop&quot;) &amp;&amp; missionVariables.GiantSpacePizza_status == &quot;DEFAULT&quot; &amp;&amp; this.missionFlag &amp;&amp; this.missionFlag === &quot;NO&quot;)
    {
      if 
       (
       missionVariables.GiantSpacePizza_stage === &quot;STAGE_1&quot; ||
       missionVariables.GiantSpacePizza_stage === &quot;STAGE_2&quot; ||
       missionVariables.GiantSpacePizza_stage === &quot;STAGE_3&quot; ||
       missionVariables.GiantSpacePizza_stage === &quot;STAGE_4&quot; ||
       missionVariables.GiantSpacePizza_stage === &quot;STAGE_5&quot; ||
       missionVariables.GiantSpacePizza_stage === &quot;STAGE_6&quot; ||
       missionVariables.GiantSpacePizza_stage === &quot;STAGE_7&quot; ||
       missionVariables.GiantSpacePizza_stage === &quot;STAGE_8&quot; ||
       missionVariables.GiantSpacePizza_stage === &quot;STAGE_9&quot; ||
       missionVariables.GiantSpacePizza_stage === &quot;STAGE_10&quot; ||
       missionVariables.GiantSpacePizza_stage === &quot;STAGE_11&quot; ||
       missionVariables.GiantSpacePizza_stage === &quot;STAGE_12&quot;
       )
// next lines run the standard visitor centre mission screen
       {
       mission.runScreen({title: &quot;Giant Space Pizza Visitor Centre&quot;, messageKey: &quot;SPVC_greeting1&quot;, choicesKey: &quot;space_pizza_history_choice&quot;, background: { name: &quot;SPVC.png&quot;, height: 512 }}, this.choices);
       this.missionFlag = &quot;DONE&quot;;
       }
// If player docks at stage_13...
    else if (missionVariables.GiantSpacePizza_stage === &quot;STAGE_13&quot;)
// next lines run the special &#39;Elite PizzaMan&#39; mission screen
       {
       mission.runScreen({title: &quot;Giant Space Pizza Visitor Centre&quot;, messageKey: &quot;SPVC_greeting3&quot;, choicesKey: &quot;space_pizza_history_choice&quot;, background: { name: &quot;elitePizzaman.png&quot;, height: 512 }}, this.choices);
// then we give the reward!
       player.credits += 35;
       player.ship.fuel = 7.0;
       mission.setInstructionsKey (&quot;elitePizzaman&quot;);
       missionVariables.GiantSpacePizza_stage = &quot;STAGE_14&quot;;
       this.missionFlag = &quot;DONE&quot;;
       }
// If player docks at stage_14...
    else if (missionVariables.GiantSpacePizza_stage === &quot;STAGE_14&quot;) 
// next lines run the standard &#39;Elite PizzaMan&#39; mission screen
       {
      mission.runScreen({title: &quot;Giant Space Pizza Visitor Centre&quot;, messageKey: &quot;SPVC_greeting4&quot;, choicesKey: &quot;space_pizza_history_choice&quot;, background: { name: &quot;elitePizzaman.png&quot;, height: 512 }}, this.choices);
       player.credits += 35;
       player.ship.fuel = 7.0;
       this.missionFlag = &quot;DONE&quot;;
       }
    }
//  next section runs re-visit mission screen at visitor centres
  else if(player.ship.docked &amp;&amp; player.ship.dockedStation.hasRole(&quot;smivs_pizza_giftshop&quot;) &amp;&amp; this.missionFlag &amp;&amp; this.missionFlag === &quot;NO&quot; &amp;&amp; missionVariables.GiantSpacePizza_status == &quot;VISITED_GIFTSHOP&quot;)
    {
      if 
       (
       missionVariables.GiantSpacePizza_stage === &quot;STAGE_1&quot; ||
       missionVariables.GiantSpacePizza_stage === &quot;STAGE_2&quot; ||
       missionVariables.GiantSpacePizza_stage === &quot;STAGE_3&quot; ||
       missionVariables.GiantSpacePizza_stage === &quot;STAGE_4&quot; ||
       missionVariables.GiantSpacePizza_stage === &quot;STAGE_5&quot; ||
       missionVariables.GiantSpacePizza_stage === &quot;STAGE_6&quot; ||
       missionVariables.GiantSpacePizza_stage === &quot;STAGE_7&quot; ||
       missionVariables.GiantSpacePizza_stage === &quot;STAGE_8&quot; ||
       missionVariables.GiantSpacePizza_stage === &quot;STAGE_9&quot; ||
       missionVariables.GiantSpacePizza_stage === &quot;STAGE_10&quot; ||
       missionVariables.GiantSpacePizza_stage === &quot;STAGE_11&quot; ||
       missionVariables.GiantSpacePizza_stage === &quot;STAGE_12&quot; ||
       missionVariables.GiantSpacePizza_stage === &quot;STAGE_13&quot; ||
       missionVariables.GiantSpacePizza_stage === &quot;STAGE_14&quot; 
       )
// next lines run the special mission screen for immediate re-visits to the Visitor Centre
       {
       mission.runScreen({title: &quot;Giant Space Pizza Visitor Centre&quot;, messageKey: &quot;SPVC_greeting5&quot;,background: { name: &quot;SPVC.png&quot;, height: 512 }});
       this.missionFlag = &quot;DONE&quot;;
       }
    }
}

this.choices = function(choice)
{
  switch(choice)
    {
      case &quot;1_Yes&quot;:
        {
  mission.runScreen({title: &quot;History of the Giant Space Pizza&quot;, messageKey: &quot;space_pizza_history1&quot;, choicesKey: &quot;space_pizza_history_continue&quot;, background: { name: &quot;history1.png&quot;, height: 512 }}, this.choices);
  break;
        }
      case &quot;2_No&quot;:
        {
  mission.runScreen({title: &quot;Giant Space Pizza Visitor Centre&quot;, messageKey: &quot;SPVC_greeting2&quot;, background: { name: &quot;pizzaBG.png&quot;, height: 512 }}, this.choices);
  break;
        }
      case &quot;1_Continue&quot;:
        {
  mission.runScreen({title: &quot;History of the Giant Space Pizza&quot;, messageKey: &quot;space_pizza_history2&quot;, choicesKey: &quot;space_pizza_history_finish&quot;, background: { name: &quot;history2.png&quot;, height: 512 }}, this.choices);
  break;
        }
      case &quot;1_Continue1&quot;:
        {
  mission.runScreen({title: &quot;Giant Space Pizza Visitor Centre&quot;, messageKey: &quot;SPVC_greeting2&quot;, background: { name: &quot;pizzaBG.png&quot;, height: 512 }}, this.choices);	
  break;
        }	
    }
}

this.shipWillDockWithStation = function(station)
// prevents stage count from increasing on re-visit to same giftshop
{
 if(station.primaryRole == &quot;smivs_pizza_giftshop&quot; &amp;&amp; missionVariables.GiantSpacePizza_status == &quot;VISITED_GIFTSHOP&quot;)
   {
     return;
   }
// count active visits
 else if(station.primaryRole == &quot;smivs_pizza_giftshop&quot; &amp;&amp; missionVariables.GiantSpacePizza_status == &quot;DEFAULT&quot;)
   {
// Set up stages for count
   if (!missionVariables.GiantSpacePizza_stage)
     {
       missionVariables.GiantSpacePizza_stage = &quot;STAGE_1&quot;;
     }
// then increase count on each visit
   else if (missionVariables.GiantSpacePizza_stage === &quot;STAGE_1&quot;)
     {
       missionVariables.GiantSpacePizza_stage = &quot;STAGE_2&quot;;
     }
   else if (missionVariables.GiantSpacePizza_stage === &quot;STAGE_2&quot;)
     {
       missionVariables.GiantSpacePizza_stage = &quot;STAGE_3&quot;;
     }
   else if (missionVariables.GiantSpacePizza_stage === &quot;STAGE_3&quot;)
     {
       missionVariables.GiantSpacePizza_stage = &quot;STAGE_4&quot;;
     }
   else if (missionVariables.GiantSpacePizza_stage === &quot;STAGE_4&quot;)
     {
       missionVariables.GiantSpacePizza_stage = &quot;STAGE_5&quot;;
     }
   else if (missionVariables.GiantSpacePizza_stage === &quot;STAGE_5&quot;)
     {
       missionVariables.GiantSpacePizza_stage = &quot;STAGE_6&quot;;
     }
   else if (missionVariables.GiantSpacePizza_stage === &quot;STAGE_6&quot;)
     {
       missionVariables.GiantSpacePizza_stage = &quot;STAGE_7&quot;;
     }
   else if (missionVariables.GiantSpacePizza_stage === &quot;STAGE_7&quot;)
     {
       missionVariables.GiantSpacePizza_stage = &quot;STAGE_8&quot;;
     }
   else if (missionVariables.GiantSpacePizza_stage === &quot;STAGE_8&quot;)
     {
       missionVariables.GiantSpacePizza_stage = &quot;STAGE_9&quot;;
     }
   else if (missionVariables.GiantSpacePizza_stage === &quot;STAGE_9&quot;)
     {
       missionVariables.GiantSpacePizza_stage = &quot;STAGE_10&quot;;
     }
   else if (missionVariables.GiantSpacePizza_stage === &quot;STAGE_10&quot;)
     {
       missionVariables.GiantSpacePizza_stage = &quot;STAGE_11&quot;;
     }
   else if (missionVariables.GiantSpacePizza_stage === &quot;STAGE_11&quot;)
     {
       missionVariables.GiantSpacePizza_stage = &quot;STAGE_12&quot;;
     }
   else if (missionVariables.GiantSpacePizza_stage === &quot;STAGE_12&quot;)
     {
       missionVariables.GiantSpacePizza_stage = &quot;STAGE_13&quot;;
     }
   else if (missionVariables.GiantSpacePizza_stage === &quot;STAGE_13&quot;)
     {
       missionVariables.GiantSpacePizza_stage = &quot;STAGE_14&quot;;
     }
   }
}

this.shipDockedWithStation = function(station)
{
 if(station.primaryRole == &quot;smivs_pizza_giftshop&quot;)
   {
// next line deducts visitor fees from player
   player.credits -= 35;
// next lines starts &#39;musak&#39; for giftshop
   this.pizza_musak = new SoundSource; 
   this.pizza_musak.sound = &quot;pizza-musak.ogg&quot;;
   this.pizza_musak.loop = true;
   this.pizza_musak.play();
   }
}

this.shipWillLaunchFromStation = function(station) 
{
 if(station.primaryRole == &quot;smivs_pizza_giftshop&quot;)
   {
// stops giftshop &#39;musak&#39; and re-sets status and mission flag 
   this.pizza_musak.stop();
   missionVariables.GiantSpacePizza_status = &quot;VISITED_GIFTSHOP&quot;;
   this.missionFlag = &quot;NO&quot;;
   }
 if(station.isMainStation)
   {
// reset mission flag
   this.missionFlag = &quot;NO&quot;;
   }
}

this.playerWillEnterWitchspace = function()
// three-jump count after each visit to deter re-visits
{
  if (missionVariables.GiantSpacePizza_status === &quot;VISITED_GIFTSHOP&quot; &amp;&amp; !missionVariables.GiantSpacePizza_jumpCount)
     {
       missionVariables.GiantSpacePizza_jumpCount = &quot;JUMPS_1&quot;;
     }
// then increase count on each jump
  else if (missionVariables.GiantSpacePizza_status === &quot;VISITED_GIFTSHOP&quot; &amp;&amp; missionVariables.GiantSpacePizza_jumpCount === &quot;JUMPS_0&quot;)
    {
       missionVariables.GiantSpacePizza_jumpCount = &quot;JUMPS_1&quot;;
    }
  else if (missionVariables.GiantSpacePizza_status === &quot;VISITED_GIFTSHOP&quot; &amp;&amp; missionVariables.GiantSpacePizza_jumpCount === &quot;JUMPS_1&quot;)
    {
       missionVariables.GiantSpacePizza_jumpCount = &quot;JUMPS_2&quot;;
    }
  else if (missionVariables.GiantSpacePizza_status === &quot;VISITED_GIFTSHOP&quot; &amp;&amp; missionVariables.GiantSpacePizza_jumpCount === &quot;JUMPS_2&quot;)
    {
       missionVariables.GiantSpacePizza_jumpCount = &quot;JUMPS_3&quot;;
    }
  else if (missionVariables.GiantSpacePizza_status === &quot;VISITED_GIFTSHOP&quot; &amp;&amp; missionVariables.GiantSpacePizza_jumpCount === &quot;JUMPS_3&quot;)
    {
       missionVariables.GiantSpacePizza_jumpCount = &quot;JUMPS_0&quot;;
       missionVariables.GiantSpacePizza_status = &quot;DEFAULT&quot;;
    }
// Prevent pizza system going nova
// Code by cim
  if (galaxyNumber != 3) { return; }
  if (missionVariables.novacount &gt;= 2 &amp;&amp;
        !missionVariables.nova &amp;&amp;
        (player.ship.targetSystem == 134 || player.ship.targetSystem == 189))
  {
    missionVariables.novacount = 1; //delay the nova mission
  }
}
</pre></td>
                </tr>
            </table>
        </a>
    </body>
</html>
