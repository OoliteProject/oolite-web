<html>
    <head>
        <title>Expansion SniperLock</title>
        <link rel="stylesheet" href="../style.css">
    </head>
    <body>
        <table border="0" width="100%">
            <tr>
                <td>Back to <a href='../index.html'>Index</a></td>
                <td align="right"><small>Page generated: Oct 11, 2023, 3:16:48 PM</small></td>
            </tr>
        </table>

        <h1>Expansion SniperLock</h1>

        <h2>Content</h2>
        <ul>
          <li><a href="#warnings">Warnings</a></li>
          <li><a href="#manifest">Manifest</a></li>
          <li><a href="#documentation">Documentation</a></li>
          <li><a href="#equipment">2 Equipment</a></li>
          <li><a href="#ships">0 Ships</a></li>
          <li><a href="#models">0 Models</a></li>
          <li><a href="#scripts">1 Scripts</a></li>
        </ul>

          <a name="warnings">
            <h2>Warnings</h2>
            <ol>
                <li>Tags mismatch between OXP Manifest and Expansion Manager at character position 0002 (RIGHT SQUARE BRACKET vs LATIN CAPITAL LETTER E)(&#39;[]&#39; vs &#39;[Equipment]&#39;)</li>
            </ol>
          </a>

        <a name="manifest">
        <h2>Manifest</h2>
            <table border="1">
                <tr>
                    <th></th>
                    <th>from Expansion Manager's OXP list</th>
                    <th>from Expansion Manifest</th>
                </tr>
                <tr>
                    <td>Description</td>
                    <td>SniperLock software allows for more accurate targetting by enabling longer dwell times on targets.</td>
                    <td>SniperLock software allows for more accurate targetting by enabling longer dwell times on targets.</td>
                </tr>
                <tr>
                    <td>Identifier</td>
                    <td>oolite.oxp.CommonSenseOTB.SniperLock</td>
                    <td>oolite.oxp.CommonSenseOTB.SniperLock</td>
                </tr>
                <tr>
                    <td>Title</td>
                    <td>SniperLock</td>
                    <td>SniperLock</td>
                </tr>
                <tr>
                    <td>Category</td>
                    <td>Equipment</td>
                    <td>Equipment</td>
                </tr>
                <tr>
                    <td>Author</td>
                    <td>CommonSenseOTB</td>
                    <td>CommonSenseOTB</td>
                </tr>
                <tr>
                    <td>Version</td>
                    <td>1.0.0</td>
                    <td>1.0.0</td>
                </tr>
                <tr>
                    <td>Tags</td>
                    <td></td>
                    <td>Equipment</td>
                </tr>
                <tr>
                    <td>Required Oolite Version</td>
                    <td></td>
                    <td></td>
                </tr>
                <tr>
                    <td>Maximum Oolite Version</td>
                    <td></td>
                    <td></td>
                </tr>
                <tr>
                    <td>Required Expansions</td>
                    <td>
                    </td>
                    <td>
                    </td>
                </tr>
                <tr>
                    <td>Optional Expansions</td>
                    <td>
                    </td>
                    <td>
                    </td>
                </tr>
                <tr>
                    <td>Conflict Expansions</td>
                    <td>
                    </td>
                    <td>
                    </td>
                </tr>
                <tr>
                    <td>Information URL</td>
                    <td><a target="_blank" href="http://wiki.alioth.net/index.php/SniperLock">http://wiki.alioth.net/index.php/SniperLock</a></td>
                    <td><a target="_blank" href="">n/a</a></td>
                </tr>
                <tr>
                    <td>Download URL</td>
                    <td><a target="_blank" href="https://wiki.alioth.net/img_auth.php/b/b1/Oolite.oxp.CommonSenseOTB.SniperLock.oxz">https://wiki.alioth.net/img_auth.php/b/b1/Oolite.oxp.CommonSenseOTB.SniperLock.oxz</a></td>
                    <td><a target="_blank" href="">n/a</a></td>
                </tr>
                <tr>
                    <td>License</td>
                    <td>CC BY-NC-SA 3.0</td>
                    <td>CC BY-NC-SA 3.0</td>
                </tr>
                <tr>
                    <td>File Size</td>
                    <td>n/a</td>
                </tr>
                <tr>
                    <td>Upload date</td>
                    <td>1610873445</td>
                </tr>
            </table>
                </a>

        <a name="documentation">
        <h2>Documentation</h2>
        <p>Also read <a href='http://wiki.alioth.net/index.php/SniperLock'>http://wiki.alioth.net/index.php/SniperLock</a></p>
        <h3>README.md</h3>
        <pre># SniperLock
SniperLock software allows for  more accurate targeting by enabling longer dwell times on targets.
</pre>
        <h3>README.txt</h3>
        <pre>
CommonSense &#39;Outside-the-Box&#39; Design Studios Ltd. is happy to announce the latest design in 
software upgrades for use in all ranges of space vessels. SniperLock software allows for 
more accurate targetting by enabling longer dwell times on targets. The new control system 
will be in effect when the software upgrade known as &quot;SniperLockv1.oxp&quot; is placed in the 
space vessels&#39; computer&#39;s AddOns folder. We hope you will find the 500 credit price to be a 
real bargain. Available at all shipyards tech level 12+. Thank you for your patronage. 

THIS OXP IS A PRODUCTION OF COMMONSENSE &#39;OUTSIDE-THE-BOX&#39; DESIGN STUDIOS LTD.
Author: CommonSenseOTB


USER CUSTOMIZABILITY:

For those with drifting joysticks, disabilities, unnaturally poor aim, and for other reasons, 
you now have the option of adjusting how accurate you have to aim to get a lock, how much 
force you have to apply to the controls to force an unlock, and how long the lock will last.
You may go to the startup function of the sniperlock script and set your own adjusted values.


COMPATIBILITY:
Oolite version 1.75.3 due to CTD frame callback issues in previous oolite versions.
Sniperlock software requires scanner targetting enhancement to be installed to operate.
Can be used with most heads-up-display systems.
Compatible with target tracker.
No dependancies.
					   

Author: CommonSenseOTB(thinking outside-the-box for your playing enjoyment and the improvement of oolite)
Completed: Dec. 17, 2011

SniperLock.oxp.

SniperLock software acts as an intermediary between you and your ship. When you have a great 
shot lined up on your currently selected target, the software temporarily takes micro-control 
over the ships attitude thrusters to keep the ship lined up on target. The override lasts for 
a fraction of a second and provided the pilot continues to aim, the software can then re-lock 
again and again. The pilot may override the lock-on by simply pushing slightly on the pitch 
or yaw controls. The best way to use this software upgrade is not to think about it. Fly and 
aim normally and the system will automatically micro-correct any minor misalignment in your 
aim. Fire a laser burst at the beginning of each lock-on for most effective results.
SniperLock software is not perfect and there may be a slight lag as the target is tracked. 
Sudden evasive movements and fuel injecting by the target may break the lock-on. Also, due to 
liability issues, the software will only initiate lock-on with targets over 5km distant to 
avoid the possibility of collisions.
SniperLock software and control interface works with most other targetting systems and 
heads-up-displays. Any odd behaviour should be reported to the software arm of 
CommonSense &#39;Outside-the-Box&#39; Design Studios Ltd., of which SniperLock is a wholly owned 
subsidiary.

When you want to keep the bad guys out of arms reach, get SniperLock. Legal in all 8 sectors.


THANX AND RECOGNITION: Okti for the example of basic code to orient the ship contained in his
                       oxp target tracker. I learn best by seeing examples of code that works, 
					   many of which are already being used in my hud concepts. Much thanks.
					   THANK YOU ALL FOR YOUR SUPPORT AND HELP!   -Sincerely, CommonSenseOTB.

ABOUT THIS PRODUCT: SniperLockv1.oxp requires oolite 1.75.3 or better. The frame callbacks used 
                    may occasionally cause a CTD when you die in versions of oolite earlier 
					than 1.75.3.					

TO USE THIS OXP: Unzip and drag or move the SniperLockv1.oxp folder into your addons folder.


License:

This OXP is released under the Creative Commons Attribution - Non-Commercial -
Share Alike 3.0 license with the following clauses:

* Attribution to the author CommonSenseOTB
* Whilst you are free (and encouraged) to re-use any of the scripting in this OXP, the 
  usage must be distinct from that within this OXP. Unique identifiers such as 
  (but not limited to) unique shipdata.plist entity keys, mission variables, script names 
  (this.name), equipment identity strings (EQ_), description list arrays and entity roles 
  must not be re-used without prior agreement. Basically if it&#39;s unique or would identify or 
  overwrite anything in the original OXP, then you may not re-use it (for obvious compatibility
  reasons).
* rebundling of this OXP within another distribution is permitted as long as it is unchanged.
  The following derivates however are permitted and except from the above:
  * the conversion of files between XML and openStep.
  * the merging of files with other files of the same type from other OXPs.
* The license information (either as this file or merged into a larger one) must be included 
  in the OXP.
* Even though it is not compulsory, if you are re-using any sizable or recognisable piece of 
  this OXP, please let me know :)</pre>
        </a>

        <a name="equipment">          
        <h2>Equipment</h2>
            <table>
                <tr>
                    <th>Name</th>
                    <th>Visible</th>
                    <th>Cost [deci-credits]</th>
                    <th>Tech-Level</th>
                </tr>
                <tr>
                    <td><a href="../equipment/EQ_SNIPERLOCK.html">SniperLock Software &amp; Control Interface</a></td>
                    <td>yes</td>
                    <td align="right">5000</td>
                    <td align="center">12+</td>
                </tr>
                <tr>
                    <td><a href="../equipment/EQ_SNIPERLOCK_REMOVAL.html">Sell SniperLock</a></td>
                    <td>yes</td>
                    <td align="right">0</td>
                    <td align="center">12+</td>
                </tr>
            </table>
        </a>

        <a name="ships">    
        <h2>Ships</h2>
            This expansion declares no ships. This may be related to warnings.
        </a>

        <a name="models">    
        <h2>Models</h2>
            This expansion declares no models. This may be related to warnings.
        </a>

        <a name="scripts">    
        <h2>Scripts</h2>
            <table>
                <tr>
                    <th>Path</th>
                </tr>
                <tr>
                    <td valign="top">Scripts/sniperlock.js</td>
                    <td><pre>this.name               = &quot;sniperlock&quot;;
this.author               = &quot;CommonSenseOTB&quot;;
this.copyright            = &quot;Copyright Dec. 17, 2011 by CommonSenseOTB, licensed under Creative Commons: attribution, non-commercial, sharealike with clauses - see readme.txt&quot;;
this.description         = &quot;Sniperlock Script&quot;;
this.version            = &quot;1.0&quot;;

this.startUp = function()
   {
   // You may toggle the difficulty to lock and unlock, and duration. This has applications for compensating for joysticks that drift slightly, persons with disabilities, and persons who find it difficult to keep a constant aim at a target.
   // It is possible to tweak these to suit your own capability to aim and constantly maintain that aim.
   //
   // The current settings are quite balanced and should not prove too uber.
   //
   // YOU MAY TOUCH THESE
   //
   this.sniperlockdifficultylock = 0.002;// default is 0.002, this determines how accurate you have to aim to get a lock, set lower to make it harder to get a lock, higher to make it easier to get a lock.
   this.sniperlockdifficultyunlock = 0.06;// default is 0.06, this determines how much force you have to apply to the controls to force an unlock and how large a movement the target has to make to break the lock, set lower to make it easier to unlock, higher to make it harder to unlock.
   this.sniperlockduration = 12;// default is 12, this determines how long the lock will last, set lower to make the lock time shorter, higher to make the lock time longer.
   //
   //
   //
   // DO NOT TOUCH THESE PLEASE
   //
   // OXP DEVELOPERS: deactivation switch provided for remote access by other oxps
   //
   this.deactivate = &quot;FALSE&quot;;// default is &quot;FALSE&quot;, scripters can deactivate this oxp by setting to &quot;TRUE&quot;;
   //
   this.sniperlockchangeflag = &quot;OFF&quot;;// flag to engage sniperlock control software
   this.sniperlockcounter = 0;//counter to control sniperlock time
   this.sniperlocktargetlastposition1 = &quot;&quot;;// aim is 1 frame behind true target position
   this.sniperlocktargetlastposition2 = &quot;&quot;;// aim is 2 frames behind true target position
   this.sniperlocktargetlastposition3 = &quot;&quot;;// aim is 3 frames behind true target position
   }  

this.playerBoughtEquipment = function(equipmentKey)
   {     
   if(equipmentKey === (&quot;EQ_SNIPERLOCK_REMOVAL&quot;))
      {
      player.ship.removeEquipment(&quot;EQ_SNIPERLOCK&quot;);
      player.ship.removeEquipment(&quot;EQ_SNIPERLOCK_REMOVAL&quot;);
      player.credits += 250;
      }
   }
   
this.shipWillLaunchFromStation = function()
   {
   this.sl = addFrameCallback(this.sniperLock.bind(this));//----------   
   }

this.shipDockedWithStation = function()
   {
   removeFrameCallback(this.sl);//----------
   }
   
this.shipWillEnterWitchspace = function()
   {
   removeFrameCallback(this.sl);//----------
   }
   
this.shipExitedWitchspace = function()
   {
   this.sl = addFrameCallback(this.sniperLock.bind(this));//----------   
   }
   
this.sniperLock = function()
   {
   if((!player.ship.target) || (player.ship.equipmentStatus(&quot;EQ_SNIPERLOCK&quot;) !== &quot;EQUIPMENT_OK&quot;) || (player.ship.equipmentStatus(&quot;EQ_SCANNER_SHOW_MISSILE_TARGET&quot;) !== &quot;EQUIPMENT_OK&quot;) || (this.deactivate === &quot;TRUE&quot;))
      {
	  if(this.sniperlockchangeflag !== &quot;OFF&quot;)
         {
	     this.sniperlocktargetlastposition1 = &quot;&quot;;
	     this.sniperlocktargetlastposition2 = &quot;&quot;;
	     this.sniperlocktargetlastposition3 = &quot;&quot;;
	     this.sniperlockchangeflag = &quot;OFF&quot;;
	     this.sniperlockcounter = 0;
		 return;
	     }
      return;
      }
   if(player.ship.target.isValid)
      {
      this.sniperlocktargetrangevalue = ((player.ship.position.distanceTo(player.ship.target.position) - player.ship.target.collisionRadius) / 1000);
	  }
   else
      {
	  this.sniperlocktargetrangevalue = 0;
	  }
   if((this.sniperlockchangeflag === &quot;READY&quot;) &amp;&amp; (this.sniperlocktargetrangevalue &gt; 5.0) &amp;&amp; (this.sniperlocktargetrangevalue &lt; 25.6))
      {
	  if(player.ship.viewDirection === &quot;VIEW_FORWARD&quot;)
	     {
	     let readytv = player.ship.target.position.subtract(player.ship.position).direction();
         let readya = player.ship.heading.angleTo(readytv);
	        {
		    if(readya &lt;= this.sniperlockdifficultylock)
	           {
               this.sniperlocktargetlastposition1 = player.ship.target.position;
               this.sniperlocktargetlastposition2 = player.ship.target.position;
               this.sniperlocktargetlastposition3 = player.ship.target.position;
               this.sniperlockchangeflag = &quot;ON&quot;;
			   }
            }
         }
      if(player.ship.viewDirection === &quot;VIEW_AFT&quot;)
	     {
	     let readytv = player.ship.target.position.subtract(player.ship.position).direction();
         let readya = player.ship.heading.multiply(-1).angleTo(readytv);
	        {
		    if(readya &lt;= this.sniperlockdifficultylock)
	           {
               this.sniperlocktargetlastposition1 = player.ship.target.position;
               this.sniperlocktargetlastposition2 = player.ship.target.position;
               this.sniperlocktargetlastposition3 = player.ship.target.position;
               this.sniperlockchangeflag = &quot;ON&quot;;
			   }
            }
         }
      }
   if((this.sniperlockchangeflag === &quot;ON&quot;) &amp;&amp; (this.sniperlocktargetrangevalue &gt; 5.0) &amp;&amp; (this.sniperlocktargetrangevalue &lt; 25.6))
      {
	  if(player.ship.viewDirection === &quot;VIEW_FORWARD&quot;)
	     {
	     this.sniperlockcounter += 1;
	     let disengagetv = player.ship.target.position.subtract(player.ship.position).direction();
         let disengagea = player.ship.heading.angleTo(disengagetv);
		 if((disengagea &gt; this.sniperlockdifficultyunlock) || (this.sniperlockcounter &gt; this.sniperlockduration))
	        {
			this.sniperlocktargetlastposition1 = &quot;&quot;;
            this.sniperlocktargetlastposition2 = &quot;&quot;;
            this.sniperlocktargetlastposition3 = &quot;&quot;;
            this.sniperlockchangeflag = &quot;READY&quot;;
			this.sniperlockcounter = 0;
			return;
            }
         let tv = this.sniperlocktargetlastposition3.subtract(player.ship.position).direction();
         let a = player.ship.heading.angleTo(tv);
         let cr = player.ship.heading.cross(tv).direction();
         player.ship.orientation = player.ship.orientation.rotate(cr,-a);
         this.sniperlocktargetlastposition3 = this.sniperlocktargetlastposition2;
         this.sniperlocktargetlastposition2 = this.sniperlocktargetlastposition1;
	     this.sniperlocktargetlastposition1 = player.ship.target.position;
		 }
      if(player.ship.viewDirection === &quot;VIEW_AFT&quot;)
	     {
	     this.sniperlockcounter += 1;
	     let disengagetv = player.ship.target.position.subtract(player.ship.position).direction();
         let disengagea = player.ship.heading.multiply(-1).angleTo(disengagetv);
		 if((disengagea &gt; this.sniperlockdifficultyunlock) || (this.sniperlockcounter &gt; this.sniperlockduration))
	        {
			this.sniperlocktargetlastposition1 = &quot;&quot;;
            this.sniperlocktargetlastposition2 = &quot;&quot;;
            this.sniperlocktargetlastposition3 = &quot;&quot;;
            this.sniperlockchangeflag = &quot;READY&quot;;
			this.sniperlockcounter = 0;
			return;
            }
         let tv = this.sniperlocktargetlastposition3.subtract(player.ship.position).direction();
         let a = player.ship.heading.multiply(-1).angleTo(tv);
         let cr = player.ship.heading.multiply(-1).cross(tv).direction();
         player.ship.orientation = player.ship.orientation.rotate(cr,-a);
         this.sniperlocktargetlastposition3 = this.sniperlocktargetlastposition2;
         this.sniperlocktargetlastposition2 = this.sniperlocktargetlastposition1;
	     this.sniperlocktargetlastposition1 = player.ship.target.position;
		 }
      }
   if((this.sniperlockchangeflag === &quot;ON&quot;) &amp;&amp; (this.sniperlocktargetrangevalue &lt;= 5.0))
      {
	  this.sniperlocktargetlastposition1 = &quot;&quot;;
      this.sniperlocktargetlastposition2 = &quot;&quot;;
      this.sniperlocktargetlastposition3 = &quot;&quot;;
      this.sniperlockchangeflag = &quot;READY&quot;;
	  this.sniperlockcounter = 0;
      }
   }
   
this.shipTargetAcquired = function()
   {
   if(this.deactivate === &quot;FALSE&quot;)
      {
      this.sniperlocktargetlastposition1 = &quot;&quot;;
      this.sniperlocktargetlastposition2 = &quot;&quot;;
      this.sniperlocktargetlastposition3 = &quot;&quot;;
      this.sniperlockchangeflag = &quot;READY&quot;;
      this.sniperlockcounter = 0;
	  }
   }

this.shipDied = function()
   {
   removeFrameCallback(this.sl);//----------
   }	  
</pre></td>
                </tr>
            </table>
        </a>
    </body>
</html>
