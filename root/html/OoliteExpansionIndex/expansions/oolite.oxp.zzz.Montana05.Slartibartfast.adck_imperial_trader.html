<html>
    <head>
        <title>Expansion ADCK Imperial Trader</title>
        <link rel="stylesheet" href="../style.css">
    </head>
    <body>
        <table border="0" width="100%">
            <tr>
                <td>Back to <a href='../index.html'>Index</a></td>
                <td align="right"><small>Page generated: Oct 11, 2023, 3:16:49 PM</small></td>
            </tr>
        </table>

        <h1>Expansion ADCK Imperial Trader</h1>

        <h2>Content</h2>
        <ul>
          <li><a href="#warnings">Warnings</a></li>
          <li><a href="#manifest">Manifest</a></li>
          <li><a href="#documentation">Documentation</a></li>
          <li><a href="#equipment">1 Equipment</a></li>
          <li><a href="#ships">29 Ships</a></li>
          <li><a href="#models">0 Models</a></li>
          <li><a href="#scripts">3 Scripts</a></li>
        </ul>

          <a name="warnings">
            <h2>Warnings</h2>
            <ol>
                <li>http://wiki.alioth.net/index.php/ADCK%20Imperial%20Trader -&gt; 404 Not Found</li>
                <li>Low hanging fuit: Information URL exists...</li>
                <li>Tags mismatch between OXP Manifest and Expansion Manager at character position 0002 (RIGHT SQUARE BRACKET vs LATIN CAPITAL LETTER F)(&#39;[]&#39; vs &#39;[Frontier ships]&#39;)</li>
            </ol>
          </a>

        <a name="manifest">
        <h2>Manifest</h2>
            <table border="1">
                <tr>
                    <th></th>
                    <th>from Expansion Manager's OXP list</th>
                    <th>from Expansion Manifest</th>
                </tr>
                <tr>
                    <td>Description</td>
                    <td>The Imperial Trader is an adaptation of the military vessel found in the service of the Achenar Empire. While inferior to the technology of the Imperial Navy this is a notable vessel for GalCop standards. For more details, please check the wiki page.</td>
                    <td>The Imperial Trader is an adaptation of the military vessel found in the service of the Achenar Empire. While inferior to the technology of the Imperial Navy this is a notable vessel for GalCop standards. For more details, please check the wiki page.</td>
                </tr>
                <tr>
                    <td>Identifier</td>
                    <td>oolite.oxp.zzz.Montana05.Slartibartfast.adck_imperial_trader</td>
                    <td>oolite.oxp.zzz.Montana05.Slartibartfast.adck_imperial_trader</td>
                </tr>
                <tr>
                    <td>Title</td>
                    <td>ADCK Imperial Trader</td>
                    <td>ADCK Imperial Trader</td>
                </tr>
                <tr>
                    <td>Category</td>
                    <td>Ships</td>
                    <td>Ships</td>
                </tr>
                <tr>
                    <td>Author</td>
                    <td>ADCK, Slartibartfast, Montana05</td>
                    <td>ADCK, Slartibartfast, Montana05</td>
                </tr>
                <tr>
                    <td>Version</td>
                    <td>2.11</td>
                    <td>2.11</td>
                </tr>
                <tr>
                    <td>Tags</td>
                    <td></td>
                    <td>Frontier ships</td>
                </tr>
                <tr>
                    <td>Required Oolite Version</td>
                    <td></td>
                    <td></td>
                </tr>
                <tr>
                    <td>Maximum Oolite Version</td>
                    <td></td>
                    <td></td>
                </tr>
                <tr>
                    <td>Required Expansions</td>
                    <td>
                    </td>
                    <td>
                    </td>
                </tr>
                <tr>
                    <td>Optional Expansions</td>
                    <td>
                    </td>
                    <td>
                    </td>
                </tr>
                <tr>
                    <td>Conflict Expansions</td>
                    <td>
                    </td>
                    <td>
                    </td>
                </tr>
                <tr>
                    <td>Information URL</td>
                    <td><a target="_blank" href="https://wiki.alioth.net/index.php/Imperial_Trader_(Oolite)">https://wiki.alioth.net/index.php/Imperial_Trader_(Oolite)</a></td>
                    <td><a target="_blank" href="">n/a</a></td>
                </tr>
                <tr>
                    <td>Download URL</td>
                    <td><a target="_blank" href="https://wiki.alioth.net/img_auth.php/a/ae/Oolite.oxp.zzz.Montana05.Slartibartfast.adck_imperial_trader.OXZ">https://wiki.alioth.net/img_auth.php/a/ae/Oolite.oxp.zzz.Montana05.Slartibartfast.adck_imperial_trader.OXZ</a></td>
                    <td><a target="_blank" href="">n/a</a></td>
                </tr>
                <tr>
                    <td>License</td>
                    <td>CC BY-NC-SA 4.0</td>
                    <td>CC BY-NC-SA 4.0</td>
                </tr>
                <tr>
                    <td>File Size</td>
                    <td>n/a</td>
                </tr>
                <tr>
                    <td>Upload date</td>
                    <td>1658979011</td>
                </tr>
            </table>
                </a>

        <a name="documentation">
        <h2>Documentation</h2>
        
        <h3>read_me.txt</h3>
        <pre>
Overview
========

Designed along the same line as the Imperial Courier, in the Imperial Navy&#39;s Battle Line, the Imperial Trader 
is a troop transport/boarding vessel.

In civilian life, it does however, commonly fulfill the role it&#39;s name belies.

People venture into space for all sorts of reasons - to live the life they want to live, to make money, 
impress women, explore the galaxy etc. etc. - This ship will enable you to do all of these things.
Get one as soon as you can.

The Imperial Trader is an adaptation of the military vessel found in the service of the Achenar Empire. While 
inferior to the technology of the Imperial Navy this is a notable vessel for GalCop standards.

History
=======

For years, ships of the Achenar Empire could be spotted in GalCop space, although these encounters were rare. This changed
when ADCK Transport Ltd acquired from unknown sources various blueprints from outer-GalCop ships. Adapting this ships to
conventional technology caused nightmares to the design department, but finally the Imperial Trader was introduced 
to the public.

While the ship proved to be a great success, after years of pressure from the authorities the company was forced to
stop the production and introduce 2 specialized alternatives instead. The T-01 (transport) is a well armed trader while
the C-01 (combat) is a powerful vessel for individuals and organizations in need of a significant weaponry. Though 
officially a license is required to own a C-01 a quick check of the shipyards will show that this regulation 
is widely ignored.

Remarks
=======

This OXP features an adaptation of the military vessel found in David Braben&#39;s Frontier game.

The ship is based on the Imperial Trader OXP (2010, outdated) and the ADCK&#39;s FFE Ships OXP (2011). Most specifications
of the T-01 are from Dertien&#39;s version of the Imperial Trader (BBS Shippack OXP).

With V 2.10 the Achenar Pulse Laser Class 2 is introduced as the armament of the Empire ship. This weapon is not
available on the open market. Additionally at some variants the engines now could be shot off, resulting in the loss 
of speed and a laser mount of the target.

Credits
=======

David Braben (Frontier game)
ADCK (author, models, basic textures and basic specifications)
Dertien (basic specifications of the T-01)
Slartibartfast (various modifications and corrections)
Griff (model and basic textures of the escape pods)
another_commander (basic specular map of the escape pods)

Requirements
============

Oolite V 1.88 or higher.

Compatibility
=============

If you are currently flying the player-ship from ADCK&#39;s FFE Ships OXP you will face some changes after installing this
package:

Your energy is a bit decreased while your trust is a little up. 
The ship texture is replaced with materials using the latest standards.
The after view and the weapon positions are corrected.

Otherwise both packages don&#39;t interfere with each other.

Details
=======

For additional details, please check the wiki-page: https://wiki.alioth.net/index.php/Imperial_Trader_(Oolite)

License
=======

This work is licensed under Creative Commons Attribution Non-Commercial Share Alike 4.0 International (CC BY-NC-SA 4.0).
To view a copy of this license, visit https://creativecommons.org/licenses/by-nc-sa/4.0

Version History
===============

V 2.11 (Montana05, 2022/07/28)

    fixed an issue with flashers on subentities
    correction of a viewpoint
    improvement of speed reduction calculation for lost engines


V 2.10 (Montana05, 2022/07/05)

    better adaption to the Galactic Almanac OXZ
    script for the fragile engines
    new lasers for the outer-GalCop ship (not available on the market)
    added escape pods and cargo
    some small tweaks

V 2.01 (Montana05, 2022/04/27)

    fixed a copy &amp; paste error in the shipdata.plist
    added a very rare NPC version, intended as eye-candy only

V 2.00 (Slartibartfast &amp; Montana05, 2022/04/23)

    conversion of the original OXP (Slartibartfast)
    fix of the subentities (Slartibartfast)
    correction of a viewpoint (Slartibartfast)
    added shiplibrary.plist (Slartibartfast)
    improvement of the materials (Montana05)
    included 2 new versions, both NPC and player (Montana05)
    synchronized the package with ADCK&#39;s FFE Ships OXP (Montana05)
    minor adjustments of the package (Montana05)

V 1.00 (ADCK, 2011/07/03)

    ADCK&#39;s FFE Ships OXP (various ships, including this one)

V 1.00 (ADCK, 2010/06/14)

    Imperial Trader OXP (outdated)
</pre>
        </a>

        <a name="equipment">          
        <h2>Equipment</h2>
            <table>
                <tr>
                    <th>Name</th>
                    <th>Visible</th>
                    <th>Cost [deci-credits]</th>
                    <th>Tech-Level</th>
                </tr>
                <tr>
                    <td><a href="../equipment/EQ_WEAPON_ACHENAR_PULSE_02_LASER.html">Achenar Pulse Laser Class 2</a></td>
                    <td>yes</td>
                    <td align="right">60000</td>
                    <td align="center">15+</td>
                </tr>
            </table>
        </a>

        <a name="ships">    
        <h2>Ships</h2>
            <table>
                <tr>
                    <th>Name</th>
                </tr>
                <tr>
                    <td><a href="../ships/adck_imperial_trader.html">Imperial Trader</a></td>
                </tr>
                <tr>
                    <td><a href="../ships/adck_imperial_trader_C01.html">Imperial Trader C-01</a></td>
                </tr>
                <tr>
                    <td><a href="../ships/adck_imperial_trader_C01_bhg.html">BHG Imperial Trader C-01</a></td>
                </tr>
                <tr>
                    <td><a href="../ships/adck_imperial_trader_C01_bhg_engine.html">Imperial Trader Engine</a></td>
                </tr>
                <tr>
                    <td><a href="../ships/adck_imperial_trader_C01_bhg_team_01.html">adck_imperial_trader_C01_bhg_team_01</a></td>
                </tr>
                <tr>
                    <td><a href="../ships/adck_imperial_trader_C01_engine.html">Imperial Trader Engine</a></td>
                </tr>
                <tr>
                    <td><a href="../ships/adck_imperial_trader_C01_pirate.html">Imperial Trader C-01</a></td>
                </tr>
                <tr>
                    <td><a href="../ships/adck_imperial_trader_C01_player.html">Imperial Trader C-01</a></td>
                </tr>
                <tr>
                    <td><a href="../ships/adck_imperial_trader_T01.html">Imperial Trader T-01</a></td>
                </tr>
                <tr>
                    <td><a href="../ships/adck_imperial_trader_T01_convoy_01.html">adck_imperial_trader_T01_convoy_01</a></td>
                </tr>
                <tr>
                    <td><a href="../ships/adck_imperial_trader_T01_engine.html">Imperial Trader Engine</a></td>
                </tr>
                <tr>
                    <td><a href="../ships/adck_imperial_trader_T01_player.html">Imperial Trader T-01</a></td>
                </tr>
                <tr>
                    <td><a href="../ships/adck_imperial_trader_empire.html">Imperial Trader</a></td>
                </tr>
                <tr>
                    <td><a href="../ships/adck_imperial_trader_empire_container_alien_items.html">Emperial Cargo container</a></td>
                </tr>
                <tr>
                    <td><a href="../ships/adck_imperial_trader_empire_container_luxuries.html">adck_imperial_trader_empire_container_luxuries</a></td>
                </tr>
                <tr>
                    <td><a href="../ships/adck_imperial_trader_empire_container_quirium_crystal.html">adck_imperial_trader_empire_container_quirium_crystal</a></td>
                </tr>
                <tr>
                    <td><a href="../ships/adck_imperial_trader_empire_container_slaves.html">adck_imperial_trader_empire_container_slaves</a></td>
                </tr>
                <tr>
                    <td><a href="../ships/adck_imperial_trader_empire_engine.html">Imperial Trader Engine</a></td>
                </tr>
                <tr>
                    <td><a href="../ships/adck_imperial_trader_engine_port.html">Imperial Trader Engine</a></td>
                </tr>
                <tr>
                    <td><a href="../ships/adck_imperial_trader_engine_starboard.html">Imperial Trader Engine</a></td>
                </tr>
                <tr>
                    <td><a href="../ships/adck_imperial_trader_engine_top.html">Imperial Trader Engine</a></td>
                </tr>
                <tr>
                    <td><a href="../ships/adck_imperial_trader_escape_pod_bhg.html">escape pod</a></td>
                </tr>
                <tr>
                    <td><a href="../ships/adck_imperial_trader_escape_pod_bhg_criminal.html">escape pod</a></td>
                </tr>
                <tr>
                    <td><a href="../ships/adck_imperial_trader_escape_pod_std.html">escape pod</a></td>
                </tr>
                <tr>
                    <td><a href="../ships/adck_imperial_trader_escape_pod_std_criminal.html">escape pod</a></td>
                </tr>
                <tr>
                    <td><a href="../ships/adck_imperial_trader_escape_pod_std_passenger.html">escape pod</a></td>
                </tr>
                <tr>
                    <td><a href="../ships/adck_imperial_trader_escape_pod_std_pirate.html">escape pod</a></td>
                </tr>
                <tr>
                    <td><a href="../ships/adck_imperial_trader_pirate.html">Imperial Trader</a></td>
                </tr>
                <tr>
                    <td><a href="../ships/adck_imperial_trader_player.html">Imperial Trader</a></td>
                </tr>
            </table>
        </a>

        <a name="models">    
        <h2>Models</h2>
            This expansion declares no models. This may be related to warnings.
        </a>

        <a name="scripts">    
        <h2>Scripts</h2>
            <table>
                <tr>
                    <th>Path</th>
                </tr>
                <tr>
                    <td valign="top">Scripts/adck_imperial_trader.js</td>
                    <td><pre>this.name			= &quot;adck_imperial_trader&quot;;
this.author			= &quot;Montana05&quot;;
this.description	= &quot;event handler for the ADCK Imperial Trader OXP&quot;;
this.version		= &quot;2.11&quot;;
this.copyright		= &quot;2022 Montana05&quot;;
this.licence		= &quot;CC BY-NC-SA 4.0&quot;;
&quot;use strict&quot;;

this.shipSpawned = function(ship)
{
	if(ship.dataKey.search(/adck_imperial_trader/i) &lt; 0 || ship.hasRole(&quot;cargopod&quot;) || ship.isSubEntity || ship.isPlayer)
	{
		return;
	}
	else
	{
		var shipType = ship.dataKey;
		var shipRole = ship.primaryRole;
		var cargoLoad = ship.cargoSpaceUsed;

		// setup escape pods
		if(ship.hasRole(&quot;escape-capsule&quot;))
		{
			let crewName = expandDescription(&quot;[nom]&quot;);
			let crewDescription = &quot;a crew member of an evacuated ship&quot;;
			let crewRole = &quot;hunter&quot;;  // the role is not particular important anymore, all data will be added by the script
			let crewRace = expandDescription(&quot;[adck_imperial_trader_races_scientific]&quot;);  // add a race to the crew members
			let crewRank = expandDescription(&quot;[adck_imperial_trader_crew_civil_medium]&quot;);
			let bhgRank = &quot;Hunter&quot;;  // middle rank
			let crewInsurance = this.$getRndInteger(90, 450);
			let crewBounty = 0;

			// ranks for Bounty Hunter Guild taken from Random Hits OXP, all credits to LittleBear
			const adck_imperial_trader_bhg_ranks_array = 
			[&quot;Outsider&quot;, &quot;Recruit&quot;, &quot;Vigilante&quot;, &quot;Bailiff&quot;, &quot;Deputy&quot;, &quot;Tracker&quot;, &quot;Hunter&quot;, &quot;Sheriff&quot;, &quot;Provost&quot;, &quot;Marshal&quot;, &quot;Enforcer&quot;, &quot;Executioner&quot;, &quot;Judge&quot;];
			bhgRank = 
			adck_imperial_trader_bhg_ranks_array[Math.floor(Math.random() * adck_imperial_trader_bhg_ranks_array.length)];
			
			switch(shipType)
			{
				case &quot;adck_imperial_trader_escape_pod_std&quot;:

					crewName = (&quot;the &quot; + crewRace + &quot; &quot; + crewRank + &quot; &quot; + expandDescription(&quot;[nom]&quot;));
					crewDescription = &quot;a ship crew member&quot;;
					crewRole = &quot;hunter&quot;;
					crewInsurance = this.$getRndInteger(90, 450);
					break;

				case &quot;adck_imperial_trader_escape_pod_std_passenger&quot;:

					crewName = (&quot;the &quot; + crewRace + &quot; &quot; + expandDescription(&quot;[nom]&quot;));
					crewDescription = &quot;a interstellar passenger&quot;;
					crewRole = &quot;passenger&quot;;
					crewInsurance = this.$getRndInteger(90, 450);
					break;

				case &quot;adck_imperial_trader_escape_pod_std_criminal&quot;:

					crewName = (&quot;the &quot; + crewRace + &quot; &quot; + expandDescription(&quot;[nom]&quot;));
					crewDescription = &quot;a &quot; + expandDescription(&quot;[adck_imperial_trader_criminals]&quot;) +  &quot;wanted by GalCop police&quot;;
					crewRole = &quot;pirate&quot;;
					crewBounty = crewInsurance + (15 * system.government);  // stable governments pay extra bonus
					crewInsurance = 0;
					break;

				case &quot;adck_imperial_trader_escape_pod_std_pirate&quot;:

					crewName = (&quot;the &quot; + crewRace + &quot; &quot; + expandDescription(&quot;[adck_imperial_trader_pirate_nicknames]&quot;) + expandDescription(&quot;[nom]&quot;));
					crewDescription = &quot;a &quot; + expandDescription(&quot;[adck_imperial_trader_criminals]&quot;) +  &quot;wanted by GalCop police&quot;;
					crewRole = &quot;pirate&quot;;
					crewBounty = (crewInsurance * 1.25) + (25 * system.government);  // stable governments pay extra bonus
					crewInsurance = 0;
					break;
				
				case &quot;adck_imperial_trader_escape_pod_bhg&quot;:

					crewName = (&quot;the &quot; + crewRace + &quot; &quot; + bhgRank + &quot; &quot; + expandDescription(&quot;[nom]&quot;));
					crewDescription = &quot;a member of the Bounty Hunter Guild&quot;;
					crewRole = &quot;hunter&quot;;
					crewInsurance = (crewInsurance * 1.10);  // BHG got better insurance conditions
					break;
					
				case &quot;adck_imperial_trader_escape_pod_bhg_criminal&quot;:

					crewName = (&quot;the &quot; + crewRace + &quot; &quot; + bhgRank + &quot; &quot; + expandDescription(&quot;[nom]&quot;));
					crewDescription = &quot;a rogue member of the Bounty Hunter Guild&quot;;
					crewRole = &quot;pirate&quot;;
					crewBounty = (crewInsurance * 1.10) + (15 * system.government);  // stable governments pay extra bonus
					crewInsurance = 0;
					break;	
					
				default: 
	
					break;	
			};

			ship.setCrew
			(
				{
					name: crewName,
					short_description: crewDescription,
					role: crewRole,
					species: crewRace,
					insurance: crewInsurance,
					bounty: crewBounty
				}
			);
			// removes individual roles
			ship.primaryRole = &quot;escape-capsule&quot;;
		}
		else
		{
			if(ship.hasRole(&quot;GalCop_alien&quot;))
			{
				// adds alien classification
				ship.primaryRole = &quot;alien_warship&quot;;
				shipRole = ship.primaryRole;
				ship.scanDescription = &quot;Alien&quot;;  // Warning: don&#39;t use in shipdata.plist, it will crash the game

				// individual names based on Empire systems (https://www.edsm.net/en/search/systems/index/)
				const empire_name_01_array = 
				[&quot; Fist &quot;, &quot; Fury &quot;, &quot; Force &quot;, &quot; Power &quot;, &quot; Rage &quot;, &quot; Fire &quot;, &quot; Wrath &quot;, &quot; Storm &quot;, &quot; The Inferno &quot;, &quot; Hell &quot;];
				let empire_name_01 = 
				empire_name_01_array[Math.floor(Math.random() * empire_name_01_array.length)];

				const empire_name_02_array = 
				[&quot; Sanuku &quot;, &quot; Cuacocha &quot;, &quot; Baudu &quot;, &quot; Tum &quot;, &quot; Edin &quot;, &quot; Shokwa &quot;, &quot; Djandji &quot;, &quot; Lauma &quot;, &quot; Zeus &quot;, &quot; Hamal &quot;];
				let empire_name_02 = 
				empire_name_02_array[Math.floor(Math.random() * empire_name_02_array.length)];

				const empire_name_03_array = 
				[&quot;I&quot;, &quot;II&quot;, &quot;III&quot;, &quot;IV&quot;, &quot;V&quot;, &quot;VI&quot;, &quot;VII&quot;, &quot;VIII&quot;, &quot;IX&quot;, &quot;X&quot;];
				let empire_name_03 = 
				empire_name_03_array[Math.floor(Math.random() * empire_name_03_array.length)];

				ship.displayName = ship.name + empire_name_01 + &quot;of&quot; + empire_name_02 + empire_name_03;
			};
			
			switch(shipRole) 
			{
				case &quot;trader&quot;:
				case &quot;sunskim-trader&quot;:
				case &quot;pirate-medium-freighter&quot;:
				case &quot;adck_imperial_trader&quot;:
				case &quot;adck_imperial_trader_T01&quot;:
				case &quot;adck_imperial_trader_T01_convoy_01&quot;:	
				case &quot;adck_imperial_trader_pirate&quot;:
				case &quot;adck_imperial_trader_C01_pirate&quot;:
				
					if(shipRole == &quot;adck_imperial_trader&quot; || shipRole == &quot;adck_imperial_trader_T01&quot; || 
					   shipRole == &quot;adck_imperial_trader_T01_convoy_01&quot;)
					{
						ship.primaryRole = &quot;trader&quot;;
					};

					if(shipRole == &quot;adck_imperial_trader_pirate&quot; || shipRole == &quot;adck_imperial_trader_C01_pirate&quot;)
					{
						ship.primaryRole = &quot;pirate-medium-freighter&quot;;
					};
				
					while(ship.cargoSpaceUsed &lt;= 1)  // makes sure that there is some cargo
					{
						if(this.$getRndInteger(1, 6) &lt; 4)
						{
							ship.setCargoType(&quot;PLENTIFUL_GOODS&quot;);
						}
						else
						{
							ship.setCargoType(&quot;SCARCE_GOODS&quot;);
						};
					};	
					break;

				case &quot;trader-courier&quot;:
									
					if(cargoLoad &lt;= 1)
					{
						for(var i = this.$getRndInteger(5, 12) - 1 ; i &gt;= 0 ; --i)
						{
							ship.adjustCargo(this.$adck_imperial_trader_rare_cargo(), 1);
						};
					};
					break;

				case &quot;trader-smuggler&quot;:
							
					while(ship.cargoSpaceUsed &lt;= 1)  // makes sure that there is some cargo
					{
						if(this.$getRndInteger(1, 6) &lt; 4)
						{
							ship.setCargoType(&quot;ILLEGAL_GOODS&quot;);
						}
						else
						{
							ship.setCargoType(&quot;PIRATE_GOODS&quot;);
						};
					};	
					break;
				
				case &quot;scavenger&quot;:
								
					ship.forwardWeapon = &quot;EQ_WEAPON_PULSE_LASER&quot;;  // exchanges beam to pulse laser
					
					if(cargoLoad &lt;= 1)
					{
						for(var i = this.$getRndInteger(5, 12) - 1 ; i &gt;= 0 ; --i)
						{
							ship.adjustCargo(this.$adck_imperial_trader_scavenger_cargo(), 1);
						};
					};
					break;

				case &quot;escort&quot;:
				case &quot;escort-heavy&quot;:
				case &quot;hunter-heavy&quot;:
				case &quot;pirate-medium-fighter&quot;:
				case &quot;pirate-heavy-fighter&quot;:
				case &quot;adck_imperial_trader_C01&quot;:
				case &quot;adck_imperial_trader_C01_bhg&quot;:
				case &quot;adck_imperial_trader_C01_bhg_team_01&quot;:	
											
					if(shipRole.search(/adck_imperial_trader/i) &gt;= 0)
					{
						ship.primaryRole = &quot;hunter-heavy&quot;;
						ship.switchAI(&quot;oolite-bountyHunterAI.js&quot;);
					};
				
					if(cargoLoad &lt;= 1)
					{
						for(var i = this.$getRndInteger(5, 10) - 1 ; i &gt;= 0 ; --i)
						{
							ship.adjustCargo(this.$adck_imperial_trader_space_jockey_cargo(), 1);
						};
					};
					break;

				case &quot;alien_warship&quot;:

					if(cargoLoad &lt;= 1)
					{
						for(var i = this.$getRndInteger(5, 12) - 1 ; i &gt;= 0 ; --i)
						{
							ship.adjustCargo(this.$adck_imperial_trader_alien_cargo(), 1);
						};
					};
					break;
	
				default: 
	
					break;
			};
		};
		// if there is an existing script in shipDied time to move it
		ship.script.$adck_imperial_trader_shipDied_old = ship.script.shipDied;
		ship.script.shipDied = this.$adck_imperial_trader_shipDied;	
	};
};	

this.$adck_imperial_trader_shipDied = function $adck_imperial_trader_shipDied(whom, why) 
{
	if(this.ship.dataKey.search(/adck_imperial_trader/i) &lt; 0 || 
	   this.ship.hasRole(&quot;escape-capsule&quot;) || this.ship.hasRole(&quot;cargopod&quot;) || this.ship.isSubEntity || this.ship.isPlayer)
	{
		return;
	}
	else
	{
		this.name = &quot;adck_imperial_trader&quot;;
		let dice = worldScripts.adck_imperial_trader;
		let diceRoll = dice.$getRndInteger;
				
		let shipRole = this.ship.primaryRole;
		let shipBounty = this.ship.bounty;
		let shipPos = this.ship.position;
		let MRP01 = 0;
		let bhgCrew = 0;
		let criminalCrew = 0;
		let pirateCrew = 0;

		if(worldScripts[&quot;MRP01_ressource_spawn&quot;])  // Montanas Ressource Pack 01 OXP
		{
			MRP01 = 1;
		};

		if(this.ship.dataKey.search(/_bhg/i) &gt;= 0)
		{
			bhgCrew = 1;
		};
		
		if(shipBounty &gt; 7 &amp;&amp; shipBounty &lt; 15)
		{
			criminalCrew = 1;
		};

		if(shipBounty &gt; 14 || this.ship.isPirate)
		{
			pirateCrew = 1;
		};

		// if Montanas Ressource Pack 01 OXP is installed the containers from there are used, otherwise let the core-game handle it
		// exception: The Empire ship is using individual cargopods and is addressed separately
		if(MRP01 == 1 &amp;&amp; this.ship.cargoSpaceUsed &gt; 0 &amp;&amp; shipRole != &quot;alien_warship&quot;)
		{
			for(let i = this.ship.cargoList.length - 1 ; i &gt;= 0 ; --i)
			{
				let cargoType = this.ship.cargoList[i].commodity;
				let cargoPod = (&quot;MRP01_container_&quot; + cargoType);
				let cargoCount = this.ship.cargoList[i].quantity;
				
				system.addShips(cargoPod, cargoCount, shipPos);
			};
		};

		switch(shipRole) 
		{
			case &quot;trader&quot;:
			case &quot;sunskim-trader&quot;:
			case &quot;trader-courier&quot;:
			case &quot;trader-smuggler&quot;:
					
				if(criminalCrew == 1)
				{
					system.addShips(&quot;adck_imperial_trader_escape_pod_std_criminal&quot;, diceRoll(1, 3), shipPos);
				}
				else if(pirateCrew == 1)
				{
					system.addShips(&quot;adck_imperial_trader_escape_pod_std_pirate&quot;, diceRoll(1, 3), shipPos);
				}
				else
				{
					system.addShips(&quot;adck_imperial_trader_escape_pod_std_trader&quot;, diceRoll(1, 3), shipPos);
				};
			
				if(MRP01 == 1 &amp;&amp; diceRoll(1, 10) &gt; 8)
				{
					system.addShips(&quot;MRP01_container_cash&quot;, diceRoll(1, 2), shipPos);
				};
					
				break;

			case &quot;hunter-heavy&quot;:
				
				if(bhgCrew == 1)
				{
					if(criminalCrew == 1 || pirateCrew == 1)
					{
						system.addShips(&quot;adck_imperial_trader_escape_pod_bhg_criminal&quot;, diceRoll(1, 3), shipPos);
					}
					else
					{
						system.addShips(&quot;adck_imperial_trader_escape_pod_bhg&quot;, diceRoll(1, 3), shipPos);
					};
				}
				else
				{
					if(criminalCrew == 1)
					{
						system.addShips(&quot;adck_imperial_trader_escape_pod_std_criminal&quot;, diceRoll(1, 3), shipPos);
					}
					else if(pirateCrew == 1)
					{
						system.addShips(&quot;adck_imperial_trader_escape_pod_std_pirate&quot;, diceRoll(1, 3), shipPos);
					}
					else
					{
						system.addShips(&quot;adck_imperial_trader_escape_pod_std&quot;, diceRoll(1, 3), shipPos);
					};
				};

				if(MRP01 == 1 &amp;&amp; diceRoll(1, 10) &gt; 8)
				{
					system.addShips(&quot;MRP01_container_cash&quot;, diceRoll(1, 2), shipPos);
					system.addShips(&quot;MRP01_container_prisoners&quot;, diceRoll(1, 2), shipPos)
				};
				
				break;
				
			case &quot;pirate-medium-freighter&quot;:

				system.addShips(&quot;adck_imperial_trader_escape_pod_std_pirate&quot;, diceRoll(1, 3), shipPos);
				
				if(MRP01 == 1 &amp;&amp; diceRoll(1, 10) &gt; 9)
				{
					system.addShips(&quot;MRP01_container_cash&quot;, diceRoll(1, 2), shipPos);
				};
				break;

			case &quot;pirate-medium-fighter&quot;:
			case &quot;pirate-heavy-fighter&quot;:
					
				system.addShips(&quot;adck_imperial_trader_escape_pod_std_pirate&quot;, diceRoll(1, 3), shipPos);
				break;
			
			case &quot;alien_warship&quot;:

				if(this.ship.cargoSpaceUsed &gt; 0)
				{
					for(let i = this.ship.cargoList.length - 1 ; i &gt;= 0 ; --i)
					{
						let cargoType = this.ship.cargoList[i].commodity;
						let cargoPod = (&quot;adck_imperial_trader_empire_container_&quot; + cargoType);
						let cargoCount = this.ship.cargoList[i].quantity;
						
						system.addShips(cargoPod, cargoCount, shipPos);
					};
				};
				break;
	
			// escort, scavenger
			default:
				
				if(bhgCrew == 1)
				{
					if(criminalCrew == 1 || pirateCrew == 1)
					{
						system.addShips(&quot;adck_imperial_trader_escape_pod_bhg_criminal&quot;, diceRoll(1, 3), shipPos);
					}
					else
					{
						system.addShips(&quot;adck_imperial_trader_escape_pod_bhg&quot;, diceRoll(1, 3), shipPos);
					};
				}
				else
				{
					if(criminalCrew == 1)
					{
						system.addShips(&quot;adck_imperial_trader_escape_pod_std_criminal&quot;, diceRoll(1, 3), shipPos);
					}
					else if(pirateCrew == 1)
					{
						system.addShips(&quot;adck_imperial_trader_escape_pod_std_pirate&quot;, diceRoll(1, 3), shipPos);
					}
					else
					{
						system.addShips(&quot;adck_imperial_trader_escape_pod_std&quot;, diceRoll(1, 3), shipPos);
					};
				};
				break;	
		};
	};

	if(this.ship.script.$adck_imperial_trader_shipDied_old)
	{
		this.ship.script.$adck_imperial_trader_shipDied_old(whom, why);
	};
};

this.$adck_imperial_trader_scavenger_cargo = function()
{
	const scavenger_cargo_array = [&quot;alloys&quot;, &quot;gold&quot;, &quot;platinum&quot;, &quot;computers&quot;, &quot;machinery&quot;, &quot;slaves&quot;];

	// Montanas Ressource Pack 01 OXP
	if(worldScripts[&quot;MRP01_ressource_spawn&quot;] &amp;&amp; scavenger_cargo_array.indexOf(&quot;quirium_crystal&quot;) &lt; 0)
	{
		scavenger_cargo_array.push(&quot;quirium_crystal&quot;);
	};
	
	let scavenger_cargo = 
	scavenger_cargo_array[Math.floor(Math.random() * scavenger_cargo_array.length)];
		
	return (scavenger_cargo);
};

// commodities in g and kg
this.$adck_imperial_trader_rare_cargo = function()
{
	const rare_cargo_array = [&quot;gold&quot;, &quot;platinum&quot;, &quot;gem_stones&quot;];

	// medicine is part of several OXP&#39;s therefore a check of the market is required
	let goods = system.mainStation.market;
	for(let i in goods) 
	{
		if(goods[i].key == [&quot;medicine&quot;] &amp;&amp; rare_cargo_array.indexOf(&quot;medicine&quot;) &lt; 0)
		{
			rare_cargo_array.push(&quot;medicine&quot;);
		};
	}; 
	
	// Montanas Ressource Pack 01 OXP
	if(worldScripts[&quot;MRP01_ressource_spawn&quot;] &amp;&amp; rare_cargo_array.indexOf(&quot;quirium_crystal&quot;) &lt; 0)
	{
		rare_cargo_array.push(&quot;quirium_crystal&quot;);
	};

	// Dictators OXP 2.0
	if(worldScripts[&quot;dictators_clergy_artifacts&quot;] &amp;&amp; rare_cargo_array.indexOf(&quot;quirium_crystal&quot;) &lt; 0)
	{
		rare_cargo_array.push(&quot;holy_artifacts&quot;);
	};
	
	let rare_cargo = 
	rare_cargo_array[Math.floor(Math.random() * rare_cargo_array.length)];
		
	return (rare_cargo);
};

// food, medicine, booze and guns, what else you need for your trip ? :P
this.$adck_imperial_trader_space_jockey_cargo = function()
{
	const space_jockey_cargo_array = [&quot;firearms&quot;, &quot;food&quot;, &quot;liquor_wines&quot;];

	 // Darkside Moonshine Distillery OXP
	if(worldScripts[&quot;witchfire-populator&quot;] &amp;&amp; space_jockey_cargo_array.indexOf(&quot;witchfire_whiskey&quot;) &lt; 0)
	{
		space_jockey_cargo_array.push(&quot;witchfire_whiskey&quot;);
	};
	
	// medicine is part of several OXP&#39;s therefore a check of the market is required
	if(system.mainStation)
	{
		let goods = system.mainStation.market;
		for(let i in goods) 
		{
			if(goods[i].key == [&quot;medicine&quot;] &amp;&amp; space_jockey_cargo_array.indexOf(&quot;medicine&quot;) &lt; 0)
			{
				space_jockey_cargo_array.push(&quot;medicine&quot;);
			};
		};
	}; 

	let space_jockey_cargo = 
	space_jockey_cargo_array[Math.floor(Math.random() * space_jockey_cargo_array.length)];

	return (space_jockey_cargo);
};

this.$adck_imperial_trader_alien_cargo = function()
{
	const alien_cargo_array = [&quot;luxuries&quot;, &quot;slaves&quot;, &quot;alien_items&quot;];

	// Montanas Ressource Pack 01 OXP
	if(worldScripts[&quot;MRP01_ressource_spawn&quot;] &amp;&amp; alien_cargo_array.indexOf(&quot;quirium_crystal&quot;) &lt; 0)
	{
		alien_cargo_array.push(&quot;quirium_crystal&quot;);
	};
	
	let alien_cargo = 
	alien_cargo_array[Math.floor(Math.random() * alien_cargo_array.length)];
		
	return (alien_cargo);
};

this.$getRndInteger = function(min, max)
{
	return (Math.floor(Math.random() * (max - min + 1) ) + min);
};
</pre></td>
                </tr>
                <tr>
                    <td valign="top">Scripts/adck_imperial_trader_achenar_pulse_laser_conditions.js</td>
                    <td><pre>this.name			= &quot;adck_imperial_trader_achenar_pulse_laser_conditions&quot;;
this.author			= &quot;Montana05&quot;;
this.description	= &quot;conditions for the handling of the Achenar Pulse Laser Class 2&quot;;
this.version		= &quot;2.11&quot;;
this.copyright		= &quot;2022 Montana05&quot;;
this.licence   		= &quot;CC BY-NC-SA 4.0&quot;;
&quot;use strict&quot;;

this.allowAwardEquipment = function(equipment, ship, context)
{
	// remainder from oolite-conditions.js:

	// OXP hook to allow stations to forbid specific equipment
	if(context == &quot;purchase&quot; &amp;&amp; player.ship.dockedStation &amp;&amp; player.ship.dockedStation.scriptInfo[&quot;oolite-barred-equipment&quot;])
	{
		if (player.ship.dockedStation.scriptInfo[&quot;oolite-barred-equipment&quot;].indexOf(equipment) != -1)
		{
			return false;
		};
	};

	// OXP hook to allow ships to forbid specific &quot;available to all&quot; equipment
	if(ship.scriptInfo &amp;&amp; ship.scriptInfo[&quot;oolite-barred-equipment&quot;] &amp;&amp; ship.scriptInfo[&quot;oolite-barred-equipment&quot;].indexOf(equipment) != -1)
	{
		return false;
	};
	
	// for compatibility with Laser Mount Switching System (LMSS)
	var lmss = worldScripts.LMSS_Core;

	if(lmss &amp;&amp; lmss._switching == true) 
	{
		return true;
	};
	
	// otherwise permitted
	return true;
};	


</pre></td>
                </tr>
                <tr>
                    <td valign="top">Scripts/adck_imperial_trader_subent.js</td>
                    <td><pre>this.name			= &quot;adck_imperial_trader_subent&quot;;
this.author			= &quot;Montana05&quot;;
this.description	= &quot;handling of subentities for the Imperial Trader&quot;;
this.version		= &quot;2.11&quot;;
this.copyright		= &quot;2022 Montana05&quot;;
this.licence        = &quot;CC BY-NC-SA 4.0&quot;;
&quot;use strict&quot;;

this.shipDied = function () 
{ 
    this.ship.owner.commsMessage(&quot;The shields are failing, we lost an engine !&quot;);
    this.ship.owner.maxSpeed = (this.ship.owner.maxSpeed - 111);  // 30% speed reduction
    if(this.ship.owner.maxSpeed &lt; 0)
    {
        this.ship.owner.maxSpeed = 0;
    };
};</pre></td>
                </tr>
            </table>
        </a>
    </body>
</html>
