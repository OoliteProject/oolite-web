<html>
    <head>
        <title>Expansion Breakable Witch Drive</title>
        <link rel="stylesheet" href="../style.css">
    </head>
    <body>
        <table border="0" width="100%">
            <tr>
                <td>Back to <a href='../index.html'>Index</a></td>
                <td align="right"><small>Page generated: Oct 11, 2023, 3:16:48 PM</small></td>
            </tr>
        </table>

        <h1>Expansion Breakable Witch Drive</h1>

        <h2>Content</h2>
        <ul>
          <li><a href="#warnings">Warnings</a></li>
          <li><a href="#manifest">Manifest</a></li>
          <li><a href="#documentation">Documentation</a></li>
          <li><a href="#equipment">1 Equipment</a></li>
          <li><a href="#ships">1 Ships</a></li>
          <li><a href="#models">0 Models</a></li>
          <li><a href="#scripts">3 Scripts</a></li>
        </ul>

          <a name="warnings">
            <h2>Warnings</h2>
            <ol>
                <li>Tags mismatch between OXP Manifest and Expansion Manager at character position 0002 (RIGHT SQUARE BRACKET vs LATIN CAPITAL LETTER E)(&#39;[]&#39; vs &#39;[Equipment]&#39;)</li>
            </ol>
          </a>

        <a name="manifest">
        <h2>Manifest</h2>
            <table border="1">
                <tr>
                    <th></th>
                    <th>from Expansion Manager's OXP list</th>
                    <th>from Expansion Manifest</th>
                </tr>
                <tr>
                    <td>Description</td>
                    <td>This OXP make the Thruspace Hyperdrive (or Witch Space Drive) into an equipment item that can be damaged in combat.</td>
                    <td>This OXP make the Thruspace Hyperdrive (or Witch Space Drive) into an equipment item that can be damaged in combat.</td>
                </tr>
                <tr>
                    <td>Identifier</td>
                    <td>oolite.oxp.CaptMurphy.BreakableWitchDrive</td>
                    <td>oolite.oxp.CaptMurphy.BreakableWitchDrive</td>
                </tr>
                <tr>
                    <td>Title</td>
                    <td>Breakable Witch Drive</td>
                    <td>Breakable Witch Drive</td>
                </tr>
                <tr>
                    <td>Category</td>
                    <td>Equipment</td>
                    <td>Equipment</td>
                </tr>
                <tr>
                    <td>Author</td>
                    <td>Capt Murphy</td>
                    <td>Capt Murphy</td>
                </tr>
                <tr>
                    <td>Version</td>
                    <td>1.3.2</td>
                    <td>1.3.2</td>
                </tr>
                <tr>
                    <td>Tags</td>
                    <td></td>
                    <td>Equipment</td>
                </tr>
                <tr>
                    <td>Required Oolite Version</td>
                    <td></td>
                    <td></td>
                </tr>
                <tr>
                    <td>Maximum Oolite Version</td>
                    <td></td>
                    <td></td>
                </tr>
                <tr>
                    <td>Required Expansions</td>
                    <td>
                    </td>
                    <td>
                    </td>
                </tr>
                <tr>
                    <td>Optional Expansions</td>
                    <td>
                    </td>
                    <td>
                    </td>
                </tr>
                <tr>
                    <td>Conflict Expansions</td>
                    <td>
                    </td>
                    <td>
                    </td>
                </tr>
                <tr>
                    <td>Information URL</td>
                    <td><a target="_blank" href="http://wiki.alioth.net/index.php/Breakable_%27Standard%27_Equipment_OXPs">http://wiki.alioth.net/index.php/Breakable_%27Standard%27_Equipment_OXPs</a></td>
                    <td><a target="_blank" href="">n/a</a></td>
                </tr>
                <tr>
                    <td>Download URL</td>
                    <td><a target="_blank" href="https://wiki.alioth.net/img_auth.php/d/d3/Oolite.oxp.CaptMurphy.BreakableWitchDrive.oxz">https://wiki.alioth.net/img_auth.php/d/d3/Oolite.oxp.CaptMurphy.BreakableWitchDrive.oxz</a></td>
                    <td><a target="_blank" href="">n/a</a></td>
                </tr>
                <tr>
                    <td>License</td>
                    <td>CC BY-NC-SA 3.0</td>
                    <td>CC BY-NC-SA 3.0</td>
                </tr>
                <tr>
                    <td>File Size</td>
                    <td>n/a</td>
                </tr>
                <tr>
                    <td>Upload date</td>
                    <td>1610873479</td>
                </tr>
            </table>
                </a>

        <a name="documentation">
        <h2>Documentation</h2>
        <p>Also read <a href='http://wiki.alioth.net/index.php/Breakable%20Witch%20Drive'>http://wiki.alioth.net/index.php/Breakable%20Witch%20Drive</a></p>
        <h3>readme.rtf</h3>
        <pre>{\rtf1\ansi\deff3\adeflang1025
{\fonttbl{\f0\froman\fprq2\fcharset0 Times New Roman;}{\f1\froman\fprq2\fcharset2 Symbol;}{\f2\fswiss\fprq2\fcharset0 Arial;}{\f3\froman\fprq2\fcharset0 Times New Roman;}{\f4\froman\fprq0\fcharset1 Arial;}{\f5\froman\fprq0\fcharset1 Times New Roman;}{\f6\fswiss\fprq0\fcharset1 Arial;}{\f7\fnil\fprq2\fcharset0 WenQuanYi Zen Hei;}{\f8\fnil\fprq2\fcharset0 Arial;}{\f9\fnil\fprq0\fcharset1 Arial;}{\f10\fswiss\fprq0\fcharset1 FreeSans;}{\f11\fnil\fprq0\fcharset1 FreeSans;}}
{\colortbl;\red0\green0\blue0;\red0\green0\blue128;\red128\green128\blue128;}
{\stylesheet{\s0\snext0\ql\nowidctlpar\ltrpar{\*\hyphen2\hyphlead2\hyphtrail2\hyphmax0}\kerning1\dbch\af8\langfe2052\dbch\af11\afs24\alang1081\cf0\loch\f5\fs24\lang2057 Normal;}
{\*\cs15\snext15 Default Paragraph Font;}
{\*\cs16\snext16\cf2\ul\ulc1\langfe255\alang255\lang255 Internet Link;}
{\s17\sbasedon0\snext18\ql\nowidctlpar\sb240\sa120\keepn\ltrpar\kerning1\dbch\af7\langfe2052\dbch\af11\afs28\alang1081\loch\f6\fs28\lang2057 Heading;}
{\s18\sbasedon0\snext18\ql\nowidctlpar\sb0\sa120\ltrpar\kerning1\dbch\af8\langfe2052\dbch\af11\afs24\alang1081\loch\f5\fs24\lang2057 Text Body;}
{\s19\sbasedon18\snext19\ql\nowidctlpar\sb0\sa120\ltrpar\kerning1\dbch\af8\langfe2052\dbch\af10\afs24\alang1081\loch\f5\fs24\lang2057 List;}
{\s20\sbasedon0\snext20\ql\nowidctlpar\sb120\sa120\noline\ltrpar\i\kerning1\dbch\af8\langfe2052\dbch\af10\afs24\alang1081\ai\loch\f5\fs24\lang2057 Caption;}
{\s21\sbasedon0\snext21\ql\nowidctlpar\noline\ltrpar\kerning1\dbch\af8\langfe2052\dbch\af10\afs24\alang1081\loch\f5\fs24\lang2057 Index;}
}{\info{\creatim\yr2012\mo6\dy30\hr8\min41}{\revtim\yr2012\mo6\dy30\hr8\min47}{\printim\yr0\mo0\dy0\hr0\min0}{\comment LibreOffice}{\vern67175426}}\deftab720
\viewscale100
{\*\pgdsctbl
{\pgdsc0\pgdscuse451\pgwsxn12240\pghsxn15840\marglsxn1440\margrsxn1440\margtsxn1440\margbsxn1440\pgdscnxt0 Default Style;}}
\formshade{\*\pgdscno0}\paperh15840\paperw12240\margl1440\margr1440\margt1440\margb1440\sectd\sbknone\sectunlocked1\pgndec\pgwsxn12240\pghsxn15840\marglsxn1440\margrsxn1440\margtsxn1440\margbsxn1440\ftnbj\ftnstart1\ftnrstcont\ftnnar\aenddoc\aftnrstcont\aftnstart1\aftnnrlc
\pgndec\pard\plain \s0\ql\nowidctlpar\ltrpar{\*\hyphen2\hyphlead2\hyphtrail2\hyphmax0}\kerning1\dbch\af8\langfe2052\dbch\af11\afs24\alang1081\cf0\loch\f5\fs24\lang2057\ql\faauto\li0\ri0\lin0\rin0\fi0{\langfe2057\dbch\af9\afs20\alang1025\rtlch \ltrch\loch\fs20\loch\f4
Breakable Witch Drive 1.3.1 (01/02/14)}
\par \pard\plain \s0\ql\nowidctlpar\ltrpar{\*\hyphen2\hyphlead2\hyphtrail2\hyphmax0}\kerning1\dbch\af8\langfe2052\dbch\af11\afs24\alang1081\cf0\loch\f5\fs24\lang2057\ql\faauto\li0\ri0\lin0\rin0\fi0{\langfe2057\dbch\af9\afs20\alang1025\rtlch \ltrch\loch\fs20\loch\f4
By Capt Murphy 2011}
\par \pard\plain \s0\ql\nowidctlpar\ltrpar{\*\hyphen2\hyphlead2\hyphtrail2\hyphmax0}\kerning1\dbch\af8\langfe2052\dbch\af11\afs24\alang1081\cf0\loch\f5\fs24\lang2057\ql\faauto\li0\ri0\lin0\rin0\fi0{\langfe2057\dbch\af9\afs20\alang1025\rtlch \ltrch\loch\fs20\loch\f4
Licence: CC BY-NC-SA 3.0 : Please visit }{{\field{\*\fldinst HYPERLINK &quot;http://creativecommons.org/licenses/by-nc-sa/3.0/&quot; }\cf2\ul\ulc1\langfe255\dbch\af9\afs20\alang255{\fldrslt \cf2\ul\ulc1\langfe255\alang255\lang255\rtlch \ltrch\loch\fs20\loch\f4
http://creativecommons.org/licenses/by-nc-sa/3.0/}{\rtlch \ltrch\loch
}} for more info.}
\par \pard\plain \s0\ql\nowidctlpar\ltrpar{\*\hyphen2\hyphlead2\hyphtrail2\hyphmax0}\kerning1\dbch\af8\langfe2052\dbch\af11\afs24\alang1081\cf0\loch\f5\fs24\lang2057\ql\faauto\li0\ri0\lin0\rin0\fi0{\langfe2057\dbch\af9\afs20\alang1025\rtlch \ltrch\loch\fs20\loch\f4
Requires Oolite 1.77.1}
\par \pard\plain \s0\ql\nowidctlpar\ltrpar{\*\hyphen2\hyphlead2\hyphtrail2\hyphmax0}\kerning1\dbch\af8\langfe2052\dbch\af11\afs24\alang1081\cf0\loch\f5\fs24\lang2057\ql\faauto\li0\ri0\lin0\rin0\fi0\langfe2057\dbch\af9\afs20\alang1025\rtlch \ltrch\loch\fs20\loch\f4

\par \pard\plain \s0\ql\nowidctlpar\ltrpar{\*\hyphen2\hyphlead2\hyphtrail2\hyphmax0}\kerning1\dbch\af8\langfe2052\dbch\af11\afs24\alang1081\cf0\loch\f5\fs24\lang2057\ql\faauto\li0\ri0\lin0\rin0\fi0{\langfe2057\dbch\af9\afs20\alang1025\rtlch \ltrch\loch\fs20\loch\f4
Overview: }
\par \pard\plain \s0\ql\nowidctlpar\ltrpar{\*\hyphen2\hyphlead2\hyphtrail2\hyphmax0}\kerning1\dbch\af8\langfe2052\dbch\af11\afs24\alang1081\cf0\loch\f5\fs24\lang2057\ql\faauto\li0\ri0\lin0\rin0\fi0\langfe2057\dbch\af9\afs20\alang1025\rtlch \ltrch\loch\fs20\loch\f4

\par \pard\plain \s0\ql\nowidctlpar\ltrpar{\*\hyphen2\hyphlead2\hyphtrail2\hyphmax0}\kerning1\dbch\af8\langfe2052\dbch\af11\afs24\alang1081\cf0\loch\f5\fs24\lang2057\ql\faauto\li0\ri0\lin0\rin0\fi0{\langfe2057\dbch\af9\afs20\alang1025\rtlch \ltrch\loch\fs20\loch\f4
An OXP intended for the experienced Commander who wishes to make their Oolife a little more difficult. This OXP make the Thruspace Hyperdrive (or Witch Space Drive) into an equipment item that can be damaged in combat. If damaged players can still attempt to make Witch Space jumps but there are vastly increased chances of fuel leakage, total jump failure or misjump.  Repairs can be conducted at a station of any tech level and given the ubiquitous of this technology are relatively cheap at 300 credits. The equipment can also be repaired by OXP repair technology such as Thargoid\u8217\&#39;19s Repair Bots.}
\par \pard\plain \s0\ql\nowidctlpar\ltrpar{\*\hyphen2\hyphlead2\hyphtrail2\hyphmax0}\kerning1\dbch\af8\langfe2052\dbch\af11\afs24\alang1081\cf0\loch\f5\fs24\lang2057\ql\faauto\li0\ri0\lin0\rin0\fi0\langfe2057\dbch\af9\afs20\alang1025\rtlch \ltrch\loch\fs20\loch\f4

\par \pard\plain \s0\ql\nowidctlpar\ltrpar{\*\hyphen2\hyphlead2\hyphtrail2\hyphmax0}\kerning1\dbch\af8\langfe2052\dbch\af11\afs24\alang1081\cf0\loch\f5\fs24\lang2057\ql\faauto\li0\ri0\lin0\rin0\fi0{\langfe2057\dbch\af9\afs20\alang1025\rtlch \ltrch\loch\fs20\loch\f4
Technical:}
\par \pard\plain \s0\ql\nowidctlpar\ltrpar{\*\hyphen2\hyphlead2\hyphtrail2\hyphmax0}\kerning1\dbch\af8\langfe2052\dbch\af11\afs24\alang1081\cf0\loch\f5\fs24\lang2057\ql\faauto\li0\ri0\lin0\rin0\fi0\langfe2057\dbch\af9\afs20\alang1025\rtlch \ltrch\loch\fs20\loch\f4

\par \pard\plain \s0\ql\nowidctlpar\ltrpar{\*\hyphen2\hyphlead2\hyphtrail2\hyphmax0}\kerning1\dbch\af8\langfe2052\dbch\af11\afs24\alang1081\cf0\loch\f5\fs24\lang2057\ql\faauto\li0\ri0\lin0\rin0\fi0{\langfe2057\dbch\af9\afs20\alang1025\rtlch \ltrch\loch\fs20\loch\f4
This OXP creates a new equipment item, the \u8220\&#39;1cThruspace HyperDrive\u8221\&#39;1d which is listed on the equipment manifest and can be damaged in combat. It is automatically fitted to the current ship on first run, and it is also automatically fitted when the player purchases a new ship. }
\par \pard\plain \s0\ql\nowidctlpar\ltrpar{\*\hyphen2\hyphlead2\hyphtrail2\hyphmax0}\kerning1\dbch\af8\langfe2052\dbch\af11\afs24\alang1081\cf0\loch\f5\fs24\lang2057\ql\faauto\li0\ri0\lin0\rin0\fi0\langfe2057\dbch\af9\afs20\alang1025\rtlch \ltrch\loch\fs20\loch\f4

\par \pard\plain \s0\ql\nowidctlpar\ltrpar{\*\hyphen2\hyphlead2\hyphtrail2\hyphmax0}\kerning1\dbch\af8\langfe2052\dbch\af11\afs24\alang1081\cf0\loch\f5\fs24\lang2057\ql\faauto\li0\ri0\lin0\rin0\fi0{\langfe2057\dbch\af9\afs20\alang1025\rtlch \ltrch\loch\fs20\loch\f4
Changelog:}
\par \pard\plain \s0\ql\nowidctlpar\ltrpar{\*\hyphen2\hyphlead2\hyphtrail2\hyphmax0}\kerning1\dbch\af8\langfe2052\dbch\af11\afs24\alang1081\cf0\loch\f5\fs24\lang2057\ql\faauto\li0\ri0\lin0\rin0\fi0\langfe2057\dbch\af9\afs20\alang1025\rtlch \ltrch\loch\fs20\loch\f4

\par \pard\plain \s0\ql\nowidctlpar\ltrpar{\*\hyphen2\hyphlead2\hyphtrail2\hyphmax0}\kerning1\dbch\af8\langfe2052\dbch\af11\afs24\alang1081\cf0\loch\f5\fs24\lang2057\ql\faauto\li0\ri0\lin0\rin0\fi0{\langfe2057\dbch\af9\afs20\alang1025\rtlch \ltrch\loch\fs20\loch\f4
Version 1  Initial release.}
\par \pard\plain \s0\ql\nowidctlpar\ltrpar{\*\hyphen2\hyphlead2\hyphtrail2\hyphmax0}\kerning1\dbch\af8\langfe2052\dbch\af11\afs24\alang1081\cf0\loch\f5\fs24\lang2057\ql\faauto\li0\ri0\lin0\rin0\fi0{\langfe2057\dbch\af9\afs20\alang1025\rtlch \ltrch\loch\fs20\loch\f4
Version 1.1 20/7/11 - Minor tweak to prevent equipment being installed in the event the player is flying or purchases a non-hyperspace capable ship.}
\par \pard\plain \s0\ql\nowidctlpar\ltrpar{\*\hyphen2\hyphlead2\hyphtrail2\hyphmax0}\kerning1\dbch\af8\langfe2052\dbch\af11\afs24\alang1081\cf0\loch\f5\fs24\lang2057\ql\faauto\li0\ri0\lin0\rin0\fi0{\langfe2057\dbch\af9\afs20\alang1025\rtlch \ltrch\loch\fs20\loch\f4
Version 1.2 05/5/12 - Minor update for compatibility with Ship_Storage_Helper.oxp}
\par \pard\plain \s0\ql\nowidctlpar\ltrpar{\*\hyphen2\hyphlead2\hyphtrail2\hyphmax0}\kerning1\dbch\af8\langfe2052\dbch\af11\afs24\alang1081\cf0\loch\f5\fs24\lang2057\ql\faauto\li0\ri0\lin0\rin0\fi0{{\*\bkmkstart __DdeLink__43_1951616894}\langfe2057\dbch\af9\afs20\alang1025\rtlch \ltrch\loch\fs20\loch\f4
Version 1.3.30/6/12}{{\*\bkmkend __DdeLink__43_1951616894}\langfe2057\dbch\af9\afs20\alang1025\rtlch \ltrch\loch\fs20\loch\f4
 \u8211\&#39;13 Added extra checks to stop timer showing warning message if a jump countdown with a damaged drive is aborted via escape capsule launch or docking.}
\par \pard\plain \s0\ql\nowidctlpar\ltrpar{\*\hyphen2\hyphlead2\hyphtrail2\hyphmax0}\kerning1\dbch\af8\langfe2052\dbch\af11\afs24\alang1081\cf0\loch\f5\fs24\lang2057\ql\faauto\li0\ri0\lin0\rin0\fi0{\langfe2057\dbch\af9\afs20\alang1025\rtlch \ltrch\loch\fs20\loch\f4
Version 1.3.1 1/2/14 \u8211\&#39;13 Prevented the equipment from being offered when player ship has no hyperspace capabilities -spara-}
\par }</pre>
        </a>

        <a name="equipment">          
        <h2>Equipment</h2>
            <table>
                <tr>
                    <th>Name</th>
                    <th>Visible</th>
                    <th>Cost [deci-credits]</th>
                    <th>Tech-Level</th>
                </tr>
                <tr>
                    <td><a href="../equipment/EQ_BREAKABLE_WITCHDRIVE.html">Thruspace HyperDrive</a></td>
                    <td>yes</td>
                    <td align="right">6000</td>
                    <td align="center">1+</td>
                </tr>
            </table>
        </a>

        <a name="ships">    
        <h2>Ships</h2>
            <table>
                <tr>
                    <th>Name</th>
                </tr>
                <tr>
                    <td><a href="../ships/bwd_dummy_entity.html">Malfunction...Malfunction</a></td>
                </tr>
            </table>
        </a>

        <a name="models">    
        <h2>Models</h2>
            This expansion declares no models. This may be related to warnings.
        </a>

        <a name="scripts">    
        <h2>Scripts</h2>
            <table>
                <tr>
                    <th>Path</th>
                </tr>
                <tr>
                    <td valign="top">Scripts/.directory</td>
                    <td><pre>[Dolphin]
Timestamp=2016,5,17,22,16,3
Version=3
ViewMode=1
</pre></td>
                </tr>
                <tr>
                    <td valign="top">Scripts/Breakable_WitchDrive.js</td>
                    <td><pre>&quot;use strict&quot;
this.name        = &quot;Breakable_WitchDrive&quot;; 
this.author      = &quot;capt murphy&quot;; 
this.copyright   = &quot;2011 capt murphy&quot;;
this.licence     = &quot;CC BY-NC-SA 3.0&quot;; // see http://creativecommons.org/licenses/by-nc-sa/3.0/ for more info.
this.description = &quot;Script to simulate combat damage to the Witch Space Drive.&quot;; 
this.version     = &quot;1.3.2&quot;;

// event handler driven function for functions at startup - awards equipment to existing ship if first run with OXP.
this.startUp = function()
{
   this.bwd_warning = new SoundSource;
   this.bwd_warning.sound = &quot;warning.ogg&quot;;
   this.bwd_setmisjump = false;
   if (!missionVariables.bwd_status)
   {
      missionVariables.bwd_status = &quot;OK&quot;;
   }
   this.bwd_status = missionVariables.bwd_status;
   if (!(Ship.shipDataForKey(player.ship.dataKey)[&quot;hyperspace_motor&quot;] === &quot;no&quot;) &amp;&amp; player.ship.equipmentStatus(&quot;EQ_BREAKABLE_WITCHDRIVE&quot;) != &quot;EQUIPMENT_OK&quot; &amp;&amp; this.bwd_status == &quot;OK&quot;)
   {
      player.ship.awardEquipment(&quot;EQ_BREAKABLE_WITCHDRIVE&quot;);   
   }
      
}

// event handler driven function to fit equipment to newly purchased ship.
this.playerBoughtNewShip = function()
{
   if (!Ship.shipDataForKey(player.ship.dataKey)[&quot;hyperspace_motor&quot;] === &quot;no&quot;)
   {
      player.ship.awardEquipment(&quot;EQ_BREAKABLE_WITCHDRIVE&quot;);
   }
   this.bwd_status = &quot;OK&quot;;
}

// event handler driven function to control actions if equipment damaged in combat.
this.equipmentDamaged = this.equipmentDestroyed = function(equipment)
{
   if (this.shipRestore &amp;&amp; equipment === &quot;EQ_BREAKABLE_WITCHDRIVE&quot;) {this.bwd_status = &quot;DAMAGED&quot;; return;}
   if (equipment == &quot;EQ_BREAKABLE_WITCHDRIVE&quot;)
   {
      this.bwd_status = &quot;DAMAGED&quot;;
      player.consoleMessage(&quot;Thruspace HyperDrive Damaged!&quot;,3);
      this.bwd_setupTimer();
      if (Math.random() &lt; 0.34)
      {
         player.ship.fuelLeakRate = 0.25;
         player.consoleMessage(&quot;Quirium Fuel Leakage Detected!&quot;,3);
      }
   }
}

// event handler driven function for actions on save game.
this.playerWillSaveGame = function()
{
   missionVariables.bwd_status = this.bwd_status;
}
// event handler driven function to check if drive is damaged on start of witch space countdown.
this.playerStartedJumpCountdown = function(type)
{
   if (type == &quot;standard&quot; &amp;&amp; this.bwd_status == &quot;DAMAGED&quot; &amp;&amp; player.ship.equipmentStatus(&quot;EQ_BREAKABLE_WITCHDRIVE&quot;) != &quot;EQUIPMENT_OK&quot;)
   {
      if (!this.bwd_consolemessageTimer)
         {
            this.bwd_consolemessageTimer = new Timer(this, this.bwd_consoleMessage, 1,1);
         }
      else
         {
            this.bwd_consolemessageTimer.start();
         }
      this.bwd_warning.play(3);
      if (Math.random() &lt; 0.34)
      {
         system.addShips(&quot;bwd_dummy_entity&quot;, 1, player.ship.position);
      }
      if (Math.random() &lt; 0.34)
      {
         if (player.ship.scriptedMisjump == false)
         {
         player.ship.scriptedMisjump = true;
         this.bwd_setmisjump = true;
         }
      }
   }
}
// called by timer during jump count down if drive is damaged.
this.bwd_consoleMessage = function()
{
      if (!player.ship.isValid || player.ship.docked){this.bwd_cancelconsolemessageTimer();return}
      player.consoleMessage(&quot;Warning - Thruspace HyperDrive is Damaged. Jump Outcome Unpredictable!&quot;,1);
}

// event handler driven function for actions on launching.
this.shipLaunchedFromStation = this.shipExitedWitchspace = function()
{
   if (player.ship.equipmentStatus(&quot;EQ_BREAKABLE_WITCHDRIVE&quot;) == &quot;EQUIPMENT_OK&quot; &amp;&amp; this.bwd_status != &quot;OK&quot;)
   {
      this.bwd_status = &quot;OK&quot;;
      player.ship.fuelLeakRate = 0;
      player.ship.scriptedMisjump = false;
      this.bwd_deleteTimer();
      return;
   }
   if (this.bwd_status != &quot;OK&quot;)
   {
      this.bwd_setupTimer();
      if (Math.random() &lt; 0.34)
      {
         player.ship.fuelLeakRate = 0.25;
         player.consoleMessage(&quot;Quirium Fuel Leakage Detected!&quot;,3);
      }
   }
   this.bwd_reset();
}
// creates timers if not already in existance otherwise restarts existing timers.
this.bwd_setupTimer = function()
{
   if (!this.bwd_updateTimer)
      {
         this.bwd_updateTimer = new Timer(this, this.bwd_equipmentcheck, 0, 2);
      }
      else
      {
         this.bwd_updateTimer.start();
      }
}

this.bwd_deleteTimer = function()
{
   if (this.bwd_updateTimer &amp;&amp; this.bwd_updateTimer.isRunning)
      {
         this.bwd_updateTimer.stop();
         delete this.bwd_updateTimer;
      }
}
 

// called by timer every 2 seconds when player is in flight to check if equipment repaired on fly.
this.bwd_equipmentcheck = function()
{   
   if (player.ship.equipmentStatus(&quot;EQ_BREAKABLE_WITCHDRIVE&quot;) == &quot;EQUIPMENT_OK&quot; &amp;&amp; this.bwd_status != &quot;OK&quot;) // check to see if something has repaired the witch drive on the fly e.g. Thargoid&#39;s Repair Bots OXP.
   {
      this.bwd_status = &quot;OK&quot;;
      player.ship.fuelLeakRate = 0;
      this.bwd_deleteTimer();
      this.bwd_cancelconsolemessageTimer();
      this.bwd_reset();
   }
}
// removes scriptedMisjump flag and dummy entity if present.
this.bwd_reset = function ()
{
   if (this.bwd_setmisjump == true)
      {
         player.ship.scriptedMisjump = false;
         this.bwd_setmisjump = false;
      }
      function bwd_finddummy(entity)
   {
      return (entity.primaryRole == &quot;bwd_dummy_entity&quot;);
   }
   var targets = system.filteredEntities(this, bwd_finddummy);
   if (targets.length &gt; 0)
   {
      let counter = 0;
      for (counter = 0; counter &lt; targets.length;counter++)
         {
            targets[counter].remove(true);
         }
   }
}
 

// event handler driven function to stop Timers on player&#39;s death or on docking.
this.shipDied = this.shipWillDockWithStation = function()
{
   this.bwd_deleteTimer();
}
// stops console message timer, and calls reset function.
this.playerCancelledJumpCountdown = this.playerJumpFailed = this.shipLaunchedEscapePod = function()
{
   this.bwd_cancelconsolemessageTimer();
   this.bwd_reset();
}

this.shipWillEnterWitchspace = this.bwd_cancelconsolemessageTimer = function()
{
   if (this.bwd_consolemessageTimer &amp;&amp; this.bwd_consolemessageTimer.isRunning)
      {
         this.bwd_consolemessageTimer.stop();
         delete this.bwd_consolemessageTimer;
      }
}

this.allowAwardEquipment = function(eqKey, ship, context) {
   if (context === &quot;purchase&quot; &amp;&amp; eqKey === &quot;EQ_BREAKABLE_WITCHDRIVE&quot; &amp;&amp;  Ship.shipDataForKey(player.ship.dataKey)[&quot;hyperspace_motor&quot;] === &quot;no&quot;) {
      return false;
   }
   else if (context === &quot;purchase&quot; &amp;&amp; eqKey === &quot;EQ_BREAKABLE_WITCHDRIVE&quot;) {
      if (player.ship.equipmentStatus(&quot;EQ_BREAKABLE_WITCHDRIVE&quot;) === &quot;EQUIPMENT_DAMAGED&quot;) return true;
      else return false;
   }
return true;
}</pre></td>
                </tr>
                <tr>
                    <td valign="top">Scripts/bwd_dummy_entity.js</td>
                    <td><pre>this.name        = &quot;ecl_escape_pod_beacon&quot;; 
this.author      = &quot;capt murphy&quot;; 
this.copyright   = &quot;2011 capt murphy&quot;;
this.licence     = &quot;CC BY-NC-SA 3.0&quot;; // see http://creativecommons.org/licenses/by-nc-sa/3.0/ for more info.
this.description = &quot;Shipscript for escape pod beacons.&quot;; 
this.version     = &quot;1.1&quot;;

this.shipSpawned = function()
{
	var targets = system.shipsWithPrimaryRole(&quot;escape-capsule&quot;,this.ship,50);
	if (targets.length &gt; 0)
	{
	this.ship.target = targets[0];
	this.ecl_beaconcontrolTimer = new Timer (this, this.ecl_beaconcontrol,0,0.25);
	}
	else
	{
	this.ship.remove();
	}
}

this.ecl_beaconcontrol = function()
{
    if (this.ship.target)
    {
      this.ship.position = this.ship.target.position.add(this.ship.target.vectorUp.multiply(50));
    }
}

this.shipTargetLost = function()
{
	this.ship.remove();
}

this.shipRemoved = this.entityDestroyed = function()
{
  if (this.ecl_beaconcontrolTimer &amp;&amp; this.ecl_beaconcontrolTimer.isRunning)
  {
	this.ecl_beaconcontrolTimer.stop();
	delete this.ecl_beaconcontrolTimer;
  }
}

	
	</pre></td>
                </tr>
            </table>
        </a>
    </body>
</html>
