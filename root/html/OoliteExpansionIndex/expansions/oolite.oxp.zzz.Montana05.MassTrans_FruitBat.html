<html>
    <head>
        <title>Expansion Fruit Bat</title>
        <link rel="stylesheet" href="../style.css">
    </head>
    <body>
        <table border="0" width="100%">
            <tr>
                <td>Back to <a href='../index.html'>Index</a></td>
                <td align="right"><small>Page generated: Oct 11, 2023, 3:16:49 PM</small></td>
            </tr>
        </table>

        <h1>Expansion Fruit Bat</h1>

        <h2>Content</h2>
        <ul>
          <li><a href="#warnings">Warnings</a></li>
          <li><a href="#manifest">Manifest</a></li>
          <li><a href="#documentation">Documentation</a></li>
          <li><a href="#equipment">0 Equipment</a></li>
          <li><a href="#ships">12 Ships</a></li>
          <li><a href="#models">0 Models</a></li>
          <li><a href="#scripts">2 Scripts</a></li>
        </ul>

          <a name="warnings">
            <h2>Warnings</h2>
            <ol>
                <li>Tags mismatch between OXP Manifest and Expansion Manager at character position 0002 (RIGHT SQUARE BRACKET vs LATIN SMALL LETTER S)(&#39;[]&#39; vs &#39;[ships]&#39;)</li>
                <li>Information URL mismatch between OXP Manifest and Expansion Manager string length at character position 0</li>
            </ol>
          </a>

        <a name="manifest">
        <h2>Manifest</h2>
            <table border="1">
                <tr>
                    <th></th>
                    <th>from Expansion Manager's OXP list</th>
                    <th>from Expansion Manifest</th>
                </tr>
                <tr>
                    <td>Description</td>
                    <td>A, somewhat manouvreable fighter/escort, often used by pirates, hunters and escorts alike. For more details please check the wiki page.</td>
                    <td>A, somewhat manouvreable fighter/escort, often used by pirates, hunters and escorts alike. For more details please check the wiki page.</td>
                </tr>
                <tr>
                    <td>Identifier</td>
                    <td>oolite.oxp.zzz.Montana05.MassTrans_FruitBat</td>
                    <td>oolite.oxp.zzz.Montana05.MassTrans_FruitBat</td>
                </tr>
                <tr>
                    <td>Title</td>
                    <td>Fruit Bat</td>
                    <td>Fruit Bat</td>
                </tr>
                <tr>
                    <td>Category</td>
                    <td>Ships</td>
                    <td>Ships</td>
                </tr>
                <tr>
                    <td>Author</td>
                    <td>Rorschachhamster, Montana05</td>
                    <td>Rorschachhamster, Montana05</td>
                </tr>
                <tr>
                    <td>Version</td>
                    <td>1.10</td>
                    <td>1.10</td>
                </tr>
                <tr>
                    <td>Tags</td>
                    <td></td>
                    <td>ships</td>
                </tr>
                <tr>
                    <td>Required Oolite Version</td>
                    <td></td>
                    <td></td>
                </tr>
                <tr>
                    <td>Maximum Oolite Version</td>
                    <td></td>
                    <td></td>
                </tr>
                <tr>
                    <td>Required Expansions</td>
                    <td>
                    </td>
                    <td>
                    </td>
                </tr>
                <tr>
                    <td>Optional Expansions</td>
                    <td>
                    </td>
                    <td>
                    </td>
                </tr>
                <tr>
                    <td>Conflict Expansions</td>
                    <td>
                    </td>
                    <td>
                    </td>
                </tr>
                <tr>
                    <td>Information URL</td>
                    <td><a target="_blank" href=""></a></td>
                    <td><a target="_blank" href="">n/a</a></td>
                </tr>
                <tr>
                    <td>Download URL</td>
                    <td><a target="_blank" href="https://wiki.alioth.net/img_auth.php/4/45/Oolite.oxp.zzz.Montana05.MassTrans_FruitBat.OXZ">https://wiki.alioth.net/img_auth.php/4/45/Oolite.oxp.zzz.Montana05.MassTrans_FruitBat.OXZ</a></td>
                    <td><a target="_blank" href="">n/a</a></td>
                </tr>
                <tr>
                    <td>License</td>
                    <td>CC BY-NC-SA 3.0</td>
                    <td>CC BY-NC-SA 3.0</td>
                </tr>
                <tr>
                    <td>File Size</td>
                    <td>n/a</td>
                </tr>
                <tr>
                    <td>Upload date</td>
                    <td>1637640304</td>
                </tr>
            </table>
                </a>

        <a name="documentation">
        <h2>Documentation</h2>
        <p>Also read <a href='http://wiki.alioth.net/index.php/Fruit%20Bat'>http://wiki.alioth.net/index.php/Fruit%20Bat</a></p>
        <h3>read_me.txt</h3>
        <pre>
Overview
========

The &quot;Fruit Bat&quot; is a, somewhat maneuverable fighter/escort, often used by pirates, hunters and escorts alike.

History
=======

The &quot;Fruit Bat&quot; was designed for cheap mass production by the now defunct CLAN Ltd. from Erbiti. The production facilities 
were later bought by SensimTrading and relocated to Anisor.

The ship was not a very popular model, but when MASSTrans GLC bought into the traditional family business 
(holding 49.90 percent of the shares), the production of a slightly enhanced version under the name of &quot;Flying Fox&quot; started. 
This craft was exclusively sold to MASSTrans&#39; subsidiary firm MT SEC. 

While sales of the standard model have been rising slightly, the demand for a customer version of the &quot;Flying Fox&quot;
are estimated to be even higher. When MT SEC, with allowance of their parent company, started to open their escort services 
to private traders an enhanced model was needed. This time the management contacted Biarge United Shipyards and asked for
a design. The result, the &quot;Mega Bat Mark I&quot;, was accepted and the production and profits were split between both companies.

Credits
=======

Rorschachhamster (original author)

Requirements
============

Oolite V 1.88 or higher. 

Details
=======

For additional details please check the wiki-page: http://wiki.alioth.net/index.php/Fruit_Bat

License
=======

This work is licensed under Creative Commons Attribution Non-Commercial Share Alike 3.0 (CC BY-NC-SA 3.0).
To view a copy of this license visit http://creativecommons.org/licenses/by-nc-sa/3.0. 

Version History
===============

Version 1.00 / 2013-02-04 / Rorschachhamster:

    initial release

Version 1.01 / 2013-03-20 / Rorschachhamster:

    The MT Sec Flying Fox is now outfitted with an aft laser as well, and made a little tougher

Version 1.10 / 2021-11-23 / Montana05:

    overhaul of the complete OXP, including fixing existing bugs
    adjusted roles
    rearranged or added weapon positions
    added flashers for the position lights
    modified the models
    tweaked the emission map
    added normal map
    added &quot;gloss&quot;
    outsourced the role of pirate to an individual ship with tweaked diffuse map and weapons
    added a small ship-script for escape pods and cargo (includes new entities and textures)
    added shiplibrary.plist

    
Original ReadMe from Rorschachhamster
=====================================

The Fruit Bat Ship(s) OXP.
By Rorschachhamster

Made some time ago, never thought about releasing it, because of issues, that I could finally solve, 
and now a recomended part of my coming freighttrain oxp.

INSTALLATION
Unzip the fruitbat1.00.oxp into your addons folder. 

Version 1.01
The MT Sec Flying Fox is now outfitted with an aft laser as well, and made a little tougher...

Version 1.00
Original release. 
</pre>
        </a>

        <a name="equipment">          
        <h2>Equipment</h2>
            This expansion declares no equipment. This may be related to warnings.
        </a>

        <a name="ships">    
        <h2>Ships</h2>
            <table>
                <tr>
                    <th>Name</th>
                </tr>
                <tr>
                    <td><a href="../ships/MassTrans_FlyingFox_MT.html">MT SEC Flying Fox</a></td>
                </tr>
                <tr>
                    <td><a href="../ships/MassTrans_FruitBat.html">Fruit Bat</a></td>
                </tr>
                <tr>
                    <td><a href="../ships/MassTrans_FruitBat_cargo_firearms.html">MassTrans_FruitBat_cargo_firearms</a></td>
                </tr>
                <tr>
                    <td><a href="../ships/MassTrans_FruitBat_cargo_food.html">Cargo container</a></td>
                </tr>
                <tr>
                    <td><a href="../ships/MassTrans_FruitBat_cargo_liquor_wines.html">MassTrans_FruitBat_cargo_liquor_wines</a></td>
                </tr>
                <tr>
                    <td><a href="../ships/MassTrans_FruitBat_cargo_witchfire_whiskey.html">MassTrans_FruitBat_cargo_witchfire_whiskey</a></td>
                </tr>
                <tr>
                    <td><a href="../ships/MassTrans_FruitBat_escape_capsule_MT.html">escape capsule</a></td>
                </tr>
                <tr>
                    <td><a href="../ships/MassTrans_FruitBat_escape_capsule_MT_pirate.html">escape capsule</a></td>
                </tr>
                <tr>
                    <td><a href="../ships/MassTrans_FruitBat_escape_capsule_pirate.html">escape capsule</a></td>
                </tr>
                <tr>
                    <td><a href="../ships/MassTrans_FruitBat_escape_capsule_std.html">escape capsule</a></td>
                </tr>
                <tr>
                    <td><a href="../ships/MassTrans_FruitBat_pirate.html">Fruit Bat</a></td>
                </tr>
                <tr>
                    <td><a href="../ships/MassTrans_FruitBat_player.html">Fruit Bat</a></td>
                </tr>
            </table>
        </a>

        <a name="models">    
        <h2>Models</h2>
            This expansion declares no models. This may be related to warnings.
        </a>

        <a name="scripts">    
        <h2>Scripts</h2>
            <table>
                <tr>
                    <th>Path</th>
                </tr>
                <tr>
                    <td valign="top">Scripts/MassTrans_FruitBat_events.js</td>
                    <td><pre>this.name			= &quot;MassTrans_FruitBat_events&quot;;
this.author			= &quot;Montana05&quot;;
this.description	= &quot;Event handler for Fruit Bat and Flying Fox&quot;;
this.version		= &quot;1.10&quot;;
this.copyright		= &quot;2021 Montana05&quot;;
this.licence		= &quot;CC BY-NC-SA 3.0&quot;;
&quot;use strict&quot;;

this.shipSpawned = function(ship)
{
	this.$MassTrans_FruitBat_shipType = this.ship.dataKey;
	this.$MassTrans_FruitBat_shipRole = this.ship.primaryRole;

	if(this.ship.hasRole(&quot;escape-capsule&quot;))
	{
		var crewName = expandDescription(&quot;[nom]&quot;);
		var crewDescription = &quot;a crew member of an evacuated ship&quot;;
		var crewRole = &quot;hunter&quot;;  // not perfect but somewhere in the middle
		var crewRank = &quot;Pilot&quot;;
		var crewRace = expandDescription(&quot;[MassTrans_FruitBat_GalCop_races_scientific]&quot;);  // add a race to the crew members
		var crewBounty = 0;
		var crewInsurance = this.$getRndInteger(90, 450);

		// based on an crew of 1 to 2 person
		this.$MassTrans_FruitBat_crew_ranks_array = 
		[&quot;Gunner&quot;, &quot;Co-Pilot&quot;, &quot;Pilot&quot;, &quot;Commander&quot;];
		crewRank = 
		$MassTrans_FruitBat_crew_ranks_array[Math.floor(Math.random() * $MassTrans_FruitBat_crew_ranks_array.length)];

		switch(this.$MassTrans_FruitBat_shipType) 
		{
			case &quot;MassTrans_FruitBat_escape_capsule_std&quot;:

				crewName = (&quot;the &quot; + crewRace + &quot; &quot; + crewRank + &quot; &quot; + expandDescription(&quot;[nom]&quot;));
				crewDescription = &quot;a ship crew member&quot;;
				crewInsurance = crewInsurance;
				crewRole = &quot;hunter&quot;;
				break;

			case &quot;MassTrans_FruitBat_escape_capsule_MT&quot;:

				crewName = (&quot;the &quot; + crewRace + &quot; &quot; + crewRank + &quot; &quot; + expandDescription(&quot;[nom]&quot;));
				crewDescription = &quot;a MT Sec ship crew member&quot;;
				crewInsurance = (crewInsurance * 1.20);  // MT Sec got better insurance conditions
				crewRole = &quot;hunter&quot;;
				break;
			
			case &quot;MassTrans_FruitBat_escape_capsule_pirate&quot;:
				
				crewName = (&quot;the &quot; + crewRace + &quot; &quot; + expandDescription(&quot;[MassTrans_FruitBat_pirate_nicknames]&quot;) + expandDescription(&quot;[nom]&quot;));
				crewDescription = &quot;a &quot; + expandDescription(&quot;[MassTrans_FruitBat_criminals]&quot;) +  &quot;wanted by GalCop police&quot;;
				crewRole = &quot;pirate&quot;;
				crewBounty = crewInsurance + (15 * system.government);  // stable governments pay extra bonus
				crewInsurance = 0;
				break;
	
			case &quot;MassTrans_FruitBat_escape_capsule_MT_pirate&quot;:

				crewName = (&quot;the &quot; + crewRace + &quot; &quot; + crewRank + &quot; &quot; + expandDescription(&quot;[nom]&quot;));
				crewDescription = &quot;a rouge MT Sec ship crew member&quot;;
				crewBounty = (crewInsurance * 1.20) + (15 * system.government);  // stable governments pay extra bonus
				crewInsurance = 0;
				crewRole = &quot;pirate&quot;;
				break;
				
			default: 
				break;
		};

		this.ship.setCrew
		(
			{
				name: crewName,
				short_description: crewDescription,
				role: crewRole,
				species: crewRace,
				insurance: crewInsurance,
				bounty: crewBounty
			}
		);
		
		// removes individual roles
		this.ship.primaryRole = &quot;escape-capsule&quot;;
	}
	else
	{
		var cargoSpace = this.ship.cargoSpaceCapacity;
		var cargoLoad = this.ship.cargoSpaceUsed;
		var cargoLeft = cargoSpace - cargoLoad;
		
		// removes individual roles of the ships, this roles will only be called from other OXP&#39;s
		// adds some cargo to all ships
		switch(this.$MassTrans_FruitBat_shipRole) 
		{
			case &quot;MassTrans_FruitBat&quot;:
			case &quot;MassTrans_FlyingFox_MT&quot;:
			
				this.ship.primaryRole = &quot;escort-medium&quot;;
				break;

			case &quot;MassTrans_FruitBat_pirate&quot;:

				this.ship.primaryRole = &quot;pirate-medium-fighter&quot;;
				break;

			default: 
				break;
		};

		if(cargoLeft &gt;= 3)
		{
			for(var i = this.$getRndInteger(1, 3) - 1 ; i &gt;= 0 ; --i)
			{
				this.ship.adjustCargo(this.$MassTrans_FruitBat_space_jockeyCargo(), 1);
			};
		};
	};
};	

this.shipDied = function(whom, why)
{
	if(this.ship.hasRole(&quot;escape-capsule&quot;))
	{
		return;
	}
	else
	{
		// neutral inits first
		var podType = &quot;escape-capsule&quot;;
		var podCount = 1;
		var criminalCrew = &quot;N&quot;;
		var cargoType = &quot;&quot;;
		var cargoPod = &quot;cargopod&quot;;
		var cargoCount = 0;

		if(this.ship.bounty &gt; 7 || this.$MassTrans_FruitBat_shipType == &quot;MassTrans_FruitBat_pirate&quot;)
		{
			criminalCrew = &quot;Y&quot;;
		};
					
		switch(this.$MassTrans_FruitBat_shipType) 
		{
			case &quot;MassTrans_FruitBat&quot;:
			case &quot;MassTrans_FruitBat_pirate&quot;:
			
				if(criminalCrew == &quot;Y&quot;)
				{
					podType = &quot;MassTrans_FruitBat_escape_capsule_pirate&quot;;
				}	
				else
				{
					podType = &quot;MassTrans_FruitBat_escape_capsule_std&quot;;
				};
				break;
			
			case &quot;MassTrans_FlyingFox_MT&quot;:
			
				if(criminalCrew == &quot;Y&quot;)
				{
					podType = &quot;MassTrans_FruitBat_escape_capsule_MT_pirate&quot;;
				}	
				else
				{
					podType = &quot;MassTrans_FruitBat_escape_capsule_MT&quot;;
				};
				break;

			default: 
				break;
		};

		// emergency crafts
		system.addShips(podType, podCount, this.ship.position);
		
		// cargopods
		if(this.ship.cargoSpaceUsed &gt; 0)
		{
			for(var i = this.ship.cargoList.length - 1 ; i &gt;= 0 ; --i)
			{
				cargoType = this.ship.cargoList[i].commodity;
				cargoPod = (&quot;MassTrans_FruitBat_cargo_&quot; + cargoType);
				cargoCount = this.ship.cargoList[i].quantity;
							
				if(cargoType == &quot;firearms&quot; || cargoType == &quot;food&quot; || cargoType == &quot;liquor_wines&quot; || cargoType == &quot;witchfire_whiskey&quot;)
				{
					system.addShips(cargoPod, cargoCount, this.ship.position);
				};
			};
		};
	};
};

// food, booze and guns, what else you need for your trip ? :P
this.$MassTrans_FruitBat_space_jockeyCargo = function()
{
	this.$MassTrans_FruitBat_space_jockey_cargo_array = [&quot;firearms&quot;, &quot;food&quot;, &quot;liquor_wines&quot;];

	if(worldScripts[&quot;witchfire-populator&quot;])  // Darkside Moonshine Distillery OXP
	{
		this.$MassTrans_FruitBat_space_jockey_cargo_array.push(&quot;witchfire_whiskey&quot;);
	};

	var space_jockey_cargo = 
	$MassTrans_FruitBat_space_jockey_cargo_array[Math.floor(Math.random() * $MassTrans_FruitBat_space_jockey_cargo_array.length)];

	return (space_jockey_cargo);
};

this.$getRndInteger = function(min, max)
{
	return Math.floor(Math.random() * (max - min + 1) ) + min;
};
</pre></td>
                </tr>
                <tr>
                    <td valign="top">Scripts/MassTrans_FruitBat_resources.js</td>
                    <td><pre>this.name			= &quot;MassTrans_FruitBat_resources&quot;;
this.author			= &quot;Montana05&quot;;
this.description	= &quot;adjusts containers&quot;;
this.version		= &quot;1.10&quot;;
this.copyright		= &quot;2021 Montana05&quot;;
this.licence		= &quot;CC BY-NC-SA 4.0&quot;;
&quot;use strict&quot;;

this.shipSpawned = function(ship)
{
	// standard primary roles
	if(this.ship.dataKey.indexOf(&quot;MassTrans_FruitBat_cargo&quot;) != -1)
		this.ship.primaryRole = &quot;cargopod&quot;;
};</pre></td>
                </tr>
            </table>
        </a>
    </body>
</html>
