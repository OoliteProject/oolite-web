<html>
    <head>
        <title>Expansion Gatling Laser</title>
        <link rel="stylesheet" href="../style.css">
    </head>
    <body>
        <table border="0" width="100%">
            <tr>
                <td>Back to <a href='../index.html'>Index</a></td>
                <td align="right"><small>Page generated: Oct 11, 2023, 3:16:48 PM</small></td>
            </tr>
        </table>

        <h1>Expansion Gatling Laser</h1>

        <h2>Content</h2>
        <ul>
          
          <li><a href="#manifest">Manifest</a></li>
          <li><a href="#documentation">Documentation</a></li>
          <li><a href="#equipment">6 Equipment</a></li>
          <li><a href="#ships">0 Ships</a></li>
          <li><a href="#models">0 Models</a></li>
          <li><a href="#scripts">2 Scripts</a></li>
        </ul>


        <a name="manifest">
        <h2>Manifest</h2>
            <table border="1">
                <tr>
                    <th></th>
                    <th>from Expansion Manager's OXP list</th>
                    <th>from Expansion Manifest</th>
                </tr>
                <tr>
                    <td>Description</td>
                    <td>Fast laser with internal cooler to be usable soon after overheat. Hold down the fire button when overheated to force the built-in cooler to dissipate the heat as fast as possible. Range is 10km only and need a ship over 130t like Cobra Mark III.</td>
                    <td>Fast laser with internal cooler to be usable soon after overheat. Hold down the fire button when overheated to force the built-in cooler to dissipate the heat as fast as possible. Range is 10km only and need a ship over 130t like Cobra Mark III.</td>
                </tr>
                <tr>
                    <td>Identifier</td>
                    <td>oolite.oxp.Norby.Gatling_Laser</td>
                    <td>oolite.oxp.Norby.Gatling_Laser</td>
                </tr>
                <tr>
                    <td>Title</td>
                    <td>Gatling Laser</td>
                    <td>Gatling Laser</td>
                </tr>
                <tr>
                    <td>Category</td>
                    <td>Equipment</td>
                    <td>Equipment</td>
                </tr>
                <tr>
                    <td>Author</td>
                    <td>Norby</td>
                    <td>Norby</td>
                </tr>
                <tr>
                    <td>Version</td>
                    <td>1.0</td>
                    <td>1.0</td>
                </tr>
                <tr>
                    <td>Tags</td>
                    <td></td>
                    <td></td>
                </tr>
                <tr>
                    <td>Required Oolite Version</td>
                    <td></td>
                    <td></td>
                </tr>
                <tr>
                    <td>Maximum Oolite Version</td>
                    <td></td>
                    <td></td>
                </tr>
                <tr>
                    <td>Required Expansions</td>
                    <td>
                    </td>
                    <td>
                    </td>
                </tr>
                <tr>
                    <td>Optional Expansions</td>
                    <td>
                    </td>
                    <td>
                    </td>
                </tr>
                <tr>
                    <td>Conflict Expansions</td>
                    <td>
                    </td>
                    <td>
                    </td>
                </tr>
                <tr>
                    <td>Information URL</td>
                    <td><a target="_blank" href="http://wiki.alioth.net/index.php/Gatling_Laser">http://wiki.alioth.net/index.php/Gatling_Laser</a></td>
                    <td><a target="_blank" href="">n/a</a></td>
                </tr>
                <tr>
                    <td>Download URL</td>
                    <td><a target="_blank" href="https://wiki.alioth.net/img_auth.php/b/b2/Gatling_Laser_1.0.oxz">https://wiki.alioth.net/img_auth.php/b/b2/Gatling_Laser_1.0.oxz</a></td>
                    <td><a target="_blank" href="">n/a</a></td>
                </tr>
                <tr>
                    <td>License</td>
                    <td>CC BY-NC-SA 4</td>
                    <td>CC BY-NC-SA 4</td>
                </tr>
                <tr>
                    <td>File Size</td>
                    <td>n/a</td>
                </tr>
                <tr>
                    <td>Upload date</td>
                    <td>1610873446</td>
                </tr>
            </table>
                </a>

        <a name="documentation">
        <h2>Documentation</h2>
        <p>Also read <a href='http://wiki.alioth.net/index.php/Gatling%20Laser'>http://wiki.alioth.net/index.php/Gatling%20Laser</a></p>
        </a>

        <a name="equipment">          
        <h2>Equipment</h2>
            <table>
                <tr>
                    <th>Name</th>
                    <th>Visible</th>
                    <th>Cost [deci-credits]</th>
                    <th>Tech-Level</th>
                </tr>
                <tr>
                    <td><a href="../equipment/EQ_WEAPON_GATLING_LASER_1.html">Gatling Laser</a></td>
                    <td>yes</td>
                    <td align="right">250000</td>
                    <td align="center">12+</td>
                </tr>
                <tr>
                    <td><a href="../equipment/EQ_WEAPON_GATLING_LASER_2.html">Twin Gatling Laser</a></td>
                    <td>yes</td>
                    <td align="right">500000</td>
                    <td align="center">12+</td>
                </tr>
                <tr>
                    <td><a href="../equipment/EQ_WEAPON_GATLING_LASER_3.html">Battle Gatling Laser</a></td>
                    <td>yes</td>
                    <td align="right">750000</td>
                    <td align="center">12+</td>
                </tr>
                <tr>
                    <td><a href="../equipment/EQ_WEAPON_GATLING_LASER_4.html">Behemoth Gatling Laser</a></td>
                    <td>yes</td>
                    <td align="right">1000000</td>
                    <td align="center">12+</td>
                </tr>
                <tr>
                    <td><a href="../equipment/EQ_WEAPON_GATLING_LASER_5.html">Base Gatling Laser</a></td>
                    <td>yes</td>
                    <td align="right">1250000</td>
                    <td align="center">12+</td>
                </tr>
                <tr>
                    <td><a href="../equipment/EQ_WEAPON_GATLING_LASER_COOLER.html">Gatling Laser Cooler</a></td>
                    <td>yes</td>
                    <td align="right">0</td>
                    <td align="center">16+</td>
                </tr>
            </table>
        </a>

        <a name="ships">    
        <h2>Ships</h2>
            This expansion declares no ships. 
        </a>

        <a name="models">    
        <h2>Models</h2>
            This expansion declares no models. 
        </a>

        <a name="scripts">    
        <h2>Scripts</h2>
            <table>
                <tr>
                    <th>Path</th>
                </tr>
                <tr>
                    <td valign="top">Scripts/gatling_laser-conditions.js</td>
                    <td><pre>&quot;use strict&quot;;
this.name	= &quot;gatling_laser-conditions&quot;;
this.author	= &quot;Norby&quot;;
this.copyright   = &quot;2013 Norbert Nagy&quot;;
this.licence     = &quot;CC BY-NC-SA 4.0&quot;;
this.description = &quot;This equipment is usable only for ships over 130t like the Cobra Mark III.&quot;;

this.allowAwardEquipment = function(equipment, ship, context)
{
	// OXP hook to allow stations to forbid specific equipment
	if (context == &quot;purchase&quot; &amp;&amp; player.ship.dockedStation &amp;&amp; player.ship.dockedStation.scriptInfo[&quot;oolite-barred-equipment&quot;])
	{
		if (player.ship.dockedStation.scriptInfo[&quot;oolite-barred-equipment&quot;].indexOf(equipment) != -1)
		{
			return false;
		}
	}

	// OXP hook to allow ships to forbid specific &quot;available to all&quot; equipment
	if (ship.scriptInfo &amp;&amp; ship.scriptInfo[&quot;oolite-barred-equipment&quot;] &amp;&amp; ship.scriptInfo[&quot;oolite-barred-equipment&quot;].indexOf(equipment) != -1)
	{
		return false;
	}

//	player.consoleMessage( eqKey+&quot; &quot;+ship+&quot; &quot;+context );//debug

	//for large ships only like Cobra Mark III
	if( ship.mass &lt; 130000 ) return false;

	if( equipment == &quot;EQ_WEAPON_GATLING_LASER_2&quot; &amp;&amp; ship.mass &lt; 400000 ) return false;
	if( equipment == &quot;EQ_WEAPON_GATLING_LASER_3&quot; &amp;&amp; ship.mass &lt; 800000 ) return false;
	if( equipment == &quot;EQ_WEAPON_GATLING_LASER_4&quot; &amp;&amp; ship.mass &lt; 8000000 ) return false;
	if( equipment == &quot;EQ_WEAPON_GATLING_LASER_5&quot; &amp;&amp; ship.mass &lt; 200000000 ) return false;
	
//	if( equipment == &quot;EQ_WEAPON_GATLING_LASER_COOLER&quot; &amp;&amp; context != &quot;scripted&quot; ) return false;
//	if( equipment == &quot;EQ_WEAPON_GATLING_LASER_COOLER&quot; ) {
//		log(this.name,  context +&quot; &quot;+equipment+&quot; &quot;+ship);
//		if( context != &quot;scripted&quot; ) return false;
//	}

	return true;
}</pre></td>
                </tr>
                <tr>
                    <td valign="top">Scripts/gatling_laser.js</td>
                    <td><pre>&quot;use strict&quot;;
this.name	= &quot;gatling_laser&quot;;
this.author	= &quot;Norby&quot;;
this.copyright	= &quot;2015 Norby&quot;;
this.description= &quot;laser cooler&quot;;
this.licence	= &quot;CC BY-NC-SA 4.0&quot;;

//Internal variables, should not touch
this.$Heat = 0;
this.$LastView = null;
this.$Timer = null;
this.$WeaponKey = [];

//worldscript events
this.startUp = function() {
	if( !this.$Timer ) this.$Timer = new Timer(this, this.$Timed.bind(this), 0.25, 0.25);
}

this.startUpComplete = function() {
	var w = worldScripts.LMSS_Core;
	if( w &amp;&amp; w._incompatible ) //for Laser Mount Switching System (LMSS)
		w._incompatible.push(&quot;EQ_WEAPON_GATLING_LASER_COOLER&quot;);
}

this.shipWillDockWithStation = function() {
	this.$DetachCooler();
}

//Internal functions
this.$DetachCooler = function() {
	var w = this.$WeaponKey[&quot;VIEW_AFT&quot;]; if( w ) player.ship.aftWeapon = w;
	w = this.$WeaponKey[&quot;VIEW_FORWARD&quot;]; if( w ) player.ship.forwardWeapon = w;
	w = this.$WeaponKey[&quot;VIEW_PORT&quot;]; if( w ) player.ship.portWeapon = w;
	w = this.$WeaponKey[&quot;VIEW_STARBOARD&quot;]; if( w ) player.ship.starboardWeapon = w;
	this.$Heat = 0;
	this.$WeaponKey = [];
}

this.$Timed = function() {
	var p = player.ship; if( !p.isValid ) return;
	var c = &quot;EQ_WEAPON_GATLING_LASER_COOLER&quot;;
	var k = p.currentWeapon.equipmentKey;
	var v = p.viewDirection;
	if( p.laserHeatLevel &gt; 0.75 &amp;&amp; k != c &amp;&amp; !this.$WeaponKey[v]
		&amp;&amp; k.indexOf(&quot;EQ_WEAPON_GATLING_LASER_&quot;) == 0
		&amp;&amp; ( v == &quot;VIEW_FORWARD&quot; || v == &quot;VIEW_AFT&quot; //do not attach in external view
			|| v == &quot;VIEW_PORT&quot; || v == &quot;VIEW_STARBOARD&quot; ) ) {
		this.$Heat = p.laserHeatLevel;
		this.$WeaponKey[v] = k;
		p.currentWeapon = c;
//		player.consoleMessage(&quot;Gatling Cooler attached&quot;);
	} else if( this.$WeaponKey[v] &amp;&amp; k == c
		&amp;&amp; ( p.laserHeatLevel &lt; 0.1 || !p.weaponsOnline ) ) {
		p.currentWeapon = this.$WeaponKey[v];
		this.$Heat = 0;
		this.$WeaponKey[v] = null;
//		player.consoleMessage(&quot;Gatling Cooler detached&quot;);
	}
	if( this.$LastView == v &amp;&amp; k == c ) { //detect fast cooling
		if( this.$Heat &gt; 0 &amp;&amp; this.$Heat &gt; p.laserHeatLevel + 0.01 ) {
			p.temperature += 0.03; //increase cabin temp
		}
		this.$Heat = p.laserHeatLevel;//save for the next timer call
	} else this.$Heat = 0;
	this.$LastView = v;
}</pre></td>
                </tr>
            </table>
        </a>
    </body>
</html>
