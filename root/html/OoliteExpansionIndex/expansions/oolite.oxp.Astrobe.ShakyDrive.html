<html>
    <head>
        <title>Expansion Shaky Drive</title>
        <link rel="stylesheet" href="../style.css">
    </head>
    <body>
        <table border="0" width="100%">
            <tr>
                <td>Back to <a href='../index.html'>Index</a></td>
                <td align="right"><small>Page generated: Oct 11, 2023, 3:16:48 PM</small></td>
            </tr>
        </table>

        <h1>Expansion Shaky Drive</h1>

        <h2>Content</h2>
        <ul>
          <li><a href="#warnings">Warnings</a></li>
          <li><a href="#manifest">Manifest</a></li>
          <li><a href="#documentation">Documentation</a></li>
          <li><a href="#equipment">0 Equipment</a></li>
          <li><a href="#ships">0 Ships</a></li>
          <li><a href="#models">0 Models</a></li>
          <li><a href="#scripts">1 Scripts</a></li>
        </ul>

          <a name="warnings">
            <h2>Warnings</h2>
            <ol>
                <li>Information URL mismatch between OXP Manifest and Expansion Manager string length at character position 0</li>
            </ol>
          </a>

        <a name="manifest">
        <h2>Manifest</h2>
            <table border="1">
                <tr>
                    <th></th>
                    <th>from Expansion Manager's OXP list</th>
                    <th>from Expansion Manifest</th>
                </tr>
                <tr>
                    <td>Description</td>
                    <td>Shaky Drive makes the ship shake and steer randomly while the Torus drive is engaged. Apply manual corrections to maintain desired heading</td>
                    <td>Shaky Drive makes the ship shake and steer randomly while the Torus drive is engaged. Apply manual corrections to maintain desired heading</td>
                </tr>
                <tr>
                    <td>Identifier</td>
                    <td>oolite.oxp.Astrobe.ShakyDrive</td>
                    <td>oolite.oxp.Astrobe.ShakyDrive</td>
                </tr>
                <tr>
                    <td>Title</td>
                    <td>Shaky Drive</td>
                    <td>Shaky Drive</td>
                </tr>
                <tr>
                    <td>Category</td>
                    <td>Mechanics</td>
                    <td>Mechanics</td>
                </tr>
                <tr>
                    <td>Author</td>
                    <td>Astrobe</td>
                    <td>Astrobe</td>
                </tr>
                <tr>
                    <td>Version</td>
                    <td>1.0.0</td>
                    <td>1.0.0</td>
                </tr>
                <tr>
                    <td>Tags</td>
                    <td></td>
                    <td></td>
                </tr>
                <tr>
                    <td>Required Oolite Version</td>
                    <td></td>
                    <td></td>
                </tr>
                <tr>
                    <td>Maximum Oolite Version</td>
                    <td></td>
                    <td></td>
                </tr>
                <tr>
                    <td>Required Expansions</td>
                    <td>
                    </td>
                    <td>
                    </td>
                </tr>
                <tr>
                    <td>Optional Expansions</td>
                    <td>
                    </td>
                    <td>
                    </td>
                </tr>
                <tr>
                    <td>Conflict Expansions</td>
                    <td>
                    </td>
                    <td>
                    </td>
                </tr>
                <tr>
                    <td>Information URL</td>
                    <td><a target="_blank" href=""></a></td>
                    <td><a target="_blank" href="">n/a</a></td>
                </tr>
                <tr>
                    <td>Download URL</td>
                    <td><a target="_blank" href="https://wiki.alioth.net/img_auth.php/a/a8/Oolite.oxp.Astrobe.ShakyDrive.oxz">https://wiki.alioth.net/img_auth.php/a/a8/Oolite.oxp.Astrobe.ShakyDrive.oxz</a></td>
                    <td><a target="_blank" href="">n/a</a></td>
                </tr>
                <tr>
                    <td>License</td>
                    <td>CC-BY-NC-SA 3.0</td>
                    <td>CC-BY-NC-SA 3.0</td>
                </tr>
                <tr>
                    <td>File Size</td>
                    <td>n/a</td>
                </tr>
                <tr>
                    <td>Upload date</td>
                    <td>1610873405</td>
                </tr>
            </table>
                </a>

        <a name="documentation">
        <h2>Documentation</h2>
        <p>Also read <a href='http://wiki.alioth.net/index.php/Shaky%20Drive'>http://wiki.alioth.net/index.php/Shaky%20Drive</a></p>
        <h3>Bullet Drive READ ME.txt</h3>
        <pre>----------------------------
Shaky Drive OXP  ver. 0.0.2
----------------------------
  Date: April 12th, 2016
Author: Astrobe, based on &quot;Bullet Drive&quot; by Wildblood


Imperfections in thrusters and mass imbalances within the ship are normally
automatically corrected by the flight control software.
However, at very high speeds, those corrections are no longer effective. The
ship starts to &quot;shake&quot; and has a tendency to &quot;steer&quot; in a some direction, and
becomes harder to control securely.
For this reason, the flight control software automatically disengage the Torus
drive when it detects a significant mass nearby; a security commonly known as
a &quot;mass lock&quot;.

</pre>
        </a>

        <a name="equipment">          
        <h2>Equipment</h2>
            This expansion declares no equipment. This may be related to warnings.
        </a>

        <a name="ships">    
        <h2>Ships</h2>
            This expansion declares no ships. This may be related to warnings.
        </a>

        <a name="models">    
        <h2>Models</h2>
            This expansion declares no models. This may be related to warnings.
        </a>

        <a name="scripts">    
        <h2>Scripts</h2>
            <table>
                <tr>
                    <th>Path</th>
                </tr>
                <tr>
                    <td valign="top">Config/script.js</td>
                    <td><pre>&quot;use strict&quot;;

this.name    = &quot;Shaky Drive&quot;;
this.version = &quot;1.0.0&quot;; // Astrobe. Based on Bullet Drive by Wildblood, May 16th, 2013

/* ====================================================================================
			MAINTAIN LOCKED HEADING AT HIGH SPEED
======================================================================================= */

this.$maintainHeading = function()
{
	var self = player.ship;
	if (self.status !== &quot;STATUS_IN_FLIGHT&quot; &amp;&amp; self.status !== &quot;STATUS_WITCHSPACE_COUNTDOWN&quot;)
	{
		removeFrameCallback(this.$monitor);
		delete this.$monitor;
		delete this.$heading;
		return;
	}
	if (self.speed &gt; 8*self.maxSpeed)
	{
		// the strength of the &quot;shaking&quot; depends on speed.
		// This works by rotating a bit the ship on all of its axis, by a random angle.
		// The randomness has two components: one that is picked for every new frame, and one that is picked at launch time.
		// This way, the ships has a tendency to &quot;deviate&quot; in a certain way.
		var k= (self.speed/(32*self.maxSpeed))/100;
		if (this.$heading) self.orientation = self.orientation.rotate(Vector3D.randomDirectionAndLength(0.4).add(this.$heading), k);
		else this.$heading = Vector3D.randomDirectionAndLength(0.4);
	}
}

/* ====================================================================================
			STARTING $maintainHeading
======================================================================================= */

this.shipLaunchedFromStation = function(station)
{
	if (!this.$monitor)
	{
		this.$monitor = addFrameCallback(this.$maintainHeading.bind(this));
	}
}

this.shipExitedWitchspace = function()
{
	if (player.alertCondition == 1 &amp;&amp; !this.$monitor)
	{
		this.$monitor = addFrameCallback(this.$maintainHeading.bind(this));
	}
}

// CHANGELOG
// 1.0.0 2016-10-28 Release
// 0.0.3 2016-08-26 alertConditionChanged does not seem to take place on launching; replaced with willLaunchFromStation.
// 0.0.2 2016-04-12 No shaking at max witchdrive speed, reduced shaking.
// 0.0.1 2016-04-09 Beta version.
</pre></td>
                </tr>
            </table>
        </a>
    </body>
</html>
