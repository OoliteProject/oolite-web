<html>
    <head>
        <title>Expansion Planetfall Mission - OoHaul</title>
        <link rel="stylesheet" href="../style.css">
    </head>
    <body>
        <table border="0" width="100%">
            <tr>
                <td>Back to <a href='../index.html'>Index</a></td>
                <td align="right"><small>Page generated: Oct 11, 2023, 3:16:49 PM</small></td>
            </tr>
        </table>

        <h1>Expansion Planetfall Mission - OoHaul</h1>

        <h2>Content</h2>
        <ul>
          <li><a href="#warnings">Warnings</a></li>
          <li><a href="#manifest">Manifest</a></li>
          <li><a href="#documentation">Documentation</a></li>
          <li><a href="#equipment">0 Equipment</a></li>
          <li><a href="#ships">5 Ships</a></li>
          <li><a href="#models">0 Models</a></li>
          <li><a href="#scripts">3 Scripts</a></li>
        </ul>

          <a name="warnings">
            <h2>Warnings</h2>
            <ol>
                <li>Tags mismatch between OXP Manifest and Expansion Manager at character position 0002 (RIGHT SQUARE BRACKET vs LATIN SMALL LETTER M)(&#39;[]&#39; vs &#39;[mission]&#39;)</li>
                <li>Unknown key &#39;requires_oxp&#39; at https://wiki.alioth.net/img_auth.php/b/bf/PlanetFall_Mission_-_Oo-Haul_1.11.oxz!manifest.plist</li>
            </ol>
          </a>

        <a name="manifest">
        <h2>Manifest</h2>
            <table border="1">
                <tr>
                    <th></th>
                    <th>from Expansion Manager's OXP list</th>
                    <th>from Expansion Manifest</th>
                </tr>
                <tr>
                    <td>Description</td>
                    <td>Add-On to Planetfall to give OoHaul locations and escort mission.</td>
                    <td>Add-On to Planetfall to give OoHaul locations and escort mission.</td>
                </tr>
                <tr>
                    <td>Identifier</td>
                    <td>oolite.oxp.Thargoid.Planetfall-OoHaul</td>
                    <td>oolite.oxp.Thargoid.Planetfall-OoHaul</td>
                </tr>
                <tr>
                    <td>Title</td>
                    <td>Planetfall Mission - OoHaul</td>
                    <td>Planetfall Mission - OoHaul</td>
                </tr>
                <tr>
                    <td>Category</td>
                    <td>Missions</td>
                    <td>Missions</td>
                </tr>
                <tr>
                    <td>Author</td>
                    <td>Thargoid</td>
                    <td>Thargoid</td>
                </tr>
                <tr>
                    <td>Version</td>
                    <td>1.11</td>
                    <td>1.11</td>
                </tr>
                <tr>
                    <td>Tags</td>
                    <td></td>
                    <td>mission</td>
                </tr>
                <tr>
                    <td>Required Oolite Version</td>
                    <td></td>
                    <td></td>
                </tr>
                <tr>
                    <td>Maximum Oolite Version</td>
                    <td></td>
                    <td></td>
                </tr>
                <tr>
                    <td>Required Expansions</td>
                    <td>
                    </td>
                    <td>
                    </td>
                </tr>
                <tr>
                    <td>Optional Expansions</td>
                    <td>
                    </td>
                    <td>
                    </td>
                </tr>
                <tr>
                    <td>Conflict Expansions</td>
                    <td>
                    </td>
                    <td>
                    </td>
                </tr>
                <tr>
                    <td>Information URL</td>
                    <td><a target="_blank" href="http://wiki.alioth.net/index.php/Planetfall_OXP#AddOns">http://wiki.alioth.net/index.php/Planetfall_OXP#AddOns</a></td>
                    <td><a target="_blank" href="">n/a</a></td>
                </tr>
                <tr>
                    <td>Download URL</td>
                    <td><a target="_blank" href="https://wiki.alioth.net/img_auth.php/b/bf/PlanetFall_Mission_-_Oo-Haul_1.11.oxz">https://wiki.alioth.net/img_auth.php/b/bf/PlanetFall_Mission_-_Oo-Haul_1.11.oxz</a></td>
                    <td><a target="_blank" href="">n/a</a></td>
                </tr>
                <tr>
                    <td>License</td>
                    <td>Creative Commons Attribution - Non-Commercial - Share Alike 3.0 license with clauses - see readme file</td>
                    <td>Creative Commons Attribution - Non-Commercial - Share Alike 3.0 license with clauses - see readme file</td>
                </tr>
                <tr>
                    <td>File Size</td>
                    <td>n/a</td>
                </tr>
                <tr>
                    <td>Upload date</td>
                    <td>1610873458</td>
                </tr>
            </table>
                </a>

        <a name="documentation">
        <h2>Documentation</h2>
        <p>Also read <a href='http://wiki.alioth.net/index.php/Planetfall%20Mission%20-%20OoHaul'>http://wiki.alioth.net/index.php/Planetfall%20Mission%20-%20OoHaul</a></p>
        <h3>Planetfall Oo-Haul v1.11 ReadMe &amp; License.txt</h3>
        <pre>Planetfall Oo-Haul Mission OXP by Thargoid.

This is an add-on mission OXP for PlanetFall v1.12 and Oo-Haul. It introduces a new planet-side location on the prime planet of systems with non-Anarchy governments and a population of over 30 billion, that of the Oo-Haul distribution centre.

At this centre it is possible to stock up on essentials, but also to undertake a paid emergency Oo-Haul escort mission. This is to link up with an Oo-Hauler in orbit near the system main station and escort it out to either the witchpoint or the system constore where present.

--------------------------------------------------------------
Requirements:

Whilst this OXP only requires PlanetFall v1.12 (or newer) to operate, to give the full atmosphere you should also have Oo-Haul installed, and to give the constore version of the mission you will need Your Ad Here (plus at least one set) installed.

--------------------------------------------------------------

License:

This OXP is released under the Creative Commons Attribution - Non-Commercial - Share Alike 3.0 license with the following clauses:

* Whilst you are free (and encouraged) to re-use any of the scripting, models or texturing in this OXP, the usage must be distinct from that within this OXP. Unique identifiers such as (but not limited to) unique shipdata.plist entity keys, mission variables, script names (this.name), equipment identity strings (EQ_), description list arrays and entity roles must not be re-used without prior agreement. Basically if it&#39;s unique or would identify or overwrite anything in the original OXP, then you may not re-use it (for obvious compatibility reasons).
* rebundling of this OXP within another distribution is permitted as long as it is unchanged. The following derivates however are permitted and except from the above:
	* the conversion of files between XML and openStep.
	* the merging of files with other files of the same type from other OXPs.
* The license information (either as this file or merged into a larger one) must be included in the OXP.
* Even though it is not compulsory, if you are re-using any sizable or recognisable piece of this OXP, please let me know :)


--------------------------------------------------------------
Instructions:

Unzip the file, and then move the folder &quot;PlanetFall Mission - Oo-Haul 1.11.oxp&quot; to the AddOns directory of your Oolite installation. Then start the game up and the ships should be added. 

--------------------------------------------------------------

Version history:

20/03/2009 - Version 1.00, full release.
15/04/2010 - Version 1.10, update for Oolite 1.74 (no longer compatible with lower versions).
13/02/2011 - Version 1.11, removal of upper limit, to allow running with 1.75

--------------------------------------------------------------
Acknowledgements:

Oo-Haul is by Dr Nil, with recent updating by Ark and Eric Walch.
Your Ad Here is also by Dr Nil, with many other contributors.

With thanks to Eric and Kaks for their contributions and discussion on the AIs for this OXP, and for the original inspiration to link Oo-Haul into Planetfall by Ark.
</pre>
        </a>

        <a name="equipment">          
        <h2>Equipment</h2>
            This expansion declares no equipment. This may be related to warnings.
        </a>

        <a name="ships">    
        <h2>Ships</h2>
            <table>
                <tr>
                    <th>Name</th>
                </tr>
                <tr>
                    <td><a href="../ships/Oohauler_PFcrate.html">PF Oohaul Crate</a></td>
                </tr>
                <tr>
                    <td><a href="../ships/PFoohaulcargo.html">Cargo container</a></td>
                </tr>
                <tr>
                    <td><a href="../ships/PFoohaulerCon.html">Oo-Hauler</a></td>
                </tr>
                <tr>
                    <td><a href="../ships/PFoohaulerWit.html">PFoohaulerWit</a></td>
                </tr>
                <tr>
                    <td><a href="../ships/planetFall_mainSurface_OoHaulDist.html">Oo-Haul Distribution Centre</a></td>
                </tr>
            </table>
        </a>

        <a name="models">    
        <h2>Models</h2>
            This expansion declares no models. This may be related to warnings.
        </a>

        <a name="scripts">    
        <h2>Scripts</h2>
            <table>
                <tr>
                    <th>Path</th>
                </tr>
                <tr>
                    <td valign="top">Scripts/PFoohaulcargo.js</td>
                    <td><pre>this.name      		= &quot;PFoohaulcargo&quot;; 
this.author   		= &quot;Original by Ark, modified by Thargoid&quot;; 
this.copyright 		= &quot;Creative Commons Attribution - Non-Commercial - Share Alike 3.0 license with clauses - see readme.txt.&quot;; 
this.description 	= &quot;Code for spawn oohaul cargo&quot;; 
this.version   		= &quot;1.10&quot;;

this.shipDied = function(whom, why)
{
	this.ship.owner.spawn(&quot;PFoohaulcargo&quot;, 10);
	missionVariables.PFoohaul_credits -= 500 // decrement credits with 500 on each death.
	if(--missionVariables.PFoohaul_cargo == 0) missionVariables.PFoohaul_credits = 500  // decrement by one. And when zero set credits to 500.
}</pre></td>
                </tr>
                <tr>
                    <td valign="top">Scripts/PFoohauler.js</td>
                    <td><pre>this.name     		= &quot;PFoohauler&quot;; 
this.author    		= &quot;Thargoid&quot;; 
this.copyright 		= &quot;Creative Commons Attribution - Non-Commercial - Share Alike 3.0 license with clauses - see readme.txt.&quot;;  
this.description	= &quot;Code for Planetfall Oohauler&quot;; 
this.version   		= &quot;1.10&quot;;

this.shipDied = function(whom, why)
	{
	missionVariables.PFoohaul_credits = 0;
	missionVariables.PFoohaul_mis_done = null;
	missionVariables.PFoohaul_mis_stage = 1;
	}

this.shipWillExitWitchspace = function()
	{
	this.ship.switchAI(&quot;route1traderAI.plist&quot;);
	delete this.shipDied;
	}

this.rewardPlayer = function()
	{
	player.credits += missionVariables.PFoohaul_credits;
	missionVariables.PFoohaul_credits = 0;
	missionVariables.PFoohaul_mis_done = null;
	missionVariables.PFoohaul_mis_stage = 1;
	}

this.missionDone = function()
	{
	missionVariables.PFoohaul_mis_stage = 3;
	missionVariables.PFoohaul_mis_done = &quot;YES&quot;;
	}

this.locateConstore = function()
	{
	this.storeArray = system.shipsWithPrimaryRole(&quot;constore&quot;);
	if(this.storeArray.length == 0) // where&#39;d the constore go?
		{
		this.ship.switchAI(&quot;PFoohaulWitAI.plist&quot;); // let&#39;s go to the witchpoint instead then
		this.ship.AIState = &quot;HEAD_FOR_WITCHPOINT&quot;;
		}
	else
		{
		this.ship.target = this.storeArray[0];
		this.ship.reactToAIMessage(&quot;CONSTORE_FOUND&quot;);
		}
	}

this.locateJumpPoint = function()
	{
	this.buoyArray = system.shipsWithPrimaryRole(&quot;buoy-witchpoint&quot;);
	if(this.buoyArray.length == 0) // where&#39;d the witchpoint buoy go?
		{
		this.ship.reactToAIMessage(&quot;WITCHBUOY_NOT_FOUND&quot;);
		}
	else
		{
		this.ship.target = this.buoyArray[0];
		this.ship.reactToAIMessage(&quot;WITCHBUOY_FOUND&quot;);
		}
	}</pre></td>
                </tr>
                <tr>
                    <td valign="top">Scripts/PlanetFall_OoHaul.js</td>
                    <td><pre>this.name 			= &quot;PlanetFall_Oohaul&quot;; 
this.author 		= &quot;Thargoid&quot;; 
this.copyright 		= &quot;Creative Commons Attribution - Non-Commercial - Share Alike 3.0 license with clauses - see readme.txt.&quot;; 
this.description 	= &quot;Oo-Haul escort mission from the main planet to the witchpoint &amp; constore.&quot;; 
this.version 		= &quot;1.10&quot;; 

this.startUp = function()
	{
	missionVariables.PFoohaul_mis_stage = 1;
	}

this.shipExitedWitchspace = function() 
	{
	if(missionVariables.PFoohaul_mis_stage == 2 || missionVariables.PFoohaul_mis_stage == 3)
		{
		mission.setInstructionsKey(null);
		missionVariables.PFoohaul_mis_stage = 1;
		}
	}

this.guiScreenChanged = function()
	{
	if(!player.ship.docked) // if we&#39;re in an in-flight GUI screen, no need to go any further
		{
		return;
		}

	if(!player.ship.dockedStation.hasRole(&quot;planetFall_mainSurface_oohaul&quot;) &amp;&amp; !player.ship.dockedStation.hasRole(&quot;constore&quot;)) 
		{ // if we&#39;re not at a constore or the Oohaul planetside distribution centre, bail out here
		return;
		}

	if(player.ship.dockedStation.hasRole(&quot;planetFall_mainSurface_oohaul&quot;) &amp;&amp; missionVariables.PFoohaul_mis_stage == 1 &amp;&amp; (guiScreen == &quot;GUI_SCREEN_MAIN&quot; || guiScreen == &quot;GUI_SCREEN_STATUS&quot;))
		{
		this.PFoohaul_conArray = system.shipsWithPrimaryRole(&quot;constore&quot;);
		if(system.government &gt; 3)
			{
			missionVariables.PFoohaul_credits = 2276;
			if(this.PFoohaul_conArray.length &gt; 0)
				{
				mission.runScreen({title:&quot;Oo-Haul Contract to Constore&quot;, messageKey:&quot;PFoohaul_con_desc_lodanger&quot;, choicesKey:&quot;PFoohaul_con_choice&quot;, shipKey:&quot;PFoohaulerWit&quot;}, this.choices);
				}
			else
				{
				mission.runScreen({title:&quot;Oo-Haul Contract to Witchpoint&quot;, messageKey:&quot;PFoohaul_wit_desc_lodanger&quot;, choicesKey:&quot;PFoohaul_wit_choice&quot;, shipKey:&quot;PFoohaulerWit&quot;}, this.choices);
				}
			missionVariables.PFoohaul_mis_stage = 2;
			}
		else
			{
			missionVariables.PFoohaul_credits = 4330;
			if(this.PFoohaul_conArray.length &gt; 0)
				{
				mission.runScreen({title:&quot;Oo-Haul Contract to Constore&quot;, messageKey:&quot;PFoohaul_con_desc_hidanger&quot;, choicesKey:&quot;PFoohaul_con_choice&quot;, shipKey:&quot;PFoohaulerCon&quot;}, this.choices);
				}
			else
				{
				mission.runScreen({title:&quot;Oo-Haul Contract to Witchpoint&quot;, messageKey:&quot;PFoohaul_wit_desc_hidanger&quot;, choicesKey:&quot;PFoohaul_wit_choice&quot;, shipKey:&quot;PFoohaulerCon&quot;}, this.choices);
				}
			missionVariables.PFoohaul_mis_stage = 2;
			}
		return;
		}
	
	if(player.ship.dockedStation.hasRole(&quot;constore&quot;) &amp;&amp; missionVariables.PFoohaul_mis_stage == 3 &amp;&amp; (guiScreen == &quot;GUI_SCREEN_MAIN&quot; || guiScreen == &quot;GUI_SCREEN_STATUS&quot;))
		{
		if(missionVariables.PFoohaul_mis_done == &quot;YES&quot;)
			{
			mission.runScreen({title:&quot;Oo-Haul Mission Accomplished&quot;, messageKey:&quot;PFoohaul_con_desc_docked&quot;});
			missionVariables.PFoohaul_mis_done = null;
			player.credits += missionVariables.PFoohaul_credits;
			missionVariables.PFoohaul_credits = null;
			missionVariables.PFoohaul_mis_stage = 1;
			mission.setInstructionsKey(null)
			}
		else
			{
			missionVariables.PFoohaul_mis_stage = null;
			missionVariables.PFoohaul_credits = null;
			mission.setInstructionsKey(null)
			}
		}
	}


this.shipWillLaunchFromStation = function()
	{
	if(missionVariables.PFoohaul_mis_stage == 0)
		{
		missionVariables.PFoohaul_mis_stage = 1;
		}
	this.PFoohaul_conArray = system.shipsWithPrimaryRole(&quot;constore&quot;);
	}

this.choices = function (choice)
	{
	if(choice == &quot;PFoohaul_no&quot; &amp;&amp; missionVariables.PFoohaul_mis_stage == 2)
		{
		missionVariables.PFoohaul_mis_stage = 0;
		missionVariables.PFoohaul_credits = 0;
		return;
		}

	if(choice == &quot;PFoohaul_yes_con&quot; &amp;&amp; missionVariables.PFoohaul_mis_stage == 2)
		{
		missionVariables.PFoohaul_mis_stage = 3;
		missionVariables.PFoohaul_cargo = 3;
		system.legacy_addShipsAt(&quot;PFoohaulerCon&quot;, 1, &quot;abs&quot;, system.mainStation.position.add([2000,2000,0]));
		mission.setInstructionsKey(&quot;PFoohaul_con_desc_short&quot;);
		return;
		}

	if(choice == &quot;PFoohaul_yes_wit&quot; &amp;&amp; missionVariables.PFoohaul_mis_stage == 2)
		{
		missionVariables.PFoohaul_mis_stage = 3;
		missionVariables.PFoohaul_cargo = 3;
		system.legacy_addShipsAt(&quot;PFoohaulerWit&quot;, 1, &quot;abs&quot;, system.mainStation.position.add([2000,2000,0]));
		mission.setInstructionsKey(&quot;PFoohaul_wit_desc_short&quot;);
		return;
		}
	}</pre></td>
                </tr>
            </table>
        </a>
    </body>
</html>
