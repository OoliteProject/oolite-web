<html>
    <head>
        <title>Expansion Darkside Moonshine Distillery</title>
        <link rel="stylesheet" href="../style.css">
    </head>
    <body>
        <table border="0" width="100%">
            <tr>
                <td>Back to <a href='../index.html'>Index</a></td>
                <td align="right"><small>Page generated: Oct 11, 2023, 3:16:49 PM</small></td>
            </tr>
        </table>

        <h1>Expansion Darkside Moonshine Distillery</h1>

        <h2>Content</h2>
        <ul>
          <li><a href="#warnings">Warnings</a></li>
          <li><a href="#manifest">Manifest</a></li>
          <li><a href="#documentation">Documentation</a></li>
          <li><a href="#equipment">0 Equipment</a></li>
          <li><a href="#ships">7 Ships</a></li>
          <li><a href="#models">0 Models</a></li>
          <li><a href="#scripts">3 Scripts</a></li>
        </ul>

          <a name="warnings">
            <h2>Warnings</h2>
            <ol>
                <li>Unknown key &#39;upload_date&#39; at https://wiki.alioth.net/img_auth.php/6/65/Darkside_Moonshine_Distillery_0.5.oxz!manifest.plist</li>
            </ol>
          </a>

        <a name="manifest">
        <h2>Manifest</h2>
            <table border="1">
                <tr>
                    <th></th>
                    <th>from Expansion Manager's OXP list</th>
                    <th>from Expansion Manifest</th>
                </tr>
                <tr>
                    <td>Description</td>
                    <td>The Darkside Moonshine Distilleries are only found in a few systems in each chart, often clustered in poor agricultural regions. They offer a special commodity Witchfire Whiskey.</td>
                    <td>The Darkside Moonshine Distilleries are only found in a few systems in each chart, often clustered in poor agricultural regions. They offer a special commodity Witchfire Whiskey.</td>
                </tr>
                <tr>
                    <td>Identifier</td>
                    <td>oolite.oxp.stormrider.Darkside_Moonshine_Distillery</td>
                    <td>oolite.oxp.stormrider.Darkside_Moonshine_Distillery</td>
                </tr>
                <tr>
                    <td>Title</td>
                    <td>Darkside Moonshine Distillery</td>
                    <td>Darkside Moonshine Distillery</td>
                </tr>
                <tr>
                    <td>Category</td>
                    <td>Dockables</td>
                    <td>Dockables</td>
                </tr>
                <tr>
                    <td>Author</td>
                    <td>Stormrider</td>
                    <td>Stormrider</td>
                </tr>
                <tr>
                    <td>Version</td>
                    <td>0.8</td>
                    <td>0.8</td>
                </tr>
                <tr>
                    <td>Tags</td>
                    <td></td>
                    <td></td>
                </tr>
                <tr>
                    <td>Required Oolite Version</td>
                    <td></td>
                    <td></td>
                </tr>
                <tr>
                    <td>Maximum Oolite Version</td>
                    <td></td>
                    <td></td>
                </tr>
                <tr>
                    <td>Required Expansions</td>
                    <td>
                    </td>
                    <td>
                    </td>
                </tr>
                <tr>
                    <td>Optional Expansions</td>
                    <td>
                    </td>
                    <td>
                    </td>
                </tr>
                <tr>
                    <td>Conflict Expansions</td>
                    <td>
                    </td>
                    <td>
                    </td>
                </tr>
                <tr>
                    <td>Information URL</td>
                    <td><a target="_blank" href="http://wiki.alioth.net/index.php/Darkside_Moonshine_Distillery">http://wiki.alioth.net/index.php/Darkside_Moonshine_Distillery</a></td>
                    <td><a target="_blank" href="">n/a</a></td>
                </tr>
                <tr>
                    <td>Download URL</td>
                    <td><a target="_blank" href="https://wiki.alioth.net/img_auth.php/6/65/Darkside_Moonshine_Distillery_0.5.oxz">https://wiki.alioth.net/img_auth.php/6/65/Darkside_Moonshine_Distillery_0.5.oxz</a></td>
                    <td><a target="_blank" href="http://wiki.alioth.net/img_auth.php/6/65/Darkside_Moonshine_Distillery_0.5.oxz">http://wiki.alioth.net/img_auth.php/6/65/Darkside_Moonshine_Distillery_0.5.oxz</a></td>
                </tr>
                <tr>
                    <td>License</td>
                    <td>CC BY-NC-SA 4.0</td>
                    <td>CC BY-NC-SA 4.0</td>
                </tr>
                <tr>
                    <td>File Size</td>
                    <td>n/a</td>
                </tr>
                <tr>
                    <td>Upload date</td>
                    <td>1610873318</td>
                </tr>
            </table>
                </a>

        <a name="documentation">
        <h2>Documentation</h2>
        <p>Also read <a href='http://wiki.alioth.net/index.php/Darkside%20Moonshine%20Distillery'>http://wiki.alioth.net/index.php/Darkside%20Moonshine%20Distillery</a></p>
        </a>

        <a name="equipment">          
        <h2>Equipment</h2>
            This expansion declares no equipment. This may be related to warnings.
        </a>

        <a name="ships">    
        <h2>Ships</h2>
            <table>
                <tr>
                    <th>Name</th>
                </tr>
                <tr>
                    <td><a href="../ships/darkside-moonshine-distillery.html">Darkside Moonshine Distillery</a></td>
                </tr>
                <tr>
                    <td><a href="../ships/darkside-moonshine-saloon.html">Darkside Moonshine Saloon</a></td>
                </tr>
                <tr>
                    <td><a href="../ships/darkside-moonshine-template.html">darkside-moonshine-template</a></td>
                </tr>
                <tr>
                    <td><a href="../ships/witchfire-asp.html">Witchfire Asp</a></td>
                </tr>
                <tr>
                    <td><a href="../ships/witchfire-asp-defender.html">Whiskey Runner</a></td>
                </tr>
                <tr>
                    <td><a href="../ships/witchfire-dock.html">Witchfire Dock</a></td>
                </tr>
                <tr>
                    <td><a href="../ships/witchfire-habitat-Ring-sub.html">Witchfire Habitat Ring</a></td>
                </tr>
            </table>
        </a>

        <a name="models">    
        <h2>Models</h2>
            This expansion declares no models. This may be related to warnings.
        </a>

        <a name="scripts">    
        <h2>Scripts</h2>
            <table>
                <tr>
                    <th>Path</th>
                </tr>
                <tr>
                    <td valign="top">Scripts/dmd_trade.js</td>
                    <td><pre>&quot;use strict&quot;;

this.author      = &quot;Morgan Orr&quot;; 
this.copyright   = &quot;� 2011-2016 Morgan Orr.&quot;; 
this.licence 	 = &quot;CC-BY-SA 4.0&quot;;
this.version     = &quot;0.8&quot;;
 /*			~~~I STRONGLY encourage the modification and development of this free software by anyone to meet your needs, I only ask that you give me credit for the original work. Thanks and enjoy.~~~*/
this.name			= &quot;dmd_trade&quot;;
this.description	= &quot;Finds distance to dmd production systems so dmd_trademarket can apply a price multiple based on distance.&quot;;
// this script is really a modification of phkb&#39;s smugglers code
//I STRONGLY encourage the modification and development of this free software by all to meet your needs, I only ask that you give me credit for the original work. Thanks and enjoy!
this.$witchlogging = false;
this.$sysId = -1;
this.$priceMultiple = 0;
this.$witchfireLoaded = false;
this.$witchspaceDestination = -1;

this.startUp = function() {

	this.$sysId = system.ID;
}

this.$sysDistance = function() {
	//production centers
	var sys = [];

		if(galaxyNumber == 0) {
		var sys = 223;		
	}
		if(galaxyNumber == 1) {
		var sys = 135;		
	}
		if(galaxyNumber == 2) {
		var sys = 210;		
	}
		if(galaxyNumber == 3) {
		var sys = 96;	
	}
		if(galaxyNumber == 4) {
		var sys = 44;		
	}
		if(galaxyNumber == 5) {
		var sys = 242;	
	}
		if(galaxyNumber == 6) {
		var sys = 27;
	}
		if(galaxyNumber == 7) {
		var sys = 134;	
	}
	
	var sysInfo = System.infoForSystem(galaxyNumber,sys);
	var way = system.info.routeToSystem(sysInfo);
   	if (way) {
    	this.$priceMultiple = way.route.length * 0.025;
	} else {
      	this.$priceMultiple = 99 * 0.025; // if the system is unreachable, then prices will be really high
   }
	if(this.$witchlogging) log(this.name,this.name+&quot;  waylong = &quot;+way.route.length);
	if(this.$witchlogging) log(this.name,this.name+&quot;:  system = &quot; +this.$sysId+ &quot; Galsys = &quot;+sysInfo+&quot; sys = &quot;+sys);
	if(this.$witchlogging) log(this.name,this.name+&quot;:  $priceMultiple 1 = &quot; +this.$priceMultiple);
	return this.$priceMultiple;
}
this.shipWillEnterWitchspace = function(cause, destination) {
    this.$witchfireDestination = destination;
}
this.shipWillExitWitchspace = function() {
	this.$witchfireLoaded = false;
}
this.shipExitedWitchspace = function() {
	this.$sysId = system.ID;
}
this.$witchfireData = function() {
	this.$witchfireLoaded = true;
	this.$sysDistance();
}

</pre></td>
                </tr>
                <tr>
                    <td valign="top">Scripts/dmd_trademarket.js</td>
                    <td><pre>&quot;use strict&quot;;

this.author      = &quot;Morgan Orr&quot;; 
this.copyright   = &quot;� 2011-2016 Morgan Orr.&quot;; 
this.licence 	 = &quot;CC-BY-SA 4.0&quot;;
this.version     = &quot;0.8&quot;;
 /*			~~~I STRONGLY encourage the modification and development of this free software by anyone to meet your needs, I only ask that you give me credit for the original work. Thanks and enjoy.~~~*/
this.name        = &quot;dmd_trademarket&quot;;
this.description = &quot;Applies witchfire_whiskey data to GalCop and DMD stations.&quot;;
// this script is really a modification of phkb&#39;s smugglers code
//I STRONGLY encourage the modification and development of this free software by all to meet your needs, I only ask that you give me credit for the original work. Thanks and enjoy!
this.$witchlogging = false;

this.$quanMulti = function () {
	var multi = [];
	if (Math.random &gt; 0.85) {
		var multi = 96;
	} else {
		var multi = 24
	}
	return multi;
}

this.updateGeneralCommodityDefinition = function(goodDefinition, station, systemID) {

	var dt = worldScripts.dmd_trade;
	if (dt) {

		if (station &amp;&amp; station.name === &quot;Darkside Moonshine Distillery&quot;) {
			goodDefinition.quantity = Math.round(Math.random() * this.$quanMulti());
		} else {
			goodDefinition.quantity = 0;
			if (dt.$witchfireLoaded == false &amp;&amp; parseInt((clock.seconds % 1) * 10000) != 0) {
				dt.$witchfireData();
			
			}
			if(this.$witchlogging) log(this.name,this.name+&quot;: quantity&quot;+goodDefinition.quantity+&quot; mulit = &quot;+this.$quanMulti());
			if (dt.$witchfireLoaded == true) {
			
				var priceMulti = 2620 * dt.$priceMultiple;
				goodDefinition.price = 2620 + priceMulti;
				var sysId = systemID;
				if(this.$witchlogging) log(this.name,this.name+&quot;: system&quot;+sysId);
				if (sysId == -1) {
					// get the players witchspace destination
					if (dt.$witchspaceDestination != -1) {
						sysId = dt.$witchspaceDestination;
						if(this.$witchlogging) log(this.name,this.name+&quot;: destination&quot;+dt.$witchfireDestination);
					} else {
						// work out the next system from the players route
						var p = player.ship;
						var target = p.targetSystem;
						var myRoute = System.infoForSystem(global.galaxyNumber, dt.$sysId).routeToSystem(System.infoForSystem(global.galaxyNumber, target), p.routeMode);
						sysId = myRoute.route[1];
						if(this.$witchlogging) log(this.name,this.name+&quot;: sysId :&quot;+sysId);
						p = null;
						myRoute = null;
					}
				}	
			}
		}	
	}		
	return goodDefinition;	
}


</pre></td>
                </tr>
                <tr>
                    <td valign="top">Scripts/witchfire-populator.js</td>
                    <td><pre>&quot;use strict&quot;;

this.author      = &quot;Morgan Orr&quot;; 
this.copyright   = &quot;� 2011-2016 Morgan Orr.&quot;; 
this.licence 	 = &quot;CC-BY-SA 4.0&quot;;
this.version     = &quot;0.8&quot;;
 /*			~~~I STRONGLY encourage the modification and development of this free software by anyone to meet your needs, I only ask that you give me credit for the original work. Thanks and enjoy.~~~*/
//I STRONGLY encourage the modification and development of this free software by all to meet your needs, I only ask that you give me credit for the original work. Thanks and enjoy!


this.name           = &quot;witchfire-populator&quot;;
this.description    = &quot;Witchfire Whiskey bases&quot;;


this.systemWillPopulate = function() {

  	if(system.isInterstellarSpace || system.government === !5 || system.sun.hasGoneNova || system.sun.isGoingNova || system.countShipsWithRole(&quot;darkside-moonshine-distillery&quot;) &gt; 0 || system.countShipsWithRole(&quot;darkside-moonshine-saloon&quot;) &gt; 0 )
	{ return; }

	this.addedCount = 0;

	if
	(
	galaxyNumber == 0 &amp;&amp; system.ID == 59 ||
	galaxyNumber == 0 &amp;&amp; system.ID == 142 ||
	galaxyNumber == 0 &amp;&amp; system.ID == 173 ||
	galaxyNumber == 0 &amp;&amp; system.ID == 213 ||
	galaxyNumber == 0 &amp;&amp; system.ID == 223 ||
	galaxyNumber == 0 &amp;&amp; system.ID == 238 ||
	galaxyNumber == 1 &amp;&amp; system.ID == 0 ||
	galaxyNumber == 1 &amp;&amp; system.ID == 30 ||
	galaxyNumber == 1 &amp;&amp; system.ID == 47 ||
	galaxyNumber == 1 &amp;&amp; system.ID == 64 ||
	galaxyNumber == 1 &amp;&amp; system.ID == 110 ||
	galaxyNumber == 1 &amp;&amp; system.ID == 135 ||
	galaxyNumber == 1 &amp;&amp; system.ID == 137 ||
	galaxyNumber == 1 &amp;&amp; system.ID == 190 ||
	galaxyNumber == 1 &amp;&amp; system.ID == 213 ||
	galaxyNumber == 1 &amp;&amp; system.ID == 217 ||
	galaxyNumber == 1 &amp;&amp; system.ID == 225 ||
	galaxyNumber == 1 &amp;&amp; system.ID == 254 ||
	galaxyNumber == 2 &amp;&amp; system.ID == 36 ||
	galaxyNumber == 2 &amp;&amp; system.ID == 40 ||
	galaxyNumber == 2 &amp;&amp; system.ID == 99 ||
	galaxyNumber == 2 &amp;&amp; system.ID == 184 ||
	galaxyNumber == 2 &amp;&amp; system.ID == 210 ||
	galaxyNumber == 3 &amp;&amp; system.ID == 96 ||
	galaxyNumber == 3 &amp;&amp; system.ID == 240 ||
	galaxyNumber == 4 &amp;&amp; system.ID == 31 ||
	galaxyNumber == 4 &amp;&amp; system.ID == 37 ||
	galaxyNumber == 4 &amp;&amp; system.ID == 44 ||
	galaxyNumber == 4 &amp;&amp; system.ID == 63 ||
	galaxyNumber == 4 &amp;&amp; system.ID == 95 ||
	galaxyNumber == 4 &amp;&amp; system.ID == 127 ||
	galaxyNumber == 4 &amp;&amp; system.ID == 134 ||
	galaxyNumber == 4 &amp;&amp; system.ID == 198 ||
	galaxyNumber == 5 &amp;&amp; system.ID == 12 ||
	galaxyNumber == 5 &amp;&amp; system.ID == 32 ||
	galaxyNumber == 5 &amp;&amp; system.ID == 47 ||
	galaxyNumber == 5 &amp;&amp; system.ID == 56 ||
	galaxyNumber == 5 &amp;&amp; system.ID == 129 ||
	galaxyNumber == 5 &amp;&amp; system.ID == 160 ||
	galaxyNumber == 5 &amp;&amp; system.ID == 167 ||
	galaxyNumber == 5 &amp;&amp; system.ID == 242 ||
	galaxyNumber == 6 &amp;&amp; system.ID == 27 ||
	galaxyNumber == 6 &amp;&amp; system.ID == 137 ||
	galaxyNumber == 6 &amp;&amp; system.ID == 139 ||
	galaxyNumber == 6 &amp;&amp; system.ID == 153 ||
	galaxyNumber == 6 &amp;&amp; system.ID == 228 ||
	galaxyNumber == 7 &amp;&amp; system.ID == 11 ||
	galaxyNumber == 7 &amp;&amp; system.ID == 62 ||
	galaxyNumber == 7 &amp;&amp; system.ID == 134 ||
	galaxyNumber == 7 &amp;&amp; system.ID == 166 ||
	galaxyNumber == 7 &amp;&amp; system.ID == 170 ||
	galaxyNumber == 7 &amp;&amp; system.ID == 185 ||
	galaxyNumber == 7 &amp;&amp; system.ID == 186 ||
	galaxyNumber == 7 &amp;&amp; system.ID == 196 ||
	galaxyNumber == 7 &amp;&amp; system.ID == 240 ||
	galaxyNumber == 7 &amp;&amp; system.ID == 242 ||
	galaxyNumber == 7 &amp;&amp; system.ID == 253
	)
	{
		system.setPopulator(&quot;darkside-moonshine-distillery&quot;,
		{
			location: &quot;TRIANGLE&quot;,
			locationSeed: 21541,
			deterministic: true,
			callback: function(pos)
			{
				var DMD = system.addShips(&quot;darkside-moonshine-distillery&quot;,1,pos,0);

				//system.addShips(&quot;witchfire-beacon&quot;, 1, DMD.position.add(DMD.heading.multiply(10E3)), 1);
			}
		});
	}
	if(system.economy &lt; 4 &amp;&amp; system.scrambledPseudoRandomNumber() &gt; (0.32 * system.government)) {
		if
		(
		galaxyNumber == 0 &amp;&amp; system.ID == 59 ||
		galaxyNumber == 0 &amp;&amp; system.ID == 142 ||
		galaxyNumber == 0 &amp;&amp; system.ID == 173 ||
		galaxyNumber == 0 &amp;&amp; system.ID == 213 ||
		galaxyNumber == 0 &amp;&amp; system.ID == 223 ||
		galaxyNumber == 0 &amp;&amp; system.ID == 238 ||
		galaxyNumber == 1 &amp;&amp; system.ID == 0 ||
		galaxyNumber == 1 &amp;&amp; system.ID == 30 ||
		galaxyNumber == 1 &amp;&amp; system.ID == 47 ||
		galaxyNumber == 1 &amp;&amp; system.ID == 64 ||
		galaxyNumber == 1 &amp;&amp; system.ID == 110 ||
		galaxyNumber == 1 &amp;&amp; system.ID == 135 ||
		galaxyNumber == 1 &amp;&amp; system.ID == 137 ||
		galaxyNumber == 1 &amp;&amp; system.ID == 190 ||
		galaxyNumber == 1 &amp;&amp; system.ID == 213 ||
		galaxyNumber == 1 &amp;&amp; system.ID == 217 ||
		galaxyNumber == 1 &amp;&amp; system.ID == 225 ||
		galaxyNumber == 1 &amp;&amp; system.ID == 254 ||
		galaxyNumber == 2 &amp;&amp; system.ID == 36 ||
		galaxyNumber == 2 &amp;&amp; system.ID == 40 ||
		galaxyNumber == 2 &amp;&amp; system.ID == 99 ||
		galaxyNumber == 2 &amp;&amp; system.ID == 184 ||
		galaxyNumber == 2 &amp;&amp; system.ID == 210 ||
		galaxyNumber == 3 &amp;&amp; system.ID == 96 ||
		galaxyNumber == 3 &amp;&amp; system.ID == 240 ||
		galaxyNumber == 4 &amp;&amp; system.ID == 31 ||
		galaxyNumber == 4 &amp;&amp; system.ID == 37 ||
		galaxyNumber == 4 &amp;&amp; system.ID == 44 ||
		galaxyNumber == 4 &amp;&amp; system.ID == 63 ||
		galaxyNumber == 4 &amp;&amp; system.ID == 95 ||
		galaxyNumber == 4 &amp;&amp; system.ID == 127 ||
		galaxyNumber == 4 &amp;&amp; system.ID == 134 ||
		galaxyNumber == 4 &amp;&amp; system.ID == 198 ||
		galaxyNumber == 5 &amp;&amp; system.ID == 12 ||
		galaxyNumber == 5 &amp;&amp; system.ID == 32 ||
		galaxyNumber == 5 &amp;&amp; system.ID == 47 ||
		galaxyNumber == 5 &amp;&amp; system.ID == 56 ||
		galaxyNumber == 5 &amp;&amp; system.ID == 129 ||
		galaxyNumber == 5 &amp;&amp; system.ID == 160 ||
		galaxyNumber == 5 &amp;&amp; system.ID == 167 ||
		galaxyNumber == 5 &amp;&amp; system.ID == 242 ||
		galaxyNumber == 6 &amp;&amp; system.ID == 27 ||
		galaxyNumber == 6 &amp;&amp; system.ID == 137 ||
		galaxyNumber == 6 &amp;&amp; system.ID == 139 ||
		galaxyNumber == 6 &amp;&amp; system.ID == 153 ||
		galaxyNumber == 6 &amp;&amp; system.ID == 228 ||
		galaxyNumber == 7 &amp;&amp; system.ID == 11 ||
		galaxyNumber == 7 &amp;&amp; system.ID == 62 ||
		galaxyNumber == 7 &amp;&amp; system.ID == 134 ||
		galaxyNumber == 7 &amp;&amp; system.ID == 166 ||
		galaxyNumber == 7 &amp;&amp; system.ID == 170 ||
		galaxyNumber == 7 &amp;&amp; system.ID == 185 ||
		galaxyNumber == 7 &amp;&amp; system.ID == 186 ||
		galaxyNumber == 7 &amp;&amp; system.ID == 196 ||
		galaxyNumber == 7 &amp;&amp; system.ID == 240 ||
		galaxyNumber == 7 &amp;&amp; system.ID == 242 ||
		galaxyNumber == 7 &amp;&amp; system.ID == 253
		)
		{ return; }

		this.addedCount = 0;
		
		system.setPopulator(&quot;darkside-moonshine-saloon&quot;,
		{
			location: &quot;TRIANGLE&quot;,
			locationSeed: 27641,
			deterministic: true,
			callback: function(pos)
			{
				var DMS = system.addShips(&quot;darkside-moonshine-saloon&quot;,1,pos,0);

				//system.addShips(&quot;witchfire-beacon&quot;, 1, DMD.position.add(DMD.heading.multiply(10E3)), 1);
			}
		});
	}
}

</pre></td>
                </tr>
            </table>
        </a>
    </body>
</html>
