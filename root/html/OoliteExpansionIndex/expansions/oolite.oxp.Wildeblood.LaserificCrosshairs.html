<html>
    <head>
        <title>Expansion Laserific Crosshairs</title>
        <link rel="stylesheet" href="../style.css">
    </head>
    <body>
        <table border="0" width="100%">
            <tr>
                <td>Back to <a href='../index.html'>Index</a></td>
                <td align="right"><small>Page generated: Oct 11, 2023, 3:16:49 PM</small></td>
            </tr>
        </table>

        <h1>Expansion Laserific Crosshairs</h1>

        <h2>Content</h2>
        <ul>
          <li><a href="#warnings">Warnings</a></li>
          <li><a href="#manifest">Manifest</a></li>
          <li><a href="#documentation">Documentation</a></li>
          <li><a href="#equipment">0 Equipment</a></li>
          <li><a href="#ships">0 Ships</a></li>
          <li><a href="#models">0 Models</a></li>
          <li><a href="#scripts">1 Scripts</a></li>
        </ul>

          <a name="warnings">
            <h2>Warnings</h2>
            <ol>
                <li>http://wiki.alioth.net/index.php/Laserific%20Crosshairs -&gt; 404 Not Found</li>
                <li>Tags mismatch between OXP Manifest and Expansion Manager at character position 0002 (RIGHT SQUARE BRACKET vs LATIN SMALL LETTER C)(&#39;[]&#39; vs &#39;[crosshairs]&#39;)</li>
            </ol>
          </a>

        <a name="manifest">
        <h2>Manifest</h2>
            <table border="1">
                <tr>
                    <th></th>
                    <th>from Expansion Manager's OXP list</th>
                    <th>from Expansion Manifest</th>
                </tr>
                <tr>
                    <td>Description</td>
                    <td>Adds a circular dial showing the laser heat level around the central cross-hairs. Compatible with most HUDs.</td>
                    <td>Adds a circular dial showing the laser heat level around the central cross-hairs. Compatible with most HUDs.</td>
                </tr>
                <tr>
                    <td>Identifier</td>
                    <td>oolite.oxp.Wildeblood.LaserificCrosshairs</td>
                    <td>oolite.oxp.Wildeblood.LaserificCrosshairs</td>
                </tr>
                <tr>
                    <td>Title</td>
                    <td>Laserific Crosshairs</td>
                    <td>Laserific Crosshairs</td>
                </tr>
                <tr>
                    <td>Category</td>
                    <td>HUDs</td>
                    <td>HUDs</td>
                </tr>
                <tr>
                    <td>Author</td>
                    <td>Wildeblood</td>
                    <td>Wildeblood</td>
                </tr>
                <tr>
                    <td>Version</td>
                    <td>1.3</td>
                    <td>1.3</td>
                </tr>
                <tr>
                    <td>Tags</td>
                    <td></td>
                    <td>crosshairs</td>
                </tr>
                <tr>
                    <td>Required Oolite Version</td>
                    <td></td>
                    <td></td>
                </tr>
                <tr>
                    <td>Maximum Oolite Version</td>
                    <td></td>
                    <td></td>
                </tr>
                <tr>
                    <td>Required Expansions</td>
                    <td>
                    </td>
                    <td>
                    </td>
                </tr>
                <tr>
                    <td>Optional Expansions</td>
                    <td>
                    </td>
                    <td>
                    </td>
                </tr>
                <tr>
                    <td>Conflict Expansions</td>
                    <td>
                    </td>
                    <td>
                    </td>
                </tr>
                <tr>
                    <td>Information URL</td>
                    <td><a target="_blank" href="http://aegidian.org/bb/viewtopic.php?f=4&amp;t=14368">http://aegidian.org/bb/viewtopic.php?f=4&amp;t=14368</a></td>
                    <td><a target="_blank" href="">n/a</a></td>
                </tr>
                <tr>
                    <td>Download URL</td>
                    <td><a target="_blank" href="https://wiki.alioth.net/img_auth.php/5/56/LaserificCrosshairs1.3.oxz">https://wiki.alioth.net/img_auth.php/5/56/LaserificCrosshairs1.3.oxz</a></td>
                    <td><a target="_blank" href="LaserificCrosshairs.oxz">LaserificCrosshairs.oxz</a></td>
                </tr>
                <tr>
                    <td>License</td>
                    <td>See within.</td>
                    <td>See within.</td>
                </tr>
                <tr>
                    <td>File Size</td>
                    <td>n/a</td>
                </tr>
                <tr>
                    <td>Upload date</td>
                    <td>1610873301</td>
                </tr>
            </table>
                </a>

        <a name="documentation">
        <h2>Documentation</h2>
        
        <h3>Laserific Crosshairs READ ME.txt</h3>
        <pre>---------------------------------
Laserific Crosshairs OXP ver. 1.3
---------------------------------
  Date: October 6th, 2014
Author: Wildeblood


---------------------
Installation and use:
---------------------

Adds a circular dial showing the laser heat level around the central cross-hairs. Compatible with most HUDs.


-----------
Known bugs:
-----------

In _hideDisplay function:
     // FixMe: player.ship.crosshairs = null causes a HUD reset;
     // similar fix to that used in Auto Crosshairs required.


-----------
Change Log:
-----------

1.3 (October 6th, 2014) Revised all crosshair files again, made script compatible with Auto Crosshairs OXP.

1.2 (October 4th, 2014) Revised all crosshair files: now have pulse laser crosshair as well as animation.

1.1.2 (October 4th, 2014) Load all crosshair files at start-up, to avoid stuttering on first display.

1.1.1 (October 4th, 2014) Fixed bug: crosshairs not being reset when frame callback ended by shipWillEnrterWitchspace etc.

1.1 (October 4th, 2014) Improved 16-step dial animation.

1.0 (October 3rd, 2014) First published.
</pre>
        </a>

        <a name="equipment">          
        <h2>Equipment</h2>
            This expansion declares no equipment. This may be related to warnings.
        </a>

        <a name="ships">    
        <h2>Ships</h2>
            This expansion declares no ships. This may be related to warnings.
        </a>

        <a name="models">    
        <h2>Models</h2>
            This expansion declares no models. This may be related to warnings.
        </a>

        <a name="scripts">    
        <h2>Scripts</h2>
            <table>
                <tr>
                    <th>Path</th>
                </tr>
                <tr>
                    <td valign="top">Scripts/laserific_crosshairs.js</td>
                    <td><pre>&quot;use strict&quot;;

this.name    = &quot;Laserific Crosshairs&quot;; // &quot;Wildeblood&quot;, 2014.
this.version = &quot;1.3&quot;;

this.$maxSteps   = 16;
this.$cutOffHeat = 0.85;

/* ====================================================================================
			AVOID STUTTERING THE FIRST TIME THE ANIMATION RUNS?
======================================================================================= */

    this.$autoCrosshairs = {
        default: {
            off: &quot;wildeblood_combat_crosshairs_0.plist&quot;,
            on: &quot;wildeblood_combat_crosshairs_on.plist&quot;
        }
    }

    this.startUp = function () {
        &quot;use strict&quot;;
        for (var i = 0; i &lt;= this.$maxSteps; i++) {
            player.ship.crosshairs = &quot;wildeblood_combat_crosshairs_&quot; + i + &quot;.plist&quot;;
        }
        player.ship.crosshairs = null;
        if (worldScripts[&quot;Auto Crosshairs&quot;]) {
            this._showDisplay = this._showDisplay_v2;
        }
        delete this._showDisplay_v2;
    }

/* ====================================================================================
			STARTING &amp; STOPPING FRAME CALLBACK

	FCB starts when player.alertCondition becomes 3 or a target is acquired.
	FCB ends when !player.ship.target &amp;&amp; player.ship.laserHeatLevel === 0 &amp;&amp; player.alertCondition &lt; 3
	Display is shown while player.ship.target or player.ship.laserHeatLevel &gt; 0 or player.alertHostiles

======================================================================================= */

    this.alertConditionChanged = function (newState, oldState) {
        &quot;use strict&quot;;
        if (newState ==3 &amp;&amp; !this.$runningFCB) {
            this.$runningFCB = addFrameCallback(this._monitorLaser.bind(this));
        }
    }

    this.shipTargetAcquired = function (target) {
        &quot;use strict&quot;;
        if (!this.$runningFCB) {
            this.$runningFCB = addFrameCallback(this._monitorLaser.bind(this));
        }
    }

    this.shipWillDockWithStation = this.shipWillEnterWitchspace = this.shipDied = function () {
        &quot;use strict&quot;;
        this._endFCB();
    }

    this._endFCB = function () {
        &quot;use strict&quot;;
        if (this.$runningFCB) {
            removeFrameCallback(this.$runningFCB);
            delete this.$runningFCB;
            this._hideDisplay();
        }
    }

    this._monitorLaser = function (delta) {
        &quot;use strict&quot;;
        if (player.alertHostiles ||
            player.ship.target ||
            player.ship.laserHeatLevel) {
            this._showDisplay();
        } else if (player.alertCondition &lt; 3) {
            this._endFCB();
        } else {
            this._hideDisplay();
        }
    }

    this._showDisplay = function () {
        &quot;use strict&quot;;
        var level = (player.ship.laserHeatLevel / this.$cutOffHeat * this.$maxSteps);
        var step = level.toFixed();
        if (step != this.$lastStep) {
            if (step &gt; this.$maxSteps) {
                step = this.$maxSteps; // Thank you, javascript automatic variable typing.
            }
            player.ship.crosshairs = &quot;wildeblood_combat_crosshairs_&quot; + step + &quot;.plist&quot;;
            this.$lastStep = step;
        }
    }

    this._showDisplay_v2 = function () {
        &quot;use strict&quot;;
        var level = (player.ship.laserHeatLevel / this.$cutOffHeat * this.$maxSteps);
        var step = level.toFixed();
        if (step != this.$lastStep) {
            if (step &gt; this.$maxSteps) {
                step = this.$maxSteps;
            }
            player.ship.crosshairs = &quot;wildeblood_combat_crosshairs_&quot; + step + &quot;.plist&quot;;
            worldScripts[&quot;Auto Crosshairs&quot;].$offTargetCrosshairs = &quot;wildeblood_combat_crosshairs_&quot; + step + &quot;.plist&quot;;
            this.$lastStep = step;
        }
    }

    this._hideDisplay = function () {
        &quot;use strict&quot;;
     // FixMe: player.ship.crosshairs = null causes a HUD reset;
     // similar fix to that used in Auto Crosshairs OXP required.
        if (this.$lastStep != &quot;-1&quot;) {
            player.ship.crosshairs = null; // &quot;crosshairs.plist&quot;;
            this.$lastStep = &quot;-1&quot;;
        }
    }

/* ====================================================================================
			COPYRIGHT NOTICE

	(C) 2013,2014 Wildeblood. All rights reserved. 
	Free to use, but DO NOT PROMULGATE MODIFIED VERSIONS.

This was created by some fellow with the user name &quot;Wildeblood&quot; on the Oolite forums, 
he&#39;ll tell you his real name if you bother to ask.
To use means to play with, modify or re-use in whole or in part, and to distribute freely.
To use DOES NOT imply to use for commercial gain, which would be a breach of copyright.
To promulgate means to make official announcements.
======================================================================================= */</pre></td>
                </tr>
            </table>
        </a>
    </body>
</html>
