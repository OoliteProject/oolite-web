<html>
    <head>
        <title>Expansion Total patrol</title>
        <link rel="stylesheet" href="../style.css">
    </head>
    <body>
        <table border="0" width="100%">
            <tr>
                <td>Back to <a href='../index.html'>Index</a></td>
                <td align="right"><small>Page generated: Oct 11, 2023, 3:16:48 PM</small></td>
            </tr>
        </table>

        <h1>Expansion Total patrol</h1>

        <h2>Content</h2>
        <ul>
          
          <li><a href="#manifest">Manifest</a></li>
          <li><a href="#documentation">Documentation</a></li>
          <li><a href="#equipment">0 Equipment</a></li>
          <li><a href="#ships">0 Ships</a></li>
          <li><a href="#models">0 Models</a></li>
          <li><a href="#scripts">1 Scripts</a></li>
        </ul>


        <a name="manifest">
        <h2>Manifest</h2>
            <table border="1">
                <tr>
                    <th></th>
                    <th>from Expansion Manager's OXP list</th>
                    <th>from Expansion Manifest</th>
                </tr>
                <tr>
                    <td>Description</td>
                    <td>Makes additional police ships patrol between planet-sun and sun-witchpoint. Nowadays there are some without this addon also but more with this.</td>
                    <td>Makes additional police ships patrol between planet-sun and sun-witchpoint. Nowadays there are some without this addon also but more with this.</td>
                </tr>
                <tr>
                    <td>Identifier</td>
                    <td>oolite.oxp.Commander_McLane.Total_patrol</td>
                    <td>oolite.oxp.Commander_McLane.Total_patrol</td>
                </tr>
                <tr>
                    <td>Title</td>
                    <td>Total patrol</td>
                    <td>Total patrol</td>
                </tr>
                <tr>
                    <td>Category</td>
                    <td>Mechanics</td>
                    <td>Mechanics</td>
                </tr>
                <tr>
                    <td>Author</td>
                    <td>Commander McLane</td>
                    <td>Commander McLane</td>
                </tr>
                <tr>
                    <td>Version</td>
                    <td>1.4</td>
                    <td>1.4</td>
                </tr>
                <tr>
                    <td>Tags</td>
                    <td></td>
                    <td></td>
                </tr>
                <tr>
                    <td>Required Oolite Version</td>
                    <td></td>
                    <td></td>
                </tr>
                <tr>
                    <td>Maximum Oolite Version</td>
                    <td></td>
                    <td></td>
                </tr>
                <tr>
                    <td>Required Expansions</td>
                    <td>
                    </td>
                    <td>
                    </td>
                </tr>
                <tr>
                    <td>Optional Expansions</td>
                    <td>
                    </td>
                    <td>
                    </td>
                </tr>
                <tr>
                    <td>Conflict Expansions</td>
                    <td>
                    </td>
                    <td>
                    </td>
                </tr>
                <tr>
                    <td>Information URL</td>
                    <td><a target="_blank" href="http://wiki.alioth.net/index.php/Total_patrol_OXP">http://wiki.alioth.net/index.php/Total_patrol_OXP</a></td>
                    <td><a target="_blank" href="">n/a</a></td>
                </tr>
                <tr>
                    <td>Download URL</td>
                    <td><a target="_blank" href="https://wiki.alioth.net/img_auth.php/e/e7/Total_patrol_1.4.oxz">https://wiki.alioth.net/img_auth.php/e/e7/Total_patrol_1.4.oxz</a></td>
                    <td><a target="_blank" href="">n/a</a></td>
                </tr>
                <tr>
                    <td>License</td>
                    <td>CC BY-NC-SA 3.0</td>
                    <td>CC BY-NC-SA 3.0</td>
                </tr>
                <tr>
                    <td>File Size</td>
                    <td>n/a</td>
                </tr>
                <tr>
                    <td>Upload date</td>
                    <td>1610873502</td>
                </tr>
            </table>
                </a>

        <a name="documentation">
        <h2>Documentation</h2>
        <p>Also read <a href='http://wiki.alioth.net/index.php/Total%20patrol'>http://wiki.alioth.net/index.php/Total%20patrol</a></p>
        <h3>readMe.rtf</h3>
        <pre>{\rtf1\ansi\ansicpg1252\cocoartf1038\cocoasubrtf350
\readonlydoc1{\fonttbl\f0\fswiss\fcharset0 Helvetica;}
{\colortbl;\red255\green255\blue255;}
\paperw11905\paperh16837\margl1440\margr1440\vieww12720\viewh8880\viewkind0
\pard\tx566\tx1133\tx1700\tx2267\tx2834\tx3401\tx3968\tx4535\tx5102\tx5669\tx6236\tx6803\qc\pardirnatural

\f0\b\fs26 \cf0 \ul \ulc0 total_patrol v 1.4
\b0 \ulnone \
\
by &quot;Commander McLane&quot;\
\
\
an Expansion Pack for Oolite by Giles Williams\
\
based on &quot;Elite&quot; by Ian Bell and David Braben\
\pard\tx566\tx1133\tx1700\tx2267\tx2834\tx3401\tx3968\tx4535\tx5102\tx5669\tx6236\tx6803\ql\qnatural\pardirnatural
\cf0 \
\
\ul Overview\ulnone \
\
This OXP replaces the AIs of police ships with a new AI that lets them patrol all main routes in a system. It also adds additional police, in order to compensate for the much bigger area that has to be covered by the patrols.\
\
\ul Notable Features\ulnone \
\
In the unaltered game police (and hunters) only patrol between planet and witchpoint, disregarding the other two main routes in the system, between witchpoint and sun, and between sun and planet. Even police that is added by script on one of these alternative routes, will abandon them in favour of the witchpoint-planet route.\
\
This OXP changes the built-in police behaviour by replacing the default police AI (route1patrolAI) with the new totalPatrolAI, which covers all three main routes, and gives the possibility for police ships to either turn around and fly back, or switch to another route at each of the turning points. They still favour the traditional witchpoint-planet route, however, because it is usually most populated by traders and most prone to pirate attacks. Note that this OXP affects all ships with primary role &#39;police&#39;, including police added by other OXPs.\
\
The OXP also adds additional police on the other two routes between witchpoint and sun, and between sun and planet. The additional police also gets totalPatrolAI. Each ship will then travel in either direction on its current route, and possibly switch to another route at the end-point. The number of added police forces depends on the system government; Corporate States get most additional police, Anarchies get none.\
\
All police ships also get a Heat Shield, enabling them to extend their patrols to the sun routes without getting themselves into danger.\
\
The way police are doing their business, hunting down criminals and protecting the innocent, is not affected by this OXP. So, if you are a law-abiding trader, the Ooniverse will become a safer place. However, if you are a brigand and have specialised on sun-skimmers as your victims, your business will become more dangerous.\
\
\ul Minimum Requirements\ulnone \
\
Total_patrol.oxp since v 1.3 uses a new way of identifying the police ships in a system, in order to switch their AI. This was introduced with Oolite 1.74, therefore it requires at least this version of Oolite. I recommend you upgrade to the latest version of Oolite.\
\
\ul Download Location\ulnone \
\
This OXP is available for download via the {\field{\*\fldinst{HYPERLINK &quot;http://wiki.alioth.net/index.php/Total_patrol_OXP&quot;}}{\fldrslt Elite Wiki}}.\
\
\ul Installation\ulnone \
\
Move or copy the file total_patrol.oxp from this folder to the AddOns folder inside the Oolite main folder. Restart Oolite.\
\
\ul Acknowledgements\ulnone \
\
Thanks to Eric Walch who\&#39;97as always\&#39;97generously helped with some scripting details. He is also constantly revising route1patrolAI, which serves as the basis for the totalPatrolAI of this OXP. And thanks to all the Oolite coders who are continuously working to make OXPs like this possible.\
\
\ul License\ulnone \
\
This work is licensed under the Creative\&#39;a0Commons Attribution-NonCommercial-ShareAlike License version 3.0. For more information see the ReadMe of Oolite or the {\field{\*\fldinst{HYPERLINK &quot;http://creativecommons.org/licenses/by-nc-sa/3.0/&quot;}}{\fldrslt Creative Commons&#39; website}}.\
\
Practically this means that you may rip it apart and use whatever seems useful to you, as long as you credit the original author. It would be nice\&#39;97although by no means necessary\&#39;97to give me a note, if you intend to use parts of it.\
\
\ul History\ulnone \
\
version 1.4 (March 1st, 2011)\
- put self-defined script functions in their own namespace\
- raised heat shielding a little\
- AI adjusted according to Oolite 1.75 route1patrolAI\
- but still requires only Oolite 1.74\
\
version 1.3 (November 14th, 2010)\
- removed the max_version key in requires.plist\
- the AI switch is now handled by the shipSpawned event handler, and will therefore reliably catch all police ships, whenever spawned\
- AI adjusted according to the current post-Oolite 1.74 trunk route1patrolAI\
- requires now Oolite 1.74\
\
version 1.2 (September 2nd, 2009)\
- made it Oolite 1.73 compliant\
- therefore requires now Oolite 1.73\
\
version 1.1 (December 30th, 2008)\
- added correct initialisation if a new commander is started\
\
version 1.0 (November 27th, 2008)\
- fully functional version\
- requires Oolite 1.72\
}</pre>
        </a>

        <a name="equipment">          
        <h2>Equipment</h2>
            This expansion declares no equipment. 
        </a>

        <a name="ships">    
        <h2>Ships</h2>
            This expansion declares no ships. 
        </a>

        <a name="models">    
        <h2>Models</h2>
            This expansion declares no models. 
        </a>

        <a name="scripts">    
        <h2>Scripts</h2>
            <table>
                <tr>
                    <th>Path</th>
                </tr>
                <tr>
                    <td valign="top">Config/script.js</td>
                    <td><pre>/*

script.js

Script for total_patrol.oxp.


Oolite
Copyright © 2004-2011 Giles C Williams and contributors

This program is free software; you can redistribute it and/or
modify it under the terms of the GNU General Public License
as published by the Free Software Foundation; either version 2
of the License, or (at your option) any later version.

This program is distributed in the hope that it will be useful,
but WITHOUT ANY WARRANTY; without even the implied warranty of
MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
GNU General Public License for more details.

You should have received a copy of the GNU General Public License
along with this program; if not, write to the Free Software
Foundation, Inc., 51 Franklin Street, Fifth Floor, Boston,
MA 02110-1301, USA.


total_patrol.oxp
Copyright © 2011 &quot;Commander McLane&quot;

This work is licensed under the Creative Commons
Attribution-Noncommercial-Share Alike 3.0 Unported License.

To view a copy of this license, visit
http://creativecommons.org/licenses/by-nc-sa/3.0/ or send a letter
to Creative Commons, 171 Second Street, Suite 300, San Francisco,
California, 94105, USA.

*/


this.name           = &quot;total_patrol&quot;;
this.description	= &quot;Script for switching all police ships to totalPatrolAI and adding a couple of police in systems.&quot;;
this.author         = &quot;Commander McLane&quot;;
this.copyright      = &quot;© 2011 Commander McLane&quot;;
this.license		= &quot;CC-by-nc-sa 3.0&quot;;
this.version        = &quot;1.3&quot;;


/* functions */

this.$spawnExtraPolice = function()
{
	if(!this.extraPoliceSpawned)
	{
		for(var i = 0; i &lt; system.government; i+=2)
		{
			log(&quot;Total_patrol&quot;, &quot;Adding additional police.&quot;);
			var newPolice = system.addShipsToRoute(&quot;police&quot;, 1, 0.1 + (Math.random() * 0.7), &quot;ws&quot;);
			newPolice[0].switchAI(&quot;totalPatrolAI.plist&quot;);
			newPolice[0].AIState = &quot;ENTRY_W_S&quot;;
			newPolice[0].heatInsulation = 4;
			newPolice = system.addShipsToRoute(&quot;police&quot;, 1, 0.1 + (Math.random() * 0.7), &quot;ps&quot;);
			newPolice[0].switchAI(&quot;totalPatrolAI.plist&quot;);
			newPolice[0].AIState = &quot;ENTRY_P_S&quot;;
			newPolice[0].heatInsulation = 4;
		}
		this.extraPoliceSpawned = true;
	}
}	

this.$switchPoliceAI = function(ship)
{
	if(ship.primaryRole === &quot;police&quot; &amp;&amp; (ship.AI === &quot;route1patrolAI.plist&quot; || ship.AI === &quot;route2patrolAI.plist&quot;))
	{
		ship.switchAI(&quot;totalPatrolAI.plist&quot;);
		ship.AIState = &quot;ENTRY_P_W&quot;;
		ship.heatInsulation = 4;
	}
}


/* event handlers */

this.shipExitedWitchspace = this.shipLaunchedFromStation = function()
{
	if(system.isInterstellarSpace) return;
	this.$spawnExtraPolice();
}

this.shipSpawned = function(ship)
{
	if(system.isInterstellarSpace) return;
	this.$switchPoliceAI(ship);
}

this.shipWillEnterWitchspace = this.startUp = function()
{
	delete this.extraPoliceSpawned;
}
</pre></td>
                </tr>
            </table>
        </a>
    </body>
</html>
