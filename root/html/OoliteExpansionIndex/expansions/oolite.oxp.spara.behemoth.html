<html>
    <head>
        <title>Expansion Behemoth</title>
        <link rel="stylesheet" href="../style.css">
    </head>
    <body>
        <table border="0" width="100%">
            <tr>
                <td>Back to <a href='../index.html'>Index</a></td>
                <td align="right"><small>Page generated: Oct 11, 2023, 3:16:49 PM</small></td>
            </tr>
        </table>

        <h1>Expansion Behemoth</h1>

        <h2>Content</h2>
        <ul>
          
          <li><a href="#manifest">Manifest</a></li>
          <li><a href="#documentation">Documentation</a></li>
          <li><a href="#equipment">0 Equipment</a></li>
          <li><a href="#ships">56 Ships</a></li>
          <li><a href="#models">0 Models</a></li>
          <li><a href="#scripts">6 Scripts</a></li>
        </ul>


        <a name="manifest">
        <h2>Manifest</h2>
            <table border="1">
                <tr>
                    <th></th>
                    <th>from Expansion Manager's OXP list</th>
                    <th>from Expansion Manifest</th>
                </tr>
                <tr>
                    <td>Description</td>
                    <td>Adds Galactic Navy Carriers to the game. Carriers include four different types of Behemoths and a Navy Class Carrier. In total 40 uniquely named carriers escorted by navy grade Vipers, Asps and Sidewinders.</td>
                    <td>Adds Galactic Navy Carriers to the game. Carriers include four different types of Behemoths and a Navy Class Carrier. In total 40 uniquely named carriers escorted by navy grade Vipers, Asps and Sidewinders.</td>
                </tr>
                <tr>
                    <td>Identifier</td>
                    <td>oolite.oxp.spara.behemoth</td>
                    <td>oolite.oxp.spara.behemoth</td>
                </tr>
                <tr>
                    <td>Title</td>
                    <td>Behemoth</td>
                    <td>Behemoth</td>
                </tr>
                <tr>
                    <td>Category</td>
                    <td>Dockables</td>
                    <td>Dockables</td>
                </tr>
                <tr>
                    <td>Author</td>
                    <td>ADCK, Aegidian, Griff, Eric Walch, PAGroove, SimonB, spara</td>
                    <td>ADCK, Aegidian, Griff, Eric Walch, PAGroove, SimonB, spara</td>
                </tr>
                <tr>
                    <td>Version</td>
                    <td>3.1.1</td>
                    <td>3.1.1</td>
                </tr>
                <tr>
                    <td>Tags</td>
                    <td></td>
                    <td></td>
                </tr>
                <tr>
                    <td>Required Oolite Version</td>
                    <td></td>
                    <td></td>
                </tr>
                <tr>
                    <td>Maximum Oolite Version</td>
                    <td></td>
                    <td></td>
                </tr>
                <tr>
                    <td>Required Expansions</td>
                    <td>
                    </td>
                    <td>
                    </td>
                </tr>
                <tr>
                    <td>Optional Expansions</td>
                    <td>
                    </td>
                    <td>
                    </td>
                </tr>
                <tr>
                    <td>Conflict Expansions</td>
                    <td>
                    </td>
                    <td>
                    </td>
                </tr>
                <tr>
                    <td>Information URL</td>
                    <td><a target="_blank" href="http://wiki.alioth.net/index.php/Behemoth">http://wiki.alioth.net/index.php/Behemoth</a></td>
                    <td><a target="_blank" href="">n/a</a></td>
                </tr>
                <tr>
                    <td>Download URL</td>
                    <td><a target="_blank" href="https://wiki.alioth.net/img_auth.php/f/f8/Behemoth_3.1.1.oxz">https://wiki.alioth.net/img_auth.php/f/f8/Behemoth_3.1.1.oxz</a></td>
                    <td><a target="_blank" href="">n/a</a></td>
                </tr>
                <tr>
                    <td>License</td>
                    <td>CC-BY-NC-SA 4.0</td>
                    <td>CC-BY-NC-SA 4.0</td>
                </tr>
                <tr>
                    <td>File Size</td>
                    <td>n/a</td>
                </tr>
                <tr>
                    <td>Upload date</td>
                    <td>1610873518</td>
                </tr>
            </table>
                </a>

        <a name="documentation">
        <h2>Documentation</h2>
        <p>Also read <a href='http://wiki.alioth.net/index.php/Behemoth'>http://wiki.alioth.net/index.php/Behemoth</a></p>
        <h3>readmes_old/</h3>
        <pre></pre>
        <h3>readmes_old/Behemoth Technical stuff.rtf</h3>
        <pre>{\rtf1\ansi\ansicpg1252\cocoartf1038\cocoasubrtf350
{\fonttbl\f0\fswiss\fcharset0 Helvetica;}
{\colortbl;\red255\green255\blue255;}
\paperw11900\paperh16840\margl1440\margr1440\vieww24480\viewh18940\viewkind0
\pard\tx566\tx1133\tx1700\tx2267\tx2834\tx3401\tx3968\tx4535\tx5102\tx5669\tx6236\tx6803\ql\qnatural\pardirnatural

\f0\b\fs48 \cf0 Behemoth.oxp
\b0\fs24 \
\
Behemoth is one of the classical additions, written by the grand master Aegidian himself. It took some hesitations to change anything on it. However Oolite evolves and it would be a shame that the Behemoth would not profit from it. With this release I try to make the behemoth a little bit stronger without really changing the ships specifications. Most changes are subtle behaviour changes.\
\
Most changes have to do with the defenders and not with the carrier itself. And a carrier by itself is a sitting duck. It needs good control over its defenders to protect their mother.\
\
Known bug in Oolite: After launch a carrier can&#39;t control its defenders. The command 
\b groupAttackTarget
\b0  never reaches the defenders. Reason was that groupID of the carrier was not set. (will be solved with oolite 1.72). By giving the behemoth escorts, the groupID becomes set and a 
\b groupAttackTarget
\b0  will be send to all defenders.\
\
Whenever a defender killed its target it was issuing a docking command, starting a receive-docking procedure  with the carrier. This disturbed good combat of the mother. Now it first heads towards the mother before asking to dock. When the mother is still busy fighting a 
\b groupAttackTarge
\b0 t command will in normal cases give the defender a new target before it asks for a docking.  (When a ship asks for docking the carrier cant refuse and will be set in a stopping mode. Only a new script command can set it back in attacking mode)\
\
Originally the carrier used a scanning mode that preferred thargoids then in interstellar space and defaulted to the route1patrolAI when in normal space. It now has a more specialised script that also is used in normal space. It still prefers thargoids in interstellar space and just offenders in normal space. Difference is that the first scan method will always find something and the second only with a chance based on the offender status. This is about the same as the old situation.\
\

\b With Oolite 1.71 new things start to happen. \

\b0 \
When attacked from large distance with a military laser the behemoth was really a sitting duck. It was large enough to hit from even just outside scanner range. When using two lasers, the carrier was killed before even a defender could reach the player. This could only solved by giving the defenders fuel and fuel-injectors. When a defender is launched under oolite 1.71+ a new ship script evaluates the distance to the target. When this is large it will send its AI a new message &quot;HURRY_UP&quot; that will make the defender use full injectors to go in the direction of the target before resuming attack mode. An elite player still can kill the behemoth from distance, but now he will be under attack when doing so.\
\
Same happens when a defender drifts away while pursuing an enemy. When it gets a &quot;group attack&quot; message and he is far away he will use fuel injectors to hurry up in direction of the target. This results in better protection of the carrier. First priority of defenders should be to kill those ships that attack their mother. Second priority is to just kill offenders.\
\
Since 1.71 Oolite recognises cloaking as such. Whenever a carrier target cloaks, the identity is stored and every few seconds it checks if it already has de-cloaked. At that moment the carrier and his defenders continue their attack on the de-cloaked ship.\
\

\b Docking problems\

\b0 Any ship can ask for docking and put the behemoth to halt. It sometimes happens with far away, strange ships that just call for docking at the nearest station. This leaves the behemoth than hanging idle for some time till the ship arrives. I tried to solve this the following way.\
Whenever a ship uses the command 
\b requestDockingCoordinates
\b0 , the receiving ship checks if it is moving. If yes, it puts itself into a 
\b performStop
\b0  mode and sends the docking ship a 
\b HOLD_POSITION
\b0  message and itself a 
\b  DOCKING_REQUESTED
\b0   message.\
\
From here on there are two options. Just accept the docking and put  the AI in en state were docking is handled. Even during an attack this would be allowable. The behemoth is to slow anyhow to follow an victim. As a carrier it better launches a few vipers to continue the attack. It just needs to track the targets and send 
\b groupAttackTarget
\b0  messages to the defenders.\
I chose to continue the attack. Using a 
\b performAttack
\b0  as immediate response on a 
\b DOCKING_REQUESTED
\b0  didn&#39;t work. It still stops. This has technical reasons. The message is a priority message that is reacted upon immediately. Only after this reaction, the main code issues the 
\b performStop
\b0  command. I bypassed this by issuing a 
\b scanForHostiles
\b0  command. When there is an attack in progress it will find something and the TARGET_FOUND message will restart the 
\b performAttack
\b0 . During testing this worked well. By also issuing an 
\b groupAttackTarget
\b0  messages the defenders that asked for docking also get a new target. I reprogrammad the code for distant defenders so the first head in direction of the behemoth and only ask for docking when already close. Only strange ships can still ask for docking. Badly programmed ships can even ask for docking from the other side of the system instead of first approaching. When they are in the 
\b dockingAI.plist,
\b0  they will continue to ask for docking every 10 seconds. \
\
Eric Walch\
July 2008\
\
-------\
\
December 2010:\
Removed all dependencies with Oolite 1.65. Added new AI commands, that are no longer compatible with this old Oolite version. Removed the turret model as this is now part of Oolite itself.}</pre>
        <h3>readmes_old/Behemoth.readMe.rtf</h3>
        <pre>{\rtf1\ansi\ansicpg1252\cocoartf1265
\cocoascreenfonts1{\fonttbl\f0\fswiss\fcharset0 Helvetica;\f1\fnil\fcharset0 Verdana;}
{\colortbl;\red255\green255\blue255;\red249\green249\blue249;\red68\green68\blue68;\red0\green104\blue153;
}
\paperw11900\paperh16840\margl1440\margr1440\vieww25400\viewh14520\viewkind0
\deftab720
\pard\pardeftab720\sl380\sa220

\f0\b\fs44 \cf0 Behemoth.oxp\

\b0\fs22 Version 2.6.1 by Aegidian
\fs38 \
Overview\
\pard\pardeftab720\sl380\sa120

\fs26 \cf0 The Behemoth-class starship is GalCop&#39;s mainstay battleship. Fitted with 8 ball turrets (usually armed with plasma cannons), and with a belly full of Viper interceptors, the ship is a formidable opponent for humans and Thargoids alike. Most Behemoth-class vessels are currently assigned to planetary patrol/search and rescue. During peacetime, the Behemoth accepts civilian traffic at its docking port, the military engineers providing the best overhaul/repair facilities to be found. Repairs, fuel and equipment are expensive at these facilities, typically twice the amount that you would pay at a civilian space station.\
\
\pard\pardeftab720\sl380\sa220

\fs38 \cf0 Notable features\
\pard\pardeftab720\sl380\sa120

\fs26 \cf0 The first impression is 
\i size
\i0 . The class is called Behemoth for good reason - the ship must be sized appropriately to carry numerous interceptors. However, for fugitives, this impression is not long lasting. If an unfortunate pirate vessel should come too close to a Behemoth, it will open up with its formidable weaponry. While plasma cannons are somewhat rare on small ships (and also fairly ineffective), the large cannons carried by a Behemoth literally fill the space around the targetted vessel with searing plasma, which quickly strips shields and tears through duralium. Many a fugitive has been caught unawares - the plasma bolts seen against the bulk of this ship look tiny and ineffective, and are paid little attention until they begin to impact.\
\pard\pardeftab720\sl380\qc

\fs22 \cf0 \cb2 \
\pard\pardeftab720\sl380\sa120

\fs26 \cf0 \cb1 If a full broadside fired by the Behemoth doesn&#39;t get a fugitive&#39;s attention, the Vipers that begin launching certainly will. The Behemoth is as well defended by Vipers as any space station in a wealthy star system.\
The Behemoth has a surprising turn of speed; large ships such as this are generally limited to very low velocities to prevent the frequent strikes of small meteorites from causing serious damage. However, the Behemoth is fitted with military shields (the shield generation plant alone accounts for a full third of the giant ship&#39;s mass), and the Behemoth can survive a high speed collision with asteroids up to three tonnes in mass without taking any damage.\
\
\pard\pardeftab720\sl380\sa120

\b \cf0 ========================================
\b0 \
\
\pard\pardeftab720\sl260

\f1\fs22 \cf3 behemoth-v2.6.1\
\
Files: \
\
behemoth.oxp \
readMe \
\
Compatibility: \
\
This OXP is by Aegidian (oolite@aegidian.org) it works with Oolite version 1.73 or higher. \
\
Install: \
\
Move the behemoth.oxp bundle (or folder if you are using GNU/Linux or windows) into the Oolite AddOns folder. \
\
Details: \
\
Behemoth Class carriers are the dreadnoughts of the Imperial Navy. There are currently sixteen in service, mostly patrolling intersystem space where their Asps and Vipers are used to counter the Thargoid threat. \
\
Half these ships are of the older INB01 class, but construction has recently been completed of the eight newer INB21 class behemoths. \
\
\
\pard\pardeftab720\sl260
\cf3 Version 2.6.1:\
Fixed a casing error inside  the behemothFighterDockingAI.plist \
\pard\pardeftab720\sl260
\cf3 \
\
Version 2.6:\
Added the new detection for launching ships that allows to shortly freeze the pitch movement during launch in combat.\
Fixed a casing bug that was ignored in older Oolite versions but will give an error report after Oolite 1.74.2\
Raised minimum Oolite to 1.73\
\
Version 2.5.4:\
Corrected bug with the &quot;behemoth-nimrod&quot;. That role was missing since at least version 2.3.\
\
Version 2.5.3:\
Corrected error in cloaking detection script.\
\
Version 2.5.2:\
Small changes for better compatibility with groups in Oolite 1.73.\
Corrected the commodity list. (Never worked since 2.0.0 ?)\
\
Version 2.5.1:\
Turned the docking slid of the type-2 ships 90 degrees. This one has always been wrong!\
\
Version 2.5:\
Adapted to Oolite 1.72. (will work with 1.65 and 1.71+)\
Added code to make sure it also uses its new scripting when added as a hunter.\
Changed the addition script for interstellar space. More chance of having no behemoth at all in interstellar space after a miss-jump. Greater chance of getting unique named behemoth&#39;s after multiple miss-jumps.\
\
Version 2.4: \
\
Changes by Eric Walch: Implemented new features for oolite 1.71. Ships now have a script of their own. Improved AI scripting of both Behemoth and the fighters. Behemoths will now avoid obstacles when patrolling in normal space. This will make manual docking in the front side of a moving Behemoth impossible. Behemoths now have two escort ships and the defenders have fuel injectors.\
\
Version 2.3: \
\
Fixes a bug which could cause the AI stack to overflow. \
\
Version 2.2: \
\
REALLY fixes the problems with the Behemoth&#39;s docks (Behemoths were frangible and the docks were being shot away!) \
\
Version 2.1: \
\
Fixes the problems with the Behemoth&#39;s docks. \
\
License: \
\
The textures, models and plist texts are all copyright Giles Williams 2004-2006 and available for reuse under the Creative Commons Attribution-NonCommercial-ShareAlike License 2.0. \
\
This work is licensed under the Creative Commons Attribution-NonCommercial-ShareAlike License. \
To view a copy of this license, visit {\field{\*\fldinst{HYPERLINK &quot;http://creativecommons.org/licenses/by-nc-sa/2.0/&quot;}}{\fldrslt \cf4 \ul \ulc4 http://creativecommons.org/licenses/by-nc-sa/2.0/}} \
or send a letter to Creative Commons, 559 Nathan Abbott Way, Stanford, California 94305, USA. \
\
You are free: \
\
\&#39;95 to copy, distribute, display, and perform the work \
\&#39;95 to make derivative works \
\
Under the following conditions: \
\
\&#39;95 Attribution. You must give the original author credit. \
\
\&#39;95 Non-commercial. You may not use this work for commercial purposes. \
\
\&#39;95 Share Alike. If you alter, transform, or build upon this work, \
you may distribute the resulting work only under a license identical to this one. \
\
For any reuse or distribution, you must make clear to others the license terms of this work. \
\
Any of these conditions can be waived if you get permission from the copyright holder. \
\
Your fair use and other rights are in no way affected by the above.}</pre>
        </a>

        <a name="equipment">          
        <h2>Equipment</h2>
            This expansion declares no equipment. 
        </a>

        <a name="ships">    
        <h2>Ships</h2>
            <table>
                <tr>
                    <th>Name</th>
                </tr>
                <tr>
                    <td><a href="../ships/behe3_griff_dockingbay.html">Behemoth docking bay</a></td>
                </tr>
                <tr>
                    <td><a href="../ships/behemoth-Colossus.html">behemoth-Colossus</a></td>
                </tr>
                <tr>
                    <td><a href="../ships/behemoth-argus.html">behemoth-argus</a></td>
                </tr>
                <tr>
                    <td><a href="../ships/behemoth-asp-fighter.html">Navy Asp Mark II</a></td>
                </tr>
                <tr>
                    <td><a href="../ships/behemoth-atlas.html">behemoth-atlas</a></td>
                </tr>
                <tr>
                    <td><a href="../ships/behemoth-bolverk.html">behemoth-bolverk</a></td>
                </tr>
                <tr>
                    <td><a href="../ships/behemoth-geryon.html">behemoth-geryon</a></td>
                </tr>
                <tr>
                    <td><a href="../ships/behemoth-gog.html">behemoth-gog</a></td>
                </tr>
                <tr>
                    <td><a href="../ships/behemoth-goliath.html">behemoth-goliath</a></td>
                </tr>
                <tr>
                    <td><a href="../ships/behemoth-grid.html">behemoth-grid</a></td>
                </tr>
                <tr>
                    <td><a href="../ships/behemoth-loki.html">behemoth-loki</a></td>
                </tr>
                <tr>
                    <td><a href="../ships/behemoth-magog.html">behemoth-magog</a></td>
                </tr>
                <tr>
                    <td><a href="../ships/behemoth-nimrod.html">behemoth-nimrod</a></td>
                </tr>
                <tr>
                    <td><a href="../ships/behemoth-surt.html">behemoth-surt</a></td>
                </tr>
                <tr>
                    <td><a href="../ships/behemoth-talos.html">behemoth-talos</a></td>
                </tr>
                <tr>
                    <td><a href="../ships/behemoth-tethys.html">behemoth-tethys</a></td>
                </tr>
                <tr>
                    <td><a href="../ships/behemoth-titan.html">behemoth-titan</a></td>
                </tr>
                <tr>
                    <td><a href="../ships/behemoth-type1.html">Behemoth Type 1</a></td>
                </tr>
                <tr>
                    <td><a href="../ships/behemoth-type2.html">Behemoth Type 2</a></td>
                </tr>
                <tr>
                    <td><a href="../ships/behemoth-type3.html">Behemoth Type 3</a></td>
                </tr>
                <tr>
                    <td><a href="../ships/behemoth-type4.html">Behemoth Type 4</a></td>
                </tr>
                <tr>
                    <td><a href="../ships/behemoth-viper-fighter.html">Navy Viper</a></td>
                </tr>
                <tr>
                    <td><a href="../ships/behemoth-ymir.html">behemoth-ymir</a></td>
                </tr>
                <tr>
                    <td><a href="../ships/behemoth_3-akdamut.html">behemoth_3-akdamut</a></td>
                </tr>
                <tr>
                    <td><a href="../ships/behemoth_3-oceanus.html">behemoth_3-oceanus</a></td>
                </tr>
                <tr>
                    <td><a href="../ships/behemoth_3-olympic.html">behemoth_3-olympic</a></td>
                </tr>
                <tr>
                    <td><a href="../ships/behemoth_3-phoebe.html">behemoth_3-phoebe</a></td>
                </tr>
                <tr>
                    <td><a href="../ships/behemoth_3-prometheus.html">behemoth_3-prometheus</a></td>
                </tr>
                <tr>
                    <td><a href="../ships/behemoth_3-ramesses-ii.html">behemoth_3-ramesses-ii</a></td>
                </tr>
                <tr>
                    <td><a href="../ships/behemoth_3-tarasque.html">behemoth_3-tarasque</a></td>
                </tr>
                <tr>
                    <td><a href="../ships/behemoth_3-titanic.html">behemoth_3-titanic</a></td>
                </tr>
                <tr>
                    <td><a href="../ships/behemoth_4-aphrodite.html">behemoth_4-aphrodite</a></td>
                </tr>
                <tr>
                    <td><a href="../ships/behemoth_4-athena.html">behemoth_4-athena</a></td>
                </tr>
                <tr>
                    <td><a href="../ships/behemoth_4-demeter.html">behemoth_4-demeter</a></td>
                </tr>
                <tr>
                    <td><a href="../ships/behemoth_4-dionysus.html">behemoth_4-dionysus</a></td>
                </tr>
                <tr>
                    <td><a href="../ships/behemoth_4-hera.html">Behemoth - Hera</a></td>
                </tr>
                <tr>
                    <td><a href="../ships/behemoth_4-hestia.html">behemoth_4-hestia</a></td>
                </tr>
                <tr>
                    <td><a href="../ships/behemoth_4-poseidon.html">behemoth_4-poseidon</a></td>
                </tr>
                <tr>
                    <td><a href="../ships/behemoth_4-zeus.html">behemoth_4-zeus</a></td>
                </tr>
                <tr>
                    <td><a href="../ships/ncc_biggun.html">photon cannon</a></td>
                </tr>
                <tr>
                    <td><a href="../ships/ncc_bigturret.html">carrier turret</a></td>
                </tr>
                <tr>
                    <td><a href="../ships/ncc_carrier.html">Navy Class Carrier</a></td>
                </tr>
                <tr>
                    <td><a href="../ships/ncc_carrier-antiphates.html">ncc_carrier-antiphates</a></td>
                </tr>
                <tr>
                    <td><a href="../ships/ncc_carrier-damasen.html">ncc_carrier-damasen</a></td>
                </tr>
                <tr>
                    <td><a href="../ships/ncc_carrier-elatreus.html">ncc_carrier-elatreus</a></td>
                </tr>
                <tr>
                    <td><a href="../ships/ncc_carrier-geryones.html">ncc_carrier-geryones</a></td>
                </tr>
                <tr>
                    <td><a href="../ships/ncc_carrier-mylinos.html">ncc_carrier-mylinos</a></td>
                </tr>
                <tr>
                    <td><a href="../ships/ncc_carrier-orion.html">ncc_carrier-orion</a></td>
                </tr>
                <tr>
                    <td><a href="../ships/ncc_carrier-steropes.html">ncc_carrier-steropes</a></td>
                </tr>
                <tr>
                    <td><a href="../ships/ncc_carrier-typhoeus.html">ncc_carrier-typhoeus</a></td>
                </tr>
                <tr>
                    <td><a href="../ships/ncc_dock.html">ncc dock</a></td>
                </tr>
                <tr>
                    <td><a href="../ships/ncc_middle_part.html">ncc middle part</a></td>
                </tr>
                <tr>
                    <td><a href="../ships/ncc_nswx-peng.html">Sidewinder X Port Engine</a></td>
                </tr>
                <tr>
                    <td><a href="../ships/ncc_nswx-seng.html">Sidewinder X Starboard Engine</a></td>
                </tr>
                <tr>
                    <td><a href="../ships/ncc_sidewinder.html">Navy Sidewinder</a></td>
                </tr>
                <tr>
                    <td><a href="../ships/ncc_thargon_collector.html">Navy Thargon Collector</a></td>
                </tr>
            </table>
        </a>

        <a name="models">    
        <h2>Models</h2>
            This expansion declares no models. 
        </a>

        <a name="scripts">    
        <h2>Scripts</h2>
            <table>
                <tr>
                    <th>Path</th>
                </tr>
                <tr>
                    <td valign="top">Config/script.js</td>
                    <td><pre>&quot;use strict&quot;;

this.name        = &quot;behemoth&quot;; 
this.author      = &quot;Aegidian&quot;; 
this.copyright   = &quot;2008 - 2014 the Oolite team.&quot;; 
this.description = &quot;Addition script of the Behemoth carrier in Witchspace.&quot;; 

this.behemoth  = [&quot;behemoth-ymir&quot;, &quot;behemoth-argus&quot;, &quot;behemoth-atlas&quot;, &quot;behemoth-grid&quot;, &quot;behemoth-surt&quot;, &quot;behemoth-talos&quot;, &quot;behemoth-tethys&quot;, &quot;behemoth-bolverk&quot;, &quot;behemoth-gog&quot;, &quot;behemoth-magog&quot;, &quot;behemoth-titan&quot;, &quot;behemoth-loki&quot;, &quot;behemoth-goliath&quot;, &quot;behemoth-colossus&quot;, &quot;behemoth-nimrod&quot;, &quot;behemoth-geryon&quot;,&quot;behemoth-akdamut&quot;, &quot;behemoth-aphrodite&quot;, &quot;behemoth-athena&quot;, &quot;behemoth-demeter&quot;, &quot;behemoth-dionysus&quot;, &quot;behemoth-hera&quot;, &quot;behemoth-hestia&quot;, &quot;behemoth-oceanus&quot;, &quot;behemoth-olympic&quot;, &quot;behemoth-phoebe&quot;, &quot;behemoth-poseidon&quot;, &quot;behemoth-prometheus&quot;, &quot;behemoth-ramesses-ii&quot;, &quot;behemoth-tarasque&quot;, &quot;behemoth-titanic&quot;,&quot;behemoth-zeus&quot;,&quot;behemoth-antiphates&quot;, &quot;behemoth-damasen&quot;, &quot;behemoth-elatreus&quot;, &quot;behemoth-geryones&quot;, &quot;behemoth-mylinos&quot;, &quot;behemoth-orion&quot;, &quot;behemoth-steropes&quot;, &quot;behemoth-typhoeus&quot;];

this.behemothList = this.behemoth.concat();

this.systemWillPopulate = function() {
	// don&#39;t add police ships in anarchies.
	if(Math.random() &lt; 0.015 * system.government)
		system.setPopulator(&quot;behemoth&quot;, {
			callback: function(pos) {
				system.addShips(this.uniqueBehemoth(),1,pos);
			}.bind(this),
			location: &quot;LANE_WP&quot;
		});
}


this.interstellarSpaceWillPopulate = function() {
	//(0 to 3 ships with distribution towards 0)
	var number = Math.floor(Math.random()*Math.random()*4.5);
	system.setPopulator(&quot;behemoth&quot;, {
		callback: function(pos) {
			//spread &#39;em up a bit
			system.addShips(this.uniqueBehemoth(),1,pos.add(Vector3D.randomDirection(25000)));
		}.bind(this),
		groupCount: number
	});
}

this.uniqueBehemoth = function()
{
    if(this.behemothList.length === 0) this.behemothList = this.behemoth.concat(); // reset the list
    return this.behemothList.splice(Math.floor(Math.random()*this.behemothList.length), 1);
    // Make sure that every time a ship with new name is pulled of the list.
}

this.addBehemoth = function (role) 
{
    this.behemoth.push(role);
    this.behemothList.push(role);
}

/*
You can check from an other JS script if behemoth.oxp is installed with: if(worldScripts.behemoth)
Or you can get any of the behemoth names with: worldScripts.behemoth.behemoth[i]
Or an unique behemoth role with: worldScripts.behemoth.uniqueBehemoth()
this.uniqueBehemoth() is added in versio 2.5. and should stay in in future.
*/
</pre></td>
                </tr>
                <tr>
                    <td valign="top">Scripts/behemoth-carrier.js</td>
                    <td><pre>&quot;use strict&quot;;

this.name      = &quot;behemoth_carrier&quot;; 
this.author    = &quot;eric walch&quot;; 
this.copyright = &quot;� 2008 the Oolite team.&quot;;
this.description = &quot;ship script for the behemoth of aegidean&quot;;

this.shipSpawned = function() {
	this.ship.displayName = this.ship.name + &quot;: &quot; + this.ship.scriptInfo.name;
}

this.shipTargetCloaked = function ()
{
    this.cloakedTarget = this.ship.target;
    if(this.cloakingTimer) this.cloakingTimer.start()
    else this.cloakingTimer = new Timer(this, this.statusCheck, 1, 1);
};

this.statusCheck = function ()
{
    if (!this.ship || !this.ship.isValid) this.cloakingTimer.stop();
    if (this.cloakedTarget) 
    { 
        if (this.cloakedTarget.isCloaked) return;
        else 
        { 
            this.ship.target = this.cloakedTarget; 
            this.ship.reactToAIMessage(&quot;TARGET_DECLOAKED&quot;); 
        } 
    } 
    if (this.cloakingTimer) 
    { 
        this.cloakingTimer.stop(); 
        delete this.cloakingTimer; 
    } 
};

this.playerWillEnterWitchspace = this.shipDied = function ()
{
    if (this.cloakingTimer) {this.cloakingTimer.stop(); delete this.cloakingTimer}
};

//6.12.14: function isCloaked moved to the toplevel of the function to follow strict js rules -spara-
this.shipBeingAttackedByCloaked = function ()
{
	function isCloaked(entity) {
		return (entity.isShip &amp;&amp; entity.isCloaked);
	};
    if (!this.cloakedTarget)
    {
        this.cloakedTarget = system.filteredEntities(this, isCloaked, this.ship)[0];
    };
    if (this.cloakedTarget &amp;&amp; this.cloakedTarget.isCloaked)
    {
        if (this.cloakingTimer) this.cloakingTimer.start()
        else this.cloakingTimer = new Timer(this, this.statusCheck, 1, 1);
    };
};

this.shipBeingAttacked = this.offenceCommittedNearby = function (who)
{
	if (this.ship.target &amp;&amp; this.ship.target != who &amp;&amp; (who.bounty * who.maxEnergy &gt; this.ship.target.bounty * this.ship.target.maxEnergy || who.isPlayer) &amp;&amp; who.scanClass !== &quot;CLASS_POLICE&quot;)
    {
         this.ship.reactToAIMessage(&quot;SWITCH_TARGET&quot;);
         this.ship.target = who;
    }
};

</pre></td>
                </tr>
                <tr>
                    <td valign="top">Scripts/behemoth-fighter.js</td>
                    <td><pre>&quot;use strict&quot;;

this.name      = &quot;behemoth_fighter&quot;; 
this.author    = &quot;eric walch&quot;; 
this.copyright = &quot;� 2008 the Oolite team.&quot;;
this.description = &quot;ship script for the behemoth.oxp of aegidean&quot;;
this.version   = &quot;1.03&quot;;

/*
Escorts added with scanClass CLASS_POLICE always start with a wingman role. However, with scanning for a formationleader they only accept a ship with role police as a mother. When not available, a wingman becomes role police. All next wingmen will now see a ship with role police and will follow him.  By this mechanisme the Behemoth itself looses all its escorts (wingmen). 
Therefor explicit set the role of these behemoth escorts as escort on spawning. spawnedAsEscort() trigers before shipSpawned().
&quot;TARGET_LOST&quot; is removed from its custom AI.
*/
this.spawnedAsEscort = function (mother)
{
    this.ship.switchAI(&quot;behemothEscortAI.plist&quot;)
    this.ship.primaryRole = &quot;escort&quot;
    this.ship.AIState =&quot;FLYING_ESCORT&quot;
    if (mother.group &amp;&amp; mother.group.ships.indexOf(this.ship)&lt;0) mother.group.addShip(this.ship);
}


this.shipLaunchedFromStation = function ()
{
    if (!this.ship.target)
    {
        this.ship.reactToAIMessage(&quot;TARGET_LOST&quot;);
        // player could be attacking cloaked, then defenders launch without target.
    }
    else
    {
        if (this.ship.target.position.distanceTo(this.ship) &gt; 6000) this.ship.reactToAIMessage(&quot;HURRY_UP&quot;);
    }
}

this.shipBeingAttacked = function (whom)
{
    {
        if (whom &amp;&amp; this.ship.position.distanceTo(whom) &gt; 15000) this.ship.reactToAIMessage(&quot;HURRY_UP&quot;);
        // this event is even received when attacked out of scanner range. This will send ship
        // in direction of attacker before going in attack mode.
        this.attacker = whom;
    }
}

this.shipLostTarget = this.shipTargetLost = function (whom)  // shipLostTarget() is deprecated since 1.74
{
    if (this.attacker &amp;&amp; this.attacker.isShip &amp;&amp;this.ship.AIState !== &quot;FLYING_ESCORT&quot;)
    {
        this.ship.target = this.attacker;
        this.ship.reactToAIMessage(&quot;HURRY_UP&quot;);
    }
}

this.offenceCommittedNearby = function (who)
{
    if (this.ship.target &amp;&amp; this.ship.target.scanClass === &quot;CLASS_CARGO&quot; &amp;&amp; who.scanClass !== &quot;CLASS_POLICE&quot;) 
    {
        this.ship.target = who;
    }
    // targetting cargo only happens with tharglets and not on police ships that accidently fired.
    // and in the heat of the fight a lof of friendly fire takes place.
}
</pre></td>
                </tr>
                <tr>
                    <td valign="top">Scripts/behemoth-market.js</td>
                    <td><pre>&quot;use strict&quot;;

this.name = &quot;behemoth-market&quot;;
this.author = &quot;spara&quot;;
this.copyright = &quot;2015 spara&quot;;
this.license     = &quot;CC BY-NC-SA 4.0&quot;; 

this.$limits = {
      &quot;food&quot; : [48, 52],
      &quot;textiles&quot; : [72, 84],
      &quot;radioactives&quot; : [372, 400],
      &quot;liquor_wines&quot; : [332, 424],
      &quot;luxuries&quot; : [704, 764],
      &quot;computers&quot; : [596, 608],
      &quot;machinery&quot; : [468, 496],
      &quot;alloys&quot; : [312, 436],
      &quot;gold&quot; : [348, 376],
      &quot;platinum&quot; : [616, 740],
      &quot;gem_stones&quot; : [160, 220],
      &quot;alien_items&quot; : [780, 904]
};

this.updateLocalCommodityDefinition = function(goodDefinition) {
	var commodity = goodDefinition.key;
	var limits = this.$limits[commodity];
	//definition found for the good. calculate it with a simple rounding of a flat probability.
	if (limits) {
		goodDefinition.price = limits[0] + Math.round(Math.random() * (limits[1] - limits[0]));
		goodDefinition.quantity = 0;
		goodDefinition.capacity = 31;//not much storage
	}
	//no definition found. nullify the goods.
	else {
		goodDefinition.price = 0;
		goodDefinition.quantity = 0;
		goodDefinition.capacity = 0;
	}	
	return goodDefinition;
};
</pre></td>
                </tr>
                <tr>
                    <td valign="top">Scripts/ncc_carrier.js</td>
                    <td><pre>&quot;use strict&quot;;

this.name      = &quot;ncc_carrier&quot;; 
this.author    = &quot;spara&quot;; 
this.copyright = &quot;2014 Mika Spåra, Eric Walch&quot;;
this.description = &quot;ship script for navy class carrier&quot;;
this.licence     = &quot;CC BY-NC-SA 3.0&quot;;

this.shipSpawned = function () {
	this.ship.displayName = this.ship.name + &quot;: &quot; + this.ship.scriptInfo.name;
	this.$scanTimer = new Timer(this, this.$scanForThargons, 0, 10);
}

this.$collectors = 3;

this.$scanForThargons = function () {
    function $isDeadThargon(entity)
    {
		if (entity.hasRole &amp;&amp; (entity.hasRole(&quot;tharglet&quot;) || entity.hasRole(&quot;thargon&quot;)) &amp;&amp; entity.isCargo) {
			return true;
		}
		return false;
    };
	if (this.$collectors &gt; 0) {
		if (ship.AI === &quot;nccCarrierInterceptAI.plist&quot; &amp;&amp; ship.AIState !== &quot;ATTACK_SHIP&quot;) {
			if (system.filteredEntities(this, $isDeadThargon, ship, 25600).length &gt; 0) {
				ship.launchShipWithRole(&quot;ncc-thargon-collector&quot;);
				this.$collectors--;
			}
		}
	}
};

this.otherShipDocked = function(whom)
{
     if (whom.hasRole(&quot;ncc-thargon-collector&quot;)) this.$collectors++;
}

//the rest is from behemoth-carrier.js script from behemoth oxp.

this.shipTargetCloaked = function ()
{
    this.cloakedTarget = this.ship.target;
    if(this.cloakingTimer) this.cloakingTimer.start()
    else this.cloakingTimer = new Timer(this, this.statusCheck, 1, 1);
};

this.statusCheck = function ()
{
    if (!this.ship || !this.ship.isValid) this.cloakingTimer.stop();
    if (this.cloakedTarget) 
    { 
        if (this.cloakedTarget.isCloaked) return;
        else 
        { 
            this.ship.target = this.cloakedTarget; 
            this.ship.reactToAIMessage(&quot;TARGET_DECLOAKED&quot;); 
        } 
    } 
    if (this.cloakingTimer) 
    { 
        this.cloakingTimer.stop(); 
        delete this.cloakingTimer; 
    } 
};

this.playerWillEnterWitchspace = this.shipDied = function ()
{
    if (this.cloakingTimer) {this.cloakingTimer.stop(); delete this.cloakingTimer}
};

this.shipBeingAttackedByCloaked = function ()
{
	function isCloaked(entity) {
		return (entity.isShip &amp;&amp; entity.isCloaked);
	};
    if (!this.cloakedTarget) {
        this.cloakedTarget = system.filteredEntities(this, isCloaked, this.ship)[0];
    };
    if (this.cloakedTarget &amp;&amp; this.cloakedTarget.isCloaked)
    {
        if (this.cloakingTimer) this.cloakingTimer.start()
        else this.cloakingTimer = new Timer(this, this.statusCheck, 1, 1);
    };
};

this.shipBeingAttacked = this.offenceCommittedNearby = function (who)
{
	if (this.ship.target &amp;&amp; this.ship.target != who &amp;&amp; (who.bounty * who.maxEnergy &gt; this.ship.target.bounty * this.ship.target.maxEnergy || who.isPlayer) &amp;&amp; who.scanClass !== &quot;CLASS_POLICE&quot;)
    {
         this.ship.reactToAIMessage(&quot;SWITCH_TARGET&quot;);
         this.ship.target = who;
    }
};

</pre></td>
                </tr>
                <tr>
                    <td valign="top">Scripts/ncc_collector.js</td>
                    <td><pre>&quot;use strict&quot;;

this.name      = &quot;ncc_thargon_collector&quot;; 
this.author    = &quot;spara&quot;; 
this.copyright = &quot;2013 Mika Spåra&quot;;
this.description = &quot;ship script for thargon collector&quot;;
this.licence     = &quot;CC BY-NC-SA 3.0&quot;;
this.version   = &quot;1.0&quot;;

this.shipSpawned = function () {
	this.$mother = system.shipsWithRole(&quot;behemoth&quot;, ship)[0];
	ship.primaryRole = &quot;defense_ship&quot;;
};

this.shipScoopedOther = function() {
	if (!this.$mother || ship.position.distanceTo(this.$mother) &gt; 25600)
		ship.AIState = &quot;DOCK_WITH_STATION&quot;;
}
</pre></td>
                </tr>
            </table>
        </a>
    </body>
</html>
